(self.webpackChunkpixtarAE=self.webpackChunkpixtarAE||[]).push([[179],{824:(u,f,m)=>{"use strict";var _=m(8929),C=m(4096),D=m(4202),G=m(6787),z=m(8117);function B(e){for(let t in e)if(e[t]===B)return t;throw Error("Could not find renamed property on target object.")}function Q(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function T(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(T).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function F(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const q=B({__forward_ref__:B});function R(e){return e.__forward_ref__=R,e.toString=function(){return T(this())},e}function N(e){return W(e)?e():e}function W(e){return"function"==typeof e&&e.hasOwnProperty(q)&&e.__forward_ref__===R}class V extends Error{constructor(t,n){super(function ie(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function pe(e){return"string"==typeof e?e:null==e?"":String(e)}function qe(e,t){throw new V(-201,!1)}function dn(e,t){null==e&&function Wt(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function ft(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Cn(e){return{providers:e.providers||[],imports:e.imports||[]}}function tr(e){return li(e,gr)||li(e,ao)}function li(e,t){return e.hasOwnProperty(t)?e[t]:null}function Vi(e){return e&&(e.hasOwnProperty(mo)||e.hasOwnProperty(lo))?e[mo]:null}const gr=B({\u0275prov:B}),mo=B({\u0275inj:B}),ao=B({ngInjectableDef:B}),lo=B({ngInjectorDef:B});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let Mi;function Xi(e){const t=Mi;return Mi=e,t}function co(e,t,n){const i=tr(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&bn.Optional?null:void 0!==t?t:void qe(T(e))}function Dr(e){return{toString:e}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),So=(()=>{return(e=So||(So={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",So;var e})();const Gi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qi={},Yn=[],ur=B({\u0275cmp:B}),xr=B({\u0275dir:B}),ho=B({\u0275pipe:B}),As=B({\u0275mod:B}),Qr=B({\u0275fac:B}),Go=B({__NG_ELEMENT_ID__:B});let ka=0;function oi(e){return Dr(()=>{const n=!0===e.standalone,i={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Yn,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||So.Emulated,id:"c"+ka++,styles:e.styles||Yn,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return r.inputs=rn(e.inputs,i),r.outputs=rn(e.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(nn).filter(kt):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(gi).filter(kt):null,r})}function nn(e){return Tn(e)||$i(e)}function kt(e){return null!==e}function Mt(e){return Dr(()=>({type:e.type,bootstrap:e.bootstrap||Yn,declarations:e.declarations||Yn,imports:e.imports||Yn,exports:e.exports||Yn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function rn(e,t){if(null==e)return qi;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}const Et=oi;function ki(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Tn(e){return e[ur]||null}function $i(e){return e[xr]||null}function gi(e){return e[ho]||null}function Eo(e,t){const n=e[As]||null;if(!n&&!0===t)throw new Error(`Type ${T(e)} does not have '\u0275mod' property.`);return n}function va(e){return Array.isArray(e)&&"object"==typeof e[1]}function Na(e){return Array.isArray(e)&&!0===e[1]}function nu(e){return 0!=(8&e.flags)}function iu(e){return 2==(2&e.flags)}function od(e){return 1==(1&e.flags)}function Fa(e){return null!==e.template}function j1(e){return 0!=(256&e[2])}function sd(e,t){return e.hasOwnProperty(Qr)?e[Qr]:null}class X1{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function gs(){return jg}function jg(e){return e.type.prototype.ngOnChanges&&(e.setInput=Vg),$1}function $1(){const e=Hf(this),t=e?.current;if(t){const n=e.previous;if(n===qi)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Vg(e,t,n,i){const r=Hf(e)||function Gf(e,t){return e[yp]=t}(e,{previous:qi,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new X1(l&&l.currentValue,t,s===qi),e[i]=t}gs.ngInherit=!0;const yp="__ngSimpleChanges__";function Hf(e){return e[yp]||null}function vo(e){for(;Array.isArray(e);)e=e[0];return e}function xp(e,t){return vo(t[e])}function M(e,t){return vo(t[e.index])}function K(e,t){return e.data[t]}function ne(e,t){return e[t]}function ae(e,t){const n=t[e];return va(n)?n:n[0]}function ge(e){return 64==(64&e[2])}function Fe(e,t){return null==t?null:e[t]}function Ke(e){e[18]=0}function Pt(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const st={lFrame:ou(null),bindingsEnabled:!0};function qo(){return st.bindingsEnabled}function Ut(){return st.lFrame.lView}function In(){return st.lFrame.tView}function Ln(e){return st.lFrame.contextLView=e,e[8]}function tn(e){return st.lFrame.contextLView=null,e}function Bi(){let e=eh();for(;null!==e&&64===e.type;)e=e.parent;return e}function eh(){return st.lFrame.currentTNode}function Ro(e,t){const n=st.lFrame;n.currentTNode=e,n.isParent=t}function ld(){return st.lFrame.isParent}function La(){st.lFrame.isParent=!1}function uo(){const e=st.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function th(){return st.lFrame.bindingIndex++}function Xl(e){const t=st.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function rl(e,t){const n=st.lFrame;n.bindingIndex=n.bindingRootIndex=e,qf(t)}function qf(e){st.lFrame.currentDirectiveIndex=e}function Xf(){return st.lFrame.currentQueryIndex}function $l(e){st.lFrame.currentQueryIndex=e}function $f(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Ql(e,t,n){if(n&bn.SkipSelf){let r=t,o=e;for(;!(r=r.parent,null!==r||n&bn.Host||(r=$f(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,e=o}const i=st.lFrame=ih();return i.currentTNode=t,i.lView=e,!0}function wp(e){const t=ih(),n=e[1];st.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ih(){const e=st.lFrame,t=null===e?null:e.child;return null===t?ou(e):t}function ou(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function su(){const e=st.lFrame;return st.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Mp=su;function Qf(){const e=su();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function is(){return st.lFrame.selectedIndex}function xc(e){st.lFrame.selectedIndex=e}function zr(){const e=st.lFrame;return K(e.tView,e.selectedIndex)}function an(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),c&&((e.viewHooks||(e.viewHooks=[])).push(n,c),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,c)),null!=d&&(e.destroyHooks||(e.destroyHooks=[])).push(n,d)}}function Mn(e,t,n){Wi(e,t,3,n)}function jn(e,t,n,i){(3&e[2])===n&&Wi(e,t,n,i)}function Pn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Wi(e,t,n,i){const o=i??-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&e[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[18]+=65536),(a<o||-1==o)&&(ye(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function ye(e,t,n,i){const r=n[i]<0,o=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}const L=-1;class J{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Kl(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{const o=r,s=n[++i];eN(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function Wg(e){return 3===e||4===e||6===e}function eN(e){return 64===e.charCodeAt(0)}function mx(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||tN(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function tN(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function nN(e){return e!==L}function qg(e){return 32767&e}function Yg(e,t){let n=function wZ(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let uS=!0;function gx(e){const t=uS;return uS=e,t}let MZ=0;const rh={};function J1(e,t){const n=fS(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,pS(i.data,e),pS(t,null),pS(i.blueprint,null));const r=vx(e,t),o=e.injectorIndex;if(nN(r)){const s=qg(r),a=Yg(r,t),l=a[1].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function pS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function fS(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function vx(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=hN(r),null===i)return L;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return L}function yx(e,t,n){!function PZ(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Go)&&(i=n[Go]),null==i&&(i=n[Go]=MZ++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function oN(e,t,n){if(n&bn.Optional||void 0!==e)return e;qe()}function sN(e,t,n,i){if(n&bn.Optional&&void 0===i&&(i=null),0==(n&(bn.Self|bn.Host))){const r=e[9],o=Xi(void 0);try{return r?r.get(t,i,n&bn.Optional):co(t,i,n&bn.Optional)}finally{Xi(o)}}return oN(i,0,n)}function aN(e,t,n,i=bn.Default,r){if(null!==e){if(1024&t[2]){const s=function AZ(e,t,n,i,r){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=lN(o,s,n,i|bn.Self,rh);if(a!==rh)return a;let l=o.parent;if(!l){const c=s[21];if(c){const d=c.get(n,rh,i);if(d!==rh)return d}l=hN(s),s=s[15]}o=l}return r}(e,t,n,i,rh);if(s!==rh)return s}const o=lN(e,t,n,i,rh);if(o!==rh)return o}return sN(t,n,i,r)}function lN(e,t,n,i,r){const o=function EZ(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Go)?e[Go]:void 0;return"number"==typeof t?t>=0?255&t:DZ:t}(n);if("function"==typeof o){if(!Ql(t,e,i))return i&bn.Host?oN(r,0,i):sN(t,n,i,r);try{const s=o(i);if(null!=s||i&bn.Optional)return s;qe()}finally{Mp()}}else if("number"==typeof o){let s=null,a=fS(e,t),l=L,c=i&bn.Host?t[16][6]:null;for((-1===a||i&bn.SkipSelf)&&(l=-1===a?vx(e,t):t[a+8],l!==L&&dN(i,!1)?(s=t[1],a=qg(l),t=Yg(l,t)):a=-1);-1!==a;){const d=t[1];if(cN(o,a,d.data)){const h=OZ(a,t,n,s,i,c);if(h!==rh)return h}l=t[a+8],l!==L&&dN(i,t[1].data[a+8]===c)&&cN(o,a,t)?(s=d,a=qg(l),t=Yg(l,t)):a=-1}}return r}function OZ(e,t,n,i,r,o){const s=t[1],a=s.data[e+8],d=bx(a,s,n,null==i?iu(a)&&uS:i!=s&&0!=(3&a.type),r&bn.Host&&o===a);return null!==d?ey(t,s,d,a):rh}function bx(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,d=o>>20,p=r?a+d:e.directiveEnd;for(let g=i?a:a+d;g<p;g++){const v=s[g];if(g<l&&n===v||g>=l&&v.type===n)return g}if(r){const g=s[l];if(g&&Fa(g)&&g.type===n)return l}return null}function ey(e,t,n,i){let r=e[n];const o=t.data;if(function be(e){return e instanceof J}(r)){const s=r;s.resolving&&function Ve(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new V(-200,`Circular dependency in DI detected for ${e}${n}`)}(function me(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():pe(e)}(o[n]));const a=gx(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Xi(s.injectImpl):null;Ql(e,i,bn.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function Rt(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=jg(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&Xi(l),gx(a),s.resolving=!1,Mp()}}return r}function cN(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function dN(e,t){return!(e&bn.Self||e&bn.Host&&t)}class Xg{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return aN(this._tNode,this._lView,t,i,n)}}function DZ(){return new Xg(Bi(),Ut())}function Ba(e){return Dr(()=>{const t=e.prototype.constructor,n=t[Qr]||mS(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[Qr]||mS(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function mS(e){return W(e)?()=>{const t=mS(N(e));return t&&t()}:sd(e)}function hN(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const $g="__annotations__",Qg="__parameters__",Kg="__prop__metadata__";function gS(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}function Zg(e,t,n){return Dr(()=>{const i=gS(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,d){const h=l.hasOwnProperty(Qg)?l[Qg]:Object.defineProperty(l,Qg,{value:[]})[Qg];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}function ty(e,t,n,i){return Dr(()=>{const r=gS(t);function o(...s){if(this instanceof o)return r.apply(this,s),this;const a=new o(...s);return function l(c,d){const h=c.constructor,p=h.hasOwnProperty(Kg)?h[Kg]:Object.defineProperty(h,Kg,{value:{}})[Kg];p[d]=p.hasOwnProperty(d)&&p[d]||[],p[d].unshift(a),i&&i(c,d,...s)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}class Kn{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ft({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class IZ{}const kZ=ty("ContentChildren",(e,t={})=>({selector:e,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...t}),IZ),vS=Function;function iy(e){return"function"==typeof e}function Zl(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),Zl(i,t)):t!==e&&t.push(i)}return t}function au(e,t){e.forEach(n=>Array.isArray(n)?au(n,t):t(n))}function fN(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function _x(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ry(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function Jl(e,t,n){let i=Jg(e,t);return i>=0?e[1|i]=n:(i=~i,function FZ(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function yS(e,t){const n=Jg(e,t);if(n>=0)return e[1|n]}function Jg(e,t){return function vN(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}(e,t,1)}const LZ=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,BZ=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,zZ=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,UZ=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class VZ{constructor(t){this._reflect=t||Gi.Reflect}factory(t){return(...n)=>new t(...n)}_zipTypesAndAnnotations(t,n){let i;i=ry(typeof t>"u"?n.length:t.length);for(let r=0;r<i.length;r++)i[r]=typeof t>"u"?[]:t[r]&&t[r]!=Object?[t[r]]:[],n&&null!=n[r]&&(i[r]=i[r].concat(n[r]));return i}_ownParameters(t,n){if(function jZ(e){return LZ.test(e)||UZ.test(e)||BZ.test(e)&&!zZ.test(e)}(t.toString()))return null;if(t.parameters&&t.parameters!==n.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==n.ctorParameters){const a="function"==typeof r?r():r,l=a.map(d=>d&&d.type),c=a.map(d=>d&&bS(d.decorators));return this._zipTypesAndAnnotations(l,c)}const o=t.hasOwnProperty(Qg)&&t[Qg],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return s||o?this._zipTypesAndAnnotations(s,o):ry(t.length)}parameters(t){if(!iy(t))return[];const n=xx(t);let i=this._ownParameters(t,n);return!i&&n!==Object&&(i=this.parameters(n)),i||[]}_ownAnnotations(t,n){if(t.annotations&&t.annotations!==n.annotations){let i=t.annotations;return"function"==typeof i&&i.annotations&&(i=i.annotations),i}return t.decorators&&t.decorators!==n.decorators?bS(t.decorators):t.hasOwnProperty($g)?t[$g]:null}annotations(t){if(!iy(t))return[];const n=xx(t),i=this._ownAnnotations(t,n)||[];return(n!==Object?this.annotations(n):[]).concat(i)}_ownPropMetadata(t,n){if(t.propMetadata&&t.propMetadata!==n.propMetadata){let i=t.propMetadata;return"function"==typeof i&&i.propMetadata&&(i=i.propMetadata),i}if(t.propDecorators&&t.propDecorators!==n.propDecorators){const i=t.propDecorators,r={};return Object.keys(i).forEach(o=>{r[o]=bS(i[o])}),r}return t.hasOwnProperty(Kg)?t[Kg]:null}propMetadata(t){if(!iy(t))return{};const n=xx(t),i={};if(n!==Object){const o=this.propMetadata(n);Object.keys(o).forEach(s=>{i[s]=o[s]})}const r=this._ownPropMetadata(t,n);return r&&Object.keys(r).forEach(o=>{const s=[];i.hasOwnProperty(o)&&s.push(...i[o]),s.push(...r[o]),i[o]=s}),i}ownPropMetadata(t){return iy(t)&&this._ownPropMetadata(t,xx(t))||{}}hasLifecycleHook(t,n){return t instanceof vS&&n in t.prototype}}function bS(e){return e?e.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function xx(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const Op={},_S="__NG_DI_FLAG__",Cx="ngTempTokenPath",GZ=/\n/gm,yN="__source";let oy;function e0(e){const t=oy;return oy=e,t}function qZ(e,t=bn.Default){if(void 0===oy)throw new V(-203,!1);return null===oy?co(e,void 0,t):oy.get(e,t&bn.Optional?null:void 0,t)}function Gt(e,t=bn.Default){return(function Lo(){return Mi}()||qZ)(N(e),t)}function rs(e,t=bn.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),Gt(e,t)}function xS(e){const t=[];for(let n=0;n<e.length;n++){const i=N(e[n]);if(Array.isArray(i)){if(0===i.length)throw new V(900,!1);let r,o=bn.Default;for(let s=0;s<i.length;s++){const a=i[s],l=YZ(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(Gt(r,o))}else t.push(Gt(i))}return t}function sy(e,t){return e[_S]=t,e.prototype[_S]=t,e}function YZ(e){return e[_S]}const t0=sy(Zg("Inject",e=>({token:e})),-1),Jf=sy(Zg("Optional"),8),CS=sy(Zg("Self"),2),n0=sy(Zg("SkipSelf"),4);let _N=null;function ay(){return _N=_N||new VZ}var El=(()=>((El=El||{})[El.Important=1]="Important",El[El.DashCase=2]="DashCase",El))();const SS=new Map;let hJ=0;const ES="__ngContext__";function za(e,t){va(t)?(e[ES]=t[20],function pJ(e){SS.set(e[20],e)}(t)):e[ES]=t}function AS(e,t){return undefined(e,t)}function dy(e){const t=e[3];return Na(t)?t[3]:t}function TS(e){return BN(e[13])}function IS(e){return BN(e[4])}function BN(e){for(;null!==e&&!Na(e);)e=e[4];return e}function o0(e,t,n,i,r){if(null!=i){let o,s=!1;Na(i)?o=i:va(i)&&(s=!0,i=i[0]);const a=vo(i);0===e&&null!==n?null==r?GN(t,n,a):em(t,n,a,r||null,!0):1===e&&null!==n?em(t,n,a,r||null,!0):2===e?function zS(e,t,n){const i=Px(e,t);i&&function NJ(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function BJ(e,t,n,i,r){const o=n[7];o!==vo(n)&&o0(t,e,i,o,r);for(let a=10;a<n.length;a++){const l=n[a];hy(l[1],l,e,t,i,o)}}(t,e,o,n,r)}}function RS(e,t,n){return e.createElement(t,n)}function UN(e,t){const n=e[9],i=n.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Pt(r,-1)),n.splice(i,1)}function NS(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&UN(r,i),t>0&&(e[n-1][4]=i[4]);const o=_x(e,10+t);!function OJ(e,t){hy(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function jN(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&hy(e,t,n,3,null,null),function AJ(e){let t=e[13];if(!t)return FS(e[1],e);for(;t;){let n=null;if(va(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)va(t)&&FS(t[1],t),t=t[3];null===t&&(t=e),va(t)&&FS(t[1],t),n=t&&t[4]}t=n}}(t)}}function FS(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function RJ(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof J)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(e,t),function kJ(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):vo(t[s]),l=i[r=n[o+2]],c=n[o+3];"boolean"==typeof c?a.removeEventListener(n[o],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),o+=2}else{const s=i[r=n[o+1]];n[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&Na(t[3])){n!==t[3]&&UN(n,t);const i=t[19];null!==i&&i.detachView(e)}!function fJ(e){SS.delete(e[20])}(t)}}function VN(e,t,n){return function HN(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const r=e.data[i.directiveStart].encapsulation;if(r===So.None||r===So.Emulated)return null}return M(i,n)}(e,t.parent,n)}function em(e,t,n,i,r){e.insertBefore(t,n,i,r)}function GN(e,t,n){e.appendChild(t,n)}function WN(e,t,n,i,r){null!==i?em(e,t,n,i,r):GN(e,t,n)}function Px(e,t){return e.parentNode(t)}function qN(e,t,n){return XN(e,t,n)}let Ex,HS,Dx,XN=function YN(e,t,n){return 40&e.type?M(e,n):null};function Sx(e,t,n,i){const r=VN(e,i,t),o=t[11],a=qN(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)WN(o,r,n[l],a,!1);else WN(o,r,n,a,!1)}function Ox(e,t){if(null!==t){const n=t.type;if(3&n)return M(t,e);if(4&n)return BS(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return Ox(e,i);{const r=e[t.index];return Na(r)?BS(-1,r):vo(r)}}if(32&n)return AS(t,e)()||vo(e[t.index]);{const i=QN(e,t);return null!==i?Array.isArray(i)?i[0]:Ox(dy(e[16]),i):Ox(e,t.next)}}return null}function QN(e,t){return null!==t?e[16][6].projection[t.projection]:null}function BS(e,t){const n=10+e+1;if(n<t.length){const i=t[n],r=i[1].firstChild;if(null!==r)return Ox(i,r)}return t[7]}function US(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===t&&(a&&za(vo(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)US(e,t,n.child,i,r,o,!1),o0(t,e,r,a,o);else if(32&l){const c=AS(n,i);let d;for(;d=c();)o0(t,e,r,d,o);o0(t,e,r,a,o)}else 16&l?KN(e,t,i,n,r,o):o0(t,e,r,a,o);n=s?n.projectionNext:n.next}}function hy(e,t,n,i,r,o){US(n,i,e.firstChild,t,r,o,!1)}function KN(e,t,n,i,r,o){const s=n[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)o0(t,e,r,l[c],o);else US(e,t,l,s[3],r,o,!0)}function ZN(e,t,n){e.setAttribute(t,"style",n)}function jS(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function tm(e){return function VS(){if(void 0===Ex&&(Ex=null,Gi.trustedTypes))try{Ex=Gi.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ex}()?.createHTML(e)||e}function e5(e){return function GS(){if(void 0===Dx&&(Dx=null,Gi.trustedTypes))try{Dx=Gi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Dx}()?.createHTML(e)||e}class nm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class GJ extends nm{getTypeName(){return"HTML"}}class WJ extends nm{getTypeName(){return"Style"}}class qJ extends nm{getTypeName(){return"Script"}}class YJ extends nm{getTypeName(){return"URL"}}class XJ extends nm{getTypeName(){return"ResourceURL"}}function ec(e){return e instanceof nm?e.changingThisBreaksApplicationSecurity:e}function oh(e,t){const n=function $J(e){return e instanceof nm&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}class tee{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(tm(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class nee{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const i=this.inertDocument.createElement("body");n.appendChild(i)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=tm(t),n;const i=this.inertDocument.createElement("body");return i.innerHTML=tm(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const n=t.attributes;for(let r=n.length-1;0<r;r--){const s=n.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&t.removeAttribute(s)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const ree=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Ax(e){return(e=String(e)).match(ree)?e:"unsafe:"+e}function lu(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function uy(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const r5=lu("area,br,col,hr,img,wbr"),o5=lu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),s5=lu("rp,rt"),WS=uy(r5,uy(o5,lu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uy(s5,lu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uy(s5,o5)),qS=lu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),a5=uy(qS,lu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oee=lu("script,style,template");class see{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!WS.hasOwnProperty(n))return this.sanitizedSomething=!0,!oee.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=t.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!a5.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;qS[a]&&(l=Ax(l)),this.buf.push(" ",s,'="',l5(l),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();WS.hasOwnProperty(n)&&!r5.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(l5(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const aee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lee=/([^\#-~ |!])/g;function l5(e){return e.replace(/&/g,"&amp;").replace(aee,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lee,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tx;function c5(e,t){let n=null;try{Tx=Tx||function i5(e){const t=new nee(e);return function iee(){try{return!!(new window.DOMParser).parseFromString(tm(""),"text/html")}catch{return!1}}()?new tee(t):t}(e);let i=t?String(t):"";n=Tx.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Tx.getInertBodyElement(i)}while(i!==o);return tm((new see).sanitizeChildren(YS(n)||n))}finally{if(n){const i=YS(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function YS(e){return"content"in e&&function cee(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var yo=(()=>((yo=yo||{})[yo.NONE=0]="NONE",yo[yo.HTML=1]="HTML",yo[yo.STYLE=2]="STYLE",yo[yo.SCRIPT=3]="SCRIPT",yo[yo.URL=4]="URL",yo[yo.RESOURCE_URL=5]="RESOURCE_URL",yo))();function tc(e){const t=py();return t?e5(t.sanitize(yo.HTML,e)||""):oh(e,"HTML")?e5(ec(e)):c5(function JN(){return void 0!==HS?HS:typeof document<"u"?document:void 0}(),pe(e))}function Ce(e){const t=py();return t?t.sanitize(yo.URL,e)||"":oh(e,"URL")?ec(e):Ax(pe(e))}function py(){const e=Ut();return e&&e[12]}const XS=new Kn("ENVIRONMENT_INITIALIZER"),h5=new Kn("INJECTOR",-1),u5=new Kn("INJECTOR_DEF_TYPES");class p5{get(t,n=Op){if(n===Op){const i=new Error(`NullInjectorError: No provider for ${T(t)}!`);throw i.name="NullInjectorError",i}return n}}function gee(...e){return{\u0275providers:f5(0,e)}}function f5(e,...t){const n=[],i=new Set;let r;return au(t,o=>{const s=o;$S(s,n,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&m5(r,n),n}function m5(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];au(r,o=>{t.push(o)})}}function $S(e,t,n,i){if(!(e=N(e)))return!1;let r=null,o=Vi(e);const s=!o&&Tn(e);if(o||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(o=Vi(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)$S(c,t,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{au(o.imports,d=>{$S(d,t,n,i)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&m5(c,t)}if(!a){const c=sd(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:Yn},{provide:u5,useValue:r,multi:!0},{provide:XS,useValue:()=>Gt(r),multi:!0})}const l=o.providers;null==l||a||au(l,d=>{t.push(d)})}}return r!==e&&void 0!==e.providers}const vee=B({provide:String,useValue:B});function QS(e){return null!==e&&"object"==typeof e&&vee in e}function im(e){return"function"==typeof e}const KS=new Kn("Set Injector scope."),Ix={},bee={};let ZS;function kx(){return void 0===ZS&&(ZS=new p5),ZS}class Ep{}class y5 extends Ep{constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,eO(t,s=>this.processProvider(s)),this.records.set(h5,s0(void 0,this)),r.has("environment")&&this.records.set(Ep,s0(void 0,this));const o=this.records.get(KS);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(u5.multi,Yn,bn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=e0(this),i=Xi(void 0);try{return t()}finally{e0(n),Xi(i)}}get(t,n=Op,i=bn.Default){this.assertNotDestroyed();const r=e0(this),o=Xi(void 0);try{if(!(i&bn.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function Mee(e){return"function"==typeof e||"object"==typeof e&&e instanceof Kn}(t)&&tr(t);a=l&&this.injectableDefInScope(l)?s0(JS(t),Ix):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&bn.Self?kx():this.parent).get(t,n=i&bn.Optional&&n===Op?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Cx]=s[Cx]||[]).unshift(T(t)),r)throw s;return function XZ(e,t,n,i){const r=e[Cx];throw t[yN]&&r.unshift(t[yN]),e.message=function $Z(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=T(t);if(Array.isArray(t))r=t.map(T).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):T(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(GZ,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e[Cx]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Xi(o),e0(r)}}resolveInjectorInitializers(){const t=e0(this),n=Xi(void 0);try{const i=this.get(XS.multi,Yn,bn.Self);for(const r of i)r()}finally{e0(t),Xi(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(T(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(t){let n=im(t=N(t))?t:N(t&&t.provide);const i=function xee(e){return QS(e)?s0(void 0,e.useValue):s0(b5(e),Ix)}(t);if(im(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=s0(void 0,Ix,!0),r.factory=()=>xS(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===Ix&&(n.value=bee,n.value=n.factory()),"object"==typeof n.value&&n.value&&function wee(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=N(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function JS(e){const t=tr(e),n=null!==t?t.factory:sd(e);if(null!==n)return n;if(e instanceof Kn)throw new V(204,!1);if(e instanceof Function)return function _ee(e){const t=e.length;if(t>0)throw ry(t,"?"),new V(204,!1);const n=function $t(e){const t=e&&(e[gr]||e[ao]);if(t){const n=function Li(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new V(204,!1)}function b5(e,t,n){let i;if(im(e)){const r=N(e);return sd(r)||JS(r)}if(QS(e))i=()=>N(e.useValue);else if(function v5(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...xS(e.deps||[]));else if(function g5(e){return!(!e||!e.useExisting)}(e))i=()=>Gt(N(e.useExisting));else{const r=N(e&&(e.useClass||e.provide));if(!function Cee(e){return!!e.deps}(e))return sd(r)||JS(r);i=()=>new r(...xS(e.deps))}return i}function s0(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Pee(e){return!!e.\u0275providers}function eO(e,t){for(const n of e)Array.isArray(n)?eO(n,t):Pee(n)?eO(n.\u0275providers,t):t(n)}class _5{}class Eee{resolveComponentFactory(t){throw function Oee(e){const t=Error(`No component factory found for ${T(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let a0=(()=>{class e{}return e.NULL=new Eee,e})();function Dee(){return l0(Bi(),Ut())}function l0(e,t){return new Rr(M(e,t))}let Rr=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=Dee,e})();function Aee(e){return e instanceof Rr?e.nativeElement:e}class c0{}let vs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function Tee(){const e=Ut(),n=ae(Bi().index,e);return(va(n)?n:e)[11]}(),e})(),Iee=(()=>{class e{}return e.\u0275prov=ft({token:e,providedIn:"root",factory:()=>null}),e})();class fy{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const kee=new fy("14.3.0"),tO={},nO="ngOriginalError";function iO(e){return e[nO]}class rm{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&iO(t);for(;n&&iO(n);)n=iO(n);return n||null}}function om(e){return e.ownerDocument.defaultView}function sm(e){return e.ownerDocument}function cu(e){return e instanceof Function?e():e}function w5(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}const M5="ng-template";function Vee(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==w5(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function P5(e){return 4===e.type&&e.value!==M5}function Hee(e,t,n){return t===(4!==e.type||n?e.value:M5)}function Gee(e,t,n){let i=4;const r=e.attrs||[],o=function Yee(e){for(let t=0;t<e.length;t++)if(Wg(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!Hee(e,l,n)||""===l&&1===t.length){if(dd(i))return!1;s=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!Vee(e.attrs,c,n)){if(dd(i))return!1;s=!0}continue}const h=Wee(8&i?"class":l,r,P5(e),n);if(-1===h){if(dd(i))return!1;s=!0;continue}if(""!==c){let p;p=h>o?"":r[h+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==w5(g,c,0)||2&i&&c!==p){if(dd(i))return!1;s=!0}}}}else{if(!s&&!dd(i)&&!dd(l))return!1;if(s&&dd(l))continue;s=!1,i=l|1&i}}return dd(i)||s}function dd(e){return 0==(1&e)}function Wee(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Xee(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function S5(e,t,n=!1){for(let i=0;i<t.length;i++)if(Gee(e,t[i],n))return!0;return!1}function $ee(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function O5(e,t){return e?":not("+t.trim()+")":t}function Qee(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!dd(s)&&(t+=O5(o,r),r=""),i=s,o=o||!dd(i);n++}return""!==r&&(t+=O5(o,r)),t}const zi={};function se(e){E5(In(),Ut(),is()+e,!1)}function E5(e,t,n,i){if(!i)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&Mn(t,o,n)}else{const o=e.preOrderHooks;null!==o&&jn(t,o,0,n)}xc(n)}function I5(e,t=null,n=null,i){const r=k5(e,t,n,i);return r.resolveInjectorInitializers(),r}function k5(e,t=null,n=null,i,r=new Set){const o=[n||Yn,gee(e)];return i=i||("object"==typeof e?void 0:T(e)),new y5(o,t||kx(),i||null,r)}let ks=(()=>{class e{static create(n,i){if(Array.isArray(n))return I5({name:""},i,n,"");{const r=n.name??"";return I5({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=Op,e.NULL=new p5,e.\u0275prov=ft({token:e,providedIn:"any",factory:()=>Gt(h5)}),e.__NG_ELEMENT_ID__=-1,e})();function rO(e){return e.length>1?" ("+function rte(e){const t=[];for(let n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(i=>T(i.token)).join(" -> ")+")":""}function oO(e,t,n,i){const r=[t],o=n(r),s=i?function Ree(e,t){const n=`${e} caused by: ${t instanceof Error?t.message:t}`,i=Error(n);return i[nO]=t,i}(o,i):Error(o);return s.addKey=ote,s.keys=r,s.injectors=[e],s.constructResolvingMessage=n,s[nO]=i,s}function ote(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function R5(e,t){const n=[];for(let i=0,r=t.length;i<r;i++){const o=t[i];n.push(o&&0!=o.length?o.map(T).join(" "):"?")}return Error("Cannot resolve all parameters for '"+T(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+T(e)+"' is decorated with Injectable.")}function hte(e,t){return Error(`Cannot mix multi providers and regular providers, got: ${e} ${t}`)}class Dp{constructor(t,n){if(this.token=t,this.id=n,!t)throw new V(208,!1);this.displayName=T(this.token)}static get(t){return N5.get(N(t))}static get numberOfKeys(){return N5.numberOfKeys}}class ute{constructor(){this._allKeys=new Map}get(t){if(t instanceof Dp)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const n=new Dp(t,Dp.numberOfKeys);return this._allKeys.set(t,n),n}get numberOfKeys(){return this._allKeys.size}}const N5=new ute;class Rx{constructor(t,n,i){this.key=t,this.optional=n,this.visibility=i}static fromKey(t){return new Rx(t,!1,null)}}const pte=[];class F5{constructor(t,n,i){this.key=t,this.resolvedFactories=n,this.multiProvider=i,this.resolvedFactory=this.resolvedFactories[0]}}class fte{constructor(t,n){this.factory=t,this.dependencies=n}}function mte(e){let t,n;if(e.useClass){const i=N(e.useClass);t=ay().factory(i),n=B5(i)}else e.useExisting?(t=i=>i,n=[Rx.fromKey(Dp.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function bte(e,t){if(t){const n=t.map(i=>[i]);return t.map(i=>z5(e,i,n))}return B5(e)}(e.useFactory,e.deps)):(t=()=>e.useValue,n=pte);return new fte(t,n)}function gte(e){return new F5(Dp.get(e.provide),[mte(e)],e.multi||!1)}function vte(e){const i=function yte(e,t){for(let n=0;n<e.length;n++){const i=e[n],r=t.get(i.key.id);if(r){if(i.multiProvider!==r.multiProvider)throw hte(r,i);if(i.multiProvider)for(let o=0;o<i.resolvedFactories.length;o++)r.resolvedFactories.push(i.resolvedFactories[o]);else t.set(i.key.id,i)}else{let o;o=i.multiProvider?new F5(i.key,i.resolvedFactories.slice(),i.multiProvider):i,t.set(i.key.id,o)}}return t}(L5(e,[]).map(gte),new Map);return Array.from(i.values())}function L5(e,t){return e.forEach(n=>{if(n instanceof vS)t.push({provide:n,useClass:n});else if(n&&"object"==typeof n&&void 0!==n.provide)t.push(n);else{if(!Array.isArray(n))throw function cte(e){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${e}`)}(n);L5(n,t)}}),t}function B5(e){const t=ay().parameters(e);if(!t)return[];if(t.some(n=>null==n))throw R5(e,t);return t.map(n=>z5(e,n,t))}function z5(e,t,n){let i=null,r=!1;if(!Array.isArray(t))return sO(t instanceof t0?t.token:t,r,null);let o=null;for(let s=0;s<t.length;++s){const a=t[s];a instanceof vS?i=a:a instanceof t0?i=a.token:a instanceof Jf?r=!0:a instanceof CS||a instanceof n0?o=a:a instanceof Kn&&(i=a)}if(i=N(i),null!=i)return sO(i,r,o);throw R5(e,n)}function sO(e,t,n){return new Rx(Dp.get(e),t,n)}const my={};class am{static resolve(t){return vte(t)}static resolveAndCreate(t,n){const i=am.resolve(t);return am.fromResolvedProviders(i,n)}static fromResolvedProviders(t,n){return new _te(t,n)}}let _te=(()=>{class e{constructor(n,i){this._constructionCounter=0,this._providers=n,this.parent=i||null;const r=n.length;this.keyIds=[],this.objs=[];for(let o=0;o<r;o++)this.keyIds[o]=n[o].key.id,this.objs[o]=my}get(n,i=Op){return this._getByKey(Dp.get(n),null,i)}resolveAndCreateChild(n){const i=am.resolve(n);return this.createChildFromResolved(i)}createChildFromResolved(n){const i=new e(n);return i.parent=this,i}resolveAndInstantiate(n){return this.instantiateResolved(am.resolve([n])[0])}instantiateResolved(n){return this._instantiateProvider(n)}getProviderAtIndex(n){if(n<0||n>=this._providers.length)throw function dte(e){return Error(`Index ${e} is out-of-bounds.`)}(n);return this._providers[n]}_new(n){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function ate(e,t){return oO(e,t,function(n){return`Cannot instantiate cyclic dependency!${rO(n)}`})}(this,n.key);return this._instantiateProvider(n)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(n){if(n.multiProvider){const i=[];for(let r=0;r<n.resolvedFactories.length;++r)i[r]=this._instantiate(n,n.resolvedFactories[r]);return i}return this._instantiate(n,n.resolvedFactories[0])}_instantiate(n,i){const r=i.factory;let o,s;try{o=i.dependencies.map(a=>this._getByReflectiveDependency(a))}catch(a){throw a.addKey&&a.addKey(this,n.key),a}try{s=r(...o)}catch(a){throw function lte(e,t,n,i){return oO(e,i,function(r){const o=T(r[0].token);return`${t.message}: Error during instantiation of ${o}!${rO(r)}.`},t)}(this,a,0,n.key)}return s}_getByReflectiveDependency(n){return this._getByKey(n.key,n.visibility,n.optional?null:Op)}_getByKey(n,i,r){return n===e.INJECTOR_KEY?this:i instanceof CS?this._getByKeySelf(n,r):this._getByKeyDefault(n,r,i)}_getObjByKeyId(n){for(let i=0;i<this.keyIds.length;i++)if(this.keyIds[i]===n)return this.objs[i]===my&&(this.objs[i]=this._new(this._providers[i])),this.objs[i];return my}_throwOrNull(n,i){if(i!==Op)return i;throw function ste(e,t){return oO(e,t,function(n){return`No provider for ${T(n[0].token)}!${rO(n)}`})}(this,n)}_getByKeySelf(n,i){const r=this._getObjByKeyId(n.id);return r!==my?r:this._throwOrNull(n,i)}_getByKeyDefault(n,i,r){let o;for(o=r instanceof n0?this.parent:this;o instanceof e;){const s=o,a=s._getObjByKeyId(n.id);if(a!==my)return a;o=s.parent}return null!==o?o.get(n.token,i):this._throwOrNull(n,i)}get displayName(){return`ReflectiveInjector(providers: [${function xte(e,t){const n=[];for(let i=0;i<e._providers.length;++i)n[i]=t(e.getProviderAtIndex(i));return n}(this,i=>' "'+i.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return e.INJECTOR_KEY=Dp.get(ks),e})();function Oe(e,t=bn.Default){const n=Ut();return null===n?Gt(e,t):aN(Bi(),n,N(e),t)}function aO(){throw new Error("invalid")}function Nx(e,t){return e<<17|t<<2}function hd(e){return e>>17&32767}function lO(e){return 2|e}function du(e){return(131068&e)>>2}function cO(e,t){return-131069&e|t<<2}function dO(e){return 1|e}function Q5(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const s=e.data[o];$l(r),s.contentQueries(2,t[o],o)}}}function Bx(e,t,n,i,r,o,s,a,l,c,d){const h=t.blueprint.slice();return h[0]=r,h[2]=76|i,(null!==d||e&&1024&e[2])&&(h[2]|=1024),Ke(h),h[3]=h[15]=e,h[8]=n,h[10]=s||e&&e[10],h[11]=a||e&&e[11],h[12]=l||e&&e[12]||null,h[9]=c||e&&e[9]||null,h[6]=o,h[20]=function uJ(){return hJ++}(),h[21]=d,h[16]=2==t.type?e[16]:h,h}function h0(e,t,n,i,r){let o=e.data[t];if(null===o)o=function yO(e,t,n,i,r){const o=eh(),s=ld(),l=e.data[t]=function Lte(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(e,t,n,i,r),function Cr(){return st.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function ad(){const e=st.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ro(o,!0),o}function u0(e,t,n,i){if(0===n)return-1;const r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function bO(e,t,n){wp(t);try{const i=e.viewQuery;null!==i&&OO(1,i,n);const r=e.template;null!==r&&K5(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Q5(e,t),e.staticViewQueries&&OO(2,e.viewQuery,n);const o=e.components;null!==o&&function Rte(e,t){for(let n=0;n<t.length;n++)Jte(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,Qf()}}function zx(e,t,n,i){const r=t[2];if(128!=(128&r)){wp(t);try{Ke(t),function Gg(e){return st.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&K5(e,t,n,2,i);const s=3==(3&r);if(s){const c=e.preOrderCheckHooks;null!==c&&Mn(t,c,null)}else{const c=e.preOrderHooks;null!==c&&jn(t,c,0,null),Pn(t,0)}if(function Kte(e){for(let t=TS(e);null!==t;t=IS(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const r=n[i],o=r[3];0==(512&r[2])&&Pt(o,1),r[2]|=512}}}(t),function Qte(e){for(let t=TS(e);null!==t;t=IS(t))for(let n=10;n<t.length;n++){const i=t[n],r=i[1];ge(i)&&zx(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&Q5(e,t),s){const c=e.contentCheckHooks;null!==c&&Mn(t,c)}else{const c=e.contentHooks;null!==c&&jn(t,c,1),Pn(t,1)}!function Ite(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)xc(~r);else{const o=r,s=n[++i],a=n[++i];rl(s,o),a(2,t[o])}}}finally{xc(-1)}}(e,t);const a=e.components;null!==a&&function kte(e,t){for(let n=0;n<t.length;n++)Zte(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&OO(2,l,i),s){const c=e.viewCheckHooks;null!==c&&Mn(t,c)}else{const c=e.viewHooks;null!==c&&jn(t,c,2),Pn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Pt(t[3],-1))}finally{Qf()}}}function K5(e,t,n,i,r){const o=is(),s=2&i;try{xc(-1),s&&t.length>22&&E5(e,t,22,!1),n(i,r)}finally{xc(o)}}function Z5(e,t,n){if(nu(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}function _O(e,t,n){!qo()||(function Vte(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||J1(n,t),za(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],c=Fa(l);c&&Yte(t,n,l);const d=ey(t,e,a,n);za(d,t),null!==s&&Xte(0,a-r,d,l,0,s),c&&(ae(n.index,t)[8]=d)}}(e,t,n,M(n,t)),128==(128&n.flags)&&function Hte(e,t,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function _c(){return st.lFrame.currentDirectiveIndex}();try{xc(o);for(let a=i;a<r;a++){const l=e.data[a],c=t[a];qf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&oF(l,c)}}finally{xc(-1),qf(s)}}(e,t,n))}function xO(e,t,n=M){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function J5(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=CO(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function CO(e,t,n,i,r,o,s,a,l,c){const d=22+i,h=d+r,p=function Nte(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:zi);return n}(d,h),g="function"==typeof c?c():c;return p[1]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function eF(e,t,n,i){const r=dF(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&hF(e).push(i,r.length-1))}function tF(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function nF(e,t){const i=t.directiveEnd,r=e.data,o=t.attrs,s=[];let a=null,l=null;for(let c=t.directiveStart;c<i;c++){const d=r[c],h=d.inputs,p=null===o||P5(t)?null:$te(h,o);s.push(p),a=tF(h,c,a),l=tF(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}function nc(e,t,n,i,r,o,s,a){const l=M(t,n);let d,c=t.inputs;!a&&null!=c&&(d=c[i])?(EO(e,n,d,i,r),iu(t)&&iF(n,t.index)):3&t.type&&(i=function Bte(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(l,i,r))}function iF(e,t){const n=ae(t,e);16&n[2]||(n[2]|=32)}function wO(e,t,n,i){let r=!1;if(qo()){const o=function Gte(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];S5(n,s.selectors,!1)&&(r||(r=[]),yx(J1(n,t),e,s.type),Fa(s)?(sF(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){r=!0,aF(n,e.data.length,o.length);for(let d=0;d<o.length;d++){const h=o[d];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=u0(e,t,o.length,null);for(let d=0;d<o.length;d++){const h=o[d];n.mergedAttrs=mx(n.mergedAttrs,h.hostAttrs),lF(e,n,t,c,h),qte(c,h,s),null!==h.contentQueries&&(n.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=128);const p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),c++}nF(e,n)}s&&function Wte(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const o=n[t[r+1]];if(null==o)throw new V(-301,!1);i.push(t[r],o)}}}(n,i,s)}return n.mergedAttrs=mx(n.mergedAttrs,n.attrs),r}function rF(e,t,n,i,r,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function jte(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(i,r,s)}}function oF(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function sF(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function qte(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Fa(t)&&(n[""]=e)}}function aF(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function lF(e,t,n,i,r){e.data[i]=r;const o=r.factory||(r.factory=sd(r.type)),s=new J(o,Fa(r),Oe);e.blueprint[i]=s,n[i]=s,rF(e,t,0,i,u0(e,n,r.hostVars,zi),r)}function Yte(e,t,n){const i=M(t,e),r=J5(n),o=e[10],s=Ux(e,Bx(e,r,null,n.onPush?32:16,i,t,o,o.createRenderer(i,n),null,null,null));e[t.index]=s}function sh(e,t,n,i,r,o){const s=M(e,t);!function MO(e,t,n,i,r,o,s){if(null==o)e.removeAttribute(t,r,n);else{const a=null==s?pe(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}(t[11],s,o,e.value,n,i,r)}function Xte(e,t,n,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const c=s[l++],d=s[l++],h=s[l++];null!==a?i.setInput(n,h,c,d):n[d]=h}}}function $te(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function cF(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Zte(e,t){const n=ae(t,e);if(ge(n)){const i=n[1];48&n[2]?zx(i,n,i.template,n[8]):n[5]>0&&PO(n)}}function PO(e){for(let i=TS(e);null!==i;i=IS(i))for(let r=10;r<i.length;r++){const o=i[r];if(ge(o))if(512&o[2]){const s=o[1];zx(s,o,s.template,o[8])}else o[5]>0&&PO(o)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=ae(n[i],e);ge(r)&&r[5]>0&&PO(r)}}function Jte(e,t){const n=ae(t,e),i=n[1];(function ene(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),bO(i,n,n[8])}function Ux(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function SO(e){for(;e;){e[2]|=32;const t=dy(e);if(j1(e)&&!t)return e;e=t}return null}function jx(e,t,n,i=!0){const r=t[10];r.begin&&r.begin();try{zx(e,t,e.template,n)}catch(s){throw i&&pF(t,s),s}finally{r.end&&r.end()}}function OO(e,t,n){$l(0),t(e,n)}function dF(e){return e[7]||(e[7]=[])}function hF(e){return e.cleanup||(e.cleanup=[])}function pF(e,t){const n=e[9],i=n?n.get(rm,null):null;i&&i.handleError(t)}function EO(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],c=e.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function hu(e,t,n){const i=xp(t,e);!function zN(e,t,n){e.setValue(t,n)}(e[11],i,n)}function Vx(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=F(r,a):2==o&&(i=F(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Hx(e,t,n,i,r=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&i.push(vo(o)),Na(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&Hx(l[1],l,c,i)}const s=n.type;if(8&s)Hx(e,t,n.child,i);else if(32&s){const a=AS(n,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=QN(t,n);if(Array.isArray(a))i.push(...a);else{const l=dy(t[16]);Hx(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class gy{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Hx(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Na(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(NS(t,i),_x(n,i))}this._attachedToViewContainer=!1}jN(this._lView[1],this._lView)}onDestroy(t){eF(this._lView[1],this._lView,null,t)}markForCheck(){SO(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){jx(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function DJ(e,t){hy(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=t}}class tne extends gy{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;jx(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class DO extends a0{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Tn(t);return new vy(n,this.ngModule)}}function fF(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class ine{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){const r=this.injector.get(t,tO,i);return r!==tO||n===tO?r:this.parentInjector.get(t,n,i)}}class vy extends _5{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Kee(e){return e.map(Qee).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return fF(this.componentDef.inputs)}get outputs(){return fF(this.componentDef.outputs)}create(t,n,i,r){let o=(r=r||this.ngModule)instanceof Ep?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new ine(t,o):t,a=s.get(c0,null);if(null===a)throw new V(407,!1);const l=s.get(Iee,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=i?function Fte(e,t,n){return e.selectRootElement(t,n===So.ShadowDom)}(c,i,this.componentDef.encapsulation):RS(c,d,function nne(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(d)),p=this.componentDef.onPush?288:272,g=CO(0,null,null,1,0,null,null,null,null,null),v=Bx(null,g,null,p,null,null,a,c,l,s,null);let y,b;wp(v);try{const P=function sne(e,t,n,i,r,o){const s=n[1];n[22]=e;const l=h0(s,22,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(Vx(l,c,!0),null!==e&&(Kl(r,e,c),null!==l.classes&&jS(r,e,l.classes),null!==l.styles&&ZN(r,e,l.styles)));const d=i.createRenderer(e,t),h=Bx(n,J5(t),null,t.onPush?32:16,n[22],l,i,d,o||null,null,null);return s.firstCreatePass&&(yx(J1(l,n),s,t.type),sF(s,l),aF(l,n.length,1)),Ux(n,h),n[22]=h}(h,this.componentDef,v,a,c);if(h)if(i)Kl(c,h,["ng-version",kee.full]);else{const{attrs:S,classes:O}=function Zee(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!dd(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);S&&Kl(c,h,S),O&&O.length>0&&jS(c,h,O.join(" "))}if(b=K(g,22),void 0!==n){const S=b.projection=[];for(let O=0;O<this.ngContentSelectors.length;O++){const A=n[O];S.push(null!=A?Array.from(A):null)}}y=function ane(e,t,n,i){const r=n[1],o=function Ute(e,t,n){const i=Bi();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),lF(e,i,t,u0(e,t,1,null),n),nF(e,i));const r=ey(t,e,i.directiveStart,i);za(r,t);const o=M(i,t);return o&&za(o,t),r}(r,n,t);if(e[8]=n[8]=o,null!==i)for(const a of i)a(o,t);if(t.contentQueries){const a=Bi();t.contentQueries(1,o,a.directiveStart)}const s=Bi();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(xc(s.index),rF(n[1],s,0,s.directiveStart,s.directiveEnd,t),oF(t,o)),o}(P,this.componentDef,v,[lne]),bO(g,v,null)}finally{Qf()}return new one(this.componentType,y,l0(b,v),v,b)}}class one extends class See{}{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new tne(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const o=this._rootLView;EO(o[1],o,r,t,n),iF(o,this._tNode.index)}}get injector(){return new Xg(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function lne(){const e=Bi();an(Ut()[1],e)}function Nr(e){let t=function mF(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(Fa(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new V(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const s=e;s.inputs=AO(e.inputs),s.declaredInputs=AO(e.declaredInputs),s.outputs=AO(e.outputs);const a=r.hostBindings;a&&une(e,a);const l=r.viewQuery,c=r.contentQueries;if(l&&dne(e,l),c&&hne(e,c),Q(e.inputs,r.inputs),Q(e.declaredInputs,r.declaredInputs),Q(e.outputs,r.outputs),Fa(r)&&r.data.animation){const d=e.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Nr&&(n=!1)}}t=Object.getPrototypeOf(t)}!function cne(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=mx(r.hostAttrs,n=mx(n,r.hostAttrs))}}(i)}function AO(e){return e===qi?{}:e===Yn?[]:e}function dne(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function hne(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,o)=>{t(i,r,o),n(i,r,o)}:t}function une(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}let Gx=null;function lm(){if(!Gx){const e=Gi.Symbol;if(e&&e.iterator)Gx=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Gx=i)}}}return Gx}function yy(e){return!!TO(e)&&(Array.isArray(e)||!(e instanceof Map)&&lm()in e)}function TO(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ah(e,t,n){return e[t]=n}function Ua(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function cm(e,t,n,i){const r=Ua(e,t,n);return Ua(e,t+1,i)||r}function wc(e,t,n,i,r,o){const s=cm(e,t,n,i);return cm(e,t+2,r,o)||s}function Zr(e,t,n,i){const r=Ut();return Ua(r,th(),t)&&(In(),sh(zr(),r,e,t,n,i)),Zr}function f0(e,t,n,i){return Ua(e,th(),n)?t+pe(n)+i:zi}function m0(e,t,n,i,r,o){const a=cm(e,function ns(){return st.lFrame.bindingIndex}(),n,r);return Xl(2),a?t+pe(n)+i+pe(r)+o:zi}function at(e,t,n,i,r,o,s,a){const l=Ut(),c=In(),d=e+22,h=c.firstCreatePass?function _ne(e,t,n,i,r,o,s,a,l){const c=t.consts,d=h0(t,e,4,s||null,Fe(c,a));wO(t,n,d,Fe(c,l)),an(t,d);const h=d.tViews=CO(2,d,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),h.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,n,i,r,o,s):c.data[d];Ro(h,!1);const p=l[11].createComment("");Sx(c,l,p,h),za(p,l),Ux(l,l[d]=cF(p,l,p,h)),od(h)&&_O(c,l,h),null!=s&&xO(l,h,a)}function os(e){return ne(function bc(){return st.lFrame.contextLView}(),22+e)}function Je(e,t,n){const i=Ut();return Ua(i,th(),t)&&nc(In(),zr(),i,e,t,i[11],n,!1),Je}function IO(e,t,n,i,r){const s=r?"class":"style";EO(e,n,t.inputs[s],s,i)}function x(e,t,n,i){const r=Ut(),o=In(),s=22+e,a=r[11],l=r[s]=RS(a,t,function xt(){return st.lFrame.currentNamespace}()),c=o.firstCreatePass?function Cne(e,t,n,i,r,o,s){const a=t.consts,c=h0(t,e,2,r,Fe(a,o));return wO(t,n,c,Fe(a,s)),null!==c.attrs&&Vx(c,c.attrs,!1),null!==c.mergedAttrs&&Vx(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,r,0,t,n,i):o.data[s];Ro(c,!0);const d=c.mergedAttrs;null!==d&&Kl(a,l,d);const h=c.classes;null!==h&&jS(a,l,h);const p=c.styles;return null!==p&&ZN(a,l,p),64!=(64&c.flags)&&Sx(o,r,l,c),0===function hi(){return st.lFrame.elementDepthCount}()&&za(l,r),function Qi(){st.lFrame.elementDepthCount++}(),od(c)&&(_O(o,r,c),Z5(o,c,r)),null!==i&&xO(r,c),x}function w(){let e=Bi();ld()?La():(e=e.parent,Ro(e,!1));const t=e;!function Si(){st.lFrame.elementDepthCount--}();const n=In();return n.firstCreatePass&&(an(n,e),nu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Di(e){return 0!=(16&e.flags)}(t)&&IO(n,t,Ut(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Sr(e){return 0!=(32&e.flags)}(t)&&IO(n,t,Ut(),t.stylesWithoutHost,!1),w}function re(e,t,n,i){return x(e,t,n,i),w(),re}function Jr(e,t,n){const i=Ut(),r=In(),o=e+22,s=r.firstCreatePass?function wne(e,t,n,i,r){const o=t.consts,s=Fe(o,i),a=h0(t,e,8,"ng-container",s);return null!==s&&Vx(a,s,!0),wO(t,n,a,Fe(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,i,t,n):r.data[o];Ro(s,!0);const a=i[o]=i[11].createComment("");return Sx(r,i,a,s),za(a,i),od(s)&&(_O(r,i,s),Z5(r,s,i)),null!=n&&xO(i,s),Jr}function eo(){let e=Bi();const t=In();return ld()?La():(e=e.parent,Ro(e,!1)),t.firstCreatePass&&(an(t,e),nu(e)&&t.queries.elementEnd(e)),eo}function vr(){return Ut()}function _y(e){return!!e&&"function"==typeof e.then}const kO=function SF(e){return!!e&&"function"==typeof e.subscribe};function St(e,t,n,i){const r=Ut(),o=In(),s=Bi();return function EF(e,t,n,i,r,o,s,a){const l=od(i),d=e.firstCreatePass&&hF(e),h=t[8],p=dF(t);let g=!0;if(3&i.type||a){const b=M(i,t),P=a?a(b):b,S=p.length,O=a?H=>a(vo(H[i.index])):i.index;let A=null;if(!a&&l&&(A=function Mne(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,g=!1;else{o=AF(i,t,h,o,!1);const H=n.listen(P,r,o);p.push(o,H),d&&d.push(r,O,S,S+1)}}else o=AF(i,t,h,o,!1);const v=i.outputs;let y;if(g&&null!==v&&(y=v[r])){const b=y.length;if(b)for(let P=0;P<b;P+=2){const U=t[y[P]][y[P+1]].subscribe(o),X=p.length;p.push(o,U),d&&d.push(r,i.index,X,-(X+1))}}}(o,r,r[11],s,e,t,0,i),St}function DF(e,t,n,i){try{return!1!==n(i)}catch(r){return pF(e,r),!1}}function AF(e,t,n,i,r){return function o(s){if(s===Function)return i;SO(2&e.flags?ae(e.index,t):t);let l=DF(t,0,i,s),c=o.__ngNextListenerFn__;for(;c;)l=DF(t,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function rt(e=1){return function Pp(e){return(st.lFrame.contextLView=function Kf(e,t){for(;e>0;)t=t[15],e--;return t}(e,st.lFrame.contextLView))[8]}(e)}function Pne(e,t){let n=null;const i=function qee(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?S5(e,o,!0):$ee(i,o))return r}else n=r}return n}function Mc(e,t,n){return Se(e,"",t,"",n),Mc}function Se(e,t,n,i,r){const o=Ut(),s=f0(o,t,n,i);return s!==zi&&nc(In(),zr(),o,e,s,o[11],r,!1),Se}function ic(e,t,n,i,r,o,s){const a=Ut(),l=m0(a,t,n,i,r,o);return l!==zi&&nc(In(),zr(),a,e,l,a[11],s,!1),ic}function UF(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?hd(o):du(o),l=!1;for(;0!==a&&(!1===l||s);){const d=e[a+1];Ene(e[a],t)&&(l=!0,e[a+1]=i?dO(d):lO(d)),a=i?hd(d):du(d)}l&&(e[n+1]=i?lO(o):dO(o))}function Ene(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Jg(e,t)>=0}const Rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jF(e){return e.substring(Rs.key,Rs.keyEnd)}function VF(e,t){const n=Rs.textEnd;return n===t?-1:(t=Rs.keyEnd=function Ine(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Rs.key=t,n),C0(e,t,n))}function C0(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Xo(e,t){return function ud(e,t,n,i){const r=Ut(),o=In(),s=Xl(2);o.firstUpdatePass&&XF(o,e,s,i),t!==zi&&Ua(r,s,t)&&QF(o,o.data[is()],r,r[11],e,r[s+1]=function Vne(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=T(ec(e)))),e}(t,n),i,s)}(e,t,null,!0),Xo}function Ip(e){pd(Jl,ch,e,!0)}function ch(e,t){for(let n=function Ane(e){return function GF(e){Rs.key=0,Rs.keyEnd=0,Rs.value=0,Rs.valueEnd=0,Rs.textEnd=e.length}(e),VF(e,C0(e,0,Rs.textEnd))}(t);n>=0;n=VF(t,n))Jl(e,jF(t),!0)}function pd(e,t,n,i){const r=In(),o=Xl(2);r.firstUpdatePass&&XF(r,null,o,i);const s=Ut();if(n!==zi&&Ua(s,o,n)){const a=r.data[is()];if(ZF(a,i)&&!YF(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=F(l,n||"")),IO(r,a,s,n,i)}else!function jne(e,t,n,i,r,o,s,a){r===zi&&(r=Yn);let l=0,c=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const p=l<r.length?r[l+1]:void 0,g=c<o.length?o[c+1]:void 0;let y,v=null;d===h?(l+=2,c+=2,p!==g&&(v=h,y=g)):null===h||null!==d&&d<h?(l+=2,v=d):(c+=2,v=h,y=g),null!==v&&QF(e,t,n,i,v,y,s,a),d=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function Une(e,t,n){if(null==n||""===n)return Yn;const i=[],r=ec(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}function YF(e,t){return t>=e.expandoStartIndex}function XF(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[is()],s=YF(e,n);ZF(o,i)&&null===t&&!s&&(t=!1),t=function Fne(e,t,n,i){const r=function Yf(e){const t=st.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=xy(n=NO(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=NO(r,e,t,n,i),null===o){let l=function Lne(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==du(i))return e[hd(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=NO(null,e,t,l[1],i),l=xy(l,t.attrs,i),function Bne(e,t,n,i){e[hd(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else o=function zne(e,t,n){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=xy(i,e[o].hostAttrs,n);return xy(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function Sne(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=hd(s),l=du(s);e[i]=n;let d,c=!1;if(Array.isArray(n)){const h=n;d=h[1],(null===d||Jg(h,d)>0)&&(c=!0)}else d=n;if(r)if(0!==l){const p=hd(e[a+1]);e[i+1]=Nx(p,a),0!==p&&(e[p+1]=cO(e[p+1],i)),e[a+1]=function Cte(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=Nx(a,0),0!==a&&(e[a+1]=cO(e[a+1],i)),a=i;else e[i+1]=Nx(l,0),0===a?a=i:e[l+1]=cO(e[l+1],i),l=i;c&&(e[i+1]=lO(e[i+1])),UF(e,d,i,!0),UF(e,d,i,!1),function One(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Jg(o,t)>=0&&(n[i+1]=dO(n[i+1]))}(t,d,e,i,o),s=Nx(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function NO(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=xy(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function xy(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Jl(e,s,!!n||t[++o]))}return void 0===e?null:e}function QF(e,t,n,i,r,o,s,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];qx(function V5(e){return 1==(1&e)}(c)?KF(l,t,n,r,du(c),s):void 0)||(qx(o)||function j5(e){return 2==(2&e)}(c)&&(o=KF(l,null,n,r,a,s)),function zJ(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:El.DashCase;null==r?e.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=El.Important),e.setStyle(n,i,r,o))}}(i,s,xp(is(),n),r,o))}function KF(e,t,n,i,r,o){const s=null===t;let a;for(;r>0;){const l=e[r],c=Array.isArray(l),d=c?l[1]:l,h=null===d;let p=n[r+1];p===zi&&(p=h?Yn:void 0);let g=h?yS(p,i):d===i?p:void 0;if(c&&!qx(g)&&(g=yS(l,i)),qx(g)&&(a=g,s))return a;const v=e[r+1];r=s?hd(v):du(v)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=yS(l,i))}return a}function qx(e){return void 0!==e}function ZF(e,t){return 0!=(e.flags&(t?16:32))}function E(e,t=""){const n=Ut(),i=In(),r=e+22,o=i.firstCreatePass?h0(i,r,1,t,null):i.data[r],s=n[r]=function kS(e,t){return e.createText(t)}(n[11],t);Sx(i,n,s,o),Ro(o,!1)}function Ns(e){return sl("",e,""),Ns}function sl(e,t,n){const i=Ut(),r=f0(i,e,t,n);return r!==zi&&hu(i,is(),r),sl}function Yx(e,t,n,i,r){const o=Ut(),s=m0(o,e,t,n,i,r);return s!==zi&&hu(o,is(),s),Yx}function uu(e,t,n){pd(Jl,ch,f0(Ut(),e,t,n),!0)}const hm=void 0;var aie=["en",[["a","p"],["AM","PM"],hm],[["AM","PM"],hm,hm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hm,"{1} 'at' {0}",hm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sie(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let w0={};function al(e){const t=function lie(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=vL(t);if(n)return n;const i=t.split("-")[0];if(n=vL(i),n)return n;if("en"===i)return aie;throw new V(701,!1)}function vL(e){return e in w0||(w0[e]=Gi.ng&&Gi.ng.common&&Gi.ng.common.locales&&Gi.ng.common.locales[e]),w0[e]}var Rn=(()=>((Rn=Rn||{})[Rn.LocaleId=0]="LocaleId",Rn[Rn.DayPeriodsFormat=1]="DayPeriodsFormat",Rn[Rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rn[Rn.DaysFormat=3]="DaysFormat",Rn[Rn.DaysStandalone=4]="DaysStandalone",Rn[Rn.MonthsFormat=5]="MonthsFormat",Rn[Rn.MonthsStandalone=6]="MonthsStandalone",Rn[Rn.Eras=7]="Eras",Rn[Rn.FirstDayOfWeek=8]="FirstDayOfWeek",Rn[Rn.WeekendRange=9]="WeekendRange",Rn[Rn.DateFormat=10]="DateFormat",Rn[Rn.TimeFormat=11]="TimeFormat",Rn[Rn.DateTimeFormat=12]="DateTimeFormat",Rn[Rn.NumberSymbols=13]="NumberSymbols",Rn[Rn.NumberFormats=14]="NumberFormats",Rn[Rn.CurrencyCode=15]="CurrencyCode",Rn[Rn.CurrencySymbol=16]="CurrencySymbol",Rn[Rn.CurrencyName=17]="CurrencyName",Rn[Rn.Currencies=18]="Currencies",Rn[Rn.Directionality=19]="Directionality",Rn[Rn.PluralCase=20]="PluralCase",Rn[Rn.ExtraData=21]="ExtraData",Rn))();const M0="en-US";let yL=M0;function zO(e,t,n,i,r){if(e=N(e),Array.isArray(e))for(let o=0;o<e.length;o++)zO(e[o],t,n,i,r);else{const o=In(),s=Ut();let a=im(e)?e:N(e.provide),l=b5(e);const c=Bi(),d=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(im(e)||!e.multi){const g=new J(l,r,Oe),v=jO(a,t,r?d:d+p,h);-1===v?(yx(J1(c,s),o,a),UO(o,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(g),s.push(g)):(n[v]=g,s[v]=g)}else{const g=jO(a,t,d+p,h),v=jO(a,t,d,d+p),y=g>=0&&n[g],b=v>=0&&n[v];if(r&&!b||!r&&!y){yx(J1(c,s),o,a);const P=function ire(e,t,n,i,r){const o=new J(e,n,Oe);return o.multi=[],o.index=t,o.componentProviders=0,HL(o,r,i&&!n),o}(r?nre:tre,n.length,r,i,l);!r&&b&&(n[v].providerFactory=P),UO(o,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(P),s.push(P)}else UO(o,e,g>-1?g:v,HL(n[r?v:g],l,!r&&i));!r&&i&&b&&n[v].componentProviders++}}}function UO(e,t,n,i){const r=im(t),o=function yee(e){return!!e.useClass}(t);if(r||o){const l=(o?N(t.useClass):t).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(n);-1===d?c.push(n,[i,l]):c[d+1].push(i,l)}else c.push(n,l)}}}function HL(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function jO(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function tre(e,t,n,i){return VO(this.multi,[])}function nre(e,t,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ey(n,n[1],this.providerFactory.index,i);o=a.slice(0,s),VO(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],VO(r,o);return o}function VO(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function bo(e,t=[]){return n=>{n.providersResolver=(i,r)=>function ere(e,t,n){const i=In();if(i.firstCreatePass){const r=Fa(e);zO(n,i.data,i.blueprint,r,!0),zO(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class um{}class GL{}class WL extends um{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DO(this);const i=Eo(t);this._bootstrapComponents=cu(i.bootstrap),this._r3Injector=k5(t,n,[{provide:um,useValue:this},{provide:a0,useValue:this.componentFactoryResolver}],T(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class HO extends GL{constructor(t){super(),this.moduleType=t}create(t){return new WL(this.moduleType,t)}}class ore extends um{constructor(t,n,i){super(),this.componentFactoryResolver=new DO(this),this.instance=null;const r=new y5([...t,{provide:um,useValue:this},{provide:a0,useValue:this.componentFactoryResolver}],n||kx(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Zx(e,t,n=null){return new ore(e,t,n).injector}let sre=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=f5(0,n.type),r=i.length>0?Zx([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=ft({token:e,providedIn:"environment",factory:()=>new e(Gt(Ep))}),e})();function qL(e){e.getStandaloneInjector=t=>t.get(sre).getOrCreateStandaloneInjector(e)}function Dl(e,t,n,i){return function eB(e,t,n,i,r,o){const s=t+n;return Ua(e,s,r)?ah(e,s+1,o?i.call(o,r):i(r)):Oy(e,s+1)}(Ut(),uo(),e,t,n,i)}function pm(e,t,n,i,r){return tB(Ut(),uo(),e,t,n,i,r)}function JL(e,t,n,i,r,o,s){return function iB(e,t,n,i,r,o,s,a,l){const c=t+n;return wc(e,c,r,o,s,a)?ah(e,c+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):Oy(e,c+4)}(Ut(),uo(),e,t,n,i,r,o,s)}function qO(e,t,n,i,r,o,s,a){const l=uo()+e,c=Ut(),d=wc(c,l,n,i,r,o);return Ua(c,l+4,s)||d?ah(c,l+5,a?t.call(a,n,i,r,o,s):t(n,i,r,o,s)):function by(e,t){return e[t]}(c,l+5)}function Oy(e,t){const n=e[t];return n===zi?void 0:n}function tB(e,t,n,i,r,o,s){const a=t+n;return cm(e,a,r,o)?ah(e,a+2,s?i.call(s,r,o):i(r,o)):Oy(e,a+2)}function YO(e){return t=>{setTimeout(e,void 0,t)}}const Ai=class Pre extends _.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=YO(o),r&&(r=YO(r)),s&&(s=YO(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof C.w&&t.add(a),a}};function Sre(){return this._results[lm()]()}class XO{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=lm(),i=XO.prototype;i[n]||(i[n]=Sre)}get changes(){return this._changes||(this._changes=new Ai)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=Zl(t);(this._changesDetected=!function RZ(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Dre,e})();const Ore=zo,Ere=class extends Ore{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tViews,r=Bx(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(i)),bO(i,r,t),new gy(r)}};function Dre(){return Jx(Bi(),Ut())}function Jx(e,t){return 4&e.type?new Ere(t,e,l0(e,t)):null}let fd=(()=>{class e{}return e.__NG_ELEMENT_ID__=Are,e})();function Are(){return cB(Bi(),Ut())}const Tre=fd,aB=class extends Tre{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return l0(this._hostTNode,this._hostLView)}get injector(){return new Xg(this._hostTNode,this._hostLView)}get parentInjector(){const t=vx(this._hostTNode,this._hostLView);if(nN(t)){const n=Yg(t,this._hostLView),i=qg(t);return new Xg(n[1].data[i+8],n)}return new Xg(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=lB(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,r),s}createComponent(t,n,i,r,o){const s=t&&!iy(t);let a;if(s)a=n;else{const h=n||{};a=h.index,i=h.injector,r=h.projectableNodes,o=h.environmentInjector||h.ngModuleRef}const l=s?t:new vy(Tn(t)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const p=(s?c:this.parentInjector).get(Ep,null);p&&(o=p)}const d=l.create(c,r,void 0,o);return this.insert(d.hostView,a),d}insert(t,n){const i=t._lView,r=i[1];if(function He(e){return Na(e[3])}(i)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const h=i[3],p=new aB(h,h[6],h[3]);p.detach(p.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function TJ(e,t,n,i){const r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],fN(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function IJ(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=64}(r,i,s,o);const a=BS(o,s),l=i[11],c=Px(l,s[7]);return null!==c&&function EJ(e,t,n,i,r,o){i[0]=r,i[6]=t,hy(e,i,n,1,r,o)}(r,s[6],l,i,c,a),t.attachToViewContainerRef(),fN($O(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=lB(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=NS(this._lContainer,n);i&&(_x($O(this._lContainer),n),jN(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=NS(this._lContainer,n);return i&&null!=_x($O(this._lContainer),n)?new gy(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function lB(e){return e[8]}function $O(e){return e[8]||(e[8]=[])}function cB(e,t){let n;const i=t[e.index];if(Na(i))n=i;else{let r;if(8&e.type)r=vo(i);else{const o=t[11];r=o.createComment("");const s=M(e,t);em(o,Px(o,s),r,function FJ(e,t){return e.nextSibling(t)}(o,s),!1)}t[e.index]=n=cF(i,t,r,e),Ux(t,n)}return new aB(n,e,t)}class QO{constructor(t){this.queryList=t,this.matches=null}clone(){return new QO(this.queryList)}setDirty(){this.queryList.setDirty()}}class KO{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new KO(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==fB(t,n).matches&&this.queries[n].setDirty()}}class dB{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class ZO{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new ZO(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class JO{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new JO(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,n,Rre(n,o)),this.matchTNodeWithReadOption(t,n,bx(n,t,o,!1,!1))}else i===zo?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,bx(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Rr||r===fd||r===zo&&4&n.type)this.addMatch(n.index,-2);else{const o=bx(n,t,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function Rre(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function Fre(e,t,n,i){return-1===n?function Nre(e,t){return 11&e.type?l0(e,t):4&e.type?Jx(e,t):null}(t,e):-2===n?function Lre(e,t,n){return n===Rr?l0(t,e):n===zo?Jx(t,e):n===fd?cB(t,e):void 0}(e,t,i):ey(e,e[1],n,t)}function hB(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:Fre(t,o[c],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function eE(e,t,n,i){const r=e.queries.getByIndex(n),o=r.matches;if(null!==o){const s=hB(e,t,r,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],d=t[-l];for(let h=10;h<d.length;h++){const p=d[h];p[17]===p[3]&&eE(p[1],p,c,i)}if(null!==d[9]){const h=d[9];for(let p=0;p<h.length;p++){const g=h[p];eE(g[1],g,c,i)}}}}}return i}function Ur(e){const t=Ut(),n=In(),i=Xf();$l(i+1);const r=fB(n,i);if(e.dirty&&function le(e){return 4==(4&e[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?eE(n,t,i,[]):hB(n,t,r,i);e.reset(o,Aee),e.notifyOnChanges()}return!0}return!1}function Rp(e,t,n){const i=In();i.firstCreatePass&&(pB(i,new dB(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),uB(i,Ut(),t)}function jr(){return function Bre(e,t){return e[19].queries[t].queryList}(Ut(),Xf())}function uB(e,t,n){const i=new XO(4==(4&n));eF(e,t,i,i.destroy),null===t[19]&&(t[19]=new KO),t[19].queries.push(new QO(i))}function pB(e,t,n){null===e.queries&&(e.queries=new ZO),e.queries.track(new JO(t,n))}function fB(e,t){return e.queries.getByIndex(t)}function rc(e,t){return Jx(e,t)}const to=ty("Input",e=>({bindingPropertyName:e})),Ay=ty("Output",e=>({bindingPropertyName:e})),Np=ty("HostListener",(e,t)=>({eventName:e,args:t}));function tC(...e){}const nC=new Kn("Application Initializer");let iC=(()=>{class e{constructor(n){this.appInits=n,this.resolve=tC,this.reject=tC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(_y(o))n.push(o);else if(kO(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Gt(nC,8))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ty=new Kn("AppId",{providedIn:"root",factory:function RB(){return`${oE()}${oE()}${oE()}`}});function oE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NB=new Kn("Platform Initializer"),Pc=new Kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FB=new Kn("appBootstrapListener"),LB=new Kn("AnimationModuleType");let ooe=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const pu=new Kn("LocaleId",{providedIn:"root",factory:()=>rs(pu,bn.Optional|bn.SkipSelf)||function soe(){return typeof $localize<"u"&&$localize.locale||M0}()});class loe{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let sE=(()=>{class e{compileModuleSync(n){return new HO(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=cu(Eo(n).declarations).reduce((s,a)=>{const l=Tn(a);return l&&s.push(new vy(l)),s},[]);return new loe(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const hoe=(()=>Promise.resolve(0))();function aE(e){typeof Zone>"u"?hoe.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Tr{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ai(!1),this.onMicrotaskEmpty=new Ai(!1),this.onStable=new Ai(!1),this.onError=new Ai(!1),typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function uoe(){let e=Gi.requestAnimationFrame,t=Gi.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function moe(e){const t=()=>{!function foe(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Gi,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,cE(e),e.isCheckStableRunning=!0,lE(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),cE(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return UB(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),jB(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return UB(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),jB(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,cE(e),lE(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tr.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(Tr.isInAngularZone())throw new V(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,poe,tC,tC);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const poe={};function lE(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function cE(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function UB(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function jB(e){e._nesting--,lE(e)}class goe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ai,this.onMicrotaskEmpty=new Ai,this.onStable=new Ai,this.onError=new Ai}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const VB=new Kn(""),rC=new Kn("");let uE,dE=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,uE||(function voe(e){uE=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tr.assertNotInAngularZone(),aE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aE(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(Gt(Tr),Gt(hE),Gt(rC))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),hE=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return uE?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Fp=null;const HB=new Kn("AllowMultipleToken"),pE=new Kn("PlatformDestroyListeners");class GB{constructor(t,n){this.name=t,this.token=n}}function qB(e,t,n=[]){const i=`Platform: ${t}`,r=new Kn(i);return(o=[])=>{let s=fE();if(!s||s.injector.get(HB,!1)){const a=[...n,...o,{provide:r,useValue:!0}];e?e(a):function _oe(e){if(Fp&&!Fp.get(HB,!1))throw new V(400,!1);Fp=e;const t=e.get(XB);(function WB(e){const t=e.get(NB,null);t&&t.forEach(n=>n())})(e)}(function YB(e=[],t){return ks.create({name:t,providers:[{provide:KS,useValue:"platform"},{provide:pE,useValue:new Set([()=>Fp=null])},...e]})}(a,i))}return function Coe(e){const t=fE();if(!t)throw new V(401,!1);return t}()}}function fE(){return Fp?.get(XB)??null}let XB=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function QB(e,t){let n;return n="noop"===e?new goe:("zone.js"===e?void 0:e)||new Tr(t),n}(i?.ngZone,function $B(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:Tr,useValue:r}];return r.run(()=>{const s=ks.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(rm,null);if(!l)throw new V(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{oC(this._modules,a),c.unsubscribe()})}),function KB(e,t,n){try{const i=n();return _y(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(iC);return c.runInitializers(),c.donePromise.then(()=>(function bL(e){dn(e,"Expected localeId to be defined"),"string"==typeof e&&(yL=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(pu,M0)||M0),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=ZB({},i);return function yoe(e,t,n){const i=new HO(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(n){const i=n.injector.get(fm);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new V(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new V(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(pE,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Gt(ks))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function ZB(e,t){return Array.isArray(t)?t.reduce(ZB,e):{...e,...t}}let fm=(()=>{class e{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new D.y(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new D.y(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Tr.assertNotInAngularZone(),aE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Tr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=(0,G.T)(o,s.pipe((0,z.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof _5;if(!this._injector.get(iC).done)throw!r&&function cr(e){const t=Tn(e)||$i(e)||gi(e);return null!==t&&t.standalone}(n),new V(405,false);let s;s=r?n:this._injector.get(a0).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function boe(e){return e.isBoundToModule}(s)?void 0:this._injector.get(um),c=s.create(ks.NULL,[],i||s.selector,a),d=c.location.nativeElement,h=c.injector.get(VB,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),oC(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new V(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;oC(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(FB,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>oC(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Gt(Tr),Gt(Ep),Gt(rm))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function oC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let e6=!0,t6=!1;let gd=(()=>{class e{}return e.__NG_ELEMENT_ID__=Poe,e})();function Poe(e){return function Soe(e,t,n){if(iu(e)&&!n){const i=ae(e.index,t);return new gy(i,i)}return 47&e.type?new gy(t[16],t):null}(Bi(),Ut(),16==(16&e))}class o6{constructor(){}supports(t){return yy(t)}create(t){return new Ioe(t)}}const Toe=(e,t)=>t;class Ioe{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Toe}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<a6(i,r,o)?n:i,a=a6(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const g=p<o.length?o[p]:o[p]=0,v=g+p;d<=v&&v<c&&(o[p]=g+1)}o[s.previousIndex]=d-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!yy(t))throw new V(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function vne(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[lm()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new koe(n,i),o,r),t}_verifyReinsertion(t,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new s6),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s6),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class koe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Roe{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class s6{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new Roe,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a6(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class l6{constructor(){}supports(t){return t instanceof Map||TO(t)}create(){return new Noe}}class Noe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||TO(t)))throw new V(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new Foe(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class Foe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c6(){return new lC([new o6])}let lC=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||c6()),deps:[[e,new n0,new Jf]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new V(901,!1)}}return e.\u0275prov=ft({token:e,providedIn:"root",factory:c6}),e})();function d6(){return new Iy([new l6])}let Iy=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||d6()),deps:[[e,new n0,new Jf]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new V(901,!1)}}return e.\u0275prov=ft({token:e,providedIn:"root",factory:d6}),e})();const zoe=qB(null,"core",[]);let Uoe=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Gt(fm))},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();function mu(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function _E(e,t){const n=Tn(e),i=t.elementInjector||kx();return new vy(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}let cC=null;function vd(){return cC}const po=new Kn("DocumentToken");let xE=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:function(){return function Goe(){return Gt(h6)}()},providedIn:"platform"}),e})();const Woe=new Kn("Location Initialized");let h6=(()=>{class e extends xE{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vd().getBaseHref(this._doc)}onPopState(n){const i=vd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=vd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){u6()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){u6()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:function(){return function qoe(){return new h6(Gt(po))}()},providedIn:"platform"}),e})();function u6(){return!!window.history.pushState}function CE(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p6(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function gu(e){return e&&"?"!==e[0]?"?"+e:e}let Lp=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:function(){return rs(m6)},providedIn:"root"}),e})();const f6=new Kn("appBaseHref");let m6=(()=>{class e extends Lp{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??rs(po).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return CE(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+gu(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){const s=this.prepareExternalUrl(r+gu(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){const s=this.prepareExternalUrl(r+gu(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(xE),Gt(f6,8))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yoe=(()=>{class e extends Lp{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=CE(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+gu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+gu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(xE),Gt(f6,8))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),gm=(()=>{class e{constructor(n){this._subject=new Ai,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._baseHref=p6(g6(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+gu(i))}normalize(n){return e.stripTrailingSlash(function $oe(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,g6(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gu(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=gu,e.joinWithSlash=CE,e.stripTrailingSlash=p6,e.\u0275fac=function(n){return new(n||e)(Gt(Lp))},e.\u0275prov=ft({token:e,factory:function(){return function Xoe(){return new gm(Gt(Lp))}()},providedIn:"root"}),e})();function g6(e){return e.replace(/\/index.html$/,"")}var ss=(()=>((ss=ss||{})[ss.Format=0]="Format",ss[ss.Standalone=1]="Standalone",ss))(),ar=(()=>((ar=ar||{})[ar.Narrow=0]="Narrow",ar[ar.Abbreviated=1]="Abbreviated",ar[ar.Wide=2]="Wide",ar[ar.Short=3]="Short",ar))(),Uo=(()=>((Uo=Uo||{})[Uo.Short=0]="Short",Uo[Uo.Medium=1]="Medium",Uo[Uo.Long=2]="Long",Uo[Uo.Full=3]="Full",Uo))(),vi=(()=>((vi=vi||{})[vi.Decimal=0]="Decimal",vi[vi.Group=1]="Group",vi[vi.List=2]="List",vi[vi.PercentSign=3]="PercentSign",vi[vi.PlusSign=4]="PlusSign",vi[vi.MinusSign=5]="MinusSign",vi[vi.Exponential=6]="Exponential",vi[vi.SuperscriptingExponent=7]="SuperscriptingExponent",vi[vi.PerMille=8]="PerMille",vi[vi.Infinity=9]="Infinity",vi[vi.NaN=10]="NaN",vi[vi.TimeSeparator=11]="TimeSeparator",vi[vi.CurrencyDecimal=12]="CurrencyDecimal",vi[vi.CurrencyGroup=13]="CurrencyGroup",vi))();function dC(e,t){return Oc(al(e)[Rn.DateFormat],t)}function hC(e,t){return Oc(al(e)[Rn.TimeFormat],t)}function uC(e,t){return Oc(al(e)[Rn.DateTimeFormat],t)}function Sc(e,t){const n=al(e),i=n[Rn.NumberSymbols][t];if(typeof i>"u"){if(t===vi.CurrencyDecimal)return n[Rn.NumberSymbols][vi.Decimal];if(t===vi.CurrencyGroup)return n[Rn.NumberSymbols][vi.Group]}return i}function y6(e){if(!e[Rn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Rn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Oc(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function ME(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const lse=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ky={},cse=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Fs=(()=>((Fs=Fs||{})[Fs.Short=0]="Short",Fs[Fs.ShortGMT=1]="ShortGMT",Fs[Fs.Long=2]="Long",Fs[Fs.Extended=3]="Extended",Fs))(),Ci=(()=>((Ci=Ci||{})[Ci.FullYear=0]="FullYear",Ci[Ci.Month=1]="Month",Ci[Ci.Date=2]="Date",Ci[Ci.Hours=3]="Hours",Ci[Ci.Minutes=4]="Minutes",Ci[Ci.Seconds=5]="Seconds",Ci[Ci.FractionalSeconds=6]="FractionalSeconds",Ci[Ci.Day=7]="Day",Ci))(),Yi=(()=>((Yi=Yi||{})[Yi.DayPeriods=0]="DayPeriods",Yi[Yi.Days=1]="Days",Yi[Yi.Months=2]="Months",Yi[Yi.Eras=3]="Eras",Yi))();function dse(e,t,n,i){let r=function bse(e){if(x6(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[r,o=1,s=1]=e.split("-").map(a=>+a);return pC(r,o-1,s)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(lse))return function _se(e){const t=new Date(0);let n=0,i=0;const r=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,l,c),t}(i)}const t=new Date(e);if(!x6(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=vu(n,t)||t;let a,s=[];for(;t;){if(a=cse.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const d=s.pop();if(!d)break;t=d}}let l=r.getTimezoneOffset();i&&(l=_6(i,l),r=function yse(e,t,n){const i=n?-1:1,r=e.getTimezoneOffset();return function vse(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,i*(_6(t,r)-r))}(r,i,!0));let c="";return s.forEach(d=>{const h=function gse(e){if(SE[e])return SE[e];let t;switch(e){case"G":case"GG":case"GGG":t=_o(Yi.Eras,ar.Abbreviated);break;case"GGGG":t=_o(Yi.Eras,ar.Wide);break;case"GGGGG":t=_o(Yi.Eras,ar.Narrow);break;case"y":t=bs(Ci.FullYear,1,0,!1,!0);break;case"yy":t=bs(Ci.FullYear,2,0,!0,!0);break;case"yyy":t=bs(Ci.FullYear,3,0,!1,!0);break;case"yyyy":t=bs(Ci.FullYear,4,0,!1,!0);break;case"Y":t=vC(1);break;case"YY":t=vC(2,!0);break;case"YYY":t=vC(3);break;case"YYYY":t=vC(4);break;case"M":case"L":t=bs(Ci.Month,1,1);break;case"MM":case"LL":t=bs(Ci.Month,2,1);break;case"MMM":t=_o(Yi.Months,ar.Abbreviated);break;case"MMMM":t=_o(Yi.Months,ar.Wide);break;case"MMMMM":t=_o(Yi.Months,ar.Narrow);break;case"LLL":t=_o(Yi.Months,ar.Abbreviated,ss.Standalone);break;case"LLLL":t=_o(Yi.Months,ar.Wide,ss.Standalone);break;case"LLLLL":t=_o(Yi.Months,ar.Narrow,ss.Standalone);break;case"w":t=PE(1);break;case"ww":t=PE(2);break;case"W":t=PE(1,!0);break;case"d":t=bs(Ci.Date,1);break;case"dd":t=bs(Ci.Date,2);break;case"c":case"cc":t=bs(Ci.Day,1);break;case"ccc":t=_o(Yi.Days,ar.Abbreviated,ss.Standalone);break;case"cccc":t=_o(Yi.Days,ar.Wide,ss.Standalone);break;case"ccccc":t=_o(Yi.Days,ar.Narrow,ss.Standalone);break;case"cccccc":t=_o(Yi.Days,ar.Short,ss.Standalone);break;case"E":case"EE":case"EEE":t=_o(Yi.Days,ar.Abbreviated);break;case"EEEE":t=_o(Yi.Days,ar.Wide);break;case"EEEEE":t=_o(Yi.Days,ar.Narrow);break;case"EEEEEE":t=_o(Yi.Days,ar.Short);break;case"a":case"aa":case"aaa":t=_o(Yi.DayPeriods,ar.Abbreviated);break;case"aaaa":t=_o(Yi.DayPeriods,ar.Wide);break;case"aaaaa":t=_o(Yi.DayPeriods,ar.Narrow);break;case"b":case"bb":case"bbb":t=_o(Yi.DayPeriods,ar.Abbreviated,ss.Standalone,!0);break;case"bbbb":t=_o(Yi.DayPeriods,ar.Wide,ss.Standalone,!0);break;case"bbbbb":t=_o(Yi.DayPeriods,ar.Narrow,ss.Standalone,!0);break;case"B":case"BB":case"BBB":t=_o(Yi.DayPeriods,ar.Abbreviated,ss.Format,!0);break;case"BBBB":t=_o(Yi.DayPeriods,ar.Wide,ss.Format,!0);break;case"BBBBB":t=_o(Yi.DayPeriods,ar.Narrow,ss.Format,!0);break;case"h":t=bs(Ci.Hours,1,-12);break;case"hh":t=bs(Ci.Hours,2,-12);break;case"H":t=bs(Ci.Hours,1);break;case"HH":t=bs(Ci.Hours,2);break;case"m":t=bs(Ci.Minutes,1);break;case"mm":t=bs(Ci.Minutes,2);break;case"s":t=bs(Ci.Seconds,1);break;case"ss":t=bs(Ci.Seconds,2);break;case"S":t=bs(Ci.FractionalSeconds,1);break;case"SS":t=bs(Ci.FractionalSeconds,2);break;case"SSS":t=bs(Ci.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=mC(Fs.Short);break;case"ZZZZZ":t=mC(Fs.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=mC(Fs.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=mC(Fs.Long);break;default:return null}return SE[e]=t,t}(d);c+=h?h(r,n,l):"''"===d?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function pC(e,t,n){const i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function vu(e,t){const n=function Qoe(e){return al(e)[Rn.LocaleId]}(e);if(ky[n]=ky[n]||{},ky[n][t])return ky[n][t];let i="";switch(t){case"shortDate":i=dC(e,Uo.Short);break;case"mediumDate":i=dC(e,Uo.Medium);break;case"longDate":i=dC(e,Uo.Long);break;case"fullDate":i=dC(e,Uo.Full);break;case"shortTime":i=hC(e,Uo.Short);break;case"mediumTime":i=hC(e,Uo.Medium);break;case"longTime":i=hC(e,Uo.Long);break;case"fullTime":i=hC(e,Uo.Full);break;case"short":const r=vu(e,"shortTime"),o=vu(e,"shortDate");i=fC(uC(e,Uo.Short),[r,o]);break;case"medium":const s=vu(e,"mediumTime"),a=vu(e,"mediumDate");i=fC(uC(e,Uo.Medium),[s,a]);break;case"long":const l=vu(e,"longTime"),c=vu(e,"longDate");i=fC(uC(e,Uo.Long),[l,c]);break;case"full":const d=vu(e,"fullTime"),h=vu(e,"fullDate");i=fC(uC(e,Uo.Full),[d,h])}return i&&(ky[n][t]=i),i}function fC(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return null!=t&&i in t?t[i]:n})),e}function yd(e,t,n="-",i,r){let o="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function bs(e,t,n=0,i=!1,r=!1){return function(o,s){let a=function use(e,t){switch(e){case Ci.FullYear:return t.getFullYear();case Ci.Month:return t.getMonth();case Ci.Date:return t.getDate();case Ci.Hours:return t.getHours();case Ci.Minutes:return t.getMinutes();case Ci.Seconds:return t.getSeconds();case Ci.FractionalSeconds:return t.getMilliseconds();case Ci.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((n>0||a>-n)&&(a+=n),e===Ci.Hours)0===a&&-12===n&&(a=12);else if(e===Ci.FractionalSeconds)return function hse(e,t){return yd(e,3).substring(0,t)}(a,t);const l=Sc(s,vi.MinusSign);return yd(a,t,l,i,r)}}function _o(e,t,n=ss.Format,i=!1){return function(r,o){return function pse(e,t,n,i,r,o){switch(n){case Yi.Months:return function Joe(e,t,n){const i=al(e),o=Oc([i[Rn.MonthsFormat],i[Rn.MonthsStandalone]],t);return Oc(o,n)}(t,r,i)[e.getMonth()];case Yi.Days:return function Zoe(e,t,n){const i=al(e),o=Oc([i[Rn.DaysFormat],i[Rn.DaysStandalone]],t);return Oc(o,n)}(t,r,i)[e.getDay()];case Yi.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const c=function ise(e){const t=al(e);return y6(t),(t[Rn.ExtraData][2]||[]).map(i=>"string"==typeof i?ME(i):[ME(i[0]),ME(i[1])])}(t),d=function rse(e,t,n){const i=al(e);y6(i);const o=Oc([i[Rn.ExtraData][0],i[Rn.ExtraData][1]],t)||[];return Oc(o,n)||[]}(t,r,i),h=c.findIndex(p=>{if(Array.isArray(p)){const[g,v]=p,y=s>=g.hours&&a>=g.minutes,b=s<v.hours||s===v.hours&&a<v.minutes;if(g.hours<v.hours){if(y&&b)return!0}else if(y||b)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(-1!==h)return d[h]}return function Koe(e,t,n){const i=al(e),o=Oc([i[Rn.DayPeriodsFormat],i[Rn.DayPeriodsStandalone]],t);return Oc(o,n)}(t,r,i)[s<12?0:1];case Yi.Eras:return function ese(e,t){return Oc(al(e)[Rn.Eras],t)}(t,i)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,o,e,t,n,i)}}function mC(e){return function(t,n,i){const r=-1*i,o=Sc(n,vi.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case Fs.Short:return(r>=0?"+":"")+yd(s,2,o)+yd(Math.abs(r%60),2,o);case Fs.ShortGMT:return"GMT"+(r>=0?"+":"")+yd(s,1,o);case Fs.Long:return"GMT"+(r>=0?"+":"")+yd(s,2,o)+":"+yd(Math.abs(r%60),2,o);case Fs.Extended:return 0===i?"Z":(r>=0?"+":"")+yd(s,2,o)+":"+yd(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}function b6(e){return pC(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function PE(e,t=!1){return function(n,i){let r;if(t){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{const o=b6(n),s=function mse(e){const t=pC(e,0,1).getDay();return pC(e,0,1+(t<=4?4:11)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return yd(r,e,Sc(i,vi.MinusSign))}}function vC(e,t=!1){return function(n,i){return yd(b6(n).getFullYear(),e,Sc(i,vi.MinusSign),t)}}const SE={};function _6(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function x6(e){return e instanceof Date&&!isNaN(e.valueOf())}function P6(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}let IE=(()=>{class e{constructor(n,i,r,o){this._iterableDiffers=n,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(yy(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${T(i.item)}`);this._toggleClass(i.item,!0)}),n.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!0)):Object.keys(n).forEach(i=>this._toggleClass(i,!!n[i])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!1)):Object.keys(n).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(n,i){(n=n.trim())&&n.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return e.\u0275fac=function(n){return new(n||e)(Oe(lC),Oe(Iy),Oe(Rr),Oe(vs))},e.\u0275dir=Et({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class kse{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ja=(()=>{class e{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new kse(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),E6(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{E6(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Oe(fd),Oe(zo),Oe(lC))},e.\u0275dir=Et({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function E6(e,t){e.context.$implicit=t.item}let ta=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new Nse,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){D6("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){D6("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Oe(fd),Oe(zo))},e.\u0275dir=Et({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Nse{constructor(){this.$implicit=null,this.ngIf=null}}function D6(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${T(t)}'.`)}class kE{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let bC=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(n)}_matchCase(n){const i=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews&&n!==this._defaultUsed){this._defaultUsed=n;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(n)}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Et({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),A6=(()=>{class e{constructor(n,i,r){this.ngSwitch=r,r._addCase(),this._view=new kE(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(n){return new(n||e)(Oe(fd),Oe(zo),Oe(bC,9))},e.\u0275dir=Et({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),T6=(()=>{class e{constructor(n,i,r){r._addDefault(new kE(n,i))}}return e.\u0275fac=function(n){return new(n||e)(Oe(fd),Oe(zo),Oe(bC,9))},e.\u0275dir=Et({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),vm=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,o]=n.split("."),s=-1===r.indexOf("-")?void 0:El.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(Oe(Rr),Oe(Iy),Oe(vs))},e.\u0275dir=Et({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),O0=(()=>{class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(n.ngTemplateOutlet||n.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&n.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(n){return new(n||e)(Oe(fd))},e.\u0275dir=Et({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[gs]}),e})();const qse=new Kn("DATE_PIPE_DEFAULT_TIMEZONE");let k6=(()=>{class e{constructor(n,i){this.locale=n,this.defaultTimezone=i}transform(n,i="mediumDate",r,o){if(null==n||""===n||n!=n)return null;try{return dse(n,i,o||this.locale,r??this.defaultTimezone??void 0)}catch(s){throw function bd(e,t){return new V(2100,!1)}()}}}return e.\u0275fac=function(n){return new(n||e)(Oe(pu,16),Oe(qse,24))},e.\u0275pipe=ki({name:"date",type:e,pure:!0,standalone:!0}),e})(),cl=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();const N6="browser";function FE(e){return e===N6}let sae=(()=>{class e{}return e.\u0275prov=ft({token:e,providedIn:"root",factory:()=>new aae(Gt(po),window)}),e})();class aae{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function lae(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F6(this.window.history)||F6(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function F6(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class L6{}class zE extends class Nae extends class Hoe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Voe(e){cC||(cC=e)}(new zE)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function Fae(){return Fy=Fy||document.querySelector("base"),Fy?Fy.getAttribute("href"):null}();return null==n?null:function Lae(e){CC=CC||document.createElement("a"),CC.setAttribute("href",e);const t=CC.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Fy=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return P6(document.cookie,t)}}let CC,Fy=null;const V6=new Kn("TRANSITION_ID"),zae=[{provide:nC,useFactory:function Bae(e,t,n){return()=>{n.get(iC).donePromise.then(()=>{const i=vd(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[V6,po,ks],multi:!0}];let jae=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const wC=new Kn("EventManagerPlugins");let Ly=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Gt(wC),Gt(Tr))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class H6{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=vd().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let G6=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),By=(()=>{class e extends G6{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(W6),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(W6))}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();function W6(e){vd().remove(e)}const UE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jE=/%COMP%/g;function MC(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?MC(e,r,n):(r=r.replace(jE,e),n.push(r))}return n}function X6(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let PC=(()=>{class e{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new VE(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case So.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Yae(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case So.ShadowDom:return new Xae(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=MC(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Gt(Ly),Gt(By),Gt(Ty))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class VE{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(UE[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(Q6(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(Q6(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const o=UE[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=UE[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(El.DashCase|El.Important)?t.style.setProperty(n,i,r&El.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&El.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,X6(i)):this.eventManager.addEventListener(t,n,X6(i))}}function Q6(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Yae extends VE{constructor(t,n,i,r){super(t),this.component=i;const o=MC(r+"-"+i.id,i.styles,[]);n.addStyles(o),this.contentAttr=function Gae(e){return"_ngcontent-%COMP%".replace(jE,e)}(r+"-"+i.id),this.hostAttr=function Wae(e){return"_nghost-%COMP%".replace(jE,e)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class Xae extends VE{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=MC(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let $ae=(()=>{class e extends H6{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const K6=["alt","control","meta","shift"],Qae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kae={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Zae=(()=>{class e extends H6{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vd().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),K6.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=Qae[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),K6.forEach(s=>{s!==r&&(0,Kae[s])(n)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const J6=[{provide:Pc,useValue:N6},{provide:NB,useValue:function Jae(){zE.makeCurrent()},multi:!0},{provide:po,useFactory:function tle(){return function HJ(e){HS=e}(document),document},deps:[]}],nle=qB(zoe,"browser",J6),ez=new Kn(""),tz=[{provide:rC,useClass:class Uae{addToWindow(t){Gi.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},Gi.getAllAngularTestabilities=()=>t.getAllTestabilities(),Gi.getAllAngularRootElements=()=>t.getAllRootElements(),Gi.frameworkStabilizers||(Gi.frameworkStabilizers=[]),Gi.frameworkStabilizers.push(i=>{const r=Gi.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?vd().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:VB,useClass:dE,deps:[Tr,hE,rC]},{provide:dE,useClass:dE,deps:[Tr,hE,rC]}],nz=[{provide:KS,useValue:"root"},{provide:rm,useFactory:function ele(){return new rm},deps:[]},{provide:wC,useClass:$ae,multi:!0,deps:[po,Tr,Pc]},{provide:wC,useClass:Zae,multi:!0,deps:[po]},{provide:PC,useClass:PC,deps:[Ly,By,Ty]},{provide:c0,useExisting:PC},{provide:G6,useExisting:By},{provide:By,useClass:By,deps:[po]},{provide:Ly,useClass:Ly,deps:[wC,Tr]},{provide:L6,useClass:jae,deps:[]},[]];let iz=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ty,useValue:n.appId},{provide:V6,useExisting:Ty},zae]}}}return e.\u0275fac=function(n){return new(n||e)(Gt(ez,12))},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:[...nz,...tz],imports:[cl,Uoe]}),e})(),Tl=(()=>{class e{constructor(n){this._doc=n,this._dom=vd()}addTag(n,i=!1){return n?this._getOrCreateElement(n,i):null}addTags(n,i=!1){return n?n.reduce((r,o)=>(o&&r.push(this._getOrCreateElement(o,i)),r),[]):[]}getTag(n){return n&&this._doc.querySelector(`meta[${n}]`)||null}getTags(n){if(!n)return[];const i=this._doc.querySelectorAll(`meta[${n}]`);return i?[].slice.call(i):[]}updateTag(n,i){if(!n)return null;i=i||this._parseSelector(n);const r=this.getTag(i);return r?this._setMetaElementAttributes(n,r):this._getOrCreateElement(n,!0)}removeTag(n){this.removeTagElement(this.getTag(n))}removeTagElement(n){n&&this._dom.remove(n)}_getOrCreateElement(n,i=!1){if(!i){const s=this._parseSelector(n),a=this.getTags(s).filter(l=>this._containsAttributes(n,l))[0];if(void 0!==a)return a}const r=this._dom.createElement("meta");return this._setMetaElementAttributes(n,r),this._doc.getElementsByTagName("head")[0].appendChild(r),r}_setMetaElementAttributes(n,i){return Object.keys(n).forEach(r=>i.setAttribute(this._getMetaKeyMap(r),n[r])),i}_parseSelector(n){const i=n.name?"name":"property";return`${i}="${n[i]}"`}_containsAttributes(n,i){return Object.keys(n).every(r=>i.getAttribute(this._getMetaKeyMap(r))===n[r])}_getMetaKeyMap(n){return rle[n]||n}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:function(n){let i=null;return i=n?new n:function ile(){return new Tl(Gt(po))}(),i},providedIn:"root"}),e})();const rle={httpEquiv:"http-equiv"};let Il=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:function(n){let i=null;return i=n?new n:function ole(){return new Il(Gt(po))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;let sz=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:function(n){let i=null;return i=n?new(n||e):Gt(az),i},providedIn:"root"}),e})(),az=(()=>{class e extends sz{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case yo.NONE:return i;case yo.HTML:return oh(i,"HTML")?ec(i):c5(this._doc,String(i)).toString();case yo.STYLE:return oh(i,"Style")?ec(i):i;case yo.SCRIPT:if(oh(i,"Script"))return ec(i);throw new Error("unsafe value used in a script context");case yo.URL:return oh(i,"URL")?ec(i):Ax(String(i));case yo.RESOURCE_URL:if(oh(i,"ResourceURL"))return ec(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${n} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(n){return function QJ(e){return new GJ(e)}(n)}bypassSecurityTrustStyle(n){return function KJ(e){return new WJ(e)}(n)}bypassSecurityTrustScript(n){return function ZJ(e){return new qJ(e)}(n)}bypassSecurityTrustUrl(n){return function JJ(e){return new YJ(e)}(n)}bypassSecurityTrustResourceUrl(n){return function eee(e){return new XJ(e)}(n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:function(n){let i=null;return i=n?new n:function ule(e){return new az(e.get(po))}(Gt(ks)),i},providedIn:"root"}),e})();class lz{}const yu="*";function cz(e,t){return{type:7,name:e,definitions:t,options:{}}}function Ec(e,t=null){return{type:4,styles:t,timings:e}}function dz(e,t=null){return{type:2,steps:e,options:t}}function Ls(e){return{type:6,styles:e,offset:null}}function ym(e,t,n){return{type:0,name:e,styles:t,options:n}}function Dc(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function hz(e){Promise.resolve().then(e)}class zy{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hz(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class uz{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const o=this.players.length;0==o?hz(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}function pz(e){return new V(3e3,!1)}function Xle(){return typeof window<"u"&&typeof window.document<"u"}function qE(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zp(e){switch(e.length){case 0:return new zy;case 1:return e[0];default:return new uz(e)}}function fz(e,t,n,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,c=null;if(i.forEach(d=>{const h=d.get("offset"),p=h==l,g=p&&c||new Map;d.forEach((v,y)=>{let b=y,P=v;if("offset"!==y)switch(b=t.normalizePropertyName(b,s),P){case"!":P=r.get(y);break;case yu:P=o.get(y);break;default:P=t.normalizeStyleValue(y,b,P,s)}g.set(b,P)}),p||a.push(g),c=g,l=h}),s.length)throw function Fle(e){return new V(3502,!1)}();return a}function YE(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&XE(n,"start",e)));break;case"done":e.onDone(()=>i(n&&XE(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&XE(n,"destroy",e)))}}function XE(e,t,n){const o=$E(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),s=e._data;return null!=s&&(o._data=s),o}function $E(e,t,n,i,r="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function oc(e,t,n){let i=e.get(t);return i||e.set(t,i=n),i}function mz(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}let QE=(e,t)=>!1,gz=(e,t,n)=>[],vz=null;function KE(e){const t=e.parentNode||e.host;return t===vz?null:t}(qE()||typeof Element<"u")&&(Xle()?(vz=(()=>document.documentElement)(),QE=(e,t)=>{for(;t;){if(t===e)return!0;t=KE(t)}return!1}):QE=(e,t)=>e.contains(t),gz=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let bm=null,yz=!1;const bz=QE,_z=gz;let xz=(()=>{class e{validateStyleProperty(n){return function Qle(e){bm||(bm=function Kle(){return typeof document<"u"?document.body:null}()||{},yz=!!bm.style&&"WebkitAppearance"in bm.style);let t=!0;return bm.style&&!function $le(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in bm.style,!t&&yz&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in bm.style)),t}(n)}matchesElement(n,i){return!1}containsElement(n,i){return bz(n,i)}getParentElement(n){return KE(n)}query(n,i,r){return _z(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,o,s,a=[],l){return new zy(r,o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),ZE=(()=>{class e{}return e.NOOP=new xz,e})();const JE="ng-enter",SC="ng-leave",OC="ng-trigger",EC=".ng-trigger",wz="ng-animating",eD=".ng-animating";function bu(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:tD(parseFloat(t[1]),t[2])}function tD(e,t){return"s"===t?1e3*e:e}function DC(e,t,n){return e.hasOwnProperty("duration")?e:function ece(e,t,n){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(pz()),{duration:0,delay:0,easing:""};r=tD(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=tD(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push(function fle(){return new V(3100,!1)}()),a=!0),o<0&&(t.push(function mle(){return new V(3101,!1)}()),a=!0),a&&t.splice(l,0,pz())}return{duration:r,delay:o,easing:s}}(e,t,n)}function Uy(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Mz(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function Up(e,t=new Map,n){if(n)for(let[i,r]of n)t.set(i,r);for(let[i,r]of e)t.set(i,r);return t}function Sz(e,t,n){return n?t+":"+n+";":""}function Oz(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=Sz(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Sz(0,rce(n),e.style[n]));e.setAttribute("style",t)}function dh(e,t,n){e.style&&(t.forEach((i,r)=>{const o=iD(r);n&&!n.has(r)&&n.set(r,e.style[o]),e.style[o]=i}),qE()&&Oz(e))}function _m(e,t){e.style&&(t.forEach((n,i)=>{const r=iD(i);e.style[r]=""}),qE()&&Oz(e))}function jy(e){return Array.isArray(e)?1==e.length?e[0]:dz(e):e}const nD=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ez(e){let t=[];if("string"==typeof e){let n;for(;n=nD.exec(e);)t.push(n[1]);nD.lastIndex=0}return t}function Vy(e,t,n){const i=e.toString(),r=i.replace(nD,(o,s)=>{let a=t[s];return null==a&&(n.push(function vle(e){return new V(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function AC(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const ice=/-+([a-z0-9])/g;function iD(e){return e.replace(ice,(...t)=>t[1].toUpperCase())}function rce(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function sc(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function yle(e){return new V(3004,!1)}()}}function Dz(e,t){return window.getComputedStyle(e)[t]}function dce(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function hce(e,t,n){if(":"==e[0]){const l=function uce(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(function Ile(e){return new V(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function Tle(e){return new V(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push(Az(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push(Az(s,r))}(i,n,t)):n.push(e),n}const RC=new Set(["true","1"]),NC=new Set(["false","0"]);function Az(e,t){const n=RC.has(e)||NC.has(e),i=RC.has(t)||NC.has(t);return(r,o)=>{let s="*"==e||e==r,a="*"==t||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?RC.has(e):NC.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?RC.has(t):NC.has(t)),s&&a}}const pce=new RegExp("s*:selfs*,?","g");function rD(e,t,n,i){return new fce(e).build(t,n,i)}class fce{constructor(t){this._driver=t}build(t,n,i){const r=new vce(n);return this._resetContextStyleTimingState(r),sc(this,jy(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&n.errors.push(function _le(){return new V(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,n))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(function xle(){return new V(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Ez(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(AC(o.values()),n.errors.push(function Cle(e,t){return new V(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=sc(this,jy(t.animation),n);return{type:1,matchers:dce(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:xm(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>sc(this,i,n)),options:xm(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const o=t.steps.map(s=>{n.currentTime=i;const a=sc(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:xm(t.options)}}visitAnimate(t,n){const i=function bce(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return oD(DC(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=oD(0,0,"");return o.dynamic=!0,o.strValue=n,o}const r=DC(n,t);return oD(r.duration,r.delay,r.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,o=t.styles?t.styles:Ls({});if(5==o.type)r=this.visitKeyframes(o,n);else{let s=t.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Ls(c)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===yu?i.push(a):n.errors.push(new V(3002,!1)):i.push(Mz(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=n.collectedStyles.get(n.currentQuerySelector),d=c.get(l);let h=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(n.errors.push(function Mle(e,t,n,i,r){return new V(3010,!1)}()),h=!1),o=d.startTime),h&&c.set(l,{startTime:o,endTime:r}),n.options&&function nce(e,t,n){const i=t.params||{},r=Ez(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(function gle(e){return new V(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function Ple(){return new V(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const d=t.steps.map(P=>{const S=this._makeStyleAst(P,n);let O=null!=S.offset?S.offset:function yce(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(S.styles),A=0;return null!=O&&(o++,A=S.offset=O),l=l||A<0||A>1,a=a||A<c,c=A,s.push(A),S});l&&n.errors.push(function Sle(){return new V(3012,!1)}()),a&&n.errors.push(function Ole(){return new V(3200,!1)}());const h=t.steps.length;let p=0;o>0&&o<h?n.errors.push(function Ele(){return new V(3202,!1)}()):0==o&&(p=1/(h-1));const g=h-1,v=n.currentTime,y=n.currentAnimateTimings,b=y.duration;return d.forEach((P,S)=>{const O=p>0?S==g?1:p*S:s[S],A=O*b;n.currentTime=v+y.delay+A,y.duration=A,this._validateStyleAst(P,n),P.offset=O,i.styles.push(P)}),i}visitReference(t,n){return{type:8,animation:sc(this,jy(t.animation),n),options:xm(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:xm(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:xm(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[o,s]=function mce(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(pce,"")),e=e.replace(/@\*/g,EC).replace(/@\w+/g,n=>EC+"-"+n.slice(1)).replace(/:animating/g,eD),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+o:o,oc(n.collectedStyles,n.currentQuerySelector,new Map);const a=sc(this,jy(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:xm(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function Dle(){return new V(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:DC(t.timings,n.errors,!0);return{type:12,animation:sc(this,jy(t.animation),n),timings:i,options:null}}}class vce{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xm(e){return e?(e=Uy(e)).params&&(e.params=function gce(e){return e?Uy(e):null}(e.params)):e={},e}function oD(e,t,n){return{duration:e,delay:t,easing:n}}function sD(e,t,n,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class FC{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Cce=new RegExp(":enter","g"),Mce=new RegExp(":leave","g");function aD(e,t,n,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Pce).buildKeyframes(e,t,n,i,r,o,s,a,l,c)}class Pce{buildKeyframes(t,n,i,r,o,s,a,l,c,d=[]){c=c||new FC;const h=new lD(t,n,c,r,o,d,[]);h.options=l;const p=l.delay?bu(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),sc(this,i,h);const g=h.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let y=g.length-1;y>=0;y--){const b=g[y];if(b.element===n){v=b;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,h.errors,l)}return g.length?g.map(v=>v.buildKeyframes()):[sD(n,[],[],[],0,p,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,i),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:bu(Vy(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,n,i){let o=n.currentTimeline.currentTime;const s=null!=i.duration?bu(i.duration):null,a=null!=i.delay?bu(i.delay):null;return 0!==s&&t.forEach(l=>{const c=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,n){n.updateOptions(t.options,!0),sc(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const o=t.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=LC);const s=bu(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>sc(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const o=t.options&&t.options.delay?bu(t.options.delay):0;t.steps.forEach(s=>{const a=n.createSubContext(t.options);o&&a.delayNextStep(o),sc(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return DC(n.params?Vy(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},o=r.delay?bu(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=LC);let s=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{n.currentQueryIndex=d;const h=n.createSubContext(t.options,c);o&&h.delayNextStep(o),c===n.element&&(l=h.currentTimeline),sc(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,h.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1);let l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=n.currentTimeline;l&&d.delayNextStep(l);const h=d.currentTime;sc(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const LC={};class lD{constructor(t,n,i,r,o,s,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=LC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new BC(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=bu(i.duration)),null!=i.delay&&(r.delay=bu(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=Vy(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,o=new lD(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=LC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:n??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new Sce(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Cce,"."+this._enterClassName)).replace(Mce,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function Ale(e){return new V(3014,!1)}()),a}}class BC{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new BC(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||yu),this._currentKeyframe.set(n,yu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&this._previousKeyframe.set("easing",n);const o=r&&r.params||{},s=function Oce(e,t){const n=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)n.set(o,yu)}else Up(r,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of s){const c=Vy(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??yu),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Up(a,new Map,this._backFill);c.forEach((d,h)=>{"!"===d?t.add(h):d===yu&&n.add(h)}),i||c.set("offset",l/this.duration),r.push(c)});const o=t.size?AC(t.values()):[],s=n.size?AC(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return sD(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Sce extends BC{constructor(t,n,i,r,o,s,a=!1){super(t,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],s=i+n,a=n/s,l=Up(t[0]);l.set("offset",0),o.push(l);const c=Up(t[0]);c.set("offset",kz(a)),o.push(c);const d=t.length-1;for(let h=1;h<=d;h++){let p=Up(t[h]);const g=p.get("offset");p.set("offset",kz((n+g*i)/s)),o.push(p)}i=s,n=0,r="",t=o}return sD(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function kz(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class cD{}const Ece=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Dce extends cD{normalizePropertyName(t,n){return iD(t)}normalizeStyleValue(t,n,i,r){let o="";const s=i.toString().trim();if(Ece.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ble(e,t){return new V(3005,!1)}())}return s+o}}function Rz(e,t,n,i,r,o,s,a,l,c,d,h,p){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:p}}const dD={};class Nz{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function Ace(e,t,n,i,r){return e.some(o=>o(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(n,i):new Map}build(t,n,i,r,o,s,a,l,c,d){const h=[],p=this.ast.options&&this.ast.options.params||dD,v=this.buildStyles(i,a&&a.params||dD,h),y=l&&l.params||dD,b=this.buildStyles(r,y,h),P=new Set,S=new Map,O=new Map,A="void"===r,H={params:Tce(y,p),delay:this.ast.options?.delay},U=d?[]:aD(t,n,this.ast.animation,o,s,v,b,H,c,h);let X=0;if(U.forEach(Z=>{X=Math.max(Z.duration+Z.delay,X)}),h.length)return Rz(n,this._triggerName,i,r,A,v,b,[],[],S,O,X,h);U.forEach(Z=>{const ee=Z.element,oe=oc(S,ee,new Set);Z.preStyleProps.forEach(de=>oe.add(de));const ce=oc(O,ee,new Set);Z.postStyleProps.forEach(de=>ce.add(de)),ee!==n&&P.add(ee)});const Y=AC(P.values());return Rz(n,this._triggerName,i,r,A,v,b,U,Y,S,O,X)}}function Tce(e,t){const n=Uy(t);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n[i]=e[i]);return n}class Ice{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i=new Map,r=Uy(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Vy(s,r,n));const l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),i.set(l,s)})}),i}}class Rce{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new Ice(r.style,r.options&&r.options.params||{},i))}),Fz(this.states,"true","1"),Fz(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Nz(t,r,this.states))}),this.fallbackTransition=function Nce(e,t,n){return new Nz(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(s=>s.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function Fz(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const Fce=new FC;class Lce{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const i=[],o=rD(this._driver,n,i,[]);if(i.length)throw function Lle(e){return new V(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,n,i){const r=t.element,o=fz(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=aD(this._driver,n,o,JE,SC,new Map,new Map,i,Fce,r),s.forEach(d=>{const h=oc(a,d.element,new Map);d.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(function Ble(){return new V(3300,!1)}()),s=[]),r.length)throw function zle(e){return new V(3504,!1)}();a.forEach((d,h)=>{d.forEach((p,g)=>{d.set(g,this._driver.computeStyle(h,g,yu))})});const c=zp(s.map(d=>{const h=a.get(d.element);return this._buildPlayer(d,new Map,h)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function Ule(e){return new V(3301,!1)}();return n}listen(t,n,i,r){const o=$E(n,"","","");return YE(this._getPlayer(t),i,o,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Lz="ng-animate-queued",hD="ng-animate-disabled",Vce=[],Bz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Hce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ac="__ng_removed";class uD{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function Yce(e){return e??null}(i?t.value:t),i){const o=Uy(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const Hy="void",pD=new uD(Hy);class Gce{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Tc(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.has(n))throw function jle(e,t){return new V(3302,!1)}();if(null==i||0==i.length)throw function Vle(e){return new V(3303,!1)}();if(!function Xce(e){return"start"==e||"done"==e}(i))throw function Hle(e,t){return new V(3400,!1)}();const o=oc(this._elementListeners,t,[]),s={name:n,phase:i,callback:r};o.push(s);const a=oc(this._engine.statesByElement,t,new Map);return a.has(n)||(Tc(t,OC),Tc(t,OC+"-"+n),a.set(n,pD)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function Gle(e){return new V(3401,!1)}();return n}trigger(t,n,i,r=!0){const o=this._getTrigger(n),s=new fD(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(Tc(t,OC),Tc(t,OC+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const c=new uD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=pD),c.value!==Hy&&l.value===c.value){if(!function Kce(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(l.params,c.params)){const y=[],b=o.matchStyles(l.value,l.params,y),P=o.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{_m(t,b),dh(t,P)})}return}const p=oc(this._engine.playersByElement,t,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==n&&y.queued&&y.destroy()});let g=o.matchTransition(l.value,c.value,t,c.params),v=!1;if(!g){if(!r)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:v}),v||(Tc(t,Lz),s.onStart(()=>{E0(t,Lz)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);const b=this._engine.playersByElement.get(t);if(b){let P=b.indexOf(s);P>=0&&b.splice(P,1)}}),this.players.push(s),p.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,EC,!0);i.forEach(r=>{if(r[Ac])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const d=this.trigger(t,c,Hy,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,s),i&&zp(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||pD,d=new uD(Hy),h=new fD(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const o=t[Ac];(!o||o===Bz)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){Tc(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=$E(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,YE(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class Wce{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new Gce(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}return n}trigger(t,n,i,r){if(zC(n)){const o=this._fetchNamespace(t);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!zC(n))return;const o=n[Ac];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Tc(t,hD)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),E0(t,hD))}removeNode(t,n,i,r){if(zC(n)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,o){this.collectedLeaveElements.push(n),n[Ac]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,n,i,r,o){return zC(n)?this._fetchNamespace(t).listen(n,i,r,o):()=>{}}_buildInstruction(t,n,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,o)}destroyInnerAnimations(t){let n=this.driver.query(t,EC,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,eD,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return zp(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Ac];if(n&&n.setForRemoval){if(t[Ac]=Bz,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(hD)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Tc(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?zp(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Wle(e){return new V(3402,!1)}()}_flushAnimations(t,n){const i=new FC,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(we=>{d.add(we);const _e=this.driver.query(we,".ng-animate-queued",!0);for(let ve=0;ve<_e.length;ve++)d.add(_e[ve])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=jz(p,this.collectedEnterElements),v=new Map;let y=0;g.forEach((we,_e)=>{const ve=JE+y++;v.set(_e,ve),we.forEach(ke=>Tc(ke,ve))});const b=[],P=new Set,S=new Set;for(let we=0;we<this.collectedLeaveElements.length;we++){const _e=this.collectedLeaveElements[we],ve=_e[Ac];ve&&ve.setForRemoval&&(b.push(_e),P.add(_e),ve.hasAnimation?this.driver.query(_e,".ng-star-inserted",!0).forEach(ke=>P.add(ke)):S.add(_e))}const O=new Map,A=jz(p,Array.from(P));A.forEach((we,_e)=>{const ve=SC+y++;O.set(_e,ve),we.forEach(ke=>Tc(ke,ve))}),t.push(()=>{g.forEach((we,_e)=>{const ve=v.get(_e);we.forEach(ke=>E0(ke,ve))}),A.forEach((we,_e)=>{const ve=O.get(_e);we.forEach(ke=>E0(ke,ve))}),b.forEach(we=>{this.processLeaveNode(we)})});const H=[],U=[];for(let we=this._namespaceList.length-1;we>=0;we--)this._namespaceList[we].drainQueuedTransitions(n).forEach(ve=>{const ke=ve.player,ze=ve.element;if(H.push(ke),this.collectedEnterElements.length){const gt=ze[Ac];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(ve.triggerName)){const Ze=gt.previousTriggersValues.get(ve.triggerName),yt=this.statesByElement.get(ve.element);if(yt&&yt.has(ve.triggerName)){const nt=yt.get(ve.triggerName);nt.value=Ze,yt.set(ve.triggerName,nt)}}return void ke.destroy()}}const Le=!h||!this.driver.containsElement(h,ze),Ne=O.get(ze),$e=v.get(ze),Be=this._buildInstruction(ve,i,$e,Ne,Le);if(Be.errors&&Be.errors.length)return void U.push(Be);if(Le)return ke.onStart(()=>_m(ze,Be.fromStyles)),ke.onDestroy(()=>dh(ze,Be.toStyles)),void r.push(ke);if(ve.isFallbackTransition)return ke.onStart(()=>_m(ze,Be.fromStyles)),ke.onDestroy(()=>dh(ze,Be.toStyles)),void r.push(ke);const Xe=[];Be.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||Xe.push(gt)}),Be.timelines=Xe,i.append(ze,Be.timelines),s.push({instruction:Be,player:ke,element:ze}),Be.queriedElements.forEach(gt=>oc(a,gt,[]).push(ke)),Be.preStyleProps.forEach((gt,Ze)=>{if(gt.size){let yt=l.get(Ze);yt||l.set(Ze,yt=new Set),gt.forEach((nt,zt)=>yt.add(zt))}}),Be.postStyleProps.forEach((gt,Ze)=>{let yt=c.get(Ze);yt||c.set(Ze,yt=new Set),gt.forEach((nt,zt)=>yt.add(zt))})});if(U.length){const we=[];U.forEach(_e=>{we.push(function qle(e,t){return new V(3505,!1)}())}),H.forEach(_e=>_e.destroy()),this.reportError(we)}const X=new Map,Y=new Map;s.forEach(we=>{const _e=we.element;i.has(_e)&&(Y.set(_e,_e),this._beforeAnimationBuild(we.player.namespaceId,we.instruction,X))}),r.forEach(we=>{const _e=we.element;this._getPreviousPlayers(_e,!1,we.namespaceId,we.triggerName,null).forEach(ke=>{oc(X,_e,[]).push(ke),ke.destroy()})});const Z=b.filter(we=>Hz(we,l,c)),ee=new Map;Uz(ee,this.driver,S,c,yu).forEach(we=>{Hz(we,l,c)&&Z.push(we)});const ce=new Map;g.forEach((we,_e)=>{Uz(ce,this.driver,new Set(we),l,"!")}),Z.forEach(we=>{const _e=ee.get(we),ve=ce.get(we);ee.set(we,new Map([...Array.from(_e?.entries()??[]),...Array.from(ve?.entries()??[])]))});const de=[],he=[],Pe={};s.forEach(we=>{const{element:_e,player:ve,instruction:ke}=we;if(i.has(_e)){if(d.has(_e))return ve.onDestroy(()=>dh(_e,ke.toStyles)),ve.disabled=!0,ve.overrideTotalTime(ke.totalTime),void r.push(ve);let ze=Pe;if(Y.size>1){let Ne=_e;const $e=[];for(;Ne=Ne.parentNode;){const Be=Y.get(Ne);if(Be){ze=Be;break}$e.push(Ne)}$e.forEach(Be=>Y.set(Be,ze))}const Le=this._buildAnimation(ve.namespaceId,ke,X,o,ce,ee);if(ve.setRealPlayer(Le),ze===Pe)de.push(ve);else{const Ne=this.playersByElement.get(ze);Ne&&Ne.length&&(ve.parentPlayer=zp(Ne)),r.push(ve)}}else _m(_e,ke.fromStyles),ve.onDestroy(()=>dh(_e,ke.toStyles)),he.push(ve),d.has(_e)&&r.push(ve)}),he.forEach(we=>{const _e=o.get(we.element);if(_e&&_e.length){const ve=zp(_e);we.setRealPlayer(ve)}}),r.forEach(we=>{we.parentPlayer?we.syncPlayerEvents(we.parentPlayer):we.destroy()});for(let we=0;we<b.length;we++){const _e=b[we],ve=_e[Ac];if(E0(_e,SC),ve&&ve.hasAnimation)continue;let ke=[];if(a.size){let Le=a.get(_e);Le&&Le.length&&ke.push(...Le);let Ne=this.driver.query(_e,eD,!0);for(let $e=0;$e<Ne.length;$e++){let Be=a.get(Ne[$e]);Be&&Be.length&&ke.push(...Be)}}const ze=ke.filter(Le=>!Le.destroyed);ze.length?$ce(this,_e,ze):this.processLeaveNode(_e)}return b.length=0,de.forEach(we=>{this.players.push(we),we.onDone(()=>{we.destroy();const _e=this.players.indexOf(we);this.players.splice(_e,1)}),we.play()}),de}elementContainsData(t,n){let i=!1;const r=n[Ac];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,o){let s=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Hy;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,n,i){const o=n.element,s=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const c=l.element,d=c!==o,h=oc(i,c,[]);this._getPreviousPlayers(c,d,s,a,n.toState).forEach(g=>{const v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),h.push(g)})}_m(o,n.fromStyles)}_buildAnimation(t,n,i,r,o,s){const a=n.triggerName,l=n.element,c=[],d=new Set,h=new Set,p=n.timelines.map(v=>{const y=v.element;d.add(y);const b=y[Ac];if(b&&b.removedBeforeQueried)return new zy(v.duration,v.delay);const P=y!==l,S=function Qce(e){const t=[];return Vz(e,t),t}((i.get(y)||Vce).map(X=>X.getRealPlayer())).filter(X=>!!X.element&&X.element===y),O=o.get(y),A=s.get(y),H=fz(0,this._normalizer,0,v.keyframes,O,A),U=this._buildPlayer(v,H,S);if(v.subTimeline&&r&&h.add(y),P){const X=new fD(t,a,y);X.setRealPlayer(U),c.push(X)}return U});c.forEach(v=>{oc(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function qce(e,t,n){let i=e.get(t);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}return i}(this.playersByQueriedElement,v.element,v))}),d.forEach(v=>Tc(v,wz));const g=zp(p);return g.onDestroy(()=>{d.forEach(v=>E0(v,wz)),dh(l,n.toStyles)}),h.forEach(v=>{oc(r,v,[]).push(g)}),g}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new zy(t.duration,t.delay)}}class fD{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new zy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>YE(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){oc(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function zC(e){return e&&1===e.nodeType}function zz(e,t){const n=e.style.display;return e.style.display=t??"none",n}function Uz(e,t,n,i,r){const o=[];n.forEach(l=>o.push(zz(l)));const s=[];i.forEach((l,c)=>{const d=new Map;l.forEach(h=>{const p=t.computeStyle(c,h,r);d.set(h,p),(!p||0==p.length)&&(c[Ac]=Hce,s.push(c))}),e.set(c,d)});let a=0;return n.forEach(l=>zz(l,o[a++])),s}function jz(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=n.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&n.get(l).push(a)}),n}function Tc(e,t){e.classList?.add(t)}function E0(e,t){e.classList?.remove(t)}function $ce(e,t,n){zp(n).onDone(()=>e.processLeaveNode(t))}function Vz(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof uz?Vz(i.players,t):t.push(i)}}function Hz(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(o=>r.add(o)):t.set(e,i),n.delete(e),!0}class UC{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Wce(t,n,i),this._timelineEngine=new Lce(t,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,n,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],d=rD(this._driver,o,l,[]);if(l.length)throw function Nle(e,t){return new V(3404,!1)}();a=function kce(e,t,n){return new Rce(e,t,n)}(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[o,s]=mz(i);this._timelineEngine.command(o,n,s,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,o){if("@"==i.charAt(0)){const[s,a]=mz(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(t,n,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Jce=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(n);o||e.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&dh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dh(this._element,this._initialStyles),this._endStyles&&(dh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(_m(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_m(this._element,this._endStyles),this._endStyles=null),dh(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function mD(e){let t=null;return e.forEach((n,i)=>{(function ede(e){return"display"===e||"position"===e})(i)&&(t=t||new Map,t.set(i,n))}),t}class Gz{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(t,n,i){return t.animate(this._convertKeyframesToObject(n),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Dz(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class tde{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return bz(t,n)}getParentElement(t){return KE(t)}query(t,n,i){return _z(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,d=s.filter(g=>g instanceof Gz);(function oce(e,t){return 0===e||0===t})(i,r)&&d.forEach(g=>{g.currentSnapshot.forEach((v,y)=>c.set(y,v))});let h=function tce(e){return e.length?e[0]instanceof Map?e:e.map(t=>Mz(t)):[]}(n).map(g=>Up(g));h=function sce(e,t,n){if(n.size&&t.length){let i=t[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,Dz(e,a)))}}return t}(t,h,c);const p=function Zce(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=mD(t[0]),t.length>1&&(i=mD(t[t.length-1]))):t instanceof Map&&(n=mD(t)),n||i?new Jce(e,n,i):null}(t,h);return new Gz(t,h,l,p)}}let nde=(()=>{class e extends lz{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:So.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?dz(n):n;return Wz(this._renderer,null,i,"register",[r]),new ide(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(Gt(c0),Gt(po))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class ide extends class ple{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new rde(this._id,t,n||{},this._renderer)}}class rde{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Wz(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Wz(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const qz="@.disabled";let ode=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(n,i){const o=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(o);return d||(d=new Yz("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,d)),d}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(s,a,n,d.name,d)};return i.data.animation.forEach(l),new sde(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(Gt(c0),Gt(UC),Gt(Tr))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class Yz{constructor(t,n,i,r){this.namespaceId=t,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==qz?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class sde extends Yz{constructor(t,n,i,r,o){super(n,i,r,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==qz?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.slice(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function ade(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let o=n.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function lde(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let cde=(()=>{class e extends UC{constructor(n,i,r,o){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(Gt(po),Gt(ZE),Gt(cD),Gt(fm))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const Xz=[{provide:lz,useClass:nde},{provide:cD,useFactory:function dde(){return new Dce}},{provide:UC,useClass:cde},{provide:c0,useFactory:function hde(e,t,n){return new ode(e,t,n)},deps:[PC,UC,Tr]}],gD=[{provide:ZE,useFactory:()=>new tde},{provide:LB,useValue:"BrowserAnimations"},...Xz],$z=[{provide:ZE,useClass:xz},{provide:LB,useValue:"NoopAnimations"},...Xz];let ude=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?$z:gD}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:gD,imports:[iz]}),e})();var Va=m(3527),pde=m(567),Ti=m(4850);let Qz=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Rr))},e.\u0275dir=Et({type:e}),e})(),Cm=(()=>{class e extends Qz{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ba(e)))(i||e)}}(),e.\u0275dir=Et({type:e,features:[Nr]}),e})();const hh=new Kn("NgValueAccessor"),mde={provide:hh,useExisting:R(()=>jp),multi:!0},vde=new Kn("CompositionEventMode");let jp=(()=>{class e extends Qz{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gde(){const e=vd()?vd().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Rr),Oe(vde,8))},e.\u0275dir=Et({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&St("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[bo([mde]),Nr]}),e})();function Vp(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function Zz(e){return null!=e&&"number"==typeof e.length}const Ha=new Kn("NgValidators"),Hp=new Kn("NgAsyncValidators"),bde=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kl{static min(t){return function Jz(e){return t=>{if(Vp(t.value)||Vp(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(t)}static max(t){return function e8(e){return t=>{if(Vp(t.value)||Vp(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(t)}static required(t){return t8(t)}static requiredTrue(t){return function n8(e){return!0===e.value?null:{required:!0}}(t)}static email(t){return function i8(e){return Vp(e.value)||bde.test(e.value)?null:{email:!0}}(t)}static minLength(t){return function r8(e){return t=>Vp(t.value)||!Zz(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function o8(e){return t=>Zz(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static pattern(t){return function s8(e){if(!e)return VC;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(Vp(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return u8(t)}static composeAsync(t){return p8(t)}}function t8(e){return Vp(e.value)?{required:!0}:null}function VC(e){return null}function a8(e){return null!=e}function l8(e){return _y(e)?(0,Va.D)(e):e}function c8(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function d8(e,t){return t.map(n=>n(e))}function h8(e){return e.map(t=>function _de(e){return!e.validate}(t)?t:n=>t.validate(n))}function u8(e){if(!e)return null;const t=e.filter(a8);return 0==t.length?null:function(n){return c8(d8(n,t))}}function vD(e){return null!=e?u8(h8(e)):null}function p8(e){if(!e)return null;const t=e.filter(a8);return 0==t.length?null:function(n){const i=d8(n,t).map(l8);return(0,pde.D)(i).pipe((0,Ti.U)(c8))}}function yD(e){return null!=e?p8(h8(e)):null}function f8(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function m8(e){return e._rawValidators}function g8(e){return e._rawAsyncValidators}function bD(e){return e?Array.isArray(e)?e:[e]:[]}function HC(e,t){return Array.isArray(e)?e.includes(t):e===t}function v8(e,t){const n=bD(t);return bD(e).forEach(r=>{HC(n,r)||n.push(r)}),n}function y8(e,t){return bD(t).filter(n=>!HC(e,n))}class b8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=yD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class dl extends b8{get formDirective(){return null}get path(){return null}}class Gp extends b8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _8{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let D0=(()=>{class e extends _8{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(Oe(Gp,2))},e.\u0275dir=Et({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Xo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nr]}),e})(),A0=(()=>{class e extends _8{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(Oe(dl,10))},e.\u0275dir=Et({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,i){2&n&&Xo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Nr]}),e})();const Gy="VALID",WC="INVALID",T0="PENDING",Wy="DISABLED";function wD(e){return(qC(e)?e.validators:e)||null}function C8(e){return Array.isArray(e)?vD(e):e||null}function MD(e,t){return(qC(t)?t.asyncValidators:e)||null}function w8(e){return Array.isArray(e)?yD(e):e||null}function qC(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function M8(e,t,n){const i=e.controls;if(!(t?Object.keys(i):i).length)throw new V(1e3,"");if(!i[n])throw new V(1001,"")}function P8(e,t,n){e._forEachChild((i,r)=>{if(void 0===n[r])throw new V(1002,"")})}class YC{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=C8(this._rawValidators),this._composedAsyncValidatorFn=w8(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Gy}get invalid(){return this.status===WC}get pending(){return this.status==T0}get disabled(){return this.status===Wy}get enabled(){return this.status!==Wy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=C8(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=w8(t)}addValidators(t){this.setValidators(v8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(v8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(y8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(y8(t,this._rawAsyncValidators))}hasValidator(t){return HC(this._rawValidators,t)}hasAsyncValidator(t){return HC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=T0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Wy,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Gy,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gy||this.status===T0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wy:Gy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=T0,this._hasOwnPendingAsyncValidator=!0;const n=l8(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ai,this.statusChanges=new Ai}_calculateStatus(){return this._allControlsDisabled()?Wy:this.errors?WC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(T0)?T0:this._anyControlsHaveStatus(WC)?WC:Gy}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){qC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class qy extends YC{constructor(t,n,i){super(wD(n),MD(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){P8(this,0,t),Object.keys(t).forEach(i=>{M8(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class S8 extends qy{}function XC(e,t){return[...t.path,e]}function Yy(e,t){PD(e,t),t.valueAccessor.writeValue(e.value),e.disabled&&t.valueAccessor.setDisabledState?.(!0),function Ede(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&O8(e,t)})}(e,t),function Ade(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function Dde(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&O8(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function Ode(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function $C(e,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),KC(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function QC(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function PD(e,t){const n=m8(e);null!==t.validator?e.setValidators(f8(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=g8(e);null!==t.asyncValidator?e.setAsyncValidators(f8(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();QC(t._rawValidators,r),QC(t._rawAsyncValidators,r)}function KC(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=m8(e);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.validator);o.length!==r.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const r=g8(e);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(n=!0,e.setAsyncValidators(o))}}}const i=()=>{};return QC(t._rawValidators,i),QC(t._rawAsyncValidators,i),n}function O8(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function E8(e,t){PD(e,t)}function SD(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function A8(e,t){e._syncPendingControls(),t.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function OD(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===jp?n=o:function kde(e){return Object.getPrototypeOf(e.constructor)===Cm}(o)?i=o:r=o}),r||i||n||null}const Nde={provide:dl,useExisting:R(()=>ZC)},Xy=(()=>Promise.resolve())();let ZC=(()=>{class e extends dl{constructor(n,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ai,this.form=new qy({},vD(n),yD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Xy.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),Yy(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Xy.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Xy.then(()=>{const i=this._findContainer(n.path),r=new qy({});E8(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Xy.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Xy.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,A8(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return e.\u0275fac=function(n){return new(n||e)(Oe(Ha,10),Oe(Hp,10))},e.\u0275dir=Et({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,i){1&n&&St("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bo([Nde]),Nr]}),e})();function T8(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function I8(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const $y=class extends YC{constructor(t=null,n,i){super(wD(n),MD(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qC(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=I8(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){T8(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){T8(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){I8(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Bde={provide:Gp,useExisting:R(()=>ED)},N8=(()=>Promise.resolve())();let ED=(()=>{class e extends Gp{constructor(n,i,r,o,s){super(),this._changeDetectorRef=s,this.control=new $y,this._registered=!1,this.update=new Ai,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=OD(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),SD(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){N8.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,r=0!==i&&mu(i);N8.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?XC(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(Oe(dl,9),Oe(Ha,10),Oe(Hp,10),Oe(hh,10),Oe(gd,8))},e.\u0275dir=Et({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bo([Bde]),Nr,gs]}),e})(),I0=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Et({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),L8=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();const DD=new Kn("NgModelWithFormControlWarning"),Gde={provide:dl,useExisting:R(()=>Wp)};let Wp=(()=>{class e extends dl{constructor(n,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ai,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(KC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return Yy(i,n),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){$C(n.control||null,n,!1),function Rde(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,A8(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&($C(i||null,n),(e=>e instanceof $y)(r)&&(Yy(r,n),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);E8(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function Tde(e,t){return KC(e,t)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PD(this.form,this),this._oldForm&&KC(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(n){return new(n||e)(Oe(Ha,10),Oe(Hp,10))},e.\u0275dir=Et({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,i){1&n&&St("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bo([Gde]),Nr,gs]}),e})();const Yde={provide:Gp,useExisting:R(()=>wm)};let wm=(()=>{class e extends Gp{constructor(n,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Ai,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=OD(0,o)}set isDisabled(n){}ngOnChanges(n){this._added||this._setUpControl(),SD(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return XC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(n){return new(n||e)(Oe(dl,13),Oe(Ha,10),Oe(Hp,10),Oe(hh,10),Oe(DD,8))},e.\u0275dir=Et({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[bo([Yde]),Nr,gs]}),e})(),Mm=(()=>{class e{constructor(){this._validator=VC}ngOnChanges(n){if(this.inputName in n){const i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):VC,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Et({type:e,features:[gs]}),e})();const nhe={provide:Ha,useExisting:R(()=>Qy),multi:!0};let Qy=(()=>{class e extends Mm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=mu,this.createValidator=n=>t8}enabled(n){return n}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ba(e)))(i||e)}}(),e.\u0275dir=Et({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,i){2&n&&Zr("required",i._enabled?"":null)},inputs:{required:"required"},features:[bo([nhe]),Nr]}),e})(),J8=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[L8]}),e})(),e9=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[J8]}),e})(),t9=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:DD,useValue:n.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[J8]}),e})();class n9 extends YC{constructor(t,n,i){super(wD(n),MD(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){P8(this,0,t),t.forEach((i,r)=>{M8(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function i9(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let Pm=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new e;return n.useNonNullable=!0,n}group(n,i=null){const r=this._reduceControls(n);let o={};return i9(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new qy(r,o)}record(n,i=null){const r=this._reduceControls(n);return new S8(r,i)}control(n,i,r){let o={};return this.useNonNullable?(i9(i)?o=i:(o.validators=i,o.asyncValidators=r),new $y(n,{...o,nonNullable:!0})):new $y(n,i,r)}array(n,i,r){const o=n.map(s=>this._createControl(s));return new n9(o,i,r)}_reduceControls(n){const i={};return Object.keys(n).forEach(r=>{i[r]=this._createControl(n[r])}),i}_createControl(n){return n instanceof $y||n instanceof YC?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:t9}),e})();var $n=m(1086),qp=m(1406),ba=m(2198);class r9{}class o9{}class _u{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(n,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof _u?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new _u;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof _u?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class lhe{encodeKey(t){return s9(t)}encodeValue(t){return s9(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const dhe=/%(\d[a-f0-9])/gi,hhe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function s9(e){return encodeURIComponent(e).replace(dhe,(t,n)=>hhe[n]??t)}function JC(e){return`${e}`}class Yp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new lhe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function che(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],r=Array.isArray(i)?i.map(JC):[JC(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new Yp({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(JC(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(JC(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class uhe{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function a9(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function l9(e){return typeof Blob<"u"&&e instanceof Blob}function c9(e){return typeof FormData<"u"&&e instanceof FormData}class Ky{constructor(t,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function phe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new _u),this.context||(this.context=new uhe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Yp,this.urlWithParams=n}serializeBody(){return null===this.body?null:a9(this.body)||l9(this.body)||c9(this.body)||function fhe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||c9(this.body)?null:l9(this.body)?this.body.type||null:a9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const d=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),c)),new Ky(n,i,o,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var _s=(()=>((_s=_s||{})[_s.Sent=0]="Sent",_s[_s.UploadProgress=1]="UploadProgress",_s[_s.ResponseHeader=2]="ResponseHeader",_s[_s.DownloadProgress=3]="DownloadProgress",_s[_s.Response=4]="Response",_s[_s.User=5]="User",_s))();class RD{constructor(t,n=200,i="OK"){this.headers=t.headers||new _u,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class ND extends RD{constructor(t={}){super(t),this.type=_s.ResponseHeader}clone(t={}){return new ND({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ew extends RD{constructor(t={}){super(t),this.type=_s.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ew({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class d9 extends RD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function FD(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Rl=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof Ky)o=n;else{let l,c;l=r.headers instanceof _u?r.headers:new _u(r.headers),r.params&&(c=r.params instanceof Yp?r.params:new Yp({fromObject:r.params})),o=new Ky(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=(0,$n.of)(o).pipe((0,qp.b)(l=>this.handler.handle(l)));if(n instanceof Ky||"events"===r.observe)return s;const a=s.pipe((0,ba.h)(l=>l instanceof ew));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe((0,Ti.U)(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe((0,Ti.U)(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe((0,Ti.U)(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe((0,Ti.U)(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new Yp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,FD(r,i))}post(n,i,r={}){return this.request("POST",n,FD(r,i))}put(n,i,r={}){return this.request("PUT",n,FD(r,i))}}return e.\u0275fac=function(n){return new(n||e)(Gt(r9))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class h9{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const u9=new Kn("HTTP_INTERCEPTORS");let mhe=(()=>{class e{intercept(n,i){return i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const ghe=/^\)\]\}',?\n/;let p9=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new D.y(i=>{const r=this.xhrFactory.build();if(r.open(n.method,n.urlWithParams),n.withCredentials&&(r.withCredentials=!0),n.headers.forEach((g,v)=>r.setRequestHeader(g,v.join(","))),n.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const g=n.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(n.responseType){const g=n.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const g=r.statusText||"OK",v=new _u(r.getAllResponseHeaders()),y=function vhe(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||n.url;return s=new ND({headers:v,status:r.status,statusText:g,url:y}),s},l=()=>{let{headers:g,status:v,statusText:y,url:b}=a(),P=null;204!==v&&(P=typeof r.response>"u"?r.responseText:r.response),0===v&&(v=P?200:0);let S=v>=200&&v<300;if("json"===n.responseType&&"string"==typeof P){const O=P;P=P.replace(ghe,"");try{P=""!==P?JSON.parse(P):null}catch(A){P=O,S&&(S=!1,P={error:A,text:P})}}S?(i.next(new ew({body:P,headers:g,status:v,statusText:y,url:b||void 0})),i.complete()):i.error(new d9({error:P,headers:g,status:v,statusText:y,url:b||void 0}))},c=g=>{const{url:v}=a(),y=new d9({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:v||void 0});i.error(y)};let d=!1;const h=g=>{d||(i.next(a()),d=!0);let v={type:_s.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),"text"===n.responseType&&!!r.responseText&&(v.partialText=r.responseText),i.next(v)},p=g=>{let v={type:_s.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),i.next(v)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),n.reportProgress&&(r.addEventListener("progress",h),null!==o&&r.upload&&r.upload.addEventListener("progress",p)),r.send(o),i.next({type:_s.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),n.reportProgress&&(r.removeEventListener("progress",h),null!==o&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(Gt(L6))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const LD=new Kn("XSRF_COOKIE_NAME"),BD=new Kn("XSRF_HEADER_NAME");class f9{}let yhe=(()=>{class e{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=P6(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(Gt(po),Gt(Pc),Gt(LD))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),zD=(()=>{class e{constructor(n,i){this.tokenService=n,this.headerName=i}intercept(n,i){const r=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),i.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(f9),Gt(BD))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),bhe=(()=>{class e{constructor(n,i){this.backend=n,this.injector=i,this.chain=null}handle(n){if(null===this.chain){const i=this.injector.get(u9,[]);this.chain=i.reduceRight((r,o)=>new h9(r,o),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(o9),Gt(ks))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),_he=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:zD,useClass:mhe}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:LD,useValue:n.cookieName}:[],n.headerName?{provide:BD,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:[zD,{provide:u9,useExisting:zD,multi:!0},{provide:f9,useClass:yhe},{provide:LD,useValue:"XSRF-TOKEN"},{provide:BD,useValue:"X-XSRF-TOKEN"}]}),e})(),xhe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:[Rl,{provide:r9,useClass:bhe},p9,{provide:o9,useExisting:p9}],imports:[_he.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),e})();function Oi(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function k0(e,t){return function(n,i){t(n,i,e)}}var Hi=m(2994),_a=m(7545),_d=m(7224),Ga=m(2986),jD=m(1307),whe=m(864),v9=m(943),na=m(591),Mhe=m(4450),nw=m(6053),Phe=m(1961),y9=m(8514),She=m(4843),no=m(1737),R0=m(8896),b9=m(1762),iw=m(1059),ac=m(1709),Vr=m(7221),_9=m(2014),x9=m(8127),Ohe=m(4290),C9=m(7314),w9=m(2821),Ehe=m(7604),VD=m(537),M9=m(4327),rw=m(9146);const nr="primary",Zy=Symbol("RouteTitle");class Dhe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function N0(e){return new Dhe(e)}function Ahe(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function uh(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!P9(e[r],t[r]))return!1;return!0}function P9(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}return e===t}function S9(e){return Array.prototype.concat.apply([],e)}function O9(e){return e.length>0?e[e.length-1]:null}function xa(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Xp(e){return kO(e)?e:_y(e)?(0,Va.D)(Promise.resolve(e)):(0,$n.of)(e)}const khe={exact:function A9(e,t,n){if(!Om(e.segments,t.segments)||!ow(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!A9(e.children[i],t.children[i],n))return!1;return!0},subset:T9},E9={exact:function Rhe(e,t){return uh(e,t)},subset:function Nhe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>P9(e[n],t[n]))},ignored:()=>!0};function D9(e,t,n){return khe[n.paths](e.root,t.root,n.matrixParams)&&E9[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function T9(e,t,n){return I9(e,t,t.segments,n)}function I9(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!Om(r,n)||t.hasChildren()||!ow(r,n,i))}if(e.segments.length===n.length){if(!Om(e.segments,n)||!ow(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!T9(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(Om(e.segments,r)&&ow(e.segments,r,i)&&e.children[nr])&&I9(e.children[nr],t,o,i)}}function ow(e,t,n){return t.every((i,r)=>E9[n](e[r].parameters,i.parameters))}class Sm{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N0(this.queryParams)),this._queryParamMap}toString(){return Bhe.serialize(this)}}class ir{constructor(t,n){this.segments=t,this.children=n,this.parent=null,xa(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sw(this)}}class Jy{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=N0(this.parameters)),this._parameterMap}toString(){return F9(this)}}function Om(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}let k9=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:function(){return new GD},providedIn:"root"}),e})();class GD{parse(t){const n=new Yhe(t);return new Sm(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${eb(t.root,!0)}`,i=function jhe(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${aw(n)}=${aw(r)}`).join("&"):`${aw(n)}=${aw(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function zhe(e){return encodeURI(e)}(t.fragment)}`:""}`}}const Bhe=new GD;function sw(e){return e.segments.map(t=>F9(t)).join("/")}function eb(e,t){if(!e.hasChildren())return sw(e);if(t){const n=e.children[nr]?eb(e.children[nr],!1):"",i=[];return xa(e.children,(r,o)=>{o!==nr&&i.push(`${o}:${eb(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function Lhe(e,t){let n=[];return xa(e.children,(i,r)=>{r===nr&&(n=n.concat(t(i,r)))}),xa(e.children,(i,r)=>{r!==nr&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===nr?[eb(e.children[nr],!1)]:[`${r}:${eb(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[nr]?`${sw(e)}/${n[0]}`:`${sw(e)}/(${n.join("//")})`}}function R9(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aw(e){return R9(e).replace(/%3B/gi,";")}function WD(e){return R9(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lw(e){return decodeURIComponent(e)}function N9(e){return lw(e.replace(/\+/g,"%20"))}function F9(e){return`${WD(e.path)}${function Uhe(e){return Object.keys(e).map(t=>`;${WD(t)}=${WD(e[t])}`).join("")}(e.parameters)}`}const Vhe=/^[^\/()?;=#]+/;function cw(e){const t=e.match(Vhe);return t?t[0]:""}const Hhe=/^[^=?&#]+/,Whe=/^[^&#]+/;class Yhe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ir([],{}):new ir([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[nr]=new ir(t,n)),i}parseSegment(){const t=cw(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(t),new Jy(lw(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=cw(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=cw(this.remaining);r&&(i=r,this.capture(i))}t[lw(n)]=lw(i)}parseQueryParam(t){const n=function Ghe(e){const t=e.match(Hhe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=function qhe(e){const t=e.match(Whe);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=N9(n),o=N9(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=cw(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new V(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=nr);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[nr]:new ir([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new V(4011,!1)}}function qD(e){return e.segments.length>0?new ir([],{[nr]:e}):e}function dw(e){const t={};for(const i of Object.keys(e.children)){const o=dw(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function Xhe(e){if(1===e.numberOfChildren&&e.children[nr]){const t=e.children[nr];return new ir(e.segments.concat(t.segments),t.children)}return e}(new ir(e.segments,t))}function Em(e){return e instanceof Sm}function Khe(e,t,n,i,r){if(0===n.length)return F0(t.root,t.root,t.root,i,r);const o=function z9(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new B9(!0,0,e);let t=0,n=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return xa(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new B9(n,t,i)}(n);return o.toRoot()?F0(t.root,t.root,new ir([],{}),i,r):function s(l){const c=function Jhe(e,t,n,i){if(e.isAbsolute)return new L0(t.root,!0,0);if(-1===i)return new L0(n,n===t.root,0);return function U9(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new V(4005,!1);r=i.segments.length}return new L0(i,!1,r-o)}(n,i+(tb(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,l),d=c.processChildren?ib(c.segmentGroup,c.index,o.commands):XD(c.segmentGroup,c.index,o.commands);return F0(t.root,c.segmentGroup,d,i,r)}(e.snapshot?._lastPathIndex)}function tb(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function nb(e){return"object"==typeof e&&null!=e&&e.outlets}function F0(e,t,n,i,r){let s,o={};i&&xa(i,(l,c)=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),s=e===t?n:L9(e,t,n);const a=qD(dw(s));return new Sm(a,o,r)}function L9(e,t,n){const i={};return xa(e.children,(r,o)=>{i[o]=r===t?n:L9(r,t,n)}),new ir(e.segments,i)}class B9{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&tb(i[0]))throw new V(4003,!1);const r=i.find(nb);if(r&&r!==O9(i))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class L0{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function XD(e,t,n){if(e||(e=new ir([],{})),0===e.segments.length&&e.hasChildren())return ib(e,t,n);const i=function tue(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const s=e.segments[r],a=n[i];if(nb(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!V9(l,c,s))return o;i+=2}else{if(!V9(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new ir(e.segments.slice(0,i.pathIndex),{});return o.children[nr]=new ir(e.segments.slice(i.pathIndex),e.children),ib(o,0,r)}return i.match&&0===r.length?new ir(e.segments,{}):i.match&&!e.hasChildren()?$D(e,t,n):i.match?ib(e,0,r):$D(e,t,n)}function ib(e,t,n){if(0===n.length)return new ir(e.segments,{});{const i=function eue(e){return nb(e[0])?e[0].outlets:{[nr]:e}}(n),r={};return xa(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=XD(e.children[s],t,o))}),xa(e.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new ir(e.segments,r)}}function $D(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const o=n[r];if(nb(o)){const l=nue(o.outlets);return new ir(i,l)}if(0===r&&tb(n[0])){i.push(new Jy(e.segments[t].path,j9(n[0]))),r++;continue}const s=nb(o)?o.outlets[nr]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&tb(a)?(i.push(new Jy(s,j9(a))),r+=2):(i.push(new Jy(s,{})),r++)}return new ir(i,{})}function nue(e){const t={};return xa(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=$D(new ir([],{}),0,n))}),t}function j9(e){const t={};return xa(e,(n,i)=>t[i]=`${n}`),t}function V9(e,t,n){return e==n.path&&uh(t,n.parameters)}class xu{constructor(t,n){this.id=t,this.url=n}}class QD extends xu{constructor(t,n,i="imperative",r=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $p extends xu{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hw extends xu{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class H9 extends xu{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iue extends xu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rue extends xu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oue extends xu{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sue extends xu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aue extends xu{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lue{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cue{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class due{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hue{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uue{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pue{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G9{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class W9{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=KD(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=KD(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=ZD(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ZD(t,this._root).map(n=>n.value)}}function KD(e,t){if(e===t.value)return t;for(const n of t.children){const i=KD(e,n);if(i)return i}return null}function ZD(e,t){if(e===t.value)return[t];for(const n of t.children){const i=ZD(e,n);if(i.length)return i.unshift(t),i}return[]}class Cu{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function B0(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class q9 extends W9{constructor(t,n){super(t),this.snapshot=n,JD(this,t)}toString(){return this.snapshot.toString()}}function Y9(e,t){const n=function mue(e,t){const s=new uw([],{},{},"",{},nr,t,null,e.root,-1,{});return new $9("",new Cu(s,[]))}(e,t),i=new na.X([new Jy("",{})]),r=new na.X({}),o=new na.X({}),s=new na.X({}),a=new na.X(""),l=new Nl(i,r,s,a,o,nr,t,n.root);return l.snapshot=n.root,new q9(new Cu(l,[]),n)}class Nl{constructor(t,n,i,r,o,s,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe((0,Ti.U)(c=>c[Zy]))??(0,$n.of)(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ti.U)(t=>N0(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ti.U)(t=>N0(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function X9(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function gue(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class uw{constructor(t,n,i,r,o,s,a,l,c,d,h,p){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.[Zy],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._correctedLastPathIndex=p??d,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=N0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $9 extends W9{constructor(t,n){super(n),this.url=t,JD(this,n)}toString(){return Q9(this._root)}}function JD(e,t){t.value._routerState=e,t.children.forEach(n=>JD(e,n))}function Q9(e){const t=e.children.length>0?` { ${e.children.map(Q9).join(", ")} } `:"";return`${e.value}${t}`}function eA(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,uh(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),uh(t.params,n.params)||e.params.next(n.params),function The(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!uh(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),uh(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function tA(e,t){const n=uh(e.params,t.params)&&function Fhe(e,t){return Om(e,t)&&e.every((n,i)=>uh(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||tA(e.parent,t.parent))}function rb(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function yue(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return rb(e,i,r);return rb(e,i)})}(e,t,n);return new Cu(i,r)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>rb(e,a)),s}}const i=function bue(e){return new Nl(new na.X(e.url),new na.X(e.params),new na.X(e.queryParams),new na.X(e.fragment),new na.X(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(o=>rb(e,o));return new Cu(i,r)}}const nA="ngNavigationCancelingError";function K9(e,t){const{redirectTo:n,navigationBehaviorOptions:i}=Em(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Z9(!1,0,t);return r.url=n,r.navigationBehaviorOptions=i,r}function Z9(e,t,n){const i=new Error("NavigationCancelingError: "+(e||""));return i[nA]=!0,i.cancellationCode=t,n&&(i.url=n),i}function J9(e){return eU(e)&&Em(e.url)}function eU(e){return e&&e[nA]}class _ue{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sb,this.attachRef=null}}let sb=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new _ue,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pw=!1;let iA=(()=>{class e{constructor(n,i,r,o,s){this.parentContexts=n,this.location=i,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ai,this.deactivateEvents=new Ai,this.attachEvents=new Ai,this.detachEvents=new Ai,this.name=r||nr,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,pw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,pw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,pw);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new V(4013,pw);this._activatedRoute=n;const r=this.location,s=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new xue(n,a,r.injector);if(i&&function Cue(e){return!!e.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(s);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(Oe(sb),Oe(fd),function Sp(e){return function SZ(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(Wg(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(Bi(),e)}("name"),Oe(gd),Oe(Ep))},e.\u0275dir=Et({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class xue{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Nl?this.route:t===sb?this.childContexts:this.parent.get(t,n)}}let rA=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["ng-component"]],standalone:!0,features:[qL],decls:1,vars:0,template:function(n,i){1&n&&re(0,"router-outlet")},dependencies:[iA],encapsulation:2}),e})();function tU(e,t){return e.providers&&!e._injector&&(e._injector=Zx(e.providers,t,`Route: ${e.path}`)),e._injector??t}function sA(e){const t=e.children&&e.children.map(sA),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==nr&&(n.component=rA),n}function Ic(e){return e.outlet||nr}function nU(e,t){const n=e.filter(i=>Ic(i)===t);return n.push(...e.filter(i=>Ic(i)!==t)),n}function ab(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Oue{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),eA(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=B0(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),xa(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=B0(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=B0(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=B0(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new pue(o.value.snapshot))}),t.children.length&&this.forwardEvent(new hue(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(eA(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),eA(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=ab(r.snapshot),l=a?.get(a0)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class iU{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class fw{constructor(t,n){this.component=t,this.route=n}}function Eue(e,t,n){const i=e._root;return lb(i,t?t._root:null,n,[i.value])}function z0(e,t){const n=Symbol(),i=t.get(e,n);return i===n?"function"!=typeof e||function sr(e){return null!==tr(e)}(e)?t.get(e):e:i}function lb(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=B0(t);return e.children.forEach(s=>{(function Aue(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Tue(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Om(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Om(e.url,t.url)||!uh(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tA(e,t)||!uh(e.queryParams,t.queryParams);default:return!tA(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new iU(i)):(o.data=s.data,o._resolvedData=s._resolvedData),lb(e,t,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new fw(a.outlet.component,s))}else s&&cb(t,a,r),r.canActivateChecks.push(new iU(i)),lb(e,null,o.component?a?a.children:null:n,i,r)})(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),xa(o,(s,a)=>cb(s,n.getContext(a),r)),r}function cb(e,t,n){const i=B0(e),r=e.value;xa(i,(o,s)=>{cb(o,r.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new fw(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function db(e){return"function"==typeof e}function aA(e){return e instanceof Mhe.K||"EmptyError"===e?.name}const mw=Symbol("INITIAL_VALUE");function U0(){return(0,_a.w)(e=>(0,nw.aj)(e.map(t=>t.pipe((0,Ga.q)(1),(0,iw.O)(mw)))).pipe((0,Ti.U)(t=>{for(const n of t)if(!0!==n){if(n===mw)return mw;if(!1===n||n instanceof Sm)return n}return!0}),(0,ba.h)(t=>t!==mw),(0,Ga.q)(1)))}function rU(e){return(0,She.z)((0,Hi.b)(t=>{if(Em(t))throw K9(0,t)}),(0,Ti.U)(t=>!0===t))}const lA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oU(e,t,n,i,r){const o=cA(e,t,n);return o.matched?function Xue(e,t,n,i){const r=t.canMatch;if(!r||0===r.length)return(0,$n.of)(!0);const o=r.map(s=>{const a=z0(s,e);return Xp(function Lue(e){return e&&db(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))});return(0,$n.of)(o).pipe(U0(),rU())}(i=tU(t,i),t,n).pipe((0,Ti.U)(s=>!0===s?o:{...lA})):(0,$n.of)(o)}function cA(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...lA}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Ahe)(n,e,t);if(!r)return{...lA};const o={};xa(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function gw(e,t,n,i,r="corrected"){if(n.length>0&&function Kue(e,t,n){return n.some(i=>vw(e,t,i)&&Ic(i)!==nr)}(e,n,i)){const s=new ir(t,function Que(e,t,n,i){const r={};r[nr]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Ic(o)!==nr){const s=new ir([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,r[Ic(o)]=s}return r}(e,t,i,new ir(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function Zue(e,t,n){return n.some(i=>vw(e,t,i))}(e,n,i)){const s=new ir(e.segments,function $ue(e,t,n,i,r,o){const s={};for(const a of i)if(vw(e,n,a)&&!r[Ic(a)]){const l=new ir([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Ic(a)]=l}return{...r,...s}}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new ir(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function vw(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function sU(e,t,n,i){return!!(Ic(e)===i||i!==nr&&vw(t,n,e))&&("**"===e.path||cA(t,e,n).matched)}function aU(e,t,n){return 0===t.length&&!e.children[n]}const yw=!1;class bw{constructor(t){this.segmentGroup=t||null}}class lU{constructor(t){this.urlTree=t}}function hb(e){return(0,no._)(new bw(e))}function cU(e){return(0,no._)(new lU(e))}class npe{constructor(t,n,i,r,o){this.injector=t,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=gw(this.urlTree.root,[],[],this.config).segmentGroup,n=new ir(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,nr).pipe((0,Ti.U)(o=>this.createUrlTree(dw(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Vr.K)(o=>{if(o instanceof lU)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof bw?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,nr).pipe((0,Ti.U)(r=>this.createUrlTree(dw(r),t.queryParams,t.fragment))).pipe((0,Vr.K)(r=>{throw r instanceof bw?this.noMatchError(r):r}))}noMatchError(t){return new V(4002,yw)}createUrlTree(t,n,i){const r=qD(t);return new Sm(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe((0,Ti.U)(o=>new ir([],o))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,Va.D)(r).pipe((0,qp.b)(o=>{const s=i.children[o],a=nU(n,o);return this.expandSegmentGroup(t,a,s,o).pipe((0,Ti.U)(l=>({segment:l,outlet:o})))}),(0,_9.R)((o,s)=>(o[s.outlet]=s.segment,o),{}),(0,x9.Z)())}expandSegment(t,n,i,r,o,s){return(0,Va.D)(i).pipe((0,qp.b)(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,o,s).pipe((0,Vr.K)(c=>{if(c instanceof bw)return(0,$n.of)(null);throw c}))),(0,_d.P)(a=>!!a),(0,Vr.K)((a,l)=>{if(aA(a))return aU(n,r,o)?(0,$n.of)(new ir([],{})):hb(n);throw a}))}expandSegmentAgainstRoute(t,n,i,r,o,s,a){return sU(r,n,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s):hb(n):hb(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?cU(o):this.lineralizeSegments(i,o).pipe((0,ac.zg)(s=>{const a=new ir(s,{});return this.expandSegment(t,a,n,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=cA(n,r,o);if(!a)return hb(n);const h=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?cU(h):this.lineralizeSegments(r,h).pipe((0,ac.zg)(p=>this.expandSegment(t,n,i,p.concat(c),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){return"**"===i.path?(t=tU(i,t),i.loadChildren?(i._loadedRoutes?(0,$n.of)({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,Ti.U)(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ir(r,{})))):(0,$n.of)(new ir(r,{}))):oU(n,i,r,t).pipe((0,_a.w)(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=i._injector??t,i,r).pipe((0,ac.zg)(d=>{const h=d.injector??t,p=d.routes,{segmentGroup:g,slicedSegments:v}=gw(n,a,l,p),y=new ir(g.segments,g.children);if(0===v.length&&y.hasChildren())return this.expandChildren(h,p,y).pipe((0,Ti.U)(O=>new ir(a,O)));if(0===p.length&&0===v.length)return(0,$n.of)(new ir(a,{}));const b=Ic(i)===o;return this.expandSegment(h,y,p,v,b?nr:o,!0).pipe((0,Ti.U)(S=>new ir(a.concat(S.segments),S.children)))})):hb(n)))}getChildConfig(t,n,i){return n.children?(0,$n.of)({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?(0,$n.of)({routes:n._loadedRoutes,injector:n._loadedInjector}):function Yue(e,t,n,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,$n.of)(!0);const o=r.map(s=>{const a=z0(s,e);return Xp(function kue(e){return e&&db(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))});return(0,$n.of)(o).pipe(U0(),rU())}(t,n,i).pipe((0,ac.zg)(r=>r?this.configLoader.loadChildren(t,n).pipe((0,Hi.b)(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function epe(e){return(0,no._)(Z9(yw,3))}())):(0,$n.of)({routes:[],injector:t})}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,$n.of)(i);if(r.numberOfChildren>1||!r.children[nr])return(0,no._)(new V(4e3,yw));r=r.children[nr]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,r){const o=this.createSegmentGroup(t,n.root,i,r);return new Sm(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return xa(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,r){const o=this.createSegments(t,n.segments,i,r);let s={};return xa(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,i,r)}),new ir(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new V(4001,yw);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}class rpe{}class ape{constructor(t,n,i,r,o,s,a,l){this.injector=t,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=gw(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,nr).pipe((0,Ti.U)(n=>{if(null===n)return null;const i=new uw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Cu(i,n),o=new $9(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,i=X9(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r)}processChildren(t,n,i){return(0,Va.D)(Object.keys(i.children)).pipe((0,qp.b)(r=>{const o=i.children[r],s=nU(n,r);return this.processSegmentGroup(t,s,o,r)}),(0,_9.R)((r,o)=>r&&o?(r.push(...o),r):null),(0,Ohe.o)(r=>null!==r),(0,C9.d)(null),(0,x9.Z)(),(0,Ti.U)(r=>{if(null===r)return null;const o=dU(r);return function lpe(e){e.sort((t,n)=>t.value.outlet===nr?-1:n.value.outlet===nr?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,i,r,o){return(0,Va.D)(n).pipe((0,qp.b)(s=>this.processSegmentAgainstRoute(s._injector??t,s,i,r,o)),(0,_d.P)(s=>!!s),(0,Vr.K)(s=>{if(aA(s))return aU(i,r,o)?(0,$n.of)([]):(0,$n.of)(null);throw s}))}processSegmentAgainstRoute(t,n,i,r,o){if(n.redirectTo||!sU(n,i,r,o))return(0,$n.of)(null);let s;if("**"===n.path){const a=r.length>0?O9(r).parameters:{},l=uU(i)+r.length,c=new uw(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fU(n),Ic(n),n.component??n._loadedComponent??null,n,hU(i),l,mU(n),l);s=(0,$n.of)({snapshot:c,consumedSegments:[],remainingSegments:[]})}else s=oU(i,n,r,t).pipe((0,Ti.U)(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const h=uU(i)+l.length;return{snapshot:new uw(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fU(n),Ic(n),n.component??n._loadedComponent??null,n,hU(i),h,mU(n),h),consumedSegments:l,remainingSegments:c}}));return s.pipe((0,_a.w)(a=>{if(null===a)return(0,$n.of)(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;t=n._injector??t;const h=n._loadedInjector??t,p=function cpe(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:g,slicedSegments:v}=gw(i,c,d,p.filter(b=>void 0===b.redirectTo),this.relativeLinkResolution);if(0===v.length&&g.hasChildren())return this.processChildren(h,p,g).pipe((0,Ti.U)(b=>null===b?null:[new Cu(l,b)]));if(0===p.length&&0===v.length)return(0,$n.of)([new Cu(l,[])]);const y=Ic(n)===o;return this.processSegment(h,p,g,v,y?nr:o).pipe((0,Ti.U)(b=>null===b?null:[new Cu(l,b)]))}))}}function dpe(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function dU(e){const t=[],n=new Set;for(const i of e){if(!dpe(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=dU(i.children);t.push(new Cu(i.value,r))}return t.filter(i=>!n.has(i))}function hU(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function uU(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function fU(e){return e.data||{}}function mU(e){return e.resolve||{}}function gU(e){return"string"==typeof e.title||null===e.title}function dA(e){return(0,_a.w)(t=>{const n=e(t);return n?(0,Va.D)(n).pipe((0,Ti.U)(()=>t)):(0,$n.of)(t)})}let vU=(()=>{class e{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===nr);return i}getResolvedTitleForRoute(n){return n.data[Zy]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:function(){return rs(yU)},providedIn:"root"}),e})(),yU=(()=>{class e extends vU{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(n){return new(n||e)(Gt(Il))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class ype{}class _pe extends class bpe{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const xw=new Kn("",{providedIn:"root",factory:()=>({})}),hA=new Kn("ROUTES");let uA=(()=>{class e{constructor(n,i){this.injector=n,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return(0,$n.of)(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Xp(n.loadComponent()).pipe((0,Hi.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),(0,VD.x)(()=>{this.componentLoaders.delete(n)})),r=new b9.c(i,()=>new _.xQ).pipe((0,M9.x)());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,$n.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Ti.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=S9(l.get(hA,[],bn.Self|bn.Optional)));return{routes:c.map(sA),injector:l}}),(0,VD.x)(()=>{this.childrenLoaders.delete(i)})),s=new b9.c(o,()=>new _.xQ).pipe((0,M9.x)());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(n){return Xp(n()).pipe((0,ac.zg)(i=>i instanceof GL||Array.isArray(i)?(0,$n.of)(i):(0,Va.D)(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)(Gt(ks),Gt(sE))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Cpe{}class wpe{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function Mpe(e){throw e}function Ppe(e,t,n){return t.parse("/")}const Spe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ope={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _U(){const e=rs(k9),t=rs(sb),n=rs(gm),i=rs(ks),r=rs(sE),o=rs(hA,{optional:!0})??[],s=rs(xw,{optional:!0})??{},a=rs(yU),l=rs(vU,{optional:!0}),c=rs(Cpe,{optional:!0}),d=rs(ype,{optional:!0}),h=new xo(null,e,t,n,i,r,S9(o));return c&&(h.urlHandlingStrategy=c),d&&(h.routeReuseStrategy=d),h.titleStrategy=l??a,function Epe(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,h),h}let xo=(()=>{class e{constructor(n,i,r,o,s,a,l){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _.xQ,this.errorHandler=Mpe,this.malformedUriErrorHandler=Ppe,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,$n.of)(void 0),this.urlHandlingStrategy=new wpe,this.routeReuseStrategy=new _pe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(uA),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new cue(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new lue(p)),this.ngModule=s.get(um),this.console=s.get(ooe);const h=s.get(Tr);this.isNgZoneEnabled=h instanceof Tr&&Tr.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Ihe(){return new Sm(new ir([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Y9(this.currentUrlTree,this.rootComponentType),this.transitions=new na.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe((0,ba.h)(r=>0!==r.id),(0,Ti.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),(0,_a.w)(r=>{let o=!1,s=!1;return(0,$n.of)(r).pipe((0,Hi.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,_a.w)(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return xU(a.source)&&(this.browserUrlTree=a.extractedUrl),(0,$n.of)(a).pipe((0,_a.w)(h=>{const p=this.transitions.getValue();return i.next(new QD(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions.getValue()?R0.E:Promise.resolve(h)}),function ipe(e,t,n,i){return(0,_a.w)(r=>function tpe(e,t,n,i,r){return new npe(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe((0,Ti.U)(o=>({...r,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hi.b)(h=>{this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects},r.urlAfterRedirects=h.urlAfterRedirects}),function upe(e,t,n,i,r,o){return(0,ac.zg)(s=>function spe(e,t,n,i,r,o,s="emptyOnly",a="legacy"){return new ape(e,t,n,i,r,s,a,o).recognize().pipe((0,_a.w)(l=>null===l?function ope(e){return new D.y(t=>t.error(e))}(new rpe):(0,$n.of)(l)))}(e,t,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r,o).pipe((0,Ti.U)(a=>({...s,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hi.b)(h=>{if(r.targetSnapshot=h.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const g=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(g,h)}this.browserUrlTree=h.urlAfterRedirects}const p=new iue(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);i.next(p)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:g,source:v,restoredState:y,extras:b}=a,P=new QD(p,this.serializeUrl(g),v,y);i.next(P);const S=Y9(g,this.rootComponentType).snapshot;return r={...a,targetSnapshot:S,urlAfterRedirects:g,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},(0,$n.of)(r)}return this.rawUrlTree=a.rawUrl,a.resolve(null),R0.E}),(0,Hi.b)(a=>{const l=new rue(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),(0,Ti.U)(a=>r={...a,guards:Eue(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function zue(e,t){return(0,ac.zg)(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,$n.of)({...n,guardsResult:!0}):function Uue(e,t,n,i){return(0,Va.D)(e).pipe((0,ac.zg)(r=>function que(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,$n.of)(!0);const s=o.map(a=>{const l=ab(t)??r,c=z0(a,l);return Xp(function Fue(e){return e&&db(e.canDeactivate)}(c)?c.canDeactivate(e,t,n,i):l.runInContext(()=>c(e,t,n,i))).pipe((0,_d.P)())});return(0,$n.of)(s).pipe(U0())}(r.component,r.route,n,t,i)),(0,_d.P)(r=>!0!==r,!0))}(s,i,r,e).pipe((0,ac.zg)(a=>a&&function Iue(e){return"boolean"==typeof e}(a)?function jue(e,t,n,i){return(0,Va.D)(t).pipe((0,qp.b)(r=>(0,Phe.z)(function Hue(e,t){return null!==e&&t&&t(new due(e)),(0,$n.of)(!0)}(r.route.parent,i),function Vue(e,t){return null!==e&&t&&t(new uue(e)),(0,$n.of)(!0)}(r.route,i),function Wue(e,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function Due(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>(0,y9.P)(()=>{const a=s.guards.map(l=>{const c=ab(s.node)??n,d=z0(l,c);return Xp(function Nue(e){return e&&db(e.canActivateChild)}(d)?d.canActivateChild(i,e):c.runInContext(()=>d(i,e))).pipe((0,_d.P)())});return(0,$n.of)(a).pipe(U0())}));return(0,$n.of)(o).pipe(U0())}(e,r.path,n),function Gue(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,$n.of)(!0);const r=i.map(o=>(0,y9.P)(()=>{const s=ab(t)??n,a=z0(o,s);return Xp(function Rue(e){return e&&db(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe((0,_d.P)())}));return(0,$n.of)(r).pipe(U0())}(e,r.route,n))),(0,_d.P)(r=>!0!==r,!0))}(i,o,e,t):(0,$n.of)(a)),(0,Ti.U)(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,Hi.b)(a=>{if(r.guardsResult=a.guardsResult,Em(a.guardsResult))throw K9(0,a.guardsResult);const l=new oue(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),(0,ba.h)(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),dA(a=>{if(a.guards.canActivateChecks.length)return(0,$n.of)(a).pipe((0,Hi.b)(l=>{const c=new sue(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),(0,_a.w)(l=>{let c=!1;return(0,$n.of)(l).pipe(function ppe(e,t){return(0,ac.zg)(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return(0,$n.of)(n);let o=0;return(0,Va.D)(r).pipe((0,qp.b)(s=>function fpe(e,t,n,i){const r=e.routeConfig,o=e._resolve;return void 0!==r?.title&&!gU(r)&&(o[Zy]=r.title),function mpe(e,t,n,i){const r=function gpe(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return(0,$n.of)({});const o={};return(0,Va.D)(r).pipe((0,ac.zg)(s=>function vpe(e,t,n,i){const r=ab(t)??i,o=z0(e,r);return Xp(o.resolve?o.resolve(t,n):r.runInContext(()=>o(t,n)))}(e[s],t,n,i).pipe((0,_d.P)(),(0,Hi.b)(a=>{o[s]=a}))),(0,w9.h)(1),(0,Ehe.h)(o),(0,Vr.K)(s=>aA(s)?R0.E:(0,no._)(s)))}(o,e,t,i).pipe((0,Ti.U)(s=>(e._resolvedData=s,e.data=X9(e,n).resolve,r&&gU(r)&&(e.data[Zy]=r.title),null)))}(s.route,i,e,t)),(0,Hi.b)(()=>o++),(0,w9.h)(1),(0,ac.zg)(s=>o===r.length?(0,$n.of)(n):R0.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hi.b)({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),(0,Hi.b)(l=>{const c=new aue(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),dA(a=>{const l=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe((0,Hi.b)(h=>{c.component=h}),(0,Ti.U)(()=>{})));for(const h of c.children)d.push(...l(h));return d};return(0,nw.aj)(l(a.targetSnapshot.root)).pipe((0,C9.d)(),(0,Ga.q)(1))}),dA(()=>this.afterPreactivation()),(0,Ti.U)(a=>{const l=function vue(e,t,n){const i=rb(e,t._root,n?n._root:void 0);return new q9(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),(0,Hi.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>(0,Ti.U)(i=>(new Oue(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,Hi.b)({next(){o=!0},complete(){o=!0}}),(0,VD.x)(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),(0,Vr.K)(a=>{if(s=!0,eU(a)){J9(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new hw(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(l),J9(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xU(r.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new H9(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return R0.E}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(sA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,d=l?this.currentUrlTree.fragment:s;let h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}return null!==h&&(h=this.removeEmptyProps(h)),Khe(c,this.currentUrlTree,n,h,d??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=Em(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function Dpe(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new V(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...Spe}:!1===i?{...Ope}:i,Em(n))return D9(this.currentUrlTree,n,r);const o=this.parseUrl(n);return D9(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const o=n[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new $p(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,g)=>{a=p,l=g});const d=++this.navigationId;let h;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),h=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):h=0,this.setTransition({id:d,targetPageId:h,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i,r){const o=new hw(n.id,this.serializeUrl(n.extractedUrl),i,r);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){aO()},e.\u0275prov=ft({token:e,factory:function(){return _U()},providedIn:"root"}),e})();function xU(e){return"imperative"!==e}let kc=(()=>{class e{constructor(n,i,r){this.router=n,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new _.xQ,this.subscription=n.events.subscribe(o=>{o instanceof $p&&this.updateTargetUrlAndHref()})}set preserveFragment(n){this._preserveFragment=mu(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=mu(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=mu(n)}get replaceUrl(){return this._replaceUrl}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:null}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,i,r,o,s){return!!(0!==n||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(Oe(xo),Oe(Nl),Oe(Lp))},e.\u0275dir=Et({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,i){1&n&&St("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&Zr("target",i.target)("href",i.href,Ce)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[gs]}),e})();class CU{}let Ipe=(()=>{class e{constructor(n,i,r,o,s){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe((0,ba.h)(n=>n instanceof $p),(0,qp.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Zx(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return(0,Va.D)(r).pipe((0,rw.J)())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):(0,$n.of)(null);const o=r.pipe((0,ac.zg)(s=>null===s?(0,$n.of)(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(i.loadComponent&&!i._loadedComponent){const s=this.loader.loadComponent(i);return(0,Va.D)([o,s]).pipe((0,rw.J)())}return o})}}return e.\u0275fac=function(n){return new(n||e)(Gt(xo),Gt(sE),Gt(Ep),Gt(CU),Gt(uA))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const fA=new Kn("");let wU=(()=>{class e{constructor(n,i,r={}){this.router=n,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof QD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof $p&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof G9&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new G9(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){aO()},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();function j0(e,t){return{\u0275kind:e,\u0275providers:t}}function mA(e){return[{provide:hA,multi:!0,useValue:e}]}function PU(){const e=rs(ks);return t=>{const n=e.get(fm);if(t!==n.components[0])return;const i=e.get(xo),r=e.get(SU);1===e.get(gA)&&i.initialNavigation(),e.get(OU,null,bn.Optional)?.setUpPreloading(),e.get(fA,null,bn.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const SU=new Kn("",{factory:()=>new _.xQ}),gA=new Kn("",{providedIn:"root",factory:()=>1});const OU=new Kn("");function Fpe(e){return j0(0,[{provide:OU,useExisting:Ipe},{provide:CU,useExisting:e}])}const EU=new Kn("ROUTER_FORROOT_GUARD"),Lpe=[gm,{provide:k9,useClass:GD},{provide:xo,useFactory:_U},sb,{provide:Nl,useFactory:function MU(e){return e.routerState.root},deps:[xo]},uA];function Bpe(){return new GB("Router",xo)}let DU=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[Lpe,[],mA(n),{provide:EU,useFactory:Vpe,deps:[[xo,new Jf,new n0]]},{provide:xw,useValue:i||{}},i?.useHash?{provide:Lp,useClass:Yoe}:{provide:Lp,useClass:m6},{provide:fA,useFactory:()=>{const e=rs(xo),t=rs(sae),n=rs(xw);return n.scrollOffset&&t.setOffset(n.scrollOffset),new wU(e,t,n)}},i?.preloadingStrategy?Fpe(i.preloadingStrategy).\u0275providers:[],{provide:GB,multi:!0,useFactory:Bpe},i?.initialNavigation?Hpe(i):[],[{provide:AU,useFactory:PU},{provide:FB,multi:!0,useExisting:AU}]]}}static forChild(n){return{ngModule:e,providers:[mA(n)]}}}return e.\u0275fac=function(n){return new(n||e)(Gt(EU,8))},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[rA]}),e})();function Vpe(e){return"guarded"}function Hpe(e){return["disabled"===e.initialNavigation?j0(3,[{provide:nC,multi:!0,useFactory:()=>{const t=rs(xo);return()=>{t.setUpLocationChangeListener()}}},{provide:gA,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?j0(2,[{provide:gA,useValue:0},{provide:nC,multi:!0,deps:[ks],useFactory:t=>{const n=t.get(Woe,Promise.resolve());let i=!1;return()=>n.then(()=>new Promise(o=>{const s=t.get(xo),a=t.get(SU);(function r(o){t.get(xo).events.pipe((0,ba.h)(a=>a instanceof $p||a instanceof hw||a instanceof H9),(0,Ti.U)(a=>a instanceof $p||a instanceof hw&&(0===a.code||1===a.code)&&null),(0,ba.h)(a=>null!==a),(0,Ga.q)(1)).subscribe(()=>{o()})})(()=>{o(!0),i=!0}),s.afterPreactivation=()=>(o(!0),i||a.closed?(0,$n.of)(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const AU=new Kn(""),Wpe=function(e,t){return{isMouseDragable:e,isTouchDragable:t}};function qpe(e,t){if(1&e&&(x(0,"div",4),re(1,"owl-stage",5),w()),2&e){const n=rt();se(1),Je("owlDraggable",pm(3,Wpe,null==n.owlDOMData?null:n.owlDOMData.isMouseDragable,null==n.owlDOMData?null:n.owlDOMData.isTouchDragable))("stageData",n.stageData)("slidesData",n.slidesData)}}const Ype=function(e,t){return{active:e,"owl-dot-text":t}};function Xpe(e,t){if(1&e){const n=vr();x(0,"div",11),St("click",function(){const o=Ln(n).$implicit;return tn(rt(2).moveByDot(o.id))}),re(1,"span",12),w()}if(2&e){const n=t.$implicit;Je("ngClass",pm(2,Ype,n.active,n.showInnerContent)),se(1),Je("innerHTML",n.innerContent,tc)}}const Pw=function(e){return{disabled:e}};function $pe(e,t){if(1&e){const n=vr();Jr(0),x(1,"div",6)(2,"div",7),St("click",function(){return Ln(n),tn(rt().prev())}),w(),x(3,"div",8),St("click",function(){return Ln(n),tn(rt().next())}),w()(),x(4,"div",9),at(5,Xpe,2,5,"div",10),w(),eo()}if(2&e){const n=rt();se(1),Je("ngClass",Dl(7,Pw,null==n.navData?null:n.navData.disabled)),se(1),Je("ngClass",Dl(9,Pw,null==n.navData||null==n.navData.prev?null:n.navData.prev.disabled))("innerHTML",null==n.navData||null==n.navData.prev?null:n.navData.prev.htmlText,tc),se(1),Je("ngClass",Dl(11,Pw,null==n.navData||null==n.navData.next?null:n.navData.next.disabled))("innerHTML",null==n.navData||null==n.navData.next?null:n.navData.next.htmlText,tc),se(1),Je("ngClass",Dl(13,Pw,null==n.dotsData?null:n.dotsData.disabled)),se(1),Je("ngForOf",null==n.dotsData?null:n.dotsData.dots)}}const Qpe=function(e,t,n,i,r){return{"owl-rtl":e,"owl-loaded":t,"owl-responsive":n,"owl-drag":i,"owl-grab":r}};function Kpe(e,t){}function Zpe(e,t){1&e&&at(0,Kpe,0,0,"ng-template",4),2&e&&Je("ngTemplateOutlet",rt().$implicit.tplRef)}const Jpe=function(e,t,n,i){return{width:e,"margin-left":t,"margin-right":n,left:i}};function efe(e,t){if(1&e){const n=vr();Jr(0),x(1,"div",2),St("animationend",function(){const o=Ln(n).$implicit;return tn(rt().clear(o.id))}),at(2,Zpe,1,1,null,3),w(),eo()}if(2&e){const n=t.$implicit;se(1),Je("ngClass",n.classes)("ngStyle",JL(4,Jpe,n.width+"px",n.marginL?n.marginL+"px":"",n.marginR?n.marginR+"px":"",n.left))("@autoHeight",n.heightState),se(1),Je("ngIf",n.load)}}const tfe=function(e,t,n,i,r){return{width:e,transform:t,transition:n,"padding-left":i,"padding-right":r}};let TU=(()=>{let e=class{constructor(n){this.eventManager=n,this.resizeSubject=new _.xQ,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}get onResize$(){return this.resizeSubject.asObservable()}onResize(n){this.resizeSubject.next(n.target)}onLoaded(n){this.windowWidth=n.target}};return e.\u0275fac=function(n){return new(n||e)(Gt(Ly))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();class nfe{constructor(){this.items=3,this.skip_validateItems=!1,this.loop=!1,this.center=!1,this.rewind=!1,this.mouseDrag=!0,this.touchDrag=!0,this.pullDrag=!0,this.freeDrag=!1,this.margin=0,this.stagePadding=0,this.merge=!1,this.mergeFit=!0,this.autoWidth=!1,this.startPosition=0,this.rtl=!1,this.smartSpeed=250,this.fluidSpeed=!1,this.dragEndSpeed=!1,this.responsive={},this.responsiveRefreshRate=200,this.nav=!1,this.navText=["prev","next"],this.navSpeed=!1,this.slideBy=1,this.dots=!0,this.dotsEach=!1,this.dotsData=!1,this.dotsSpeed=!1,this.autoplay=!1,this.autoplayTimeout=5e3,this.autoplayHoverPause=!1,this.autoplaySpeed=!1,this.lazyLoad=!1,this.lazyLoadEager=0,this.slideTransition="",this.animateOut=!1,this.animateIn=!1,this.autoHeight=!1,this.URLhashListener=!1}}class ife{constructor(){this.items="number",this.skip_validateItems="boolean",this.loop="boolean",this.center="boolean",this.rewind="boolean",this.mouseDrag="boolean",this.touchDrag="boolean",this.pullDrag="boolean",this.freeDrag="boolean",this.margin="number",this.stagePadding="number",this.merge="boolean",this.mergeFit="boolean",this.autoWidth="boolean",this.startPosition="number|string",this.rtl="boolean",this.smartSpeed="number",this.fluidSpeed="boolean",this.dragEndSpeed="number|boolean",this.responsive={},this.responsiveRefreshRate="number",this.nav="boolean",this.navText="string[]",this.navSpeed="number|boolean",this.slideBy="number|string",this.dots="boolean",this.dotsEach="number|boolean",this.dotsData="boolean",this.dotsSpeed="number|boolean",this.autoplay="boolean",this.autoplayTimeout="number",this.autoplayHoverPause="boolean",this.autoplaySpeed="number|boolean",this.lazyLoad="boolean",this.lazyLoadEager="number",this.slideTransition="string",this.animateOut="string|boolean",this.animateIn="string|boolean",this.autoHeight="boolean",this.URLhashListener="boolean"}}let vA=(()=>{let e=class{constructor(n){this.errorHandler=n}log(n,...i){(function mE(){return t6=!0,e6})()&&console.log(n,...i)}error(n){this.errorHandler.handleError(n)}warn(n,...i){console.warn(n,...i)}};return e.\u0275fac=function(n){return new(n||e)(Gt(rm))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();var Sw=(()=>{return(e=Sw||(Sw={})).Event="event",e.State="state",Sw;var e})(),V0=(()=>{return(e=V0||(V0={})).Default="default",e.Inner="inner",e.Outer="outer",V0;var e})();let wu=(()=>{let e=class{constructor(n){this.logger=n,this._viewSettingsShipper$=new _.xQ,this._initializedCarousel$=new _.xQ,this._changeSettingsCarousel$=new _.xQ,this._changedSettingsCarousel$=new _.xQ,this._translateCarousel$=new _.xQ,this._translatedCarousel$=new _.xQ,this._resizeCarousel$=new _.xQ,this._resizedCarousel$=new _.xQ,this._refreshCarousel$=new _.xQ,this._refreshedCarousel$=new _.xQ,this._dragCarousel$=new _.xQ,this._draggedCarousel$=new _.xQ,this.settings={items:0},this.owlDOMData={rtl:!1,isResponsive:!1,isRefreshed:!1,isLoaded:!1,isLoading:!1,isMouseDragable:!1,isGrab:!1,isTouchDragable:!1},this.stageData={transform:"translate3d(0px,0px,0px)",transition:"0s",width:0,paddingL:0,paddingR:0},this._items=[],this._widths=[],this._supress={},this._plugins={},this._current=null,this._clones=[],this._mergers=[],this._speed=null,this._coordinates=[],this._breakpoint=null,this.clonedIdPrefix="cloned-",this._options={},this._invalidated={},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},this._pipe=[{filter:["width","items","settings"],run:i=>{i.current=this._items&&this._items[this.relative(this._current)].id}},{filter:["width","items","settings"],run:i=>{const r=this.settings.margin||"",s=this.settings.rtl,a={"margin-left":s?r:"","margin-right":s?"":r};!this.settings.autoWidth||this.slidesData.forEach(l=>{l.marginL=a["margin-left"],l.marginR=a["margin-right"]}),i.css=a}},{filter:["width","items","settings"],run:i=>{const r=+(this.width()/this.settings.items).toFixed(3)-this.settings.margin,o=!this.settings.autoWidth,s=[];let a=null,l=this._items.length;for(i.items={merge:!1,width:r};l--;)a=this._mergers[l],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,i.items.merge=a>1||i.items.merge,s[l]=o?r*a:this._items[l].width?this._items[l].width:r;this._widths=s,this.slidesData.forEach((c,d)=>{c.width=this._widths[d],c.marginR=i.css["margin-right"],c.marginL=i.css["margin-left"]})}},{filter:["items","settings"],run:()=>{const i=[],r=this._items,o=this.settings,s=Math.max(2*o.items,4),a=2*Math.ceil(r.length/2);let l=[],c=[],d=o.loop&&r.length?o.rewind?s:Math.max(s,a):0;for(d/=2;d--;)i.push(this.normalize(i.length/2,!0)),l.push(Object.assign({},this.slidesData[i[i.length-1]])),i.push(this.normalize(r.length-1-(i.length-1)/2,!0)),c.unshift(Object.assign({},this.slidesData[i[i.length-1]]));this._clones=i,l=l.map(h=>(h.id=`${this.clonedIdPrefix}${h.id}`,h.isActive=!1,h.isCloned=!0,h)),c=c.map(h=>(h.id=`${this.clonedIdPrefix}${h.id}`,h.isActive=!1,h.isCloned=!0,h)),this.slidesData=c.concat(this.slidesData).concat(l)}},{filter:["width","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=this._clones.length+this._items.length,o=[];let s=-1,a=0,l=0;for(;++s<r;)a=o[s-1]||0,l=this._widths[this.relative(s)]+this.settings.margin,o.push(a+l*i);this._coordinates=o}},{filter:["width","items","settings"],run:()=>{const i=this.settings.stagePadding,r=this._coordinates,o={width:Math.ceil(Math.abs(r[r.length-1]))+2*i,"padding-left":i||"","padding-right":i||""};this.stageData.width=o.width,this.stageData.paddingL=o["padding-left"],this.stageData.paddingR=o["padding-right"]}},{filter:["width","items","settings"],run:i=>{let r=i.current?this.slidesData.findIndex(o=>o.id===i.current):0;r=Math.max(this.minimum(),Math.min(this.maximum(),r)),this.reset(r)}},{filter:["position"],run:()=>{this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:()=>{const i=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,o=[];let s,a,l,c,d,h;if(s=this.coordinates(this.current()),"number"==typeof s?s+=r:s=0,a=s+this.width()*i,-1===i&&this.settings.center){const p=this._coordinates.filter(g=>this.settings.items%2==1?g>=s:g>s);s=p.length?p[p.length-1]:s}for(d=0,h=this._coordinates.length;d<h;d++)l=Math.ceil(this._coordinates[d-1]||0),c=Math.ceil(Math.abs(this._coordinates[d])+r*i),(this._op(l,"<=",s)&&this._op(l,">",a)||this._op(c,"<",s)&&this._op(c,">",a))&&o.push(d);this.slidesData.forEach(p=>(p.isActive=!1,p)),o.forEach(p=>{this.slidesData[p].isActive=!0}),this.settings.center&&(this.slidesData.forEach(p=>(p.isCentered=!1,p)),this.slidesData[this.current()].isCentered=!0)}}]}get invalidated(){return this._invalidated}get states(){return this._states}getViewCurSettings(){return this._viewSettingsShipper$.asObservable()}getInitializedState(){return this._initializedCarousel$.asObservable()}getChangeState(){return this._changeSettingsCarousel$.asObservable()}getChangedState(){return this._changedSettingsCarousel$.asObservable()}getTranslateState(){return this._translateCarousel$.asObservable()}getTranslatedState(){return this._translatedCarousel$.asObservable()}getResizeState(){return this._resizeCarousel$.asObservable()}getResizedState(){return this._resizedCarousel$.asObservable()}getRefreshState(){return this._refreshCarousel$.asObservable()}getRefreshedState(){return this._refreshedCarousel$.asObservable()}getDragState(){return this._dragCarousel$.asObservable()}getDraggedState(){return this._draggedCarousel$.asObservable()}setOptions(n){const i=new nfe,r=this._validateOptions(n,i);this._options=Object.assign({},i,r)}_validateOptions(n,i){const r=Object.assign({},n),o=new ife,s=(a,l)=>(this.logger.log(`options.${l} must be type of ${a}; ${l}=${n[l]} skipped to defaults: ${l}=${i[l]}`),i[l]);for(const a in r)if(r.hasOwnProperty(a))if("number"===o[a])this._isNumeric(r[a])?(r[a]=+r[a],r[a]="items"===a?this._validateItems(r[a],r.skip_validateItems):r[a]):r[a]=s(o[a],a);else if("boolean"===o[a]&&"boolean"!=typeof r[a])r[a]=s(o[a],a);else if("number|boolean"!==o[a]||this._isNumberOrBoolean(r[a]))if("number|string"!==o[a]||this._isNumberOrString(r[a]))if("string|boolean"!==o[a]||this._isStringOrBoolean(r[a])){if("string[]"===o[a])if(Array.isArray(r[a])){let l=!1;r[a].forEach(c=>{l="string"==typeof c}),l||(r[a]=s(o[a],a))}else r[a]=s(o[a],a)}else r[a]=s(o[a],a);else r[a]=s(o[a],a);else r[a]=s(o[a],a);return r}_validateItems(n,i){let r=n;return n>this._items.length?i?this.logger.log("The option 'items' in your options is bigger than the number of slides. The navigation got disabled"):(r=this._items.length,this.logger.log("The option 'items' in your options is bigger than the number of slides. This option is updated to the current number of slides and the navigation got disabled")):n===this._items.length&&(this.settings.dots||this.settings.nav)&&this.logger.log("Option 'items' in your options is equal to the number of slides. So the navigation got disabled"),r}setCarouselWidth(n){this._width=n}setup(n,i,r){this.setCarouselWidth(n),this.setItems(i),this._defineSlidesData(),this.setOptions(r),this.settings=Object.assign({},this._options),this.setOptionsForViewport(),this._trigger("change",{property:{name:"settings",value:this.settings}}),this.invalidate("settings"),this._trigger("changed",{property:{name:"settings",value:this.settings}})}setOptionsForViewport(){const n=this._width,i=this._options.responsive;let r=-1;if(!Object.keys(i).length)return;if(!n)return void(this.settings.items=1);for(const s in i)i.hasOwnProperty(s)&&+s<=n&&+s>r&&(r=Number(s));this.settings=Object.assign({},this._options,i[r],{items:i[r]&&i[r].items?this._validateItems(i[r].items,this._options.skip_validateItems):this._options.items}),delete this.settings.responsive,this.owlDOMData.isResponsive=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag;const o=[];this._items.forEach(s=>{o.push(this.settings.merge?s.dataMerge:1)}),this._mergers=o,this._breakpoint=r,this.invalidate("settings")}initialize(n){this.enter("initializing"),this.owlDOMData.rtl=this.settings.rtl,this._mergers.length&&(this._mergers=[]),n.forEach(i=>{this._mergers.push(this.settings.merge?i.dataMerge:1)}),this._clones=[],this.reset(this._isNumeric(this.settings.startPosition)?+this.settings.startPosition:0),this.invalidate("items"),this.refresh(),this.owlDOMData.isLoaded=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag,this.sendChanges(),this.leave("initializing"),this._trigger("initialized")}sendChanges(){this._viewSettingsShipper$.next({owlDOMData:this.owlDOMData,stageData:this.stageData,slidesData:this.slidesData,navData:this.navData,dotsData:this.dotsData})}_optionsLogic(){this.settings.autoWidth&&(this.settings.stagePadding=0,this.settings.merge=!1)}update(){let n=0;const i=this._pipe.length,r=s=>this._invalidated[s],o={};for(;n<i;){const s=this._pipe[n].filter.filter(r);(this._invalidated.all||s.length>0)&&this._pipe[n].run(o),n++}this.slidesData.forEach(s=>s.classes=this.setCurSlideClasses(s)),this.sendChanges(),this._invalidated={},this.is("valid")||this.enter("valid")}width(n){switch(n=n||V0.Default){case V0.Inner:case V0.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}}refresh(){this.enter("refreshing"),this._trigger("refresh"),this._defineSlidesData(),this.setOptionsForViewport(),this._optionsLogic(),this.update(),this.leave("refreshing"),this._trigger("refreshed")}onResize(n){if(!this._items.length)return!1;this.setCarouselWidth(n),this.enter("resizing"),this._trigger("resize"),this.invalidate("width"),this.refresh(),this.leave("resizing"),this._trigger("resized")}prepareDragging(n){let r,i=null;return r=this.stageData.transform.replace(/.*\(|\)| |[^,-\d]\w|\)/g,"").split(","),i={x:+r[0],y:+r[1]},this.is("animating")&&this.invalidate("position"),"mousedown"===n.type&&(this.owlDOMData.isGrab=!0),this.speed(0),i}enterDragging(){this.enter("dragging"),this._trigger("drag")}defineNewCoordsDrag(n,i){let r=null,o=null,s=null;const a=this.difference(i.pointer,this.pointer(n)),l=this.difference(i.stage.start,a);return!!this.is("dragging")&&(this.settings.loop?(r=this.coordinates(this.minimum()),o=+this.coordinates(this.maximum()+1)-r,l.x=((l.x-r)%o+o)%o+r):(r=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),o=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),s=this.settings.pullDrag?-1*a.x/5:0,l.x=Math.max(Math.min(l.x,r+s),o+s)),l)}finishDragging(n,i,r){const s=this.difference(i.pointer,this.pointer(n)),a=i.stage.current,l=["right","left"][+(this.settings.rtl?s.x<+this.settings.rtl:s.x>+this.settings.rtl)];let c,d,h;(0!==s.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(+this.settings.dragEndSpeed||this.settings.smartSpeed),c=this.closest(a.x,0!==s.x?l:i.direction),d=this.current(),h=this.current(-1===c?void 0:c),d!==h&&(this.invalidate("position"),this.update()),i.direction=l,(Math.abs(s.x)>3||(new Date).getTime()-i.time>300)&&r()),this.is("dragging")&&(this.leave("dragging"),this._trigger("dragged"))}closest(n,i){const o=this.width();let s=this.coordinates(),a=-1;this.settings.center&&(s=s.map(l=>(0===l&&(l+=1e-6),l)));for(let l=0;l<s.length&&("left"===i&&n>s[l]-30&&n<s[l]+30?a=l:"right"===i&&n>s[l]-o-30&&n<s[l]-o+30?a=l+1:this._op(n,"<",s[l])&&this._op(n,">",s[l+1]||s[l]-o)?a="left"===i?l+1:l:null===i&&n>s[l]-30&&n<s[l]+30&&(a=l),-1===a);l++);return this.settings.loop||(this._op(n,">",s[this.minimum()])?a=n=this.minimum():this._op(n,"<",s[this.maximum()])&&(a=n=this.maximum())),a}animate(n){const i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this._trigger("translate")),this.stageData.transform="translate3d("+n+"px,0px,0px)",this.stageData.transition=this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}is(n){return this._states.current[n]&&this._states.current[n]>0}current(n){return void 0===n?this._current:0!==this._items.length?(n=this.normalize(n),this._current!==n&&(this._trigger("change",{property:{name:"position",value:n}}),this._current=n,this.invalidate("position"),this._trigger("changed",{property:{name:"position",value:this._current}})),this._current):void 0}invalidate(n){return"string"==typeof n&&(this._invalidated[n]=!0,this.is("valid")&&this.leave("valid")),Object.keys(this._invalidated)}reset(n){void 0!==(n=this.normalize(n))&&(this._speed=0,this._current=n,this._suppress(["translate","translated"]),this.animate(this.coordinates(n)),this._release(["translate","translated"]))}normalize(n,i){const r=this._items.length,o=i?0:this._clones.length;return!this._isNumeric(n)||r<1?n=void 0:(n<0||n>=r+o)&&(n=((n-o/2)%r+r)%r+o/2),n}relative(n){return this.normalize(n-=this._clones.length/2,!0)}maximum(n=!1){const i=this.settings;let o,s,a,r=this._coordinates.length;if(i.loop)r=this._clones.length/2+this._items.length-1;else if(i.autoWidth||i.merge){for(o=this._items.length,s=this.slidesData[--o].width,a=this._width;o--&&(s+=+this.slidesData[o].width+this.settings.margin,!(s>a)););r=o+1}else r=i.center?this._items.length-1:this._items.length-i.items;return n&&(r-=this._clones.length/2),Math.max(r,0)}minimum(n=!1){return n?0:this._clones.length/2}items(n){return void 0===n?this._items.slice():(n=this.normalize(n,!0),[this._items[n]])}mergers(n){return void 0===n?this._mergers.slice():(n=this.normalize(n,!0),this._mergers[n])}clones(n){const i=this._clones.length/2,r=i+this._items.length,o=s=>s%2==0?r+s/2:i-(s+1)/2;return void 0===n?this._clones.map((s,a)=>o(a)):this._clones.map((s,a)=>s===n?o(a):null).filter(s=>s)}speed(n){return void 0!==n&&(this._speed=n),this._speed}coordinates(n){let o,s,i=1,r=n-1;return void 0===n?(s=this._coordinates.map((a,l)=>this.coordinates(l)),s):(this.settings.center?(this.settings.rtl&&(i=-1,r=n+1),o=this._coordinates[n],o+=(this.width()-o+(this._coordinates[r]||0))/2*i):o=this._coordinates[r]||0,o=Math.ceil(o),o)}_duration(n,i,r){return 0===r?0:Math.min(Math.max(Math.abs(i-n),1),6)*Math.abs(+r||this.settings.smartSpeed)}to(n,i){let r=this.current(),o=null,s=n-this.relative(r),a=this.maximum(),l=0;const c=+(s>0)-+(s<0),d=this._items.length,h=this.minimum();this.settings.loop?(!this.settings.rewind&&Math.abs(s)>d/2&&(s+=-1*c*d),o=(((n=r+s)-h)%d+d)%d+h,o!==n&&o-s<=a&&o-s>0&&(r=o-s,n=o,l=30,this.reset(r),this.sendChanges())):this.settings.rewind?(a+=1,n=(n%a+a)%a):n=Math.max(h,Math.min(a,n)),setTimeout(()=>{this.speed(this._duration(r,n,i)),this.current(n),this.update()},l)}next(n){n=n||!1,this.to(this.relative(this.current())+1,n)}prev(n){n=n||!1,this.to(this.relative(this.current())-1,n)}onTransitionEnd(n){if(void 0!==n)return!1;this.leave("animating"),this._trigger("translated")}_viewport(){let n;return this._width?n=this._width:this.logger.log("Can not detect viewport width."),n}setItems(n){this._items=n}_defineSlidesData(){let n;this.slidesData&&this.slidesData.length&&(n=new Map,this.slidesData.forEach(i=>{i.load&&n.set(i.id,i.load)})),this.slidesData=this._items.map(i=>({id:`${i.id}`,isActive:!1,tplRef:i.tplRef,dataMerge:i.dataMerge,width:0,isCloned:!1,load:!!n&&n.get(i.id),hashFragment:i.dataHash}))}setCurSlideClasses(n){const i={active:n.isActive,center:n.isCentered,cloned:n.isCloned,animated:n.isAnimated,"owl-animated-in":n.isDefAnimatedIn,"owl-animated-out":n.isDefAnimatedOut};return this.settings.animateIn&&(i[this.settings.animateIn]=n.isCustomAnimatedIn),this.settings.animateOut&&(i[this.settings.animateOut]=n.isCustomAnimatedOut),i}_op(n,i,r){const o=this.settings.rtl;switch(i){case"<":return o?n>r:n<r;case">":return o?n<r:n>r;case">=":return o?n<=r:n>=r;case"<=":return o?n>=r:n<=r}}_trigger(n,i,r,o,s){switch(n){case"initialized":this._initializedCarousel$.next(n);break;case"change":this._changeSettingsCarousel$.next(i);break;case"changed":this._changedSettingsCarousel$.next(i);break;case"drag":this._dragCarousel$.next(n);break;case"dragged":this._draggedCarousel$.next(n);break;case"resize":this._resizeCarousel$.next(n);break;case"resized":this._resizedCarousel$.next(n);break;case"refresh":this._refreshCarousel$.next(n);break;case"refreshed":this._refreshedCarousel$.next(n);break;case"translate":this._translateCarousel$.next(n);break;case"translated":this._translatedCarousel$.next(n)}}enter(n){[n].concat(this._states.tags[n]||[]).forEach(i=>{void 0===this._states.current[i]&&(this._states.current[i]=0),this._states.current[i]++})}leave(n){[n].concat(this._states.tags[n]||[]).forEach(i=>{(0===this._states.current[i]||this._states.current[i])&&this._states.current[i]--})}register(n){n.type===Sw.State&&(this._states.tags[n.name]=this._states.tags[n.name]?this._states.tags[n.name].concat(n.tags):n.tags,this._states.tags[n.name]=this._states.tags[n.name].filter((i,r)=>this._states.tags[n.name].indexOf(i)===r))}_suppress(n){n.forEach(i=>{this._supress[i]=!0})}_release(n){n.forEach(i=>{delete this._supress[i]})}pointer(n){const i={x:null,y:null};return(n=(n=n.originalEvent||n||window.event).touches&&n.touches.length?n.touches[0]:n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n).pageX?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i}_isNumeric(n){return!isNaN(parseFloat(n))}_isNumberOrBoolean(n){return this._isNumeric(n)||"boolean"==typeof n}_isNumberOrString(n){return this._isNumeric(n)||"string"==typeof n}_isStringOrBoolean(n){return"string"==typeof n||"boolean"==typeof n}difference(n,i){return{x:n.x-i.x,y:n.y-i.y}}};return e.\u0275fac=function(n){return new(n||e)(Gt(vA))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),IU=(()=>{let e=class{constructor(n){this.carouselService=n,this._initialized=!1,this._pages=[],this._navData={disabled:!1,prev:{disabled:!1,htmlText:""},next:{disabled:!1,htmlText:""}},this._dotsData={disabled:!1,dots:[]},this.spyDataStreams()}ngOnDestroy(){this.navSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,Hi.b)(s=>{this.initialize(),this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})),i=this.carouselService.getChangedState().pipe((0,ba.h)(s=>"position"===s.property.name),(0,Hi.b)(s=>{this.update()})),r=this.carouselService.getRefreshedState().pipe((0,Hi.b)(()=>{this._updateNavPages(),this.draw(),this.update(),this.carouselService.sendChanges()})),o=(0,G.T)(n,i,r);this.navSubscription=o.subscribe(()=>{})}initialize(){this._navData.disabled=!0,this._navData.prev.htmlText=this.carouselService.settings.navText[0],this._navData.next.htmlText=this.carouselService.settings.navText[1],this._dotsData.disabled=!0,this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}_updateNavPages(){let n,i,r;const o=this.carouselService.clones().length/2,s=o+this.carouselService.items().length,a=this.carouselService.maximum(!0),l=[],c=this.carouselService.settings;let d=c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items;if(d=+d,"page"!==c.slideBy&&(c.slideBy=Math.min(+c.slideBy,c.items)),c.dots||"page"===c.slideBy)for(n=o,i=0,r=0;n<s;n++){if(i>=d||0===i){if(l.push({start:Math.min(a,n-o),end:n-o+d-1}),Math.min(a,n-o)===a)break;i=0,++r}i+=this.carouselService.mergers(this.carouselService.relative(n))}this._pages=l}draw(){let n;const i=this.carouselService.settings,r=this.carouselService.items(),o=r.length<=i.items;if(this._navData.disabled=!i.nav||o,this._dotsData.disabled=!i.dots||o,i.dots)if(n=this._pages.length-this._dotsData.dots.length,i.dotsData&&0!==n)this._dotsData.dots=[],r.forEach(s=>{this._dotsData.dots.push({active:!1,id:`dot-${s.id}`,innerContent:s.dotContent,showInnerContent:!0})});else if(n>0){const s=this._dotsData.dots.length>0?this._dotsData.dots.length:0;for(let a=0;a<n;a++)this._dotsData.dots.push({active:!1,id:`dot-${a+s}`,innerContent:"",showInnerContent:!1})}else n<0&&this._dotsData.dots.splice(n,Math.abs(n));this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}update(){this._updateNavButtons(),this._updateDots()}_updateNavButtons(){const n=this.carouselService.settings,i=n.loop||n.rewind,r=this.carouselService.relative(this.carouselService.current());n.nav&&(this._navData.prev.disabled=!i&&r<=this.carouselService.minimum(!0),this._navData.next.disabled=!i&&r>=this.carouselService.maximum(!0)),this.carouselService.navData=this._navData}_updateDots(){let n;!this.carouselService.settings.dots||(this._dotsData.dots.forEach(i=>{!0===i.active&&(i.active=!1)}),n=this._current(),this._dotsData.dots.length&&(this._dotsData.dots[n].active=!0),this.carouselService.dotsData=this._dotsData)}_current(){const n=this.carouselService.relative(this.carouselService.current());let i;const r=this._pages.filter((o,s)=>o.start<=n&&o.end>=n).pop();return i=this._pages.findIndex(o=>o.start===r.start&&o.end===r.end),i}_getPosition(n){let i,r;const o=this.carouselService.settings;return"page"===o.slideBy?(i=this._current(),r=this._pages.length,n?++i:--i,i=this._pages[(i%r+r)%r].start):(i=this.carouselService.relative(this.carouselService.current()),r=this.carouselService.items().length,n?i+=+o.slideBy:i-=+o.slideBy),i}next(n){this.carouselService.to(this._getPosition(!0),n)}prev(n){this.carouselService.to(this._getPosition(!1),n)}to(n,i,r){let o;!r&&this._pages.length?(o=this._pages.length,this.carouselService.to(this._pages[(n%o+o)%o].start,i)):this.carouselService.to(n,i)}moveByDot(n){const i=this._dotsData.dots.findIndex(r=>n===r.id);this.to(i,this.carouselService.settings.dotsSpeed)}toSlideById(n){const i=this.carouselService.slidesData.findIndex(r=>r.id===n&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();const yA=new Kn("WindowToken");class bA{get nativeWindow(){throw new Error("Not implemented.")}}let rfe=(()=>{class e extends bA{constructor(){super()}get nativeWindow(){return window}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const sfe=[{provide:bA,useClass:rfe},{provide:yA,useFactory:function ofe(e,t){return FE(t)?e.nativeWindow:{setTimeout:(i,r)=>{},clearTimeout:i=>{}}},deps:[bA,Pc]}],ub=new Kn("DocumentToken");class _A{get nativeDocument(){throw new Error("Not implemented.")}}let afe=(()=>{class e extends _A{constructor(){super()}get nativeDocument(){return document}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();const cfe=[{provide:_A,useClass:afe},{provide:ub,useFactory:function lfe(e,t){return FE(t)?e.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[_A,Pc]}];let kU=(()=>{let e=class{constructor(n,i,r){this.carouselService=n,this._timeout=null,this._paused=!1,this.winRef=i,this.docRef=r,this.spyDataStreams()}ngOnDestroy(){this.autoplaySubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,Hi.b)(()=>{this.carouselService.settings.autoplay&&this.play()})),i=this.carouselService.getChangedState().pipe((0,Hi.b)(s=>{this._handleChangeObservable(s)})),r=this.carouselService.getResizedState().pipe((0,Hi.b)(()=>{this.carouselService.settings.autoplay?this.play():this.stop()})),o=(0,G.T)(n,i,r);this.autoplaySubscription=o.subscribe(()=>{})}play(n,i){this._paused&&(this._paused=!1,this._setAutoPlayInterval(1)),!this.carouselService.is("rotating")&&(this.carouselService.enter("rotating"),this._setAutoPlayInterval())}_getNextTimeout(n,i){return this._timeout&&this.winRef.clearTimeout(this._timeout),this._isArtificialAutoplayTimeout=!!n,this.winRef.setTimeout(()=>{this._paused||this.carouselService.is("busy")||this.carouselService.is("interacting")||this.docRef.hidden||this.carouselService.next(i||this.carouselService.settings.autoplaySpeed)},n||this.carouselService.settings.autoplayTimeout)}_setAutoPlayInterval(n){this._timeout=this._getNextTimeout(n)}stop(){!this.carouselService.is("rotating")||(this._paused=!0,this.winRef.clearTimeout(this._timeout),this.carouselService.leave("rotating"))}pause(){!this.carouselService.is("rotating")||(this._paused=!0)}_handleChangeObservable(n){"settings"===n.property.name?this.carouselService.settings.autoplay?this.play():this.stop():"position"===n.property.name&&this.carouselService.settings.autoplay&&this._setAutoPlayInterval()}_playAfterTranslated(){(0,$n.of)("translated").pipe((0,_a.w)(n=>this.carouselService.getTranslatedState()),(0,_d.P)(),(0,ba.h)(()=>this._isArtificialAutoplayTimeout),(0,Hi.b)(()=>this._setAutoPlayInterval())).subscribe(()=>{})}startPausing(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&this.pause()}startPlayingMouseLeave(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}startPlayingTouchEnd(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu),Gt(yA),Gt(ub))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e=Oi([k0(1,t0(yA)),k0(2,t0(ub))],e),e})(),RU=(()=>{let e=class{constructor(n){this.carouselService=n,this.spyDataStreams()}ngOnDestroy(){this.lazyLoadSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,Hi.b)(()=>{const s=this.carouselService.settings&&!this.carouselService.settings.lazyLoad;this.carouselService.slidesData.forEach(a=>a.load=!!s)})),i=this.carouselService.getChangeState(),r=this.carouselService.getResizedState(),o=(0,G.T)(n,i,r).pipe((0,Hi.b)(s=>this._defineLazyLoadSlides(s)));this.lazyLoadSubscription=o.subscribe(()=>{})}_defineLazyLoadSlides(n){if(this.carouselService.settings&&this.carouselService.settings.lazyLoad&&(n.property&&"position"===n.property.name||"initialized"===n||"resized"===n)){const i=this.carouselService.settings,r=this.carouselService.clones().length;let o=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*o||0,a=(n.property&&void 0!==n.property.value?n.property.value:this.carouselService.current())+s;for(i.lazyLoadEager>0&&(o+=i.lazyLoadEager,i.loop&&(a-=i.lazyLoadEager,o++));s++<o;)this._load(r/2+this.carouselService.relative(a)),r&&this.carouselService.clones(this.carouselService.relative(a)).forEach(l=>this._load(l)),a++}}_load(n){this.carouselService.slidesData[n].load||(this.carouselService.slidesData[n].load=!0)}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),xA=(()=>{let e=class{constructor(n){this.carouselService=n,this.swapping=!0,this.previous=void 0,this.next=void 0,this.spyDataStreams()}ngOnDestroy(){this.animateSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getChangeState().pipe((0,Hi.b)(c=>{"position"===c.property.name&&(this.previous=this.carouselService.current(),this.next=c.property.value)})),i=this.carouselService.getDragState(),r=this.carouselService.getDraggedState(),o=this.carouselService.getTranslatedState(),s=(0,G.T)(i,r,o).pipe((0,Hi.b)(c=>this.swapping="translated"===c)),a=this.carouselService.getTranslateState().pipe((0,Hi.b)(c=>{this.swapping&&(this.carouselService._options.animateOut||this.carouselService._options.animateIn)&&this._swap()})),l=(0,G.T)(n,a,s).pipe();this.animateSubscription=l.subscribe(()=>{})}_swap(){if(1!==this.carouselService.settings.items)return;let n;this.carouselService.speed(0);const i=this.carouselService.slidesData[this.previous],r=this.carouselService.slidesData[this.next],o=this.carouselService.settings.animateIn,s=this.carouselService.settings.animateOut;this.carouselService.current()!==this.previous&&(s&&(n=+this.carouselService.coordinates(this.previous)-+this.carouselService.coordinates(this.next),this.carouselService.slidesData.forEach(a=>{a.id===i.id&&(a.left=`${n}px`,a.isAnimated=!0,a.isDefAnimatedOut=!0,a.isCustomAnimatedOut=!0)})),o&&this.carouselService.slidesData.forEach(a=>{a.id===r.id&&(a.isAnimated=!0,a.isDefAnimatedIn=!0,a.isCustomAnimatedIn=!0)}))}clear(n){this.carouselService.slidesData.forEach(i=>{i.id===n&&(i.left="",i.isAnimated=!1,i.isDefAnimatedOut=!1,i.isCustomAnimatedOut=!1,i.isDefAnimatedIn=!1,i.isCustomAnimatedIn=!1,i.classes=this.carouselService.setCurSlideClasses(i))}),this.carouselService.onTransitionEnd()}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),NU=(()=>{let e=class{constructor(n){this.carouselService=n,this.spyDataStreams()}ngOnDestroy(){this.autoHeightSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,Hi.b)(s=>{this.carouselService.settings.autoHeight?this.update():this.carouselService.slidesData.forEach(a=>a.heightState="full")})),i=this.carouselService.getChangedState().pipe((0,Hi.b)(s=>{this.carouselService.settings.autoHeight&&"position"===s.property.name&&this.update()})),r=this.carouselService.getRefreshedState().pipe((0,Hi.b)(s=>{this.carouselService.settings.autoHeight&&this.update()})),o=(0,G.T)(n,i,r);this.autoHeightSubscription=o.subscribe(()=>{})}update(){const n=this.carouselService.settings.items;let i=this.carouselService.current(),r=i+n;this.carouselService.settings.center&&(i=n%2==1?i-(n-1)/2:i-n/2,r=n%2==1?i+n:i+n+1),this.carouselService.slidesData.forEach((o,s)=>{o.heightState=s>=i&&s<r?"full":"nulled"})}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),FU=(()=>{let e=class{constructor(n,i,r){this.carouselService=n,this.route=i,this.router=r,this.spyDataStreams(),this.route||(this.route={fragment:(0,$n.of)("no route").pipe((0,Ga.q)(1))}),this.router||(this.router={navigate:(o,s)=>{}})}ngOnDestroy(){this.hashSubscription.unsubscribe()}spyDataStreams(){const n=this.carouselService.getInitializedState().pipe((0,Hi.b)(()=>this.listenToRoute())),i=this.carouselService.getChangedState().pipe((0,Hi.b)(o=>{if(this.carouselService.settings.URLhashListener&&"position"===o.property.name){const s=this.carouselService.current(),a=this.carouselService.slidesData[s].hashFragment;if(!a||a===this.currentHashFragment)return;this.router.navigate(["./"],{fragment:a,relativeTo:this.route})}})),r=(0,G.T)(n,i);this.hashSubscription=r.subscribe(()=>{})}rewind(n){const i=this.carouselService.slidesData.findIndex(r=>r.hashFragment===n&&!1===r.isCloned);-1===i||i===this.carouselService.current()||this.carouselService.to(this.carouselService.relative(i),!1)}listenToRoute(){this.route.fragment.pipe((0,jD.T)("URLHash"===this.carouselService.settings.startPosition?0:2)).subscribe(i=>{this.currentHashFragment=i,this.rewind(i)})}};return e.\u0275fac=function(n){return new(n||e)(Gt(wu),Gt(Nl,8),Gt(xo,8))},e.\u0275prov=ft({token:e,factory:function(t){return e.\u0275fac(t)}}),e=Oi([k0(1,Jf()),k0(2,Jf())],e),e})(),dfe=0,Rc=(()=>{let e=class{constructor(n){this.tplRef=n,this.id="owl-slide-"+dfe++,this._dataMerge=1,this.width=0,this.dotContent="",this.dataHash=""}set dataMerge(n){this._dataMerge=this.isNumeric(n)?n:1}get dataMerge(){return this._dataMerge}isNumeric(n){return!isNaN(parseFloat(n))}};return e.\u0275fac=function(n){return new(n||e)(Oe(zo))},e.\u0275dir=Et({type:e,selectors:[["ng-template","carouselSlide",""]],inputs:{id:"id",width:"width",dotContent:"dotContent",dataHash:"dataHash",dataMerge:"dataMerge"}}),Oi([to()],e.prototype,"id",void 0),Oi([to()],e.prototype,"dataMerge",null),Oi([to()],e.prototype,"width",void 0),Oi([to()],e.prototype,"dotContent",void 0),Oi([to()],e.prototype,"dataHash",void 0),e})(),ph=(()=>{let e=class{constructor(n,i,r,o,s,a,l,c,d,h,p,g){this.el=n,this.resizeService=i,this.carouselService=r,this.navigationService=o,this.autoplayService=s,this.lazyLoadService=a,this.animateService=l,this.autoHeightService=c,this.hashService=d,this.logger=h,this.changeDetectorRef=p,this.translated=new Ai,this.dragging=new Ai,this.change=new Ai,this.changed=new Ai,this.initialized=new Ai,this.slidesData=[],this.carouselLoaded=!1,this.docRef=g}onVisibilityChange(n){if(this.carouselService.settings.autoplay)switch(this.docRef.visibilityState){case"visible":this.autoplayService.play();break;case"hidden":this.autoplayService.stop()}}ngOnInit(){this.spyDataStreams(),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}ngAfterContentChecked(){}ngAfterContentInit(){this.slides.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,this.slides.toArray(),this.options),this.carouselService.initialize(this.slides.toArray()),this._winResizeWatcher()):this.logger.log("There are no slides to show. So the carousel won't be rendered"),this._slidesChangesSubscription=this.slides.changes.pipe((0,Hi.b)(n=>{n.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,n.toArray(),this.options),this.carouselService.initialize(n.toArray())):(this.carouselLoaded=!1,this.logger.log("There are no slides to show. So the carousel won't be re-rendered"))})).subscribe(()=>{})}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe(),this._slidesChangesSubscription&&this._slidesChangesSubscription.unsubscribe(),this._allObservSubscription&&this._allObservSubscription.unsubscribe()}spyDataStreams(){this._viewCurSettings$=this.carouselService.getViewCurSettings().pipe((0,Hi.b)(n=>{this.owlDOMData=n.owlDOMData,this.stageData=n.stageData,this.slidesData=n.slidesData,this.carouselLoaded||(this.carouselLoaded=!0),this.navData=n.navData,this.dotsData=n.dotsData,this.changeDetectorRef.markForCheck()})),this._initializedCarousel$=this.carouselService.getInitializedState().pipe((0,Hi.b)(()=>{this.gatherTranslatedData(),this.initialized.emit(this.slidesOutputData)})),this._translatedCarousel$=this.carouselService.getTranslatedState().pipe((0,Hi.b)(()=>{this.gatherTranslatedData(),this.translated.emit(this.slidesOutputData)})),this._changeCarousel$=this.carouselService.getChangeState().pipe((0,Hi.b)(()=>{this.gatherTranslatedData(),this.change.emit(this.slidesOutputData)})),this._changedCarousel$=this.carouselService.getChangeState().pipe((0,_a.w)(n=>{const i=(0,$n.of)(n).pipe((0,ba.h)(()=>"position"===n.property.name),(0,_a.w)(()=>(0,Va.D)(this.slidesData)),(0,jD.T)(n.property.value),(0,Ga.q)(this.carouselService.settings.items),(0,Ti.U)(r=>{const o=this.carouselService.clonedIdPrefix,s=r.id.indexOf(o)>=0?r.id.slice(o.length):r.id;return Object.assign({},r,{id:s,isActive:!0})}),(0,whe.q)(),(0,Ti.U)(r=>({slides:r,startPosition:this.carouselService.relative(n.property.value)})));return(0,G.T)(i)}),(0,Hi.b)(n=>{this.gatherTranslatedData(),this.changed.emit(n.slides.length?n:this.slidesOutputData)})),this._draggingCarousel$=this.carouselService.getDragState().pipe((0,Hi.b)(()=>{this.gatherTranslatedData(),this.dragging.emit({dragging:!0,data:this.slidesOutputData})}),(0,_a.w)(()=>this.carouselService.getDraggedState().pipe((0,Ti.U)(()=>!!this.carouselService.is("animating")))),(0,_a.w)(n=>n?this.carouselService.getTranslatedState().pipe((0,_d.P)()):(0,$n.of)("not animating")),(0,Hi.b)(()=>{this.dragging.emit({dragging:!1,data:this.slidesOutputData})})),this._carouselMerge$=(0,G.T)(this._viewCurSettings$,this._translatedCarousel$,this._draggingCarousel$,this._changeCarousel$,this._changedCarousel$,this._initializedCarousel$),this._allObservSubscription=this._carouselMerge$.subscribe(()=>{})}_winResizeWatcher(){Object.keys(this.carouselService._options.responsive).length&&(this.resizeSubscription=this.resizeService.onResize$.pipe((0,ba.h)(()=>this.carouselWindowWidth!==this.el.nativeElement.querySelector(".owl-carousel").clientWidth),(0,v9.g)(this.carouselService.settings.responsiveRefreshRate)).subscribe(()=>{this.carouselService.onResize(this.el.nativeElement.querySelector(".owl-carousel").clientWidth),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}))}onTransitionEnd(){this.carouselService.onTransitionEnd()}next(){!this.carouselLoaded||this.navigationService.next(this.carouselService.settings.navSpeed)}prev(){!this.carouselLoaded||this.navigationService.prev(this.carouselService.settings.navSpeed)}moveByDot(n){!this.carouselLoaded||this.navigationService.moveByDot(n)}to(n){!this.carouselLoaded||this.navigationService.toSlideById(n)}gatherTranslatedData(){let n;const i=this.carouselService.clonedIdPrefix,r=this.slidesData.filter(o=>!0===o.isActive).map(o=>({id:o.id.indexOf(i)>=0?o.id.slice(i.length):o.id,width:o.width,marginL:o.marginL,marginR:o.marginR,center:o.isCentered}));n=this.carouselService.relative(this.carouselService.current()),this.slidesOutputData={startPosition:n,slides:r}}startPausing(){this.autoplayService.startPausing()}startPlayML(){this.autoplayService.startPlayingMouseLeave()}startPlayTE(){this.autoplayService.startPlayingTouchEnd()}};return e.\u0275fac=function(n){return new(n||e)(Oe(Rr),Oe(TU),Oe(wu),Oe(IU),Oe(kU),Oe(RU),Oe(xA),Oe(NU),Oe(FU),Oe(vA),Oe(gd),Oe(ub))},e.\u0275cmp=oi({type:e,selectors:[["owl-carousel-o"]],contentQueries:function(n,i,r){if(1&n&&function Qo(e,t,n,i){const r=In();if(r.firstCreatePass){const o=Bi();pB(r,new dB(t,n,i),o.index),function zre(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}uB(r,Ut(),n)}(r,Rc,4),2&n){let o;Ur(o=jr())&&(i.slides=o)}},hostBindings:function(n,i){1&n&&St("visibilitychange",function(o){return i.onVisibilityChange(o)},0,sm)},inputs:{options:"options"},outputs:{translated:"translated",dragging:"dragging",change:"change",changed:"changed",initialized:"initialized"},features:[bo([IU,kU,wu,RU,xA,NU,FU])],decls:4,vars:9,consts:[[1,"owl-carousel","owl-theme",3,"ngClass","mouseover","mouseleave","touchstart","touchend"],["owlCarousel",""],["class","owl-stage-outer",4,"ngIf"],[4,"ngIf"],[1,"owl-stage-outer"],[3,"owlDraggable","stageData","slidesData"],[1,"owl-nav",3,"ngClass"],[1,"owl-prev",3,"ngClass","innerHTML","click"],[1,"owl-next",3,"ngClass","innerHTML","click"],[1,"owl-dots",3,"ngClass"],["class","owl-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"owl-dot",3,"ngClass","click"],[3,"innerHTML"]],template:function(n,i){1&n&&(x(0,"div",0,1),St("mouseover",function(){return i.startPausing()})("mouseleave",function(){return i.startPlayML()})("touchstart",function(){return i.startPausing()})("touchend",function(){return i.startPlayTE()}),at(2,qpe,2,6,"div",2),at(3,$pe,6,15,"ng-container",3),w()),2&n&&(Je("ngClass",qO(3,Qpe,null==i.owlDOMData?null:i.owlDOMData.rtl,null==i.owlDOMData?null:i.owlDOMData.isLoaded,null==i.owlDOMData?null:i.owlDOMData.isResponsive,null==i.owlDOMData?null:i.owlDOMData.isMouseDragable,null==i.owlDOMData?null:i.owlDOMData.isGrab)),se(2),Je("ngIf",i.carouselLoaded),se(1),Je("ngIf",i.slides.toArray().length))},dependencies:function(){return[IE,ja,ta,hfe]},styles:[".owl-theme[_ngcontent-%COMP%] { display: block; }"]}),Oi([kZ(Rc)],e.prototype,"slides",void 0),Oi([Ay()],e.prototype,"translated",void 0),Oi([Ay()],e.prototype,"dragging",void 0),Oi([Ay()],e.prototype,"change",void 0),Oi([Ay()],e.prototype,"changed",void 0),Oi([Ay()],e.prototype,"initialized",void 0),Oi([to()],e.prototype,"options",void 0),Oi([Np("document:visibilitychange",["$event"])],e.prototype,"onVisibilityChange",null),e=Oi([k0(11,t0(ub))],e),e})(),hfe=(()=>{let e=class{constructor(n,i,r,o,s){this.zone=n,this.el=i,this.renderer=r,this.carouselService=o,this.animateService=s,this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this._oneDragMove$=new _.xQ,this.bindOneMouseTouchMove=a=>{this._oneMouseTouchMove(a)},this.bindOnDragMove=a=>{this._onDragMove(a)},this.bindOnDragEnd=a=>{this._onDragEnd(a)},this._oneClickHandler=()=>{this.listenerOneClick=this.renderer.listen(this._drag.target,"click",()=>!1),this.listenerOneClick()}}onMouseDown(n){this.owlDraggable.isMouseDragable&&this._onDragStart(n)}onTouchStart(n){this.owlDraggable.isTouchDragable&&this._onDragStart(n)}onTouchCancel(n){this._onDragEnd(n)}onDragStart(){if(this.owlDraggable.isMouseDragable)return!1}onSelectStart(){if(this.owlDraggable.isMouseDragable)return!1}ngOnInit(){this._oneMoveSubsription=this._oneDragMove$.pipe((0,_d.P)()).subscribe(()=>{this._sendChanges()})}ngOnDestroy(){this._oneMoveSubsription.unsubscribe()}_onDragStart(n){let i=null;3!==n.which&&(i=this._prepareDragging(n),this._drag.time=(new Date).getTime(),this._drag.target=n.target,this._drag.stage.start=i,this._drag.stage.current=i,this._drag.pointer=this._pointer(n),this.listenerMouseUp=this.renderer.listen(document,"mouseup",this.bindOnDragEnd),this.listenerTouchEnd=this.renderer.listen(document,"touchend",this.bindOnDragEnd),this.zone.runOutsideAngular(()=>{this.listenerOneMouseMove=this.renderer.listen(document,"mousemove",this.bindOneMouseTouchMove),this.listenerOneTouchMove=this.renderer.listen(document,"touchmove",this.bindOneMouseTouchMove)}))}_oneMouseTouchMove(n){const i=this._difference(this._drag.pointer,this._pointer(n));this.listenerATag&&this.listenerATag(),!(Math.abs(i.x)<3&&Math.abs(i.y)<3&&this._is("valid"))&&(Math.abs(i.x)<3&&Math.abs(i.x)<Math.abs(i.y)&&this._is("valid")||(this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving=!0,this.blockClickAnchorInDragging(n),this.listenerMouseMove=this.renderer.listen(document,"mousemove",this.bindOnDragMove),this.listenerTouchMove=this.renderer.listen(document,"touchmove",this.bindOnDragMove),n.preventDefault(),this._enterDragging(),this._oneDragMove$.next(n)))}blockClickAnchorInDragging(n){let i=n.target;for(;i&&!(i instanceof HTMLAnchorElement);)i=i.parentElement;i instanceof HTMLAnchorElement&&(this.listenerATag=this.renderer.listen(i,"click",()=>!1))}_onDragMove(n){let i;const r=this.carouselService.defineNewCoordsDrag(n,this._drag);!1!==r&&(i=r,n.preventDefault(),this._drag.stage.current=i,this._animate(i.x-this._drag.stage.start.x))}_animate(n){this.renderer.setStyle(this.el.nativeElement.children[0],"transform",`translate3d(${n}px,0px,0px`),this.renderer.setStyle(this.el.nativeElement.children[0],"transition","0s")}_onDragEnd(n){this.carouselService.owlDOMData.isGrab=!1,this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving&&(this.renderer.setStyle(this.el.nativeElement.children[0],"transform",""),this.renderer.setStyle(this.el.nativeElement.children[0],"transition",this.carouselService.speed(+this.carouselService.settings.dragEndSpeed||this.carouselService.settings.smartSpeed)/1e3+"s"),this._finishDragging(n),this.listenerMouseMove(),this.listenerTouchMove()),this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this.listenerMouseUp(),this.listenerTouchEnd()}_prepareDragging(n){return this.carouselService.prepareDragging(n)}_finishDragging(n){this.carouselService.finishDragging(n,this._drag,this._oneClickHandler)}_pointer(n){return this.carouselService.pointer(n)}_difference(n,i){return this.carouselService.difference(n,i)}_is(n){return this.carouselService.is(n)}_enter(n){this.carouselService.enter(n)}_sendChanges(){this.carouselService.sendChanges()}onTransitionEnd(){this.carouselService.onTransitionEnd()}_enterDragging(){this.carouselService.enterDragging()}clear(n){this.animateService.clear(n)}};return e.\u0275fac=function(n){return new(n||e)(Oe(Tr),Oe(Rr),Oe(vs),Oe(wu),Oe(xA))},e.\u0275cmp=oi({type:e,selectors:[["owl-stage"]],hostBindings:function(n,i){1&n&&St("mousedown",function(o){return i.onMouseDown(o)})("touchstart",function(o){return i.onTouchStart(o)})("touchcancel",function(o){return i.onTouchCancel(o)})("dragstart",function(){return i.onDragStart()})("selectstart",function(){return i.onSelectStart()})},inputs:{owlDraggable:"owlDraggable",stageData:"stageData",slidesData:"slidesData"},decls:3,vars:8,consts:[[1,"owl-stage",3,"ngStyle","transitionend"],[4,"ngFor","ngForOf"],[1,"owl-item",3,"ngClass","ngStyle","animationend"],[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(n,i){1&n&&(x(0,"div")(1,"div",0),St("transitionend",function(){return i.onTransitionEnd()}),at(2,efe,3,9,"ng-container",1),w()()),2&n&&(se(1),Je("ngStyle",qO(2,tfe,i.stageData.width+"px",i.stageData.transform,i.stageData.transition,i.stageData.paddingL?i.stageData.paddingL+"px":"",i.stageData.paddingR?i.stageData.paddingR+"px":"")),se(1),Je("ngForOf",i.slidesData))},dependencies:[IE,ja,ta,O0,vm],encapsulation:2,data:{animation:[cz("autoHeight",[ym("nulled",Ls({height:0})),ym("full",Ls({height:"*"})),Dc("full => nulled",[Ec("700ms 350ms")]),Dc("nulled => full",[Ec(350)])])]}}),Oi([to()],e.prototype,"owlDraggable",void 0),Oi([to()],e.prototype,"stageData",void 0),Oi([to()],e.prototype,"slidesData",void 0),Oi([Np("mousedown",["$event"])],e.prototype,"onMouseDown",null),Oi([Np("touchstart",["$event"])],e.prototype,"onTouchStart",null),Oi([Np("touchcancel",["$event"])],e.prototype,"onTouchCancel",null),Oi([Np("dragstart")],e.prototype,"onDragStart",null),Oi([Np("selectstart")],e.prototype,"onSelectStart",null),e})(),ufe=(()=>{let e=class{};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:[sfe,TU,cfe,vA],imports:[cl]}),e})();function pfe(e,t){if(1&e){const n=vr();x(0,"div",9),St("click",function(){Ln(n);const r=rt().$implicit;return tn(rt().removeToastr(r))}),E(1,"\xd7 "),w()}}function ffe(e,t){if(1&e&&(x(0,"div"),E(1),w()),2&e){const n=rt().$implicit,i=rt();uu("to-title ",n.config.titleClass||i.titleClass,""),se(1),Ns(n.title)}}function mfe(e,t){if(1&e&&re(0,"span",10),2&e){const n=rt().$implicit,i=rt();uu("to-message ",n.config.messageClass||i.messageClass,""),Je("innerHTML",i.sanitizer.bypassSecurityTrustHtml(n.message),tc)}}function gfe(e,t){if(1&e&&(x(0,"span"),E(1),w()),2&e){const n=rt().$implicit,i=rt();uu("to-message ",n.config.messageClass||i.messageClass,""),se(1),Ns(n.message)}}function vfe(e,t){if(1&e){const n=vr();x(0,"div",3),St("@inOut.done",function(r){return Ln(n),tn(rt().onAnimationEnd(r))})("click",function(){const o=Ln(n).$implicit;return tn(rt().clicked(o))}),at(1,pfe,2,0,"div",4),at(2,ffe,2,4,"div",5),x(3,"div",6),at(4,mfe,1,4,"span",7),at(5,gfe,2,4,"span",8),w()()}if(2&e){const n=t.$implicit,i=rt();uu("toastr toastr-",n.type,""),Je("@inOut",n.config.animate||i.animate),se(1),Je("ngIf",n.config.showCloseButton),se(1),Je("ngIf",n.title),se(1),Je("ngSwitch",n.config.enableHTML),se(1),Je("ngSwitchCase",!0)}}let Ow=(()=>{class e{constructor(){this.position="top-right",this.maxShown=5,this.newestOnTop=!1,this.animate="slideFromLeft",this.toastTimeout=5e3,this.enableHTML=!1,this.dismiss="auto",this.messageClass="toastr-message",this.titleClass="toastr-title",this.showCloseButton=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})();class pb{constructor(t,n,i,r){this.type=t,this.message=n,this.title=i,this.data=r,this.config={position:"",animate:"slideFromLeft",dismiss:"auto",enableHTML:!1,titleClass:"",messageClass:"",toastTimeout:3e3,showCloseButton:!1}}dismiss(){this.toastrManager.dismissToastr(this)}}const yfe=cz("inOut",[ym("fade",Ls({opacity:1})),Dc("void => fade",[Ls({opacity:1}),Ec("0.4s ease-in")]),Dc("fade => void",[Ec("0.4s 0.1s ease-out",Ls({opacity:0}))]),ym("slideFromLeft",Ls({opacity:1,transform:"translateX(0)"})),Dc("void => slideFromLeft",[Ls({opacity:0,transform:"translateX(-100%)"}),Ec("0.4s ease-in")]),Dc("slideFromLeft => void",[Ec("0.4s 0.1s ease-out",Ls({opacity:0,transform:"translateX(100%)"}))]),ym("slideFromRight",Ls({opacity:1,transform:"translateX(0)"})),Dc("void => slideFromRight",[Ls({opacity:0,transform:"translateX(100%)"}),Ec("0.4s ease-in")]),Dc("slideFromRight => void",[Ec("0.4s 0.1s ease-out",Ls({opacity:0,transform:"translateX(-100%)"}))]),ym("slideFromTop",Ls({opacity:1,transform:"translateY(0)"})),Dc("void => slideFromTop",[Ls({opacity:0,transform:"translateY(-100%)"}),Ec("0.4s ease-in")]),Dc("slideFromTop => void",[Ec("0.4s 0.1s ease-out",Ls({opacity:0,transform:"translateY(100%)"}))]),ym("slideFromBottom",Ls({opacity:1,transform:"translateY(0)"})),Dc("void => slideFromBottom",[Ls({opacity:0,transform:"translateY(100%)"}),Ec("0.4s ease-in")]),Dc("slideFromBottom => void",[Ec("0.4s 0.1s ease-out",Ls({opacity:0,transform:"translateY(-100%)"}))])]);let bfe=(()=>{class e{constructor(n,i,r,o){this.sanitizer=n,this.cdr=i,this._zone=r,this.toastrs=[],this._fresh=!0,this._onEnter=new _.xQ,this._onExit=new _.xQ,Object.assign(this,o)}onEnter(){return this._onEnter.asObservable()}onExit(){return this._onExit.asObservable()}addToastr(n){if(this.position.indexOf("top")>0){if(this.newestOnTop?this.toastrs.unshift(n):this.toastrs.push(n),this.toastrs.length>this.maxShown){const i=this.toastrs.length-this.maxShown;this.newestOnTop?this.toastrs.splice(this.maxShown):this.toastrs.splice(0,i)}}else this.toastrs.unshift(n),this.toastrs.length>this.maxShown&&this.toastrs.splice(this.maxShown);null===this.animate&&this._fresh&&(this._fresh=!1,this._onEnter.next(),this._onEnter.complete()),this.cdr.detectChanges()}removeToastr(n){n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=null),this.toastrs=this.toastrs.filter(i=>i.id!==n.id)}removeAllToasts(){this.toastrs.forEach(n=>{clearTimeout(n.timeoutId),n.timeoutId=null}),this.toastrs=[]}clicked(n){this.onToastClicked&&this.onToastClicked(n)}anyToast(){return this.toastrs.length>0}findToast(n){for(let i of this.toastrs)if(i.id===n)return i;return null}onAnimationEnd(n){"void"!==n.toState||this.anyToast()?this._fresh&&"void"===n.fromState&&(this._fresh=!1,this._zone.run(()=>{this._onEnter.next(),this._onEnter.complete()})):this._ngExit()}_ngExit(){this._zone.onMicrotaskEmpty.subscribe(()=>{this._onExit.next(),this._onExit.complete()})}ngOnDestroy(){this._ngExit()}}return e.\u0275fac=function(n){return new(n||e)(Oe(sz),Oe(gd),Oe(Tr),Oe(Ow))},e.\u0275cmp=oi({type:e,selectors:[["app-toastr"]],decls:3,vars:4,consts:[["id","toastr-container"],["toastrContainer",""],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["class","toastr-close-button",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],[3,"ngSwitch"],[3,"class","innerHTML",4,"ngSwitchCase"],[3,"class",4,"ngSwitchDefault"],[1,"toastr-close-button",3,"click"],[3,"innerHTML"]],template:function(n,i){1&n&&(x(0,"div",0,1),at(2,vfe,6,8,"div",2),w()),2&n&&(Ip(i.position),se(2),Je("ngForOf",i.toastrs))},dependencies:[ja,ta,bC,A6,T6],styles:[".to-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message[_ngcontent-%COMP%]{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .to-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.to-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toastr-close-button[_ngcontent-%COMP%]{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button[_ngcontent-%COMP%]:focus, .toastr-close-button[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.top-left[_ngcontent-%COMP%]{top:12px;left:12px}.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}#toastr-container[_ngcontent-%COMP%]{position:fixed;z-index:99999}#toastr-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]{padding:15px;color:#030303}#toastr-container[_ngcontent-%COMP%] > div.toastr-custom[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{color:#999!important}#toastr-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container[_ngcontent-%COMP%] > .toastr-info[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-error[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-success[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container[_ngcontent-%COMP%] > .toastr-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-center[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:300px;margin:10px auto}#toastr-container.bottom-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], #toastr-container.top-full-width[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:96%;margin:10px auto}.toastr[_ngcontent-%COMP%]{background-color:#fff}.toastr-success[_ngcontent-%COMP%]{background-color:#51a351}.toastr-error[_ngcontent-%COMP%]{background-color:#d9534f}.toastr-info[_ngcontent-%COMP%]{background-color:#7460ee}.toastr-warning[_ngcontent-%COMP%]{background-color:#f89406}.toastr-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}#toastr-container[_ngcontent-%COMP%]   .toastr-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}"],data:{animation:[yfe]}}),e})(),LU=(()=>{class e{constructor(n,i,r,o,s){this._applicationRef=n,this._componentFactoryResolver=i,this._injector=r,this.ngZone=o,this.options=s,this.toastrContainers=[],this.index=0,this.toastClicked=new _.xQ}createToastrComponent(n,i=[]){const r=this._componentFactoryResolver.resolveComponentFactory(n),o=am.resolve(i),s=am.fromResolvedProviders(o,this._injector);let a=document.createElement("div");a.id="toastr-node-"+Math.floor(200*Math.random()),document.querySelector("body").appendChild(a);const l=r.create(s,[],a);return this.attachToApplication(l),l}attachToApplication(n){this._applicationRef.attachView(n.hostView)}detachFromApplication(n){this._applicationRef.detachView(n.hostView)}isToastrContainerExist(n){return this.toastrContainers.length>0&&this.toastrContainers.findIndex(r=>r.position===n)>-1}getToastrComponentRef(n){if(this.toastrContainers.length>0){const i=this.toastrContainers.find(r=>r.position===n);return i?i.ref:null}return null}createTimeout(n){let i;return this.ngZone.runOutsideAngular(()=>{i=setTimeout(()=>this.ngZone.run(()=>this.clearToast(n)),n.config.toastTimeout)}),i.toString()}setupToast(n,i){n.id=++this.index,i&&i.hasOwnProperty("toastTimeout")&&(i.dismiss="auto");const r=Object.assign({},this.options,i||{});Object.keys(n.config).forEach(s=>{r.hasOwnProperty(s)&&(n.config[s]=r[s])}),"auto"===n.config.dismiss&&(n.timeoutId=this.createTimeout(n)),n.toastrManager=this;const o=n.config.position;return this.isToastrContainerExist(o)&&this.getToastrComponentRef(o).instance.addToastr(n),n}clearToast(n){const i=n.config.position;this.isToastrContainerExist(i)&&this.getToastrComponentRef(i).instance.removeToastr(n)}clearAllToasts(){this.toastrContainers.length>0&&this.toastrContainers.forEach(n=>{console.log(n);const i=n.ref;n.ref.instance.removeAllToasts(),this.dispose(i)})}dispose(n){if(n){const i=this.toastrContainers.findIndex(r=>r.position===n.instance.position);i>-1&&this.toastrContainers.splice(i,1),this.detachFromApplication(n)}}_onToastClicked(n){this.toastClicked.next(n),"controlled"!==n.config.dismiss&&this.clearToast(n)}dismissToastr(n){this.clearToast(n)}dismissAllToastr(){this.clearAllToasts()}onClickToast(){return this.toastClicked.asObservable()}showToastr(n,i){const r=Object.assign({},this.options,i);return new Promise((o,s)=>{if(!this.isToastrContainerExist(r.position)){let l=this.createToastrComponent(bfe,[{provide:Ow,useValue:r}]);l.instance.onToastClicked=c=>{this._onToastClicked(c)},l.instance.onExit().subscribe(()=>{this.dispose(l)}),this.toastrContainers.push({position:r.position,ref:l})}o(this.setupToast(n,i))})}errorToastr(n,i,r){const s=new pb("error",n,i,r&&r.data?r.data:null);return this.showToastr(s,r),s}infoToastr(n,i,r){const s=new pb("info",n,i,r&&r.data?r.data:null);return this.showToastr(s,r),s}successToastr(n,i,r){const s=new pb("success",n,i,r&&r.data?r.data:null);return this.showToastr(s,r),s}warningToastr(n,i,r){const s=new pb("warning",n,i,r&&r.data?r.data:null);return this.showToastr(s,r),s}customToastr(n,i,r){const s=new pb("custom",n,i,r&&r.data?r.data:null);return this.showToastr(s,r),s}}return e.\u0275fac=function(n){return new(n||e)(Gt(fm),Gt(a0),Gt(ks),Gt(Tr),Gt(Ow))},e.\u0275prov=ft({token:e,factory:e.\u0275fac}),e})(),_fe=(()=>{class e{static forRoot(){return{ngModule:e,providers:[LU,Ow]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})();const Nt_backendUrl="https://www.pixtar.ae:5001",Nt_baseUrl="https://build.pixtar.ae";var xfe=m(4942),BU=m.n(xfe);let Nc=(()=>{class e{constructor(n){this.http=n,this.getpageWithName=i=>this.http.post(Nt_backendUrl+"/api/home/getpagewithName",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getHomepageWithName=i=>this.http.post(Nt_backendUrl+"/api/home/gethomepagewithName",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getAboutNoticeDetails=i=>this.http.post(Nt_backendUrl+"/api/home/frountAboutNoticeDetails",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getInstagramPosts=i=>this.http.post(Nt_backendUrl+"/api/home/instagram-posts",i).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cfe=(()=>{class e{constructor(n,i,r,o){this.router=n,this.pageservice=i,this.metaTagService=r,this.titleService=o,this.get_PageMeta(),this.baseUrl=Nt_baseUrl+"/assets"}ngOnInit(){var i={container:document.getElementById("lottie"),renderer:"svg",loop:!0,autoplay:!0,animationData:{v:"5.9.6",fr:30,ip:0,op:96,w:122,h:119,nm:"hand",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:-34.9,ix:10},p:{a:0,k:[67.1,111.5,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 3 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:20.363,s:[-8]},{i:{x:[.65],y:[1.156]},o:{x:[.333],y:[0]},t:30.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[0]},t:42,s:[-1.8]},{i:{x:[.833],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:60,s:[-.4]},{t:69,s:[0]}],ix:10},p:{a:0,k:[-2.981,.359,0],ix:2,l:2},a:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[15.024,91.188,0],to:[0,0,0],ti:[0,0,0]},{t:44,s:[15.024,91.188,0]}],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[3.903,-5.533],[3.056,-2.353],[6.543,2.313],[4.228,4.252],[.327,6.566],[-.109,2.842],[-.281,9.016],[.083,2.706],[-1.043,.386],[-.666,-2.038],[-.181,-1.13],[.156,-4.374],[-1.579,-.706],[-1.31,1],[-.442,.663],[-6.815,9.598],[-.455,.427],[-1.272,-1.478],[1.046,-1.327],[4.713,-6.619],[.196,-.327],[-1.1,-.992],[-1.181,.832],[-.345,.518],[-6.936,9.765],[-.29,.345],[-1.763,-.582],[-.03,-1.826],[.764,-.91],[6.934,-9.766],[.241,-.499],[-1.104,-.867],[-1.126,.839],[-.321,.495],[-5.124,7.179],[-.342,.391],[-1.712,-.819],[1.17,-2.201],[.133,-.179],[5.282,-7.492],[-1.55,-1.123],[-1.373,1.933],[-2.975,4.189],[-.217,.273],[-1.064,-.33],[-.164,-.992],[.618,-.721],[4.295,-6.063]],o:[[0,0],[-3.925,5.53],[-2.207,3.163],[-5.419,4.144],[-5.658,-1.985],[-4.757,-4.537],[-.132,-2.83],[.352,-9.013],[.084,-2.7],[-.047,-1.53],[2.052,-.622],[.282,1.109],[.785,4.306],[-.141,1.724],[1.431,.818],[.627,-.491],[6.837,-9.584],[.339,-.524],[1.477,-1.272],[1.103,1.28],[-4.699,6.627],[-.221,.311],[-.761,1.271],[1.062,.978],[.484,-.392],[6.95,-9.758],[.262,-.368],[1.202,-1.415],[1.726,.596],[-.023,1.188],[-6.946,9.76],[-.333,.444],[-.56,1.287],[1.107,.863],[.438,-.395],[5.133,-7.171],[.3,-.423],[1.273,-1.408],[2.2,1.171],[-.105,.197],[-5.348,7.451],[-1.34,1.9],[1.55,1.123],[2.98,-4.187],[.2,-.283],[.669,-.891],[.979,.23],[.17,.934],[-4.32,6.046],[0,0]],v:[[23.152,14.265],[23.152,14.265],[11.387,30.834],[3.446,39.158],[-14.469,42.324],[-29.49,32.847],[-37.41,15.555],[-37.109,7.033],[-36.085,-20.008],[-36.314,-28.124],[-34.842,-30.943],[-29.951,-28.395],[-29.245,-25.033],[-28.298,-11.975],[-25.898,-7.919],[-21.376,-8.219],[-19.764,-9.962],[.715,-38.734],[1.91,-40.165],[6.888,-39.794],[6.986,-35.305],[-7.133,-15.436],[-7.783,-14.492],[-7.199,-10.598],[-3.355,-10.348],[-2.105,-11.721],[18.725,-41.005],[19.531,-42.094],[24.437,-43.471],[27.362,-39.438],[26.146,-36.195],[5.327,-6.906],[4.464,-5.488],[5.387,-1.83],[9.168,-1.788],[10.311,-3.128],[25.697,-24.654],[26.645,-25.895],[31.676,-26.887],[33.542,-20.783],[33.185,-20.219],[17.314,2.245],[17.658,7.111],[22.458,5.811],[31.391,-6.755],[32.008,-7.593],[34.898,-8.527],[36.785,-6.509],[36.077,-3.893],[23.154,14.271]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-2.092,-1],[-5.851,1.244],[-2.89,2.122],[-2.836,4.038],[-8.223,11.534],[1.8,3.179],[2.203,.713],[-.482,.692],[3.481,3.721],[1.699,.527],[.484,.17],[1.139,3.155],[2.122,1.241],[3.015,-1.109],[1.758,-2.785],[.644,.543],[3.548,-4.034],[.13,-.169],[1.792,-2.514],[4.079,-5.747],[0,0],[.082,.492],[.844,3.567],[3.743,.857],[2.2,-2.689],[-.104,-2.042],[.639,-12.849],[-1.281,-4.26],[-5.078,-4.319],[-.195,-.238],[0,0]],o:[[2.036,1.113],[5.3,2.515],[3.508,-.744],[3.984,-2.911],[8.184,-11.562],[2.279,-2.855],[-1.124,-2.024],[.544,-.765],[3.017,-4.106],[-1.184,-1.328],[-.386,-.124],[1.837,-2.807],[-.767,-2.335],[-2.755,-1.652],[-3.194,1.082],[-.671,-.678],[-4.034,-3.548],[-.141,.16],[-1.912,2.423],[-4.089,5.741],[0,0],[-.08,-.81],[-.575,-3.63],[-.905,-3.835],[-3.335,-.972],[-1.354,1.532],[.755,12.89],[-.219,4.4],[1.914,6.386],[.221,.214],[0,0],[0,0]],v:[[-26.227,43.472],[-20.111,46.795],[-3.436,49.195],[6.271,44.847],[16.572,34.353],[41.182,-.292],[41.975,-10.279],[36.799,-14.538],[38.319,-16.68],[37.519,-30.18],[33.112,-33.014],[31.862,-33.451],[32.969,-42.919],[28.486,-48.471],[19.361,-49.329],[12.486,-42.977],[10.62,-44.85],[-3.107,-43.971],[-3.514,-43.477],[-8.939,-35.964],[-21.189,-18.731],[-22.033,-17.546],[-22.214,-19.346],[-24.014,-30.219],[-31.486,-37.094],[-40.613,-34.262],[-42.563,-28.686],[-43.555,9.895],[-42.488,22.887],[-31.775,39.287],[-31.152,39.965],[-26.227,43.465]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[44.024,50.688],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 4 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[4]},{t:17,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.591],y:[1.232]},o:{x:[.333],y:[0]},t:3.182,s:[64.512]},{t:17,s:[78.762]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[-46.004]},{t:17,s:[-45.754]}],ix:4}},a:{a:0,k:[3.602,10.311,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.05,.08],[-.397,.235],[-.245,-.372],[-.243,-2.031],[2.88,-3.875],[.273,0]],o:[[-.461,0],[0,-.17],[6.552,-9.387],[-.235,-.397],[.383,-.227],[1.001,1.784],[.576,4.793],[-.156,.224],[0,0]],v:[[-2.516,10.057],[-3.351,9.221],[-3.201,8.745],[-1.542,-8.689],[-1.249,-9.834],[-.128,-9.576],[1.757,-3.797],[-1.831,9.704],[-2.516,10.061]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.601,10.311],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 5 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[0]}],ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.524],y:[1.943]},o:{x:[.333],y:[0]},t:0,s:[63.218]},{t:15,s:[81.718]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-46.437]},{t:15,s:[-45.687]}],ix:4}},a:{a:0,k:[3.592,13.05,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.719,5.523],[1.159,2.111],[-.394,.238],[-.245,-.379],[-.31,-2.601],[4.815,-6.892],[.273,0]],o:[[-.461,0],[0,-.17],[3.6,-5.154],[-.281,-2.392],[-.238,-.395],[.387,-.233],[1.281,2.285],[.55,4.109],[-.156,.224],[0,0]],v:[[-2.507,12.799],[-3.341,11.964],[-3.191,11.486],[1.147,-4.604],[-1.033,-11.421],[-.75,-12.566],[.383,-12.305],[2.792,-4.905],[-1.823,12.439],[-2.508,12.797]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.592,13.05],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 6 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15.909,s:[3]},{t:28,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.706],y:[1.553]},o:{x:[.333],y:[0]},t:15.909,s:[30.436]},{t:28,s:[24.186]}],ix:3},y:{a:1,k:[{i:{x:[.652],y:[1.489]},o:{x:[.333],y:[0]},t:15.909,s:[-81.209]},{t:28,s:[-93.959]}],ix:4}},a:{a:0,k:[9.646,4.948,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.461],[-.075,.128],[-1.692,1.15],[-4.764,-.772],[.06,-.457],[.457,.06],[3.634,-2.451],[1.022,-1.522],[.295,0]],o:[[-.461,-.001],[0,-.148],[1.123,-1.71],[3.99,-2.716],[.457,.06],[-.06,.457],[-4.324,-.717],[-1.519,1.027],[-.151,.253],[0,0]],v:[[-8.561,4.693],[-9.395,3.855],[-9.279,3.435],[-5.016,-.898],[8.617,-3.926],[9.335,-2.989],[8.398,-2.27],[-3.995,.431],[-7.842,4.29],[-8.561,4.698]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.645,4.948],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 7 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:13.363,s:[0]},{t:26,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.624],y:[2.994]},o:{x:[.333],y:[0]},t:13.363,s:[30.021]},{t:26,s:[22.771]}],ix:3},y:{a:1,k:[{i:{x:[.624],y:[1.964]},o:{x:[.333],y:[0]},t:13.363,s:[-82.012]},{t:26,s:[-97.012]}],ix:4}},a:{a:0,k:[12.19,6.146,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.295,0],[0,.461],[-.076,.128],[-2.168,1.472],[-8.332,-1.099],[.06,-.457],[.457,.06],[4.573,-3.179],[1.34,-2]],o:[[-.461,-.001],[.001,-.149],[1.439,-2.19],[3.394,-2.379],[.457,.06],[-.06,.457],[-6.231,-.82],[-1.994,1.35],[-.151,.254]],v:[[-11.106,5.895],[-11.94,5.059],[-11.824,4.637],[-6.361,-.91],[11.161,-4.796],[11.88,-3.859],[10.943,-3.14],[-5.339,.413],[-10.387,5.486]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[12.19,6.146],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0}],markers:[]}};BU().loadAnimation(i),this.router.parseUrl(this.router.url).fragment||window.scroll({top:0,left:0,behavior:"smooth"})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"about-us"}).subscribe(i=>{200==i.body.code&&i.body.result&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}navigateToLink(n){this.router.navigate(["contact",n])}}return e.\u0275fac=function(n){return new(n||e)(Oe(xo),Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-about"]],decls:255,vars:5,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-flex","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","align-items-end"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","300"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["id","wedo-section","data-scroll-index","0",1,"wedo-section"],[1,"container-fluid","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xl-10","offset-xl-1"],[1,"we-do"],[1,"col-xxl-12"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head"],["id","services1","data-scroll-nav","0",1,"services"],[1,"container-fluid"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-7","offset-md-1","col-sm-6","order-sm-1","order-2"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content"],[1,"color1"],[1,"points"],[1,"link",3,"click"],[1,"barcelony"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","offset-xl-1","col-md-4","col-sm-6","order-sm-2","order-1"],[1,"img-block"],["alt","",1,"w-100",3,"src"],["id","services2","data-scroll-nav","1",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","col-md-4","col-sm-6"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-6","offset-md-1","col-sm-6"],["id","services3","data-scroll-nav","2",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","offset-xl-1","col-md-6","offset-md-1","col-sm-6","order-sm-1","order-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-4","offset-xl-1","col-md-4","offset-md-1","col-sm-6","order-sm-2","order-1"],["id","services4","data-scroll-nav","3",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","offset-xl-1","col-md-7","offset-md-1","col-sm-6"],["id","services5","data-scroll-nav","4",1,"services"],[1,"bg-black"],[1,"col-md-3"],[1,"cap"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p28","head"],[1,"col-md-9"],[1,"col-md-6","col-sm-6"],[1,"list"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p32"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"p-0"],["href","https://www.pixtar.ae/project-details/dnour"],["href","https://www.pixtar.ae/project-details/pakhis"],["href","https://www.pixtar.ae/project-details/autokoorosh"],["href","https://www.pixtar.ae/project-details/vendetta"],["href","https://www.pixtar.ae/project-details/beyou"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"We don't do "),w(),x(10,"h1",9),E(11,"We don't"),w(),re(12,"div",10),w(),x(13,"h1",11),E(14,"do one"),w(),x(15,"h1",12),E(16," size fits all"),w(),x(17,"h1",13),E(18,"one size fits all"),w(),x(19,"p",14),E(20,"Our services are tailored to the needs of your brand."),w()()(),x(21,"p",15),E(22," We do it real "),w()()()()()(),x(23,"section",16)(24,"div",17)(25,"div",2)(26,"div",18)(27,"div",19)(28,"div",2)(29,"div",20)(30,"p",21),E(31," We do it real "),w()()()()()()()(),x(32,"section",22)(33,"div",23)(34,"div",2)(35,"div",18)(36,"div",2)(37,"div",24)(38,"div",25)(39,"h1")(40,"span",26),E(41,"Branding"),w(),E(42," that lets you in & gets you an ear"),w(),x(43,"div",27)(44,"p"),E(45,"Research | Strategy | Design"),w(),x(46,"p"),E(47,"Identity | Brandbook & more\u2026"),w()(),x(48,"p",28),St("click",function(){return i.navigateToLink("branding")}),E(49,"Let us "),x(50,"span",29),E(51,"listen"),w(),E(52," to your story"),w()()(),x(53,"div",30)(54,"div",31),re(55,"img",32),w()()()()()()(),x(56,"section",33)(57,"div",23)(58,"div",2)(59,"div",18)(60,"div",2)(61,"div",34)(62,"div",31),re(63,"img",32),w()(),x(64,"div",35)(65,"div",25)(66,"h1")(67,"span",26),E(68,"Website"),w(),E(69," that tells your story which connects"),w(),x(70,"div",27)(71,"p"),E(72,"Static | Dynamic"),w(),x(73,"p"),E(74,"Ui/Ux & more\u2026"),w()(),x(75,"p",28),St("click",function(){return i.navigateToLink("website")}),E(76,"Let's "),x(77,"span",29),E(78,"tell"),w(),E(79," your story"),w()()()()()()()(),x(80,"section",36)(81,"div",23)(82,"div",2)(83,"div",18)(84,"div",2)(85,"div",37)(86,"div",25)(87,"h1")(88,"span",26),E(89,"eCommerce"),w(),E(90," that helps you sell "),w(),x(91,"div",27)(92,"p"),E(93,"Magento 2++ Website Development"),w(),x(94,"p"),E(95,"Customised eCommerce Solutions"),w(),x(96,"p"),E(97,"Payment Gateway Integration"),w(),x(98,"p"),E(99,"& more\u2026"),w()(),x(100,"p",28),St("click",function(){return i.navigateToLink("eCommerce")}),E(101,"Let us "),x(102,"span",29),E(103,"help you"),w(),E(104," sell"),w()()(),x(105,"div",38)(106,"div",31),re(107,"img",32),w()()()()()()(),x(108,"section",39)(109,"div",23)(110,"div",2)(111,"div",18)(112,"div",2)(113,"div",34)(114,"div",31),re(115,"img",32),w()(),x(116,"div",40)(117,"div",25)(118,"h1")(119,"span",26),E(120,"Enterprise Solutions"),w(),E(121," that automates your process"),w(),x(122,"div",27)(123,"p"),E(124,"Web Based Apps"),w(),x(125,"p"),E(126,"eCom Management Solutions"),w(),x(127,"p"),E(128,"Business Management Solutions"),w(),x(129,"p"),E(130,"& more\u2026"),w()(),x(131,"p",28),St("click",function(){return i.navigateToLink("enterprice")}),E(132,"Let's "),x(133,"span",29),E(134,"automate"),w(),E(135," it"),w()()()()()()()(),x(136,"section",41)(137,"div",23)(138,"div",2)(139,"div",18)(140,"div",2)(141,"div",37)(142,"div",25)(143,"h1")(144,"span",26),E(145,"SEO"),w(),E(146," solution that spreads the word"),w(),x(147,"div",27)(148,"p"),E(149,"Organic SEO | Site Mapping"),w(),x(150,"p"),E(151,"Google Ads | Social Media Integration"),w(),x(152,"p"),E(153,"& more\u2026"),w()(),x(154,"p",28),St("click",function(){return i.navigateToLink("seo")}),E(155,"Let us "),x(156,"span",29),E(157,"spread"),w(),E(158," your word"),w()()(),x(159,"div",38)(160,"div",31),re(161,"img",32),w()()()()()()(),x(162,"section",42)(163,"div",23)(164,"div",2)(165,"div",18)(166,"div",2)(167,"div",43)(168,"div",44)(169,"p",45),E(170," Capabilities "),w()()(),x(171,"div",46)(172,"div",2)(173,"div",47)(174,"div",48)(175,"p",49),E(176," Strategy "),w(),x(177,"ul",50)(178,"li")(179,"a",51),E(180,"Research"),w()(),x(181,"li")(182,"a",52),E(183,"UI/UX audit "),w()(),x(184,"li")(185,"a",53),E(186,"Stakeholder workshops"),w()(),x(187,"li")(188,"a",51),E(189,"Product strategy"),w()(),x(190,"li")(191,"a",51),E(192,"Innovation consulting"),w()()()()(),x(193,"div",47)(194,"div",48)(195,"p",49),E(196,"Design"),w(),x(197,"ul",50)(198,"li")(199,"a",54),E(200,"UI/UX design"),w()(),x(201,"li")(202,"a",51),E(203,"Brand identity "),w()(),x(204,"li")(205,"a",55),E(206,"Websites and mobile apps"),w()(),x(207,"li")(208,"a",52),E(209,"Visual design"),w()(),x(210,"li")(211,"a",52),E(212,"Prototyping and testing"),w()()()()()(),x(213,"div",2)(214,"div",47)(215,"div",48)(216,"p",49),E(217,"Development"),w(),x(218,"ul",50)(219,"li")(220,"a",54),E(221,"HTML/CSS/JS"),w()(),x(222,"li")(223,"a",52),E(224,"React/Angular "),w()(),x(225,"li")(226,"a",51),E(227,"Backend/API integrations"),w()(),x(228,"li")(229,"a",51),E(230,"Magento 2++"),w()(),x(231,"li")(232,"a",51),E(233,"Web based apps"),w()()()()(),x(234,"div",47)(235,"div",48)(236,"p",49),E(237,"Content"),w(),x(238,"ul",50)(239,"li")(240,"a",51),E(241,"Copywriting"),w()(),x(242,"li")(243,"a",51),E(244,"Video "),w()(),x(245,"li")(246,"a",51),E(247,"Animation"),w()(),x(248,"li")(249,"a",51),E(250,"Iconography"),w()(),x(251,"li")(252,"a",51),E(253,"2D graphics"),w()()()()()()()()()()()(),re(254,"div",56)),2&n&&(se(55),Se("src","",i.baseUrl,"/img/services/branding.jpg",Ce),se(8),Se("src","",i.baseUrl,"/img/services/dnour-website.jpg",Ce),se(44),Se("src","",i.baseUrl,"/img/services/ecommerce.jpg",Ce),se(8),Se("src","",i.baseUrl,"/img/services/enterprises.jpg",Ce),se(46),Se("src","",i.baseUrl,"/img/services/seo.jpg",Ce))},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})();var yi=m(8259);let zU=(()=>{class e{constructor(n){this.http=n,this.getBusinesscardDetails=i=>this.http.post(Nt_backendUrl+"/api/businesscard/allbusinesscard",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getBusinesscardDetailsByID=i=>this.http.post(Nt_backendUrl+"/api/businesscard/getBusinesscardWithId",i).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wfe=function(e){return["view",e]};function Mfe(e,t){if(1&e&&(x(0,"div",6)(1,"div",7),re(2,"img",8),x(3,"div",9)(4,"h5",10),E(5),w(),re(6,"p",11),x(7,"a",12),E(8,"View Vcard"),w()()()()),2&e){const n=t.$implicit,i=rt();se(2),ic("src","",i.imagepath,"",n.profile_photo,"",Ce),se(3),Yx("",n.firstName," ",n.lastName,""),se(2),Je("routerLink",Dl(5,wfe,n._id))}}let Pfe=(()=>{class e{constructor(n,i,r,o){this.businesscardService=n,this.pageservice=i,this.metaTagService=r,this.titleService=o,this.businesscards=[],this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_all_projects()}ngOnInit(){yi("nav").removeClass("d-none"),yi("footer").removeClass("d-none")}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_all_projects(){this.businesscardService.getBusinesscardDetails({}).subscribe(i=>{200==i.code&&(this.businesscards=i.result)})}}return e.\u0275fac=function(n){return new(n||e)(Oe(zU),Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-businesscard"]],decls:7,vars:1,consts:[["id","header",1,"jumbotron","text-center"],[1,"display-3"],["id","gallery"],[1,"container"],[1,"row"],["class","col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4","mb-4"],[1,"card"],["alt","",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-dark",3,"routerLink"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"h2",1),E(2,"Business Cards"),w()(),x(3,"section",2)(4,"div",3)(5,"div",4),at(6,Mfe,9,7,"div",5),w()()()),2&n&&(se(6),Je("ngForOf",i.businesscards))},dependencies:[ja,kc],styles:[".contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#878787;border:none;border-radius:0;border-bottom:1px solid #DDDDDD}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:#878787;border:none;border-radius:0;border-bottom:1px solid #DDDDDD}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#878787}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px 0 0}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:5px 20px;text-decoration:none;border:1px solid #707070;color:#878787;border-radius:30px}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777;background:#1d1d1f}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777;background:#1d1d1f}@media (max-width: 1199px){.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:4px 10px}}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #DA9777;padding:5px 30px;border-radius:30px;font-weight:600}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#DA9777;color:#fff}.contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#DA9777;color:#fff}.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}@media (max-width: 991px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}}.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:106px;font-weight:800;color:#000}@media (max-width: 1199px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}.contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:530px;font-size:22px;font-weight:500}@media (max-width: 1199px){.contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:100%}}"]}),e})(),Sfe=(()=>{class e{constructor(){this.baseURl=Nt_baseUrl+"/assets/"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-godly"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","godly business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971566093025"],["alt","",3,"src"],[1,"col-10"],["href","tel:+971566093025"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:godly@epictravel.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","https://www.epictravel.ae","target","_blank"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/godly-babukutty-11566847/","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://www.instagram.com/godly_babukutty/","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11,"Godly Babukutty"),w(),x(12,"p",2),E(13,"Managing Director at Epic Travel"),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",17)(22,"a",18)(23,"span"),E(24,"+971 56 609 3025"),w()()()(),x(25,"div",19)(26,"div",20)(27,"a",21),re(28,"img",16),w()(),x(29,"div",17)(30,"a",21)(31,"span"),E(32,"godly@epictravel.ae"),w()()()()()()(),x(33,"div",22)(34,"div",23)(35,"a",24),E(36,"Save Contact"),w(),x(37,"p")(38,"a",25),re(39,"img",26),w()(),x(40,"p")(41,"a",27),re(42,"img",28),w()(),x(43,"p")(44,"a",29),re(45,"img",30),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"/images/pixtar-white-logo.svg",Ce),se(1),Se("src","",i.baseURl,"/images/godly.jpeg",Ce),se(13),Se("src","",i.baseURl,"/images/phone.svg",Ce),se(8),Se("src","",i.baseURl,"/images/email.svg",Ce),se(7),Se("href","",i.baseURl,"godly.vcf",Ce),se(4),Se("src","",i.baseURl,"/images/website.svg",Ce),se(3),Se("src","",i.baseURl,"/images/linkedin.svg",Ce),se(3),Se("src","",i.baseURl,"/images/instagram.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),Ofe=(()=>{class e{constructor(){this.baseURl=Nt_baseUrl+"/assets/"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-israel"]],decls:43,vars:7,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar logo",1,"card-logo",3,"src"],["alt","israel business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:+31657528147"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:israelomidosu@dnour.com","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","https://dnour.com/","target","_blank"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/israelomidosu/","target","_blank"],["alt","linkedin","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11,"Israel Omidosu"),w(),x(12,"p",2),E(13,"Head of Brand Strategy"),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",17)(22,"a",15)(23,"span"),E(24,"+31 6575 28147"),w()()()(),x(25,"div",18)(26,"div",19)(27,"a",20),re(28,"img",16),w()(),x(29,"div",17)(30,"a",20)(31,"span"),E(32,"israelomidosu@dnour.com"),w()()()()()()(),x(33,"div",21)(34,"div",22)(35,"a",23),E(36,"Save Contact"),w(),x(37,"p")(38,"a",24),re(39,"img",25),w()(),x(40,"p")(41,"a",26),re(42,"img",27),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"/images/pixtar-white-logo.svg",Ce),se(1),Se("src","",i.baseURl,"/images/israel.jpg",Ce),se(13),Se("src","",i.baseURl,"/images/phone.svg",Ce),se(8),Se("src","",i.baseURl,"/images/email.svg",Ce),se(7),Se("href","",i.baseURl,"io.vcf",Ce),se(4),Se("src","",i.baseURl,"/images/website.svg",Ce),se(3),Se("src","",i.baseURl,"/images/linkedin.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),Efe=(()=>{class e{constructor(){this.baseURl=Nt_baseUrl+"/assets/"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-junaid-shaikh"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","junaid business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971529997111"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:junaid@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/junaid-nour-56515493","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/junaidnour?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11,"Junaid Shaikh"),w(),x(12,"p",2),E(13,"Co-founder & Brand Director "),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",17)(22,"a",15)(23,"span"),E(24,"+971 52 999 7111"),w()()()(),x(25,"div",18)(26,"div",19)(27,"a",20),re(28,"img",16),w()(),x(29,"div",17)(30,"a",20)(31,"span"),E(32,"junaid@pixtar.ae"),w()()()()()()(),x(33,"div",21)(34,"div",22)(35,"a",23),E(36,"Save Contact"),w(),x(37,"p")(38,"a",24),re(39,"img",25),w()(),x(40,"p")(41,"a",26),re(42,"img",27),w()(),x(43,"p")(44,"a",28),re(45,"img",29),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"images/pixtar-white-logo.svg",Ce),se(1),Se("src","",i.baseURl,"images/junaid.jpg",Ce),se(13),Se("src","",i.baseURl,"images/phone.svg",Ce),se(8),Se("src","",i.baseURl,"images/email.svg",Ce),se(7),Se("href","",i.baseURl,"junaid-shaikh.vcf",Ce),se(4),Se("src","",i.baseURl,"images/website.svg",Ce),se(3),Se("src","",i.baseURl,"images/linkedin.svg",Ce),se(3),Se("src","",i.baseURl,"images/instagram.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),Dfe=(()=>{class e{constructor(){this.baseURl=Nt_baseUrl+"/assets/"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-nawaz"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","kbn business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],["href","tel:971527930781"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["href","mailto:kbn@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11,"KBN"),w(),x(12,"p",2),E(13,"Co-Founder & Creative Director"),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",17)(22,"a",15)(23,"span"),E(24,"+971 52 793 0781"),w()()()(),x(25,"div",18)(26,"div",19)(27,"a",20),re(28,"img",16),w()(),x(29,"div",17)(30,"a",20)(31,"span"),E(32,"kbn@pixtar.ae"),w()()()()()()(),x(33,"div",21)(34,"div",22)(35,"a",23),E(36,"Save Contact"),w(),x(37,"p")(38,"a",24),re(39,"img",25),w()(),x(40,"p")(41,"a",26),re(42,"img",27),w()(),x(43,"p")(44,"a",28),re(45,"img",29),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"/images/pixtar-white-logo.svg",Ce),se(1),Se("src","",i.baseURl,"/images/kbn.jpg",Ce),se(13),Se("src","",i.baseURl,"/images/phone.svg",Ce),se(8),Se("src","",i.baseURl,"/images/email.svg",Ce),se(7),Se("href","",i.baseURl,"kbn.vcf",Ce),se(4),Se("src","",i.baseURl,"/images/website.svg",Ce),se(3),Se("src","",i.baseURl,"/images/linkedin.svg",Ce),se(3),Se("src","",i.baseURl,"/images/instagram.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 414px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important;min-height:-webkit-fill-available}}@media (max-width: 393px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:89vh!important;min-height:-webkit-fill-available}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:100%!important;min-height:-webkit-fill-available}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}"]}),e})(),Afe=(()=>{class e{constructor(){this.baseURl=Nt_baseUrl+"/assets/"}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-nawaz2"]],decls:46,vars:8,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","kbn business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-md-center","justify-content-sm-center","justify-content-start"],[1,"profile-name","text-center"],[1,"account-block"],[1,"content1"],[1,"content2"],[1,"mb-2","d-flex"],[1,"text-center","ph","me-sm-2","me-2"],["href","tel:971527930781"],["alt","",3,"src"],[1,"d-flex"],[1,"text-center","em","me-sm-2","me-2"],["href","mailto:kbn@pixtar.ae","target","_blank"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","/"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11,"KBN"),w(),x(12,"p",2),E(13,"Co-Founder & Creative Director"),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",2)(22,"a",15)(23,"span"),E(24,"+971 52 793 0781"),w()()()(),x(25,"div",17)(26,"div",18)(27,"a",19),re(28,"img",16),w()(),x(29,"div",2)(30,"a",19)(31,"span"),E(32,"kbn@pixtar.ae"),w()()()()()()(),x(33,"div",20)(34,"div",21)(35,"a",22),E(36,"Save Contact"),w(),x(37,"p")(38,"a",23),re(39,"img",24),w()(),x(40,"p")(41,"a",25),re(42,"img",26),w()(),x(43,"p")(44,"a",27),re(45,"img",28),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"/images/pixtar-white-logo.svg",Ce),se(1),Se("src","",i.baseURl,"/images/kbn.jpg",Ce),se(13),Se("src","",i.baseURl,"/images/phone.svg",Ce),se(8),Se("src","",i.baseURl,"/images/email.svg",Ce),se(7),Se("href","",i.baseURl,"kbn.vcf",Ce),se(4),Se("src","",i.baseURl,"/images/website.svg",Ce),se(3),Se("src","",i.baseURl,"/images/linkedin.svg",Ce),se(3),Se("src","",i.baseURl,"/images/instagram.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif;background:rgba(128,128,128,.2901960784)}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow-x:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px;margin-bottom:0}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none!important;width:100%;min-height:100vh;height:100%;border-radius:0;overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{margin-top:-60px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:20px 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:15px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px;margin-top:0}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .content1[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:0 12px;justify-content:center;align-items:center}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:20px 0 15px}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:20px 0}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]{background:#fff}}@media (orientation: landscape) and (max-width: 991px){.vh-100[_ngcontent-%COMP%]{height:100%!important}section.card-section[_ngcontent-%COMP%]{overflow-y:scroll!important}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:30px 0}}@media (orientation: landscape) and (max-width: 991px) and (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0}}"]}),e})(),Tfe=(()=>{class e{constructor(n,i,r,o,s){this.businesscardService=n,this.router=i,this.route=r,this.element=o,this.location=s,this.id=this.route.snapshot.paramMap.get("id"),this.imagepath=Nt_backendUrl+"/public/",this.vCardpath=Nt_backendUrl+"/public/vcards/",this.baseURl=Nt_baseUrl+"/assets/",this.id&&this.getBusinesscard(this.id)}ngOnInit(){var n=this.location.path();"view"==(n=n.split("/")[2])&&(yi("nav").addClass("d-none"),yi("footer").addClass("d-none"))}getBusinesscard(n){this.businesscardService.getBusinesscardDetailsByID({id:n}).subscribe(r=>{200==r.code&&(this.businesscard=r.result)})}}return e.\u0275fac=function(n){return new(n||e)(Oe(zU),Oe(xo),Oe(Nl),Oe(Rr),Oe(gm))},e.\u0275cmp=oi({type:e,selectors:[["app-view"]],decls:46,vars:19,consts:[[1,"card-section"],[1,"container","p-0"],[1,""],[1,"col-xxl-4","col-lg-5","col-md-6","col-sm-8","col-12","p-0","m-auto"],[1,"d-flex","align-items-center","justify-content-center","vh-100","coverflow-hidden"],[1,"card"],["alt","pixtar",1,"card-logo",3,"src"],["alt","junaid business image",1,"card-img-top",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center"],[1,"profile-name","text-center"],[1,"account-block"],[1,"row","justify-content-center"],[1,"col-sm-10","0ffset-2","col-8","offset-2"],[1,"row","mb-2"],[1,"col-2","p-0","text-center","ph"],[3,"href"],["alt","",3,"src"],[1,"col-10"],[1,"row"],[1,"col-2","p-0","text-center","em"],["target","_blank",3,"href"],[1,"social-links"],[1,"d-flex","flex-row","justify-content-center","contact"],[1,"contact-btn",3,"href"],["href","#"],["alt","weblink","width","35",3,"src"],["href","https://www.linkedin.com/in/kbnab","target","_blank"],["alt","linkedin","width","35",3,"src"],["href","https://instagram.com/imkbn?igshid=YmMyMTA2M2Y=","target","_blank"],["alt","instagram","width","35",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),re(6,"img",6)(7,"img",7),x(8,"div",8)(9,"div",9)(10,"h4"),E(11),w(),x(12,"p",2),E(13),w()(),x(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"a",15),re(20,"img",16),w()(),x(21,"div",17)(22,"a",15)(23,"span"),E(24),w()()()(),x(25,"div",18)(26,"div",19)(27,"a",20),re(28,"img",16),w()(),x(29,"div",17)(30,"a",20)(31,"span"),E(32),w()()()()()()(),x(33,"div",21)(34,"div",22)(35,"a",23),E(36,"Save Contact"),w(),x(37,"p")(38,"a",24),re(39,"img",25),w()(),x(40,"p")(41,"a",26),re(42,"img",27),w()(),x(43,"p")(44,"a",28),re(45,"img",29),w()()()()()()()()()()()),2&n&&(se(6),Se("src","",i.baseURl,"/images/pixtar-white-logo.svg",Ce),se(1),ic("src","",i.imagepath,"",i.businesscard.profile_photo,"",Ce),se(4),Yx("",i.businesscard.firstName," ",i.businesscard.lastName,""),se(2),Ns(i.businesscard.title),se(6),Se("href","tel:",i.businesscard.cellPhone,"",Ce),se(1),Se("src","",i.baseURl,"/images/phone.svg",Ce),se(2),Se("href","tel:",i.businesscard.cellPhone,"",Ce),se(2),Ns(i.businesscard.cellPhone),se(3),Se("href","mailto:",i.businesscard.email,"",Ce),se(1),Se("src","",i.baseURl,"/images/email.svg",Ce),se(2),Se("href","mailto:",i.businesscard.email,"",Ce),se(2),Ns(i.businesscard.email),se(3),ic("href","",i.vCardpath,"",i.businesscard.firstName,".vcf",Ce),se(4),Se("src","",i.baseURl,"/images/website.svg",Ce),se(3),Se("src","",i.baseURl,"/images/linkedin.svg",Ce),se(3),Se("src","",i.baseURl,"/images/instagram.svg",Ce))},styles:["section.card-section[_ngcontent-%COMP%]{padding-bottom:0!important;font-family:Montserrat,sans-serif}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:91vh!important}}@media (max-width: 380px){section.card-section[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:98vh!important}}section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 576px){section.card-section[_ngcontent-%COMP%]   .coverflow-hidden[_ngcontent-%COMP%]{overflow:hidden}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:27rem;border:none;border-radius:30px;padding:12px}@media (max-width: 1366px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:19rem}}@media (max-width: 1024px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:0;box-shadow:none;width:100%}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:25px 25px 0 0}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-img-top[_ngcontent-%COMP%]{border-radius:0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img.card-logo[_ngcontent-%COMP%]{width:28px;position:absolute;top:2rem;left:2rem}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0;background:#fff;border-radius:25px;margin-top:-40px;height:250px}@media (max-width: 575px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;margin-top:-65px;height:250px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{padding:10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{margin:8px 0}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat,sans-serif;font-weight:700;font-size:20px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:12px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .ph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   .em[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:39px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:16px;color:#000;font-weight:700;line-height:2.5}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .account-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:24px 0}@media (max-width: 480px){section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{margin:15px 0 20px}}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:0 0 0 10px}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{background:#1d1d1f;color:#fff;padding:7px 12px;font-size:14px;border-radius:30px;font-weight:600;border:none}section.card-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 6px 10px -4px #00000026;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}",".navbar[_ngcontent-%COMP%]{\n  display: none !important;\n}\nfooter[_ngcontent-%COMP%]{\n  display: none !important;\n}"]}),e})(),Ife=(()=>{class e{constructor(n){this.http=n,this.addContact=i=>this.http.post(Nt_backendUrl+"/api/home/contactadd",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function kfe(e,t){1&e&&(x(0,"div",36)(1,"div"),E(2," Name is required. "),w()())}function Rfe(e,t){if(1&e&&(x(0,"div",36)(1,"div"),E(2),w()()),2&e){const n=rt();se(2),sl(" ",n.hasEmailError("email","required")," ")}}function Nfe(e,t){1&e&&(x(0,"div",36)(1,"div"),E(2," Phone Number is required. "),w()())}function Ffe(e,t){1&e&&(x(0,"div",36)(1,"div"),E(2," Comments is required. "),w()())}let UU=(()=>{class e{constructor(n,i,r,o,s,a,l){this.contactservice=n,this.toastr=i,this.route=r,this.formBuilder=o,this.pageservice=s,this.metaTagService=a,this.titleService=l,this.title="Contact Us",this.model={name:null,email:null,message:null,phone:null,subject:[]},this.submitted=!1,this.error={},this.selectedSubj=[],this.isWebsitesel=!1,this.isBrandingsel=!1,this.isSeosel=!1,this.isEnterpricesel=!1,this.isEcommerce=!1,this.msg_success=!1,this.msg_danger=!1,this.subject=[],this.url="https://calendly.com/pixtar/121",this.hasError=(c,d)=>this.addCareerForm.controls[c].hasError(d),this.hasEmailError=(c,d)=>""==this.addCareerForm.controls.email.value?"Email is required":"INVALID"==this.addCareerForm.controls.email.status?"Invalid Email":this.addCareerForm.controls.email.hasError(d),this.get_PageMeta(),this.baseUrl=Nt_baseUrl+"/assets",this.selectedSub=this.route.snapshot.paramMap.get("id"),this.addCareerForm=this.formBuilder.group({name:["",kl.required],email:["",[kl.required,kl.email,kl.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],message:["",kl.required],phone:["",kl.required]})}ngOnInit(){window.Calendly.initInlineWidget({url:this.url,parentElement:document.querySelector(".calendly-inline-widget"),prefill:{}}),window.scroll({top:0,left:0,behavior:"smooth"}),$("nav").removeClass("d-none"),$("footer").removeClass("d-none"),"branding"==this.selectedSub?(this.isBrandingsel=!0,$("#branding").addClass("active")):"website"==this.selectedSub?($("#website").addClass("active"),this.isWebsitesel=!0):"eCommerce"==this.selectedSub?($("#eCommerce").addClass("active"),this.isEcommerce=!0):"enterprice"==this.selectedSub?($("#enterprise").addClass("active"),this.isEnterpricesel=!0):"seo"==this.selectedSub&&($("#seo").addClass("active"),this.isSeosel=!0)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"contact-us"}).subscribe(i=>{200==i.body.code&&i.body.result&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}onSubmit(){this.submitted=!0;let n=this.addCareerForm.value;return!this.addCareerForm.invalid&&(this.isBrandingsel&&this.subject.push("Branding"),this.isWebsitesel&&this.subject.push("Website"),this.isEnterpricesel&&this.subject.push("Enterprise Solution"),this.isEcommerce&&this.subject.push("eCommerce"),this.isSeosel&&this.subject.push("SEO"),n.subject=this.subject,this.subject.length<1?(this.toastr.errorToastr("Please Select any one from subjects"),!1):this.contactservice.addContact(n).subscribe(i=>{i&&200==i.body.code?(this.submitted=!0,this.toastr.successToastr(i.body.message),setInterval(()=>{window.location.reload()},2e3)):this.toastr.errorToastr("Error")},i=>this.error=i))}selectSub(n){"website"==n?$("#website").hasClass("active")?($("#website").removeClass("active"),this.isWebsitesel=!1):($("#website").addClass("active"),this.isWebsitesel=!0):"branding"==n?$("#branding").hasClass("active")?($("#branding").removeClass("active"),this.isBrandingsel=!1):($("#branding").addClass("active"),this.isBrandingsel=!0):"eCommerce"==n?$("#eCommerce").hasClass("active")?($("#eCommerce").removeClass("active"),this.isEnterpricesel=!1):($("#eCommerce").addClass("active"),this.isEnterpricesel=!0):"enterprise"==n?$("#enterprise").hasClass("active")?($("#enterprise").removeClass("active"),this.isEnterpricesel=!1):($("#enterprise").addClass("active"),this.isEnterpricesel=!0):"seo"==n&&($("#seo").hasClass("active")?($("#seo").removeClass("active"),this.isSeosel=!1):($("#seo").addClass("active"),this.isSeosel=!0))}}return e.\u0275fac=function(n){return new(n||e)(Oe(Ife),Oe(LU),Oe(Nl),Oe(Pm),Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-contact"]],decls:65,vars:6,consts:[[1,"pb-0","contactsection"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"container"],[1,"row"],[1,"col-md-6"],[1,"contact-content","h-100"],[1,""],[1,"describe"],["href","p/kbn","target","_blank",1,""],["alt","",3,"src"],[1,"short-desc"],[1,"contact-form"],[1,"form"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],["method","post",1,"php-email-form","w-100",3,"formGroup","ngSubmit"],["contactForm","ngForm"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],["type","tel","name","phone","autocomplete","off","formControlName","phone","id","floatingInput","placeholder","phone",1,"form-control"],[1,"detail","w-100","d-none","d-sm-block","mt-4"],[1,"d-flex","flex-row","justify-content-space-between","align-items-center","flex-wrap","pl-0","mb-0"],["type","button","id","branding","value","Branding",1,"button",3,"click"],["type","button","id","website","value","Website",1,"button",3,"click"],["type","button","id","eCommerce","value","eCommerce",1,"button",3,"click"],["type","button","id","enterprise","value","Enterprise Solution",1,"button",3,"click"],["type","button","id","seo","value","SEO",1,"button",3,"click"],[1,"form-floating"],["name","message","autocomplete","off","formControlName","message","id","floatingTextarea","placeholder","message","required","",1,"form-control"],[1,"detail","w-100","d-block","d-sm-none","mt-4"],[1,"d-flex","flex-row","justify-content-space-between","align-items-center","justify-content-center","flex-wrap","pl-0","mb-0"],[1,"w-100","w-100","text-center","text-sm-start"],["type","submit","name","submit","value","Send",1,"float-none","float-sm-end","float-md-end","float-lg-end","float-xl-end","float-xxl-end","mt-5","submit"],[1,"candely"],["data-url","https://calendly.com/kbn",1,"calendly-inline-widget",2,"min-width","320px","height","630px"],[1,"error"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),re(8,"img",8),w()(),x(9,"p",9),E(10,"Describe your project and leave us your contact info, we\u2019ll get back to you ASAP."),w()()()(),x(11,"div",3)(12,"div",10)(13,"div",11)(14,"div",12)(15,"form",13,14),St("ngSubmit",function(){return i.onSubmit()}),x(17,"div",15),re(18,"input",16),x(19,"label",17),E(20,"What's your name?"),w(),at(21,kfe,3,0,"div",18),w(),x(22,"div",15),re(23,"input",19),x(24,"label",17),E(25,"What\u2019s your e-mail?"),w(),at(26,Rfe,3,1,"div",18),w(),x(27,"div",15),re(28,"input",20),x(29,"label",17),E(30,"What's your phone number?"),w(),at(31,Nfe,3,0,"div",18),w(),x(32,"div",21)(33,"ul",22)(34,"li")(35,"input",23),St("click",function(){return i.selectSub("branding")}),w()(),x(36,"li")(37,"input",24),St("click",function(){return i.selectSub("website")}),w()(),x(38,"li")(39,"input",25),St("click",function(){return i.selectSub("eCommerce")}),w()(),x(40,"li")(41,"input",26),St("click",function(){return i.selectSub("enterprise")}),w()(),x(42,"li")(43,"input",27),St("click",function(){return i.selectSub("seo")}),w()()()(),x(44,"div",28),re(45,"textarea",29),x(46,"label",17),E(47,"Tell us about your project :)"),w(),at(48,Ffe,3,0,"div",18),w(),x(49,"div",30)(50,"ul",31)(51,"li")(52,"input",23),St("click",function(){return i.selectSub("branding")}),w()(),x(53,"li")(54,"input",24),St("click",function(){return i.selectSub("website")}),w()(),x(55,"li")(56,"input",25),St("click",function(){return i.selectSub("eCommerce")}),w()(),x(57,"li")(58,"input",26),St("click",function(){return i.selectSub("enterprise")}),w()(),x(59,"li")(60,"input",27),St("click",function(){return i.selectSub("seo")}),w()()()(),x(61,"div",32),re(62,"input",33),w()()()()()()()()(),x(63,"section",34),re(64,"div",35),w()),2&n&&(se(8),Se("src","",i.baseUrl,"/img/logos/qr-code-call-pixtar.svg",Ce),se(7),Je("formGroup",i.addCareerForm),se(6),Je("ngIf",i.submitted&&i.hasError("name","required")),se(5),Je("ngIf",i.submitted&&i.hasEmailError("email","required")),se(5),Je("ngIf",i.submitted&&i.hasError("phone","required")),se(17),Je("ngIf",i.submitted&&i.hasError("message","required")))},dependencies:[ta,I0,jp,D0,A0,Qy,Wp,wm],styles:[".contactsection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:160px}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-top:60px}}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin:0 50px}}@media (max-width: 380px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin:0 30px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#878787}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px 10px 0;position:relative;z-index:1}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:3px 16px;text-decoration:none;border:1px solid #707070;color:#878787;border-radius:30px;font-weight:600}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:4px 10px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .button.active[_ngcontent-%COMP%]{color:#da9777;background:#1d1d1f}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{padding:8px 50px;font-size:16px}}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:disabled{opacity:.3}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   li.opacity-0.position-absolute[_ngcontent-%COMP%]{z-index:0}.contactsection[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f33}@media (max-width: 1366px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{display:flex;align-items:center}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{margin-top:50px;text-align:center}}.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;margin-bottom:80px}@media (max-width: 1366px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:50px;height:150px}}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:140px}}@media (max-width: 991px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;margin-bottom:40px}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]{text-align:center}}.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:530px;font-size:22px;font-weight:500}@media (max-width: 1199px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{width:100%}}@media (max-width: 767px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 575px){.contactsection[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .short-desc[_ngcontent-%COMP%]{font-size:16px}}.form-control[_ngcontent-%COMP%], .input-group-addon[_ngcontent-%COMP%], .tagsinput[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%], .carousel-control.right[_ngcontent-%COMP%], .carousel-control.left[_ngcontent-%COMP%]{transition:all .4s linear}"]}),e})();function Lfe(e,t){1&e&&re(0,"img",98),2&e&&Je("src",rt(2).$implicit.url,Ce)}function Bfe(e,t){1&e&&at(0,Lfe,1,1,"ng-template",97),2&e&&Je("id",rt().$implicit.id)}function zfe(e,t){if(1&e&&(Jr(0),at(1,Bfe,1,1,null,96),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id<=3)}}function Ufe(e,t){1&e&&re(0,"img",98),2&e&&Je("src",rt(2).$implicit.url,Ce)}function jfe(e,t){1&e&&at(0,Ufe,1,1,"ng-template",97),2&e&&Je("id",rt().$implicit.id)}function Vfe(e,t){if(1&e&&(Jr(0),at(1,jfe,1,1,null,96),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id>=4&&n.id<=6)}}function Hfe(e,t){1&e&&re(0,"img",98),2&e&&Je("src",rt(2).$implicit.url,Ce)}function Gfe(e,t){1&e&&at(0,Hfe,1,1,"ng-template",97),2&e&&Je("id",rt().$implicit.id)}function Wfe(e,t){if(1&e&&(Jr(0),at(1,Gfe,1,1,null,96),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id>=7&&n.id<=9)}}let qfe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-dnour"]],decls:219,vars:32,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","http://www.dnour.com","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","250",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","300",1,"mt-0"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-black","about-project"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"content"],[1,"text-white"],[1,"mb-0","text-white"],["id","branding","data-scroll-nav","3",1,"bg-black","branding"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"text-white","heading"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","4",1,"bg-black","story"],[1,"row","mb-4"],[1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content"],[1,"text-white","heading","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12"],[1,"video","text-center"],["id","myVideo","width","954","height","480","controls","controls","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"customvideo","w-100","h-auto"],["src","https://dnour.com/pub/media/wysiwyg/about/the-brand-story-D'NOUR-DUBAI.mp4","type","video/mp4"],["src","https://dnour.com/pub/media/wysiwyg/about/the-brand-story-D'NOUR-DUBAI.ogg","type","video/ogg"],[1,"col-md-10","mx-md-auto"],[1,"about-story"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","150",1,"text-white"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","250",1,"text-white"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","300",1,"text-white","semibold","mt-0","subheading"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","350",1,"text-white","mb-0"],["data-scroll-nav","5",1,"bg-black","typography"],[1,"typography"],["alt","typography","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100",1,"text-white"],["data-scroll-nav","6",1,"bg-black","package"],[1,"col-md-12"],["alt","packaing2","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"img1",3,"src"],[1,"col-md-6"],["alt","box","width","","height","","data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"img2",3,"src"],["alt","package-envelop","width","","height","","data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"src"],["id","animations","data-scroll-nav","7",1,"animation"],[1,""],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100",1,"col-md-12"],["id","myVideo","width","320","height","176","controls","controls","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"ui-ux"],[1,"heading","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo2","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","development","data-scroll-nav","9",1,"development"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-12","p-0"],["id","myVideo2","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"owlcarousel1"],[3,"options"],[4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"owlcarousel2"],[1,"owlcarousel3"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"options"],["id","seo","data-scroll-nav","10",1,"seo-section"],["id","myVideo1","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","seo"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"container"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold","border-radius-25",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"],[4,"ngIf"],["class","slide","carouselSlide","",3,"id"],[3,"src","alt","title"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"D'NOUR"),w(),x(10,"div",7)(11,"p"),E(12,"D'NOUR is a Dubai-based jewellery brand that places women at the forefront."),w(),x(13,"p")(14,"a",8),E(15,"dnour.com"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"Animations"),w()(),x(25,"h3",15)(26,"a",13),E(27,"UI/UX Design"),w()(),x(28,"h3",16)(29,"a",13),E(30,"Development"),w()(),x(31,"h3",17)(32,"a",13),E(33,"SEO"),w()()()()()()()()()(),x(34,"section",18)(35,"div",19)(36,"div",2)(37,"div",20),re(38,"img",21),w()()()(),x(39,"section",22)(40,"div",1)(41,"div",2)(42,"div",23)(43,"div",24)(44,"p",25),E(45,"Pixtar, a leading web development agency, partnered with D'NOUR, a Dubai-based jewellery brand that stands as a beacon for women empowerment. D'NOUR's creations, inspired by the elegance of the Rose, embody powerful storytelling, exquisite craftsmanship, and a profound message of appreciation, empowerment, and celebration of women."),w(),x(46,"p",26),E(47,"Pixtar took on the challenge of establishing D'NOUR's online presence in the highly competitive E-commerce jewellery market, focusing specifically on the UAE and USA. The industry was saturated with top-notch brands, making organic SEO a complex undertaking for a newly designed and developed website."),w()()()()()(),x(48,"section",27)(49,"div",1)(50,"div",2)(51,"div",3)(52,"div",2)(53,"div",28)(54,"div",24)(55,"h1",29),E(56,"Branding"),w(),x(57,"p",25),E(58,"Pixtar crafted a distinctive logo, premium quality visiting cards, invoice covers, and other corporate branding materials. The visual identity aimed to reflect D'NOUR's commitment to celebrating and empowering women."),w()()()()(),x(59,"div",20)(60,"div",30),re(61,"img",31),w()(),x(62,"div",32)(63,"div",2)(64,"div",33),re(65,"img",31),w(),x(66,"div",34)(67,"div",35),re(68,"img",36)(69,"img",37),w()()()()()()(),x(70,"section",38)(71,"div",1)(72,"div",2)(73,"div",3)(74,"div",39)(75,"div",40)(76,"div",41)(77,"h1",42),E(78,"Brand Story"),w(),x(79,"p",25),E(80,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),w()()()(),x(81,"div",2)(82,"div",43)(83,"div",44)(84,"video",45),re(85,"source",46)(86,"source",47),E(87," Your browser does not support the video tag. "),w()()(),x(88,"div",48)(89,"div",49)(90,"h3",50),E(91,"ABOUT WOMEN:"),w(),x(92,"p",51),E(93,"D'NOUR is fueled by the spectrum of emotions and the diverse stories that women carry with them."),w(),x(94,"h3",52),E(95,"FOR WOMEN:"),w(),x(96,"p",53),E(97,"The vision, the jewellery, and the steps towards change - all crafted with women in mind, inspired by their strength and individuality."),w(),x(98,"h3",54),E(99,"TO WOMEN:"),w(),x(100,"p",55),E(101,"D'NOUR is committed to pushing the paradigm, empowering, celebrating, and giving back to women through their timeless and meaningful jewellery pieces."),w()()()()()()()(),x(102,"section",56)(103,"div",1)(104,"div",2)(105,"div",3)(106,"div",57),re(107,"img",58),x(108,"p",59),E(109,"Pixtar curated a distinctive visual identity by meticulously choosing fonts and color combinations. The selected font reflected elegance and modernity, complementing D'NOUR's commitment to timeless beauty. The color palette incorporated soft rose hues, symbolizing the brand's inspiration, and gold accents, signifying luxury and sophistication."),w()()()()()(),x(110,"section",60)(111,"div",1)(112,"div",2)(113,"div",3)(114,"div",39)(115,"div",28)(116,"div",24)(117,"h1",42),E(118,"Package Design"),w(),x(119,"p",25),E(120,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),w()()()(),x(121,"div",2)(122,"div",61),re(123,"img",62),w(),x(124,"div",63),re(125,"img",64),w(),x(126,"div",63),re(127,"img",65),w()()()()()(),x(128,"section",66)(129,"div",1)(130,"div",2)(131,"div",23)(132,"div",39)(133,"div",40)(134,"div",24)(135,"h1",6),E(136,"Animations"),w(),x(137,"p",67),E(138,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),w()()()(),x(139,"div",2)(140,"div",68)(141,"video",69),re(142,"source",70)(143,"source",71),E(144," Your browser does not support HTML5 video. "),w()()()()()()(),x(145,"section",72)(146,"div",1)(147,"div",2)(148,"div",3)(149,"div",39)(150,"div",28)(151,"div",24)(152,"h1",73),E(153,"UI/UX Design"),w(),x(154,"p",67),E(155,"Created an engaging and user-centric interface for the D'NOUR website, ensuring a seamless and visually appealing user experience that resonated with the brand's ethos."),w()()()(),x(156,"div",2)(157,"div",74)(158,"video",75),re(159,"source",70)(160,"source",71),E(161," Your browser does not support HTML5 video. "),w(),x(162,"video",76),re(163,"source",70)(164,"source",71),E(165," Your browser does not support HTML5 video. "),w()()()()()()(),x(166,"section",77)(167,"div",1)(168,"div",2)(169,"div",3)(170,"div",39)(171,"div",28)(172,"div",24)(173,"h1",73),E(174,"Development"),w(),x(175,"p",67),E(176,"Developed the website using Magento, incorporating advanced features to showcase D'NOUR's exquisite jewellery collections. Security measures were implemented to safeguard user data and transactions."),w()()()()()()(),x(177,"div",78)(178,"video",79),re(179,"source",70)(180,"source",71),E(181," Your browser does not support HTML5 video. "),w(),x(182,"div",80)(183,"owl-carousel-o",81),at(184,zfe,2,1,"ng-container",82),w()(),x(185,"div",83)(186,"owl-carousel-o",81),at(187,Vfe,2,1,"ng-container",82),w()(),x(188,"div",84)(189,"owl-carousel-o",85),at(190,Wfe,2,1,"ng-container",82),w()()()(),x(191,"section",86)(192,"div",1)(193,"div",2)(194,"div",3)(195,"div",39)(196,"div",28)(197,"div",24)(198,"h1",6),E(199,"SEO"),w(),x(200,"p",67),E(201,"Formulated a targeted organic SEO strategy tailored to the unique challenges of the E-commerce jewellery industry. Focused on optimizing the website for local search in the UAE and USA, leveraging keywords that aligned with D'NOUR's brand identity and unique selling propositions."),w()()()(),x(202,"video",87),re(203,"source",70)(204,"source",71),E(205," Your browser does not support HTML5 video. "),w(),x(206,"p"),E(207,"Pixtar's holistic approach, encompassing branding, design, development, and a targeted organic SEO strategy, yielded positive outcomes. D'NOUR's online presence in the UAE and USA flourished, gaining visibility among its target audience despite the formidable competition. The case study serves as a testament to Pixtar's expertise in navigating challenges and helping a brand like D'NOUR shine in a crowded digital landscape."),w()()()()(),x(208,"section",88)(209,"div",89)(210,"div",2)(211,"div",61)(212,"div",90)(213,"div",91)(214,"a",92),re(215,"img",93),x(216,"h1",94),E(217,"NEXT PROJECT"),w()()()()()(),re(218,"div",95),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/dnour#branding",Ce),se(3),Se("href","",i.Url,"/project-details/dnour#animations",Ce),se(3),Se("href","",i.Url,"/project-details/dnour#ui-ux",Ce),se(3),Se("href","",i.Url,"/project-details/dnour#development",Ce),se(3),Se("href","",i.Url,"/project-details/dnour#seo",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/dnour/pages-banner.png",Ce),se(23),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-project1.jpg",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/dnour/bcard.png",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/dnour/packaging.png",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/envelop.png",Ce),se(38),Se("src","",i.baseUrl,"/images/projects/dnour/typography.png",Ce),se(16),Se("src","",i.baseUrl,"/images/projects/dnour/packaging.png",Ce),se(2),Se("src","",i.baseUrl,"/images/projects/dnour/box.png",Ce),se(2),Se("src","",i.baseUrl,"/images/projects/dnour/package-envelop.png",Ce),se(15),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-brand-logo-animation.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-brand-logo-animation.ogg",Ce),se(16),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-desktop-imac-scroll.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-desktop-imac-scroll.ogg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/dnour/laptop-scroll.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/laptop-scroll.ogg",Ce),se(15),Se("src","",i.baseUrl,"/images/projects/dnour/homescreen.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/homescreen.ogg",Ce),se(3),Je("options",i.desktopslider),se(1),Je("ngForOf",i.imageData),se(2),Je("options",i.desktopslider1),se(1),Je("ngForOf",i.imageData),se(2),Je("options",i.desktopslider2),se(1),Je("ngForOf",i.imageData),se(13),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-seo.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/dnour-seo.ogg",Ce),se(10),Se("href","",i.Url,"/project-details/pakhis",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/pakhis/pixtar-next.png",Ce))},dependencies:[ja,ta,ph,Rc],styles:["section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.bannerimg[_ngcontent-%COMP%]{text-align:center;margin-top:6rem}.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:590px;height:770px}@media (max-width: 1399px){.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}@media (max-width: 575px){.bannerimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}}section.project[_ngcontent-%COMP%]{min-height:100vh;height:100%}@media (max-width: 991px){section.project[_ngcontent-%COMP%]{min-height:90vh}}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:end;height:90%}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:relative;right:-6rem;color:#101010;font-family:Montserrat,sans-serif;font-size:106px;font-weight:500}@media (max-width: 1366px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{right:0}}@media (max-width: 767px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 600px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;right:-1rem;color:#878787;font-family:Montserrat,sans-serif;font-size:24px}@media (max-width: 1366px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{right:0}}@media (max-width: 767px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){section.project[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:block}}.brand-detail[_ngcontent-%COMP%]   .startdate[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:50px 0}@media (max-width: 991px){.brand-detail[_ngcontent-%COMP%]   .startdate[_ngcontent-%COMP%]{padding:0;border-bottom:none}}.brand-detail[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000;width:80%}@media (max-width: 991px){.brand-detail[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{margin-top:30px}}.brand-detail[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .brand-detail[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10rem}.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:675px;object-fit:cover}@media (max-width: 1024px){.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}}@media (max-width: 991px){.begins[_ngcontent-%COMP%]   .websketch[_ngcontent-%COMP%]{margin-top:5rem}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.about-project[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.font-bold[_ngcontent-%COMP%]{font-weight:700!important}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.about-story[_ngcontent-%COMP%]{margin-top:20px}.about-story[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.package[_ngcontent-%COMP%]   .img1[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 767px){.package[_ngcontent-%COMP%]   .img1[_ngcontent-%COMP%]{margin-bottom:15px}}.package[_ngcontent-%COMP%]   .img2[_ngcontent-%COMP%]{margin-bottom:15px}.animation[_ngcontent-%COMP%]{padding:80px 0}.seo[_ngcontent-%COMP%]{margin:10px 0 50px}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:50px}@media (max-width: 991px){#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:30px}}@media (max-width: 575px){#myVideo[_ngcontent-%COMP%], #myVideo1[_ngcontent-%COMP%]{border-radius:20px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}"]}),e})();m(8548);var lc=m(3753),jU=m(8723),VU=m(1946),Ew=(m(7274),m(1746)),Xfe=m(2334),Bs=m(7625),wA=(m(5778),m(7168));Math,Math,Math;const oge=["*"],wge=["dialog"];function NA(e){return"string"==typeof e}function Tm(e){return null!=e}function Y0(e){return(e||document.body).getBoundingClientRect()}const s7={animation:!0,transitionTimerDelayMs:5},v0e=()=>{},{transitionTimerDelayMs:y0e}=s7,_b=new Map,hl=(e,t,n,i)=>{let r=i.context||{};const o=_b.get(t);if(o)switch(i.runningTransition){case"continue":return R0.E;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),_b.delete(t)}const s=n(t,i.animation,r)||v0e;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>s()),(0,$n.of)(void 0).pipe(function m0e(e){return t=>new D.y(n=>t.subscribe({next:s=>e.run(()=>n.next(s)),error:s=>e.run(()=>n.error(s)),complete:()=>e.run(()=>n.complete())}))}(e));const a=new _.xQ,l=new _.xQ,c=a.pipe((0,Xfe.l)(!0));_b.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const d=function g0e(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const h=(0,lc.R)(t,"transitionend").pipe((0,Bs.R)(c),(0,ba.h)(({target:g})=>g===t)),p=(0,jU.H)(d+y0e).pipe((0,Bs.R)(c));(0,VU.S3)(p,h,l).pipe((0,Bs.R)(c)).subscribe(()=>{_b.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let Rw=(()=>{class e{constructor(){this.animation=s7.animation}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),u7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),p7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),g7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),v7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();var zs=(()=>{return(e=zs||(zs={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",zs;var e})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const b7=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function _7(e){const t=Array.from(e.querySelectorAll(b7)).filter(n=>-1!==n.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let E7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl,e9]}),e})(),VA=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Et({type:e,selectors:[["",8,"navbar"]]}),e})(),T7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();class Nm{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}}let ave=(()=>{class e{constructor(n,i){this._el=n,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ga.q)(1)).subscribe(()=>{hl(this._zone,this._el.nativeElement,(n,i)=>{i&&Y0(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return hl(this._zone,this._el.nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(n){return new(n||e)(Oe(Rr),Oe(Tr))},e.\u0275cmp=oi({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){2&n&&(Ip("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Xo("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,i){},encapsulation:2}),e})();class Su{close(t){}dismiss(t){}}class lve{constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new _.xQ,this._dismissed=new _.xQ,this._hidden=new _.xQ,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Bs.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Bs.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function o7(e){return e&&e.then}(n)?!1!==n&&this._dismiss(t):n.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,$n.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),(0,Ew.$R)(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var ul=(()=>{return(e=ul||(ul={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",ul;var e})();let cve=(()=>{class e{constructor(n,i,r){this._document=n,this._elRef=i,this._zone=r,this._closed$=new _.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ai,this.shown=new _.xQ,this.hidden=new _.xQ}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":NA(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ga.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=hl(this._zone,n,()=>n.classList.remove("show"),i),o=hl(this._zone,this._dialogEl.nativeElement,()=>{},i),s=(0,Ew.$R)(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const n={animation:this.animation,runningTransition:"continue"},i=hl(this._zone,this._elRef.nativeElement,(o,s)=>{s&&Y0(o),o.classList.add("show")},n),r=hl(this._zone,this._dialogEl.nativeElement,()=>{},n);(0,Ew.$R)(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{(0,lc.R)(n,"keydown").pipe((0,Bs.R)(this._closed$),(0,ba.h)(r=>r.which===zs.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(ul.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;(0,lc.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,Bs.R)(this._closed$),(0,Hi.b)(()=>i=!1),(0,_a.w)(()=>(0,lc.R)(n,"mouseup").pipe((0,Bs.R)(this._closed$),(0,Ga.q)(1))),(0,ba.h)(({target:r})=>n===r)).subscribe(()=>{i=!0}),(0,lc.R)(n,"click").pipe((0,Bs.R)(this._closed$)).subscribe(({target:r})=>{n===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(ul.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){const i=n.querySelector("[ngbAutofocus]"),r=_7(n)[0];(i||r||n).focus()}}_restoreFocus(){const n=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&n.contains(i)?i:n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&hl(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(n){return new(n||e)(Oe(po),Oe(Rr),Oe(Tr))},e.\u0275cmp=oi({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(1&n&&Rp(wge,7),2&n){let r;Ur(r=jr())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){2&n&&(Zr("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Ip("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Xo("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:oge,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(n,i){1&n&&(function TF(e){const t=Ut()[16][6];if(!t.projection){const i=t.projection=ry(e?e.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=e?Pne(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}(),x(0,"div",0,1)(2,"div",2),function IF(e,t=0,n){const i=Ut(),r=In(),o=h0(r,22+e,16,null,n||null);null===o.projection&&(o.projection=t),La(),64!=(64&o.flags)&&function LJ(e,t,n){KN(t[11],0,t,n,VN(e,n,t),qN(n.parent||t[6],n,t))}(r,i,o)}(3),w()()),2&n&&Ip("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),dve=(()=>{class e{constructor(n){this._document=n}hide(){const n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(n>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=s),r.overflow=o}}}return e.\u0275fac=function(n){return new(n||e)(Gt(po))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hve=(()=>{class e{constructor(n,i,r,o,s,a){this._applicationRef=n,this._injector=i,this._document=r,this._scrollBar=o,this._rendererFactory=s,this._ngZone=a,this._activeWindowCmptHasChanged=new _.xQ,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Ai,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=(0,lc.R)(t,"focusin").pipe((0,Bs.R)(n),(0,Ti.U)(o=>o.target));(0,lc.R)(t,"keydown").pipe((0,Bs.R)(n),(0,ba.h)(o=>o.which===zs.Tab),(0,wA.M)(r)).subscribe(([o,s])=>{const[a,l]=_7(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&(0,lc.R)(t,"click").pipe((0,Bs.R)(n),(0,wA.M)(r),(0,Ti.U)(o=>o[1])).subscribe(o=>o.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}_restoreScrollBar(){const n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){const o=r.container instanceof HTMLElement?r.container:Tm(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new Su,l=this._getContentRef(r.injector||n,i,a,r);let c=!1!==r.backdrop?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,l.nodes),h=new lve(d,l,c,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe((0,Ga.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=p=>{h.close(p)},a.dismiss=p=>{h.dismiss(p)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),c&&c.instance&&(this._applyBackdropOptions(c.instance,r),c.changeDetectorRef.detectChanges()),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=_E(ave,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=_E(cve,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_applyWindowOptions(n,i){this._windowAttributes.forEach(r=>{Tm(i[r])&&(n[r]=i[r])})}_applyBackdropOptions(n,i){this._backdropAttributes.forEach(r=>{Tm(i[r])&&(n[r]=i[r])})}_getContentRef(n,i,r,o){return i?i instanceof zo?this._createFromTemplateRef(i,r):NA(i)?this._createFromString(i):this._createFromComponent(n,i,r,o):new Nm([])}_createFromTemplateRef(n,i){const o=n.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Nm([o.rootNodes],o)}_createFromString(n){const i=this._document.createTextNode(`${n}`);return new Nm([[i]])}_createFromComponent(n,i,r,o){const s=ks.create({providers:[{provide:Su,useValue:r}],parent:n}),a=_E(i,{environmentInjector:this._applicationRef.injector,elementInjector:s}),l=a.location.nativeElement;return o.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Nm([[l]],a.hostView,a)}_setAriaHidden(n){const i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){const i=()=>{const r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{const i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(n){return new(n||e)(Gt(fm),Gt(ks),Gt(po),Gt(dve),Gt(c0),Gt(Tr))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),uve=(()=>{class e{constructor(n){this._ngbConfig=n,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(n){this._animation=n}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rw))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fm=(()=>{class e{constructor(n,i,r){this._injector=n,this._modalStack=i,this._config=r}open(n,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(n){return new(n||e)(Gt(ks),Gt(hve),Gt(uve))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),I7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({providers:[Fm]}),e})(),F7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),G7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),q7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),Y7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),X7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),$7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),Q7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),K7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();new Kn("live announcer delay",{providedIn:"root",factory:function Pve(){return 100}});let Z7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[cl]}),e})(),J7=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({}),e})();const Sve=[u7,p7,g7,v7,E7,T7,I7,F7,J7,G7,q7,Y7,X7,$7,Q7,K7,Z7];let Ove=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[Sve,u7,p7,g7,v7,E7,T7,I7,F7,J7,G7,q7,Y7,X7,$7,Q7,K7,Z7]}),e})();var Qn=m(5861),Eve=Object.create,Vw=Object.defineProperty,Dve=Object.getOwnPropertyDescriptor,Ave=Object.getOwnPropertyNames,Tve=Object.getPrototypeOf,Ive=Object.prototype.hasOwnProperty,Ou=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Eu=(e,t,n)=>(n=null!=e?Eve(Tve(e)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of Ave(t))!Ive.call(e,r)&&undefined!==r&&Vw(e,r,{get:()=>t[r],enumerable:!(i=Dve(t,r))||i.enumerable});return e})(!t&&e&&e.__esModule?n:Vw(n,"default",{value:e,enumerable:!0}),e)),Lm=(e,t,n)=>(((e,t,n)=>{t in e?Vw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Fve=Ou((e,t)=>{var n,i;n=e,i=function(){return n.importState=function(r){var o=new n;return o.importState(r),o},n;function n(){return function(r){var o=0,s=0,a=0,l=1;0==r.length&&(r=[+new Date]);var c=i();o=c(" "),s=c(" "),a=c(" ");for(var d=0;d<r.length;d++)(o-=c(r[d]))<0&&(o+=1),(s-=c(r[d]))<0&&(s+=1),(a-=c(r[d]))<0&&(a+=1);c=null;var h=function(){var p=2091639*o+2.3283064365386963e-10*l;return o=s,s=a,a=p-(l=0|p)};return h.next=h,h.uint32=function(){return 4294967296*h()},h.fract53=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.version="Alea 0.9",h.args=r,h.exportState=function(){return[o,s,a,l]},h.importState=function(p){o=+p[0]||0,s=+p[1]||0,a=+p[2]||0,l=+p[3]||0},h}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,o=function(s){s=s.toString();for(var a=0;a<s.length;a++){var l=.02519603282416938*(r+=s.charCodeAt(a));l-=r=l>>>0,r=(l*=r)>>>0,r+=4294967296*(l-=r)}return 2.3283064365386963e-10*(r>>>0)};return o.version="Mash 0.9",o}},"object"==typeof e?t.exports=i():"function"==typeof define&&define.amd?define(i):n.Alea=i()}),ej=Ou((e,t)=>{var n,i;n=e,i=function(n){n.SVD=function(i,r,o,s,a){if(r=void 0===r||r,o=void 0===o||o,a=1e-64/(s=s||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,d,h,p,g,v,y,b,P,S,O,A=i[0].length,H=i.length;if(H<A)throw new TypeError("Invalid matrix: m < n");for(var U=[],X=[],Y=[],Z="f"===r?H:A,ee=P=v=0;ee<H;ee++)X[ee]=new Array(Z).fill(0);for(ee=0;ee<A;ee++)Y[ee]=new Array(A).fill(0);var oe,ce=new Array(A).fill(0);for(ee=0;ee<H;ee++)for(l=0;l<A;l++)X[ee][l]=i[ee][l];for(ee=0;ee<A;ee++){for(U[ee]=v,b=0,d=ee+1,l=ee;l<H;l++)b+=Math.pow(X[l][ee],2);if(b<a)v=0;else for(y=(g=X[ee][ee])*(v=g<0?Math.sqrt(b):-Math.sqrt(b))-b,X[ee][ee]=g-v,l=d;l<A;l++){for(b=0,c=ee;c<H;c++)b+=X[c][ee]*X[c][l];for(g=b/y,c=ee;c<H;c++)X[c][l]=X[c][l]+g*X[c][ee]}for(ce[ee]=v,b=0,l=d;l<A;l++)b+=Math.pow(X[ee][l],2);if(b<a)v=0;else{for(y=(g=X[ee][ee+1])*(v=g<0?Math.sqrt(b):-Math.sqrt(b))-b,X[ee][ee+1]=g-v,l=d;l<A;l++)U[l]=X[ee][l]/y;for(l=d;l<H;l++){for(b=0,c=d;c<A;c++)b+=X[l][c]*X[ee][c];for(c=d;c<A;c++)X[l][c]=X[l][c]+b*U[c]}}P<(S=Math.abs(ce[ee])+Math.abs(U[ee]))&&(P=S)}if(o)for(ee=A-1;0<=ee;ee--){if(0!==v){for(y=X[ee][ee+1]*v,l=d;l<A;l++)Y[l][ee]=X[ee][l]/y;for(l=d;l<A;l++){for(b=0,c=d;c<A;c++)b+=X[ee][c]*Y[c][l];for(c=d;c<A;c++)Y[c][l]=Y[c][l]+b*Y[c][ee]}}for(l=d;l<A;l++)Y[ee][l]=0,Y[l][ee]=0;Y[ee][ee]=1,v=U[ee],d=ee}if(r){if("f"===r)for(ee=A;ee<H;ee++){for(l=A;l<H;l++)X[ee][l]=0;X[ee][ee]=1}for(ee=A-1;0<=ee;ee--){for(v=ce[ee],l=d=ee+1;l<Z;l++)X[ee][l]=0;if(0!==v){for(y=X[ee][ee]*v,l=d;l<Z;l++){for(b=0,c=d;c<H;c++)b+=X[c][ee]*X[c][l];for(g=b/y,c=ee;c<H;c++)X[c][l]=X[c][l]+g*X[c][ee]}for(l=ee;l<H;l++)X[l][ee]=X[l][ee]/v}else for(l=ee;l<H;l++)X[l][ee]=0;X[ee][ee]=X[ee][ee]+1}}for(s*=P,c=A-1;0<=c;c--)for(var de=0;de<50;de++){for(oe=!1,d=c;0<=d;d--){if(Math.abs(U[d])<=s){oe=!0;break}if(Math.abs(ce[d-1])<=s)break}if(!oe)for(p=0,h=d-(b=1),ee=d;ee<c+1&&(g=b*U[ee],U[ee]=p*U[ee],!(Math.abs(g)<=s));ee++)if(v=ce[ee],ce[ee]=Math.sqrt(g*g+v*v),p=v/(y=ce[ee]),b=-g/y,r)for(l=0;l<H;l++)X[l][h]=(S=X[l][h])*p+(O=X[l][ee])*b,X[l][ee]=-S*b+O*p;if(O=ce[c],d===c){if(O<0&&(ce[c]=-O,o))for(l=0;l<A;l++)Y[l][c]=-Y[l][c];break}for(P=ce[d],g=(((S=ce[c-1])-O)*(S+O)+((v=U[c-1])-(y=U[c]))*(v+y))/(2*y*S),v=Math.sqrt(g*g+1),g=((P-O)*(P+O)+y*(S/(g<0?g-v:g+v)-y))/P,ee=d+(b=p=1);ee<c+1;ee++){if(S=ce[ee],y=b*(v=U[ee]),v*=p,O=Math.sqrt(g*g+y*y),g=P*(p=g/(U[ee-1]=O))+v*(b=y/O),v=-P*b+v*p,y=S*b,S*=p,o)for(l=0;l<A;l++)Y[l][ee-1]=(P=Y[l][ee-1])*p+(O=Y[l][ee])*b,Y[l][ee]=-P*b+O*p;if(O=Math.sqrt(g*g+y*y),g=(p=g/(ce[ee-1]=O))*v+(b=y/O)*S,P=-b*v+p*S,r)for(l=0;l<H;l++)X[l][ee-1]=(S=X[l][ee-1])*p+(O=X[l][ee])*b,X[l][ee]=-S*b+O*p}U[d]=0,U[c]=g,ce[c]=P}for(ee=0;ee<A;ee++)ce[ee]<s&&(ce[ee]=0);return{u:X,q:ce,v:Y}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof e&&typeof t<"u"?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})}),Lve=Ou((e,t)=>{var n,i;n=e,i=function(){var n=function(r,o){if(void 0===r&&(r=[]),void 0===o&&(o=i),this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function i(r,o){return r<o?-1:r>o?1:0}return n.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},n.prototype.pop=function(){if(0!==this.length){var r=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),r}},n.prototype.peek=function(){return this.data[0]},n.prototype._up=function(r){for(var s=this.data,a=this.compare,l=s[r];r>0;){var c=r-1>>1,d=s[c];if(a(l,d)>=0)break;s[r]=d,r=c}s[r]=l},n.prototype._down=function(r){for(var s=this.data,a=this.compare,l=this.length>>1,c=s[r];r<l;){var d=1+(r<<1),h=s[d],p=d+1;if(p<this.length&&a(s[p],h)<0&&(d=p,h=s[p]),a(h,c)>=0)break;s[r]=h,r=d}s[r]=c},n},"object"==typeof e&&typeof t<"u"?t.exports=i():"function"==typeof define&&define.amd?define(i):(n=n||self).TinyQueue=i()}),Bve=Ou((e,t)=>{var n=Lve();function i(c,d,h){d=d||1;for(var p,g,v,y,b=0;b<c[0].length;b++){var P=c[0][b];(!b||P[0]<p)&&(p=P[0]),(!b||P[1]<g)&&(g=P[1]),(!b||P[0]>v)&&(v=P[0]),(!b||P[1]>y)&&(y=P[1])}var S=v-p,O=y-g,A=Math.min(S,O),H=A/2;if(0===A){var U=[p,g];return U.distance=0,U}for(var X=new n(void 0,r),Y=p;Y<v;Y+=A)for(var Z=g;Z<y;Z+=A)X.push(new o(Y+H,Z+H,H,c));var ee=function a(c){for(var d=0,h=0,p=0,g=c[0],v=0,y=g.length,b=y-1;v<y;b=v++){var P=g[v],S=g[b],O=P[0]*S[1]-S[0]*P[1];h+=(P[0]+S[0])*O,p+=(P[1]+S[1])*O,d+=3*O}return 0===d?new o(g[0][0],g[0][1],0,c):new o(h/d,p/d,0,c)}(c),oe=new o(p+S/2,g+O/2,0,c);oe.d>ee.d&&(ee=oe);for(var ce=X.length;X.length;){var de=X.pop();de.d>ee.d&&(ee=de,h&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,ce)),!(de.max-ee.d<=d)&&(X.push(new o(de.x-(H=de.h/2),de.y-H,H,c)),X.push(new o(de.x+H,de.y-H,H,c)),X.push(new o(de.x-H,de.y+H,H,c)),X.push(new o(de.x+H,de.y+H,H,c)),ce+=4)}h&&(console.log("num probes: "+ce),console.log("best distance: "+ee.d));var he=[ee.x,ee.y];return he.distance=ee.d,he}function r(c,d){return d.max-c.max}function o(c,d,h,p){this.x=c,this.y=d,this.h=h,this.d=function s(c,d,h){for(var p=!1,g=1/0,v=0;v<h.length;v++)for(var y=h[v],b=0,P=y.length,S=P-1;b<P;S=b++){var O=y[b],A=y[S];O[1]>d!=A[1]>d&&c<(A[0]-O[0])*(d-O[1])/(A[1]-O[1])+O[0]&&(p=!p),g=Math.min(g,l(c,d,O,A))}return 0===g?0:(p?1:-1)*Math.sqrt(g)}(c,d,p),this.max=this.d+this.h*Math.SQRT2}function l(c,d,h,p){var g=h[0],v=h[1],y=p[0]-g,b=p[1]-v;if(0!==y||0!==b){var P=((c-g)*y+(d-v)*b)/(y*y+b*b);P>1?(g=p[0],v=p[1]):P>0&&(g+=y*P,v+=b*P)}return(y=c-g)*y+(b=d-v)*b}n.default&&(n=n.default),t.exports=i,t.exports.default=i}),zve=Ou((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(i){if(null===i||!0===i||!1===i)return NaN;var r=Number(i);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)},t.exports=e.default}),Uve=Ou((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function n(i){var r=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return r.setUTCFullYear(i.getFullYear()),i.getTime()-r.getTime()},t.exports=e.default}),jve=Ou((e,t)=>{function i(o,s,a,l){this.message=o,this.expected=s,this.found=a,this.location=l,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)}(function n(o,s){function a(){this.constructor=o}a.prototype=s.prototype,o.prototype=new a})(i,Error),i.buildMessage=function(o,s){var a={literal:function(v){return'"'+c(v.text)+'"'},class:function(v){var b,y="";for(b=0;b<v.parts.length;b++)y+=v.parts[b]instanceof Array?d(v.parts[b][0])+"-"+d(v.parts[b][1]):d(v.parts[b]);return"["+(v.inverted?"^":"")+y+"]"},any:function(v){return"any character"},end:function(v){return"end of input"},other:function(v){return v.description}};function l(v){return v.charCodeAt(0).toString(16).toUpperCase()}function c(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function d(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+l(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+l(y)})}function h(v){return a[v.type](v)}return"Expected "+function p(v){var b,P,y=new Array(v.length);for(b=0;b<v.length;b++)y[b]=h(v[b]);if(y.sort(),y.length>0){for(b=1,P=1;b<y.length;b++)y[b-1]!==y[b]&&(y[P]=y[b],P++);y.length=P}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(o)+" but "+function g(v){return v?'"'+c(v)+'"':"end of input"}(s)+" found."},t.exports={SyntaxError:i,parse:function r(o,s){s=void 0!==s?s:{};var Hn,a={},l={svg_path:Qh},c=Qh,h=function(ue,xe){return function Q4(ue,xe){if(!xe)return[ue];for(var We=[ue],Ee=0,tt=xe.length;Ee<tt;Ee++)We[Ee+1]=xe[Ee][1];return We}(ue,xe)},p=/^[Mm]/,g=hr(["M","m"],!1,!1),y=/^[Zz]/,b=hr(["Z","z"],!1,!1),S=/^[Ll]/,O=hr(["L","l"],!1,!1),A=function(ue,xe){return B1(ue,xe)},H=/^[Hh]/,U=hr(["H","h"],!1,!1),Y=/^[Vv]/,Z=hr(["V","v"],!1,!1),oe=/^[Cc]/,ce=hr(["C","c"],!1,!1),he=/^[Ss]/,Pe=hr(["S","s"],!1,!1),_e=/^[Qq]/,ve=hr(["Q","q"],!1,!1),ze=/^[Tt]/,Le=hr(["T","t"],!1,!1),Ne=/^[Aa]/,$e=hr(["A","a"],!1,!1),Ze=/^[01]/,yt=hr(["0","1"],!1,!1),Ot=Xr(",",!1),vn=function(ue){return ue.join("")},xn=Xr(".",!1),Dn=/^[eE]/,ln=hr(["e","E"],!1,!1),sn=/^[+\-]/,Vn=hr(["+","-"],!1,!1),ti=/^[0-9]/,Te=hr([["0","9"]],!1,!1),ct=/^[ \t\n\r]/,Xt=hr([" ","\t","\n","\r"],!1,!1),fe=0,Bn=[{line:1,column:1}],pn=0,Ht=[];if("startRule"in s){if(!(s.startRule in l))throw new Error("Can't start parsing from rule \""+s.startRule+'".');c=l[s.startRule]}function Xr(ue,xe){return{type:"literal",text:ue,ignoreCase:xe}}function hr(ue,xe,We){return{type:"class",parts:ue,inverted:xe,ignoreCase:We}}function hn(ue){var We,xe=Bn[ue];if(xe)return xe;for(We=ue-1;!Bn[We];)We--;for(xe={line:(xe=Bn[We]).line,column:xe.column};We<ue;)10===o.charCodeAt(We)?(xe.line++,xe.column=1):xe.column++,We++;return Bn[ue]=xe,xe}function di(ue){fe<pn||(fe>pn&&(pn=fe,Ht=[]),Ht.push(ue))}function Qh(){var ue,xe,We,Ee,tt;for(ue=fe,xe=[],We=er();We!==a;)xe.push(We),We=er();if(xe!==a)if(We=function Po(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=vc())!==a){for(We=[],Ee=fe,tt=[],en=er();en!==a;)tt.push(en),en=er();for(tt!==a&&(en=vc())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;){for(We.push(Ee),Ee=fe,tt=[],en=er();en!==a;)tt.push(en),en=er();tt!==a&&(en=vc())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a)}We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),We===a&&(We=null),We!==a){for(Ee=[],tt=er();tt!==a;)Ee.push(tt),tt=er();Ee!==a?(xe=function(ue){if(!ue)return[];for(var xe=[],We=0;We<ue.length;We++)xe=xe.concat.apply(xe,ue[We]);var Ee=xe[0];return Ee&&"m"==Ee.code&&(delete Ee.relative,Ee.code="M"),xe}(We),ue=xe):(fe=ue,ue=a)}else fe=ue,ue=a;else fe=ue,ue=a;return ue}function vc(){var ue,xe,We,Ee,tt,en;if(ue=fe,xe=function lS(){var ue,xe,We,Ee,tt,en,z1;if(ue=fe,p.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(g)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a&&(Ee=xi())!==a?(tt=fe,(en=so())===a&&(en=null),en!==a&&(z1=cS())!==a?tt=en=[en,z1]:(fe=tt,tt=a),tt===a&&(tt=null),tt!==a?(xe=function(ue,xe,We){var Ee=B1(ue,[xe]);return We&&(Ee=Ee.concat(B1("M"==ue?"L":"l",We[1]))),Ee}(xe,Ee,tt),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),xe!==a){for(We=[],Ee=fe,tt=[],en=er();en!==a;)tt.push(en),en=er();for(tt!==a&&(en=Pl())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;){for(We.push(Ee),Ee=fe,tt=[],en=er();en!==a;)tt.push(en),en=er();tt!==a&&(en=Pl())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a)}We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}function Pl(){var ue;return(ue=function X4(){var xe;return fe,y.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(b)),xe!==a&&(xe=B1("Z")),xe}())===a&&(ue=function $4(){var ue,xe,We,Ee;if(ue=fe,S.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(O)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a&&(Ee=cS())!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function Ae(){var ue,xe,We,Ee;if(ue=fe,H.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(U)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a&&(Ee=_t())!==a?(xe=function(ue,xe){return B1(ue,xe.map(function(We){return{x:We}}))}(xe,Ee),ue=xe):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function Ft(){var ue,xe,We,Ee;if(ue=fe,Y.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(Z)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a&&(Ee=_t())!==a?(xe=function(ue,xe){return B1(ue,xe.map(function(We){return{y:We}}))}(xe,Ee),ue=xe):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function ht(){var ue,xe,We,Ee;if(ue=fe,oe.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(ce)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a?(Ee=function Bt(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=qn())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=qn())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=qn())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),Ee!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function Fi(){var ue,xe,We,Ee;if(ue=fe,he.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(Pe)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a?(Ee=function Zi(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=Ji())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Ji())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Ji())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),Ee!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function $r(){var ue,xe,We,Ee;if(ue=fe,_e.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(ve)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a?(Ee=function _r(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=or())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=or())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=or())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),Ee!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function ga(){var ue,xe,We,Ee;if(ue=fe,ze.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(Le)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a?(Ee=function Sl(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=xi())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=xi())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=xi())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),Ee!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}())===a&&(ue=function Yd(){var ue,xe,We,Ee;if(ue=fe,Ne.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di($e)),xe!==a){for(We=[],Ee=er();Ee!==a;)We.push(Ee),Ee=er();We!==a?(Ee=function pp(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=Fo())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Fo())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Fo())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}(),Ee!==a?ue=xe=A(xe,Ee):(fe=ue,ue=a)):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}()),ue}function cS(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=xi())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=xi())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=xi())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}function _t(){var ue,xe,We,Ee,tt,en;if(ue=fe,(xe=Kh())!==a){for(We=[],Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Kh())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);Ee!==a;)We.push(Ee),Ee=fe,(tt=so())===a&&(tt=null),tt!==a&&(en=Kh())!==a?Ee=tt=[tt,en]:(fe=Ee,Ee=a);We!==a?ue=xe=h(xe,We):(fe=ue,ue=a)}else fe=ue,ue=a;return ue}function qn(){var ue,xe,We,Ee,tt,en;return ue=fe,(xe=xi())!==a?((We=so())===a&&(We=null),We!==a&&(Ee=xi())!==a?((tt=so())===a&&(tt=null),tt!==a&&(en=xi())!==a?(xe=function(ue,xe,We){return{x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:We.x,y:We.y}}(xe,Ee,en),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a)):(fe=ue,ue=a),ue}function Ji(){var ue,xe,We,Ee;return ue=fe,(xe=xi())!==a?((We=so())===a&&(We=null),We!==a&&(Ee=xi())!==a?(xe=function(ue,xe){return{x2:ue.x,y2:ue.y,x:xe.x,y:xe.y}}(xe,Ee),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a),ue}function or(){var ue,xe,We,Ee;return ue=fe,(xe=xi())!==a?((We=so())===a&&(We=null),We!==a&&(Ee=xi())!==a?(xe=function(ue,xe){return{x1:ue.x,y1:ue.y,x:xe.x,y:xe.y}}(xe,Ee),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a),ue}function Fo(){var ue,xe,We,Ee,tt,en,K4,dS,Z4,hS,J4;return ue=fe,(xe=F1())!==a?((We=so())===a&&(We=null),We!==a&&(Ee=F1())!==a?((tt=so())===a&&(tt=null),tt!==a&&(en=Kh())!==a&&so()!==a&&(K4=Zh())!==a?((dS=so())===a&&(dS=null),dS!==a&&(Z4=Zh())!==a?((hS=so())===a&&(hS=null),hS!==a&&(J4=xi())!==a?(xe=function(ue,xe,We,Ee,tt,en){return{rx:ue,ry:xe,xAxisRotation:We,largeArc:Ee,sweep:tt,x:en.x,y:en.y}}(xe,Ee,en,K4,Z4,J4),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a)):(fe=ue,ue=a)):(fe=ue,ue=a)):(fe=ue,ue=a),ue}function xi(){var ue,xe,We,Ee;return ue=fe,(xe=Kh())!==a?((We=so())===a&&(We=null),We!==a&&(Ee=Kh())!==a?(xe=function(ue,xe){return{x:ue,y:xe}}(xe,Ee),ue=xe):(fe=ue,ue=a)):(fe=ue,ue=a),ue}function F1(){var xe;return fe,(xe=L1())===a&&(xe=ms()),xe!==a&&(xe=function(ue){return 1*ue}(xe)),xe}function Kh(){var xe,We,Ee;return fe,xe=fe,(We=kg())===a&&(We=null),We!==a&&(Ee=L1())!==a?xe=We=[We,Ee]:(fe=xe,xe=a),xe===a&&(xe=fe,(We=kg())===a&&(We=null),We!==a&&(Ee=ms())!==a?xe=We=[We,Ee]:(fe=xe,xe=a)),xe!==a&&(xe=function(ue){return 1*ue.join("")}(xe)),xe}function Zh(){var xe;return fe,Ze.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(yt)),xe!==a&&(xe=function(ue){return"1"==ue}(xe)),xe}function so(){var ue,xe,We,Ee,tt;if(ue=fe,xe=[],(We=er())!==a)for(;We!==a;)xe.push(We),We=er();else xe=a;if(xe!==a)if((We=jf())===a&&(We=null),We!==a){for(Ee=[],tt=er();tt!==a;)Ee.push(tt),tt=er();Ee!==a?ue=xe=[xe,We,Ee]:(fe=ue,ue=a)}else fe=ue,ue=a;else fe=ue,ue=a;if(ue===a){if(ue=fe,xe=fe,(We=jf())!==a){for(Ee=[],tt=er();tt!==a;)Ee.push(tt),tt=er();Ee!==a?xe=We=[We,Ee]:(fe=xe,xe=a)}else fe=xe,xe=a;xe!==a&&(xe=""),ue=xe}return ue}function jf(){var ue;return 44===o.charCodeAt(fe)?(ue=",",fe++):(ue=a,di(Ot)),ue}function L1(){var xe,We,Ee;return fe,xe=fe,We=function Ks(){var xe,We,Ee,tt;return fe,xe=fe,(We=ms())===a&&(We=null),We!==a?(46===o.charCodeAt(fe)?(Ee=".",fe++):(Ee=a,di(xn)),Ee!==a&&(tt=ms())!==a?xe=We=[We,Ee,tt]:(fe=xe,xe=a)):(fe=xe,xe=a),xe===a&&(xe=fe,(We=ms())!==a?(46===o.charCodeAt(fe)?(Ee=".",fe++):(Ee=a,di(xn)),Ee!==a?xe=We=[We,Ee]:(fe=xe,xe=a)):(fe=xe,xe=a)),xe!==a&&(xe=vn(xe)),xe}(),We!==a?((Ee=Jh())===a&&(Ee=null),Ee!==a?xe=We=[We,Ee]:(fe=xe,xe=a)):(fe=xe,xe=a),xe===a&&(xe=fe,(We=ms())!==a&&(Ee=Jh())!==a?xe=We=[We,Ee]:(fe=xe,xe=a)),xe!==a&&(xe=vn(xe)),xe}function Jh(){var xe,We,Ee,tt;return fe,xe=fe,Dn.test(o.charAt(fe))?(We=o.charAt(fe),fe++):(We=a,di(ln)),We!==a?((Ee=kg())===a&&(Ee=null),Ee!==a&&(tt=ms())!==a?xe=We=[We,Ee,tt]:(fe=xe,xe=a)):(fe=xe,xe=a),xe!==a&&(xe=vn(xe)),xe}function kg(){var ue;return sn.test(o.charAt(fe))?(ue=o.charAt(fe),fe++):(ue=a,di(Vn)),ue}function ms(){var xe,We;if(fe,xe=[],ti.test(o.charAt(fe))?(We=o.charAt(fe),fe++):(We=a,di(Te)),We!==a)for(;We!==a;)xe.push(We),ti.test(o.charAt(fe))?(We=o.charAt(fe),fe++):(We=a,di(Te));else xe=a;return xe!==a&&(xe=function(ue){return ue.join("")}(xe)),xe}function er(){var xe;return fe,ct.test(o.charAt(fe))?(xe=o.charAt(fe),fe++):(xe=a,di(Xt)),xe!==a&&(xe=""),xe}var Rg={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var CZ in Rg)Rg[CZ.toUpperCase()]=Rg[CZ];function B1(ue,xe){xe||(xe=[{}]);for(var We=xe.length;We--;){var Ee={code:ue,command:Rg[ue]};for(var tt in ue==ue.toLowerCase()&&(Ee.relative=!0),xe[We])Ee[tt]=xe[We][tt];xe[We]=Ee}return xe}if((Hn=c())!==a&&fe===o.length)return Hn;throw Hn!==a&&fe<o.length&&di({type:"end"}),function Qs(ue,xe,We){return new i(i.buildMessage(ue,xe),ue,xe,We)}(Ht,pn<o.length?o.charAt(pn):null,function Zn(ue,xe){var We=hn(ue),Ee=hn(xe);return{start:{offset:ue,line:We.line,column:We.column},end:{offset:xe,line:Ee.line,column:Ee.column}}}(pn,pn<o.length?pn+1:pn))}}}),tj=Ou((e,t)=>{var n=jve().parse;n.parseSVG=n,n.makeAbsolute=function i(r){var o,s={x:0,y:0},a={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return r.forEach(function(l){for(var c in"moveto"===l.command&&(o=l),l.x0=s.x,l.y0=s.y,a)c in l&&(l[c]+=l.relative?l[a[c]]:0);"x"in l||(l.x=s.x),"y"in l||(l.y=s.y),l.relative=!1,l.code=l.code.toUpperCase(),"closepath"==l.command&&(l.x=o.x,l.y=o.y),s=l}),r},t.exports=n}),Vve=Ou((e,t)=>{t.exports=function(n,i){for(var r=n.split("."),o=i.split("."),s=0;s<3;s++){var a=Number(r[s]),l=Number(o[s]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),$0="149",Du=1e3,Ao=1001,Ir=1003,Ui=1006,K0=1008,qa=1009,Au=1014,Cs=1015,Tu=1016,jm=1020,ra=1023,Vm=1026,Hm=1027,Z0=2400,J0=2401,Pd=3e3,Ri=3001,Iu=3200,yh="srgb",Yw="srgb-linear",Ca=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let i=n.indexOf(t);-1!==i&&n.splice(i,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,e);e.target=null}}},Ya=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Vj=1234567,Sb=Math.PI/180,Ob=180/Math.PI;function Bc(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ya[255&e]+Ya[e>>8&255]+Ya[e>>16&255]+Ya[e>>24&255]+"-"+Ya[255&t]+Ya[t>>8&255]+"-"+Ya[t>>16&15|64]+Ya[t>>24&255]+"-"+Ya[63&n|128]+Ya[n>>8&255]+"-"+Ya[n>>16&255]+Ya[n>>24&255]+Ya[255&i]+Ya[i>>8&255]+Ya[i>>16&255]+Ya[i>>24&255]).toLowerCase()}function ws(e,t,n){return Math.max(t,Math.min(n,e))}function cT(e,t){return(e%t+t)%t}function Eb(e,t,n){return(1-n)*e+n*t}function dT(e){return 0==(e&e-1)&&0!==e}function Hj(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Xw(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ku(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function fo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var En=Object.freeze({__proto__:null,DEG2RAD:Sb,RAD2DEG:Ob,ceilPowerOfTwo:Hj,clamp:ws,damp:function z1e(e,t,n,i){return Eb(e,t,1-Math.exp(-n*i))},degToRad:function Y1e(e){return e*Sb},denormalize:ku,euclideanModulo:cT,floorPowerOfTwo:Xw,generateUUID:Bc,inverseLerp:function B1e(e,t,n){return e!==t?(n-e)/(t-e):0},isPowerOfTwo:dT,lerp:Eb,mapLinear:function L1e(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},normalize:fo,pingpong:function U1e(e,t=1){return t-Math.abs(cT(e,2*t)-t)},radToDeg:function X1e(e){return e*Ob},randFloat:function G1e(e,t){return e+Math.random()*(t-e)},randFloatSpread:function W1e(e){return e*(.5-Math.random())},randInt:function H1e(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function q1e(e){void 0!==e&&(Vj=e);let t=Vj+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function $1e(e,t,n,i,r){let o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+i)/2),d=s((t+i)/2),h=o((t-i)/2),p=s((t-i)/2),g=o((i-t)/2),v=s((i-t)/2);switch(r){case"XYX":e.set(a*d,l*h,l*p,a*c);break;case"YZY":e.set(l*p,a*d,l*h,a*c);break;case"ZXZ":e.set(l*h,l*p,a*d,a*c);break;case"XZX":e.set(a*d,l*v,l*g,a*c);break;case"YXY":e.set(l*g,a*d,l*v,a*c);break;case"ZYZ":e.set(l*v,l*g,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},smootherstep:function V1e(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},smoothstep:function j1e(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}}),Ue=class{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ms=class{constructor(){Ms.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,o,s,a,l){let c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],d=n[7],h=n[2],p=n[5],g=n[8],v=i[0],y=i[3],b=i[6],P=i[1],S=i[4],O=i[7],A=i[2],H=i[5],U=i[8];return r[0]=o*v+s*P+a*A,r[3]=o*y+s*S+a*H,r[6]=o*b+s*O+a*U,r[1]=l*v+c*P+d*A,r[4]=l*y+c*S+d*H,r[7]=l*b+c*O+d*U,r[2]=h*v+p*P+g*A,r[5]=h*y+p*S+g*H,r[8]=h*b+p*O+g*U,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*r*c+n*s*a+i*r*l-i*o*a}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],d=c*o-s*l,h=s*a-c*r,p=l*r-o*a,g=t*d+n*h+i*p;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);let v=1/g;return e[0]=d*v,e[1]=(i*l-c*n)*v,e[2]=(s*n-i*o)*v,e[3]=h*v,e[4]=(c*t-i*a)*v,e[5]=(i*r-s*t)*v,e[6]=p*v,e[7]=(n*a-l*t)*v,e[8]=(o*t-n*r)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){let a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(hT.makeScale(e,t)),this}rotate(e){return this.premultiply(hT.makeRotation(-e)),this}translate(e,t){return this.premultiply(hT.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}},hT=new Ms;function Gj(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Q1e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $w(e,t){return new Q1e[e](t)}function Db(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Gm(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Qw(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var uT={[yh]:{[Yw]:Gm},[Yw]:{[yh]:Qw}},pl={legacyMode:!0,get workingColorSpace(){return Yw},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(uT[t]&&void 0!==uT[t][n]){let i=uT[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Wj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Us={r:0,g:0,b:0},Sd={h:0,s:0,l:0},Kw={h:0,s:0,l:0};function pT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Zw(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var ni=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yh){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,pl.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=pl.workingColorSpace){return this.r=e,this.g=t,this.b=n,pl.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=pl.workingColorSpace){if(e=cT(e,1),t=ws(t,0,1),n=ws(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=pT(o,r,e+1/3),this.g=pT(o,r,e),this.b=pT(o,r,e-1/3)}return pl.toWorkingColorSpace(this,i),this}setStyle(e,t=yh){function n(r){void 0!==r&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r,s=i[2];switch(i[1]){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,pl.toWorkingColorSpace(this,t),n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,pl.toWorkingColorSpace(this,t),n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let a=parseFloat(r[1])/360,l=parseFloat(r[2])/100,c=parseFloat(r[3])/100;return n(r[4]),this.setHSL(a,l,c,t)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=i[1],o=r.length;if(3===o)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,pl.toWorkingColorSpace(this,t),this;if(6===o)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,pl.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=yh){let n=Wj[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gm(e.r),this.g=Gm(e.g),this.b=Gm(e.b),this}copyLinearToSRGB(e){return this.r=Qw(e.r),this.g=Qw(e.g),this.b=Qw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yh){return pl.fromWorkingColorSpace(Zw(this,Us),e),ws(255*Us.r,0,255)<<16^ws(255*Us.g,0,255)<<8^ws(255*Us.b,0,255)<<0}getHexString(e=yh){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=pl.workingColorSpace){pl.fromWorkingColorSpace(Zw(this,Us),t);let a,l,n=Us.r,i=Us.g,r=Us.b,o=Math.max(n,i,r),s=Math.min(n,i,r),c=(s+o)/2;if(s===o)a=0,l=0;else{let d=o-s;switch(l=c<=.5?d/(o+s):d/(2-o-s),o){case n:a=(i-r)/d+(i<r?6:0);break;case i:a=(r-n)/d+2;break;case r:a=(n-i)/d+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=pl.workingColorSpace){return pl.fromWorkingColorSpace(Zw(this,Us),t),e.r=Us.r,e.g=Us.g,e.b=Us.b,e}getStyle(e=yh){return pl.fromWorkingColorSpace(Zw(this,Us),e),e!==yh?`color(${e} ${Us.r} ${Us.g} ${Us.b})`:`rgb(${255*Us.r|0},${255*Us.g|0},${255*Us.b|0})`}offsetHSL(e,t,n){return this.getHSL(Sd),Sd.h+=e,Sd.s+=t,Sd.l+=n,this.setHSL(Sd.h,Sd.s,Sd.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Sd),e.getHSL(Kw);let n=Eb(Sd.h,Kw.h,t),i=Eb(Sd.s,Kw.s,t),r=Eb(Sd.l,Kw.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};ni.NAMES=Wj;var ev,qj=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ev&&(ev=Db("canvas")),ev.width=e.width,ev.height=e.height;let n=ev.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ev}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Db("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let o=0;o<r.length;o++)r[o]=255*Gm(r[o]/255);return n.putImageData(i,0,0),t}if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Gm(t[n]/255)):Gm(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Yj=class{constructor(e=null){this.isSource=!0,this.uuid=Bc(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let r;if(Array.isArray(i)){r=[];for(let o=0,s=i.length;o<s;o++)r.push(fT(i[o].isDataTexture?i[o].image:i[o]))}else r=fT(i);n.url=r}return t||(e.images[this.uuid]=n),n}};function fT(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?qj.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var K1e=0,jo=class extends Ca{constructor(e=jo.DEFAULT_IMAGE,t=jo.DEFAULT_MAPPING,n=Ao,i=Ao,r=Ui,o=K0,s=ra,a=qa,l=jo.DEFAULT_ANISOTROPY,c=Pd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:K1e++}),this.uuid=Bc(),this.name="",this.source=new Yj(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ms,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Du:e.x=e.x-Math.floor(e.x);break;case Ao:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Du:e.y=e.y-Math.floor(e.y);break;case Ao:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};jo.DEFAULT_IMAGE=null,jo.DEFAULT_MAPPING=300,jo.DEFAULT_ANISOTROPY=1;var bi=class{constructor(e=0,t=0,n=0,i=1){bi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r,o=e.elements,s=o[0],a=o[4],l=o[8],c=o[1],d=o[5],h=o[9],p=o[2],g=o[6],v=o[10];if(Math.abs(a-c)<.01&&Math.abs(l-p)<.01&&Math.abs(h-g)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+p)<.1&&Math.abs(h+g)<.1&&Math.abs(s+d+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let b=(s+1)/2,P=(d+1)/2,S=(v+1)/2,O=(a+c)/4,A=(l+p)/4,H=(h+g)/4;return b>P&&b>S?b<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(b),i=O/n,r=A/n):P>S?P<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(P),n=O/i,r=H/i):S<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(S),n=A/r,i=H/r),this.set(n,i,r,t),this}let y=Math.sqrt((g-h)*(g-h)+(l-p)*(l-p)+(c-a)*(c-a));return Math.abs(y)<.001&&(y=1),this.x=(g-h)/y,this.y=(l-p)/y,this.z=(c-a)/y,this.w=Math.acos((s+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Or=class extends Ca{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new bi(0,0,e,t),this.scissorTest=!1,this.viewport=new bi(0,0,e,t),this.texture=new jo({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ui,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Yj(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Xj=class extends jo{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=Ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},J1e=class extends Or{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let r=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=r.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},_i=class{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3],h=r[o+0],p=r[o+1],g=r[o+2],v=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===s)return e[t+0]=h,e[t+1]=p,e[t+2]=g,void(e[t+3]=v);if(d!==v||a!==h||l!==p||c!==g){let y=1-s,b=a*h+l*p+c*g+d*v,P=b>=0?1:-1,S=1-b*b;if(S>Number.EPSILON){let A=Math.sqrt(S),H=Math.atan2(A,b*P);y=Math.sin(y*H)/A,s=Math.sin(s*H)/A}let O=s*P;if(a=a*y+h*O,l=l*y+p*O,c=c*y+g*O,d=d*y+v*O,y===1-s){let A=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=A,l*=A,c*=A,d*=A}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,o){let s=n[i],a=n[i+1],l=n[i+2],c=n[i+3],d=r[o],h=r[o+1],p=r[o+2],g=r[o+3];return e[t]=s*g+c*d+a*p-l*h,e[t+1]=a*g+c*h+l*d-s*p,e[t+2]=l*g+c*p+s*h-a*d,e[t+3]=c*g-s*d-a*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(i/2),d=s(r/2),h=a(n/2),p=a(i/2),g=a(r/2);switch(o){case"XYZ":this._x=h*c*d+l*p*g,this._y=l*p*d-h*c*g,this._z=l*c*g+h*p*d,this._w=l*c*d-h*p*g;break;case"YXZ":this._x=h*c*d+l*p*g,this._y=l*p*d-h*c*g,this._z=l*c*g-h*p*d,this._w=l*c*d+h*p*g;break;case"ZXY":this._x=h*c*d-l*p*g,this._y=l*p*d+h*c*g,this._z=l*c*g+h*p*d,this._w=l*c*d-h*p*g;break;case"ZYX":this._x=h*c*d-l*p*g,this._y=l*p*d+h*c*g,this._z=l*c*g-h*p*d,this._w=l*c*d+h*p*g;break;case"YZX":this._x=h*c*d+l*p*g,this._y=l*p*d+h*c*g,this._z=l*c*g-h*p*d,this._w=l*c*d-h*p*g;break;case"XZY":this._x=h*c*d-l*p*g,this._y=l*p*d-h*c*g,this._z=l*c*g+h*p*d,this._w=l*c*d+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],d=t[10],h=n+s+d;if(h>0){let p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(c-a)*p,this._y=(r-l)*p,this._z=(o-i)*p}else if(n>s&&n>d){let p=2*Math.sqrt(1+n-s-d);this._w=(c-a)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(r+l)/p}else if(s>d){let p=2*Math.sqrt(1+s-n-d);this._w=(r-l)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(a+c)/p}else{let p=2*Math.sqrt(1+d-n-s);this._w=(o-i)/p,this._x=(r+l)/p,this._y=(a+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ws(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+i*l-r*a,this._y=i*c+o*a+r*s-n*l,this._z=r*c+o*l+n*a-i*s,this._w=o*c-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,i=this._y,r=this._z,o=this._w,s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;let a=1-s*s;if(a<=Number.EPSILON){let p=1-t;return this._w=p*o+t*this._w,this._x=p*n+t*this._x,this._y=p*i+t*this._y,this._z=p*r+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,s),d=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},te=class{constructor(e=0,t=0,n=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($j.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($j.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){let t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*i-s*n,c=a*n+s*t-r*i,d=a*i+r*n-o*t,h=-r*t-o*n-s*i;return this.x=l*a+h*-r+c*-s-d*-o,this.y=c*a+h*-o+d*-r-l*-s,this.z=d*a+h*-s+l*-o-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return mT.copy(this).projectOnVector(e),this.sub(mT)}reflect(e){return this.sub(mT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(ws(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},mT=new te,$j=new _i,ls=class{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){let c=e[a],d=e[a+1],h=e[a+2];c<t&&(t=c),d<n&&(n=d),h<i&&(i=h),c>r&&(r=c),d>o&&(o=d),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,o,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.count;a<l;a++){let c=e.getX(a),d=e.getY(a),h=e.getZ(a);c<t&&(t=c),d<n&&(n=d),h<i&&(i=h),c>r&&(r=c),d>o&&(o=d),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=Wm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){let r=n.attributes.position;for(let o=0,s=r.count;o<s;o++)Wm.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Wm)}else null===n.boundingBox&&n.computeBoundingBox(),gT.copy(n.boundingBox),gT.applyMatrix4(e.matrixWorld),this.union(gT);let i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Wm),Wm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ab),Jw.subVectors(this.max,Ab),tv.subVectors(e.a,Ab),nv.subVectors(e.b,Ab),iv.subVectors(e.c,Ab),Jp.subVectors(nv,tv),ef.subVectors(iv,nv),qm.subVectors(tv,iv);let t=[0,-Jp.z,Jp.y,0,-ef.z,ef.y,0,-qm.z,qm.y,Jp.z,0,-Jp.x,ef.z,0,-ef.x,qm.z,0,-qm.x,-Jp.y,Jp.x,0,-ef.y,ef.x,0,-qm.y,qm.x,0];return!(!vT(t,tv,nv,iv,Jw)||(t=[1,0,0,0,1,0,0,0,1],!vT(t,tv,nv,iv,Jw)))&&(eM.crossVectors(Jp,ef),t=[eM.x,eM.y,eM.z],vT(t,tv,nv,iv,Jw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Wm.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Wm).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ru=[new te,new te,new te,new te,new te,new te,new te,new te],Wm=new te,gT=new ls,tv=new te,nv=new te,iv=new te,Jp=new te,ef=new te,qm=new te,Ab=new te,Jw=new te,eM=new te,Ym=new te;function vT(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){Ym.fromArray(e,o);let a=r.x*Math.abs(Ym.x)+r.y*Math.abs(Ym.y)+r.z*Math.abs(Ym.z),l=t.dot(Ym),c=n.dot(Ym),d=i.dot(Ym);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var eye=new ls,Tb=new te,yT=new te,Fl=class{constructor(e=new te,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):eye.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Tb.subVectors(e,this.center);let t=Tb.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector(Tb,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(yT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Tb.copy(e.center).add(yT)),this.expandByPoint(Tb.copy(e.center).sub(yT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},Nu=new te,bT=new te,tM=new te,tf=new te,_T=new te,nM=new te,xT=new te,rv=class{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Nu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nu.copy(this.direction).multiplyScalar(t).add(this.origin),Nu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){bT.copy(e).add(t).multiplyScalar(.5),tM.copy(t).sub(e).normalize(),tf.copy(this.origin).sub(bT);let d,h,p,g,r=.5*e.distanceTo(t),o=-this.direction.dot(tM),s=tf.dot(this.direction),a=-tf.dot(tM),l=tf.lengthSq(),c=Math.abs(1-o*o);if(c>0)if(d=o*a-s,h=o*s-a,g=r*c,d>=0)if(h>=-g)if(h<=g){let v=1/c;d*=v,h*=v,p=d*(d+o*h+2*s)+h*(o*d+h+2*a)+l}else h=r,d=Math.max(0,-(o*h+s)),p=-d*d+h*(h+2*a)+l;else h=-r,d=Math.max(0,-(o*h+s)),p=-d*d+h*(h+2*a)+l;else h<=-g?(d=Math.max(0,-(-o*r+s)),h=d>0?-r:Math.min(Math.max(-r,-a),r),p=-d*d+h*(h+2*a)+l):h<=g?(d=0,h=Math.min(Math.max(-r,-a),r),p=h*(h+2*a)+l):(d=Math.max(0,-(o*r+s)),h=d>0?r:Math.min(Math.max(-r,-a),r),p=-d*d+h*(h+2*a)+l);else h=o>0?-r:r,d=Math.max(0,-(o*h+s)),p=-d*d+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(tM).multiplyScalar(h).add(bT),p}intersectSphere(e,t){Nu.subVectors(e.center,this.origin);let n=Nu.dot(this.direction),i=Nu.dot(Nu)-n*n,r=e.radius*e.radius;if(i>r)return null;let o=Math.sqrt(r-i),s=n-o,a=n+o;return s<0&&a<0?null:this.at(s<0?a:s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a,l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>i||((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),d>=0?(s=(e.min.z-h.z)*d,a=(e.max.z-h.z)*d):(s=(e.max.z-h.z)*d,a=(e.min.z-h.z)*d),n>a||s>i)||((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Nu)}intersectTriangle(e,t,n,i,r){_T.subVectors(t,e),nM.subVectors(n,e),xT.crossVectors(_T,nM);let s,o=this.direction.dot(xT);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}tf.subVectors(this.origin,e);let a=s*this.direction.dot(nM.crossVectors(tf,nM));if(a<0)return null;let l=s*this.direction.dot(_T.cross(tf));if(l<0||a+l>o)return null;let c=-s*tf.dot(xT);return c<0?null:this.at(c/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},qt=class{constructor(){qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,o,s,a,l,c,d,h,p,g,v,y){let b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=i,b[1]=r,b[5]=o,b[9]=s,b[13]=a,b[2]=l,b[6]=c,b[10]=d,b[14]=h,b[3]=p,b[7]=g,b[11]=v,b[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qt).fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,i=1/ov.setFromMatrixColumn(e,0).length(),r=1/ov.setFromMatrixColumn(e,1).length(),o=1/ov.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){let h=o*c,p=o*d,g=s*c,v=s*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=p+g*l,t[5]=h-v*l,t[9]=-s*a,t[2]=v-h*l,t[6]=g+p*l,t[10]=o*a}else if("YXZ"===e.order){let h=a*c,p=a*d,g=l*c,v=l*d;t[0]=h+v*s,t[4]=g*s-p,t[8]=o*l,t[1]=o*d,t[5]=o*c,t[9]=-s,t[2]=p*s-g,t[6]=v+h*s,t[10]=o*a}else if("ZXY"===e.order){let h=a*c,p=a*d,g=l*c,v=l*d;t[0]=h-v*s,t[4]=-o*d,t[8]=g+p*s,t[1]=p+g*s,t[5]=o*c,t[9]=v-h*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){let h=o*c,p=o*d,g=s*c,v=s*d;t[0]=a*c,t[4]=g*l-p,t[8]=h*l+v,t[1]=a*d,t[5]=v*l+h,t[9]=p*l-g,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){let h=o*a,p=o*l,g=s*a,v=s*l;t[0]=a*c,t[4]=v-h*d,t[8]=g*d+p,t[1]=d,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=p*d+g,t[10]=h-v*d}else if("XZY"===e.order){let h=o*a,p=o*l,g=s*a,v=s*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=h*d+v,t[5]=o*c,t[9]=p*d-g,t[2]=g*d-p,t[6]=s*c,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tye,e,nye)}lookAt(e,t,n){let i=this.elements;return uc.subVectors(e,t),0===uc.lengthSq()&&(uc.z=1),uc.normalize(),nf.crossVectors(n,uc),0===nf.lengthSq()&&(1===Math.abs(n.z)?uc.x+=1e-4:uc.z+=1e-4,uc.normalize(),nf.crossVectors(n,uc)),nf.normalize(),iM.crossVectors(uc,nf),i[0]=nf.x,i[4]=iM.x,i[8]=uc.x,i[1]=nf.y,i[5]=iM.y,i[9]=uc.y,i[2]=nf.z,i[6]=iM.z,i[10]=uc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],d=n[5],h=n[9],p=n[13],g=n[2],v=n[6],y=n[10],b=n[14],P=n[3],S=n[7],O=n[11],A=n[15],H=i[0],U=i[4],X=i[8],Y=i[12],Z=i[1],ee=i[5],oe=i[9],ce=i[13],de=i[2],he=i[6],Pe=i[10],we=i[14],_e=i[3],ve=i[7],ke=i[11],ze=i[15];return r[0]=o*H+s*Z+a*de+l*_e,r[4]=o*U+s*ee+a*he+l*ve,r[8]=o*X+s*oe+a*Pe+l*ke,r[12]=o*Y+s*ce+a*we+l*ze,r[1]=c*H+d*Z+h*de+p*_e,r[5]=c*U+d*ee+h*he+p*ve,r[9]=c*X+d*oe+h*Pe+p*ke,r[13]=c*Y+d*ce+h*we+p*ze,r[2]=g*H+v*Z+y*de+b*_e,r[6]=g*U+v*ee+y*he+b*ve,r[10]=g*X+v*oe+y*Pe+b*ke,r[14]=g*Y+v*ce+y*we+b*ze,r[3]=P*H+S*Z+O*de+A*_e,r[7]=P*U+S*ee+O*he+A*ve,r[11]=P*X+S*oe+O*Pe+A*ke,r[15]=P*Y+S*ce+O*we+A*ze,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],d=e[6],h=e[10],p=e[14];return e[3]*(+r*a*d-i*l*d-r*s*h+n*l*h+i*s*p-n*a*p)+e[7]*(+t*a*p-t*l*h+r*o*h-i*o*p+i*l*c-r*a*c)+e[11]*(+t*l*d-t*s*p-r*o*d+n*o*p+r*s*c-n*l*c)+e[15]*(-i*s*c-t*a*d+t*s*h+i*o*d-n*o*h+n*a*c)}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],d=e[9],h=e[10],p=e[11],g=e[12],v=e[13],y=e[14],b=e[15],P=d*y*l-v*h*l+v*a*p-s*y*p-d*a*b+s*h*b,S=g*h*l-c*y*l-g*a*p+o*y*p+c*a*b-o*h*b,O=c*v*l-g*d*l+g*s*p-o*v*p-c*s*b+o*d*b,A=g*d*a-c*v*a-g*s*h+o*v*h+c*s*y-o*d*y,H=t*P+n*S+i*O+r*A;if(0===H)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let U=1/H;return e[0]=P*U,e[1]=(v*h*r-d*y*r-v*i*p+n*y*p+d*i*b-n*h*b)*U,e[2]=(s*y*r-v*a*r+v*i*l-n*y*l-s*i*b+n*a*b)*U,e[3]=(d*a*r-s*h*r-d*i*l+n*h*l+s*i*p-n*a*p)*U,e[4]=S*U,e[5]=(c*y*r-g*h*r+g*i*p-t*y*p-c*i*b+t*h*b)*U,e[6]=(g*a*r-o*y*r-g*i*l+t*y*l+o*i*b-t*a*b)*U,e[7]=(o*h*r-c*a*r+c*i*l-t*h*l-o*i*p+t*a*p)*U,e[8]=O*U,e[9]=(g*d*r-c*v*r-g*n*p+t*v*p+c*n*b-t*d*b)*U,e[10]=(o*v*r-g*s*r+g*n*l-t*v*l-o*n*b+t*s*b)*U,e[11]=(c*s*r-o*d*r-c*n*l+t*d*l+o*n*p-t*s*p)*U,e[12]=A*U,e[13]=(c*v*i-g*d*i+g*n*h-t*v*h-c*n*y+t*d*y)*U,e[14]=(g*s*i-o*v*i-g*n*a+t*v*a+o*n*y-t*s*y)*U,e[15]=(o*d*i-c*s*i+c*n*a-t*d*a-o*n*h+t*s*h)*U,this}scale(e){let t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,c*s+n,c*a-i*o,0,l*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){let i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,d=s+s,h=r*l,p=r*c,g=r*d,v=o*c,y=o*d,b=s*d,P=a*l,S=a*c,O=a*d,A=n.x,H=n.y,U=n.z;return i[0]=(1-(v+b))*A,i[1]=(p+O)*A,i[2]=(g-S)*A,i[3]=0,i[4]=(p-O)*H,i[5]=(1-(h+b))*H,i[6]=(y+P)*H,i[7]=0,i[8]=(g+S)*U,i[9]=(y-P)*U,i[10]=(1-(h+v))*U,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){let i=this.elements,r=ov.set(i[0],i[1],i[2]).length(),o=ov.set(i[4],i[5],i[6]).length(),s=ov.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Od.copy(this);let a=1/r,l=1/o,c=1/s;return Od.elements[0]*=a,Od.elements[1]*=a,Od.elements[2]*=a,Od.elements[4]*=l,Od.elements[5]*=l,Od.elements[6]*=l,Od.elements[8]*=c,Od.elements[9]*=c,Od.elements[10]*=c,t.setFromRotationMatrix(Od),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){let s=this.elements,l=2*r/(n-i),c=(t+e)/(t-e),d=(n+i)/(n-i),h=-(o+r)/(o-r),p=-2*o*r/(o-r);return s[0]=2*r/(t-e),s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,o){let s=this.elements,a=1/(t-e),l=1/(n-i),c=1/(o-r),d=(t+e)*a,h=(n+i)*l,p=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},ov=new te,Od=new qt,tye=new te(0,0,0),nye=new te(1,1,1),nf=new te,iM=new te,uc=new te,Qj=new qt,Kj=new _i,js=class{constructor(e=0,t=0,n=0,i=js.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],l=i[5],c=i[9],d=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(ws(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ws(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(ws(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-ws(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(ws(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-ws(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Qj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qj,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Kj.setFromEuler(this),this.setFromQuaternion(Kj,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};js.DEFAULT_ORDER="XYZ";var CT=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}},iye=0,Zj=new te,sv=new _i,Fu=new qt,rM=new te,Ib=new te,rye=new te,oye=new _i,Jj=new te(1,0,0),eV=new te(0,1,0),tV=new te(0,0,1),sye={type:"added"},nV={type:"removed"},Fr=class extends Ca{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:iye++}),this.uuid=Bc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fr.DEFAULT_UP.clone();let e=new te,t=new js,n=new _i,i=new te(1,1,1);t._onChange(function r(){n.setFromEuler(t,!1)}),n._onChange(function o(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new qt},normalMatrix:{value:new Ms}}),this.matrix=new qt,this.matrixWorld=new qt,this.matrixAutoUpdate=Fr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new CT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sv.setFromAxisAngle(e,t),this.quaternion.multiply(sv),this}rotateOnWorldAxis(e,t){return sv.setFromAxisAngle(e,t),this.quaternion.premultiply(sv),this}rotateX(e){return this.rotateOnAxis(Jj,e)}rotateY(e){return this.rotateOnAxis(eV,e)}rotateZ(e){return this.rotateOnAxis(tV,e)}translateOnAxis(e,t){return Zj.copy(e).applyQuaternion(this.quaternion),this.position.add(Zj.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Jj,e)}translateY(e){return this.translateOnAxis(eV,e)}translateZ(e){return this.translateOnAxis(tV,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?rM.copy(e):rM.set(e,t,n);let i=this.parent;this.updateWorldMatrix(!0,!1),Ib.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fu.lookAt(Ib,rM,this.up):Fu.lookAt(rM,Ib,this.up),this.quaternion.setFromRotationMatrix(Fu),i&&(Fu.extractRotation(i.matrixWorld),sv.setFromRotationMatrix(Fu),this.quaternion.premultiply(sv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(sye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nV)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(nV)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fu.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){let o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ib,e,rye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ib,oye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,i=t.length;n<i;n++){let r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let i=this.children;for(let r=0,o=i.length;r<o;r++){let s=i[r];!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};function r(s,a){return void 0===s[a.uuid]&&(s[a.uuid]=a.toJSON(e)),a.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);let s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){let a=s.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++)r(e.shapes,a[l]);else r(e.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let s=[];for(let a=0,l=this.material.length;a<l;a++)s.push(r(e.materials,this.material[a]));i.material=s}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++)i.animations.push(r(e.animations,this.animations[s]))}if(t){let s=o(e.geometries),a=o(e.materials),l=o(e.textures),c=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),g=o(e.nodes);s.length>0&&(n.geometries=s),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),p.length>0&&(n.animations=p),g.length>0&&(n.nodes=g)}return n.object=i,n;function o(s){let a=[];for(let l in s){let c=s[l];delete c.metadata,a.push(c)}return a}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}};Fr.DEFAULT_UP=new te(0,1,0),Fr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ed=new te,Lu=new te,wT=new te,Bu=new te,av=new te,lv=new te,iV=new te,MT=new te,PT=new te,ST=new te,wa=class{constructor(e=new te,t=new te,n=new te){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ed.subVectors(e,t),i.cross(Ed);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Ed.subVectors(i,t),Lu.subVectors(n,t),wT.subVectors(e,t);let o=Ed.dot(Ed),s=Ed.dot(Lu),a=Ed.dot(wT),l=Lu.dot(Lu),c=Lu.dot(wT),d=o*l-s*s;if(0===d)return r.set(-2,-1,-1);let h=1/d,p=(l*a-s*c)*h,g=(o*c-s*a)*h;return r.set(1-p-g,g,p)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Bu),Bu.x>=0&&Bu.y>=0&&Bu.x+Bu.y<=1}static getUV(e,t,n,i,r,o,s,a){return this.getBarycoord(e,t,n,i,Bu),a.set(0,0),a.addScaledVector(r,Bu.x),a.addScaledVector(o,Bu.y),a.addScaledVector(s,Bu.z),a}static isFrontFacing(e,t,n,i){return Ed.subVectors(n,t),Lu.subVectors(e,t),Ed.cross(Lu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ed.subVectors(this.c,this.b),Lu.subVectors(this.a,this.b),.5*Ed.cross(Lu).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wa.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return wa.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return wa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let o,s,n=this.a,i=this.b,r=this.c;av.subVectors(i,n),lv.subVectors(r,n),MT.subVectors(e,n);let a=av.dot(MT),l=lv.dot(MT);if(a<=0&&l<=0)return t.copy(n);PT.subVectors(e,i);let c=av.dot(PT),d=lv.dot(PT);if(c>=0&&d<=c)return t.copy(i);let h=a*d-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(av,o);ST.subVectors(e,r);let p=av.dot(ST),g=lv.dot(ST);if(g>=0&&p<=g)return t.copy(r);let v=p*l-a*g;if(v<=0&&l>=0&&g<=0)return s=l/(l-g),t.copy(n).addScaledVector(lv,s);let y=c*g-p*d;if(y<=0&&d-c>=0&&p-g>=0)return iV.subVectors(r,i),s=(d-c)/(d-c+(p-g)),t.copy(i).addScaledVector(iV,s);let b=1/(y+v+h);return o=v*b,s=h*b,t.copy(n).addScaledVector(av,o).addScaledVector(lv,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},aye=0,kb=class extends Ca{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:aye++}),this.uuid=Bc(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(r){let o=[];for(let s in r){let a=r[s];delete a.metadata,o.push(a)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},zu=class extends kb{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ni(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ps=new te,oM=new Ue,ui=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)oM.fromBufferAttribute(this,t),oM.applyMatrix3(e),this.setXY(t,oM.x,oM.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix3(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ku(t,this.array)),t}setX(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ku(t,this.array)),t}setY(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ku(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ku(t,this.array)),t}setW(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array),i=fo(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array),i=fo(i,this.array),r=fo(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},rV=class extends ui{constructor(e,t,n){super(new Uint16Array(e),t,n)}},cv=class extends ui{constructor(e,t,n){super(new Uint32Array(e),t,n)}},_n=class extends ui{constructor(e,t,n){super(new Float32Array(e),t,n)}},lye=0,zc=new qt,OT=new Fr,dv=new te,pc=new ls,Rb=new ls,oa=new te,Xn=class extends Ca{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:lye++}),this.uuid=Bc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Gj(e)?cv:rV)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let r=(new Ms).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}let i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return zc.makeRotationFromQuaternion(e),this.applyMatrix4(zc),this}rotateX(e){return zc.makeRotationX(e),this.applyMatrix4(zc),this}rotateY(e){return zc.makeRotationY(e),this.applyMatrix4(zc),this}rotateZ(e){return zc.makeRotationZ(e),this.applyMatrix4(zc),this}translate(e,t,n){return zc.makeTranslation(e,t,n),this.applyMatrix4(zc),this}scale(e,t,n){return zc.makeScale(e,t,n),this.applyMatrix4(zc),this}lookAt(e){return OT.lookAt(e),OT.updateMatrix(),this.applyMatrix4(OT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dv).negate(),this.translate(dv.x,dv.y,dv.z),this}setFromPoints(e){let t=[];for(let n=0,i=e.length;n<i;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _n(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ls);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++)pc.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(oa.addVectors(this.boundingBox.min,pc.min),this.boundingBox.expandByPoint(oa),oa.addVectors(this.boundingBox.max,pc.max),this.boundingBox.expandByPoint(oa)):(this.boundingBox.expandByPoint(pc.min),this.boundingBox.expandByPoint(pc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Fl);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new te,1/0);if(e){let n=this.boundingSphere.center;if(pc.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)Rb.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(oa.addVectors(pc.min,Rb.min),pc.expandByPoint(oa),oa.addVectors(pc.max,Rb.max),pc.expandByPoint(oa)):(pc.expandByPoint(Rb.min),pc.expandByPoint(Rb.max));pc.getCenter(n);let i=0;for(let r=0,o=e.count;r<o;r++)oa.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(oa));if(t)for(let r=0,o=t.length;r<o;r++){let s=t[r],a=this.morphTargetsRelative;for(let l=0,c=s.count;l<c;l++)oa.fromBufferAttribute(s,l),a&&(dv.fromBufferAttribute(e,l),oa.add(dv)),i=Math.max(i,n.distanceToSquared(oa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let n=e.array,i=t.position.array,r=t.normal.array,o=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ui(new Float32Array(4*s),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let Z=0;Z<s;Z++)l[Z]=new te,c[Z]=new te;let d=new te,h=new te,p=new te,g=new Ue,v=new Ue,y=new Ue,b=new te,P=new te;function S(Z,ee,oe){d.fromArray(i,3*Z),h.fromArray(i,3*ee),p.fromArray(i,3*oe),g.fromArray(o,2*Z),v.fromArray(o,2*ee),y.fromArray(o,2*oe),h.sub(d),p.sub(d),v.sub(g),y.sub(g);let ce=1/(v.x*y.y-y.x*v.y);!isFinite(ce)||(b.copy(h).multiplyScalar(y.y).addScaledVector(p,-v.y).multiplyScalar(ce),P.copy(p).multiplyScalar(v.x).addScaledVector(h,-y.x).multiplyScalar(ce),l[Z].add(b),l[ee].add(b),l[oe].add(b),c[Z].add(P),c[ee].add(P),c[oe].add(P))}let O=this.groups;0===O.length&&(O=[{start:0,count:n.length}]);for(let Z=0,ee=O.length;Z<ee;++Z){let oe=O[Z],ce=oe.start;for(let he=ce,Pe=ce+oe.count;he<Pe;he+=3)S(n[he+0],n[he+1],n[he+2])}let A=new te,H=new te,U=new te,X=new te;function Y(Z){U.fromArray(r,3*Z),X.copy(U);let ee=l[Z];A.copy(ee),A.sub(U.multiplyScalar(U.dot(ee))).normalize(),H.crossVectors(X,ee);let oe=H.dot(c[Z])<0?-1:1;a[4*Z]=A.x,a[4*Z+1]=A.y,a[4*Z+2]=A.z,a[4*Z+3]=oe}for(let Z=0,ee=O.length;Z<ee;++Z){let oe=O[Z],ce=oe.start;for(let he=ce,Pe=ce+oe.count;he<Pe;he+=3)Y(n[he+0]),Y(n[he+1]),Y(n[he+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new ui(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let h=0,p=n.count;h<p;h++)n.setXYZ(h,0,0,0);let i=new te,r=new te,o=new te,s=new te,a=new te,l=new te,c=new te,d=new te;if(e)for(let h=0,p=e.count;h<p;h+=3){let g=e.getX(h+0),v=e.getX(h+1),y=e.getX(h+2);i.fromBufferAttribute(t,g),r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),s.fromBufferAttribute(n,g),a.fromBufferAttribute(n,v),l.fromBufferAttribute(n,y),s.add(c),a.add(c),l.add(c),n.setXYZ(g,s.x,s.y,s.z),n.setXYZ(v,a.x,a.y,a.z),n.setXYZ(y,l.x,l.y,l.z)}else for(let h=0,p=t.count;h<p;h+=3)i.fromBufferAttribute(t,h+0),r.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)oa.fromBufferAttribute(e,t),oa.normalize(),e.setXYZ(t,oa.x,oa.y,oa.z)}toNonIndexed(){function e(s,a){let l=s.array,c=s.itemSize,d=s.normalized,h=new l.constructor(a.length*c),p=0,g=0;for(let v=0,y=a.length;v<y;v++){p=s.isInterleavedBufferAttribute?a[v]*s.data.stride+s.offset:a[v]*c;for(let b=0;b<c;b++)h[g++]=l[p++]}return new ui(h,c,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Xn,n=this.index.array,i=this.attributes;for(let s in i){let l=e(i[s],n);t.setAttribute(s,l)}let r=this.morphAttributes;for(let s in r){let a=[],l=r[s];for(let c=0,d=l.length;c<d;c++){let p=e(l[c],n);a.push(p)}t.morphAttributes[s]=a}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let s=0,a=o.length;s<a;s++){let l=o[s];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let a=this.parameters;for(let l in a)void 0!==a[l]&&(e[l]=a[l]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let a in n)e.data.attributes[a]=n[a].toJSON(e.data);let i={},r=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let d=0,h=l.length;d<h;d++)c.push(l[d].toJSON(e.data));c.length>0&&(i[a]=c,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let i=e.attributes;for(let l in i)this.setAttribute(l,i[l].clone(t));let r=e.morphAttributes;for(let l in r){let c=[],d=r[l];for(let h=0,p=d.length;h<p;h++)c.push(d[h].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,c=o.length;l<c;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},oV=new qt,hv=new rv,ET=new Fl,Nb=new te,Fb=new te,Lb=new te,DT=new te,sM=new te,aM=new Ue,lM=new Ue,cM=new Ue,AT=new te,dM=new te,Vo=class extends Fr{constructor(e=new Xn,t=new zu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let o=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}getVertexPosition(e,t){let n=this.geometry,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);let s=this.morphTargetInfluences;if(r&&s){sM.set(0,0,0);for(let a=0,l=r.length;a<l;a++){let c=s[a],d=r[a];0!==c&&(DT.fromBufferAttribute(d,e),sM.addScaledVector(o?DT:DT.sub(t),c))}t.add(sM)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i||(null===n.boundingSphere&&n.computeBoundingSphere(),ET.copy(n.boundingSphere),ET.applyMatrix4(r),!1===e.ray.intersectsSphere(ET))||(oV.copy(r).invert(),hv.copy(e.ray).applyMatrix4(oV),null!==n.boundingBox&&!1===hv.intersectsBox(n.boundingBox)))return;let o,s=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==s)if(Array.isArray(i))for(let p=0,g=d.length;p<g;p++){let v=d[p],y=i[v.materialIndex];for(let S=Math.max(v.start,h.start),O=Math.min(s.count,Math.min(v.start+v.count,h.start+h.count));S<O;S+=3){let A=s.getX(S),H=s.getX(S+1),U=s.getX(S+2);o=hM(this,y,e,hv,l,c,A,H,U),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,h.start),y=Math.min(s.count,h.start+h.count);v<y;v+=3){let b=s.getX(v),P=s.getX(v+1),S=s.getX(v+2);o=hM(this,i,e,hv,l,c,b,P,S),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==a)if(Array.isArray(i))for(let p=0,g=d.length;p<g;p++){let v=d[p],y=i[v.materialIndex];for(let S=Math.max(v.start,h.start),O=Math.min(a.count,Math.min(v.start+v.count,h.start+h.count));S<O;S+=3)o=hM(this,y,e,hv,l,c,S,S+1,S+2),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,h.start),y=Math.min(a.count,h.start+h.count);v<y;v+=3)o=hM(this,i,e,hv,l,c,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}};function hM(e,t,n,i,r,o,s,a,l){e.getVertexPosition(s,Nb),e.getVertexPosition(a,Fb),e.getVertexPosition(l,Lb);let c=function cye(e,t,n,i,r,o,s,a){let l;if(l=1===t.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,0===t.side,a),null===l)return null;dM.copy(a),dM.applyMatrix4(e.matrixWorld);let c=n.ray.origin.distanceTo(dM);return c<n.near||c>n.far?null:{distance:c,point:dM.clone(),object:e}}(e,t,n,i,Nb,Fb,Lb,AT);if(c){r&&(aM.fromBufferAttribute(r,s),lM.fromBufferAttribute(r,a),cM.fromBufferAttribute(r,l),c.uv=wa.getUV(AT,Nb,Fb,Lb,aM,lM,cM,new Ue)),o&&(aM.fromBufferAttribute(o,s),lM.fromBufferAttribute(o,a),cM.fromBufferAttribute(o,l),c.uv2=wa.getUV(AT,Nb,Fb,Lb,aM,lM,cM,new Ue));let d={a:s,b:a,c:l,normal:new te,materialIndex:0};wa.getNormal(Nb,Fb,Lb,d.normal),c.face=d}return c}var Dd=class extends Xn{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};let s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);let a=[],l=[],c=[],d=[],h=0,p=0;function g(v,y,b,P,S,O,A,H,U,X,Y){let Z=O/U,ee=A/X,oe=O/2,ce=A/2,de=H/2,he=U+1,Pe=X+1,we=0,_e=0,ve=new te;for(let ke=0;ke<Pe;ke++){let ze=ke*ee-ce;for(let Le=0;Le<he;Le++)ve[v]=(Le*Z-oe)*P,ve[y]=ze*S,ve[b]=de,l.push(ve.x,ve.y,ve.z),ve[v]=0,ve[y]=0,ve[b]=H>0?1:-1,c.push(ve.x,ve.y,ve.z),d.push(Le/U),d.push(1-ke/X),we+=1}for(let ke=0;ke<X;ke++)for(let ze=0;ze<U;ze++){let Ne=h+ze+he*(ke+1),$e=h+(ze+1)+he*(ke+1),Be=h+(ze+1)+he*ke;a.push(h+ze+he*ke,Ne,Be),a.push(Ne,$e,Be),_e+=6}s.addGroup(p,_e,Y),p+=_e,h+=we}g("z","y","x",-1,-1,n,t,e,o,r,0),g("z","y","x",1,-1,n,t,-e,o,r,1),g("x","z","y",1,1,e,n,t,i,o,2),g("x","z","y",1,-1,e,n,-t,i,o,3),g("x","y","z",1,-1,e,t,n,i,r,4),g("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new _n(l,3)),this.setAttribute("normal",new _n(c,3)),this.setAttribute("uv",new _n(d,2))}static fromJSON(e){return new Dd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function uv(e){let t={};for(let n in e){t[n]={};for(let i in e[n]){let r=e[n][i];t[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function fl(e){let t={};for(let n=0;n<e.length;n++){let i=uv(e[n]);for(let r in i)t[r]=i[r]}return t}function sV(e){return null===e.getRenderTarget()&&e.outputEncoding===Ri?yh:Yw}var pv={clone:uv,merge:fl},wr=class extends kb{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uv(e.uniforms),this.uniformsGroups=function dye(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let r=this.uniforms[i].value;t.uniforms[i]=r&&r.isTexture?{type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?{type:"c",value:r.getHex()}:r&&r.isVector2?{type:"v2",value:r.toArray()}:r&&r.isVector3?{type:"v3",value:r.toArray()}:r&&r.isVector4?{type:"v4",value:r.toArray()}:r&&r.isMatrix3?{type:"m3",value:r.toArray()}:r&&r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},Xm=class extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qt,this.projectionMatrix=new qt,this.projectionMatrixInverse=new qt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},Xa=class extends Xm{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*Ob*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*Sb*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ob*Math.atan(Math.tan(.5*Sb*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*Sb*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){let a=o.fullWidth,l=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/l,i*=o.width/a,n*=o.height/l}let s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},pye=class extends Fr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new Xa(-90,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new Xa(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let o=new Xa(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let s=new Xa(-90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let a=new Xa(-90,1,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new Xa(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,o,s,a,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;let p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}},TT=class extends jo{constructor(e,t,n,i,r,o,s,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,i,r,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},fye=class extends Or{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new TT([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Dd(5,5,5),r=new wr({name:"CubemapFromEquirect",uniforms:uv(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;let o=new Vo(i,r),s=t.minFilter;return t.minFilter===K0&&(t.minFilter=Ui),new pye(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){let r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)}},IT=new te,mye=new te,gye=new Ms,Ll=class{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let i=IT.subVectors(n,t).cross(mye.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(IT),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||gye.getNormalMatrix(e),i=this.coplanarPoint(IT).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},gv=new Fl,uM=new te,kT=class{constructor(e=new Ll,t=new Ll,n=new Ll,i=new Ll,r=new Ll,o=new Ll){this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],d=n[7],h=n[8],p=n[9],g=n[10],v=n[11],y=n[12],b=n[13],P=n[14],S=n[15];return t[0].setComponents(s-i,d-a,v-h,S-y).normalize(),t[1].setComponents(s+i,d+a,v+h,S+y).normalize(),t[2].setComponents(s+r,d+l,v+p,S+b).normalize(),t[3].setComponents(s-r,d-l,v-p,S-b).normalize(),t[4].setComponents(s-o,d-c,v-g,S-P).normalize(),t[5].setComponents(s+o,d+c,v+g,S+P).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),gv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gv)}intersectsSprite(e){return gv.center.set(0,0,0),gv.radius=.7071067811865476,gv.applyMatrix4(e.matrixWorld),this.intersectsSphere(gv)}intersectsSphere(e){let t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let i=t[n];if(uM.x=i.normal.x>0?e.max.x:e.min.x,uM.y=i.normal.y>0?e.max.y:e.min.y,uM.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uM)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function aV(){let e=null,t=!1,n=null,i=null;function r(o,s){n(o,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){e=o}}}function vye(e,t){let n=t.isWebGL2,i=new WeakMap;return{get:function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=i.get(c);d&&(e.deleteBuffer(d.buffer),i.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){let p=i.get(c);return void((!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);void 0===h?i.set(c,function r(c,d){let v,h=c.array,p=c.usage,g=e.createBuffer();if(e.bindBuffer(d,g),e.bufferData(d,h,p),c.onUploadCallback(),h instanceof Float32Array)v=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");v=5131}else v=5123;else if(h instanceof Int16Array)v=5122;else if(h instanceof Uint32Array)v=5125;else if(h instanceof Int32Array)v=5124;else if(h instanceof Int8Array)v=5120;else if(h instanceof Uint8Array)v=5121;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);v=5121}return{buffer:g,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}(c,d)):h.version<c.version&&(function o(c,d,h){let p=d.array,g=d.updateRange;e.bindBuffer(h,c),-1===g.count?e.bufferSubData(h,0,p):(n?e.bufferSubData(h,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):e.bufferSubData(h,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),d.onUploadCallback()}(h.buffer,c,d),h.version=c.version)}}}var Uu=class extends Xn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};let r=e/2,o=t/2,s=Math.floor(n),a=Math.floor(i),l=s+1,c=a+1,d=e/s,h=t/a,p=[],g=[],v=[],y=[];for(let b=0;b<c;b++){let P=b*h-o;for(let S=0;S<l;S++)g.push(S*d-r,-P,0),v.push(0,0,1),y.push(S/s),y.push(1-b/a)}for(let b=0;b<a;b++)for(let P=0;P<s;P++){let O=P+l*(b+1),A=P+1+l*(b+1),H=P+1+l*b;p.push(P+l*b,O,H),p.push(O,A,H)}this.setIndex(p),this.setAttribute("position",new _n(g,3)),this.setAttribute("normal",new _n(v,3)),this.setAttribute("uv",new _n(y,2))}static fromJSON(e){return new Uu(e.width,e.height,e.widthSegments,e.heightSegments)}},ji={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},un={common:{diffuse:{value:new ni(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ms},uv2Transform:{value:new Ms},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ni(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ni(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ms}},sprite:{diffuse:{value:new ni(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ms}}},bh={basic:{uniforms:fl([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:ji.meshbasic_vert,fragmentShader:ji.meshbasic_frag},lambert:{uniforms:fl([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new ni(0)}}]),vertexShader:ji.meshlambert_vert,fragmentShader:ji.meshlambert_frag},phong:{uniforms:fl([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new ni(0)},specular:{value:new ni(1118481)},shininess:{value:30}}]),vertexShader:ji.meshphong_vert,fragmentShader:ji.meshphong_frag},standard:{uniforms:fl([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new ni(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ji.meshphysical_vert,fragmentShader:ji.meshphysical_frag},toon:{uniforms:fl([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new ni(0)}}]),vertexShader:ji.meshtoon_vert,fragmentShader:ji.meshtoon_frag},matcap:{uniforms:fl([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:ji.meshmatcap_vert,fragmentShader:ji.meshmatcap_frag},points:{uniforms:fl([un.points,un.fog]),vertexShader:ji.points_vert,fragmentShader:ji.points_frag},dashed:{uniforms:fl([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ji.linedashed_vert,fragmentShader:ji.linedashed_frag},depth:{uniforms:fl([un.common,un.displacementmap]),vertexShader:ji.depth_vert,fragmentShader:ji.depth_frag},normal:{uniforms:fl([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:ji.meshnormal_vert,fragmentShader:ji.meshnormal_frag},sprite:{uniforms:fl([un.sprite,un.fog]),vertexShader:ji.sprite_vert,fragmentShader:ji.sprite_frag},background:{uniforms:{uvTransform:{value:new Ms},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ji.background_vert,fragmentShader:ji.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ji.backgroundCube_vert,fragmentShader:ji.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ji.cube_vert,fragmentShader:ji.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ji.equirect_vert,fragmentShader:ji.equirect_frag},distanceRGBA:{uniforms:fl([un.common,un.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ji.distanceRGBA_vert,fragmentShader:ji.distanceRGBA_frag},shadow:{uniforms:fl([un.lights,un.fog,{color:{value:new ni(0)},opacity:{value:1}}]),vertexShader:ji.shadow_vert,fragmentShader:ji.shadow_frag}};bh.physical={uniforms:fl([bh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ni(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ni(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ni(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ji.meshphysical_vert,fragmentShader:ji.meshphysical_frag};var pM={r:0,b:0,g:0};function Q_e(e,t,n,i,r,o,s){let c,d,a=new ni(0),l=!0===o?0:1,h=null,p=0,g=null;function y(b,P){b.getRGB(pM,sV(e)),i.buffers.color.setClear(pM.r,pM.g,pM.b,P,s)}return{getClearColor:function(){return a},setClearColor:function(b,P=1){a.set(b),l=P,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,y(a,l)},render:function v(b,P){let S=!1,O=!0===P.isScene?P.background:null;O&&O.isTexture&&(O=(P.backgroundBlurriness>0?n:t).get(O));let A=e.xr,H=A.getSession&&A.getSession();H&&"additive"===H.environmentBlendMode&&(O=null),null===O?y(a,l):O&&O.isColor&&(y(O,1),S=!0),(e.autoClear||S)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),O&&(O.isCubeTexture||306===O.mapping)?(void 0===d&&(d=new Vo(new Dd(1,1,1),new wr({name:"BackgroundCubeMaterial",uniforms:uv(bh.backgroundCube.uniforms),vertexShader:bh.backgroundCube.vertexShader,fragmentShader:bh.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(U,X,Y){this.matrixWorld.copyPosition(Y.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=O,d.material.uniforms.flipEnvMap.value=O.isCubeTexture&&!1===O.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,d.material.toneMapped=O.encoding!==Ri,(h!==O||p!==O.version||g!==e.toneMapping)&&(d.material.needsUpdate=!0,h=O,p=O.version,g=e.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):O&&O.isTexture&&(void 0===c&&(c=new Vo(new Uu(2,2),new wr({name:"BackgroundMaterial",uniforms:uv(bh.background.uniforms),vertexShader:bh.background.vertexShader,fragmentShader:bh.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=O,c.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,c.material.toneMapped=O.encoding!==Ri,!0===O.matrixAutoUpdate&&O.updateMatrix(),c.material.uniforms.uvTransform.value.copy(O.matrix),(h!==O||p!==O.version||g!==e.toneMapping)&&(c.material.needsUpdate=!0,h=O,p=O.version,g=e.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}}}function K_e(e,t,n,i){let r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=b(null),c=l,d=!1;function g(he){return i.isWebGL2?e.bindVertexArray(he):o.bindVertexArrayOES(he)}function v(he){return i.isWebGL2?e.deleteVertexArray(he):o.deleteVertexArrayOES(he)}function b(he){let Pe=[],we=[],_e=[];for(let ve=0;ve<r;ve++)Pe[ve]=0,we[ve]=0,_e[ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Pe,enabledAttributes:we,attributeDivisors:_e,object:he,attributes:{},index:null}}function O(){let he=c.newAttributes;for(let Pe=0,we=he.length;Pe<we;Pe++)he[Pe]=0}function A(he){H(he,0)}function H(he,Pe){let _e=c.enabledAttributes,ve=c.attributeDivisors;c.newAttributes[he]=1,0===_e[he]&&(e.enableVertexAttribArray(he),_e[he]=1),ve[he]!==Pe&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](he,Pe),ve[he]=Pe)}function U(){let he=c.newAttributes,Pe=c.enabledAttributes;for(let we=0,_e=Pe.length;we<_e;we++)Pe[we]!==he[we]&&(e.disableVertexAttribArray(we),Pe[we]=0)}function X(he,Pe,we,_e,ve,ke){!0!==i.isWebGL2||5124!==we&&5125!==we?e.vertexAttribPointer(he,Pe,we,_e,ve,ke):e.vertexAttribIPointer(he,Pe,we,ve,ke)}function ce(){de(),d=!0,c!==l&&(c=l,g(c.object))}function de(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function h(he,Pe,we,_e,ve){let ke=!1;if(s){let ze=function y(he,Pe,we){let _e=!0===we.wireframe,ve=a[he.id];void 0===ve&&(ve={},a[he.id]=ve);let ke=ve[Pe.id];void 0===ke&&(ke={},ve[Pe.id]=ke);let ze=ke[_e];return void 0===ze&&(ze=b(function p(){return i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}()),ke[_e]=ze),ze}(_e,we,Pe);c!==ze&&(c=ze,g(c.object)),ke=function P(he,Pe,we,_e){let ve=c.attributes,ke=Pe.attributes,ze=0,Le=we.getAttributes();for(let Ne in Le)if(Le[Ne].location>=0){let $e=ve[Ne],Be=ke[Ne];if(void 0===Be&&("instanceMatrix"===Ne&&he.instanceMatrix&&(Be=he.instanceMatrix),"instanceColor"===Ne&&he.instanceColor&&(Be=he.instanceColor)),void 0===$e||$e.attribute!==Be||Be&&$e.data!==Be.data)return!0;ze++}return c.attributesNum!==ze||c.index!==_e}(he,_e,we,ve),ke&&function S(he,Pe,we,_e){let ve={},ke=Pe.attributes,ze=0,Le=we.getAttributes();for(let Ne in Le)if(Le[Ne].location>=0){let $e=ke[Ne];void 0===$e&&("instanceMatrix"===Ne&&he.instanceMatrix&&($e=he.instanceMatrix),"instanceColor"===Ne&&he.instanceColor&&($e=he.instanceColor));let Be={};Be.attribute=$e,$e&&$e.data&&(Be.data=$e.data),ve[Ne]=Be,ze++}c.attributes=ve,c.attributesNum=ze,c.index=_e}(he,_e,we,ve)}else{let ze=!0===Pe.wireframe;(c.geometry!==_e.id||c.program!==we.id||c.wireframe!==ze)&&(c.geometry=_e.id,c.program=we.id,c.wireframe=ze,ke=!0)}null!==ve&&n.update(ve,34963),(ke||d)&&(d=!1,function Y(he,Pe,we,_e){if(!1===i.isWebGL2&&(he.isInstancedMesh||_e.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;O();let ve=_e.attributes,ke=we.getAttributes(),ze=Pe.defaultAttributeValues;for(let Le in ke){let Ne=ke[Le];if(Ne.location>=0){let $e=ve[Le];if(void 0===$e&&("instanceMatrix"===Le&&he.instanceMatrix&&($e=he.instanceMatrix),"instanceColor"===Le&&he.instanceColor&&($e=he.instanceColor)),void 0!==$e){let Be=$e.normalized,Xe=$e.itemSize,Ge=n.get($e);if(void 0===Ge)continue;let gt=Ge.buffer,Ze=Ge.type,yt=Ge.bytesPerElement;if($e.isInterleavedBufferAttribute){let nt=$e.data,zt=nt.stride,It=$e.offset;if(nt.isInstancedInterleavedBuffer){for(let Ot=0;Ot<Ne.locationSize;Ot++)H(Ne.location+Ot,nt.meshPerAttribute);!0!==he.isInstancedMesh&&void 0===_e._maxInstanceCount&&(_e._maxInstanceCount=nt.meshPerAttribute*nt.count)}else for(let Ot=0;Ot<Ne.locationSize;Ot++)A(Ne.location+Ot);e.bindBuffer(34962,gt);for(let Ot=0;Ot<Ne.locationSize;Ot++)X(Ne.location+Ot,Xe/Ne.locationSize,Ze,Be,zt*yt,(It+Xe/Ne.locationSize*Ot)*yt)}else{if($e.isInstancedBufferAttribute){for(let nt=0;nt<Ne.locationSize;nt++)H(Ne.location+nt,$e.meshPerAttribute);!0!==he.isInstancedMesh&&void 0===_e._maxInstanceCount&&(_e._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let nt=0;nt<Ne.locationSize;nt++)A(Ne.location+nt);e.bindBuffer(34962,gt);for(let nt=0;nt<Ne.locationSize;nt++)X(Ne.location+nt,Xe/Ne.locationSize,Ze,Be,Xe*yt,Xe/Ne.locationSize*nt*yt)}}else if(void 0!==ze){let Be=ze[Le];if(void 0!==Be)switch(Be.length){case 2:e.vertexAttrib2fv(Ne.location,Be);break;case 3:e.vertexAttrib3fv(Ne.location,Be);break;case 4:e.vertexAttrib4fv(Ne.location,Be);break;default:e.vertexAttrib1fv(Ne.location,Be)}}}}U()}(he,Pe,we,_e),null!==ve&&e.bindBuffer(34963,n.get(ve).buffer))},reset:ce,resetDefaultState:de,dispose:function Z(){ce();for(let he in a){let Pe=a[he];for(let we in Pe){let _e=Pe[we];for(let ve in _e)v(_e[ve].object),delete _e[ve];delete Pe[we]}delete a[he]}},releaseStatesOfGeometry:function ee(he){if(void 0===a[he.id])return;let Pe=a[he.id];for(let we in Pe){let _e=Pe[we];for(let ve in _e)v(_e[ve].object),delete _e[ve];delete Pe[we]}delete a[he.id]},releaseStatesOfProgram:function oe(he){for(let Pe in a){let we=a[Pe];if(void 0===we[he.id])continue;let _e=we[he.id];for(let ve in _e)v(_e[ve].object),delete _e[ve];delete we[he.id]}},initAttributes:O,enableAttribute:A,disableUnusedAttributes:U}}function Z_e(e,t,n,i){let o,r=i.isWebGL2;this.setMode=function s(c){o=c},this.render=function a(c,d){e.drawArrays(o,c,d),n.update(d,o,1)},this.renderInstances=function l(c,d,h){if(0===h)return;let p,g;if(r)p=e,g="drawArraysInstanced";else if(p=t.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](o,c,d,h),n.update(d,o,h)}}function J_e(e,t,n){let i;function o(X){if("highp"===X){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";X="mediump"}return"mediump"===X&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=s||t.has("WEBGL_draw_buffers"),d=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),p=e.getParameter(35660),g=e.getParameter(3379),v=e.getParameter(34076),y=e.getParameter(34921),b=e.getParameter(36347),P=e.getParameter(36348),S=e.getParameter(36349),O=p>0,A=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){let X=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:b,maxVaryings:P,maxFragmentUniforms:S,vertexTextures:O,floatFragmentTextures:A,floatVertexTextures:O&&A,maxSamples:s?e.getParameter(36183):0}}function exe(e){let t=this,n=null,i=0,r=!1,o=!1,s=new Ll,a=new Ms,l={value:null,needsUpdate:!1};function d(h,p,g,v){let y=null!==h?h.length:0,b=null;if(0!==y){if(b=l.value,!0!==v||null===b){let P=g+4*y,S=p.matrixWorldInverse;a.getNormalMatrix(S),(null===b||b.length<P)&&(b=new Float32Array(P));for(let O=0,A=g;O!==y;++O,A+=4)s.copy(h[O]).applyMatrix4(S,a),s.normal.toArray(b,A),b[A+3]=s.constant}l.value=b,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,b}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){let g=0!==h.length||p||0!==i||r;return r=p,i=h.length,g},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,p){n=d(h,p,0)},this.setState=function(h,p,g){let v=h.clippingPlanes,y=h.clipIntersection,b=h.clipShadows,P=e.get(h);if(!r||null===v||0===v.length||o&&!b)o?d(null):function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}();else{let S=o?0:i,O=4*S,A=P.clippingState||null;l.value=A,A=d(v,p,O,g);for(let H=0;H!==O;++H)A[H]=n[H];P.clippingState=A,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}}}function txe(e){let t=new WeakMap;function n(s,a){return 303===a?s.mapping=301:304===a&&(s.mapping=302),s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function i(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){let a=s.mapping;if(303===a||304===a){if(t.has(s))return n(t.get(s).texture,s.mapping);{let l=s.image;if(l&&l.height>0){let c=new fye(l.height/2);return c.fromEquirectangularTexture(e,s),t.set(s,c),s.addEventListener("dispose",r),n(c.texture,s.mapping)}return null}}}return s},dispose:function o(){t=new WeakMap}}}var fM=class extends Xm{constructor(e=-1,t=1,n=1,i=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,o=r+l*this.view.width,s-=c*this.view.offsetY,a=s-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},lV=[.125,.215,.35,.446,.526,.582],RT=new fM,cV=new ni,NT=null,Qm=(1+Math.sqrt(5))/2,yv=1/Qm,dV=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,Qm,yv),new te(0,Qm,-yv),new te(yv,0,Qm),new te(-yv,0,Qm),new te(Qm,yv,0),new te(-Qm,yv,0)],hV=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){NT=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=pV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(NT),e.scissorTest=!1,mM(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),NT=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ui,minFilter:Ui,generateMipmaps:!1,type:Tu,format:ra,encoding:Pd,depthBuffer:!1},i=uV(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uV(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function nxe(e){let t=[],n=[],i=[],r=e,o=e-4+1+lV.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);n.push(a);let l=1/a;s>e-4?l=lV[s-e+4-1]:0===s&&(l=0),i.push(l);let c=1/(a-2),d=-c,h=1+c,p=[d,d,h,d,h,h,d,d,h,h,d,h],g=6,v=6,y=3,b=2,P=1,S=new Float32Array(y*v*g),O=new Float32Array(b*v*g),A=new Float32Array(P*v*g);for(let U=0;U<g;U++){let X=U%3*2/3-1,Y=U>2?0:-1;S.set([X,Y,0,X+2/3,Y,0,X+2/3,Y+1,0,X,Y,0,X+2/3,Y+1,0,X,Y+1,0],y*v*U),O.set(p,b*v*U),A.set([U,U,U,U,U,U],P*v*U)}let H=new Xn;H.setAttribute("position",new ui(S,y)),H.setAttribute("uv",new ui(O,b)),H.setAttribute("faceIndex",new ui(A,P)),t.push(H),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(r)),this._blurMaterial=function ixe(e,t,n){let i=new Float32Array(20),r=new te(0,1,0);return new wr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return i}_compileMaterial(e){let t=new Vo(this._lodPlanes[0],e);this._renderer.compile(t,RT)}_sceneToCubeUV(e,t,n,i){let r=new Xa(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(cV),a.toneMapping=0,a.autoClear=!1;let d=new zu({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Vo(new Dd,d),p=!1,g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,p=!0):(d.color.copy(cV),p=!0);for(let v=0;v<6;v++){let y=v%3;0===y?(r.up.set(0,o[v],0),r.lookAt(s[v],0,0)):1===y?(r.up.set(0,0,o[v]),r.lookAt(0,s[v],0)):(r.up.set(0,o[v],0),r.lookAt(0,0,s[v]));let b=this._cubeSize;mM(i,y*b,v>2?b:0,b,b),a.setRenderTarget(i),p&&a.render(h,r),a.render(e,r)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=g}_textureToCubeUV(e,t){let n=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=fV()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pV());let r=i?this._cubemapMaterial:this._equirectMaterial,o=new Vo(this._lodPlanes[0],r);r.uniforms.envMap.value=e;let a=this._cubeSize;mM(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,RT)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,r,dV[(i-1)%dV.length])}t.autoClear=n}_blur(e,t,n,i,r){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,s){let a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let d=new Vo(this._lodPlanes[i],l),h=l.uniforms,p=this._sizeLods[n]-1,g=isFinite(r)?Math.PI/(2*p):2*Math.PI/39,v=r/g,y=isFinite(r)?1+Math.floor(3*v):20;y>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);let b=[],P=0;for(let U=0;U<20;++U){let X=U/v,Y=Math.exp(-X*X/2);b.push(Y),0===U?P+=Y:U<y&&(P+=2*Y)}for(let U=0;U<b.length;U++)b[U]=b[U]/P;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=b,h.latitudinal.value="latitudinal"===o,s&&(h.poleAxis.value=s);let{_lodMax:S}=this;h.dTheta.value=g,h.mipInt.value=S-n;let O=this._sizeLods[i];mM(t,3*O*(i>S-4?i-S+4:0),4*(this._cubeSize-O),3*O,2*O),a.setRenderTarget(t),a.render(d,RT)}};function uV(e,t,n){let i=new Or(e,t,n);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mM(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function pV(){return new wr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function fV(){return new wr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function rxe(e){let t=new WeakMap,n=null;function o(a){let l=a.target;l.removeEventListener("dispose",o);let c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){let l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=t.get(a);return null===n&&(n=new hV(e)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),t.set(a,h),h.texture}if(t.has(a))return t.get(a).texture;{let h=a.image;if(c&&h&&h.height>0||d&&h&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(h)){null===n&&(n=new hV(e));let p=c?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,p),a.addEventListener("dispose",o),p.texture}return null}}}return a},dispose:function s(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function oxe(e){let t={};function n(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return t[i]=r,r}return{has:function(i){return null!==n(i)},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){let r=n(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function sxe(e,t,n,i){let r={},o=new WeakMap;function s(h){let p=h.target;null!==p.index&&t.remove(p.index);for(let v in p.attributes)t.remove(p.attributes[v]);p.removeEventListener("dispose",s),delete r[p.id];let g=o.get(p);g&&(t.remove(g),o.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,n.memory.geometries--}function c(h){let p=[],g=h.index,v=h.attributes.position,y=0;if(null!==g){let S=g.array;y=g.version;for(let O=0,A=S.length;O<A;O+=3){let H=S[O+0],U=S[O+1],X=S[O+2];p.push(H,U,U,X,X,H)}}else{y=v.version;for(let O=0,A=v.array.length/3-1;O<A;O+=3){let H=O+0,U=O+1,X=O+2;p.push(H,U,U,X,X,H)}}let b=new(Gj(p)?cv:rV)(p,1);b.version=y;let P=o.get(h);P&&t.remove(P),o.set(h,b)}return{get:function a(h,p){return!0===r[p.id]||(p.addEventListener("dispose",s),r[p.id]=!0,n.memory.geometries++),p},update:function l(h){let p=h.attributes;for(let v in p)t.update(p[v],34962);let g=h.morphAttributes;for(let v in g){let y=g[v];for(let b=0,P=y.length;b<P;b++)t.update(y[b],34962)}},getWireframeAttribute:function d(h){let p=o.get(h);if(p){let g=h.index;null!==g&&p.version<g.version&&c(h)}else c(h);return o.get(h)}}}function axe(e,t,n,i){let o,a,l,r=i.isWebGL2;this.setMode=function s(p){o=p},this.setIndex=function c(p){a=p.type,l=p.bytesPerElement},this.render=function d(p,g){e.drawElements(o,g,a,p*l),n.update(g,o,1)},this.renderInstances=function h(p,g,v){if(0===v)return;let y,b;if(r)y=e,b="drawElementsInstanced";else if(y=t.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[b](o,g,a,p*l,v),n.update(g,o,v)}}function lxe(e){let n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function i(o,s,a){switch(n.calls++,s){case 4:n.triangles+=a*(o/3);break;case 1:n.lines+=a*(o/2);break;case 3:n.lines+=a*(o-1);break;case 2:n.lines+=a*o;break;case 0:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function cxe(e,t){return e[0]-t[0]}function dxe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function hxe(e,t,n){let i={},r=new Float32Array(8),o=new WeakMap,s=new bi,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,h,p){let g=c.morphTargetInfluences;if(!0===t.isWebGL2){let v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=void 0!==v?v.length:0,b=o.get(d);if(void 0===b||b.count!==y){let O=function(){he.dispose(),o.delete(d),d.removeEventListener("dispose",O)};void 0!==b&&b.texture.dispose();let A=void 0!==d.morphAttributes.position,H=void 0!==d.morphAttributes.normal,U=void 0!==d.morphAttributes.color,X=d.morphAttributes.position||[],Y=d.morphAttributes.normal||[],Z=d.morphAttributes.color||[],ee=0;!0===A&&(ee=1),!0===H&&(ee=2),!0===U&&(ee=3);let oe=d.attributes.position.count*ee,ce=1;oe>t.maxTextureSize&&(ce=Math.ceil(oe/t.maxTextureSize),oe=t.maxTextureSize);let de=new Float32Array(oe*ce*4*y),he=new Xj(de,oe,ce,y);he.type=Cs,he.needsUpdate=!0;let Pe=4*ee;for(let we=0;we<y;we++){let _e=X[we],ve=Y[we],ke=Z[we],ze=oe*ce*4*we;for(let Le=0;Le<_e.count;Le++){let Ne=Le*Pe;!0===A&&(s.fromBufferAttribute(_e,Le),de[ze+Ne+0]=s.x,de[ze+Ne+1]=s.y,de[ze+Ne+2]=s.z,de[ze+Ne+3]=0),!0===H&&(s.fromBufferAttribute(ve,Le),de[ze+Ne+4]=s.x,de[ze+Ne+5]=s.y,de[ze+Ne+6]=s.z,de[ze+Ne+7]=0),!0===U&&(s.fromBufferAttribute(ke,Le),de[ze+Ne+8]=s.x,de[ze+Ne+9]=s.y,de[ze+Ne+10]=s.z,de[ze+Ne+11]=4===ke.itemSize?s.w:1)}}b={count:y,texture:he,size:new Ue(oe,ce)},o.set(d,b),d.addEventListener("dispose",O)}let P=0;for(let O=0;O<g.length;O++)P+=g[O];let S=d.morphTargetsRelative?1:1-P;p.getUniforms().setValue(e,"morphTargetBaseInfluence",S),p.getUniforms().setValue(e,"morphTargetInfluences",g),p.getUniforms().setValue(e,"morphTargetsTexture",b.texture,n),p.getUniforms().setValue(e,"morphTargetsTextureSize",b.size)}else{let v=void 0===g?0:g.length,y=i[d.id];if(void 0===y||y.length!==v){y=[];for(let A=0;A<v;A++)y[A]=[A,0];i[d.id]=y}for(let A=0;A<v;A++){let H=y[A];H[0]=A,H[1]=g[A]}y.sort(dxe);for(let A=0;A<8;A++)A<v&&y[A][1]?(a[A][0]=y[A][0],a[A][1]=y[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(cxe);let b=d.morphAttributes.position,P=d.morphAttributes.normal,S=0;for(let A=0;A<8;A++){let H=a[A],U=H[0],X=H[1];U!==Number.MAX_SAFE_INTEGER&&X?(b&&d.getAttribute("morphTarget"+A)!==b[U]&&d.setAttribute("morphTarget"+A,b[U]),P&&d.getAttribute("morphNormal"+A)!==P[U]&&d.setAttribute("morphNormal"+A,P[U]),r[A]=X,S+=X):(b&&!0===d.hasAttribute("morphTarget"+A)&&d.deleteAttribute("morphTarget"+A),P&&!0===d.hasAttribute("morphNormal"+A)&&d.deleteAttribute("morphNormal"+A),r[A]=0)}let O=d.morphTargetsRelative?1:1-S;p.getUniforms().setValue(e,"morphTargetBaseInfluence",O),p.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function uxe(e,t,n,i){let r=new WeakMap;function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),null!==c.instanceColor&&n.remove(c.instanceColor)}return{update:function o(l){let c=i.render.frame,h=t.get(l,l.geometry);return r.get(h)!==c&&(t.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),null!==l.instanceColor&&n.update(l.instanceColor,34962)),h},dispose:function s(){r=new WeakMap}}}var mV=new jo,gV=new Xj,vV=new class extends jo{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=Ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yV=new TT,bV=[],_V=[],xV=new Float32Array(16),CV=new Float32Array(9),wV=new Float32Array(4);function bv(e,t,n){let i=e[0];if(i<=0||i>0)return e;let r=t*n,o=bV[r];if(void 0===o&&(o=new Float32Array(r),bV[r]=o),0!==t){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=n,e[s].toArray(o,a)}return o}function Vs(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Hs(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function gM(e,t){let n=_V[t];void 0===n&&(n=new Int32Array(t),_V[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function pxe(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function fxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vs(n,t))return;e.uniform2fv(this.addr,t),Hs(n,t)}}function mxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Vs(n,t))return;e.uniform3fv(this.addr,t),Hs(n,t)}}function gxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vs(n,t))return;e.uniform4fv(this.addr,t),Hs(n,t)}}function vxe(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(Vs(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Hs(n,t)}else{if(Vs(n,i))return;wV.set(i),e.uniformMatrix2fv(this.addr,!1,wV),Hs(n,i)}}function yxe(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(Vs(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Hs(n,t)}else{if(Vs(n,i))return;CV.set(i),e.uniformMatrix3fv(this.addr,!1,CV),Hs(n,i)}}function bxe(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(Vs(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Hs(n,t)}else{if(Vs(n,i))return;xV.set(i),e.uniformMatrix4fv(this.addr,!1,xV),Hs(n,i)}}function _xe(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function xxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vs(n,t))return;e.uniform2iv(this.addr,t),Hs(n,t)}}function Cxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Vs(n,t))return;e.uniform3iv(this.addr,t),Hs(n,t)}}function wxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vs(n,t))return;e.uniform4iv(this.addr,t),Hs(n,t)}}function Mxe(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Pxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vs(n,t))return;e.uniform2uiv(this.addr,t),Hs(n,t)}}function Sxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Vs(n,t))return;e.uniform3uiv(this.addr,t),Hs(n,t)}}function Oxe(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vs(n,t))return;e.uniform4uiv(this.addr,t),Hs(n,t)}}function Exe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||mV,r)}function Dxe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||vV,r)}function Axe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||yV,r)}function Txe(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||gV,r)}function kxe(e,t){e.uniform1fv(this.addr,t)}function Rxe(e,t){let n=bv(t,this.size,2);e.uniform2fv(this.addr,n)}function Nxe(e,t){let n=bv(t,this.size,3);e.uniform3fv(this.addr,n)}function Fxe(e,t){let n=bv(t,this.size,4);e.uniform4fv(this.addr,n)}function Lxe(e,t){let n=bv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Bxe(e,t){let n=bv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function zxe(e,t){let n=bv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Uxe(e,t){e.uniform1iv(this.addr,t)}function jxe(e,t){e.uniform2iv(this.addr,t)}function Vxe(e,t){e.uniform3iv(this.addr,t)}function Hxe(e,t){e.uniform4iv(this.addr,t)}function Gxe(e,t){e.uniform1uiv(this.addr,t)}function Wxe(e,t){e.uniform2uiv(this.addr,t)}function qxe(e,t){e.uniform3uiv(this.addr,t)}function Yxe(e,t){e.uniform4uiv(this.addr,t)}function Xxe(e,t,n){let i=this.cache,r=t.length,o=gM(n,r);Vs(i,o)||(e.uniform1iv(this.addr,o),Hs(i,o));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||mV,o[s])}function $xe(e,t,n){let i=this.cache,r=t.length,o=gM(n,r);Vs(i,o)||(e.uniform1iv(this.addr,o),Hs(i,o));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||vV,o[s])}function Qxe(e,t,n){let i=this.cache,r=t.length,o=gM(n,r);Vs(i,o)||(e.uniform1iv(this.addr,o),Hs(i,o));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||yV,o[s])}function Kxe(e,t,n){let i=this.cache,r=t.length,o=gM(n,r);Vs(i,o)||(e.uniform1iv(this.addr,o),Hs(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||gV,o[s])}var Jxe=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function Ixe(e){switch(e){case 5126:return pxe;case 35664:return fxe;case 35665:return mxe;case 35666:return gxe;case 35674:return vxe;case 35675:return yxe;case 35676:return bxe;case 5124:case 35670:return _xe;case 35667:case 35671:return xxe;case 35668:case 35672:return Cxe;case 35669:case 35673:return wxe;case 5125:return Mxe;case 36294:return Pxe;case 36295:return Sxe;case 36296:return Oxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Exe;case 35679:case 36299:case 36307:return Dxe;case 35680:case 36300:case 36308:case 36293:return Axe;case 36289:case 36303:case 36311:case 36292:return Txe}}(t.type)}},eCe=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function Zxe(e){switch(e){case 5126:return kxe;case 35664:return Rxe;case 35665:return Nxe;case 35666:return Fxe;case 35674:return Lxe;case 35675:return Bxe;case 35676:return zxe;case 5124:case 35670:return Uxe;case 35667:case 35671:return jxe;case 35668:case 35672:return Vxe;case 35669:case 35673:return Hxe;case 5125:return Gxe;case 36294:return Wxe;case 36295:return qxe;case 36296:return Yxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Xxe;case 35679:case 36299:case 36307:return $xe;case 35680:case 36300:case 36308:case 36293:return Qxe;case 36289:case 36303:case 36311:case 36292:return Kxe}}(t.type)}},tCe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let i=this.seq;for(let r=0,o=i.length;r!==o;++r){let s=i[r];s.setValue(e,t[s.id],n)}}},LT=/(\w+)(\])?(\[|\.)?/g;function MV(e,t){e.seq.push(t),e.map[t.id]=t}function nCe(e,t,n){let i=e.name,r=i.length;for(LT.lastIndex=0;;){let o=LT.exec(i),s=LT.lastIndex,a=o[1],c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&s+2===r){MV(n,void 0===c?new Jxe(a,e,t):new eCe(a,e,t));break}{let d=n.map[a];void 0===d&&(d=new tCe(a),MV(n,d)),n=d}}}var vM=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){let r=e.getActiveUniform(t,i);nCe(r,e.getUniformLocation(t,r.name),this)}}setValue(e,t,n,i){let r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){let i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){let s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){let n=[];for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.id in t&&n.push(o)}return n}};function PV(e,t,n){let i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var iCe=0;function SV(e,t,n){let i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function rCe(e,t){let n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${n[s]}`)}return i.join("\n")}(e.getShaderSource(t),s)}return r}function sCe(e,t){let n=function oCe(e){switch(e){case Pd:return["Linear","( value )"];case Ri:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function aCe(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bb(e){return""!==e}function OV(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EV(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var hCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function BT(e){return e.replace(hCe,uCe)}function uCe(e,t){let n=ji[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return BT(n)}var pCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DV(e){return e.replace(pCe,fCe)}function fCe(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function AV(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function _Ce(e,t,n,i){let b,P,r=e.getContext(),o=n.defines,s=n.vertexShader,a=n.fragmentShader,l=function mCe(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function gCe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function vCe(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&302===e.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function yCe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function bCe(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),g=n.isWebGL2?"":function lCe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bb).join("\n")}(n),v=function cCe(e){let t=[];for(let n in e){let i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),y=r.createProgram(),S=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(Bb).join("\n"),b.length>0&&(b+="\n"),P=[g,v].filter(Bb).join("\n"),P.length>0&&(P+="\n")):(b=[AV(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bb).join("\n"),P=[g,AV(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?ji.tonemapping_pars_fragment:"",0!==n.toneMapping?aCe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ji.encodings_pars_fragment,sCe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bb).join("\n")),s=BT(s),s=OV(s,n),s=EV(s,n),a=BT(a),a=OV(a,n),a=EV(a,n),s=DV(s),a=DV(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(S="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,P=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+P);let X,Y,A=S+P+a,H=PV(r,35633,S+b+s),U=PV(r,35632,A);if(r.attachShader(y,H),r.attachShader(y,U),void 0!==n.index0AttributeName?r.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),e.debug.checkShaderErrors){let Z=r.getProgramInfoLog(y).trim(),ee=r.getShaderInfoLog(H).trim(),oe=r.getShaderInfoLog(U).trim(),ce=!0,de=!0;if(!1===r.getProgramParameter(y,35714)){ce=!1;let he=SV(r,H,"vertex"),Pe=SV(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+Z+"\n"+he+"\n"+Pe)}else""!==Z?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(""===ee||""===oe)&&(de=!1);de&&(this.diagnostics={runnable:ce,programLog:Z,vertexShader:{log:ee,prefix:b},fragmentShader:{log:oe,prefix:P}})}return r.deleteShader(H),r.deleteShader(U),this.getUniforms=function(){return void 0===X&&(X=new vM(r,y)),X},this.getAttributes=function(){return void 0===Y&&(Y=function dCe(e,t){let n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){let o=e.getActiveAttrib(t,r),s=o.name,a=1;35674===o.type&&(a=2),35675===o.type&&(a=3),35676===o.type&&(a=4),n[s]={type:o.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,y)),Y},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=iCe++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=H,this.fragmentShader=U,this}var xCe=0;function MCe(e,t,n,i,r,o,s){let a=new CT,l=new class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let n=e.fragmentShader,i=this._getShaderStage(e.vertexShader),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new class{constructor(e){this.id=xCe++,this.code=e,this.usedTimes=0}}(e),t.set(e,n)),n}},c=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(Y,Z,ee,oe,ce){let de=oe.fog,he=ce.geometry,we=(Y.isMeshStandardMaterial?n:t).get(Y.envMap||(Y.isMeshStandardMaterial?oe.environment:null)),_e=we&&306===we.mapping?we.image.height:null,ve=v[Y.type];null!==Y.precision&&(g=r.getMaxPrecision(Y.precision),g!==Y.precision&&console.warn("THREE.WebGLProgram.getParameters:",Y.precision,"not supported, using",g,"instead."));let Ne,$e,Be,Xe,ke=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,ze=void 0!==ke?ke.length:0,Le=0;if(void 0!==he.morphAttributes.position&&(Le=1),void 0!==he.morphAttributes.normal&&(Le=2),void 0!==he.morphAttributes.color&&(Le=3),ve){let nt=bh[ve];Ne=nt.vertexShader,$e=nt.fragmentShader}else Ne=Y.vertexShader,$e=Y.fragmentShader,l.update(Y),Be=l.getVertexShaderID(Y),Xe=l.getFragmentShaderID(Y);let Ge=e.getRenderTarget(),Ze=Y.clearcoat>0,yt=Y.iridescence>0;return{isWebGL2:d,shaderID:ve,shaderName:Y.type,vertexShader:Ne,fragmentShader:$e,defines:Y.defines,customVertexShaderID:Be,customFragmentShaderID:Xe,isRawShaderMaterial:!0===Y.isRawShaderMaterial,glslVersion:Y.glslVersion,precision:g,instancing:!0===ce.isInstancedMesh,instancingColor:!0===ce.isInstancedMesh&&null!==ce.instanceColor,supportsVertexTextures:p,outputEncoding:null===Ge?e.outputEncoding:!0===Ge.isXRRenderTarget?Ge.texture.encoding:Pd,map:!!Y.map,matcap:!!Y.matcap,envMap:!!we,envMapMode:we&&we.mapping,envMapCubeUVHeight:_e,lightMap:!!Y.lightMap,aoMap:!!Y.aoMap,emissiveMap:!!Y.emissiveMap,bumpMap:!!Y.bumpMap,normalMap:!!Y.normalMap,objectSpaceNormalMap:1===Y.normalMapType,tangentSpaceNormalMap:0===Y.normalMapType,decodeVideoTexture:!!Y.map&&!0===Y.map.isVideoTexture&&Y.map.encoding===Ri,clearcoat:Ze,clearcoatMap:Ze&&!!Y.clearcoatMap,clearcoatRoughnessMap:Ze&&!!Y.clearcoatRoughnessMap,clearcoatNormalMap:Ze&&!!Y.clearcoatNormalMap,iridescence:yt,iridescenceMap:yt&&!!Y.iridescenceMap,iridescenceThicknessMap:yt&&!!Y.iridescenceThicknessMap,displacementMap:!!Y.displacementMap,roughnessMap:!!Y.roughnessMap,metalnessMap:!!Y.metalnessMap,specularMap:!!Y.specularMap,specularIntensityMap:!!Y.specularIntensityMap,specularColorMap:!!Y.specularColorMap,opaque:!1===Y.transparent&&1===Y.blending,alphaMap:!!Y.alphaMap,alphaTest:Y.alphaTest>0,gradientMap:!!Y.gradientMap,sheen:Y.sheen>0,sheenColorMap:!!Y.sheenColorMap,sheenRoughnessMap:!!Y.sheenRoughnessMap,transmission:Y.transmission>0,transmissionMap:!!Y.transmissionMap,thicknessMap:!!Y.thicknessMap,combine:Y.combine,vertexTangents:!!Y.normalMap&&!!he.attributes.tangent,vertexColors:Y.vertexColors,vertexAlphas:!0===Y.vertexColors&&!!he.attributes.color&&4===he.attributes.color.itemSize,vertexUvs:!!(Y.map||Y.bumpMap||Y.normalMap||Y.specularMap||Y.alphaMap||Y.emissiveMap||Y.roughnessMap||Y.metalnessMap||Y.clearcoatMap||Y.clearcoatRoughnessMap||Y.clearcoatNormalMap||Y.iridescenceMap||Y.iridescenceThicknessMap||Y.displacementMap||Y.transmissionMap||Y.thicknessMap||Y.specularIntensityMap||Y.specularColorMap||Y.sheenColorMap||Y.sheenRoughnessMap),uvsVertexOnly:!(Y.map||Y.bumpMap||Y.normalMap||Y.specularMap||Y.alphaMap||Y.emissiveMap||Y.roughnessMap||Y.metalnessMap||Y.clearcoatNormalMap||Y.iridescenceMap||Y.iridescenceThicknessMap||Y.transmission>0||Y.transmissionMap||Y.thicknessMap||Y.specularIntensityMap||Y.specularColorMap||Y.sheen>0||Y.sheenColorMap||Y.sheenRoughnessMap||!Y.displacementMap),fog:!!de,useFog:!0===Y.fog,fogExp2:de&&de.isFogExp2,flatShading:!!Y.flatShading,sizeAttenuation:Y.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===ce.isSkinnedMesh,morphTargets:void 0!==he.morphAttributes.position,morphNormals:void 0!==he.morphAttributes.normal,morphColors:void 0!==he.morphAttributes.color,morphTargetsCount:ze,morphTextureStride:Le,numDirLights:Z.directional.length,numPointLights:Z.point.length,numSpotLights:Z.spot.length,numSpotLightMaps:Z.spotLightMap.length,numRectAreaLights:Z.rectArea.length,numHemiLights:Z.hemi.length,numDirLightShadows:Z.directionalShadowMap.length,numPointLightShadows:Z.pointShadowMap.length,numSpotLightShadows:Z.spotShadowMap.length,numSpotLightShadowsWithMaps:Z.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:Y.dithering,shadowMapEnabled:e.shadowMap.enabled&&ee.length>0,shadowMapType:e.shadowMap.type,toneMapping:Y.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:Y.premultipliedAlpha,doubleSided:2===Y.side,flipSided:1===Y.side,useDepthPacking:!!Y.depthPacking,depthPacking:Y.depthPacking||0,index0AttributeName:Y.index0AttributeName,extensionDerivatives:Y.extensions&&Y.extensions.derivatives,extensionFragDepth:Y.extensions&&Y.extensions.fragDepth,extensionDrawBuffers:Y.extensions&&Y.extensions.drawBuffers,extensionShaderTextureLOD:Y.extensions&&Y.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:Y.customProgramCacheKey()}},getProgramCacheKey:function b(Y){let Z=[];if(Y.shaderID?Z.push(Y.shaderID):(Z.push(Y.customVertexShaderID),Z.push(Y.customFragmentShaderID)),void 0!==Y.defines)for(let ee in Y.defines)Z.push(ee),Z.push(Y.defines[ee]);return!1===Y.isRawShaderMaterial&&(function P(Y,Z){Y.push(Z.precision),Y.push(Z.outputEncoding),Y.push(Z.envMapMode),Y.push(Z.envMapCubeUVHeight),Y.push(Z.combine),Y.push(Z.vertexUvs),Y.push(Z.fogExp2),Y.push(Z.sizeAttenuation),Y.push(Z.morphTargetsCount),Y.push(Z.morphAttributeCount),Y.push(Z.numDirLights),Y.push(Z.numPointLights),Y.push(Z.numSpotLights),Y.push(Z.numSpotLightMaps),Y.push(Z.numHemiLights),Y.push(Z.numRectAreaLights),Y.push(Z.numDirLightShadows),Y.push(Z.numPointLightShadows),Y.push(Z.numSpotLightShadows),Y.push(Z.numSpotLightShadowsWithMaps),Y.push(Z.shadowMapType),Y.push(Z.toneMapping),Y.push(Z.numClippingPlanes),Y.push(Z.numClipIntersection),Y.push(Z.depthPacking)}(Z,Y),function S(Y,Z){a.disableAll(),Z.isWebGL2&&a.enable(0),Z.supportsVertexTextures&&a.enable(1),Z.instancing&&a.enable(2),Z.instancingColor&&a.enable(3),Z.map&&a.enable(4),Z.matcap&&a.enable(5),Z.envMap&&a.enable(6),Z.lightMap&&a.enable(7),Z.aoMap&&a.enable(8),Z.emissiveMap&&a.enable(9),Z.bumpMap&&a.enable(10),Z.normalMap&&a.enable(11),Z.objectSpaceNormalMap&&a.enable(12),Z.tangentSpaceNormalMap&&a.enable(13),Z.clearcoat&&a.enable(14),Z.clearcoatMap&&a.enable(15),Z.clearcoatRoughnessMap&&a.enable(16),Z.clearcoatNormalMap&&a.enable(17),Z.iridescence&&a.enable(18),Z.iridescenceMap&&a.enable(19),Z.iridescenceThicknessMap&&a.enable(20),Z.displacementMap&&a.enable(21),Z.specularMap&&a.enable(22),Z.roughnessMap&&a.enable(23),Z.metalnessMap&&a.enable(24),Z.gradientMap&&a.enable(25),Z.alphaMap&&a.enable(26),Z.alphaTest&&a.enable(27),Z.vertexColors&&a.enable(28),Z.vertexAlphas&&a.enable(29),Z.vertexUvs&&a.enable(30),Z.vertexTangents&&a.enable(31),Z.uvsVertexOnly&&a.enable(32),Y.push(a.mask),a.disableAll(),Z.fog&&a.enable(0),Z.useFog&&a.enable(1),Z.flatShading&&a.enable(2),Z.logarithmicDepthBuffer&&a.enable(3),Z.skinning&&a.enable(4),Z.morphTargets&&a.enable(5),Z.morphNormals&&a.enable(6),Z.morphColors&&a.enable(7),Z.premultipliedAlpha&&a.enable(8),Z.shadowMapEnabled&&a.enable(9),Z.physicallyCorrectLights&&a.enable(10),Z.doubleSided&&a.enable(11),Z.flipSided&&a.enable(12),Z.useDepthPacking&&a.enable(13),Z.dithering&&a.enable(14),Z.specularIntensityMap&&a.enable(15),Z.specularColorMap&&a.enable(16),Z.transmission&&a.enable(17),Z.transmissionMap&&a.enable(18),Z.thicknessMap&&a.enable(19),Z.sheen&&a.enable(20),Z.sheenColorMap&&a.enable(21),Z.sheenRoughnessMap&&a.enable(22),Z.decodeVideoTexture&&a.enable(23),Z.opaque&&a.enable(24),Y.push(a.mask)}(Z,Y),Z.push(e.outputEncoding)),Z.push(Y.customProgramCacheKey),Z.join()},getUniforms:function O(Y){let ee,Z=v[Y.type];return ee=Z?pv.clone(bh[Z].uniforms):Y.uniforms,ee},acquireProgram:function A(Y,Z){let ee;for(let oe=0,ce=c.length;oe<ce;oe++){let de=c[oe];if(de.cacheKey===Z){ee=de,++ee.usedTimes;break}}return void 0===ee&&(ee=new _Ce(e,Z,Y,o),c.push(ee)),ee},releaseProgram:function H(Y){if(0==--Y.usedTimes){let Z=c.indexOf(Y);c[Z]=c[c.length-1],c.pop(),Y.destroy()}},releaseShaderCache:function U(Y){l.remove(Y)},programs:c,dispose:function X(){l.dispose()}}}function PCe(){let e=new WeakMap;return{get:function t(o){let s=e.get(o);return void 0===s&&(s={},e.set(o,s)),s},remove:function n(o){e.delete(o)},update:function i(o,s,a){e.get(o)[s]=a},dispose:function r(){e=new WeakMap}}}function SCe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function TV(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function IV(){let e=[],t=0,n=[],i=[],r=[];function s(h,p,g,v,y,b){let P=e[t];return void 0===P?(P={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:y,group:b},e[t]=P):(P.id=h.id,P.object=h,P.geometry=p,P.material=g,P.groupOrder=v,P.renderOrder=h.renderOrder,P.z=y,P.group=b),t++,P}return{opaque:n,transmissive:i,transparent:r,init:function o(){t=0,n.length=0,i.length=0,r.length=0},push:function a(h,p,g,v,y,b){let P=s(h,p,g,v,y,b);g.transmission>0?i.push(P):!0===g.transparent?r.push(P):n.push(P)},unshift:function l(h,p,g,v,y,b){let P=s(h,p,g,v,y,b);g.transmission>0?i.unshift(P):!0===g.transparent?r.unshift(P):n.unshift(P)},finish:function d(){for(let h=t,p=e.length;h<p;h++){let g=e[h];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function c(h,p){n.length>1&&n.sort(h||SCe),i.length>1&&i.sort(p||TV),r.length>1&&r.sort(p||TV)}}}function OCe(){let e=new WeakMap;return{get:function t(i,r){let s,o=e.get(i);return void 0===o?(s=new IV,e.set(i,[s])):r>=o.length?(s=new IV,o.push(s)):s=o[r],s},dispose:function n(){e=new WeakMap}}}function ECe(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new te,color:new ni};break;case"SpotLight":n={position:new te,direction:new te,color:new ni,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new te,color:new ni,distance:0,decay:0};break;case"HemisphereLight":n={direction:new te,skyColor:new ni,groundColor:new ni};break;case"RectAreaLight":n={color:new ni,position:new te,halfWidth:new te,halfHeight:new te}}return e[t.id]=n,n}}}var ACe=0;function TCe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ICe(e,t){let n=new ECe,i=function DCe(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new te);let o=new te,s=new qt,a=new qt;return{setup:function l(d,h){let p=0,g=0,v=0;for(let oe=0;oe<9;oe++)r.probe[oe].set(0,0,0);let y=0,b=0,P=0,S=0,O=0,A=0,H=0,U=0,X=0,Y=0;d.sort(TCe);let Z=!0!==h?Math.PI:1;for(let oe=0,ce=d.length;oe<ce;oe++){let de=d[oe],he=de.color,Pe=de.intensity,we=de.distance,_e=de.shadow&&de.shadow.map?de.shadow.map.texture:null;if(de.isAmbientLight)p+=he.r*Pe*Z,g+=he.g*Pe*Z,v+=he.b*Pe*Z;else if(de.isLightProbe)for(let ve=0;ve<9;ve++)r.probe[ve].addScaledVector(de.sh.coefficients[ve],Pe);else if(de.isDirectionalLight){let ve=n.get(de);if(ve.color.copy(de.color).multiplyScalar(de.intensity*Z),de.castShadow){let ke=de.shadow,ze=i.get(de);ze.shadowBias=ke.bias,ze.shadowNormalBias=ke.normalBias,ze.shadowRadius=ke.radius,ze.shadowMapSize=ke.mapSize,r.directionalShadow[y]=ze,r.directionalShadowMap[y]=_e,r.directionalShadowMatrix[y]=de.shadow.matrix,A++}r.directional[y]=ve,y++}else if(de.isSpotLight){let ve=n.get(de);ve.position.setFromMatrixPosition(de.matrixWorld),ve.color.copy(he).multiplyScalar(Pe*Z),ve.distance=we,ve.coneCos=Math.cos(de.angle),ve.penumbraCos=Math.cos(de.angle*(1-de.penumbra)),ve.decay=de.decay,r.spot[P]=ve;let ke=de.shadow;if(de.map&&(r.spotLightMap[X]=de.map,X++,ke.updateMatrices(de),de.castShadow&&Y++),r.spotLightMatrix[P]=ke.matrix,de.castShadow){let ze=i.get(de);ze.shadowBias=ke.bias,ze.shadowNormalBias=ke.normalBias,ze.shadowRadius=ke.radius,ze.shadowMapSize=ke.mapSize,r.spotShadow[P]=ze,r.spotShadowMap[P]=_e,U++}P++}else if(de.isRectAreaLight){let ve=n.get(de);ve.color.copy(he).multiplyScalar(Pe),ve.halfWidth.set(.5*de.width,0,0),ve.halfHeight.set(0,.5*de.height,0),r.rectArea[S]=ve,S++}else if(de.isPointLight){let ve=n.get(de);if(ve.color.copy(de.color).multiplyScalar(de.intensity*Z),ve.distance=de.distance,ve.decay=de.decay,de.castShadow){let ke=de.shadow,ze=i.get(de);ze.shadowBias=ke.bias,ze.shadowNormalBias=ke.normalBias,ze.shadowRadius=ke.radius,ze.shadowMapSize=ke.mapSize,ze.shadowCameraNear=ke.camera.near,ze.shadowCameraFar=ke.camera.far,r.pointShadow[b]=ze,r.pointShadowMap[b]=_e,r.pointShadowMatrix[b]=de.shadow.matrix,H++}r.point[b]=ve,b++}else if(de.isHemisphereLight){let ve=n.get(de);ve.skyColor.copy(de.color).multiplyScalar(Pe*Z),ve.groundColor.copy(de.groundColor).multiplyScalar(Pe*Z),r.hemi[O]=ve,O++}}S>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=un.LTC_FLOAT_1,r.rectAreaLTC2=un.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=un.LTC_HALF_1,r.rectAreaLTC2=un.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=v;let ee=r.hash;(ee.directionalLength!==y||ee.pointLength!==b||ee.spotLength!==P||ee.rectAreaLength!==S||ee.hemiLength!==O||ee.numDirectionalShadows!==A||ee.numPointShadows!==H||ee.numSpotShadows!==U||ee.numSpotMaps!==X)&&(r.directional.length=y,r.spot.length=P,r.rectArea.length=S,r.point.length=b,r.hemi.length=O,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=H,r.pointShadowMap.length=H,r.spotShadow.length=U,r.spotShadowMap.length=U,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=H,r.spotLightMatrix.length=U+X-Y,r.spotLightMap.length=X,r.numSpotLightShadowsWithMaps=Y,ee.directionalLength=y,ee.pointLength=b,ee.spotLength=P,ee.rectAreaLength=S,ee.hemiLength=O,ee.numDirectionalShadows=A,ee.numPointShadows=H,ee.numSpotShadows=U,ee.numSpotMaps=X,r.version=ACe++)},setupView:function c(d,h){let p=0,g=0,v=0,y=0,b=0,P=h.matrixWorldInverse;for(let S=0,O=d.length;S<O;S++){let A=d[S];if(A.isDirectionalLight){let H=r.directional[p];H.direction.setFromMatrixPosition(A.matrixWorld),o.setFromMatrixPosition(A.target.matrixWorld),H.direction.sub(o),H.direction.transformDirection(P),p++}else if(A.isSpotLight){let H=r.spot[v];H.position.setFromMatrixPosition(A.matrixWorld),H.position.applyMatrix4(P),H.direction.setFromMatrixPosition(A.matrixWorld),o.setFromMatrixPosition(A.target.matrixWorld),H.direction.sub(o),H.direction.transformDirection(P),v++}else if(A.isRectAreaLight){let H=r.rectArea[y];H.position.setFromMatrixPosition(A.matrixWorld),H.position.applyMatrix4(P),a.identity(),s.copy(A.matrixWorld),s.premultiply(P),a.extractRotation(s),H.halfWidth.set(.5*A.width,0,0),H.halfHeight.set(0,.5*A.height,0),H.halfWidth.applyMatrix4(a),H.halfHeight.applyMatrix4(a),y++}else if(A.isPointLight){let H=r.point[g];H.position.setFromMatrixPosition(A.matrixWorld),H.position.applyMatrix4(P),g++}else if(A.isHemisphereLight){let H=r.hemi[b];H.direction.setFromMatrixPosition(A.matrixWorld),H.direction.transformDirection(P),b++}}},state:r}}function kV(e,t){let n=new ICe(e,t),i=[],r=[];return{init:function o(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function l(d){n.setup(i,d)},setupLightsView:function c(d){n.setupView(i,d)},pushLight:function s(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function kCe(e,t){let n=new WeakMap;return{get:function i(o,s=0){let l,a=n.get(o);return void 0===a?(l=new kV(e,t),n.set(o,[l])):s>=a.length?(l=new kV(e,t),a.push(l)):l=a[s],l},dispose:function r(){n=new WeakMap}}}var RV=class extends kb{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Iu,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},RCe=class extends kb{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function LCe(e,t,n){let i=new kT,r=new Ue,o=new Ue,s=new bi,a=new RV({depthPacking:3201}),l=new RCe,c={},d=n.maxTextureSize,h={0:1,1:0,2:2},p=new wr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;let v=new Xn;v.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new Vo(v,p),b=this;function P(A,H){let U=t.update(y);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,g.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===A.mapPass&&(A.mapPass=new Or(r.x,r.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,e.setRenderTarget(A.mapPass),e.clear(),e.renderBufferDirect(H,null,U,p,y,null),g.uniforms.shadow_pass.value=A.mapPass.texture,g.uniforms.resolution.value=A.mapSize,g.uniforms.radius.value=A.radius,e.setRenderTarget(A.map),e.clear(),e.renderBufferDirect(H,null,U,g,y,null)}function S(A,H,U,X,Y,Z){let ee=null,oe=!0===U.isPointLight?A.customDistanceMaterial:A.customDepthMaterial;if(void 0!==oe)ee=oe;else if(ee=!0===U.isPointLight?l:a,e.localClippingEnabled&&!0===H.clipShadows&&Array.isArray(H.clippingPlanes)&&0!==H.clippingPlanes.length||H.displacementMap&&0!==H.displacementScale||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0){let ce=ee.uuid,de=H.uuid,he=c[ce];void 0===he&&(he={},c[ce]=he);let Pe=he[de];void 0===Pe&&(Pe=ee.clone(),he[de]=Pe),ee=Pe}return ee.visible=H.visible,ee.wireframe=H.wireframe,ee.side=3===Z?null!==H.shadowSide?H.shadowSide:H.side:null!==H.shadowSide?H.shadowSide:h[H.side],ee.alphaMap=H.alphaMap,ee.alphaTest=H.alphaTest,ee.map=H.map,ee.clipShadows=H.clipShadows,ee.clippingPlanes=H.clippingPlanes,ee.clipIntersection=H.clipIntersection,ee.displacementMap=H.displacementMap,ee.displacementScale=H.displacementScale,ee.displacementBias=H.displacementBias,ee.wireframeLinewidth=H.wireframeLinewidth,ee.linewidth=H.linewidth,!0===U.isPointLight&&!0===ee.isMeshDistanceMaterial&&(ee.referencePosition.setFromMatrixPosition(U.matrixWorld),ee.nearDistance=X,ee.farDistance=Y),ee}function O(A,H,U,X,Y){if(!1===A.visible)return;if(A.layers.test(H.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&3===Y)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,A.matrixWorld);let ee=t.update(A),oe=A.material;if(Array.isArray(oe)){let ce=ee.groups;for(let de=0,he=ce.length;de<he;de++){let Pe=ce[de],we=oe[Pe.materialIndex];if(we&&we.visible){let _e=S(A,we,X,U.near,U.far,Y);e.renderBufferDirect(U,null,ee,_e,A,Pe)}}}else if(oe.visible){let ce=S(A,oe,X,U.near,U.far,Y);e.renderBufferDirect(U,null,ee,ce,A,null)}}let Z=A.children;for(let ee=0,oe=Z.length;ee<oe;ee++)O(Z[ee],H,U,X,Y)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(A,H,U){if(!1===b.enabled||!1===b.autoUpdate&&!1===b.needsUpdate||0===A.length)return;let X=e.getRenderTarget(),Y=e.getActiveCubeFace(),Z=e.getActiveMipmapLevel(),ee=e.state;ee.setBlending(0),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);for(let oe=0,ce=A.length;oe<ce;oe++){let de=A[oe],he=de.shadow;if(void 0===he){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(!1===he.autoUpdate&&!1===he.needsUpdate)continue;r.copy(he.mapSize);let Pe=he.getFrameExtents();r.multiply(Pe),o.copy(he.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/Pe.x),r.x=o.x*Pe.x,he.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/Pe.y),r.y=o.y*Pe.y,he.mapSize.y=o.y)),null===he.map&&(he.map=new Or(r.x,r.y,3!==this.type?{minFilter:Ir,magFilter:Ir}:{}),he.map.texture.name=de.name+".shadowMap",he.camera.updateProjectionMatrix()),e.setRenderTarget(he.map),e.clear();let we=he.getViewportCount();for(let _e=0;_e<we;_e++){let ve=he.getViewport(_e);s.set(o.x*ve.x,o.y*ve.y,o.x*ve.z,o.y*ve.w),ee.viewport(s),he.updateMatrices(de,_e),i=he.getFrustum(),O(H,U,he.camera,de,this.type)}!0!==he.isPointLightShadow&&3===this.type&&P(he,U),he.needsUpdate=!1}b.needsUpdate=!1,e.setRenderTarget(X,Y,Z)}}function BCe(e,t,n){let i=n.isWebGL2,a=new function r(){let et=!1,At=new bi,Jt=null,hn=new bi(0,0,0,0);return{setMask:function(Zn){Jt!==Zn&&!et&&(e.colorMask(Zn,Zn,Zn,Zn),Jt=Zn)},setLocked:function(Zn){et=Zn},setClear:function(Zn,di,Io,Qs,Qh){!0===Qh&&(Zn*=Qs,di*=Qs,Io*=Qs),At.set(Zn,di,Io,Qs),!1===hn.equals(At)&&(e.clearColor(Zn,di,Io,Qs),hn.copy(At))},reset:function(){et=!1,Jt=null,hn.set(-1,0,0,0)}}},l=new function o(){let et=!1,At=null,Jt=null,hn=null;return{setTest:function(Zn){Zn?gt(2929):Ze(2929)},setMask:function(Zn){At!==Zn&&!et&&(e.depthMask(Zn),At=Zn)},setFunc:function(Zn){if(Jt!==Zn){switch(Zn){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}Jt=Zn}},setLocked:function(Zn){et=Zn},setClear:function(Zn){hn!==Zn&&(e.clearDepth(Zn),hn=Zn)},reset:function(){et=!1,At=null,Jt=null,hn=null}}},c=new function s(){let et=!1,At=null,Jt=null,hn=null,Zn=null,di=null,Io=null,Qs=null,Qh=null;return{setTest:function(Po){et||(Po?gt(2960):Ze(2960))},setMask:function(Po){At!==Po&&!et&&(e.stencilMask(Po),At=Po)},setFunc:function(Po,vc,Pl){(Jt!==Po||hn!==vc||Zn!==Pl)&&(e.stencilFunc(Po,vc,Pl),Jt=Po,hn=vc,Zn=Pl)},setOp:function(Po,vc,Pl){(di!==Po||Io!==vc||Qs!==Pl)&&(e.stencilOp(Po,vc,Pl),di=Po,Io=vc,Qs=Pl)},setLocked:function(Po){et=Po},setClear:function(Po){Qh!==Po&&(e.clearStencil(Po),Qh=Po)},reset:function(){et=!1,At=null,Jt=null,hn=null,Zn=null,di=null,Io=null,Qs=null,Qh=null}}},d=new WeakMap,h=new WeakMap,p={},g={},v=new WeakMap,y=[],b=null,P=!1,S=null,O=null,A=null,H=null,U=null,X=null,Y=null,Z=!1,ee=null,oe=null,ce=null,de=null,he=null,Pe=e.getParameter(35661),we=!1,_e=0,ve=e.getParameter(7938);-1!==ve.indexOf("WebGL")?(_e=parseFloat(/^WebGL (\d)/.exec(ve)[1]),we=_e>=1):-1!==ve.indexOf("OpenGL ES")&&(_e=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),we=_e>=2);let ke=null,ze={},Le=e.getParameter(3088),Ne=e.getParameter(2978),$e=(new bi).fromArray(Le),Be=(new bi).fromArray(Ne);function Xe(et,At,Jt){let hn=new Uint8Array(4),Zn=e.createTexture();e.bindTexture(et,Zn),e.texParameteri(et,10241,9728),e.texParameteri(et,10240,9728);for(let di=0;di<Jt;di++)e.texImage2D(At+di,0,6408,1,1,0,6408,5121,hn);return Zn}let Ge={};function gt(et){!0!==p[et]&&(e.enable(et),p[et]=!0)}function Ze(et){!1!==p[et]&&(e.disable(et),p[et]=!1)}Ge[3553]=Xe(3553,3553,1),Ge[34067]=Xe(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),gt(2929),l.setFunc(3),xn(!1),Dn(1),gt(2884),vn(0);let It={100:32774,101:32778,102:32779};if(i)It[103]=32775,It[104]=32776;else{let et=t.get("EXT_blend_minmax");null!==et&&(It[103]=et.MIN_EXT,It[104]=et.MAX_EXT)}let Ot={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function vn(et,At,Jt,hn,Zn,di,Io,Qs){if(0!==et){if(!1===P&&(gt(3042),P=!0),5===et)Zn=Zn||At,di=di||Jt,Io=Io||hn,(At!==O||Zn!==U)&&(e.blendEquationSeparate(It[At],It[Zn]),O=At,U=Zn),(Jt!==A||hn!==H||di!==X||Io!==Y)&&(e.blendFuncSeparate(Ot[Jt],Ot[hn],Ot[di],Ot[Io]),A=Jt,H=hn,X=di,Y=Io),S=et,Z=!1;else if(et!==S||Qs!==Z){if((100!==O||100!==U)&&(e.blendEquation(32774),O=100,U=100),Qs)switch(et){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",et)}else switch(et){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",et)}A=null,H=null,X=null,Y=null,S=et,Z=Qs}}else!0===P&&(Ze(3042),P=!1)}function xn(et){ee!==et&&(e.frontFace(et?2304:2305),ee=et)}function Dn(et){0!==et?(gt(2884),et!==oe&&e.cullFace(1===et?1029:2===et?1028:1032)):Ze(2884),oe=et}function sn(et,At,Jt){et?(gt(32823),(de!==At||he!==Jt)&&(e.polygonOffset(At,Jt),de=At,he=Jt)):Ze(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:gt,disable:Ze,bindFramebuffer:function yt(et,At){return g[et]!==At&&(e.bindFramebuffer(et,At),g[et]=At,i&&(36009===et&&(g[36160]=At),36160===et&&(g[36009]=At)),!0)},drawBuffers:function nt(et,At){let Jt=y,hn=!1;if(et)if(Jt=v.get(At),void 0===Jt&&(Jt=[],v.set(At,Jt)),et.isWebGLMultipleRenderTargets){let Zn=et.texture;if(Jt.length!==Zn.length||36064!==Jt[0]){for(let di=0,Io=Zn.length;di<Io;di++)Jt[di]=36064+di;Jt.length=Zn.length,hn=!0}}else 36064!==Jt[0]&&(Jt[0]=36064,hn=!0);else 1029!==Jt[0]&&(Jt[0]=1029,hn=!0);hn&&(n.isWebGL2?e.drawBuffers(Jt):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Jt))},useProgram:function zt(et){return b!==et&&(e.useProgram(et),b=et,!0)},setBlending:vn,setMaterial:function yn(et,At){2===et.side?Ze(2884):gt(2884);let Jt=1===et.side;At&&(Jt=!Jt),xn(Jt),1===et.blending&&!1===et.transparent?vn(0):vn(et.blending,et.blendEquation,et.blendSrc,et.blendDst,et.blendEquationAlpha,et.blendSrcAlpha,et.blendDstAlpha,et.premultipliedAlpha),l.setFunc(et.depthFunc),l.setTest(et.depthTest),l.setMask(et.depthWrite),a.setMask(et.colorWrite);let hn=et.stencilWrite;c.setTest(hn),hn&&(c.setMask(et.stencilWriteMask),c.setFunc(et.stencilFunc,et.stencilRef,et.stencilFuncMask),c.setOp(et.stencilFail,et.stencilZFail,et.stencilZPass)),sn(et.polygonOffset,et.polygonOffsetFactor,et.polygonOffsetUnits),!0===et.alphaToCoverage?gt(32926):Ze(32926)},setFlipSided:xn,setCullFace:Dn,setLineWidth:function ln(et){et!==ce&&(we&&e.lineWidth(et),ce=et)},setPolygonOffset:sn,setScissorTest:function Vn(et){et?gt(3089):Ze(3089)},activeTexture:function ti(et){void 0===et&&(et=33984+Pe-1),ke!==et&&(e.activeTexture(et),ke=et)},bindTexture:function Te(et,At,Jt){void 0===Jt&&(Jt=null===ke?33984+Pe-1:ke);let hn=ze[Jt];void 0===hn&&(hn={type:void 0,texture:void 0},ze[Jt]=hn),(hn.type!==et||hn.texture!==At)&&(ke!==Jt&&(e.activeTexture(Jt),ke=Jt),e.bindTexture(et,At||Ge[et]),hn.type=et,hn.texture=At)},unbindTexture:function Me(){let et=ze[ke];void 0!==et&&void 0!==et.type&&(e.bindTexture(et.type,null),et.type=void 0,et.texture=void 0)},compressedTexImage2D:function ct(){try{e.compressedTexImage2D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},compressedTexImage3D:function Xt(){try{e.compressedTexImage3D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},texImage2D:function Hn(){try{e.texImage2D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},texImage3D:function zn(){try{e.texImage3D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},updateUBOMapping:function mr(et,At){let Jt=h.get(At);void 0===Jt&&(Jt=new WeakMap,h.set(At,Jt));let hn=Jt.get(et);void 0===hn&&(hn=e.getUniformBlockIndex(At,et.name),Jt.set(et,hn))},uniformBlockBinding:function Xr(et,At){let Jt=h.get(At).get(et);d.get(At)!==Jt&&(e.uniformBlockBinding(At,Jt,et.__bindingPointIndex),d.set(At,Jt))},texStorage2D:function Ht(){try{e.texStorage2D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},texStorage3D:function cn(){try{e.texStorage3D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},texSubImage2D:function fe(){try{e.texSubImage2D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},texSubImage3D:function Tt(){try{e.texSubImage3D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},compressedTexSubImage2D:function Bn(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},compressedTexSubImage3D:function pn(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(et){console.error("THREE.WebGLState:",et)}},scissor:function mi(et){!1===$e.equals(et)&&(e.scissor(et.x,et.y,et.z,et.w),$e.copy(et))},viewport:function ri(et){!1===Be.equals(et)&&(e.viewport(et.x,et.y,et.z,et.w),Be.copy(et))},reset:function hr(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),p={},ke=null,ze={},g={},v=new WeakMap,y=[],b=null,P=!1,S=null,O=null,A=null,H=null,U=null,X=null,Y=null,Z=!1,ee=null,oe=null,ce=null,de=null,he=null,$e.set(0,0,e.canvas.width,e.canvas.height),Be.set(0,0,e.canvas.width,e.canvas.height),a.reset(),l.reset(),c.reset()}}}function zCe(e,t,n,i,r,o,s){let y,a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap,b=new WeakMap,P=!1;try{P=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function S(Te,Me){return P?new OffscreenCanvas(Te,Me):Db("canvas")}function O(Te,Me,ct,Xt){let fe=1;if((Te.width>Xt||Te.height>Xt)&&(fe=Xt/Math.max(Te.width,Te.height)),fe<1||!0===Me){if(typeof HTMLImageElement<"u"&&Te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Te instanceof ImageBitmap){let Tt=Me?Xw:Math.floor,Bn=Tt(fe*Te.width),pn=Tt(fe*Te.height);void 0===y&&(y=S(Bn,pn));let Ht=ct?S(Bn,pn):y;return Ht.width=Bn,Ht.height=pn,Ht.getContext("2d").drawImage(Te,0,0,Bn,pn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+Bn+"x"+pn+")."),Ht}return"data"in Te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),Te}return Te}function A(Te){return dT(Te.width)&&dT(Te.height)}function U(Te,Me){return Te.generateMipmaps&&Me&&Te.minFilter!==Ir&&Te.minFilter!==Ui}function X(Te){e.generateMipmap(Te)}function Y(Te,Me,ct,Xt,fe=!1){if(!1===a)return Me;if(null!==Te){if(void 0!==e[Te])return e[Te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Te+"'")}let Tt=Me;return 6403===Me&&(5126===ct&&(Tt=33326),5131===ct&&(Tt=33325),5121===ct&&(Tt=33321)),33319===Me&&(5126===ct&&(Tt=33328),5131===ct&&(Tt=33327),5121===ct&&(Tt=33323)),6408===Me&&(5126===ct&&(Tt=34836),5131===ct&&(Tt=34842),5121===ct&&(Tt=Xt===Ri&&!1===fe?35907:32856),32819===ct&&(Tt=32854),32820===ct&&(Tt=32855)),(33325===Tt||33326===Tt||33327===Tt||33328===Tt||34842===Tt||34836===Tt)&&t.get("EXT_color_buffer_float"),Tt}function Z(Te,Me,ct){return!0===U(Te,ct)||Te.isFramebufferTexture&&Te.minFilter!==Ir&&Te.minFilter!==Ui?Math.log2(Math.max(Me.width,Me.height))+1:void 0!==Te.mipmaps&&Te.mipmaps.length>0?Te.mipmaps.length:Te.isCompressedTexture&&Array.isArray(Te.image)?Me.mipmaps.length:1}function ee(Te){return Te===Ir||1004===Te||1005===Te?9728:9729}function oe(Te){let Me=Te.target;Me.removeEventListener("dispose",oe),function de(Te){let Me=i.get(Te);if(void 0===Me.__webglInit)return;let ct=Te.source,Xt=b.get(ct);if(Xt){let fe=Xt[Me.__cacheKey];fe.usedTimes--,0===fe.usedTimes&&he(Te),0===Object.keys(Xt).length&&b.delete(ct)}i.remove(Te)}(Me),Me.isVideoTexture&&v.delete(Me)}function ce(Te){let Me=Te.target;Me.removeEventListener("dispose",ce),function Pe(Te){let Me=Te.texture,ct=i.get(Te),Xt=i.get(Me);if(void 0!==Xt.__webglTexture&&(e.deleteTexture(Xt.__webglTexture),s.memory.textures--),Te.depthTexture&&Te.depthTexture.dispose(),Te.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++)e.deleteFramebuffer(ct.__webglFramebuffer[fe]),ct.__webglDepthbuffer&&e.deleteRenderbuffer(ct.__webglDepthbuffer[fe]);else{if(e.deleteFramebuffer(ct.__webglFramebuffer),ct.__webglDepthbuffer&&e.deleteRenderbuffer(ct.__webglDepthbuffer),ct.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ct.__webglMultisampledFramebuffer),ct.__webglColorRenderbuffer)for(let fe=0;fe<ct.__webglColorRenderbuffer.length;fe++)ct.__webglColorRenderbuffer[fe]&&e.deleteRenderbuffer(ct.__webglColorRenderbuffer[fe]);ct.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ct.__webglDepthRenderbuffer)}if(Te.isWebGLMultipleRenderTargets)for(let fe=0,Tt=Me.length;fe<Tt;fe++){let Bn=i.get(Me[fe]);Bn.__webglTexture&&(e.deleteTexture(Bn.__webglTexture),s.memory.textures--),i.remove(Me[fe])}i.remove(Me),i.remove(Te)}(Me)}function he(Te){let Me=i.get(Te);e.deleteTexture(Me.__webglTexture),delete b.get(Te.source)[Me.__cacheKey],s.memory.textures--}let we=0;function ze(Te,Me){let ct=i.get(Te);if(Te.isVideoTexture&&function Vn(Te){let Me=s.render.frame;v.get(Te)!==Me&&(v.set(Te,Me),Te.update())}(Te),!1===Te.isRenderTargetTexture&&Te.version>0&&ct.__version!==Te.version){let Xt=Te.image;if(null===Xt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Xt.complete)return void Ze(ct,Te,Me);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,ct.__webglTexture,33984+Me)}let Be={[Du]:10497,[Ao]:33071,1002:33648},Xe={[Ir]:9728,1004:9984,1005:9986,[Ui]:9729,1007:9985,[K0]:9987};function Ge(Te,Me,ct){if(ct?(e.texParameteri(Te,10242,Be[Me.wrapS]),e.texParameteri(Te,10243,Be[Me.wrapT]),(32879===Te||35866===Te)&&e.texParameteri(Te,32882,Be[Me.wrapR]),e.texParameteri(Te,10240,Xe[Me.magFilter]),e.texParameteri(Te,10241,Xe[Me.minFilter])):(e.texParameteri(Te,10242,33071),e.texParameteri(Te,10243,33071),(32879===Te||35866===Te)&&e.texParameteri(Te,32882,33071),(Me.wrapS!==Ao||Me.wrapT!==Ao)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(Te,10240,ee(Me.magFilter)),e.texParameteri(Te,10241,ee(Me.minFilter)),Me.minFilter!==Ir&&Me.minFilter!==Ui&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let Xt=t.get("EXT_texture_filter_anisotropic");if(Me.magFilter===Ir||1005!==Me.minFilter&&Me.minFilter!==K0||Me.type===Cs&&!1===t.has("OES_texture_float_linear")||!1===a&&Me.type===Tu&&!1===t.has("OES_texture_half_float_linear"))return;(Me.anisotropy>1||i.get(Me).__currentAnisotropy)&&(e.texParameterf(Te,Xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Me.anisotropy,r.getMaxAnisotropy())),i.get(Me).__currentAnisotropy=Me.anisotropy)}}function gt(Te,Me){let ct=!1;void 0===Te.__webglInit&&(Te.__webglInit=!0,Me.addEventListener("dispose",oe));let Xt=Me.source,fe=b.get(Xt);void 0===fe&&(fe={},b.set(Xt,fe));let Tt=function ke(Te){let Me=[];return Me.push(Te.wrapS),Me.push(Te.wrapT),Me.push(Te.wrapR||0),Me.push(Te.magFilter),Me.push(Te.minFilter),Me.push(Te.anisotropy),Me.push(Te.internalFormat),Me.push(Te.format),Me.push(Te.type),Me.push(Te.generateMipmaps),Me.push(Te.premultiplyAlpha),Me.push(Te.flipY),Me.push(Te.unpackAlignment),Me.push(Te.encoding),Me.join()}(Me);if(Tt!==Te.__cacheKey){void 0===fe[Tt]&&(fe[Tt]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,ct=!0),fe[Tt].usedTimes++;let Bn=fe[Te.__cacheKey];void 0!==Bn&&(fe[Te.__cacheKey].usedTimes--,0===Bn.usedTimes&&he(Me)),Te.__cacheKey=Tt,Te.__webglTexture=fe[Tt].texture}return ct}function Ze(Te,Me,ct){let Xt=3553;(Me.isDataArrayTexture||Me.isCompressedArrayTexture)&&(Xt=35866),Me.isData3DTexture&&(Xt=32879);let fe=gt(Te,Me),Tt=Me.source;n.bindTexture(Xt,Te.__webglTexture,33984+ct);let Bn=i.get(Tt);if(Tt.version!==Bn.__version||!0===fe){n.activeTexture(33984+ct),e.pixelStorei(37440,Me.flipY),e.pixelStorei(37441,Me.premultiplyAlpha),e.pixelStorei(3317,Me.unpackAlignment),e.pixelStorei(37443,0);let pn=function H(Te){return!a&&(Te.wrapS!==Ao||Te.wrapT!==Ao||Te.minFilter!==Ir&&Te.minFilter!==Ui)}(Me)&&!1===A(Me.image),Ht=O(Me.image,pn,!1,d);Ht=ti(Me,Ht);let cn=A(Ht)||a,Hn=o.convert(Me.format,Me.encoding),zn=o.convert(Me.type),mi=Y(Me.internalFormat,Hn,zn,Me.encoding,Me.isVideoTexture);Ge(Xt,Me,cn);let ri,mr=Me.mipmaps,Xr=a&&!0!==Me.isVideoTexture,hr=void 0===Bn.__version||!0===fe,et=Z(Me,Ht,cn);if(Me.isDepthTexture)mi=6402,a?mi=Me.type===Cs?36012:Me.type===Au?33190:Me.type===jm?35056:33189:Me.type===Cs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Me.format===Vm&&6402===mi&&1012!==Me.type&&Me.type!==Au&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Me.type=Au,zn=o.convert(Me.type)),Me.format===Hm&&6402===mi&&(mi=34041,Me.type!==jm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Me.type=jm,zn=o.convert(Me.type))),hr&&(Xr?n.texStorage2D(3553,1,mi,Ht.width,Ht.height):n.texImage2D(3553,0,mi,Ht.width,Ht.height,0,Hn,zn,null));else if(Me.isDataTexture)if(mr.length>0&&cn){Xr&&hr&&n.texStorage2D(3553,et,mi,mr[0].width,mr[0].height);for(let At=0,Jt=mr.length;At<Jt;At++)ri=mr[At],Xr?n.texSubImage2D(3553,At,0,0,ri.width,ri.height,Hn,zn,ri.data):n.texImage2D(3553,At,mi,ri.width,ri.height,0,Hn,zn,ri.data);Me.generateMipmaps=!1}else Xr?(hr&&n.texStorage2D(3553,et,mi,Ht.width,Ht.height),n.texSubImage2D(3553,0,0,0,Ht.width,Ht.height,Hn,zn,Ht.data)):n.texImage2D(3553,0,mi,Ht.width,Ht.height,0,Hn,zn,Ht.data);else if(Me.isCompressedTexture)if(Me.isCompressedArrayTexture){Xr&&hr&&n.texStorage3D(35866,et,mi,mr[0].width,mr[0].height,Ht.depth);for(let At=0,Jt=mr.length;At<Jt;At++)ri=mr[At],Me.format!==ra?null!==Hn?Xr?n.compressedTexSubImage3D(35866,At,0,0,0,ri.width,ri.height,Ht.depth,Hn,ri.data,0,0):n.compressedTexImage3D(35866,At,mi,ri.width,ri.height,Ht.depth,0,ri.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xr?n.texSubImage3D(35866,At,0,0,0,ri.width,ri.height,Ht.depth,Hn,zn,ri.data):n.texImage3D(35866,At,mi,ri.width,ri.height,Ht.depth,0,Hn,zn,ri.data)}else{Xr&&hr&&n.texStorage2D(3553,et,mi,mr[0].width,mr[0].height);for(let At=0,Jt=mr.length;At<Jt;At++)ri=mr[At],Me.format!==ra?null!==Hn?Xr?n.compressedTexSubImage2D(3553,At,0,0,ri.width,ri.height,Hn,ri.data):n.compressedTexImage2D(3553,At,mi,ri.width,ri.height,0,ri.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xr?n.texSubImage2D(3553,At,0,0,ri.width,ri.height,Hn,zn,ri.data):n.texImage2D(3553,At,mi,ri.width,ri.height,0,Hn,zn,ri.data)}else if(Me.isDataArrayTexture)Xr?(hr&&n.texStorage3D(35866,et,mi,Ht.width,Ht.height,Ht.depth),n.texSubImage3D(35866,0,0,0,0,Ht.width,Ht.height,Ht.depth,Hn,zn,Ht.data)):n.texImage3D(35866,0,mi,Ht.width,Ht.height,Ht.depth,0,Hn,zn,Ht.data);else if(Me.isData3DTexture)Xr?(hr&&n.texStorage3D(32879,et,mi,Ht.width,Ht.height,Ht.depth),n.texSubImage3D(32879,0,0,0,0,Ht.width,Ht.height,Ht.depth,Hn,zn,Ht.data)):n.texImage3D(32879,0,mi,Ht.width,Ht.height,Ht.depth,0,Hn,zn,Ht.data);else if(Me.isFramebufferTexture){if(hr)if(Xr)n.texStorage2D(3553,et,mi,Ht.width,Ht.height);else{let At=Ht.width,Jt=Ht.height;for(let hn=0;hn<et;hn++)n.texImage2D(3553,hn,mi,At,Jt,0,Hn,zn,null),At>>=1,Jt>>=1}}else if(mr.length>0&&cn){Xr&&hr&&n.texStorage2D(3553,et,mi,mr[0].width,mr[0].height);for(let At=0,Jt=mr.length;At<Jt;At++)ri=mr[At],Xr?n.texSubImage2D(3553,At,0,0,Hn,zn,ri):n.texImage2D(3553,At,mi,Hn,zn,ri);Me.generateMipmaps=!1}else Xr?(hr&&n.texStorage2D(3553,et,mi,Ht.width,Ht.height),n.texSubImage2D(3553,0,0,0,Hn,zn,Ht)):n.texImage2D(3553,0,mi,Hn,zn,Ht);U(Me,cn)&&X(Xt),Bn.__version=Tt.version,Me.onUpdate&&Me.onUpdate(Me)}Te.__version=Me.version}function nt(Te,Me,ct,Xt,fe){let Tt=o.convert(ct.format,ct.encoding),Bn=o.convert(ct.type),pn=Y(ct.internalFormat,Tt,Bn,ct.encoding);i.get(Me).__hasExternalTextures||(32879===fe||35866===fe?n.texImage3D(fe,0,pn,Me.width,Me.height,Me.depth,0,Tt,Bn,null):n.texImage2D(fe,0,pn,Me.width,Me.height,0,Tt,Bn,null)),n.bindFramebuffer(36160,Te),sn(Me)?p.framebufferTexture2DMultisampleEXT(36160,Xt,fe,i.get(ct).__webglTexture,0,ln(Me)):(3553===fe||fe>=34069&&fe<=34074)&&e.framebufferTexture2D(36160,Xt,fe,i.get(ct).__webglTexture,0),n.bindFramebuffer(36160,null)}function zt(Te,Me,ct){if(e.bindRenderbuffer(36161,Te),Me.depthBuffer&&!Me.stencilBuffer){let Xt=33189;if(ct||sn(Me)){let fe=Me.depthTexture;fe&&fe.isDepthTexture&&(fe.type===Cs?Xt=36012:fe.type===Au&&(Xt=33190));let Tt=ln(Me);sn(Me)?p.renderbufferStorageMultisampleEXT(36161,Tt,Xt,Me.width,Me.height):e.renderbufferStorageMultisample(36161,Tt,Xt,Me.width,Me.height)}else e.renderbufferStorage(36161,Xt,Me.width,Me.height);e.framebufferRenderbuffer(36160,36096,36161,Te)}else if(Me.depthBuffer&&Me.stencilBuffer){let Xt=ln(Me);ct&&!1===sn(Me)?e.renderbufferStorageMultisample(36161,Xt,35056,Me.width,Me.height):sn(Me)?p.renderbufferStorageMultisampleEXT(36161,Xt,35056,Me.width,Me.height):e.renderbufferStorage(36161,34041,Me.width,Me.height),e.framebufferRenderbuffer(36160,33306,36161,Te)}else{let Xt=!0===Me.isWebGLMultipleRenderTargets?Me.texture:[Me.texture];for(let fe=0;fe<Xt.length;fe++){let Tt=Xt[fe],Bn=o.convert(Tt.format,Tt.encoding),pn=o.convert(Tt.type),Ht=Y(Tt.internalFormat,Bn,pn,Tt.encoding),cn=ln(Me);ct&&!1===sn(Me)?e.renderbufferStorageMultisample(36161,cn,Ht,Me.width,Me.height):sn(Me)?p.renderbufferStorageMultisampleEXT(36161,cn,Ht,Me.width,Me.height):e.renderbufferStorage(36161,Ht,Me.width,Me.height)}}e.bindRenderbuffer(36161,null)}function Ot(Te){let Me=i.get(Te),ct=!0===Te.isWebGLCubeRenderTarget;if(Te.depthTexture&&!Me.__autoAllocateDepthBuffer){if(ct)throw new Error("target.depthTexture not supported in Cube render targets");!function It(Te,Me){if(Me&&Me.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,Te),!Me.depthTexture||!Me.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Me.depthTexture).__webglTexture||Me.depthTexture.image.width!==Me.width||Me.depthTexture.image.height!==Me.height)&&(Me.depthTexture.image.width=Me.width,Me.depthTexture.image.height=Me.height,Me.depthTexture.needsUpdate=!0),ze(Me.depthTexture,0);let ct=i.get(Me.depthTexture).__webglTexture,Xt=ln(Me);if(Me.depthTexture.format===Vm)sn(Me)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,ct,0,Xt):e.framebufferTexture2D(36160,36096,3553,ct,0);else{if(Me.depthTexture.format!==Hm)throw new Error("Unknown depthTexture format");sn(Me)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,ct,0,Xt):e.framebufferTexture2D(36160,33306,3553,ct,0)}}(Me.__webglFramebuffer,Te)}else if(ct){Me.__webglDepthbuffer=[];for(let Xt=0;Xt<6;Xt++)n.bindFramebuffer(36160,Me.__webglFramebuffer[Xt]),Me.__webglDepthbuffer[Xt]=e.createRenderbuffer(),zt(Me.__webglDepthbuffer[Xt],Te,!1)}else n.bindFramebuffer(36160,Me.__webglFramebuffer),Me.__webglDepthbuffer=e.createRenderbuffer(),zt(Me.__webglDepthbuffer,Te,!1);n.bindFramebuffer(36160,null)}function ln(Te){return Math.min(h,Te.samples)}function sn(Te){let Me=i.get(Te);return a&&Te.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Me.__useRenderToTexture}function ti(Te,Me){let ct=Te.encoding,Xt=Te.format,fe=Te.type;return!0===Te.isCompressedTexture||!0===Te.isVideoTexture||1035===Te.format||ct!==Pd&&(ct===Ri?!1===a?!0===t.has("EXT_sRGB")&&Xt===ra?(Te.format=1035,Te.minFilter=Ui,Te.generateMipmaps=!1):Me=qj.sRGBToLinear(Me):(Xt!==ra||fe!==qa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ct)),Me}this.allocateTextureUnit=function ve(){let Te=we;return Te>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Te+" texture units while this GPU supports only "+l),we+=1,Te},this.resetTextureUnits=function _e(){we=0},this.setTexture2D=ze,this.setTexture2DArray=function Le(Te,Me){let ct=i.get(Te);Te.version>0&&ct.__version!==Te.version?Ze(ct,Te,Me):n.bindTexture(35866,ct.__webglTexture,33984+Me)},this.setTexture3D=function Ne(Te,Me){let ct=i.get(Te);Te.version>0&&ct.__version!==Te.version?Ze(ct,Te,Me):n.bindTexture(32879,ct.__webglTexture,33984+Me)},this.setTextureCube=function $e(Te,Me){let ct=i.get(Te);Te.version>0&&ct.__version!==Te.version?function yt(Te,Me,ct){if(6!==Me.image.length)return;let Xt=gt(Te,Me),fe=Me.source;n.bindTexture(34067,Te.__webglTexture,33984+ct);let Tt=i.get(fe);if(fe.version!==Tt.__version||!0===Xt){n.activeTexture(33984+ct),e.pixelStorei(37440,Me.flipY),e.pixelStorei(37441,Me.premultiplyAlpha),e.pixelStorei(3317,Me.unpackAlignment),e.pixelStorei(37443,0);let Bn=Me.isCompressedTexture||Me.image[0].isCompressedTexture,pn=Me.image[0]&&Me.image[0].isDataTexture,Ht=[];for(let At=0;At<6;At++)Ht[At]=Bn||pn?pn?Me.image[At].image:Me.image[At]:O(Me.image[At],!1,!0,c),Ht[At]=ti(Me,Ht[At]);let et,cn=Ht[0],Hn=A(cn)||a,zn=o.convert(Me.format,Me.encoding),mi=o.convert(Me.type),ri=Y(Me.internalFormat,zn,mi,Me.encoding),mr=a&&!0!==Me.isVideoTexture,Xr=void 0===Tt.__version||!0===Xt,hr=Z(Me,cn,Hn);if(Ge(34067,Me,Hn),Bn){mr&&Xr&&n.texStorage2D(34067,hr,ri,cn.width,cn.height);for(let At=0;At<6;At++){et=Ht[At].mipmaps;for(let Jt=0;Jt<et.length;Jt++){let hn=et[Jt];Me.format!==ra?null!==zn?mr?n.compressedTexSubImage2D(34069+At,Jt,0,0,hn.width,hn.height,zn,hn.data):n.compressedTexImage2D(34069+At,Jt,ri,hn.width,hn.height,0,hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mr?n.texSubImage2D(34069+At,Jt,0,0,hn.width,hn.height,zn,mi,hn.data):n.texImage2D(34069+At,Jt,ri,hn.width,hn.height,0,zn,mi,hn.data)}}}else{et=Me.mipmaps,mr&&Xr&&(et.length>0&&hr++,n.texStorage2D(34067,hr,ri,Ht[0].width,Ht[0].height));for(let At=0;At<6;At++)if(pn){mr?n.texSubImage2D(34069+At,0,0,0,Ht[At].width,Ht[At].height,zn,mi,Ht[At].data):n.texImage2D(34069+At,0,ri,Ht[At].width,Ht[At].height,0,zn,mi,Ht[At].data);for(let Jt=0;Jt<et.length;Jt++){let hn=et[Jt].image[At].image;mr?n.texSubImage2D(34069+At,Jt+1,0,0,hn.width,hn.height,zn,mi,hn.data):n.texImage2D(34069+At,Jt+1,ri,hn.width,hn.height,0,zn,mi,hn.data)}}else{mr?n.texSubImage2D(34069+At,0,0,0,zn,mi,Ht[At]):n.texImage2D(34069+At,0,ri,zn,mi,Ht[At]);for(let Jt=0;Jt<et.length;Jt++){let hn=et[Jt];mr?n.texSubImage2D(34069+At,Jt+1,0,0,zn,mi,hn.image[At]):n.texImage2D(34069+At,Jt+1,ri,zn,mi,hn.image[At])}}}U(Me,Hn)&&X(34067),Tt.__version=fe.version,Me.onUpdate&&Me.onUpdate(Me)}Te.__version=Me.version}(ct,Te,Me):n.bindTexture(34067,ct.__webglTexture,33984+Me)},this.rebindTextures=function vn(Te,Me,ct){let Xt=i.get(Te);void 0!==Me&&nt(Xt.__webglFramebuffer,Te,Te.texture,36064,3553),void 0!==ct&&Ot(Te)},this.setupRenderTarget=function yn(Te){let Me=Te.texture,ct=i.get(Te),Xt=i.get(Me);Te.addEventListener("dispose",ce),!0!==Te.isWebGLMultipleRenderTargets&&(void 0===Xt.__webglTexture&&(Xt.__webglTexture=e.createTexture()),Xt.__version=Me.version,s.memory.textures++);let fe=!0===Te.isWebGLCubeRenderTarget,Tt=!0===Te.isWebGLMultipleRenderTargets,Bn=A(Te)||a;if(fe){ct.__webglFramebuffer=[];for(let pn=0;pn<6;pn++)ct.__webglFramebuffer[pn]=e.createFramebuffer()}else{if(ct.__webglFramebuffer=e.createFramebuffer(),Tt)if(r.drawBuffers){let pn=Te.texture;for(let Ht=0,cn=pn.length;Ht<cn;Ht++){let Hn=i.get(pn[Ht]);void 0===Hn.__webglTexture&&(Hn.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Te.samples>0&&!1===sn(Te)){let pn=Tt?Me:[Me];ct.__webglMultisampledFramebuffer=e.createFramebuffer(),ct.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,ct.__webglMultisampledFramebuffer);for(let Ht=0;Ht<pn.length;Ht++){let cn=pn[Ht];ct.__webglColorRenderbuffer[Ht]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ct.__webglColorRenderbuffer[Ht]);let Hn=o.convert(cn.format,cn.encoding),zn=o.convert(cn.type),mi=Y(cn.internalFormat,Hn,zn,cn.encoding,!0===Te.isXRRenderTarget),ri=ln(Te);e.renderbufferStorageMultisample(36161,ri,mi,Te.width,Te.height),e.framebufferRenderbuffer(36160,36064+Ht,36161,ct.__webglColorRenderbuffer[Ht])}e.bindRenderbuffer(36161,null),Te.depthBuffer&&(ct.__webglDepthRenderbuffer=e.createRenderbuffer(),zt(ct.__webglDepthRenderbuffer,Te,!0)),n.bindFramebuffer(36160,null)}}if(fe){n.bindTexture(34067,Xt.__webglTexture),Ge(34067,Me,Bn);for(let pn=0;pn<6;pn++)nt(ct.__webglFramebuffer[pn],Te,Me,36064,34069+pn);U(Me,Bn)&&X(34067),n.unbindTexture()}else if(Tt){let pn=Te.texture;for(let Ht=0,cn=pn.length;Ht<cn;Ht++){let Hn=pn[Ht],zn=i.get(Hn);n.bindTexture(3553,zn.__webglTexture),Ge(3553,Hn,Bn),nt(ct.__webglFramebuffer,Te,Hn,36064+Ht,3553),U(Hn,Bn)&&X(3553)}n.unbindTexture()}else{let pn=3553;(Te.isWebGL3DRenderTarget||Te.isWebGLArrayRenderTarget)&&(a?pn=Te.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(pn,Xt.__webglTexture),Ge(pn,Me,Bn),nt(ct.__webglFramebuffer,Te,Me,36064,pn),U(Me,Bn)&&X(pn),n.unbindTexture()}Te.depthBuffer&&Ot(Te)},this.updateRenderTargetMipmap=function xn(Te){let Me=A(Te)||a,ct=!0===Te.isWebGLMultipleRenderTargets?Te.texture:[Te.texture];for(let Xt=0,fe=ct.length;Xt<fe;Xt++){let Tt=ct[Xt];if(U(Tt,Me)){let Bn=Te.isWebGLCubeRenderTarget?34067:3553,pn=i.get(Tt).__webglTexture;n.bindTexture(Bn,pn),X(Bn),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function Dn(Te){if(a&&Te.samples>0&&!1===sn(Te)){let Me=Te.isWebGLMultipleRenderTargets?Te.texture:[Te.texture],ct=Te.width,Xt=Te.height,fe=16384,Tt=[],Bn=Te.stencilBuffer?33306:36096,pn=i.get(Te),Ht=!0===Te.isWebGLMultipleRenderTargets;if(Ht)for(let cn=0;cn<Me.length;cn++)n.bindFramebuffer(36160,pn.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+cn,36161,null),n.bindFramebuffer(36160,pn.__webglFramebuffer),e.framebufferTexture2D(36009,36064+cn,3553,null,0);n.bindFramebuffer(36008,pn.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,pn.__webglFramebuffer);for(let cn=0;cn<Me.length;cn++){Tt.push(36064+cn),Te.depthBuffer&&Tt.push(Bn);let Hn=void 0!==pn.__ignoreDepthValues&&pn.__ignoreDepthValues;if(!1===Hn&&(Te.depthBuffer&&(fe|=256),Te.stencilBuffer&&(fe|=1024)),Ht&&e.framebufferRenderbuffer(36008,36064,36161,pn.__webglColorRenderbuffer[cn]),!0===Hn&&(e.invalidateFramebuffer(36008,[Bn]),e.invalidateFramebuffer(36009,[Bn])),Ht){let zn=i.get(Me[cn]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,zn,0)}e.blitFramebuffer(0,0,ct,Xt,0,0,ct,Xt,fe,9728),g&&e.invalidateFramebuffer(36008,Tt)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Ht)for(let cn=0;cn<Me.length;cn++){n.bindFramebuffer(36160,pn.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+cn,36161,pn.__webglColorRenderbuffer[cn]);let Hn=i.get(Me[cn]).__webglTexture;n.bindFramebuffer(36160,pn.__webglFramebuffer),e.framebufferTexture2D(36009,36064+cn,3553,Hn,0)}n.bindFramebuffer(36009,pn.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ot,this.setupFrameBufferTexture=nt,this.useMultisampledRTT=sn}function UCe(e,t,n){let i=n.isWebGL2;return{convert:function r(o,s=null){let a;if(o===qa)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1010===o)return 5120;if(1011===o)return 5122;if(1012===o)return 5123;if(1013===o)return 5124;if(o===Au)return 5125;if(o===Cs)return 5126;if(o===Tu)return i?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===o)return 6406;if(o===ra)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===Vm)return 6402;if(o===Hm)return 34041;if(1035===o)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===o)return 6403;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o)if(s===Ri){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===o)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===o)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===o)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===o)return s===Ri?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return s===Ri?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===o)return s===Ri?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===o||36284===o||36285===o||36286===o){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===o)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===o)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===o)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===o)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return o===jm?i?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[o]?e[o]:null}}}var jCe=class extends Xa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},ju=class extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}},VCe={type:"move"},zT=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ju,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ju,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ju,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null,s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(let v of e.hand.values()){let y=t.getJointPose(v,n),b=this._getHandJoint(l,v);null!==y&&(b.matrix.fromArray(y.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=y.radius),b.visible=null!==y}let h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),p=.02,g=.005;l.inputState.pinching&&h>p+g?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=p-g&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(VCe)))}return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new ju;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},_v=class extends jo{constructor(e,t,n,i,r,o,s,a,l,c){if((c=void 0!==c?c:Vm)!==Vm&&c!==Hm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Vm&&(n=Au),void 0===n&&c===Hm&&(n=jm),super(null,i,r,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Ir,this.minFilter=void 0!==a?a:Ir,this.flipY=!1,this.generateMipmaps=!1}},HCe=class extends Ca{constructor(e,t){super();let n=this,i=null,r=1,o=null,s="local-floor",a=1,l=null,c=null,d=null,h=null,p=null,g=null,v=t.getContextAttributes(),y=null,b=null,P=[],S=[],O=new Set,A=new Map,H=new Xa;H.layers.enable(1),H.viewport=new bi;let U=new Xa;U.layers.enable(2),U.viewport=new bi;let X=[H,U],Y=new jCe;Y.layers.enable(1),Y.layers.enable(2);let Z=null,ee=null;function oe(Le){let Ne=S.indexOf(Le.inputSource);if(-1===Ne)return;let $e=P[Ne];void 0!==$e&&$e.dispatchEvent({type:Le.type,data:Le.inputSource})}function ce(){i.removeEventListener("select",oe),i.removeEventListener("selectstart",oe),i.removeEventListener("selectend",oe),i.removeEventListener("squeeze",oe),i.removeEventListener("squeezestart",oe),i.removeEventListener("squeezeend",oe),i.removeEventListener("end",ce),i.removeEventListener("inputsourceschange",de);for(let Le=0;Le<P.length;Le++){let Ne=S[Le];null!==Ne&&(S[Le]=null,P[Le].disconnect(Ne))}Z=null,ee=null,e.setRenderTarget(y),p=null,h=null,d=null,i=null,b=null,ze.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function de(Le){for(let Ne=0;Ne<Le.removed.length;Ne++){let $e=Le.removed[Ne],Be=S.indexOf($e);Be>=0&&(S[Be]=null,P[Be].disconnect($e))}for(let Ne=0;Ne<Le.added.length;Ne++){let $e=Le.added[Ne],Be=S.indexOf($e);if(-1===Be){for(let Ge=0;Ge<P.length;Ge++){if(Ge>=S.length){S.push($e),Be=Ge;break}if(null===S[Ge]){S[Ge]=$e,Be=Ge;break}}if(-1===Be)break}let Xe=P[Be];Xe&&Xe.connect($e)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Le){let Ne=P[Le];return void 0===Ne&&(Ne=new zT,P[Le]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(Le){let Ne=P[Le];return void 0===Ne&&(Ne=new zT,P[Le]=Ne),Ne.getGripSpace()},this.getHand=function(Le){let Ne=P[Le];return void 0===Ne&&(Ne=new zT,P[Le]=Ne),Ne.getHandSpace()},this.setFramebufferScaleFactor=function(Le){r=Le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Le){s=Le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(Le){l=Le},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=function(){var Le=(0,Qn.Z)(function*(Ne){if(i=Ne,null!==i){if(y=e.getRenderTarget(),i.addEventListener("select",oe),i.addEventListener("selectstart",oe),i.addEventListener("selectend",oe),i.addEventListener("squeeze",oe),i.addEventListener("squeezestart",oe),i.addEventListener("squeezeend",oe),i.addEventListener("end",ce),i.addEventListener("inputsourceschange",de),!0!==v.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)p=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r}),i.updateRenderState({baseLayer:p}),b=new Or(p.framebufferWidth,p.framebufferHeight,{format:ra,type:qa,encoding:e.outputEncoding,stencilBuffer:v.stencil});else{let $e=null,Be=null,Xe=null;v.depth&&(Xe=v.stencil?35056:33190,$e=v.stencil?Hm:Vm,Be=v.stencil?jm:Au);let Ge={colorFormat:32856,depthFormat:Xe,scaleFactor:r};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(Ge),i.updateRenderState({layers:[h]}),b=new Or(h.textureWidth,h.textureHeight,{format:ra,type:qa,depthTexture:new _v(h.textureWidth,h.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,$e),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0}),e.properties.get(b).__ignoreDepthValues=h.ignoreDepthValues}b.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=yield i.requestReferenceSpace(s),ze.setContext(i),ze.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Ne){return Le.apply(this,arguments)}}();let he=new te,Pe=new te;function _e(Le,Ne){null===Ne?Le.matrixWorld.copy(Le.matrix):Le.matrixWorld.multiplyMatrices(Ne.matrixWorld,Le.matrix),Le.matrixWorldInverse.copy(Le.matrixWorld).invert()}this.updateCamera=function(Le){if(null===i)return;Y.near=U.near=H.near=Le.near,Y.far=U.far=H.far=Le.far,(Z!==Y.near||ee!==Y.far)&&(i.updateRenderState({depthNear:Y.near,depthFar:Y.far}),Z=Y.near,ee=Y.far);let Ne=Le.parent,$e=Y.cameras;_e(Y,Ne);for(let Xe=0;Xe<$e.length;Xe++)_e($e[Xe],Ne);Y.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Le.matrix.copy(Y.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale);let Be=Le.children;for(let Xe=0,Ge=Be.length;Xe<Ge;Xe++)Be[Xe].updateMatrixWorld(!0);2===$e.length?function we(Le,Ne,$e){he.setFromMatrixPosition(Ne.matrixWorld),Pe.setFromMatrixPosition($e.matrixWorld);let Be=he.distanceTo(Pe),Xe=Ne.projectionMatrix.elements,Ge=$e.projectionMatrix.elements,gt=Xe[14]/(Xe[10]-1),Ze=Xe[14]/(Xe[10]+1),yt=(Xe[9]+1)/Xe[5],nt=(Xe[9]-1)/Xe[5],zt=(Xe[8]-1)/Xe[0],It=(Ge[8]+1)/Ge[0],Ot=gt*zt,vn=gt*It,yn=Be/(-zt+It),xn=yn*-zt;Ne.matrixWorld.decompose(Le.position,Le.quaternion,Le.scale),Le.translateX(xn),Le.translateZ(yn),Le.matrixWorld.compose(Le.position,Le.quaternion,Le.scale),Le.matrixWorldInverse.copy(Le.matrixWorld).invert();let Dn=gt+yn,ln=Ze+yn;Le.projectionMatrix.makePerspective(Ot-xn,vn+(Be-xn),yt*Ze/ln*Dn,nt*Ze/ln*Dn,Dn,ln)}(Y,H,U):Y.projectionMatrix.copy(H.projectionMatrix)},this.getCamera=function(){return Y},this.getFoveation=function(){if(null!==h||null!==p)return a},this.setFoveation=function(Le){a=Le,null!==h&&(h.fixedFoveation=Le),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=Le)},this.getPlanes=function(){return O};let ve=null,ze=new aV;ze.setAnimationLoop(function ke(Le,Ne){if(c=Ne.getViewerPose(l||o),g=Ne,null!==c){let $e=c.views;null!==p&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let Be=!1;$e.length!==Y.cameras.length&&(Y.cameras.length=0,Be=!0);for(let Xe=0;Xe<$e.length;Xe++){let Ge=$e[Xe],gt=null;if(null!==p)gt=p.getViewport(Ge);else{let yt=d.getViewSubImage(h,Ge);gt=yt.viewport,0===Xe&&(e.setRenderTargetTextures(b,yt.colorTexture,h.ignoreDepthValues?void 0:yt.depthStencilTexture),e.setRenderTarget(b))}let Ze=X[Xe];void 0===Ze&&(Ze=new Xa,Ze.layers.enable(Xe),Ze.viewport=new bi,X[Xe]=Ze),Ze.matrix.fromArray(Ge.transform.matrix),Ze.projectionMatrix.fromArray(Ge.projectionMatrix),Ze.viewport.set(gt.x,gt.y,gt.width,gt.height),0===Xe&&Y.matrix.copy(Ze.matrix),!0===Be&&Y.cameras.push(Ze)}}for(let $e=0;$e<P.length;$e++){let Be=S[$e],Xe=P[$e];null!==Be&&void 0!==Xe&&Xe.update(Be,Ne,l||o)}if(ve&&ve(Le,Ne),Ne.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:Ne.detectedPlanes});let $e=null;for(let Be of O)Ne.detectedPlanes.has(Be)||(null===$e&&($e=[]),$e.push(Be));if(null!==$e)for(let Be of $e)O.delete(Be),A.delete(Be),n.dispatchEvent({type:"planeremoved",data:Be});for(let Be of Ne.detectedPlanes)if(O.has(Be)){let Xe=A.get(Be);Be.lastChangedTime>Xe&&(A.set(Be,Be.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Be}))}else O.add(Be),A.set(Be,Ne.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Be})}g=null}),this.setAnimationLoop=function(Le){ve=Le},this.dispose=function(){}}};function GCe(e,t){function r(y,b){y.opacity.value=b.opacity,b.color&&y.diffuse.value.copy(b.color),b.emissive&&y.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,1===b.side&&(y.bumpScale.value*=-1)),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias),b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),1===b.side&&y.normalScale.value.negate()),b.specularMap&&(y.specularMap.value=b.specularMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest);let S,O,P=t.get(b).envMap;if(P&&(y.envMap.value=P,y.flipEnvMap.value=P.isCubeTexture&&!1===P.isRenderTargetTexture?-1:1,y.reflectivity.value=b.reflectivity,y.ior.value=b.ior,y.refractionRatio.value=b.refractionRatio),b.lightMap){y.lightMap.value=b.lightMap;let A=!0!==e.physicallyCorrectLights?Math.PI:1;y.lightMapIntensity.value=b.lightMapIntensity*A}b.aoMap&&(y.aoMap.value=b.aoMap,y.aoMapIntensity.value=b.aoMapIntensity),b.map?S=b.map:b.specularMap?S=b.specularMap:b.displacementMap?S=b.displacementMap:b.normalMap?S=b.normalMap:b.bumpMap?S=b.bumpMap:b.roughnessMap?S=b.roughnessMap:b.metalnessMap?S=b.metalnessMap:b.alphaMap?S=b.alphaMap:b.emissiveMap?S=b.emissiveMap:b.clearcoatMap?S=b.clearcoatMap:b.clearcoatNormalMap?S=b.clearcoatNormalMap:b.clearcoatRoughnessMap?S=b.clearcoatRoughnessMap:b.iridescenceMap?S=b.iridescenceMap:b.iridescenceThicknessMap?S=b.iridescenceThicknessMap:b.specularIntensityMap?S=b.specularIntensityMap:b.specularColorMap?S=b.specularColorMap:b.transmissionMap?S=b.transmissionMap:b.thicknessMap?S=b.thicknessMap:b.sheenColorMap?S=b.sheenColorMap:b.sheenRoughnessMap&&(S=b.sheenRoughnessMap),void 0!==S&&(S.isWebGLRenderTarget&&(S=S.texture),!0===S.matrixAutoUpdate&&S.updateMatrix(),y.uvTransform.value.copy(S.matrix)),b.aoMap?O=b.aoMap:b.lightMap&&(O=b.lightMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),y.uv2Transform.value.copy(O.matrix))}return{refreshFogUniforms:function n(y,b){b.color.getRGB(y.fogColor.value,sV(e)),b.isFog?(y.fogNear.value=b.near,y.fogFar.value=b.far):b.isFogExp2&&(y.fogDensity.value=b.density)},refreshMaterialUniforms:function i(y,b,P,S,O){b.isMeshBasicMaterial||b.isMeshLambertMaterial?r(y,b):b.isMeshToonMaterial?(r(y,b),function d(y,b){b.gradientMap&&(y.gradientMap.value=b.gradientMap)}(y,b)):b.isMeshPhongMaterial?(r(y,b),function c(y,b){y.specular.value.copy(b.specular),y.shininess.value=Math.max(b.shininess,1e-4)}(y,b)):b.isMeshStandardMaterial?(r(y,b),function h(y,b){y.roughness.value=b.roughness,y.metalness.value=b.metalness,b.roughnessMap&&(y.roughnessMap.value=b.roughnessMap),b.metalnessMap&&(y.metalnessMap.value=b.metalnessMap),t.get(b).envMap&&(y.envMapIntensity.value=b.envMapIntensity)}(y,b),b.isMeshPhysicalMaterial&&function p(y,b,P){y.ior.value=b.ior,b.sheen>0&&(y.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),y.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(y.sheenColorMap.value=b.sheenColorMap),b.sheenRoughnessMap&&(y.sheenRoughnessMap.value=b.sheenRoughnessMap)),b.clearcoat>0&&(y.clearcoat.value=b.clearcoat,y.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(y.clearcoatMap.value=b.clearcoatMap),b.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap),b.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),y.clearcoatNormalMap.value=b.clearcoatNormalMap,1===b.side&&y.clearcoatNormalScale.value.negate())),b.iridescence>0&&(y.iridescence.value=b.iridescence,y.iridescenceIOR.value=b.iridescenceIOR,y.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(y.iridescenceMap.value=b.iridescenceMap),b.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=b.iridescenceThicknessMap)),b.transmission>0&&(y.transmission.value=b.transmission,y.transmissionSamplerMap.value=P.texture,y.transmissionSamplerSize.value.set(P.width,P.height),b.transmissionMap&&(y.transmissionMap.value=b.transmissionMap),y.thickness.value=b.thickness,b.thicknessMap&&(y.thicknessMap.value=b.thicknessMap),y.attenuationDistance.value=b.attenuationDistance,y.attenuationColor.value.copy(b.attenuationColor)),y.specularIntensity.value=b.specularIntensity,y.specularColor.value.copy(b.specularColor),b.specularIntensityMap&&(y.specularIntensityMap.value=b.specularIntensityMap),b.specularColorMap&&(y.specularColorMap.value=b.specularColorMap)}(y,b,O)):b.isMeshMatcapMaterial?(r(y,b),function g(y,b){b.matcap&&(y.matcap.value=b.matcap)}(y,b)):b.isMeshDepthMaterial?r(y,b):b.isMeshDistanceMaterial?(r(y,b),function v(y,b){y.referencePosition.value.copy(b.referencePosition),y.nearDistance.value=b.nearDistance,y.farDistance.value=b.farDistance}(y,b)):b.isMeshNormalMaterial?r(y,b):b.isLineBasicMaterial?(function o(y,b){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity}(y,b),b.isLineDashedMaterial&&function s(y,b){y.dashSize.value=b.dashSize,y.totalSize.value=b.dashSize+b.gapSize,y.scale.value=b.scale}(y,b)):b.isPointsMaterial?function a(y,b,P,S){let O;y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.size.value=b.size*P,y.scale.value=.5*S,b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest),b.map?O=b.map:b.alphaMap&&(O=b.alphaMap),void 0!==O&&(!0===O.matrixAutoUpdate&&O.updateMatrix(),y.uvTransform.value.copy(O.matrix))}(y,b,P,S):b.isSpriteMaterial?function l(y,b){let P;y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.rotation.value=b.rotation,b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest),b.map?P=b.map:b.alphaMap&&(P=b.alphaMap),void 0!==P&&(!0===P.matrixAutoUpdate&&P.updateMatrix(),y.uvTransform.value.copy(P.matrix))}(y,b):b.isShadowMaterial?(y.color.value.copy(b.color),y.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}}}function WCe(e,t,n,i){let r={},o={},s=[],a=n.isWebGL2?e.getParameter(35375):0;function g(S,O,A){let H=S.value;if(void 0===A[O]){if("number"==typeof H)A[O]=H;else{let U=Array.isArray(H)?H:[H],X=[];for(let Y=0;Y<U.length;Y++)X.push(U[Y].clone());A[O]=X}return!0}if("number"==typeof H){if(A[O]!==H)return A[O]=H,!0}else{let U=Array.isArray(A[O])?A[O]:[A[O]],X=Array.isArray(H)?H:[H];for(let Y=0;Y<U.length;Y++){let Z=U[Y];if(!1===Z.equals(X[Y]))return Z.copy(X[Y]),!0}}return!1}function y(S){let O={boundary:0,storage:0};return"number"==typeof S?(O.boundary=4,O.storage=4):S.isVector2?(O.boundary=8,O.storage=8):S.isVector3||S.isColor?(O.boundary=16,O.storage=12):S.isVector4?(O.boundary=16,O.storage=16):S.isMatrix3?(O.boundary=48,O.storage=48):S.isMatrix4?(O.boundary=64,O.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),O}function b(S){let O=S.target;O.removeEventListener("dispose",b);let A=s.indexOf(O.__bindingPointIndex);s.splice(A,1),e.deleteBuffer(r[O.id]),delete r[O.id],delete o[O.id]}return{bind:function l(S,O){i.uniformBlockBinding(S,O.program)},update:function c(S,O){let A=r[S.id];void 0===A&&(function v(S){let O=S.uniforms,A=0,U=0;for(let X=0,Y=O.length;X<Y;X++){let Z=O[X],ee={boundary:0,storage:0},oe=Array.isArray(Z.value)?Z.value:[Z.value];for(let ce=0,de=oe.length;ce<de;ce++){let Pe=y(oe[ce]);ee.boundary+=Pe.boundary,ee.storage+=Pe.storage}if(Z.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=A,X>0){U=A%16;let ce=16-U;0!==U&&ce-ee.boundary<0&&(A+=16-U,Z.__offset=A)}A+=ee.storage}U=A%16,U>0&&(A+=16-U),S.__size=A,S.__cache={}}(S),A=function d(S){let O=function h(){for(let S=0;S<a;S++)if(-1===s.indexOf(S))return s.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();S.__bindingPointIndex=O;let A=e.createBuffer(),H=S.__size,U=S.usage;return e.bindBuffer(35345,A),e.bufferData(35345,H,U),e.bindBuffer(35345,null),e.bindBufferBase(35345,O,A),A}(S),r[S.id]=A,S.addEventListener("dispose",b)),i.updateUBOMapping(S,O.program);let U=t.render.frame;o[S.id]!==U&&(function p(S){let A=S.uniforms,H=S.__cache;e.bindBuffer(35345,r[S.id]);for(let U=0,X=A.length;U<X;U++){let Y=A[U];if(!0===g(Y,U,H)){let Z=Y.__offset,ee=Array.isArray(Y.value)?Y.value:[Y.value],oe=0;for(let ce=0;ce<ee.length;ce++){let de=ee[ce],he=y(de);"number"==typeof de?(Y.__data[0]=de,e.bufferSubData(35345,Z+oe,Y.__data)):de.isMatrix3?(Y.__data[0]=de.elements[0],Y.__data[1]=de.elements[1],Y.__data[2]=de.elements[2],Y.__data[3]=de.elements[0],Y.__data[4]=de.elements[3],Y.__data[5]=de.elements[4],Y.__data[6]=de.elements[5],Y.__data[7]=de.elements[0],Y.__data[8]=de.elements[6],Y.__data[9]=de.elements[7],Y.__data[10]=de.elements[8],Y.__data[11]=de.elements[0]):(de.toArray(Y.__data,oe),oe+=he.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,Z,Y.__data)}}e.bindBuffer(35345,null)}(S),o[S.id]=U)},dispose:function P(){for(let S in r)e.deleteBuffer(r[S]);s=[],r={},o={}}}}function NV(e={}){this.isWebGLRenderer=!0;let d,t=void 0!==e.canvas?e.canvas:function qCe(){let e=Db("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,r=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;d=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,p=null,g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Pd,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;let y=this,b=!1,P=0,S=0,O=null,A=-1,H=null,U=new bi,X=new bi,Y=null,Z=t.width,ee=t.height,oe=1,ce=null,de=null,he=new bi(0,0,Z,ee),Pe=new bi(0,0,Z,ee),we=!1,_e=new kT,ve=!1,ke=!1,ze=null,Le=new qt,Ne=new Ue,$e=new te,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return null===O?oe:1}let Ze,yt,nt,zt,It,Ot,vn,yn,xn,Dn,ln,sn,Vn,ti,Te,Me,ct,Xt,fe,Tt,Bn,pn,Ht,cn,Ge=n;function gt(Ae,_t){for(let Ft=0;Ft<Ae.length;Ft++){let Bt=t.getContext(Ae[Ft],_t);if(null!==Bt)return Bt}return null}try{let Ae={alpha:!0,depth:i,stencil:r,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r149"),t.addEventListener("webglcontextlost",mi,!1),t.addEventListener("webglcontextrestored",ri,!1),t.addEventListener("webglcontextcreationerror",mr,!1),null===Ge){let _t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&_t.shift(),Ge=gt(_t,Ae),null===Ge)throw gt(_t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ge.getShaderPrecisionFormat&&(Ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}function Hn(){Ze=new oxe(Ge),yt=new J_e(Ge,Ze,e),Ze.init(yt),pn=new UCe(Ge,Ze,yt),nt=new BCe(Ge,Ze,yt),zt=new lxe,It=new PCe,Ot=new zCe(Ge,Ze,nt,It,yt,pn,zt),vn=new txe(y),yn=new rxe(y),xn=new vye(Ge,yt),Ht=new K_e(Ge,Ze,xn,yt),Dn=new sxe(Ge,xn,zt,Ht),ln=new uxe(Ge,Dn,xn,zt),fe=new hxe(Ge,yt,Ot),Me=new exe(It),sn=new MCe(y,vn,yn,Ze,yt,Ht,Me),Vn=new GCe(y,It),ti=new OCe,Te=new kCe(Ze,yt),Xt=new Q_e(y,vn,yn,nt,ln,d,s),ct=new LCe(y,ln,yt),cn=new WCe(Ge,zt,yt,nt),Tt=new Z_e(Ge,Ze,zt,yt),Bn=new axe(Ge,Ze,zt,yt),zt.programs=sn.programs,y.capabilities=yt,y.extensions=Ze,y.properties=It,y.renderLists=ti,y.shadowMap=ct,y.state=nt,y.info=zt}Hn();let zn=new HCe(y,Ge);function mi(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ri(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;let Ae=zt.autoReset,_t=ct.enabled,Ft=ct.autoUpdate,ht=ct.needsUpdate,Bt=ct.type;Hn(),zt.autoReset=Ae,ct.enabled=_t,ct.autoUpdate=Ft,ct.needsUpdate=ht,ct.type=Bt}function mr(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function Xr(Ae){let _t=Ae.target;_t.removeEventListener("dispose",Xr),function hr(Ae){(function et(Ae){let _t=It.get(Ae).programs;void 0!==_t&&(_t.forEach(function(Ft){sn.releaseProgram(Ft)}),Ae.isShaderMaterial&&sn.releaseShaderCache(Ae))})(Ae),It.remove(Ae)}(_t)}this.xr=zn,this.getContext=function(){return Ge},this.getContextAttributes=function(){return Ge.getContextAttributes()},this.forceContextLoss=function(){let Ae=Ze.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){let Ae=Ze.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(Ae){void 0!==Ae&&(oe=Ae,this.setSize(Z,ee,!1))},this.getSize=function(Ae){return Ae.set(Z,ee)},this.setSize=function(Ae,_t,Ft){zn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=Ae,ee=_t,t.width=Math.floor(Ae*oe),t.height=Math.floor(_t*oe),!1!==Ft&&(t.style.width=Ae+"px",t.style.height=_t+"px"),this.setViewport(0,0,Ae,_t))},this.getDrawingBufferSize=function(Ae){return Ae.set(Z*oe,ee*oe).floor()},this.setDrawingBufferSize=function(Ae,_t,Ft){Z=Ae,ee=_t,oe=Ft,t.width=Math.floor(Ae*Ft),t.height=Math.floor(_t*Ft),this.setViewport(0,0,Ae,_t)},this.getCurrentViewport=function(Ae){return Ae.copy(U)},this.getViewport=function(Ae){return Ae.copy(he)},this.setViewport=function(Ae,_t,Ft,ht){Ae.isVector4?he.set(Ae.x,Ae.y,Ae.z,Ae.w):he.set(Ae,_t,Ft,ht),nt.viewport(U.copy(he).multiplyScalar(oe).floor())},this.getScissor=function(Ae){return Ae.copy(Pe)},this.setScissor=function(Ae,_t,Ft,ht){Ae.isVector4?Pe.set(Ae.x,Ae.y,Ae.z,Ae.w):Pe.set(Ae,_t,Ft,ht),nt.scissor(X.copy(Pe).multiplyScalar(oe).floor())},this.getScissorTest=function(){return we},this.setScissorTest=function(Ae){nt.setScissorTest(we=Ae)},this.setOpaqueSort=function(Ae){ce=Ae},this.setTransparentSort=function(Ae){de=Ae},this.getClearColor=function(Ae){return Ae.copy(Xt.getClearColor())},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(Ae=!0,_t=!0,Ft=!0){let ht=0;Ae&&(ht|=16384),_t&&(ht|=256),Ft&&(ht|=1024),Ge.clear(ht)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",mi,!1),t.removeEventListener("webglcontextrestored",ri,!1),t.removeEventListener("webglcontextcreationerror",mr,!1),ti.dispose(),Te.dispose(),It.dispose(),vn.dispose(),yn.dispose(),ln.dispose(),Ht.dispose(),cn.dispose(),sn.dispose(),zn.dispose(),zn.removeEventListener("sessionstart",hn),zn.removeEventListener("sessionend",Zn),ze&&(ze.dispose(),ze=null),di.stop()},this.renderBufferDirect=function(Ae,_t,Ft,ht,Bt,qn){null===_t&&(_t=Be);let Fi=Bt.isMesh&&Bt.matrixWorld.determinant()<0,Zi=function X4(Ae,_t,Ft,ht,Bt){!0!==_t.isScene&&(_t=Be),Ot.resetTextureUnits();let qn=_t.fog,Zi=null===O?y.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:Pd,Ji=(ht.isMeshStandardMaterial?yn:vn).get(ht.envMap||(ht.isMeshStandardMaterial?_t.environment:null)),$r=!0===ht.vertexColors&&!!Ft.attributes.color&&4===Ft.attributes.color.itemSize,_r=!!ht.normalMap&&!!Ft.attributes.tangent,or=!!Ft.morphAttributes.position,ga=!!Ft.morphAttributes.normal,Sl=!!Ft.morphAttributes.color,Yd=ht.toneMapped?y.toneMapping:0,pp=Ft.morphAttributes.position||Ft.morphAttributes.normal||Ft.morphAttributes.color,Fo=void 0!==pp?pp.length:0,xi=It.get(ht),F1=p.state.lights;!0!==ve||!0!==ke&&Ae===H||Me.setState(ht,Ae,Ae===H&&ht.id===A);let Kh=!1;ht.version===xi.__version?(xi.needsLights&&xi.lightsStateVersion!==F1.state.version||xi.outputEncoding!==Zi||Bt.isInstancedMesh&&!1===xi.instancing||!Bt.isInstancedMesh&&!0===xi.instancing||Bt.isSkinnedMesh&&!1===xi.skinning||!Bt.isSkinnedMesh&&!0===xi.skinning||xi.envMap!==Ji||!0===ht.fog&&xi.fog!==qn||void 0!==xi.numClippingPlanes&&(xi.numClippingPlanes!==Me.numPlanes||xi.numIntersection!==Me.numIntersection)||xi.vertexAlphas!==$r||xi.vertexTangents!==_r||xi.morphTargets!==or||xi.morphNormals!==ga||xi.morphColors!==Sl||xi.toneMapping!==Yd||!0===yt.isWebGL2&&xi.morphTargetsCount!==Fo)&&(Kh=!0):(Kh=!0,xi.__version=ht.version);let Zh=xi.currentProgram;!0===Kh&&(Zh=Pl(ht,_t,Bt));let so=!1,jf=!1,L1=!1,Ks=Zh.getUniforms(),Jh=xi.uniforms;if(nt.useProgram(Zh.program)&&(so=!0,jf=!0,L1=!0),ht.id!==A&&(A=ht.id,jf=!0),so||H!==Ae){if(Ks.setValue(Ge,"projectionMatrix",Ae.projectionMatrix),yt.logarithmicDepthBuffer&&Ks.setValue(Ge,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),H!==Ae&&(H=Ae,jf=!0,L1=!0),ht.isShaderMaterial||ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshStandardMaterial||ht.envMap){let ms=Ks.map.cameraPosition;void 0!==ms&&ms.setValue(Ge,$e.setFromMatrixPosition(Ae.matrixWorld))}(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial)&&Ks.setValue(Ge,"isOrthographic",!0===Ae.isOrthographicCamera),(ht.isMeshPhongMaterial||ht.isMeshToonMaterial||ht.isMeshLambertMaterial||ht.isMeshBasicMaterial||ht.isMeshStandardMaterial||ht.isShaderMaterial||ht.isShadowMaterial||Bt.isSkinnedMesh)&&Ks.setValue(Ge,"viewMatrix",Ae.matrixWorldInverse)}if(Bt.isSkinnedMesh){Ks.setOptional(Ge,Bt,"bindMatrix"),Ks.setOptional(Ge,Bt,"bindMatrixInverse");let ms=Bt.skeleton;ms&&(yt.floatVertexTextures?(null===ms.boneTexture&&ms.computeBoneTexture(),Ks.setValue(Ge,"boneTexture",ms.boneTexture,Ot),Ks.setValue(Ge,"boneTextureSize",ms.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let kg=Ft.morphAttributes;if((void 0!==kg.position||void 0!==kg.normal||void 0!==kg.color&&!0===yt.isWebGL2)&&fe.update(Bt,Ft,ht,Zh),(jf||xi.receiveShadow!==Bt.receiveShadow)&&(xi.receiveShadow=Bt.receiveShadow,Ks.setValue(Ge,"receiveShadow",Bt.receiveShadow)),ht.isMeshGouraudMaterial&&null!==ht.envMap&&(Jh.envMap.value=Ji,Jh.flipEnvMap.value=Ji.isCubeTexture&&!1===Ji.isRenderTargetTexture?-1:1),jf&&(Ks.setValue(Ge,"toneMappingExposure",y.toneMappingExposure),xi.needsLights&&function $4(Ae,_t){Ae.ambientLightColor.needsUpdate=_t,Ae.lightProbe.needsUpdate=_t,Ae.directionalLights.needsUpdate=_t,Ae.directionalLightShadows.needsUpdate=_t,Ae.pointLights.needsUpdate=_t,Ae.pointLightShadows.needsUpdate=_t,Ae.spotLights.needsUpdate=_t,Ae.spotLightShadows.needsUpdate=_t,Ae.rectAreaLights.needsUpdate=_t,Ae.hemisphereLights.needsUpdate=_t}(Jh,L1),qn&&!0===ht.fog&&Vn.refreshFogUniforms(Jh,qn),Vn.refreshMaterialUniforms(Jh,ht,oe,ee,ze),vM.upload(Ge,xi.uniformsList,Jh,Ot)),ht.isShaderMaterial&&!0===ht.uniformsNeedUpdate&&(vM.upload(Ge,xi.uniformsList,Jh,Ot),ht.uniformsNeedUpdate=!1),ht.isSpriteMaterial&&Ks.setValue(Ge,"center",Bt.center),Ks.setValue(Ge,"modelViewMatrix",Bt.modelViewMatrix),Ks.setValue(Ge,"normalMatrix",Bt.normalMatrix),Ks.setValue(Ge,"modelMatrix",Bt.matrixWorld),Bt.previousModelViewMatrix&&Ks.setValue(Ge,"previousModelViewMatrix",Bt.previousModelViewMatrix),Ae.previousProjectionMatrix&&Ks.setValue(Ge,"previousProjectionMatrix",Ae.previousProjectionMatrix),ht.isShaderMaterial||ht.isRawShaderMaterial){let ms=ht.uniformsGroups;for(let er=0,Q4=ms.length;er<Q4;er++)if(yt.isWebGL2){let Rg=ms[er];cn.update(Rg,Zh),cn.bind(Rg,Zh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zh}(Ae,_t,Ft,ht,Bt);nt.setMaterial(ht,Fi);let Ji=Ft.index,$r=1;!0===ht.wireframe&&(Ji=Dn.getWireframeAttribute(Ft),$r=2);let _r=Ft.drawRange,or=Ft.attributes.position,ga=_r.start*$r,Sl=(_r.start+_r.count)*$r;null!==qn&&(ga=Math.max(ga,qn.start*$r),Sl=Math.min(Sl,(qn.start+qn.count)*$r)),null!==Ji?(ga=Math.max(ga,0),Sl=Math.min(Sl,Ji.count)):null!=or&&(ga=Math.max(ga,0),Sl=Math.min(Sl,or.count));let Yd=Sl-ga;if(Yd<0||Yd===1/0)return;Ht.setup(Bt,ht,Zi,Ft,Ji);let pp,Fo=Tt;if(null!==Ji&&(pp=xn.get(Ji),Fo=Bn,Fo.setIndex(pp)),Bt.isMesh)!0===ht.wireframe?(nt.setLineWidth(ht.wireframeLinewidth*Xe()),Fo.setMode(1)):Fo.setMode(4);else if(Bt.isLine){let xi=ht.linewidth;void 0===xi&&(xi=1),nt.setLineWidth(xi*Xe()),Fo.setMode(Bt.isLineSegments?1:Bt.isLineLoop?2:3)}else Bt.isPoints?Fo.setMode(0):Bt.isSprite&&Fo.setMode(4);if(Bt.isInstancedMesh)Fo.renderInstances(ga,Yd,Bt.count);else if(Ft.isInstancedBufferGeometry){let F1=Math.min(Ft.instanceCount,void 0!==Ft._maxInstanceCount?Ft._maxInstanceCount:1/0);Fo.renderInstances(ga,Yd,F1)}else Fo.render(ga,Yd)},this.compile=function(Ae,_t){function Ft(ht,Bt,qn){!0===ht.transparent&&2===ht.side&&!1===ht.forceSinglePass?(ht.side=1,ht.needsUpdate=!0,Pl(ht,Bt,qn),ht.side=0,ht.needsUpdate=!0,Pl(ht,Bt,qn),ht.side=2):Pl(ht,Bt,qn)}p=Te.get(Ae),p.init(),v.push(p),Ae.traverseVisible(function(ht){ht.isLight&&ht.layers.test(_t.layers)&&(p.pushLight(ht),ht.castShadow&&p.pushShadow(ht))}),p.setupLights(y.physicallyCorrectLights),Ae.traverse(function(ht){let Bt=ht.material;if(Bt)if(Array.isArray(Bt))for(let qn=0;qn<Bt.length;qn++)Ft(Bt[qn],Ae,ht);else Ft(Bt,Ae,ht)}),v.pop(),p=null};let At=null;function hn(){di.stop()}function Zn(){di.start()}let di=new aV;function Io(Ae,_t,Ft,ht){if(!1===Ae.visible)return;if(Ae.layers.test(_t.layers))if(Ae.isGroup)Ft=Ae.renderOrder;else if(Ae.isLOD)!0===Ae.autoUpdate&&Ae.update(_t);else if(Ae.isLight)p.pushLight(Ae),Ae.castShadow&&p.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||_e.intersectsSprite(Ae)){ht&&$e.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(Le);let qn=ln.update(Ae),Fi=Ae.material;Fi.visible&&h.push(Ae,qn,Fi,Ft,$e.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.isSkinnedMesh&&Ae.skeleton.frame!==zt.render.frame&&(Ae.skeleton.update(),Ae.skeleton.frame=zt.render.frame),!Ae.frustumCulled||_e.intersectsObject(Ae))){ht&&$e.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(Le);let qn=ln.update(Ae),Fi=Ae.material;if(Array.isArray(Fi)){let Zi=qn.groups;for(let Ji=0,$r=Zi.length;Ji<$r;Ji++){let _r=Zi[Ji],or=Fi[_r.materialIndex];or&&or.visible&&h.push(Ae,qn,or,Ft,$e.z,_r)}}else Fi.visible&&h.push(Ae,qn,Fi,Ft,$e.z,null)}let Bt=Ae.children;for(let qn=0,Fi=Bt.length;qn<Fi;qn++)Io(Bt[qn],_t,Ft,ht)}function Qs(Ae,_t,Ft,ht){let Bt=Ae.opaque,qn=Ae.transmissive,Fi=Ae.transparent;p.setupLightsView(Ft),!0===ve&&Me.setGlobalState(y.clippingPlanes,Ft),qn.length>0&&function Qh(Ae,_t,Ft){let ht=yt.isWebGL2;null===ze&&(ze=new Or(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")?Tu:qa,minFilter:K0,samples:ht&&!0===o?4:0})),y.getDrawingBufferSize(Ne),ht?ze.setSize(Ne.x,Ne.y):ze.setSize(Xw(Ne.x),Xw(Ne.y));let Bt=y.getRenderTarget();y.setRenderTarget(ze),y.clear();let qn=y.toneMapping;y.toneMapping=0,Po(Ae,_t,Ft),y.toneMapping=qn,Ot.updateMultisampleRenderTarget(ze),Ot.updateRenderTargetMipmap(ze),y.setRenderTarget(Bt)}(Bt,_t,Ft),ht&&nt.viewport(U.copy(ht)),Bt.length>0&&Po(Bt,_t,Ft),qn.length>0&&Po(qn,_t,Ft),Fi.length>0&&Po(Fi,_t,Ft),nt.buffers.depth.setTest(!0),nt.buffers.depth.setMask(!0),nt.buffers.color.setMask(!0),nt.setPolygonOffset(!1)}function Po(Ae,_t,Ft){let ht=!0===_t.isScene?_t.overrideMaterial:null;for(let Bt=0,qn=Ae.length;Bt<qn;Bt++){let Fi=Ae[Bt],Zi=Fi.object,Ji=Fi.geometry,$r=null===ht?Fi.material:ht,_r=Fi.group;Zi.layers.test(Ft.layers)&&vc(Zi,_t,Ft,Ji,$r,_r)}}function vc(Ae,_t,Ft,ht,Bt,qn){Ae.onBeforeRender(y,_t,Ft,ht,Bt,qn),Ae.modelViewMatrix.multiplyMatrices(Ft.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),Bt.onBeforeRender(y,_t,Ft,ht,Ae,qn),!0===Bt.transparent&&2===Bt.side&&!1===Bt.forceSinglePass?(Bt.side=1,Bt.needsUpdate=!0,y.renderBufferDirect(Ft,_t,ht,Bt,Ae,qn),Bt.side=0,Bt.needsUpdate=!0,y.renderBufferDirect(Ft,_t,ht,Bt,Ae,qn),Bt.side=2):y.renderBufferDirect(Ft,_t,ht,Bt,Ae,qn),Ae.onAfterRender(y,_t,Ft,ht,Bt,qn)}function Pl(Ae,_t,Ft){!0!==_t.isScene&&(_t=Be);let ht=It.get(Ae),Bt=p.state.lights,Fi=Bt.state.version,Zi=sn.getParameters(Ae,Bt.state,p.state.shadowsArray,_t,Ft),Ji=sn.getProgramCacheKey(Zi),$r=ht.programs;ht.environment=Ae.isMeshStandardMaterial?_t.environment:null,ht.fog=_t.fog,ht.envMap=(Ae.isMeshStandardMaterial?yn:vn).get(Ae.envMap||ht.environment),void 0===$r&&(Ae.addEventListener("dispose",Xr),$r=new Map,ht.programs=$r);let _r=$r.get(Ji);if(void 0!==_r){if(ht.currentProgram===_r&&ht.lightsStateVersion===Fi)return lS(Ae,Zi),_r}else Zi.uniforms=sn.getUniforms(Ae),Ae.onBuild(Ft,Zi,y),Ae.onBeforeCompile(Zi,y),_r=sn.acquireProgram(Zi,Ji),$r.set(Ji,_r),ht.uniforms=Zi.uniforms;let or=ht.uniforms;(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||!0===Ae.clipping)&&(or.clippingPlanes=Me.uniform),lS(Ae,Zi),ht.needsLights=function cS(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&!0===Ae.lights}(Ae),ht.lightsStateVersion=Fi,ht.needsLights&&(or.ambientLightColor.value=Bt.state.ambient,or.lightProbe.value=Bt.state.probe,or.directionalLights.value=Bt.state.directional,or.directionalLightShadows.value=Bt.state.directionalShadow,or.spotLights.value=Bt.state.spot,or.spotLightShadows.value=Bt.state.spotShadow,or.rectAreaLights.value=Bt.state.rectArea,or.ltc_1.value=Bt.state.rectAreaLTC1,or.ltc_2.value=Bt.state.rectAreaLTC2,or.pointLights.value=Bt.state.point,or.pointLightShadows.value=Bt.state.pointShadow,or.hemisphereLights.value=Bt.state.hemi,or.directionalShadowMap.value=Bt.state.directionalShadowMap,or.directionalShadowMatrix.value=Bt.state.directionalShadowMatrix,or.spotShadowMap.value=Bt.state.spotShadowMap,or.spotLightMatrix.value=Bt.state.spotLightMatrix,or.spotLightMap.value=Bt.state.spotLightMap,or.pointShadowMap.value=Bt.state.pointShadowMap,or.pointShadowMatrix.value=Bt.state.pointShadowMatrix);let ga=_r.getUniforms(),Sl=vM.seqWithValue(ga.seq,or);return ht.currentProgram=_r,ht.uniformsList=Sl,_r}function lS(Ae,_t){let Ft=It.get(Ae);Ft.outputEncoding=_t.outputEncoding,Ft.instancing=_t.instancing,Ft.skinning=_t.skinning,Ft.morphTargets=_t.morphTargets,Ft.morphNormals=_t.morphNormals,Ft.morphColors=_t.morphColors,Ft.morphTargetsCount=_t.morphTargetsCount,Ft.numClippingPlanes=_t.numClippingPlanes,Ft.numIntersection=_t.numClipIntersection,Ft.vertexAlphas=_t.vertexAlphas,Ft.vertexTangents=_t.vertexTangents,Ft.toneMapping=_t.toneMapping}di.setAnimationLoop(function Jt(Ae){At&&At(Ae)}),typeof self<"u"&&di.setContext(self),this.setAnimationLoop=function(Ae){At=Ae,zn.setAnimationLoop(Ae),null===Ae?di.stop():di.start()},zn.addEventListener("sessionstart",hn),zn.addEventListener("sessionend",Zn),this.render=function(Ae,_t){if(void 0===_t||!0===_t.isCamera){if(!0!==b){if(!0===Ae.matrixWorldAutoUpdate&&Ae.updateMatrixWorld(),null===_t.parent&&!0===_t.matrixWorldAutoUpdate&&_t.updateMatrixWorld(),!0===zn.enabled&&!0===zn.isPresenting&&(!0===zn.cameraAutoUpdate&&zn.updateCamera(_t),_t=zn.getCamera()),!0===Ae.isScene&&Ae.onBeforeRender(y,Ae,_t,O),p=Te.get(Ae,v.length),p.init(),v.push(p),Le.multiplyMatrices(_t.projectionMatrix,_t.matrixWorldInverse),_e.setFromProjectionMatrix(Le),ke=this.localClippingEnabled,ve=Me.init(this.clippingPlanes,ke),h=ti.get(Ae,g.length),h.init(),g.push(h),Io(Ae,_t,0,y.sortObjects),h.finish(),!0===y.sortObjects&&h.sort(ce,de),!0===ve&&Me.beginShadows(),ct.render(p.state.shadowsArray,Ae,_t),!0===ve&&Me.endShadows(),!0===this.info.autoReset&&this.info.reset(),Xt.render(h,Ae),p.setupLights(y.physicallyCorrectLights),_t.isArrayCamera){let ht=_t.cameras;for(let Bt=0,qn=ht.length;Bt<qn;Bt++){let Fi=ht[Bt];Qs(h,Ae,Fi,Fi.viewport)}}else Qs(h,Ae,_t);null!==O&&(Ot.updateMultisampleRenderTarget(O),Ot.updateRenderTargetMipmap(O)),!0===Ae.isScene&&Ae.onAfterRender(y,Ae,_t),Ht.resetDefaultState(),A=-1,H=null,v.pop(),p=v.length>0?v[v.length-1]:null,g.pop(),h=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(Ae,_t,Ft){It.get(Ae.texture).__webglTexture=_t,It.get(Ae.depthTexture).__webglTexture=Ft;let ht=It.get(Ae);ht.__hasExternalTextures=!0,ht.__hasExternalTextures&&(ht.__autoAllocateDepthBuffer=void 0===Ft,ht.__autoAllocateDepthBuffer||!0===Ze.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ht.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ae,_t){let Ft=It.get(Ae);Ft.__webglFramebuffer=_t,Ft.__useDefaultFramebuffer=void 0===_t},this.setRenderTarget=function(Ae,_t=0,Ft=0){O=Ae,P=_t,S=Ft;let ht=!0,Bt=null,qn=!1,Fi=!1;if(Ae){let Zi=It.get(Ae);void 0!==Zi.__useDefaultFramebuffer?(nt.bindFramebuffer(36160,null),ht=!1):void 0===Zi.__webglFramebuffer?Ot.setupRenderTarget(Ae):Zi.__hasExternalTextures&&Ot.rebindTextures(Ae,It.get(Ae.texture).__webglTexture,It.get(Ae.depthTexture).__webglTexture);let Ji=Ae.texture;(Ji.isData3DTexture||Ji.isDataArrayTexture||Ji.isCompressedArrayTexture)&&(Fi=!0);let $r=It.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Bt=$r[_t],qn=!0):Bt=yt.isWebGL2&&Ae.samples>0&&!1===Ot.useMultisampledRTT(Ae)?It.get(Ae).__webglMultisampledFramebuffer:$r,U.copy(Ae.viewport),X.copy(Ae.scissor),Y=Ae.scissorTest}else U.copy(he).multiplyScalar(oe).floor(),X.copy(Pe).multiplyScalar(oe).floor(),Y=we;if(nt.bindFramebuffer(36160,Bt)&&yt.drawBuffers&&ht&&nt.drawBuffers(Ae,Bt),nt.viewport(U),nt.scissor(X),nt.setScissorTest(Y),qn){let Zi=It.get(Ae.texture);Ge.framebufferTexture2D(36160,36064,34069+_t,Zi.__webglTexture,Ft)}else if(Fi){let Zi=It.get(Ae.texture);Ge.framebufferTextureLayer(36160,36064,Zi.__webglTexture,Ft||0,_t||0)}A=-1},this.readRenderTargetPixels=function(Ae,_t,Ft,ht,Bt,qn,Fi){if(!Ae||!Ae.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Zi=It.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&void 0!==Fi&&(Zi=Zi[Fi]),Zi){nt.bindFramebuffer(36160,Zi);try{let Ji=Ae.texture,$r=Ji.format,_r=Ji.type;if($r!==ra&&pn.convert($r)!==Ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let or=_r===Tu&&(Ze.has("EXT_color_buffer_half_float")||yt.isWebGL2&&Ze.has("EXT_color_buffer_float"));if(!(_r===qa||pn.convert(_r)===Ge.getParameter(35738)||_r===Cs&&(yt.isWebGL2||Ze.has("OES_texture_float")||Ze.has("WEBGL_color_buffer_float"))||or))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");_t>=0&&_t<=Ae.width-ht&&Ft>=0&&Ft<=Ae.height-Bt&&Ge.readPixels(_t,Ft,ht,Bt,pn.convert($r),pn.convert(_r),qn)}finally{let Ji=null!==O?It.get(O).__webglFramebuffer:null;nt.bindFramebuffer(36160,Ji)}}},this.copyFramebufferToTexture=function(Ae,_t,Ft=0){let ht=Math.pow(2,-Ft),Bt=Math.floor(_t.image.width*ht),qn=Math.floor(_t.image.height*ht);Ot.setTexture2D(_t,0),Ge.copyTexSubImage2D(3553,Ft,0,0,Ae.x,Ae.y,Bt,qn),nt.unbindTexture()},this.copyTextureToTexture=function(Ae,_t,Ft,ht=0){let Bt=_t.image.width,qn=_t.image.height,Fi=pn.convert(Ft.format),Zi=pn.convert(Ft.type);Ot.setTexture2D(Ft,0),Ge.pixelStorei(37440,Ft.flipY),Ge.pixelStorei(37441,Ft.premultiplyAlpha),Ge.pixelStorei(3317,Ft.unpackAlignment),_t.isDataTexture?Ge.texSubImage2D(3553,ht,Ae.x,Ae.y,Bt,qn,Fi,Zi,_t.image.data):_t.isCompressedTexture?Ge.compressedTexSubImage2D(3553,ht,Ae.x,Ae.y,_t.mipmaps[0].width,_t.mipmaps[0].height,Fi,_t.mipmaps[0].data):Ge.texSubImage2D(3553,ht,Ae.x,Ae.y,Fi,Zi,_t.image),0===ht&&Ft.generateMipmaps&&Ge.generateMipmap(3553),nt.unbindTexture()},this.copyTextureToTexture3D=function(Ae,_t,Ft,ht,Bt=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let _r,qn=Ae.max.x-Ae.min.x+1,Fi=Ae.max.y-Ae.min.y+1,Zi=Ae.max.z-Ae.min.z+1,Ji=pn.convert(ht.format),$r=pn.convert(ht.type);if(ht.isData3DTexture)Ot.setTexture3D(ht,0),_r=32879;else{if(!ht.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ot.setTexture2DArray(ht,0),_r=35866}Ge.pixelStorei(37440,ht.flipY),Ge.pixelStorei(37441,ht.premultiplyAlpha),Ge.pixelStorei(3317,ht.unpackAlignment);let or=Ge.getParameter(3314),ga=Ge.getParameter(32878),Sl=Ge.getParameter(3316),Yd=Ge.getParameter(3315),pp=Ge.getParameter(32877),Fo=Ft.isCompressedTexture?Ft.mipmaps[0]:Ft.image;Ge.pixelStorei(3314,Fo.width),Ge.pixelStorei(32878,Fo.height),Ge.pixelStorei(3316,Ae.min.x),Ge.pixelStorei(3315,Ae.min.y),Ge.pixelStorei(32877,Ae.min.z),Ft.isDataTexture||Ft.isData3DTexture?Ge.texSubImage3D(_r,Bt,_t.x,_t.y,_t.z,qn,Fi,Zi,Ji,$r,Fo.data):Ft.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ge.compressedTexSubImage3D(_r,Bt,_t.x,_t.y,_t.z,qn,Fi,Zi,Ji,Fo.data)):Ge.texSubImage3D(_r,Bt,_t.x,_t.y,_t.z,qn,Fi,Zi,Ji,$r,Fo),Ge.pixelStorei(3314,or),Ge.pixelStorei(32878,ga),Ge.pixelStorei(3316,Sl),Ge.pixelStorei(3315,Yd),Ge.pixelStorei(32877,pp),0===Bt&&ht.generateMipmaps&&Ge.generateMipmap(_r),nt.unbindTexture()},this.initTexture=function(Ae){Ae.isCubeTexture?Ot.setTextureCube(Ae,0):Ae.isData3DTexture?Ot.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?Ot.setTexture2DArray(Ae,0):Ot.setTexture2D(Ae,0),nt.unbindTexture()},this.resetState=function(){P=0,S=0,O=null,nt.reset(),Ht.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends NV{}).prototype.isWebGL1Renderer=!0;var FV=class{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ni(e),this.near=t,this.far=n}clone(){return new FV(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},_h=class extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},ml=new te,UT=class{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ml.fromBufferAttribute(this,t),ml.applyMatrix4(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ml.fromBufferAttribute(this,t),ml.applyNormalMatrix(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ml.fromBufferAttribute(this,t),ml.transformDirection(e),this.setXYZ(t,ml.x,ml.y,ml.z);return this}setX(e,t){return this.normalized&&(t=fo(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fo(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fo(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fo(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ku(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ku(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ku(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ku(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array),i=fo(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=fo(t,this.array),n=fo(n,this.array),i=fo(i,this.array),r=fo(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new UT(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},LV=class extends Fr{constructor(){super(),this.isBone=!0,this.type="Bone"}},Uc=class extends jo{constructor(e=null,t=1,n=1,i,r,o,s,a,l=Ir,c=Ir,d,h){super(null,o,s,a,l,c,i,r,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},BV=new qt,$Ce=new qt,jT=class{constructor(e=[],t=[]){this.uuid=Bc(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let n=new qt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++)BV.multiplyMatrices(e[r]?e[r].matrixWorld:$Ce,t[r]),BV.toArray(n,16*r);null!==i&&(i.needsUpdate=!0)}clone(){return new jT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Hj(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new Uc(t,e,e,ra,Cs);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){let r=e.bones[n],o=t[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new LV),this.bones.push(o),this.boneInverses.push((new qt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++)e.bones.push(t[i].uuid),e.boneInverses.push(n[i].toArray());return e}},zb=class extends ui{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},zV=new qt,UV=new qt,yM=[],QCe=new qt,Ub=new Vo,KCe=class extends Vo{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zb(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,QCe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){let n=this.matrixWorld,i=this.count;if(Ub.geometry=this.geometry,Ub.material=this.material,void 0!==Ub.material)for(let r=0;r<i;r++){this.getMatrixAt(r,zV),UV.multiplyMatrices(n,zV),Ub.matrixWorld=UV,Ub.raycast(e,yM);for(let o=0,s=yM.length;o<s;o++){let a=yM[o];a.instanceId=r,a.object=this,t.push(a)}yM.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new zb(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},rf=class extends kb{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ni(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},jV=new te,VV=new te,HV=new qt,VT=new rv,bM=new Fl,_M=class extends Fr{constructor(e=new Xn,t=new rf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)jV.fromBufferAttribute(t,i-1),VV.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=jV.distanceTo(VV);e.setAttribute("lineDistance",new _n(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bM.copy(n.boundingSphere),bM.applyMatrix4(i),bM.radius+=r,!1===e.ray.intersectsSphere(bM))return;HV.copy(i).invert(),VT.copy(e.ray).applyMatrix4(HV);let s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new te,c=new te,d=new te,h=new te,p=this.isLineSegments?2:1,g=n.index,v=n.attributes.position;if(null!==g)for(let P=Math.max(0,o.start),S=Math.min(g.count,o.start+o.count)-1;P<S;P+=p){let O=g.getX(P),A=g.getX(P+1);if(l.fromBufferAttribute(v,O),c.fromBufferAttribute(v,A),VT.distanceSqToSegment(l,c,h,d)>a)continue;h.applyMatrix4(this.matrixWorld);let H=e.ray.origin.distanceTo(h);H<e.near||H>e.far||t.push({distance:H,point:d.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}else for(let P=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count)-1;P<S;P+=p){if(l.fromBufferAttribute(v,P),c.fromBufferAttribute(v,P+1),VT.distanceSqToSegment(l,c,h,d)>a)continue;h.applyMatrix4(this.matrixWorld);let O=e.ray.origin.distanceTo(h);O<e.near||O>e.far||t.push({distance:O,point:d.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let o=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}},GV=new te,WV=new te,jb=class extends _M{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)GV.fromBufferAttribute(t,i),WV.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+GV.distanceTo(WV);e.setAttribute("lineDistance",new _n(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ZCe=class extends jo{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Ui,this.magFilter=void 0!==r?r:Ui,this.generateMipmaps=!1;let c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},JCe=class extends jo{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},xh=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let n,t=[],i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let o,n=this.getLengths(),i=0,r=n.length;o=t||e*n[r-1];let l,s=0,a=r-1;for(;s<=a;)if(i=Math.floor(s+(a-s)/2),l=n[i]-o,l<0)s=i+1;else{if(!(l>0)){a=i;break}a=i-1}if(i=a,n[i]===o)return i/(r-1);let c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),o=this.getPoint(i),s=t||(r.isVector2?new Ue:new te);return s.copy(o).sub(r).normalize(),s}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new te,i=[],r=[],o=[],s=new te,a=new qt;for(let p=0;p<=e;p++)i[p]=this.getTangentAt(p/e,new te);r[0]=new te,o[0]=new te;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let p=1;p<=e;p++){if(r[p]=r[p-1].clone(),o[p]=o[p-1].clone(),s.crossVectors(i[p-1],i[p]),s.length()>Number.EPSILON){s.normalize();let g=Math.acos(ws(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(a.makeRotationAxis(s,g))}o[p].crossVectors(i[p],r[p])}if(!0===t){let p=Math.acos(ws(r[0].dot(r[e]),-1,1));p/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(p=-p);for(let g=1;g<=e;g++)r[g].applyMatrix4(a.makeRotationAxis(i[g],p*g)),o[g].crossVectors(i[g],r[g])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},xM=class extends xh{constructor(e=0,t=0,n=1,i=1,r=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t){let n=t||new Ue,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0===this.aClockwise&&!o&&(r===i?r=-i:r-=i);let s=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){let c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=a-this.aX,p=l-this.aY;a=h*c-p*d+this.aX,l=h*d+p*c+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};function HT(){let e=0,t=0,n=0,i=0;function r(o,s,a,l){e=o,t=a,n=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,d,h){let p=(s-o)/c-(a-o)/(c+d)+(a-s)/d,g=(a-s)/d-(l-s)/(d+h)+(l-a)/h;p*=d,g*=d,r(s,a,p,g)},calc:function(o){let s=o*o;return e+t*o+n*s+i*(s*o)}}}var CM=new te,GT=new HT,WT=new HT,qT=new HT;function qV(e,t,n,i,r){let o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function Vb(e,t,n,i){return function nwe(e,t){let n=1-e;return n*n*t}(e,t)+function iwe(e,t){return 2*(1-e)*e*t}(e,n)+function rwe(e,t){return e*e*t}(e,i)}function Hb(e,t,n,i,r){return function owe(e,t){let n=1-e;return n*n*n*t}(e,t)+function swe(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+function awe(e,t){return 3*(1-e)*e*e*t}(e,i)+function lwe(e,t){return e*e*e*t}(e,r)}var Ad=class extends xh{constructor(e=new Ue,t=new Ue,n=new Ue,i=new Ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ue){let n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Hb(e,i.x,r.x,o.x,s.x),Hb(e,i.y,r.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},wM=class extends xh{constructor(e=new te,t=new te,n=new te,i=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new te){let n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Hb(e,i.x,r.x,o.x,s.x),Hb(e,i.y,r.y,o.y,s.y),Hb(e,i.z,r.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Td=class extends xh{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ue){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new Ue;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},YV=class extends xh{constructor(e=new te,t=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new te){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sf=class extends xh{constructor(e=new Ue,t=new Ue,n=new Ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ue){let n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Vb(e,i.x,r.x,o.x),Vb(e,i.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},YT=class extends xh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ue){let n=t,i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return n.set(qV(s,a.x,l.x,c.x,d.x),qV(s,a.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let i=e.points[t];this.points.push((new Ue).fromArray(i))}return this}},dwe=Object.freeze({__proto__:null,ArcCurve:class extends xM{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends xh{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new te){let l,c,n=t,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e,s=Math.floor(o),a=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===a&&s===r-1&&(s=r-2,a=1),this.closed||s>0?l=i[(s-1)%r]:(CM.subVectors(i[0],i[1]).add(i[0]),l=CM);let d=i[s%r],h=i[(s+1)%r];if(this.closed||s+2<r?c=i[(s+2)%r]:(CM.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=CM),"centripetal"===this.curveType||"chordal"===this.curveType){let p="chordal"===this.curveType?.5:.25,g=Math.pow(l.distanceToSquared(d),p),v=Math.pow(d.distanceToSquared(h),p),y=Math.pow(h.distanceToSquared(c),p);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),GT.initNonuniformCatmullRom(l.x,d.x,h.x,c.x,g,v,y),WT.initNonuniformCatmullRom(l.y,d.y,h.y,c.y,g,v,y),qT.initNonuniformCatmullRom(l.z,d.z,h.z,c.z,g,v,y)}else"catmullrom"===this.curveType&&(GT.initCatmullRom(l.x,d.x,h.x,c.x,this.tension),WT.initCatmullRom(l.y,d.y,h.y,c.y,this.tension),qT.initCatmullRom(l.z,d.z,h.z,c.z,this.tension));return n.set(GT.calc(a),WT.calc(a),qT.calc(a)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let i=e.points[t];this.points.push((new te).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Ad,CubicBezierCurve3:wM,EllipseCurve:xM,LineCurve:Td,LineCurve3:YV,QuadraticBezierCurve:sf,QuadraticBezierCurve3:class extends xh{constructor(e=new te,t=new te,n=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new te){let n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Vb(e,i.x,r.x,o.x),Vb(e,i.y,r.y,o.y),Vb(e,i.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:YT}),XV=class extends xh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Td(t,e))}getPoint(e,t){let n=e*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let o=i[r]-n,s=this.curves[r],a=s.getLength();return s.getPointAt(0===a?0:1-o/a,t)}r++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let n,t=[];for(let i=0,r=this.curves;i<r.length;i++){let o=r[i],a=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<a.length;l++){let c=a[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let i=e.curves[t];this.curves.push((new dwe[i.type]).fromJSON(i))}return this}},MM=class extends XV{constructor(e){super(),this.type="Path",this.currentPoint=new Ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new Td(this.currentPoint.clone(),new Ue(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){let r=new sf(this.currentPoint.clone(),new Ue(e,t),new Ue(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){let s=new Ad(this.currentPoint.clone(),new Ue(e,t),new Ue(n,i),new Ue(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new YT(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,s,a){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,o,s,a),this}absellipse(e,t,n,i,r,o,s,a){let l=new xM(e,t,n,i,r,o,s,a);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},$V=class extends Xn{constructor(e=[new Ue(0,-.5),new Ue(.5,0),new Ue(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=ws(i,0,2*Math.PI);let r=[],o=[],s=[],a=[],l=[],c=1/t,d=new te,h=new Ue,p=new te,g=new te,v=new te,y=0,b=0;for(let P=0;P<=e.length-1;P++)switch(P){case 0:y=e[P+1].x-e[P].x,b=e[P+1].y-e[P].y,p.x=1*b,p.y=-y,p.z=0*b,v.copy(p),p.normalize(),a.push(p.x,p.y,p.z);break;case e.length-1:a.push(v.x,v.y,v.z);break;default:y=e[P+1].x-e[P].x,b=e[P+1].y-e[P].y,p.x=1*b,p.y=-y,p.z=0*b,g.copy(p),p.x+=v.x,p.y+=v.y,p.z+=v.z,p.normalize(),a.push(p.x,p.y,p.z),v.copy(g)}for(let P=0;P<=t;P++){let S=n+P*c*i,O=Math.sin(S),A=Math.cos(S);for(let H=0;H<=e.length-1;H++)d.x=e[H].x*O,d.y=e[H].y,d.z=e[H].x*A,o.push(d.x,d.y,d.z),h.x=P/t,h.y=H/(e.length-1),s.push(h.x,h.y),l.push(a[3*H+0]*O,a[3*H+1],a[3*H+0]*A)}for(let P=0;P<t;P++)for(let S=0;S<e.length-1;S++){let O=S+P*e.length,H=O+e.length,U=O+e.length+1,X=O+1;r.push(O,H,X),r.push(U,X,H)}this.setIndex(r),this.setAttribute("position",new _n(o,3)),this.setAttribute("uv",new _n(s,2)),this.setAttribute("normal",new _n(l,3))}static fromJSON(e){return new $V(e.points,e.segments,e.phiStart,e.phiLength)}},XT=class extends Xn{constructor(e=1,t=1,n=1,i=32,r=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};let l=this;i=Math.floor(i),r=Math.floor(r);let c=[],d=[],h=[],p=[],g=0,v=[],y=n/2,b=0;function S(O){let A=g,H=new Ue,U=new te,X=0,Y=!0===O?e:t,Z=!0===O?1:-1;for(let oe=1;oe<=i;oe++)d.push(0,y*Z,0),h.push(0,Z,0),p.push(.5,.5),g++;let ee=g;for(let oe=0;oe<=i;oe++){let ce=oe/i*a+s,de=Math.cos(ce),he=Math.sin(ce);U.x=Y*he,U.y=y*Z,U.z=Y*de,d.push(U.x,U.y,U.z),h.push(0,Z,0),H.x=.5*de+.5,H.y=.5*he*Z+.5,p.push(H.x,H.y),g++}for(let oe=0;oe<i;oe++){let ce=A+oe,de=ee+oe;!0===O?c.push(de,de+1,ce):c.push(de+1,de,ce),X+=3}l.addGroup(b,X,!0===O?1:2),b+=X}(function P(){let O=new te,A=new te,H=0,U=(t-e)/n;for(let X=0;X<=r;X++){let Y=[],Z=X/r,ee=Z*(t-e)+e;for(let oe=0;oe<=i;oe++){let ce=oe/i,de=ce*a+s,he=Math.sin(de),Pe=Math.cos(de);A.x=ee*he,A.y=-Z*n+y,A.z=ee*Pe,d.push(A.x,A.y,A.z),O.set(he,U,Pe).normalize(),h.push(O.x,O.y,O.z),p.push(ce,1-Z),Y.push(g++)}v.push(Y)}for(let X=0;X<i;X++)for(let Y=0;Y<r;Y++){let ee=v[Y+1][X],oe=v[Y+1][X+1],ce=v[Y][X+1];c.push(v[Y][X],ee,ce),c.push(ee,oe,ce),H+=6}l.addGroup(b,H,0),b+=H})(),!1===o&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(c),this.setAttribute("position",new _n(d,3)),this.setAttribute("normal",new _n(h,3)),this.setAttribute("uv",new _n(p,2))}static fromJSON(e){return new XT(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},$T=class extends XT{constructor(e=1,t=1,n=32,i=1,r=!1,o=0,s=2*Math.PI){super(0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}static fromJSON(e){return new $T(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},QT=class extends Xn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};let r=[],o=[];function a(P,S,O,A){let H=A+1,U=[];for(let X=0;X<=H;X++){U[X]=[];let Y=P.clone().lerp(O,X/H),Z=S.clone().lerp(O,X/H),ee=H-X;for(let oe=0;oe<=ee;oe++)U[X][oe]=0===oe&&X===H?Y:Y.clone().lerp(Z,oe/ee)}for(let X=0;X<H;X++)for(let Y=0;Y<2*(H-X)-1;Y++){let Z=Math.floor(Y/2);Y%2==0?(h(U[X][Z+1]),h(U[X+1][Z]),h(U[X][Z])):(h(U[X][Z+1]),h(U[X+1][Z+1]),h(U[X+1][Z]))}}function h(P){r.push(P.x,P.y,P.z)}function p(P,S){let O=3*P;S.x=e[O+0],S.y=e[O+1],S.z=e[O+2]}function v(P,S,O,A){A<0&&1===P.x&&(o[S]=P.x-1),0===O.x&&0===O.z&&(o[S]=A/2/Math.PI+.5)}function y(P){return Math.atan2(P.z,-P.x)}function b(P){return Math.atan2(-P.y,Math.sqrt(P.x*P.x+P.z*P.z))}(function s(P){let S=new te,O=new te,A=new te;for(let H=0;H<t.length;H+=3)p(t[H+0],S),p(t[H+1],O),p(t[H+2],A),a(S,O,A,P)})(i),function l(P){let S=new te;for(let O=0;O<r.length;O+=3)S.x=r[O+0],S.y=r[O+1],S.z=r[O+2],S.normalize().multiplyScalar(P),r[O+0]=S.x,r[O+1]=S.y,r[O+2]=S.z}(n),function c(){let P=new te;for(let S=0;S<r.length;S+=3){P.x=r[S+0],P.y=r[S+1],P.z=r[S+2];let O=y(P)/2/Math.PI+.5,A=b(P)/Math.PI+.5;o.push(O,1-A)}(function g(){let P=new te,S=new te,O=new te,A=new te,H=new Ue,U=new Ue,X=new Ue;for(let Y=0,Z=0;Y<r.length;Y+=9,Z+=6){P.set(r[Y+0],r[Y+1],r[Y+2]),S.set(r[Y+3],r[Y+4],r[Y+5]),O.set(r[Y+6],r[Y+7],r[Y+8]),H.set(o[Z+0],o[Z+1]),U.set(o[Z+2],o[Z+3]),X.set(o[Z+4],o[Z+5]),A.copy(P).add(S).add(O).divideScalar(3);let ee=y(A);v(H,Z+0,P,ee),v(U,Z+2,S,ee),v(X,Z+4,O,ee)}})(),function d(){for(let P=0;P<o.length;P+=6){let S=o[P+0],O=o[P+2],A=o[P+4],H=Math.max(S,O,A),U=Math.min(S,O,A);H>.9&&U<.1&&(S<.2&&(o[P+0]+=1),O<.2&&(o[P+2]+=1),A<.2&&(o[P+4]+=1))}}()}(),this.setAttribute("position",new _n(r,3)),this.setAttribute("normal",new _n(r.slice(),3)),this.setAttribute("uv",new _n(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new QT(e.vertices,e.indices,e.radius,e.details)}},QV=class extends QT{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new QV(e.radius,e.detail)}},PM=class extends MM{constructor(e){super(e),this.uuid=Bc(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let i=e.holes[t];this.holes.push((new MM).fromJSON(i))}return this}};function KV(e,t,n,i,r){let o,s;if(r===function Owe(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)s=eH(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=eH(o,e[o],e[o+1],s);return s&&SM(s,s.next)&&(qb(s),s=s.next),s}function Km(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!SM(n,n.next)&&0!==Ho(n.prev,n,n.next))n=n.next;else{if(qb(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function Gb(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function xwe(e,t,n,i){let r=e;do{0===r.z&&(r.z=KT(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function Cwe(e){let t,n,i,r,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ,i);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(e,i,r,o);let l,c,a=e;for(;e.prev!==e.next;)if(l=e.prev,c=e.next,o?pwe(e,i,r,o):uwe(e))t.push(l.i/n|0),t.push(e.i/n|0),t.push(c.i/n|0),qb(e),e=c.next,a=c.next;else if((e=c)===a){s?1===s?Gb(e=fwe(Km(e),t,n),t,n,i,r,o,2):2===s&&mwe(e,t,n,i,r,o):Gb(Km(e),t,n,i,r,o,1);break}}function uwe(e){let t=e.prev,n=e,i=e.next;if(Ho(t,n,i)>=0)return!1;let r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,c=i.y,d=r<o?r<s?r:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,p=r>o?r>s?r:s:o>s?o:s,g=a>l?a>c?a:c:l>c?l:c,v=i.next;for(;v!==t;){if(v.x>=d&&v.x<=p&&v.y>=h&&v.y<=g&&xv(r,a,o,l,s,c,v.x,v.y)&&Ho(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function pwe(e,t,n,i){let r=e.prev,o=e,s=e.next;if(Ho(r,o,s)>=0)return!1;let a=r.x,l=o.x,c=s.x,d=r.y,h=o.y,p=s.y,g=a<l?a<c?a:c:l<c?l:c,v=d<h?d<p?d:p:h<p?h:p,y=a>l?a>c?a:c:l>c?l:c,b=d>h?d>p?d:p:h>p?h:p,P=KT(g,v,t,n,i),S=KT(y,b,t,n,i),O=e.prevZ,A=e.nextZ;for(;O&&O.z>=P&&A&&A.z<=S;){if(O.x>=g&&O.x<=y&&O.y>=v&&O.y<=b&&O!==r&&O!==s&&xv(a,d,l,h,c,p,O.x,O.y)&&Ho(O.prev,O,O.next)>=0||(O=O.prevZ,A.x>=g&&A.x<=y&&A.y>=v&&A.y<=b&&A!==r&&A!==s&&xv(a,d,l,h,c,p,A.x,A.y)&&Ho(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;O&&O.z>=P;){if(O.x>=g&&O.x<=y&&O.y>=v&&O.y<=b&&O!==r&&O!==s&&xv(a,d,l,h,c,p,O.x,O.y)&&Ho(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;A&&A.z<=S;){if(A.x>=g&&A.x<=y&&A.y>=v&&A.y<=b&&A!==r&&A!==s&&xv(a,d,l,h,c,p,A.x,A.y)&&Ho(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function fwe(e,t,n){let i=e;do{let r=i.prev,o=i.next.next;!SM(r,o)&&ZV(r,i,i.next,o)&&Wb(r,o)&&Wb(o,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),qb(i),qb(i.next),i=e=o),i=i.next}while(i!==e);return Km(i)}function mwe(e,t,n,i,r,o){let s=e;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Mwe(s,a)){let l=JV(s,a);return s=Km(s,s.next),l=Km(l,l.next),Gb(s,t,n,i,r,o,0),void Gb(l,t,n,i,r,o,0)}a=a.next}s=s.next}while(s!==e)}function vwe(e,t){return e.x-t.x}function ywe(e,t){let n=function bwe(e,t){let r,n=t,i=-1/0,o=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let p=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=o&&p>i&&(i=p,r=n.x<n.next.x?n:n.next,p===o))return r}n=n.next}while(n!==t);if(!r)return null;let h,a=r,l=r.x,c=r.y,d=1/0;n=r;do{o>=n.x&&n.x>=l&&o!==n.x&&xv(s<c?o:i,s,l,c,s<c?i:o,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(o-n.x),Wb(n,e)&&(h<d||h===d&&(n.x>r.x||n.x===r.x&&_we(r,n)))&&(r=n,d=h)),n=n.next}while(n!==a);return r}(e,t);if(!n)return t;let i=JV(n,e);return Km(i,i.next),Km(n,n.next)}function _we(e,t){return Ho(e.prev,e,t.prev)<0&&Ho(t.next,e,e.next)<0}function KT(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function wwe(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function xv(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function Mwe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function Pwe(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ZV(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Wb(e,t)&&Wb(t,e)&&function Swe(e,t){let n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Ho(e.prev,e,t.prev)||Ho(e,t.prev,t))||SM(e,t)&&Ho(e.prev,e,e.next)>0&&Ho(t.prev,t,t.next)>0)}function Ho(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function SM(e,t){return e.x===t.x&&e.y===t.y}function ZV(e,t,n,i){let r=EM(Ho(e,t,n)),o=EM(Ho(e,t,i)),s=EM(Ho(n,i,e)),a=EM(Ho(n,i,t));return!!(r!==o&&s!==a||0===r&&OM(e,n,t)||0===o&&OM(e,i,t)||0===s&&OM(n,e,i)||0===a&&OM(n,t,i))}function OM(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function EM(e){return e>0?1:e<0?-1:0}function Wb(e,t){return Ho(e.prev,e,e.next)<0?Ho(e,t,e.next)>=0&&Ho(e,e.prev,t)>=0:Ho(e,t,e.prev)<0||Ho(e,e.next,t)<0}function JV(e,t){let n=new ZT(e.i,e.x,e.y),i=new ZT(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function eH(e,t,n,i){let r=new ZT(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qb(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ZT(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var tH=class{static area(e){let t=e.length,n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return tH.area(e)<0}static triangulateShape(e,t){let n=[],i=[],r=[];nH(e),iH(n,e);let o=e.length;t.forEach(nH);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,iH(n,t[a]);let s=function(e,t,n=2){let a,l,c,d,h,p,g,i=t&&t.length,r=i?t[0]*n:e.length,o=KV(e,0,r,n,!0),s=[];if(!o||o.next===o.prev)return s;if(i&&(o=function gwe(e,t,n,i){let o,s,a,l,c,r=[];for(o=0,s=t.length;o<s;o++)a=t[o]*i,l=o<s-1?t[o+1]*i:e.length,c=KV(e,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(wwe(c));for(r.sort(vwe),o=0;o<r.length;o++)n=ywe(r[o],n);return n}(e,t,o,n)),e.length>80*n){a=c=e[0],l=d=e[1];for(let v=n;v<r;v+=n)h=e[v],p=e[v+1],h<a&&(a=h),p<l&&(l=p),h>c&&(c=h),p>d&&(d=p);g=Math.max(c-a,d-l),g=0!==g?32767/g:0}return Gb(o,s,n,a,l,g,0),s}(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function nH(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function iH(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var rH=class extends QT{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rH(e.radius,e.detail)}},Cv=class extends Xn{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let a=Math.min(o+s,Math.PI),l=0,c=[],d=new te,h=new te,p=[],g=[],v=[],y=[];for(let b=0;b<=n;b++){let P=[],S=b/n,O=0;0==b&&0==o?O=.5/t:b==n&&a==Math.PI&&(O=-.5/t);for(let A=0;A<=t;A++){let H=A/t;d.x=-e*Math.cos(i+H*r)*Math.sin(o+S*s),d.y=e*Math.cos(o+S*s),d.z=e*Math.sin(i+H*r)*Math.sin(o+S*s),g.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),y.push(H+O,1-S),P.push(l++)}c.push(P)}for(let b=0;b<n;b++)for(let P=0;P<t;P++){let S=c[b][P+1],O=c[b][P],A=c[b+1][P],H=c[b+1][P+1];(0!==b||o>0)&&p.push(S,O,H),(b!==n-1||a<Math.PI)&&p.push(O,A,H)}this.setIndex(p),this.setAttribute("position",new _n(g,3)),this.setAttribute("normal",new _n(v,3)),this.setAttribute("uv",new _n(y,2))}static fromJSON(e){return new Cv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},oH=class extends Xn{constructor(e=1,t=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);let o=[],s=[],a=[],l=[],c=new te,d=new te,h=new te;for(let p=0;p<=n;p++)for(let g=0;g<=i;g++){let v=g/i*r,y=p/n*Math.PI*2;d.x=(e+t*Math.cos(y))*Math.cos(v),d.y=(e+t*Math.cos(y))*Math.sin(v),d.z=t*Math.sin(y),s.push(d.x,d.y,d.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),h.subVectors(d,c).normalize(),a.push(h.x,h.y,h.z),l.push(g/i),l.push(p/n)}for(let p=1;p<=n;p++)for(let g=1;g<=i;g++){let y=(i+1)*(p-1)+g-1,b=(i+1)*(p-1)+g,P=(i+1)*p+g;o.push((i+1)*p+g-1,y,P),o.push(y,b,P)}this.setIndex(o),this.setAttribute("position",new _n(s,3)),this.setAttribute("normal",new _n(a,3)),this.setAttribute("uv",new _n(l,2))}static fromJSON(e){return new oH(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},sH=class extends Xn{constructor(e=1,t=.4,n=64,i=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);let s=[],a=[],l=[],c=[],d=new te,h=new te,p=new te,g=new te,v=new te,y=new te,b=new te;for(let S=0;S<=n;++S){let O=S/n*r*Math.PI*2;P(O,r,o,e,p),P(O+.01,r,o,e,g),y.subVectors(g,p),b.addVectors(g,p),v.crossVectors(y,b),b.crossVectors(v,y),v.normalize(),b.normalize();for(let A=0;A<=i;++A){let H=A/i*Math.PI*2,U=-t*Math.cos(H),X=t*Math.sin(H);d.x=p.x+(U*b.x+X*v.x),d.y=p.y+(U*b.y+X*v.y),d.z=p.z+(U*b.z+X*v.z),a.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),l.push(h.x,h.y,h.z),c.push(S/n),c.push(A/i)}}for(let S=1;S<=n;S++)for(let O=1;O<=i;O++){let H=(i+1)*S+(O-1),U=(i+1)*S+O,X=(i+1)*(S-1)+O;s.push((i+1)*(S-1)+(O-1),H,X),s.push(H,U,X)}function P(S,O,A,H,U){let X=Math.cos(S),Y=Math.sin(S),Z=A/O*S,ee=Math.cos(Z);U.x=H*(2+ee)*.5*X,U.y=H*(2+ee)*Y*.5,U.z=H*Math.sin(Z)*.5}this.setIndex(s),this.setAttribute("position",new _n(a,3)),this.setAttribute("normal",new _n(l,3)),this.setAttribute("uv",new _n(c,2))}static fromJSON(e){return new sH(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function af(e,t,n){return aH(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function DM(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function aH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ewe(e){let n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(function t(r,o){return e[r]-e[o]}),i}function lH(e,t,n){let i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){let a=n[o]*t;for(let l=0;l!==t;++l)r[s++]=e[a+l]}return r}function cH(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}var AM=class{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{let s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){let s=n+o>>>1;e<t[s]?o=s:n=s+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Dwe=class extends AM{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Z0,endingEnd:Z0}}intervalChanged_(e,t,n){let i=this.parameterPositions,r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case J0:r=e,s=2*t-n;break;case 2402:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case J0:o=e,a=2*n-t;break;case 2402:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}let l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(e,t,n,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,g=(n-t)/(i-t),v=g*g,y=v*g,b=-h*y+2*h*v-h*g,P=(1+h)*y+(-1.5-2*h)*v+(-.5+h)*g+1,S=(-1-p)*y+(1.5+p)*v+.5*g,O=p*y-p*v;for(let A=0;A!==s;++A)r[A]=b*o[c+A]+P*o[l+A]+S*o[a+A]+O*o[d+A];return r}},dH=class extends AM{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(i-t),d=1-c;for(let h=0;h!==s;++h)r[h]=o[l+h]*d+o[a+h]*c;return r}},Awe=class extends AM{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}},Ch=class{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=DM(t,this.TimeBufferType),this.values=DM(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let n,t=e.constructor;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:DM(e.times,Array),values:DM(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Awe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Dwe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){let n=this.times,i=n.length,r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);let s=this.getValueSize();this.times=af(n,r,o),this.values=af(this.values,r*s,o*s)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){let a=n[s];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),e=!1;break}if(null!==o&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),e=!1;break}o=a}if(void 0!==i&&aH(i))for(let s=0,a=i.length;s!==a;++s){let l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e}optimize(){let e=af(this.times),t=af(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=e.length-1,o=1;for(let s=1;s<r;++s){let a=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==e[0]))if(i)a=!0;else{let d=s*n,h=d-n,p=d+n;for(let g=0;g!==n;++g){let v=t[d+g];if(v!==t[h+g]||v!==t[p+g]){a=!0;break}}}if(a){if(s!==o){e[o]=e[s];let d=s*n,h=o*n;for(let p=0;p!==n;++p)t[h+p]=t[d+p]}++o}}if(r>0){e[o]=e[r];for(let s=r*n,a=o*n,l=0;l!==n;++l)t[a+l]=t[s+l];++o}return o!==e.length?(this.times=af(e,0,o),this.values=af(t,0,o*n)):(this.times=e,this.values=t),this}clone(){let e=af(this.times,0),t=af(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};Ch.prototype.TimeBufferType=Float32Array,Ch.prototype.ValueBufferType=Float32Array,Ch.prototype.DefaultInterpolation=2301;var wv=class extends Ch{};wv.prototype.ValueTypeName="bool",wv.prototype.ValueBufferType=Array,wv.prototype.DefaultInterpolation=2300,wv.prototype.InterpolantFactoryMethodLinear=void 0,wv.prototype.InterpolantFactoryMethodSmooth=void 0;var hH=class extends Ch{};hH.prototype.ValueTypeName="color";var TM=class extends Ch{};TM.prototype.ValueTypeName="number";var Twe=class extends AM{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t),l=e*s;for(let c=l+s;l!==c;l+=4)_i.slerpFlat(r,0,o,l-s,o,l,a);return r}},Yb=class extends Ch{InterpolantFactoryMethodLinear(e){return new Twe(this.times,this.values,this.getValueSize(),e)}};Yb.prototype.ValueTypeName="quaternion",Yb.prototype.DefaultInterpolation=2301,Yb.prototype.InterpolantFactoryMethodSmooth=void 0;var Mv=class extends Ch{};Mv.prototype.ValueTypeName="string",Mv.prototype.ValueBufferType=Array,Mv.prototype.DefaultInterpolation=2300,Mv.prototype.InterpolantFactoryMethodLinear=void 0,Mv.prototype.InterpolantFactoryMethodSmooth=void 0;var IM=class extends Ch{};IM.prototype.ValueTypeName="vector";var JT=class{constructor(e,t=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Bc(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(kwe(n[o]).scale(i));let r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){let t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(Ch.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){let r=t.length,o=[];for(let s=0;s<r;s++){let a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);let c=Ewe(a);a=lH(a,1,c),l=lH(l,1,c),!i&&0===a[0]&&(a.push(r),l.push(l[0])),o.push(new TM(".morphTargetInfluences["+t[s].name+"]",a,l).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){let i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.name.match(r);if(c&&c.length>1){let d=c[1],h=i[d];h||(i[d]=h=[]),h.push(l)}}let o=[];for(let s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(c,d,h,p,g){if(0!==h.length){let v=[],y=[];cH(h,v,y,p),0!==v.length&&g.push(new c(d,v,y))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode,a=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let d=l[c].keys;if(d&&0!==d.length)if(d[0].morphTargets){let p,h={};for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let g=0;g<d[p].morphTargets.length;g++)h[d[p].morphTargets[g]]=-1;for(let g in h){let v=[],y=[];for(let b=0;b!==d[p].morphTargets.length;++b){let P=d[p];v.push(P.time),y.push(P.morphTarget===g?1:0)}i.push(new TM(".morphTargetInfluence["+g+"]",v,y))}a=h.length*o}else{let h=".bones["+t[c].name+"]";n(IM,h+".position",d,"pos",i),n(Yb,h+".quaternion",d,"rot",i),n(IM,h+".scale",d,"scl",i)}}return 0===i.length?null:new this(r,a,i,s)}resetDuration(){let t=0;for(let n=0,i=this.tracks.length;n!==i;++n){let r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function kwe(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function Iwe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return TM;case"vector":case"vector2":case"vector3":case"vector4":return IM;case"color":return hH;case"quaternion":return Yb;case"bool":case"boolean":return wv;case"string":return Mv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let n=[],i=[];cH(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var kM={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},uH=class{constructor(e,t,n){let a,i=this,r=!1,o=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){s++,!1===r&&void 0!==i.onStart&&i.onStart(c,o,s),r=!0},this.itemEnd=function(c){o++,void 0!==i.onProgress&&i.onProgress(c,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(c){void 0!==i.onError&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,d){return l.push(c,d),this},this.removeHandler=function(c){let d=l.indexOf(c);return-1!==d&&l.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=l.length;d<h;d+=2){let p=l[d],g=l[d+1];if(p.global&&(p.lastIndex=0),p.test(c))return g}return null}}},Rwe=new uH,Xb=class{constructor(e){this.manager=void 0!==e?e:Rwe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Vu={},Nwe=class extends Error{constructor(e,t){super(e),this.response=t}},e3=class extends Xb{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let r=kM.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==Vu[e])return void Vu[e].push({onLoad:t,onProgress:n,onError:i});Vu[e]=[],Vu[e].push({onLoad:t,onProgress:n,onError:i});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;let c=Vu[e],d=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),p=h?parseInt(h):0,g=0!==p,v=0,y=new ReadableStream({start(b){!function P(){d.read().then(({done:S,value:O})=>{if(S)b.close();else{v+=O.byteLength;let A=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:p});for(let H=0,U=c.length;H<U;H++){let X=c[H];X.onProgress&&X.onProgress(A)}b.enqueue(O),P()}})}()}});return new Response(y)}throw new Nwe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>(new DOMParser).parseFromString(c,s));case"json":return l.json();default:if(void 0===s)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(s),d=c&&c[1]?c[1].toLowerCase():void 0,h=new TextDecoder(d);return l.arrayBuffer().then(p=>h.decode(p))}}}).then(l=>{kM.add(e,l);let c=Vu[e];delete Vu[e];for(let d=0,h=c.length;d<h;d++){let p=c[d];p.onLoad&&p.onLoad(l)}}).catch(l=>{let c=Vu[e];if(void 0===c)throw this.manager.itemError(e),l;delete Vu[e];for(let d=0,h=c.length;d<h;d++){let p=c[d];p.onError&&p.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Fwe=class extends Xb{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let r=this,o=kM.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;let s=Db("img");function a(){c(),kM.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(d){c(),i&&i(d),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}},Lwe=class extends Xb{constructor(e){super(e)}load(e,t,n,i){let r=new jo,o=new Fwe(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){r.image=s,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}},$b=class extends Fr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ni(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}},Bwe=class extends $b{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ni(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},t3=new qt,pH=new te,fH=new te,n3=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.map=null,this.mapPass=null,this.matrix=new qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kT,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new bi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;pH.setFromMatrixPosition(e.matrixWorld),t.position.copy(pH),fH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fH),t.updateMatrixWorld(),t3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t3),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},zwe=class extends n3{constructor(){super(new Xa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*Ob*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Uwe=class extends $b{constructor(e,t,n=0,i=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new zwe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},mH=new qt,Qb=new te,r3=new te,jwe=class extends n3{constructor(){super(new Xa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new bi(2,1,1,1),new bi(0,1,1,1),new bi(3,1,1,1),new bi(1,1,1,1),new bi(3,0,1,1),new bi(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Qb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Qb),r3.copy(n.position),r3.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(r3),n.updateMatrixWorld(),i.makeTranslation(-Qb.x,-Qb.y,-Qb.z),mH.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mH)}},Vwe=class extends $b{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new jwe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Hwe=class extends n3{constructor(){super(new fM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Gwe=class extends $b{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.shadow=new Hwe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},gH=class extends Xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},vH=class extends Xb{constructor(e){super(e)}load(e,t,n,i){let r=this,o=new e3(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){try{t(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}parse(e){let t={},n={};function i(h,p){if(void 0!==t[p])return t[p];let g=h.interleavedBuffers[p],v=function r(h,p){if(void 0!==n[p])return n[p];let v=new Uint32Array(h.arrayBuffers[p]).buffer;return n[p]=v,v}(h,g.buffer),y=$w(g.type,v),b=new class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bc()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}(y,g.stride);return b.uuid=g.uuid,t[p]=b,b}let o=e.isInstancedBufferGeometry?new gH:new Xn,s=e.data.index;if(void 0!==s){let h=$w(s.type,s.array);o.setIndex(new ui(h,1))}let a=e.data.attributes;for(let h in a){let g,p=a[h];if(p.isInterleavedBufferAttribute){let v=i(e.data,p.data);g=new UT(v,p.itemSize,p.offset,p.normalized)}else{let v=$w(p.type,p.array);g=new(p.isInstancedBufferAttribute?zb:ui)(v,p.itemSize,p.normalized)}void 0!==p.name&&(g.name=p.name),void 0!==p.usage&&g.setUsage(p.usage),void 0!==p.updateRange&&(g.updateRange.offset=p.updateRange.offset,g.updateRange.count=p.updateRange.count),o.setAttribute(h,g)}let l=e.data.morphAttributes;if(l)for(let h in l){let p=l[h],g=[];for(let v=0,y=p.length;v<y;v++){let P,b=p[v];if(b.isInterleavedBufferAttribute){let S=i(e.data,b.data);P=new UT(S,b.itemSize,b.offset,b.normalized)}else{let S=$w(b.type,b.array);P=new ui(S,b.itemSize,b.normalized)}void 0!==b.name&&(P.name=b.name),g.push(P)}o.morphAttributes[h]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let h=0,p=c.length;h!==p;++h){let g=c[h];o.addGroup(g.start,g.count,g.materialIndex)}let d=e.data.boundingSphere;if(void 0!==d){let h=new te;void 0!==d.center&&h.fromArray(d.center),o.boundingSphere=new Fl(h,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}};function yH(){return(typeof performance>"u"?Date:performance).now()}var qwe=class{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(let s=0;s!==i;++s)n[r+s]=n[s];o=t}else o+=t,this._mixBufferRegion(n,r,0,t/o,i);this.cumulativeWeight=o}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&this._mixBufferRegion(n,i,t*this._origIndex,1-r,t),o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,i);break}}saveOriginalState(){let t=this.buffer,n=this.valueSize,i=n*this._origIndex;this.binding.getValue(t,i);for(let r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){_i.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){let o=this._workIndex*r;_i.multiplyQuaternionsFlat(e,o,e,t,e,n),_i.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){let o=1-i;for(let s=0;s!==r;++s){let a=t+s;e[a]=e[a]*o+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){let s=t+o;e[s]=e[s]+e[n+o]*i}}},o3="\\[\\]\\.:\\/",Ywe=new RegExp("["+o3+"]","g"),s3="[^"+o3+"]",Xwe="[^"+o3.replace("\\.","")+"]",$we=/((?:WC+[\/:])*)/.source.replace("WC",s3),Qwe=/(WCOD+)?/.source.replace("WCOD",Xwe),Kwe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",s3),Zwe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",s3),Jwe=new RegExp("^"+$we+Qwe+Kwe+Zwe+"$"),eMe=["material","materials","bones","map"],io=class{constructor(e,t,n){this.path=t,this.parsedPath=n||io.parseTrackName(t),this.node=io.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new io.Composite(e,t,n):new io(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ywe,"")}static parseTrackName(e){let t=Jwe.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let r=n.nodeName.substring(i+1);-1!==eMe.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(r){for(let o=0;o<r.length;o++){let s=r[o];if(s.name===t||s.uuid===t)return s;let a=n(s.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=io.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==l){if(void 0===e[l])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[l]}}let o=e[i];if(void 0===o)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e);let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};io.Composite=class{constructor(e,t,n){let i=n||io.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},io.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},io.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},io.prototype.GetterByBindingType=[io.prototype._getValue_direct,io.prototype._getValue_array,io.prototype._getValue_arrayElement,io.prototype._getValue_toArray],io.prototype.SetterByBindingTypeAndVersioning=[[io.prototype._setValue_direct,io.prototype._setValue_direct_setNeedsUpdate,io.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[io.prototype._setValue_array,io.prototype._setValue_array_setNeedsUpdate,io.prototype._setValue_array_setMatrixWorldNeedsUpdate],[io.prototype._setValue_arrayElement,io.prototype._setValue_arrayElement_setNeedsUpdate,io.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[io.prototype._setValue_fromArray,io.prototype._setValue_fromArray_setNeedsUpdate,io.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var iMe=new Float32Array(1),rMe=class extends Ca{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(c={},l[a]=c);for(let d=0;d!==r;++d){let h=i[d],p=h.name,g=c[p];if(void 0!==g)++g.referenceCount,o[d]=g;else{if(g=o[d],void 0!==g){null===g._cacheIndex&&(++g.referenceCount,this._addInactiveBinding(g,a,p));continue}g=new qwe(io.create(n,p,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,a,p),o[d]=g}s[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{let s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;let r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){let r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){let i=this._bindingsByRootAndName,r=this._bindings,o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new dH(new Float32Array(2),new Float32Array(2),1,iMe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){let i=t||this._root,r=i.uuid,o="string"==typeof e?JT.findByName(i,e):e,s=null!==o?o.uuid:e,a=this._actionsByClip[s],l=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==a){let d=a.actionByRoot[r];if(void 0!==d&&d.blendMode===n)return d;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;let c=new class{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;let r=t.tracks,o=r.length,s=new Array(o),a={endingStart:Z0,endingEnd:Z0};for(let l=0;l!==o;++l){let c=r[l].createInterpolant(null);s[l]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let i=this._clip.duration,r=e._clip.duration,s=i/r;e.warp(1,r/i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let i=this._mixer,r=i.time,o=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);let r=this._startTime;if(null!==r){let a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);let o=this._updateTime(t),s=this._updateWeight(e);if(s>0){let a=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let c=0,d=a.length;c!==d;++c)a[c].evaluate(o),l[c].accumulateAdditive(s);else for(let c=0,d=a.length;c!==d;++c)a[c].evaluate(o),l[c].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,o=2202===n;if(0===e)return-1===r?i:o&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){let s=Math.floor(i/t);i-=t*s,r+=Math.abs(s);let a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){let l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&1==(1&r))return t-i}return i}_setEndings(e,t,n){let i=this._interpolantSettings;n?(i.endingStart=J0,i.endingEnd=J0):(i.endingStart=e?this.zeroSlopeAtStart?J0:Z0:2402,i.endingEnd=t?this.zeroSlopeAtEnd?J0:Z0:2402)}_scheduleFading(e,t,n){let i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);let s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){let n=t||this._root,i=n.uuid,r="string"==typeof e?JT.findByName(n,e):e,s=this._actionsByClip[r?r.uuid:e];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){let e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){let t=this._actions,n=this._nActiveActions,i=this.time+=e*=this.timeScale,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,o);let s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){let o=r.knownActions;for(let s=0,a=o.length;s!==a;++s){let l=o[s];this._deactivateAction(l);let c=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let o in n){let a=n[o].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let o in r){let s=r[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Lt=class{constructor(e){this.value=e}clone(){return new Lt(void 0===this.value.clone?this.value:this.value.clone())}},bH=class{constructor(e,t,n=0,i=1/0){this.ray=new rv(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new CT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return a3(e,this,n,t),n.sort(_H),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)a3(e[i],this,n,t);return n.sort(_H),n}};function _H(e,t){return e.distance-t.distance}function a3(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){let r=e.children;for(let o=0,s=r.length;o<s;o++)a3(r[o],t,n,!0)}}var xH=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ws(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},CH=new Ue,wH=class{constructor(e=new Ue(1/0,1/0),t=new Ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=CH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return CH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},MH=new te,RM=new te,jc=class{constructor(e=new te,t=new te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){MH.subVectors(e,this.start),RM.subVectors(this.end,this.start);let n=RM.dot(RM),i=RM.dot(MH)/n;return t&&(i=ws(i,0,1)),i}closestPointToPoint(e,t,n){let i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},PH=new te,oMe=class extends Fr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new Xn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){let l=o/a*Math.PI*2,c=s/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new _n(i,3));let r=new rf({fog:!1,toneMapped:!1});this.cone=new jb(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),PH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(PH),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},sMe=class extends Vo{constructor(e,t,n){super(new Cv(t,4,2),new zu({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},SH=new te,NM=new te,OH=new te,aMe=class extends Fr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new Xn;i.setAttribute("position",new _n([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let r=new rf({fog:!1,toneMapped:!1});this.lightPlane=new _M(i,r),this.add(this.lightPlane),i=new Xn,i.setAttribute("position",new _n([0,0,0,0,0,1],3)),this.targetLine=new _M(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),SH.setFromMatrixPosition(this.light.matrixWorld),NM.setFromMatrixPosition(this.light.target.matrixWorld),OH.subVectors(NM,SH),this.lightPlane.lookAt(NM),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(NM),this.targetLine.scale.z=OH.length()}},FM=new te,Ko=new Xm,LM=class extends jb{constructor(e){let t=new Xn,n=new rf({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={};function s(g,v){a(g),a(v)}function a(g){i.push(0,0,0),r.push(0,0,0),void 0===o[g]&&(o[g]=[]),o[g].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new _n(i,3)),t.setAttribute("color",new _n(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new ni(16755200),c=new ni(16711680),d=new ni(43775),h=new ni(16777215),p=new ni(3355443);this.setColors(l,c,d,h,p)}setColors(e,t,n,i,r){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;Ko.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cs("c",t,e,Ko,0,0,-1),cs("t",t,e,Ko,0,0,1),cs("n1",t,e,Ko,-1,-1,-1),cs("n2",t,e,Ko,1,-1,-1),cs("n3",t,e,Ko,-1,1,-1),cs("n4",t,e,Ko,1,1,-1),cs("f1",t,e,Ko,-1,-1,1),cs("f2",t,e,Ko,1,-1,1),cs("f3",t,e,Ko,-1,1,1),cs("f4",t,e,Ko,1,1,1),cs("u1",t,e,Ko,.7,1.1,-1),cs("u2",t,e,Ko,-.7,1.1,-1),cs("u3",t,e,Ko,0,2,-1),cs("cf1",t,e,Ko,-1,0,1),cs("cf2",t,e,Ko,1,0,1),cs("cf3",t,e,Ko,0,-1,1),cs("cf4",t,e,Ko,0,1,1),cs("cn1",t,e,Ko,-1,0,-1),cs("cn2",t,e,Ko,1,0,-1),cs("cn3",t,e,Ko,0,-1,-1),cs("cn4",t,e,Ko,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function cs(e,t,n,i,r,o,s){FM.set(r,o,s).unproject(i);let a=t[e];if(void 0!==a){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],FM.x,FM.y,FM.z)}}var BM=class extends jb{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Xn;r.setIndex(new ui(n,1)),r.setAttribute("position",new _n([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new rf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},lMe=class extends jb{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Xn;i.setAttribute("position",new _n(t,3)),i.setAttribute("color",new _n([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new rf({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let i=new ni,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Hu=function cMe(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):c<-14?(i[l]=1024>>-c-14,i[256|l]=1024>>-c-14|32768,r[l]=-c-1,r[256|l]=-c-1):c<=15?(i[l]=c+15<<10,i[256|l]=c+15<<10|32768,r[l]=13,r[256|l]=13):c<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;0==(8388608&c);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,o[l]=c|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}(),uMe=Object.freeze({__proto__:null,fromHalfFloat:function hMe(e){let t=e>>10;return Hu.uint32View[0]=Hu.mantissaTable[Hu.offsetTable[t]+(1023&e)]+Hu.exponentTable[t],Hu.floatView[0]},toHalfFloat:function dMe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=ws(e,-65504,65504),Hu.floatView[0]=e;let t=Hu.uint32View[0],n=t>>23&511;return Hu.baseTable[n]+((8388607&t)>>Hu.shiftTable[n])}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$0}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$0);var l3=Symbol("target"),EH=Symbol("unsubscribe");function c3(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var wh=Array.isArray;function d3(e){return"symbol"==typeof e}var fMe={after:(e,t)=>wh(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>wh(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+="."),d3(t)?e+t.toString():e+t):e,initial:e=>{if(wh(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(".");return-1===t?"":e.slice(0,t)},last:e=>{if(wh(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(".");return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(wh(e))for(let n of e)t(n);else if(""!==e){let n=0,i=e.indexOf(".");if(-1===i)t(e);else for(;n<e.length;)-1===i&&(i=e.length),t(e.slice(n,i)),n=i+1,i=e.indexOf(".",n)}},get(e,t){return this.walk(t,n=>{e&&(e=e[n])}),e}},Vc=fMe;function DH(e,t,n){return e.isUnsubscribed||t.ignoreSymbols&&d3(n)||t.ignoreUnderscores&&"_"===n.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(n)}function h3(e){return"[object Object]"===toString.call(e)}function zM(){return!0}function Pv(e,t){return e.length!==t.length||e.some((n,i)=>t[i]!==n)}var AH=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),yMe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),TH={push:zM,pop:zM,shift:zM,unshift:zM,copyWithin:Pv,reverse:Pv,sort:Pv,splice:Pv,flat:Pv,fill:Pv},bMe=new Set([...AH,...yMe,...Object.keys(TH)]);function UM(e,t){if(e.size!==t.size)return!0;for(let n of e)if(!t.has(n))return!0;return!1}var IH=["keys","values","entries"],kH=new Set(["has","toString"]),RH={add:UM,clear:UM,delete:UM,forEach:UM},_Me=new Set([...kH,...Object.keys(RH),...IH]);function jM(e,t){if(e.size!==t.size)return!0;let n;for(let[i,r]of e)if(n=t.get(i),n!==r||void 0===n&&!t.has(i))return!0;return!1}var xMe=new Set([...kH,"get"]),NH={set:jM,clear:jM,delete:jM,forEach:jM},CMe=new Set([...xMe,...Object.keys(NH),...IH]),lf=class{constructor(e,t,n,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return AH.has(e)}_shallowClone(e){let t=e;if(h3(e))t={...e};else if(wh(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(n=>this._shallowClone(n)));else if(e instanceof Map){t=new Map;for(let[n,i]of e.entries())t.set(n,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,n,i){return e?(wh(i)?this._onIsChanged=TH[t]:i instanceof Set?this._onIsChanged=RH[t]:i instanceof Map&&(this._onIsChanged=NH[t]),i):n}update(e,t,n){let i=Vc.after(e,this._path);if("length"!==t){let r=this.clone;Vc.walk(i,o=>{r&&r[o]&&(this._clonedCache.has(r[o])||(r[o]=this._shallowClone(r[o])),r=r[o])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:n}),r&&r[t]&&(r[t]=n)}this._isChanged=!0}undo(e){let t;for(let n=this._changes.length-1;-1!==n;n--)t=this._changes[n],Vc.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},FH=class extends lf{static isHandledMethod(e){return bMe.has(e)}},wMe=class extends lf{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},LH=class extends lf{static isHandledMethod(e){return _Me.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},BH=class extends lf{static isHandledMethod(e){return CMe.has(e)}undo(e){for(let[t,n]of this.clone.entries())e.set(t,n);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},MMe=class extends lf{constructor(e,t,n,i){super(void 0,t,n,i),this._arg1=n[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},PMe=class extends lf{constructor(e,t,n,i){super(void 0,t,n,i),this._weakKey=n[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Sv=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return h3(e)||wh(e)||c3(e)}static isHandledMethod(e,t){return h3(e)?lf.isHandledMethod(t):wh(e)?FH.isHandledMethod(t):e instanceof Set?LH.isHandledMethod(t):e instanceof Map?BH.isHandledMethod(t):c3(e)}get isCloning(){return this._stack.length>0}start(e,t,n){let i=lf;wh(e)?i=FH:e instanceof Date?i=wMe:e instanceof Set?i=LH:e instanceof Map?i=BH:e instanceof WeakSet?i=MMe:e instanceof WeakMap&&(i=PMe),this._stack.push(new i(e,t,n,this._hasOnValidate))}update(e,t,n){this._stack[this._stack.length-1].update(e,t,n)}preferredThisArg(e,t,n){let{name:i}=e,r=Sv.isHandledMethod(n,i);return this._stack[this._stack.length-1].preferredThisArg(r,i,t,n)}isChanged(e,t,n){return this._stack[this._stack.length-1].isChanged(e,t,n)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},SMe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},u3=(e,t,n={})=>{n={...SMe,...n};let i=Symbol("ProxyTarget"),{equals:r,isShallow:o,ignoreDetached:s,details:a}=n,l=new class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let n=this._getProperties(e),i=n[t];return void 0===i&&(i=Reflect.getOwnPropertyDescriptor(e,t),n[t]=i),i}getProxy(e,t,n,i){if(this.isUnsubscribed)return e;let r=e[i],o=r||e;this._pathCache.set(o,t);let s=this._proxyCache.get(o);return void 0===s&&(s=void 0===r?new Proxy(e,n):e,this._proxyCache.set(o,s)),s}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Vc.get(t,this.getPath(e)))}defineProperty(e,t,n){return!!Reflect.defineProperty(e,t,n)&&(this.isUnsubscribed||(this._getProperties(e)[t]=n),!0)}setProperty(e,t,n,i,r){if(!this._equals(r,n)||!(t in e)){let o=this._getOwnPropertyDescriptor(e,t);return void 0!==o&&"set"in o?Reflect.set(e,t,n,i):Reflect.set(e,t,n)}return!0}deleteProperty(e,t,n){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(e,t,n){let i=this._getOwnPropertyDescriptor(t,n);return void 0!==e&&void 0!==i&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let n=this._getOwnPropertyDescriptor(e,t);return void 0!==n&&!0!==n.configurable&&!0!==n.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}(r),c="function"==typeof n.onValidate,d=new Sv(c),h=(S,O,A,H,U)=>!c||d.isCloning||!0===n.onValidate(Vc.concat(l.getPath(S),O),A,H,U),p=(S,O,A,H)=>{!DH(l,n,O)&&(!s||!l.isDetached(S,e))&&g(l.getPath(S),O,A,H)},g=(S,O,A,H,U)=>{d.isCloning?d.update(S,O,H):t(Vc.concat(S,O),A,H,U)},v=S=>S&&(S[i]||S),y=(S,O,A,H)=>function pMe(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(S)||"constructor"===A||o&&!Sv.isHandledMethod(O,A)||DH(l,n,A)||l.isGetInvariant(O,A)||s&&l.isDetached(O,e)?S:(void 0===H&&(H=l.getPath(O)),l.getProxy(S,Vc.concat(H,A),b,i)),b={get(S,O,A){if(d3(O)){if(O===i||O===l3)return S;if(O===EH&&!l.isUnsubscribed&&0===l.getPath(S).length)return l.unsubscribe(),S}let H=c3(S)?Reflect.get(S,O):Reflect.get(S,O,A);return y(H,S,O)},set(S,O,A,H){A=v(A);let U=S[i]||S,X=U[O];if(r(X,A)&&O in S)return!0;let Y=h(S,O,A,X);return Y&&l.setProperty(U,O,A,H,X)?(p(S,O,S[O],X),!0):!Y},defineProperty(S,O,A){if(!l.isSameDescriptor(A,S,O)){let H=S[O];h(S,O,A.value,H)&&l.defineProperty(S,O,A,H)&&p(S,O,A.value,H)}return!0},deleteProperty(S,O){if(!Reflect.has(S,O))return!0;let A=Reflect.get(S,O),H=h(S,O,void 0,A);return H&&l.deleteProperty(S,O,A)?(p(S,O,void 0,A),!0):!H},apply(S,O,A){let H=O[i]||O;if(l.isUnsubscribed)return Reflect.apply(S,H,A);if((!1===a||!0!==a&&!a.includes(S.name))&&Sv.isHandledType(H)){let U=Vc.initial(l.getPath(S)),X=Sv.isHandledMethod(H,S.name);d.start(H,U,A);let Y=Reflect.apply(S,d.preferredThisArg(S,O,H),X?A.map(oe=>v(oe)):A),Z=d.isChanged(H,r),ee=d.stop();if(Sv.isHandledType(Y)&&X&&(O instanceof Map&&"get"===S.name&&(U=Vc.concat(U,A[0])),Y=l.getProxy(Y,U,b)),Z){let oe={name:S.name,args:A,result:Y},ce=d.isCloning?Vc.initial(U):U,de=d.isCloning?Vc.last(U):"";h(Vc.get(e,ce),de,H,ee,oe)?g(ce,de,H,ee,oe):d.undo(H)}return(O instanceof Map||O instanceof Set)&&function mMe(e){return"object"==typeof e&&"function"==typeof e.next}(Y)?function gMe(e,t,n,i,r){let o=e.next;if("entries"===t.name)e.next=function(){let s=o.call(this);return!1===s.done&&(s.value[0]=r(s.value[0],t,s.value[0],i),s.value[1]=r(s.value[1],t,s.value[0],i)),s};else if("values"===t.name){let s=n[l3].keys();e.next=function(){let a=o.call(this);return!1===a.done&&(a.value=r(a.value,t,s.next().value,i)),a}}else e.next=function(){let s=o.call(this);return!1===s.done&&(s.value=r(s.value,t,s.value,i)),s};return e}(Y,S,O,U,y):Y}return Reflect.apply(S,O,A)}},P=l.getProxy(e,n.pathAsArray?[]:"",b);return t=t.bind(P),c&&(n.onValidate=n.onValidate.bind(P)),P};u3.target=e=>e&&e[l3]||e,u3.unsubscribe=e=>e[EH]||e;var e,zH=u3,UH="object"==typeof global&&global&&global.Object===Object&&global,EMe="object"==typeof self&&self&&self.Object===Object&&self,Id=UH||EMe||Function("return this")(),Hc=Id.Symbol,jH=Object.prototype,TMe=jH.hasOwnProperty,IMe=jH.toString,Zb=Hc?Hc.toStringTag:void 0,FMe=Object.prototype.toString,VH=Hc?Hc.toStringTag:void 0,Zm=function jMe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":VH&&VH in Object(e)?function kMe(e){var t=TMe.call(e,Zb),n=e[Zb];try{e[Zb]=void 0;var i=!0}catch{}var r=IMe.call(e);return i&&(t?e[Zb]=n:delete e[Zb]),r}(e):function LMe(e){return FMe.call(e)}(e)},Gu=function VMe(e){return null!=e&&"object"==typeof e},Jb=function GMe(e){return"symbol"==typeof e||Gu(e)&&"[object Symbol]"==Zm(e)},HH=function WMe(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},Mh=Array.isArray,GH=Hc?Hc.prototype:void 0,WH=GH?GH.toString:void 0,XMe=function qH(e){if("string"==typeof e)return e;if(Mh(e))return HH(e,qH)+"";if(Jb(e))return WH?WH.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},$Me=/\s/,ZMe=/^\s+/,ePe=function JMe(e){return e&&e.slice(0,function QMe(e){for(var t=e.length;t--&&$Me.test(e.charAt(t)););return t}(e)+1).replace(ZMe,"")},kd=function tPe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},nPe=/^[-+]0x[0-9a-f]+$/i,iPe=/^0b[01]+$/i,rPe=/^0o[0-7]+$/i,oPe=parseInt,XH=function sPe(e){if("number"==typeof e)return e;if(Jb(e))return NaN;if(kd(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=kd(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ePe(e);var n=iPe.test(e);return n||rPe.test(e)?oPe(e.slice(2),n?2:8):nPe.test(e)?NaN:+e},$H=function aPe(e){return e},QH=function uPe(e){if(!kd(e))return!1;var t=Zm(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},pPe=Id["__core-js_shared__"],KH=(e=/[^.]+$/.exec(pPe&&pPe.keys&&pPe.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",vPe=Function.prototype.toString,Jm=function yPe(e){if(null!=e){try{return vPe.call(e)}catch{}try{return e+""}catch{}}return""},_Pe=/^\[object .+?Constructor\]$/,PPe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),OPe=function SPe(e){return!(!kd(e)||function fPe(e){return!!KH&&KH in e}(e))&&(QH(e)?PPe:_Pe).test(Jm(e))},eg=function APe(e,t){var n=function EPe(e,t){return e?.[t]}(e,t);return OPe(n)?n:void 0},f3=eg(Id,"WeakMap"),ZH=Object.create,IPe=function(){function e(){}return function(t){if(!kd(t))return{};if(ZH)return ZH(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),kPe=IPe,NPe=function RPe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},UPe=Date.now,GPe=function HPe(e){return function(){return e}},WPe=function(){try{var e=eg(Object,"defineProperty");return e({},"",{}),e}catch{}}(),VM=WPe,qPe=VM?function(e,t){return VM(e,"toString",{configurable:!0,enumerable:!1,value:GPe(t),writable:!0})}:$H,$Pe=function jPe(e){var t=0,n=0;return function(){var i=UPe(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(qPe),JPe=/^(?:0|[1-9]\d*)$/,m3=function e2e(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&("number"==n||"symbol"!=n&&JPe.test(e))&&e>-1&&e%1==0&&e<t},JH=function t2e(e,t,n){"__proto__"==t&&VM?VM(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},g3=function n2e(e,t){return e===t||e!=e&&t!=t},r2e=Object.prototype.hasOwnProperty,v3=function o2e(e,t,n){var i=e[t];(!r2e.call(e,t)||!g3(i,n)||void 0===n&&!(t in e))&&JH(e,t,n)},e_=function s2e(e,t,n,i){var r=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),r?JH(n,a,l):v3(n,a,l)}return n},eG=Math.max,y3=function d2e(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},tG=function h2e(e){return null!=e&&y3(e.length)&&!QH(e)},u2e=Object.prototype,b3=function p2e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||u2e)},nG=function v2e(e){return Gu(e)&&"[object Arguments]"==Zm(e)},iG=Object.prototype,y2e=iG.hasOwnProperty,b2e=iG.propertyIsEnumerable,_2e=nG(function(){return arguments}())?nG:function(e){return Gu(e)&&y2e.call(e,"callee")&&!b2e.call(e,"callee")},_3=_2e,rG="object"==typeof exports&&exports&&!exports.nodeType&&exports,oG=rG&&"object"==typeof module&&module&&!module.nodeType&&module,sG=oG&&oG.exports===rG?Id.Buffer:void 0,HM=(sG?sG.isBuffer:void 0)||function x2e(){return!1},To={};To["[object Float32Array]"]=To["[object Float64Array]"]=To["[object Int8Array]"]=To["[object Int16Array]"]=To["[object Int32Array]"]=To["[object Uint8Array]"]=To["[object Uint8ClampedArray]"]=To["[object Uint16Array]"]=To["[object Uint32Array]"]=!0,To["[object Arguments]"]=To["[object Array]"]=To["[object ArrayBuffer]"]=To["[object Boolean]"]=To["[object DataView]"]=To["[object Date]"]=To["[object Error]"]=To["[object Function]"]=To["[object Map]"]=To["[object Number]"]=To["[object Object]"]=To["[object RegExp]"]=To["[object Set]"]=To["[object String]"]=To["[object WeakMap]"]=!1;var x3=function Z2e(e){return function(t){return e(t)}},aG="object"==typeof exports&&exports&&!exports.nodeType&&exports,t_=aG&&"object"==typeof module&&module&&!module.nodeType&&module,C3=t_&&t_.exports===aG&&UH.process,Ov=function(){try{return t_&&t_.require&&t_.require("util").types||C3&&C3.binding&&C3.binding("util")}catch{}}(),lG=Ov&&Ov.isTypedArray,cG=lG?x3(lG):function Q2e(e){return Gu(e)&&y3(e.length)&&!!To[Zm(e)]},iSe=Object.prototype.hasOwnProperty,dG=function rSe(e,t){var n=Mh(e),i=!n&&_3(e),r=!n&&!i&&HM(e),o=!n&&!i&&!r&&cG(e),s=n||i||r||o,a=s?function f2e(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)(t||iSe.call(e,c))&&(!s||!("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||m3(c,l)))&&a.push(c);return a},hG=function oSe(e,t){return function(n){return e(t(n))}},aSe=hG(Object.keys,Object),cSe=Object.prototype.hasOwnProperty,w3=function uSe(e){return tG(e)?dG(e):function dSe(e){if(!b3(e))return aSe(e);var t=[];for(var n in Object(e))cSe.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},gSe=Object.prototype.hasOwnProperty,ySe=function vSe(e){if(!kd(e))return function pSe(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=b3(e),n=[];for(var i in e)"constructor"==i&&(t||!gSe.call(e,i))||n.push(i);return n},tg=function bSe(e){return tG(e)?dG(e,!0):ySe(e)},_Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xSe=/^\w*$/,n_=eg(Object,"create"),TSe=Object.prototype.hasOwnProperty,NSe=Object.prototype.hasOwnProperty;function Ev(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ev.prototype.clear=function PSe(){this.__data__=n_?n_(null):{},this.size=0},Ev.prototype.delete=function OSe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ev.prototype.get=function ISe(e){var t=this.__data__;if(n_){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return TSe.call(t,e)?t[e]:void 0},Ev.prototype.has=function FSe(e){var t=this.__data__;return n_?void 0!==t[e]:NSe.call(t,e)},Ev.prototype.set=function zSe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=n_&&void 0===t?"__lodash_hash_undefined__":t,this};var uG=Ev,GM=function HSe(e,t){for(var n=e.length;n--;)if(g3(e[n][0],t))return n;return-1},WSe=Array.prototype.splice;function Dv(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Dv.prototype.clear=function jSe(){this.__data__=[],this.size=0},Dv.prototype.delete=function qSe(e){var t=this.__data__,n=GM(t,e);return!(n<0||(n==t.length-1?t.pop():WSe.call(t,n,1),--this.size,0))},Dv.prototype.get=function XSe(e){var t=this.__data__,n=GM(t,e);return n<0?void 0:t[n][1]},Dv.prototype.has=function QSe(e){return GM(this.__data__,e)>-1},Dv.prototype.set=function ZSe(e,t){var n=this.__data__,i=GM(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var WM=Dv,i_=eg(Id,"Map"),qM=function oOe(e,t){var n=e.__data__;return function iOe(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function Av(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Av.prototype.clear=function tOe(){this.size=0,this.__data__={hash:new uG,map:new(i_||WM),string:new uG}},Av.prototype.delete=function sOe(e){var t=qM(this,e).delete(e);return this.size-=t?1:0,t},Av.prototype.get=function lOe(e){return qM(this,e).get(e)},Av.prototype.has=function dOe(e){return qM(this,e).has(e)},Av.prototype.set=function uOe(e,t){var n=qM(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var YM=Av;function M3(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(M3.Cache||YM),n}M3.Cache=YM;var mOe=M3,bOe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Oe=/\\(\\)?/g,xOe=function vOe(e){var t=mOe(e,function(i){return 500===n.size&&n.clear(),i}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(bOe,function(n,i,r,o){t.push(r?o.replace(_Oe,"$1"):i||n)}),t}),COe=xOe,MOe=function wOe(e){return null==e?"":XMe(e)},Tv=function POe(e,t){return Mh(e)?e:function CSe(e,t){if(Mh(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Jb(e))||xSe.test(e)||!_Se.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:COe(MOe(e))},XM=function OOe(e){if("string"==typeof e||Jb(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},pG=function EOe(e,t){for(var n=0,i=(t=Tv(t,e)).length;null!=e&&n<i;)e=e[XM(t[n++])];return n&&n==i?e:void 0},P3=function DOe(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},fG=Hc?Hc.isConcatSpreadable:void 0,TOe=function AOe(e){return Mh(e)||_3(e)||!!(fG&&e&&e[fG])},IOe=function mG(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=TOe),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?mG(a,t-1,n,i,r):P3(r,a):i||(r[r.length]=a)}return r},ROe=function kOe(e){return null!=e&&e.length?IOe(e,1):[]},gG=function NOe(e){return $Pe(function a2e(e,t,n){return t=eG(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=eG(i.length-t,0),s=Array(o);++r<o;)s[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(s),NPe(e,this,a)}}(e,void 0,ROe),e+"")},S3=hG(Object.getPrototypeOf,Object),vG=Function.prototype.toString,UOe=Object.prototype.hasOwnProperty,jOe=vG.call(Object);function Iv(e){var t=this.__data__=new WM(e);this.size=t.size}Iv.prototype.clear=function qOe(){this.__data__=new WM,this.size=0},Iv.prototype.delete=function XOe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Iv.prototype.get=function QOe(e){return this.__data__.get(e)},Iv.prototype.has=function ZOe(e){return this.__data__.has(e)},Iv.prototype.set=function tEe(e,t){var n=this.__data__;if(n instanceof WM){var i=n.__data__;if(!i_||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new YM(i)}return n.set(e,t),this.size=n.size,this};var $M=Iv,yG="object"==typeof exports&&exports&&!exports.nodeType&&exports,bG=yG&&"object"==typeof module&&module&&!module.nodeType&&module,_G=bG&&bG.exports===yG?Id.Buffer:void 0,xG=_G?_G.allocUnsafe:void 0,CG=function uEe(){return[]},fEe=Object.prototype.propertyIsEnumerable,wG=Object.getOwnPropertySymbols,mEe=wG?function(e){return null==e?[]:(e=Object(e),function dEe(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}(wG(e),function(t){return fEe.call(e,t)}))}:CG,O3=mEe,bEe=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)P3(t,O3(e)),e=S3(e);return t}:CG,MG=bEe,PG=function CEe(e,t,n){var i=t(e);return Mh(e)?i:P3(i,n(e))},E3=function wEe(e){return PG(e,w3,O3)},SG=function MEe(e){return PG(e,tg,MG)},D3=eg(Id,"DataView"),A3=eg(Id,"Promise"),T3=eg(Id,"Set"),OG="[object Map]",EG="[object Promise]",DG="[object Set]",AG="[object WeakMap]",TG="[object DataView]",DEe=Jm(D3),AEe=Jm(i_),TEe=Jm(A3),IEe=Jm(T3),kEe=Jm(f3),ng=Zm;(D3&&ng(new D3(new ArrayBuffer(1)))!=TG||i_&&ng(new i_)!=OG||A3&&ng(A3.resolve())!=EG||T3&&ng(new T3)!=DG||f3&&ng(new f3)!=AG)&&(ng=function(e){var t=Zm(e),n="[object Object]"==t?e.constructor:void 0,i=n?Jm(n):"";if(i)switch(i){case DEe:return TG;case AEe:return OG;case TEe:return EG;case IEe:return DG;case kEe:return AG}return t});var r_=ng,NEe=Object.prototype.hasOwnProperty,QM=Id.Uint8Array,I3=function zEe(e){var t=new e.constructor(e.byteLength);return new QM(t).set(new QM(e)),t},VEe=/\w*$/,IG=Hc?Hc.prototype:void 0,kG=IG?IG.valueOf:void 0,mDe=function fDe(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return I3(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function UEe(e,t){var n=t?I3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function YEe(e,t){var n=t?I3(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function HEe(e){var t=new e.constructor(e.source,VEe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function WEe(e){return kG?Object(kG.call(e)):{}}(e)}},RG=Ov&&Ov.isMap,CDe=RG?x3(RG):function bDe(e){return Gu(e)&&"[object Map]"==r_(e)},NG=Ov&&Ov.isSet,ODe=NG?x3(NG):function MDe(e){return Gu(e)&&"[object Set]"==r_(e)},FG="[object Arguments]",LG="[object Function]",BG="[object Object]",Co={};Co[FG]=Co["[object Array]"]=Co["[object ArrayBuffer]"]=Co["[object DataView]"]=Co["[object Boolean]"]=Co["[object Date]"]=Co["[object Float32Array]"]=Co["[object Float64Array]"]=Co["[object Int8Array]"]=Co["[object Int16Array]"]=Co["[object Int32Array]"]=Co["[object Map]"]=Co["[object Number]"]=Co[BG]=Co["[object RegExp]"]=Co["[object Set]"]=Co["[object String]"]=Co["[object Symbol]"]=Co["[object Uint8Array]"]=Co["[object Uint8ClampedArray]"]=Co["[object Uint16Array]"]=Co["[object Uint32Array]"]=!0,Co["[object Error]"]=Co[LG]=Co["[object WeakMap]"]=!1;var zG=function KM(e,t,n,i,r,o){var s,a=1&t,l=2&t,c=4&t;if(n&&(s=r?n(e,i,r,o):n(e)),void 0!==s)return s;if(!kd(e))return e;var d=Mh(e);if(d){if(s=function FEe(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&NEe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function FPe(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e,s)}else{var h=r_(e),p=h==LG||"[object GeneratorFunction]"==h;if(HM(e))return function lEe(e,t){if(t)return e.slice();var n=e.length,i=xG?xG(n):new e.constructor(n);return e.copy(i),i}(e,a);if(h==BG||h==FG||p&&!r){if(s=l||p?{}:function gDe(e){return"function"!=typeof e.constructor||b3(e)?{}:kPe(S3(e))}(e),!a)return l?function _Ee(e,t){return e_(e,MG(e),t)}(e,function oEe(e,t){return e&&e_(t,tg(t),e)}(s,e)):function gEe(e,t){return e_(e,O3(e),t)}(e,function iEe(e,t){return e&&e_(t,w3(t),e)}(s,e))}else{if(!Co[h])return r?e:{};s=mDe(e,h,a)}}o||(o=new $M);var g=o.get(e);if(g)return g;o.set(e,s),ODe(e)?e.forEach(function(b){s.add(KM(b,t,n,b,e,o))}):CDe(e)&&e.forEach(function(b,P){s.set(P,KM(b,t,n,P,e,o))});var y=d?void 0:(c?l?SG:E3:l?tg:w3)(e);return function QPe(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(y||e,function(b,P){y&&(b=e[P=b]),v3(s,P,KM(b,t,n,P,e,o))}),s},ZM=function nAe(e){return zG(e,5)};function JM(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new YM;++t<n;)this.add(e[t])}JM.prototype.add=JM.prototype.push=function rAe(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},JM.prototype.has=function sAe(e){return this.__data__.has(e)};var lAe=JM,dAe=function cAe(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},uAe=function hAe(e,t){return e.has(t)},UG=function mAe(e,t,n,i,r,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var h=-1,p=!0,g=2&n?new lAe:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var v=e[h],y=t[h];if(i)var b=s?i(y,v,h,t,e,o):i(v,y,h,e,t,o);if(void 0!==b){if(b)continue;p=!1;break}if(g){if(!dAe(t,function(P,S){if(!uAe(g,S)&&(v===P||r(v,P,n,i,o)))return g.push(S)})){p=!1;break}}else if(v!==y&&!r(v,y,n,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p},vAe=function gAe(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n},bAe=function yAe(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n},jG=Hc?Hc.prototype:void 0,k3=jG?jG.valueOf:void 0,LAe=Object.prototype.hasOwnProperty,VG="[object Arguments]",HG="[object Array]",eP="[object Object]",GG=Object.prototype.hasOwnProperty,HAe=function VAe(e,t,n,i,r,o){var s=Mh(e),a=Mh(t),l=s?HG:r_(e),c=a?HG:r_(t),d=(l=l==VG?eP:l)==eP,h=(c=c==VG?eP:c)==eP,p=l==c;if(p&&HM(e)){if(!HM(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new $M),s||cG(e)?UG(e,t,n,i,r,o):function kAe(e,t,n,i,r,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new QM(e),new QM(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return g3(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=vAe;case"[object Set]":if(a||(a=bAe),e.size!=t.size&&!(1&i))return!1;var c=s.get(e);if(c)return c==t;i|=2,s.set(e,t);var d=UG(a(e),a(t),i,r,o,s);return s.delete(e),d;case"[object Symbol]":if(k3)return k3.call(e)==k3.call(t)}return!1}(e,t,l,n,i,r,o);if(!(1&n)){var g=d&&GG.call(e,"__wrapped__"),v=h&&GG.call(t,"__wrapped__");if(g||v){var y=g?e.value():e,b=v?t.value():t;return o||(o=new $M),r(y,b,n,i,o)}}return!!p&&(o||(o=new $M),function BAe(e,t,n,i,r,o){var s=1&n,a=E3(e),l=a.length;if(l!=E3(t).length&&!s)return!1;for(var h=l;h--;){var p=a[h];if(!(s?p in t:LAe.call(t,p)))return!1}var g=o.get(e),v=o.get(t);if(g&&v)return g==t&&v==e;var y=!0;o.set(e,t),o.set(t,e);for(var b=s;++h<l;){var P=e[p=a[h]],S=t[p];if(i)var O=s?i(S,P,p,t,e,o):i(P,S,p,e,t,o);if(!(void 0===O?P===S||r(P,S,n,i,o):O)){y=!1;break}b||(b="constructor"==p)}if(y&&!b){var A=e.constructor,H=t.constructor;A!=H&&"constructor"in e&&"constructor"in t&&!("function"==typeof A&&A instanceof A&&"function"==typeof H&&H instanceof H)&&(y=!1)}return o.delete(e),o.delete(t),y}(e,t,n,i,r,o))},GAe=function WG(e,t,n,i,r){return e===t||(null==e||null==t||!Gu(e)&&!Gu(t)?e!=e&&t!=t:HAe(e,t,n,i,WG,r))},qAe=function WAe(e,t){return null!=e&&t in Object(e)},QAe=function $Ae(e,t){return null!=e&&function YAe(e,t,n){for(var i=-1,r=(t=Tv(t,e)).length,o=!1;++i<r;){var s=XM(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&y3(r)&&m3(s,r)&&(Mh(e)||_3(e))}(e,t,qAe)},R3=function(){return Id.Date.now()},JAe=Math.max,eTe=Math.min,o_=function tTe(e,t,n){var i,r,o,s,a,l,c=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(U){var X=i,Y=r;return i=r=void 0,c=U,s=e.apply(Y,X)}function v(U){return c=U,a=setTimeout(P,t),d?g(U):s}function b(U){var X=U-l;return void 0===l||X>=t||X<0||h&&U-c>=o}function P(){var U=R3();if(b(U))return S(U);a=setTimeout(P,function y(U){var Z=t-(U-l);return h?eTe(Z,o-(U-c)):Z}(U))}function S(U){return a=void 0,p&&i?g(U):(i=r=void 0,s)}function H(){var U=R3(),X=b(U);if(i=arguments,r=this,l=U,X){if(void 0===a)return v(l);if(h)return clearTimeout(a),a=setTimeout(P,t),g(l)}return void 0===a&&(a=setTimeout(P,t)),s}return t=XH(t)||0,kd(n)&&(d=!!n.leading,o=(h="maxWait"in n)?JAe(XH(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),H.cancel=function O(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},H.flush=function A(){return void 0===a?s:S(R3())},H},oTe=function rTe(e,t){return e>t},aTe=function sTe(e,t){return t.length<2?e:pG(e,function GOe(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}(t,0,-1))},N3=function lTe(e,t){return GAe(e,t)},uTe=function hTe(e){return e&&e.length?function cTe(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(void 0===a?s==s&&!Jb(s):n(s,a)))var a=s,l=o}return l}(e,$H,oTe):void 0},fTe=function pTe(e,t){return t=Tv(t,e),null==(e=aTe(e,t))||delete e[XM(function nTe(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]},gTe=function mTe(e){return function VOe(e){if(!Gu(e)||"[object Object]"!=Zm(e))return!1;var t=S3(e);if(null===t)return!0;var n=UOe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&vG.call(n)==jOe}(e)?void 0:e},_Te=gG(function(e,t){var n={};if(null==e)return n;var i=!1;t=HH(t,function(o){return o=Tv(o,e),i||(i=o.length>1),o}),e_(e,SG(e),n),i&&(n=zG(n,7,gTe));for(var r=t.length;r--;)fTe(n,t[r]);return n}),F3=_Te,CTe=function xTe(e,t,n,i){if(!kd(e))return e;for(var r=-1,o=(t=Tv(t,e)).length,s=o-1,a=e;null!=a&&++r<o;){var l=XM(t[r]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var d=a[l];void 0===(c=i?i(d,l,a):void 0)&&(c=kd(d)?d:m3(t[r+1])?[]:{})}v3(a,l,c),a=a[l]}return e},STe=function PTe(e,t){return function wTe(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=pG(e,s);n(a,s)&&CTe(o,Tv(s,e),a)}return o}(e,t,function(n,i){return QAe(e,i)})},OTe=gG(function(e,t){return null==e?{}:STe(e,t)}),Ph=OTe;function qG(e){for(let t of Object.keys(e))void 0===e[t]&&delete e[t];return e}function Gc(e,t){return Object.setPrototypeOf(e,t),e}var YG=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/"),tP=(YG&&(()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");e?window.localStorage.setItem("desktop-app-version",e):window.localStorage.getItem("desktop-app-version")})(),!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC")),s_=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||tP&&"ontouchend"in document),zTe=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,fc=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),XG=(()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)})(),UTe=Number((()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]})());function $G(e){return Array.isArray(e)?e:[e]}function QG(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}function nP(e){return tP?e.metaKey:e.ctrlKey}var ci=[],iP={},a_={},rP={};function KG(e){ci.includes(e)||ci.push(e)}function kv(e){delete iP[e.pointerId];for(let t=0;t<ci.length;t++)if(ci[t].pointerId===e.pointerId){ci.splice(t,1);break}}function oP(e){if("touch"!==e.pointerType)return;let t=iP[e.pointerId];void 0===t&&(t={x:0,y:0},iP[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function L3(e){return iP[(e.pointerId===ci[0].pointerId?ci[1]:ci[0]).pointerId]}function ZG(e){a_[e.key]=!0,rP[e.key]=void 0===rP[e.key]?1:rP[e.key]+1}function JG(e){if(tP&&a_.Meta)for(let t in a_)a_[t]=!1;else a_[e.key]=!1;rP={}}var eW,sP,WTe=new Promise(e=>{eW=e});function qTe(){if(sP)return sP;function t(){return(t=(0,Qn.Z)(function*(){let i=m.e(642).then(m.bind(m,9642)),[r,o]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/navmesh-wasm@1.9.35/build/navmesh.wasm").then(l=>l.arrayBuffer())]),s=r.default,a=yield s({wasmBinary:o});eW(a)})).apply(this,arguments)}return sP=function e(){return t.apply(this,arguments)}(),sP}var tW,aP,YTe=new Promise(e=>{tW=e});function XTe(){if(aP)return aP;function t(){return(t=(0,Qn.Z)(function*(){let n=yield m.e(615).then(m.bind(m,8615));yield n.init(),tW(n)})).apply(this,arguments)}return aP=function e(){return t.apply(this,arguments)}(),aP}var ii=class{modifyById(e,t){let n=this;if(void 0===n[e])throw new Error("not expected");{let i={...n,[e]:t};return Object.setPrototypeOf(i,ii.prototype),i}}add(e,t){return this.runOp({type:1,id:e,data:t})?.data??this}runOp(e){let t=this;if(1===e.type){let i,n=t[e.id];i=void 0===n?{type:2,id:e.id}:{type:1,id:e.id,data:n};let{id:r,data:o}=e,s={...t,[r]:o};return Object.setPrototypeOf(s,ii.prototype),{data:s,actual:e,reverse:i}}if(2===e.type){let{id:n}=e,i=t[n];if(void 0===i)return null;{let r={...t};return Object.setPrototypeOf(r,ii.prototype),delete r[n],{data:r,actual:e,reverse:{type:1,id:n,data:i}}}}return null}};function B3(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let n of t){let i=e[n];i&&"object"==typeof i&&B3(i)}return Object.freeze(e)}var nW=class extends Error{};function z3(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function cf(e,t,n){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let o=e;e=t,t=o}let i=[],r=1/(n+1);for(let o=0;o<n;o++){let s=e+(t-e)*(o+.75+.5*Math.random())*r;i.push(s)}return i}function U3(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function iW(e,t){for(let n of e)!0!==t(n.id,n.data)&&iW(n.children,t)}function rW(e,t){if(!0!==t(e.id,e.data))for(let n of e.children)rW(n,t)}var lP,Ma=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ma.prototype)}deepFreeze(){let e=0;for(;e<this.length;)B3(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let n of e.children)this.fillCaches0(n,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(!t)return e;e=t}return e}isDescendantOf(e,t){for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}data(e){return this.get(e)?.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){return null===e?this:this.get(e)?.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let n=this.get(e);n&&rW(n,t)}}traverse(e){iW(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this.parent(e),i=this.childrenArray(n),r=i.findIndex(s=>s.id===e);if(r<0)throw new Error("not expected");let o=i[r];return i=[...i],i[r]={...o,data:t},this.modifyArrayBy(n,i)}}modifyArrayBy(e,t){let n=e,i=t;for(;null!==n;){let o=i,s=n;if(n=this.parent(n),void 0===n)throw new Error;i=this.childrenArray(n);let a=i.findIndex(l=>l.id===s);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:o}}Object.setPrototypeOf(i,Ma.prototype);let r=i;return r.fillCaches(),r}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(void 0!==this.get(e))return!0;for(let n of t)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(e){let{parent:t,fi:n,id:i,data:r,children:o}=e;if(null!==t&&void 0===this.get(t)||this.checkDuplicatedIdRec(e))return null;{let s=t,a=this.childrenArray(s),l={fi:n,id:i,data:r,children:o};return a=[...a,l],a.sort((c,d)=>c.fi-d.fi),e.localIndex=a.indexOf(l),{data:this.modifyArrayBy(s,a),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let n=this.parent(t);if(void 0===n)return null;let i=this.childrenArray(n),r=i.findIndex(s=>s.id===t);e.localIndex=r,i=[...i];let o=i.splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:e,reverse:{type:7,...o,parent:n}}}}moveOp(e){let{parent:t,fi:n,id:i}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:i});if(null!==t){let h=t;for(;null!==h;){if(void 0===h)throw new Error;if(h===i)throw new nW("cyclic tree");h=this.parent(h)}}let r=this.parent(i);if(void 0===r)return null;let o=r,s=this.childrenArray(r),a=s.findIndex(h=>h.id===i);s=[...s];let l=s.splice(a,1)[0],c=this.modifyArrayBy(r,s);r=t,s=c.childrenArray(r);let d=l.fi;return l={...l,fi:n},s=[...s,l],s.sort((h,p)=>h.fi-p.fi),e.localIndex=s.indexOf(l),c=c.modifyArrayBy(r,s),{data:c,actual:e,reverse:{type:9,parent:o,fi:d,id:i}}}previous(e,t){if(null===t){let i=this.childrenArray(e);return 0===i.length?null:i[i.length-1].id}let n=null;for(let i of this.childrenArray(e)){if(i.id===t)return n;n=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),i=n.findIndex(r=>r.id===e)+1;if(i<n.length)return n[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),i=n.findIndex(r=>r.id===e)-1;return i>=0?this.traverseSortPrevious(n[i].id):t}}getAllSorted(e){let t=[];for(let n of e){let i=this.getWithSortKey(n.id);void 0!==i&&t.push({...n,...i})}t.sort((n,i)=>function $Te(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(n.sortKey,i.sortKey));for(let n of t)delete n.sortKey;return t}getWithSortKey(e){var t=e;let n=[],i=this.get(t),r=i;if(void 0!==i){for(;t;)n.splice(0,0,i.fi),null!==(t=this.parent(t))&&(i=this.get(t));return{...r,sortKey:n}}}insertBeforeHelper(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}insertAfterHelper(e,t,n){let i=this.childrenArray(e);if(null===t){if(0===i.length)return cf(0,n,n);{let r=i[0].fi;return cf(r-n,r,n)}}{let r=this.get(t);if(void 0===r||this.parent(t)!==e)throw new Error("illegal args");let o=i.find(s=>s.fi>r.fi);if(void 0===o){let s=i[i.length-1].fi;return cf(s,s+n,n)}return cf(r.fi,o.fi,n)}}};(e=>{e.runOp=function t(n,i){if(0!==i.type)return null;if(Array.isArray(n)){let r=i.props,o={},s=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");o[l]=s[c],s[c]=r[l],a=!0}return a?{data:s,actual:i,reverse:{type:0,props:o}}:null}{let r=i.props,o={},s={...n},a=!1;if(r)for(let l of Object.keys(r)){o[l]=s[l];let c=r[l];void 0===c?delete s[l]:s[l]=c,a=!0}return a?{data:s,actual:i,reverse:{type:0,props:o}}:null}}})(lP||(lP={}));var Gn=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Gn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)B3(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){return this.get(e)?.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this,i=n.findIndex(o=>o.id===e);if(i<0)throw new Error("not expected");let r=n[i];return n=[...n],n[i]={...r,data:t},this.modifyArrayBy(n)}}modifyArrayBy(e){Object.setPrototypeOf(e,Gn.prototype);let t=e;return function QTe(){return typeof process<"u"}()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:n,data:i}=e,r=this,o={fi:t,id:n,data:i};return r=[...r,o],r.sort((s,a)=>s.fi-a.fi),e.localIndex=r.indexOf(o),{data:this.modifyArrayBy(r),actual:e,reverse:{type:5,id:n}}}deleteOp(e){let{id:t}=e,n=this,i=n.findIndex(o=>o.id===t);if(-1===i)return null;e.localIndex=i,n=[...n];let r=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:e,reverse:{type:4,...r}}}moveOp(e){let{fi:t,id:n}=e,i=this;i=[...i];let r=i.findIndex(a=>a.id===n);if(-1===r)return null;let o=i[r].fi,s={...i[r],fi:t};return i[r]=s,i.sort((a,l)=>a.fi-l.fi),e.localIndex=i.indexOf(s),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:o,id:n}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let n of this){if(n.id===e)return t;t=n.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let n=this;if(null===e){if(0===n.length)return cf(0,t,t);{let i=n[0].fi;return cf(i-t,i,t)}}{let i=this.get(e);if(void 0===i)throw new Error("illegal args");let r=n.find(o=>o.fi>i.fi);if(void 0===r){let o=n[n.length-1].fi;return cf(o,o+t,t)}return cf(i.fi,r.fi,t)}}};function Rv(e){return e&&"object"==typeof e&&e instanceof Ss}var df,hP,sa,H3,Ss=class{unusedFunOverridesTable(e){}runOp(e){let t=[],n=this,i=0,r={};for(;i<e.path.length;){if(t.push(n),n=void 0===n?void 0:n[e.path[i]],void 0!==n&&!Rv(n))return null;i+=1}n=n?z3(n):new Ss;for(let[a,l]of Object.entries(e.props))r[a]=n[a],void 0===l?delete n[a]:n[a]=l;for(;i>0;){if(0===Object.keys(n).length){let a=t[i-1];a&&(n=z3(a),delete n[e.path[i-1]])}else{let a=t[i-1];if(a){let l=z3(a);l[e.path[i-1]]=n,n=l}else{let l=new Ss;l[e.path[i-1]]=n,n=l}}i-=1}return{data:Object.setPrototypeOf(n,Ss.prototype),actual:e,reverse:{...e,props:r}}}};function j3(e,t){if(void 0===t)return;let n=!1,i=e.map(r=>{let o=r.id,s=l_(r.data,t[o]);if(n=n||void 0!==s,void 0===s&&(s=r.data),r.children){let a=j3(r.children,t);return void 0!==a?n=!0:a=r.children,{...r,id:o,data:s,children:a}}return{...r,id:o,data:s}});return n?i:void 0}function l_(e,t){if(!Rv(t))return t;if(e instanceof Ma){let n=j3(e,t);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof Gn)return function KTe(e,t){if(void 0===t)return;let n=!1,i=e.map(r=>{let o=r.id,s=l_(r.data,t[o]);return n=n||void 0!==s,void 0===s&&(s=r.data),{...r,id:o,data:s}});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}(e,t);if(Array.isArray(e)){let n=!1,i=e.map((r,o)=>{let s=l_(r,t[o]);return n=n||void 0!==s,void 0===s&&(s=r),s});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if(e instanceof Ss)return V3(e,t);if(e&&"object"==typeof e){let n={},i=!1;for(let[r,o]of Object.entries(e)){let s=l_(o,t[r]);i=i||void 0!==s,void 0===s&&(s=o),n[r]=s}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}}function V3(e,t){if(void 0===e)return t;if(void 0===t)return e;if(!Rv(t))return t;if(!Rv(e))return df.apply(e,t);let n=new Set;for(let r of Object.keys(e))n.add(r);for(let r of Object.keys(t))n.add(r);let i=new Ss;for(let r of n){let o=V3(void 0===e?void 0:e[r],void 0===t?void 0:t[r]);i[r]=o}return i}function ZTe(e,t){let n={cur:[],result:[],len:0};return[e=c_(e,t,n)??e,n.result]}function cP(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function dP(e){e&&(e.len-=1)}function oW(e,t,n){let i=!1,r=e.map(o=>{let s=o.id,a=t[s];if(void 0!==a&&"string"==typeof a&&(i=!0,s=a,null!==n))throw new Error("not supported");let l=c_(o.data,t,cP(n,s));dP(n),i=i||void 0!==l,void 0===l&&(l=o.data);let c=oW(o.children,t,n);return void 0!==c?i=!0:c=o.children,{...o,id:s,data:l,children:c}});if(i)return r}function c_(e,t,n){if(e instanceof Ma){let i=oW(e,t,n);return void 0!==i&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}if(e instanceof Gn)return function e3e(e,t,n){let i=!1,r=e.map(o=>{let s=o.id,a=t[s];if(void 0!==a&&"string"==typeof a&&(i=!0,s=a,null!==n))throw new Error("not supported");let l=c_(o.data,t,cP(n,s));return dP(n),i=i||void 0!==l,void 0===l&&(l=o.data),{...o,id:s,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}(e,t,n);if(Array.isArray(e)){let i=!1,r=e.map((o,s)=>{let a=c_(o,t,cP(n,s));return dP(n),i=i||void 0!==a,void 0===a&&(a=o),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e&&"object"==typeof e&&!U3(e)){let i={},r=!1;for(let[o,s]of Object.entries(e))if("name"!==o&&"variableId"!==o){let a=t[o];if("string"==typeof a){if(null!==n)throw new Error("not supported");r=!0,o=a}let l=c_(s,t,cP(n,o));dP(n),r=r||void 0!==l,void 0===l&&(l=s),i[o]=l}else i[o]=s;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if("string"==typeof e){let i=t[e];return void 0!==i&&function JTe(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(n),i}}(e=>{e.apply=function t(r,o){return l_(r,o)??r},e.merge=function n(r,o){return V3(r,o)},e.filterOp=function i(r,o){let s=0,a=o.path,l=r;for(;s<a.length&&void 0!==l;){if(l=Gs.zoomOnce(l,a[s]),void 0===l)return o;if(!Rv(l))return;s+=1}if(void 0===l)return o;if(Rv(l)){if(0===o.type){let c={...o.props};for(let d of Object.keys(l))delete c[d];return{...o,props:c}}if(1===o.type||4===o.type||7===o.type){let c=j3([o],l);return c?(console.log(c),c):o}return o}}})(df||(df={})),(e=>{e.replaceProps=function t(n,i){let r=Gs.zoom(i,n.path);if("object"==typeof r){let o={};for(let s of Object.keys(n.props))o[s]=r[s];return{...n,props:o}}return{...n,props:{}}}})(hP||(hP={})),(e=>{function i(l,c){let d=c.path;for(var h=[];;){let p;if(l instanceof Ss&&0===c.type&&(p=l.runOp({...c,path:d.slice(h.length)}),null===p&&(p=void 0)),void 0===p&&h.length===d.length&&(p=l instanceof Ma||l instanceof Gn||l instanceof ii?l.runOp(c):lP.runOp(l,c)),void 0!==p){if(null!==p){let y=p.data;for(let b=h.length-1;b>=0;b--){let P=d[b],S=h[b];if(S instanceof Ma){if("number"==typeof P)throw new Error("illegal arg");y=S.modifyById(P,y)}else if(S instanceof Gn){if("number"==typeof P)throw new Error("illegal arg");y=S.modifyById(P,y)}else if(S instanceof ii){if("number"==typeof P)throw new Error("illegal arg");y=S.modifyById(P,y)}else if(S instanceof Ss){let O={...S,[P]:y};y=Object.setPrototypeOf(O,Ss.prototype)}else{if("object"!=typeof S)return null;if(Array.isArray(S)){if("string"==typeof P&&(P=parseInt(P),isNaN(P)))throw new Error("Invalid path");let O=y;y=[...S],y[P]=O}else y={...S,[P]:y}}}return{data:y,actual:{...p.actual,path:d},reverse:{...p.reverse,path:d}}}return null}let v,g=d[h.length];if(l instanceof Ma){if("number"==typeof g)throw new Error("");v=l.get(g)?.data}else if(l instanceof Gn){if("number"==typeof g)throw new Error("");v=l.get(g)?.data}else null!==l&&(v=l[g]);if(void 0===v)return null;h.push(l),l=v}}function r(l,c){for(let d=0;d<l.length&&d<c.length;d++)if(l[d]!==c[d])return!0;return!1}function o(l,c){if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++)if(l[d]!==c[d])return!1;return!0}e.drop=function t(l,c){return{...l,path:l.path.slice(c)}},e.applySimple=function n(l,c){return i(l,c)?.data??l},e.apply=i,e.pathDisjoint=r,e.pathEq=o,e.commutative=function s(l,c){return r(l.path,c.path)},e.subsumed=function a(l,c){return!(0!==l.type||0!==c.type||!o(l.path,c.path))&&Object.keys(l.props).every(d=>void 0!==c.props[d])}})(sa||(sa={})),(e=>{function l(c,d){var h=c;let p=[],g=[];for(let v of d)try{if(3===v.type||5===v.type&&"variables"===v.path[v.path.length-1]){let y,b,P;if(3===v.type?(y=Gs.zoom(h,[...v.path,v.id]),P=sa.apply(h,{...v,type:2})):(y=Gs.zoom(h,[...v.path,v.id,"value"]),P=sa.apply(h,v)),null!==P){h=P.data;let[S,O]=ZTe(h,{[v.id]:y});h=S;for(let A=0;A<O.length;A++){let H=O[A],U=H.pop();if("number"==typeof U){let X=[U];for(let Z=A+1;Z<O.length;Z++){let ee=O[Z],oe=ee[ee.length-1];if("number"!=typeof oe||!Gs.equal(H,ee.slice(0,ee.length-1)))break;X.push(oe),O.splice(Z,1)}let Y=Gs.zoom(h,H);b=Y.map((Z,ee)=>X.includes(ee)?v.id:Z),y=Y,U=H.pop()}else{if("alphaOverride"===U||"alpha"===U){y/=100;let X=y,Y=Gs.zoom(h,H.slice(0,H.length-2)),Z=Y.layers.map(ee=>ee.id===H[H.length-1]?{...ee,data:{...ee.data,[U]:X}}:ee);Object.setPrototypeOf(Z,Object.getPrototypeOf(Y.layers)),Y.layers=Z}b=v.id}p.push({type:0,path:H,props:{[U]:y}}),g.push({type:0,path:H,props:{[U]:b}})}g.push(P.reverse),p.push(P.actual)}}else{let y=sa.apply(h,v);null!==y&&(p.push(y.actual),h=y.data,g.push(y.reverse))}}catch(y){if(y instanceof nW)return null;throw y}return{data:h,actual:p,reverse:g.reverse()}}e.empty=function t(){return[]},e.removePrefix=function n(c,d){let h=[];for(let p of c){let[g,...v]=p.path;g===d&&h.push({...p,path:v})}return h},e.addPrefix=function i(c,d){return c.map(h=>({...h,path:[d,...h.path]}))},e.concat=function r(c,d){return[...c,...d]},e.compress=function o(c,d){return[...c.filter(h=>!d.some(p=>sa.subsumed(h,p))),...d]},e.commutative=function s(c,d){return c.every(h=>d.every(p=>sa.commutative(h,p)))},e.applyAll=function a(c,d){for(let h of d){let p=l(c,h);null!==p&&(c=p.data)}return c},e.apply=l})(H3||(H3={}));var sW=Symbol(),t3e=Symbol(),uP=Symbol(),d_=class{reportOp(e,t,n=[]){let i=this;if(null===t)return;i._current=t.data;let r=n;for(;!(i instanceof lW);){let o=i._path,s=i._current;if(""!==o&&r.splice(0,0,o),i=i._parent,null===i)return;i.update(o,s)}i.push(r,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let n=t[uP];n&&n(),delete this._children[e]}}}},n3e=class extends d_{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,lP.runOp(this._current,e),e.path)}},i3e=class extends d_{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,ii.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},aW={get(e,t){if(t===uP)return()=>{e._parent=null};if(t===sW)return e._current;if(t===t3e)return e;let{_current:n,_children:i}=e;if("push"===t&&Array.isArray(n))throw new Error("not supported to expand array");let r=void 0===i?void 0:i[t];if(void 0!==r)return r;let o=n[t],s=pP(e,t,o);return s!==o?(void 0===i&&(i={},e._children=i),i[t]=s,s):o},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let n=e._current,i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[t]}}},r3e={...aW,set(e,t,n){let i={type:0,props:{[t]:ds(n)??n}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let n={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(n),!0}},o3e={...aW,set(e,t,n){return void 0===n?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:n})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)},G3=class extends d_{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[uP]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,n)=>{e(t,this.data(t))})}data(e){let{_current:t,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let r=t.get(e)?.data,o=pP(this,e,r);return o!==r?(void 0===n&&(n={},this._children=n),n[e]=o,o):r}add(e,t,n,i,r){this.runOp({type:7,parent:e,fi:t,id:n,data:i,children:r})}move(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}insertAfter(e,t,n){let i=this._current.insertAfterHelper(e,t,n.length);for(let r=0;r<n.length;r++){let o=n[r];this.add(e,i[r],o.id,o.data,o.children)}}insertBefore(e,t,n){let i=this._current.insertBeforeHelper(e,t,n.length);for(let r=0;r<n.length;r++){let o=n[r];this.add(e,i[r],o.id,o.data,o.children)}}moveAfter(e,t,n){let i=this._current.insertAfterHelper(e,t,n.length);for(let r=0;r<n.length;r++)this.move(e,i[r],n[r])}moveBefore(e,t,n){let i=this._current.insertBeforeHelper(e,t,n.length);for(let r=0;r<n.length;r++)this.move(e,i[r],n[r])}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},W3=class extends d_{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[uP]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let n=0;n<t;n++){let i=this._current[n].id,r=this._current[n].fi;e(this.data(this._current[n].id),i,r)}}find(e){let t=this.length;for(let n=0;n<t;n++){let i=this._current[n].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){let{_current:t,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let r=t.get(e)?.data,o=pP(this,e,r);return o!==r?(void 0===n&&(n={},this._children=n),n[e]=o,o):r}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let r=t[i];this.add(n[i],r.id,r.data)}}insertBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let r=t[i];this.add(n[i],r.id,r.data)}}moveAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++)this.move(n[i],t[i])}moveBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++)this.move(n[i],t[i])}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function q3(e,t,n){if(e.length>0){let i=e[e.length-1];if(0===i.type&&0===t.type&&Gs.equal(i.path,n))return void Object.assign(i.props,t.props)}e.push({...t,path:n})}var Gs,lW=class extends d_{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,n,i){q3(this.ts,t,e),q3(this.actual,n,e),q3(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function pP(e,t,n){return n instanceof Ma?new G3(e,t,n):n instanceof Gn?new W3(e,t,n):n instanceof ii?new Proxy(new i3e(e,t,n),o3e):null!==n&&"object"==typeof n?U3(n)?n:new Proxy(new n3e(e,t,n),r3e):n}function cW(e){let t=new lW(e);return[pP(t,"",e),t]}function h_(e,t){let[n,i]=cW(e);return t(n),i.result()}function ds(e){return e instanceof G3||e instanceof W3?e._current:null!==e&&"object"==typeof e?e[sW]:e}function ro(e,t){let n=[];if(!(t.length<=e.length))return null;for(var i=0;i<t.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}(e=>{function i(o,s){return(o instanceof Ma||o instanceof G3)&&"string"==typeof s||(o instanceof Gn||o instanceof W3)&&"string"==typeof s?o.data(s):"number"==typeof s&&Array.isArray(o)||"string"==typeof s&&"object"==typeof o&&null!==o?o[s]:void 0}function r(o,s,a=0){for(;a<s.length&&void 0!==o;)o=i(o,s[a]),a+=1;return o}e.equal=function t(o,s){if(s.length!==o.length)return!1;for(var a=0;a<o.length;){if(o[a]!==s[a])return!1;a+=1}return!0},e.removeOverridden=function n(o,s,a){let l=r(a,o);if(void 0!==l&&"object"==typeof l&&null!==l){let c={...s};return Object.keys(l).forEach(d=>{delete c[d]}),c}return s},e.zoomOnce=i,e.zoom=r})(Gs||(Gs={}));var Y3,dW=class{},hW=class extends dW{constructor(e){super(),this.id=e}},uW=class extends dW{constructor(e){super(),this.data=e}};try{Y3=new TextDecoder}catch{}var Nn,hf,Er,uf,mc,Wu,Lr,lt=0,pW=[],X3=pW,$3=0,Bl={},Wc=0,Sh=0,gl=[],fW={useRecords:!1,mapsAsObjects:!0},mW=class{},gW=new mW;gW.name="MessagePack 0xC1";var Nv=!1,fP=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Nn)return EW(()=>(eI(),this?this.unpack(e,t):fP.prototype.unpack.call(fW,e,t)));hf=t>-1?t:e.length,lt=0,$3=0,Sh=0,uf=null,X3=pW,mc=null,Nn=e;try{Lr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw Nn=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof fP){if(Bl=this,this.structures)return Er=this.structures,mP();(!Er||Er.length>0)&&(Er=[])}else Bl=fW,(!Er||Er.length>0)&&(Er=[]);return mP()}unpackMultiple(e,t){let n,i=0;try{Nv=!0;let r=e.length,o=this?this.unpack(e,r):vP.unpack(e,r);if(!t){for(n=[o];lt<r;)i=lt,n.push(mP());return n}for(t(o);lt<r;)if(i=lt,!1===t(mP()))return}catch(r){throw r.lastPosition=i,r.values=n,r}finally{Nv=!1,eI()}}_mergeStructures(e,t){for(let n=0,i=(e=e||[]).length;n<i;n++){let r=e[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let i=e[n],r=t[n];r&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=r)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function mP(){try{if(!Bl.trusted&&!Nv){let t=Er.sharedLength||0;t<Er.length&&(Er.length=t)}let e=Zo();if(lt==hf)Er.restoreStructures&&vW(),Er=null,Nn=null,Wu&&(Wu=null);else{if(lt>hf){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}if(!Nv)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw Er.restoreStructures&&vW(),eI(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function vW(){for(let e in Er.restoreStructures)Er[e]=Er.restoreStructures[e];Er.restoreStructures=null}function Zo(){let e=Nn[lt++];if(e<160){if(e<128){if(e<64)return e;{let t=Er[63&e]||Bl.getStructures&&bW()[63&e];return t?(t.read||(t.read=Q3(t,63&e)),t.read()):e}}if(e<144){if(e-=128,Bl.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[MW()]=Zo();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(Zo(),Zo());return t}}{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=Zo();return t}}if(e<192){let t=e-160;if(Sh>=lt)return uf.slice(lt-Wc,(lt+=t)-Wc);if(0==Sh&&hf<140){let n=t<16?Z3(t):CW(t);if(null!=n)return n}return K3(t)}{let t;switch(e){case 192:return null;case 193:return mc?(t=Zo(),t>0?mc[1].slice(mc.position1,mc.position1+=t):mc[0].slice(mc.position0,mc.position0-=t)):gW;case 194:return!1;case 195:return!0;case 196:return J3(Nn[lt++]);case 197:return t=Lr.getUint16(lt),lt+=2,J3(t);case 198:return t=Lr.getUint32(lt),lt+=4,J3(t);case 199:return ig(Nn[lt++]);case 200:return t=Lr.getUint16(lt),lt+=2,ig(t);case 201:return t=Lr.getUint32(lt),lt+=4,ig(t);case 202:if(t=Lr.getFloat32(lt),Bl.useFloat32>2){let n=tI[(127&Nn[lt])<<1|Nn[lt+1]>>7];return lt+=4,(n*t+(t>0?.5:-.5)>>0)/n}return lt+=4,t;case 203:return t=Lr.getFloat64(lt),lt+=8,t;case 204:return Nn[lt++];case 205:return t=Lr.getUint16(lt),lt+=2,t;case 206:return t=Lr.getUint32(lt),lt+=4,t;case 207:return Bl.int64AsNumber?(t=4294967296*Lr.getUint32(lt),t+=Lr.getUint32(lt+4)):t=Lr.getBigUint64(lt),lt+=8,t;case 208:return Lr.getInt8(lt++);case 209:return t=Lr.getInt16(lt),lt+=2,t;case 210:return t=Lr.getInt32(lt),lt+=4,t;case 211:return Bl.int64AsNumber?(t=4294967296*Lr.getInt32(lt),t+=Lr.getUint32(lt+4)):t=Lr.getBigInt64(lt),lt+=8,t;case 212:if(t=Nn[lt++],114==t)return PW(63&Nn[lt++]);{let n=gl[t];if(n)return n.read?(lt++,n.read(Zo())):n.noBuffer?(lt++,n()):n(Nn.subarray(lt,++lt));throw new Error("Unknown extension "+t)}case 213:return t=Nn[lt],114==t?(lt++,PW(63&Nn[lt++],Nn[lt++])):ig(2);case 214:return ig(4);case 215:return ig(8);case 216:return ig(16);case 217:return t=Nn[lt++],Sh>=lt?uf.slice(lt-Wc,(lt+=t)-Wc):l3e(t);case 218:return t=Lr.getUint16(lt),Sh>=(lt+=2)?uf.slice(lt-Wc,(lt+=t)-Wc):c3e(t);case 219:return t=Lr.getUint32(lt),Sh>=(lt+=4)?uf.slice(lt-Wc,(lt+=t)-Wc):d3e(t);case 220:return t=Lr.getUint16(lt),lt+=2,_W(t);case 221:return t=Lr.getUint32(lt),lt+=4,_W(t);case 222:return t=Lr.getUint16(lt),lt+=2,xW(t);case 223:return t=Lr.getUint32(lt),lt+=4,xW(t);default:if(e>=224)return e-256;if(void 0===e){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+e)}}}var a3e=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Q3(e,t){function n(){if(n.count++>2){let r=e.read=new Function("r","return function(){return {"+e.map(o=>a3e.test(o)?o+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}}")(Zo);return 0===e.highByte&&(e.read=yW(t,e.read)),r()}let i={};for(let r=0,o=e.length;r<o;r++)i[e[r]]=Zo();return i}return n.count=0,0===e.highByte?yW(t,n):n}var yW=(e,t)=>function(){let n=Nn[lt++];if(0===n)return t();let i=e<32?-(e+(n<<5)):e+(n<<5),r=Er[i]||bW()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=Q3(r,e)),r.read()};function bW(){let e=EW(()=>(Nn=null,Bl.getStructures()));return Er=Bl._mergeStructures(e,Er)}var K3=gP,l3e=gP,c3e=gP,d3e=gP;function gP(e){let t;if(e<16&&(t=Z3(e)))return t;if(e>64&&Y3)return Y3.decode(Nn.subarray(lt,lt+=e));let n=lt+e,i=[];for(t="";lt<n;){let r=Nn[lt++];if(0==(128&r))i.push(r);else if(192==(224&r)){let o=63&Nn[lt++];i.push((31&r)<<6|o)}else if(224==(240&r)){let o=63&Nn[lt++],s=63&Nn[lt++];i.push((31&r)<<12|o<<6|s)}else if(240==(248&r)){let l=(7&r)<<18|(63&Nn[lt++])<<12|(63&Nn[lt++])<<6|63&Nn[lt++];l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l)}else i.push(r);i.length>=4096&&(t+=aa.apply(String,i),i.length=0)}return i.length>0&&(t+=aa.apply(String,i)),t}function _W(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=Zo();return t}function xW(e){if(Bl.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[MW()]=Zo();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(Zo(),Zo());return t}}var aa=String.fromCharCode;function CW(e){let t=lt,n=new Array(e);for(let i=0;i<e;i++){let r=Nn[lt++];if((128&r)>0)return void(lt=t);n[i]=r}return aa.apply(String,n)}function Z3(e){if(e<4){if(e<2){if(0===e)return"";{let t=Nn[lt++];return(128&t)>1?void(lt-=1):aa(t)}}{let t=Nn[lt++],n=Nn[lt++];if((128&t)>0||(128&n)>0)return void(lt-=2);if(e<3)return aa(t,n);let i=Nn[lt++];return(128&i)>0?void(lt-=3):aa(t,n,i)}}{let t=Nn[lt++],n=Nn[lt++],i=Nn[lt++],r=Nn[lt++];if((128&t)>0||(128&n)>0||(128&i)>0||(128&r)>0)return void(lt-=4);if(e<6){if(4===e)return aa(t,n,i,r);{let o=Nn[lt++];return(128&o)>0?void(lt-=5):aa(t,n,i,r,o)}}if(e<8){let o=Nn[lt++],s=Nn[lt++];if((128&o)>0||(128&s)>0)return void(lt-=6);if(e<7)return aa(t,n,i,r,o,s);let a=Nn[lt++];return(128&a)>0?void(lt-=7):aa(t,n,i,r,o,s,a)}{let o=Nn[lt++],s=Nn[lt++],a=Nn[lt++],l=Nn[lt++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&l)>0)return void(lt-=8);if(e<10){if(8===e)return aa(t,n,i,r,o,s,a,l);{let c=Nn[lt++];return(128&c)>0?void(lt-=9):aa(t,n,i,r,o,s,a,l,c)}}if(e<12){let c=Nn[lt++],d=Nn[lt++];if((128&c)>0||(128&d)>0)return void(lt-=10);if(e<11)return aa(t,n,i,r,o,s,a,l,c,d);let h=Nn[lt++];return(128&h)>0?void(lt-=11):aa(t,n,i,r,o,s,a,l,c,d,h)}{let c=Nn[lt++],d=Nn[lt++],h=Nn[lt++],p=Nn[lt++];if((128&c)>0||(128&d)>0||(128&h)>0||(128&p)>0)return void(lt-=12);if(e<14){if(12===e)return aa(t,n,i,r,o,s,a,l,c,d,h,p);{let g=Nn[lt++];return(128&g)>0?void(lt-=13):aa(t,n,i,r,o,s,a,l,c,d,h,p,g)}}{let g=Nn[lt++],v=Nn[lt++];if((128&g)>0||(128&v)>0)return void(lt-=14);if(e<15)return aa(t,n,i,r,o,s,a,l,c,d,h,p,g,v);let y=Nn[lt++];return(128&y)>0?void(lt-=15):aa(t,n,i,r,o,s,a,l,c,d,h,p,g,v,y)}}}}}function J3(e){return Bl.copyBuffers?Uint8Array.prototype.slice.call(Nn,lt,lt+=e):Nn.subarray(lt,lt+=e)}function ig(e){let t=Nn[lt++];if(gl[t])return gl[t](Nn.subarray(lt,lt+=e));throw new Error("Unknown extension type "+t)}var wW=new Array(4096);function MW(){let e=Nn[lt++];if(!(e>=160&&e<192))return lt--,Zo();if(e-=160,Sh>=lt)return uf.slice(lt-Wc,(lt+=e)-Wc);if(!(0==Sh&&hf<180))return K3(e);let o,t=4095&(e<<5^(e>1?Lr.getUint16(lt):e>0?Nn[lt]:0)),n=wW[t],i=lt,r=lt+e-3,s=0;if(n&&n.bytes==e){for(;i<r;){if(o=Lr.getUint32(i),o!=n[s++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(o=Nn[i++],o!=n[s++]){i=1879048192;break}if(i===r)return lt=i,n.string;r-=3,i=lt}for(n=[],wW[t]=n,n.bytes=e;i<r;)o=Lr.getUint32(i),n.push(o),i+=4;for(r+=3;i<r;)o=Nn[i++],n.push(o);let a=e<16?Z3(e):CW(e);return n.string=null!=a?a:K3(e)}var PW=(e,t)=>{var n=Zo();let i=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let r=Er[e];return r&&r.isShared&&((Er.restoreStructures||(Er.restoreStructures=[]))[e]=r),Er[e]=n,n.read=Q3(n,i),n.read()},SW="object"==typeof self?self:global;gl[0]=()=>{},gl[0].noBuffer=!0,gl[101]=()=>{let e=Zo();return(SW[e[0]]||Error)(e[1])},gl[105]=e=>{let t=Lr.getUint32(lt-4);Wu||(Wu=new Map);let i,n=Nn[lt];i=n>=144&&n<160||220==n||221==n?[]:{};let r={target:i};Wu.set(t,r);let o=Zo();return r.used?Object.assign(i,o):(r.target=o,o)},gl[112]=e=>{let t=Lr.getUint32(lt-4),n=Wu.get(t);return n.used=!0,n.target},gl[115]=()=>new Set(Zo());var OW=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");function EW(e){let t=hf,n=lt,i=$3,r=Wc,o=Sh,s=uf,a=X3,l=Wu,c=mc,d=new Uint8Array(Nn.slice(0,hf)),h=Er,p=Er.slice(0,Er.length),g=Bl,v=Nv,y=e();return hf=t,lt=n,$3=i,Wc=r,Sh=o,uf=s,X3=a,Wu=l,mc=c,Nn=d,Nv=v,(Er=h).splice(0,Er.length,...p),Bl=g,Lr=new DataView(Nn.buffer,Nn.byteOffset,Nn.byteLength),y}function eI(){Nn=null,Wu=null,Er=null}gl[116]=e=>{let t=e[0],n=OW[t];if(!n)throw new Error("Could not find typed array for code "+t);return new SW[n](Uint8Array.prototype.slice.call(e,1).buffer)},gl[120]=()=>{let e=Zo();return new RegExp(e[0],e[1])},gl[98]=e=>{let n=lt;lt+=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3]-4,(mc=[Zo(),Zo()]).position0=0,mc.position1=0;let i=lt;lt=n;try{return Zo()}finally{lt=i}},gl[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var tI=new Array(147);for(let e=0;e<256;e++)tI[e]=+("1e"+Math.floor(45.15-.30103*e));var yP,vP=new fP({useRecords:!1}),p3e=new Float32Array(1);new Uint8Array(p3e.buffer,0,4);try{yP=new TextEncoder}catch{}var bP,nI,Vt,hs,Oh,_P=typeof Buffer<"u",iI=_P?Buffer.allocUnsafeSlow:Uint8Array,DW=_P?Buffer:Uint8Array,AW=_P?4294967296:2144337920,wt=0,Eh=null,f3e=/[\u0080-\uFFFF]/,u_=Symbol("record-id"),TW=class extends fP{constructor(e){super(e),this.offset=0;let n,i,r,o,s,a=0,l=DW.prototype.utf8Write?function(X,Y,Z){return Vt.utf8Write(X,Y,Z)}:!(!yP||!yP.encodeInto)&&function(X,Y){return yP.encodeInto(X,Vt.subarray(Y)).written},c=this;e||(e={});let d=e&&e.sequential,h=e.structures||e.saveStructures,p=e.maxSharedStructures;if(null==p&&(p=h?32:0),p>8160)throw new Error("Maximum maxSharedStructure is 8160");let g=e.maxOwnStructures;null==g&&(g=h?32:64),d&&!e.saveStructures&&(this.structures=[]);let v=p>32||g+p>64,y=p+64,b=p+g+64;if(b>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let P=[],S=0,O=0;this.pack=this.encode=function(X,Y){if(Vt||(Vt=new iI(8192),hs=new DataView(Vt.buffer,0,8192),wt=0),(Oh=Vt.length-10)-wt<2048?(Vt=new iI(Vt.length),hs=new DataView(Vt.buffer,0,Vt.length),Oh=Vt.length-10,wt=0):wt=wt+7&2147483640,n=wt,s=c.structuredClone?new Map:null,c.bundleStrings?(Eh=["",""],Vt[wt++]=214,Vt[wt++]=98,Eh.position=wt-n,wt+=4):Eh=null,i=c.structures,i){i.uninitialized&&(i=c._mergeStructures(c.getStructures()));let Z=i.sharedLength||0;if(Z>p)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let ee=0;ee<Z;ee++){let oe=i[ee];if(!oe)continue;let ce,de=i.transitions;for(let he=0,Pe=oe.length;he<Pe;he++){let we=oe[he];ce=de[we],ce||(ce=de[we]=Object.create(null)),de=ce}de[u_]=ee+64}a=Z}d||(i.nextId=Z+64)}r&&(r=!1),o=i||[];try{if(A(X),Eh){hs.setUint32(Eh.position+n,wt-Eh.position-n);let Z=Eh;Eh=null,A(Z[0]),A(Z[1])}if(c.offset=wt,s&&s.idsToInsert){(wt+=6*s.idsToInsert.length)>Oh&&U(wt),c.offset=wt;let Z=function g3e(e,t){let n,i=6*t.length,r=e.length-i;for(t.sort((o,s)=>o.offset>s.offset?1:-1);n=t.pop();){let o=n.offset,s=n.id;e.copyWithin(o+i,o,r),i-=6;let a=o+i;e[a++]=214,e[a++]=105,e[a++]=s>>24,e[a++]=s>>16&255,e[a++]=s>>8&255,e[a++]=255&s,r=o}return e}(Vt.subarray(n,wt),s.idsToInsert);return s=null,Z}return Y&v3e?(Vt.start=n,Vt.end=wt,Vt):Vt.subarray(n,wt)}finally{if(i){if(O<10&&O++,S>1e4)i.transitions=null,O=0,S=0,P.length>0&&(P=[]);else if(P.length>0&&!d){for(let Z=0,ee=P.length;Z<ee;Z++)P[Z][u_]=0;P=[]}if(r&&c.saveStructures){let Z=i.sharedLength||p;i.length>Z&&(i=i.slice(0,Z));let ee=Vt.subarray(n,wt);return!1===c.saveStructures(i,a)?(c._mergeStructures(c.getStructures()),c.pack(X)):(a=Z,ee)}}Y&y3e&&(wt=n)}};let A=X=>{wt>Oh&&(Vt=U(wt));var Z,Y=typeof X;if("string"===Y){let oe,ee=X.length;if(Eh&&ee>=8&&ee<4096){let de=f3e.test(X);return Eh[de?0:1]+=X,Vt[wt++]=193,void A(de?-ee:ee)}oe=ee<32?1:ee<256?2:ee<65536?3:5;let ce=3*ee;if(wt+ce>Oh&&(Vt=U(wt+ce)),ee<64||!l){let de,he,Pe,we=wt+oe;for(de=0;de<ee;de++)he=X.charCodeAt(de),he<128?Vt[we++]=he:he<2048?(Vt[we++]=he>>6|192,Vt[we++]=63&he|128):55296==(64512&he)&&56320==(64512&(Pe=X.charCodeAt(de+1)))?(he=65536+((1023&he)<<10)+(1023&Pe),de++,Vt[we++]=he>>18|240,Vt[we++]=he>>12&63|128,Vt[we++]=he>>6&63|128,Vt[we++]=63&he|128):(Vt[we++]=he>>12|224,Vt[we++]=he>>6&63|128,Vt[we++]=63&he|128);Z=we-wt-oe}else Z=l(X,wt+oe,ce);Z<32?Vt[wt++]=160|Z:Z<256?(oe<2&&Vt.copyWithin(wt+2,wt+1,wt+1+Z),Vt[wt++]=217,Vt[wt++]=Z):Z<65536?(oe<3&&Vt.copyWithin(wt+3,wt+2,wt+2+Z),Vt[wt++]=218,Vt[wt++]=Z>>8,Vt[wt++]=255&Z):(oe<5&&Vt.copyWithin(wt+5,wt+3,wt+3+Z),Vt[wt++]=219,hs.setUint32(wt,Z),wt+=4),wt+=Z}else if("number"===Y)if(X>>>0===X)X<64?Vt[wt++]=X:X<256?(Vt[wt++]=204,Vt[wt++]=X):X<65536?(Vt[wt++]=205,Vt[wt++]=X>>8,Vt[wt++]=255&X):(Vt[wt++]=206,hs.setUint32(wt,X),wt+=4);else if(X>>0===X)X>=-32?Vt[wt++]=256+X:X>=-128?(Vt[wt++]=208,Vt[wt++]=X+256):X>=-32768?(Vt[wt++]=209,hs.setInt16(wt,X),wt+=2):(Vt[wt++]=210,hs.setInt32(wt,X),wt+=4);else{let ee;if((ee=this.useFloat32)>0&&X<4294967296&&X>=-2147483648){let oe;if(Vt[wt++]=202,hs.setFloat32(wt,X),ee<4||(oe=X*tI[(127&Vt[wt])<<1|Vt[wt+1]>>7])>>0===oe)return void(wt+=4);wt--}Vt[wt++]=203,hs.setFloat64(wt,X),wt+=8}else if("object"===Y)if(X){if(s){let oe=s.get(X);if(oe){if(!oe.id){let ce=s.idsToInsert||(s.idsToInsert=[]);oe.id=ce.push(oe)}return Vt[wt++]=214,Vt[wt++]=112,hs.setUint32(wt,oe.id),void(wt+=4)}s.set(X,{offset:wt-n})}let ee=X.constructor;if(ee===Object)H(X,!0);else if(ee===Array){(Z=X.length)<16?Vt[wt++]=144|Z:Z<65536?(Vt[wt++]=220,Vt[wt++]=Z>>8,Vt[wt++]=255&Z):(Vt[wt++]=221,hs.setUint32(wt,Z),wt+=4);for(let oe=0;oe<Z;oe++)A(X[oe])}else if(ee===Map){(Z=X.size)<16?Vt[wt++]=128|Z:Z<65536?(Vt[wt++]=222,Vt[wt++]=Z>>8,Vt[wt++]=255&Z):(Vt[wt++]=223,hs.setUint32(wt,Z),wt+=4);for(let[oe,ce]of X)A(oe),A(ce)}else{for(let oe=0,ce=bP.length;oe<ce;oe++)if(X instanceof nI[oe]){let he=bP[oe];if(he.write)return he.type&&(Vt[wt++]=212,Vt[wt++]=he.type,Vt[wt++]=0),void A(he.write.call(this,X));let ve,Pe=Vt,we=hs,_e=wt;Vt=null;try{ve=he.pack.call(this,X,ke=>(Vt=Pe,Pe=null,(wt+=ke)>Oh&&U(wt),{target:Vt,targetView:hs,position:wt-ke}),A)}finally{Pe&&(hs=we,wt=_e,Oh=(Vt=Pe).length-10)}return void(ve&&(ve.length+wt>Oh&&U(ve.length+wt),wt=m3e(ve,Vt,wt,he.type)))}H(X,!X.hasOwnProperty)}}else Vt[wt++]=192;else if("boolean"===Y)Vt[wt++]=X?195:194;else if("bigint"===Y){if(X<BigInt(1)<<BigInt(63)&&X>=-(BigInt(1)<<BigInt(63)))Vt[wt++]=211,hs.setBigInt64(wt,X);else if(X<BigInt(1)<<BigInt(64)&&X>0)Vt[wt++]=207,hs.setBigUint64(wt,X);else{if(!this.largeBigIntToFloat)throw new RangeError(X+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Vt[wt++]=203,hs.setFloat64(wt,Number(X))}wt+=8}else if("undefined"===Y)this.encodeUndefinedAsNil?Vt[wt++]=192:(Vt[wt++]=212,Vt[wt++]=0,Vt[wt++]=0);else{if("function"!==Y)throw new Error("Unknown type: "+Y);A(this.writeFunction&&this.writeFunction())}},H=!1===this.useRecords?this.variableMapSize?X=>{let ee,Y=Object.keys(X),Z=Y.length;Z<16?Vt[wt++]=128|Z:Z<65536?(Vt[wt++]=222,Vt[wt++]=Z>>8,Vt[wt++]=255&Z):(Vt[wt++]=223,hs.setUint32(wt,Z),wt+=4);for(let oe=0;oe<Z;oe++)A(ee=Y[oe]),A(X[ee])}:(X,Y)=>{Vt[wt++]=222;let Z=wt-n;wt+=2;let ee=0;for(let oe in X)(Y||X.hasOwnProperty(oe))&&(A(oe),A(X[oe]),ee++);Vt[Z+++n]=ee>>8,Vt[Z+n]=255&ee}:X=>{let Z,Y=Object.keys(X),ee=o.transitions||(o.transitions=Object.create(null)),oe=0;for(let de=0,he=Y.length;de<he;de++){let Pe=Y[de];Z=ee[Pe],Z||(Z=ee[Pe]=Object.create(null),oe++),ee=Z}let ce=ee[u_];if(ce)ce>=96&&v?(Vt[wt++]=96+(31&(ce-=96)),Vt[wt++]=ce>>5):Vt[wt++]=ce;else{ce=o.nextId,ce||(ce=64),ce<y&&this.shouldShareStructure&&!this.shouldShareStructure(Y)?(ce=o.nextOwnId,ce<b||(ce=y),o.nextOwnId=ce+1):(ce>=b&&(ce=y),o.nextId=ce+1);let de=Y.highByte=ce>=96&&v?ce-96>>5:-1;ee[u_]=ce,o[ce-64]=Y,ce<y?(Y.isShared=!0,o.sharedLength=ce-63,r=!0,de>=0?(Vt[wt++]=96+(31&ce),Vt[wt++]=de):Vt[wt++]=ce):(de>=0?(Vt[wt++]=213,Vt[wt++]=114,Vt[wt++]=96+(31&ce),Vt[wt++]=de):(Vt[wt++]=212,Vt[wt++]=114,Vt[wt++]=ce),oe&&(S+=O*oe),P.length>=g&&(P.shift()[u_]=0),P.push(ee),A(Y))}for(let de=0,he=Y.length;de<he;de++)A(X[Y[de]])},U=X=>{let Y;if(X>16777216){if(X-n>AW)throw new Error("Packed buffer would be larger than maximum buffer size");Y=Math.min(AW,4096*Math.round(Math.max((X-n)*(X>67108864?1.25:2),4194304)/4096))}else Y=1+(Math.max(X-n<<2,Vt.length-1)>>12)<<12;let Z=new iI(Y);return hs=new DataView(Z.buffer,0,Y),Vt.copy?Vt.copy(Z,0,n,X):Z.set(Vt.slice(n,X)),wt-=n,n=0,Oh=Z.length-10,Vt=Z}}useBuffer(e){Vt=e,hs=new DataView(Vt.buffer,Vt.byteOffset,Vt.byteLength),wt=0}};function IW(e,t,n,i){let r=e.byteLength;if(r+1<256){var{target:o,position:s}=n(4+r);o[s++]=199,o[s++]=r+1}else if(r+1<65536){var{target:o,position:s}=n(5+r);o[s++]=200,o[s++]=r+1>>8,o[s++]=r+1&255}else{var{target:o,position:s,targetView:a}=n(7+r);o[s++]=201,a.setUint32(s,r+1),s+=4}o[s++]=116,o[s++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function kW(e,t){let n=e.byteLength;var i,r;if(n<256){var{target:i,position:r}=t(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=t(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=255&n}else{var{target:i,position:r,targetView:o}=t(n+5);i[r++]=198,o.setUint32(r,n),r+=4}i.set(e,r)}function m3e(e,t,n,i){let r=e.length;switch(r){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:r<256?(t[n++]=199,t[n++]=r):r<65536?(t[n++]=200,t[n++]=r>>8,t[n++]=255&r):(t[n++]=201,t[n++]=r>>24,t[n++]=r>>16&255,t[n++]=r>>8&255,t[n++]=255&r)}return t[n++]=i,t.set(e,n),n+r}function Fv(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");nI.unshift(e.Class),bP.unshift(e)}!function h3e(e){gl[e.type]=e.unpack?e.unpack:e}(e)}nI=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,mW],bP=[{pack(e,t,n){let i=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&i>=0&&i<4294967296){let{target:r,targetView:o,position:s}=t(6);r[s++]=214,r[s++]=255,o.setUint32(s,i)}else if(i>0&&i<17179869184){let{target:r,targetView:o,position:s}=t(10);r[s++]=215,r[s++]=255,o.setUint32(s,4e6*e.getMilliseconds()+(i/1e3/4294967296>>0)),o.setUint32(s+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:r,position:s}=t(3);r[s++]=212,r[s++]=255,r[s++]=255}else{let{target:r,targetView:o,position:s}=t(15);r[s++]=199,r[s++]=12,r[s++]=255,o.setUint32(s,1e6*e.getMilliseconds()),o.setBigInt64(s+4,BigInt(Math.floor(i)))}}},{pack(e,t,n){let i=Array.from(e),{target:r,position:o}=t(this.structuredClone?3:0);this.structuredClone&&(r[o++]=212,r[o++]=115,r[o++]=0),n(i)}},{pack(e,t,n){let{target:i,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:i,position:r}=t(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([e.source,e.flags])}},{pack(e,t){this.structuredClone?IW(e,16,t):kW(_P?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==DW&&this.structuredClone?IW(e,OW.indexOf(n.name),t):kW(e,t)}},{pack(e,t){let{target:n,position:i}=t(1);n[i]=193}}],new TW({useRecords:!1});var oI,FW,v3e=512,y3e=1024,NW=new TW({structuredClone:!0});function rI(e){if(U3(e))return e;if(Array.isArray(e))return e.map(rI);if("object"==typeof e&&null!==e){let t={};for(let n of Object.keys(e).sort())t[n]=rI(e[n]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}function LW(e){return"MouseDown"===e||"MouseUp"===e||"KeyDown"===e||"KeyUp"===e||"Collision"===e||"Trigger"===e}Fv({Class:ii.prototype.constructor,type:1,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,ii.prototype),e)}),Fv({Class:Gn.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Gn.prototype),e)}),Fv({Class:Ma.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Ma.prototype),e)}),Fv({Class:hW.prototype.constructor,type:4,write:e=>e.id,read:e=>new hW(e)}),Fv({Class:uW.prototype.constructor,type:5,write:e=>e.data,read:e=>new uW(e)}),Fv({Class:Ss.prototype.constructor,type:6,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,Ss.prototype),e)}),(e=>{function t(r){return NW.pack(r)}e.serialize=t,e.deserialize=function n(r){return NW.unpack(r)},e.checksum=function i(r){return function b3e(e){var t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}(t(rI(r))).toString()}})(oI||(oI={})),(e=>{e.toEventUIType=function t(i){return"Conditional"===i.type?"Distance"===i.condition.type?"Distance":"StateChange":i.type},e.fromEventUIType=function n(i){return"Distance"===i||"StateChange"===i?"Conditional":i}})(FW||(FW={}));var BW,xP,sI,zW,UW,jW,aI,lI,VW,HW,GW,WW,qW,cI,dI,YW,XW,$W,QW,$a={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]};(e=>{e.is=function t(i){return"MouseDown"===i.type||"MouseUp"===i.type||"MousePress"===i.type||"KeyDown"===i.type||"KeyUp"===i.type||"KeyPress"===i.type},e.defaultData=function n(i){return"MouseDown"===i||"MouseUp"===i||"MousePress"===i?{type:i,mode:"Object",disabled:!1,actions:new Gn}:{type:i,disabled:!1,key:void 0,actions:new Gn}}})(BW||(BW={})),(e=>{e.propertyDefaultData=function t(n){return{type:"Property",value:[n??null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}})(xP||(xP={})),(e=>{e.comparisonDefaultData=function t(r){return{type:"Comparison",operator:"==",lOperand:xP.propertyDefaultData(r),rOperand:{...xP.valueDefaultData}}},e.distanceDefaultData=function n(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}},e.stateDefaultData=function i(r,o){return{type:"State",object:r??null,state:o??null}}})(sI||(sI={})),(e=>{e.isConditionalSubActions=function t(n){return void 0!==n.find(i=>"ifActions"===i||"elseActions"===i)}})(zW||(zW={})),(e=>{e.is=function t(i){return"Conditional"===i.type},e.defaultData=function n(i){return{type:"Conditional",disabled:!1,inActions:new Gn,outActions:new Gn,condition:sI.distanceDefaultData(i)}}})(UW||(UW={})),(e=>{e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Gn,drop:new Gn}}})(jW||(jW={})),(e=>{e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Gn}})(aI||(aI={})),(e=>{e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5}})(lI||(lI={})),(e=>{e.is=function t(i){return"MouseHover"===i.type},e.defaultData=function n(){return{type:"MouseHover",disabled:!1,actions:new Gn}}})(VW||(VW={})),(e=>{e.is=function t(i){return"Scroll"===i.type},e.defaultData=function n(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Gn}}})(HW||(HW={})),(e=>{e.is=function t(i){return"Start"===i.type},e.defaultData=function n(){return{type:"Start",disabled:!1,actions:new Gn}}})(GW||(GW={})),(e=>{e.is=function t(i){return"Collision"===i.type},e.defaultData=function n(){return{type:"Collision",disabled:!1,target:"character",actions:new Gn}}})(WW||(WW={})),(e=>{e.is=function t(i){return"Trigger"===i.type},e.defaultData=function n(i,r){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Gn,triggerZone:"box",position:r.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}})(qW||(qW={})),(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]},e.is=function t(s){return"Resize"===s.type},e.sizeToDevice=function n(s){return"string"==typeof s?s:"custom"},e.deviceToSize=function i(s){return"string"==typeof s?[...e.defaultSizes[s]]:[...s]},e.defaultData=function r(){let s={size:"mobile",operator:"<",actions:new Gn},a={size:"tablet",operator:"<",actions:new Gn},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Gn},c=new Gn;return c.push({id:En.generateUUID(),fi:0,data:s},{id:En.generateUUID(),fi:1,data:a},{id:En.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:c}},e.defaultBreakpointData=function o(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Gn}}})(cI||(cI={})),(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]},e.is=function t(i){return"VariableChange"===i.type},e.defaultData=function n(){return{disabled:!1,type:"VariableChange",actions:new Gn,variableId:"",objectId:null,property:"Position X"}}})(dI||(dI={})),(e=>{e.is=function t(i){return"API"===i.type},e.defaultData=function n(){return{disabled:!1,type:"API",successActions:new Gn,errorActions:new Gn,userAPIId:""}}})(YW||(YW={})),(e=>{e.is=function t(i){return"WEBHOOK"===i.type},e.defaultData=function n(){return{disabled:!1,type:"WEBHOOK",actions:new Gn,userWebhookId:""}}})(XW||(XW={})),(e=>{e.is=function t(i){return"AIAssistantListener"===i.type},e.defaultData=function n(){return{disabled:!1,type:"AIAssistantListener",actions:new Gn,analysis:"average",analysisRange:[0,71],analysisSingle:0}}})($W||($W={})),(e=>{e.is=function t(i){return"AIAssistantTrigger"===i.type},e.defaultData=function n(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Gn}}})(QW||(QW={}));var qu,rg,CP,KW,Bv,Pa,Hr,hI,ZW,JW,pf,og,zv,ff,uI,Lv="personal camera",p_="a218fcc3-276b-49b9-b485-49037fd14f5f",gc=5526619;function eq(e){return"string"==typeof e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}(e=>{function a(v,y){return Math.pow(y[0]-v[0],2)+Math.pow(y[1]-v[1],2)}function l(v,y){return Math.sqrt(a(v,y))}function h(v,y,b){let P=e.sub(y,v),S=e.sub(b,v),O=e.dot(P,S)/e.dot(P,P),A=e.scalarMultiply(P,O);return e.add(v,A)}e.isEqual=function t(v,y){return v[0]===y[0]&&v[1]===y[1]},e.lerp=function n(v,y,b){return[v[0]+(y[0]-v[0])*b,v[1]+(y[1]-v[1])*b]},e.add=function i(v,y){return[v[0]+y[0],v[1]+y[1]]},e.sub=function r(v,y){return[v[0]-y[0],v[1]-y[1]]},e.multiply=function o(v,y){return[v[0]*y[0],v[1]*y[1]]},e.divide=function s(v,y){return[v[0]/y[0],v[1]/y[1]]},e.distanceSquared=a,e.distance=l,e.dot=function c(v,y){return v[0]*y[0]+v[1]*y[1]},e.scalarMultiply=function d(v,y){return[v[0]*y,v[1]*y]},e.projectionOnto=h,e.projectionOntoDistance=function p(v,y,b){return l(v,h(v,y,b))},e.center=function g(v,y){return[.5*(v[0]+y[0]),.5*(v[1]+y[1])]}})(qu||(qu={})),(e=>{e.isEqual=function t(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]},e.add=function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]},e.sub=function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]},e.div=function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]},e.mul=function o(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]},e.dist=function s(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])},e.lerp=function a(l,c,d){return[l[0]+(c[0]-l[0])*d,l[1]+(c[1]-l[1])*d,l[2]+(c[2]-l[2])*d]}})(rg||(rg={})),(e=>{e.isEqual=function t(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]},e.lerp=function n(i,r,o){return[i[0]+(r[0]-i[0])*o,i[1]+(r[1]-i[1])*o,i[2]+(r[2]-i[2])*o,i[3]+(r[3]-i[3])*o]}})(CP||(CP={})),(e=>{let t=180/Math.PI,n=Math.PI/180;function i(a){return"number"==typeof a?a*t:a}function r(a){return"number"==typeof a?a*n:a}e.radToDeg=function o(a){return[i(a[0]),i(a[1]),i(a[2])]},e.degToRad=function s(a){return[r(a[0]),r(a[1]),r(a[2])]}})(KW||(KW={})),(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.isEqual=function t(r,o){for(let s=0;s<16;s++)if(r[s]!==o[s])return!1;return!0},e.simplify=function n(r){return r??e.identity},e.applyMatrix4=function i(r,o){let s=o.slice(0);for(var a=0,l=o.length;a<l;a+=3){let c=r[3]*o[a]+r[7]*o[a+1]+r[11]*o[a+2]+r[15];s[a]=(r[0]*o[a]+r[4]*o[a+1]+r[8]*o[a+2]+r[12])/c,s[a+1]=(r[1]*o[a]+r[5]*o[a+1]+r[9]*o[a+2]+r[13])/c,s[a+2]=(r[2]*o[a]+r[6]*o[a+1]+r[10]*o[a+2]+r[14])/c}return s}})(Bv||(Bv={})),(e=>{e.isRGB=function t(c){return"object"==typeof c&&"number"==typeof c.r&&"number"==typeof c.g&&"number"==typeof c.b},e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0},e.toRgb255a1=function n(c){return{r:Math.round(255*c.r),g:Math.round(255*c.g),b:Math.round(255*c.b),a:1}},e.clone=function i(c){return{r:c.r,g:c.g,b:c.b}},e.fromHex=function r(c){return{r:((c=Math.floor(c))>>16&255)/255,g:(c>>8&255)/255,b:(255&c)/255}},e.toHex=function o(c){return 65536*Math.round(255*c.r)+256*Math.round(255*c.g)+Math.round(255*c.b)},e.equals=function s(c,d){return c.r===d.r&&c.g===d.g&&c.b===d.b},e.equalsFixed=function a(c,d){return c.r.toFixed(2)===d.r.toFixed(2)&&c.g.toFixed(2)===d.g.toFixed(2)&&c.b.toFixed(2)===d.b.toFixed(2)},e.lerp=function l(c,d,h){return{r:c.r+(d.r-c.r)*h,g:c.g+(d.g-c.g)*h,b:c.b+(d.b-c.b)*h}}})(Pa||(Pa={})),(e=>{e.white={...Pa.white,a:1},e.transparent={...Pa.white,a:0},e.from0to1=function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}},e.fromHexAndA=function n(l,c){return{...Pa.fromHex(l),a:c}},e.toRgb255a1=function i(l){return{r:Math.round(255*l.r),g:Math.round(255*l.g),b:Math.round(255*l.b),a:l.a}},e.equals=function r(l,c){return Pa.equals(l,c)&&l.a===c.a},e.equalsFixed=function o(l,c){return Pa.equalsFixed(l,c)&&l.a.toFixed(2)===c.a.toFixed(2)},e.lerp=function s(l,c,d){return{r:l.r+(c.r-l.r)*d,g:l.g+(c.g-l.g)*d,b:l.b+(c.b-l.b)*d,a:l.a+(c.a-l.a)*d}},e.toStyle=function a({r:l,g:c,b:d,a:h}=e.white){return`rgba(${255*l}, ${255*c}, ${255*d}, ${h})`}})(Hr||(Hr={})),(e=>{e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(hI||(hI={})),(e=>{e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(ZW||(ZW={})),(e=>{e.defaultData={control1:[.5,0],control2:[.5,1]}})(JW||(JW={})),(e=>{e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]})(pf||(pf={})),(e=>{e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function t(n){return e.all.includes(n)}})(og||(og={})),(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function t(n){return"PerspectiveCamera"===n.type?n.perspective?.zoom??1:n.orthographic?.zoom??1}})(zv||(zv={})),(e=>{e.defaultData=function t(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:2*Math.max(i[0],i[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(o=>o*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}},e.merge=function n(i,r){let o={...i};if(tq.forEach(s=>{Object.assign(o,{[s]:r[s]??i[s]})}),o.radial={...i.radial},r.radial){let s=i.radial,a=r.radial;nq.forEach(l=>{Object.assign(o.radial,{[l]:a[l]??s[l]})})}if(o.linear={...i.linear},r.linear){let s=i.linear,a=r.linear;iq.forEach(l=>{Object.assign(o.linear,{[l]:a[l]??s[l]})})}if(o.grid={...i.grid},r.grid){let s=i.grid,a=r.grid;rq.forEach(l=>{Object.assign(o.grid,{[l]:a[l]??s[l]})})}if(o.toObject={...i.toObject},r.toObject){let s=i.toObject,a=r.toObject;oq.forEach(l=>{Object.assign(o.toObject,{[l]:a[l]??s[l]})})}if(o.randomnessObject={...i.randomnessObject},r.randomnessObject){let s=i.randomnessObject,a=r.randomnessObject;sq.forEach(l=>{Object.assign(o.randomnessObject,{[l]:a[l]??s[l]})})}return o}})(ff||(ff={})),(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];e.toOps=function n(i,r){let o=[];void 0!==i.count&&o.push({type:0,path:r,props:{count:i.count}});for(let s of t){let a=i[s];a&&Object.keys(a).length>0&&o.push({type:0,path:[...r,s],props:a})}return o}})(uI||(uI={}));var pI,fI,wP,Uv,mI,gI,vI,aq,MP,lq,cq,tq=["count"],nq=["radius","start","end","position","scale","rotation"],iq=["position","scale","rotation"],rq=["count","size"],oq=["count","position","scale","rotation"],sq=["strength","scale","rotation","position","movement","seed","freqScale"];(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function t(n){return e.all.includes(n)}})(pI||(pI={})),(e=>{e.defaultData=function t(i){return function n(i){if("PointLight"===i)return{type:i,color:Hr.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if("SpotLight"===i)return{type:i,color:Hr.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===i)return{type:i,color:Hr.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(i)}})(fI||(fI={})),(e=>{e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}})(wP||(wP={})),(e=>{e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]}})(Uv||(Uv={})),(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function t(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}})(mI||(mI={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function t(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}})(gI||(gI={})),(e=>{e.defaultData={...gI.defaultData,...mI.defaultData}})(vI||(vI={})),(e=>{e.getMaterialData=function t(n,i){let r=[];if("material"in n){let o="string"==typeof n.material?i.materials[n.material]??i.lib.materials[n.material]?.asset:n.material;o&&r.push(o)}else if("materials"in n)for(let o of n.materials){let s="string"==typeof o?i.materials[o]??i.lib.materials[o]?.asset:o;s&&r.push(s)}return r}})(aq||(aq={})),(e=>{e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7})(MP||(MP={})),(e=>{e.is=function t(n){return"texture"===n||"video"===n||"color"===n||"depth"===n||"normal"===n||"gradient"===n||"noise"===n||"fresnel"===n||"rainbow"===n||"toon"===n||"outline"===n||"particle"===n||"transmission"===n||"matcap"===n||"displace"===n||"pattern"===n||"light"===n}})(lq||(lq={})),(e=>{e.is=function t(n){return"phong"===n||"toon"===n||"lambert"===n||"physical"===n}})(cq||(cq={}));var la,Sa,PP,SP,dq=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],C3e=["wrapping","image","video","name","minFilter","magFilter"];(e=>{e.patch=function t(o,s){let{texture:a,...l}=s;if(Object.assign(o,l),a){let c=o.texture;c&&Object.assign(c,a)}},e.defaultData=function n(o,s){return"light"===o&&s?function i(o){let s={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(o){case"phong":return{...s,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...s,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...s,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...s,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}(s):function r(o){let s={alpha:1,mode:0,isMask:!1,visible:!0};switch(o){case"texture":return{...s,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...s,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:MP.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...s,type:"color",color:Pa.fromHex(gc)};case"depth":return{...s,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...s,type:"normal",cnormal:[1,1,1]};case"gradient":return{...s,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...s,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Pa.fromHex(6710886),a:1},colorB:{...Pa.fromHex(6710886),a:1},colorC:{...Pa.fromHex(16777215),a:1},colorD:{...Pa.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...s,type:"fresnel",color:Hr.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...s,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...s,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Hr.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...s,type:"outline",outlineColor:Hr.fromHexAndA(0,1),contourColor:Hr.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...s,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...s,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...s,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Pa.fromHex(0),a:1},colorB:{...Pa.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}(o)}})(la||(la={})),(e=>{function s(d,h="layer1",p="layer2"){let g=new Gn;return g.push({fi:0,data:la.defaultData("light",d),id:h}),g.push({fi:1,data:la.defaultData("color"),id:p}),{layers:g}}e.isMergable=function t(d){return!d.layers.some(h=>"texture"===h.data.type&&0!==h.data.projection||"depth"===h.data.type&&!h.data.isWorldSpace||"noise"===h.data.type||"displace"===h.data.type)},e.getHash=function n(d){let h="";return d.layers.forEach(p=>{Object.entries(p.data).forEach(([g,v])=>{h+=`${g}${v}`,Array.isArray(v)?v.forEach(y=>h+=`${y}`):"object"==typeof v?Object.values(v).forEach(y=>{h+="number"==typeof y?`${y.toFixed(4)}`:`${y}`}):h+=`${v}`})}),h},e.defaultEmptyData=function i(){return{layers:new Gn}},e.defaultData=function r(d="layer1",h="layer2"){return s("phong",d,h)},e.withName=function o(d,h){return{...d,name:h}},e.defaultTwoLayerData=s,e.defaultUIObjectMaterial=function a(d){let h=la.defaultData("texture");d&&Object.assign(h.texture,{image:d});let p=new Gn;return p.push({fi:0,data:h,id:"layer1"}),p.push({fi:1,data:{...la.defaultData("transmission"),alpha:1},id:"layer2"}),p.push({fi:2,data:{...la.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:p}},e.defaultTwoLayerTextureData=function l(d,h="phong",p="layer1",g="layer2"){let v=la.defaultData("texture");Object.assign(v.texture,{image:d});let y=new Gn;return y.push({fi:0,data:v,id:p}),y.push({fi:1,data:la.defaultData("light",h),id:g}),{layers:y}},e.defaultTwoLayerVideoTextureData=function c(d,h="phong",p="layer1",g="layer2"){let v=la.defaultData("video");Object.assign(v.texture,{video:d});let y=new Gn;return y.push({fi:0,data:v,id:p}),y.push({fi:1,data:la.defaultData("light",h),id:g}),{layers:y}}})(Sa||(Sa={})),(e=>{e.defaultData=function t(){return{points:new Gn,roundness:0,shapeHoles:[],isClosed:!1}}})(PP||(PP={})),(e=>{e.defaultData=function t(){return{points:new Gn,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}})(SP||(SP={}));var yI,hq={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0};(e=>{e.merge=function t(n,i){let r={...n};return pq.forEach(o=>{Object.assign(r,{[o]:i[o]??n[o]})}),r}})(yI||(yI={}));var OP,bI,sg,uq={shape:hq,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},pq=["depth","offset","angle","twist","startScale","endScale"];(e=>{e.is2DParametricMesh=function t(i){return"PolygonGeometry"===i||"RectangleGeometry"===i||"StarGeometry"===i||"TriangleGeometry"===i||"EllipseGeometry"===i||"UIGeometry"===i},e.isParametricMesh=function n(i){return"PolygonGeometry"===i||"PolygonGeometry"===i||"RectangleGeometry"===i||"StarGeometry"===i||"TriangleGeometry"===i||"EllipseGeometry"===i||"PathGeometry"===i||"VectorGeometry"===i||"ConeGeometry"===i||"CubeGeometry"===i||"CylinderGeometry"===i||"DodecahedronGeometry"===i||"HelixGeometry"===i||"IcosahedronGeometry"===i||"LatheGeometry"===i||"PyramidGeometry"===i||"SphereGeometry"===i||"PlaneGeometry"===i||"BackdropGeometry"===i||"TorusGeometry"===i||"TorusKnotGeometry"===i||"BooleanGeometry"===i||"TextGeometry"===i||"InputGeometry"===i}})(OP||(OP={})),(e=>{e.merge=function t(n,i){let r={...n};return Object.assign(r,i),"PathGeometry"===r.type&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,yI.merge(r.extrusion,i.extrusion))),r}})(bI||(bI={})),(e=>{e.defaultData=function t(n){if("RectangleGeometry"===n)return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("UIGeometry"===n)return{type:n,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if("PathGeometry"===n)return{type:n,width:1,height:1,depth:1,path:SP.defaultData(),extrusion:uq};if("VectorGeometry"===n)return{width:1,height:1,type:n,subdivisions:12,shape:PP.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===n)return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if("TextGeometry"===n)return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if("InputGeometry"===n)return{...e.defaultData("TextGeometry"),type:n,editable:!0};if("SphereGeometry"===n)return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}})(sg||(sg={}));var xI,EP,CI,wI,MI,jv,PI,SI,OI,fq,Vv,ca,EI,mq,gq,vq,ag,f_,DI,DP,mf,Hv,AI,lg,AP,gf,TI,II,cg,m_,dg,g_,kI,yq,Oa,RI,bq,_q,Yu,qc,TP,IP,_I=["width","height","depth"];function xq(e){e.layers.forEach(t=>{if("depth"===t.type&&void 0!==t.colorA){let n=t.colorA,i=t.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],o=[0,1];for(let a=2;a<10;a++)r.push(r[1]),o.push(1);let s={...Ph(ds(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:r,steps:o,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,s)}else if("depth"===t.type&&1===t.gradientType&&(t.near<0||t.far<0)){let n={...ds(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,n)}})}function vf(e,t){Object.values(e.shared.materials).forEach(n=>t(n))}function yf(e,t){e.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach((r,o)=>{void 0===r&&(i.materials[o]=Sa.defaultData(),r=i.materials[o]),"string"!=typeof r&&t(r)}):"material"in i?"string"!=typeof i.material&&(void 0===i.material&&(i.material=Sa.defaultData()),t(i.material)):"Mesh"===i.type&&(void 0===i.material&&(i.material=Sa.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(r=>{r.material&&"string"!=typeof r.material&&Object.getPrototypeOf(r.material)!==Ss.prototype&&t(r.material)})})}function Cq(e){void 0===e.layers&&Object.assign(e,Sa.defaultTwoLayerData("lambert"))}function NI(e){!e.layers||e.layers.forEach(t=>{if("depth"===t.type&&10===t.colors.length){let n=[...t.colors];n.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let r={...ds(t),colors:n,steps:i};Object.assign(t,r)}})}function wq(e){e.scene.objects.traverse((t,n)=>{"materials"in n?n.materials.forEach(i=>{"string"!=typeof i&&NI(i)}):"material"in n&&"string"!=typeof n.material&&NI(n.material)}),Object.values(e.shared.materials).forEach(t=>NI(t))}function Mq(e){e.layers&&e.layers.forEach(t=>{"depth"===t.type&&void 0!==t.num&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function Pq(e){e.layers&&e.layers.forEach(t=>{(function x3e(e){return"displace"!==e.type})(t)&&void 0===t.isMask&&(t.isMask=!1),("texture"===t.type||"video"===t.type)&&void 0===t.blending&&(t.blending=0),("noise"===t.type||"displace"===t.type&&"noise"===t.displacementType)&&(void 0===t.voronoiStyle&&(t.voronoiStyle=0),void 0===t.highCut&&(t.highCut=1),void 0===t.lowCut&&(t.lowCut=0),void 0===t.smoothness&&(t.smoothness=.3),void 0===t.seed&&(t.seed=0),void 0===t.quality&&(t.quality=1))})}function Sq(e){let t=e.layers.find(n=>"light"===n.type)?.data;if("basic"===t?.category){let n=la.defaultData("light","phong"),i=t;Object.assign(i,n),i.visible=!1}}function Oq(e){vf(e,Sq),yf(e,Sq)}function Eq(e){e.layers.forEach(t=>{"light"===t.type&&"toon"!==t.category&&void 0===t.occlusion&&(t.occlusion=!0)})}function Dq(e){e.layers&&e.layers.forEach(t=>{"light"===t.type&&void 0===t.bumpMapIntensity&&(t.bumpMapIntensity=5)})}function Aq(e){e.layers&&e.layers.forEach(t=>{"light"===t.type&&void 0===t.alphaOverride&&(t.alphaOverride=1)})}(e=>{e.defaultData={enabled:!1,useBackgroundColor:!1,color:Pa.white,near:.1,far:2e3}})(xI||(xI={})),(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(EP||(EP={})),(e=>{e.defaultData={softShadowQuality:"low"}})(CI||(CI={})),(e=>{e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75}})(wI||(wI={})),(e=>{e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}}})(MI||(MI={})),(e=>{e.defaultData={usePhysics:!1,gravity:-10}})(jv||(jv={})),(e=>{e.defaultData={playCamera:Lv,gameControlObject:null}})(PI||(PI={})),(e=>{e.defaultData={backgroundColor:Hr.fromHexAndA(2960946,1),postprocessing:EP.defaultData,fog:xI.defaultData,globalPhysics:jv.defaultData,ambient:wI.defaultData,ao:MI.defaultData,shadow:CI.defaultData,publish:PI.defaultData}})(SI||(SI={})),(e=>{e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95}})(OI||(OI={})),(e=>{e.isComponentRelated=function t(i){return"Component"===i||"Instance"===i},e.isEmptyOrComponent=function n(i){return"Empty"===i||"Instance"===i}})(fq||(fq={})),(e=>{e.identity={...hI.identity,hiddenMatrix:Bv.identity},e.fromObject=function t(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}},e.merge=function n(r,o){return{position:o?.position||r.position,rotation:o?.rotation||r.rotation,scale:o?.scale||r.scale,hiddenMatrix:o?.hiddenMatrix||r.hiddenMatrix}},e.diff=function i(r,o){return qG({position:rg.isEqual(r.position,o.position)?void 0:o.position,rotation:rg.isEqual(r.rotation,o.rotation)?void 0:o.rotation,scale:rg.isEqual(r.scale,o.scale)?null:o.scale,hiddenMatrix:Bv.isEqual(r.hiddenMatrix,o.hiddenMatrix)?void 0:o.hiddenMatrix})}})(Vv||(Vv={})),(e=>{e.defaultData={states:new Gn,events:new Gn,visible:!0,raycastLock:!1,physics:Uv.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Vv.identity,cloner:null}})(ca||(ca={})),(e=>{e.defaultData={type:"Empty",...ca.defaultData}})(EI||(EI={})),(e=>{e.defaultData={type:"ParticleCollider",...OI.defaultData,...ca.defaultData}})(mq||(mq={})),(e=>{e.defaultData={type:"Component",...ca.defaultData}})(gq||(gq={})),(e=>{e.defaultData={type:"Particle",...ca.defaultData,...wP.defaultData}})(vq||(vq={})),(e=>{e.defaultData={type:"Mesh",...ca.defaultData,...vI.defaultData}})(ag||(ag={})),(e=>{e.defaultData={...ca.defaultData,...Vv.identity,position:[0,0,zv.DefaultTargetOffset],...zv.defaultData}})(f_||(f_={})),(e=>{e.defaultData=function t(n){return{...ca.defaultData,...fI.defaultData(n)}},e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(DI||(DI={})),(e=>{function t(i,r,o=0){for(;o<r.length;){let s=i?i[r[o]]:void 0;if(r.length===o+1)return s;if(!s)return;i=s.descendants,o+=1}}e.resolveWithDes=t,e.resolve=function n(i,r,o=0){let s=t(i,r,o);if(s){let a=Object.keys(s);if(1===a.length&&"descendants"===a[0])return}return s}})(DP||(DP={})),(e=>{function t(i,r){return{...ca.defaultData,...r,component:i,overrides:new Ss,physics:void 0,events:void 0,type:"Instance"}}e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"],e.ofComponent=t,e.fromComponentData=function n(i){let r=Vv.fromObject(i.data);return t(i.id,r)}})(mf||(mf={})),(e=>{e.defaultData={type:"Page",...ca.defaultData,physics:{...Uv.defaultData,fusedBody:!1},...SI.defaultData,camera:f_.defaultData},e.isUIPage=function t(n){return void 0!==n.uiScene}})(Hv||(Hv={})),(e=>{e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Bv.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Uv.defaultData,states:new Gn,events:new Gn,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...zv.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...ca.defaultData,...ag.defaultData,geometry:sg.defaultData("RectangleGeometry"),material:Sa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...ca.defaultData,...ag.defaultData,geometry:sg.defaultData("BooleanGeometry"),material:Sa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...ca.defaultData,...ag.defaultData,geometry:sg.defaultData("TextGeometry"),material:Sa.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...ca.defaultData,...ag.defaultData,geometry:sg.defaultData("InputGeometry"),material:Sa.defaultTwoLayerData("phong","layer1","layer2")}})(AI||(AI={})),(e=>{e.newEmpty=function t(o,s){let a={name:s};return"Mesh"===o.type?(a.geometry={},"material"in o&&(a.material={layers:new Ss}),"materials"in o&&(a.materials=o.materials.map(l=>({layers:new Ss})))):og.is(o.type)&&(a.perspective={},a.orthographic={}),a},e.toOps=function i(o,s){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function d(h,p){for(let[g,v]of Object.entries(p.layers)){let{texture:y,...b}=v;if(void 0!==y&&Object.keys(y).length>0){let P={path:[...h,"layers",g,"texture"],props:y,type:0};l.push(P)}if(Object.keys(b).length>0){let P={path:[...h,"layers",g],props:b,type:0};l.push(P)}}}for(let[h,p]of Object.entries(s))if("name"!==h)if("cloner"===h)l.push(...uI.toOps(p,["cloner"]));else if("pathSnapping"===h)l.push({path:[h],props:{slide:p.slide,offset:p.offset},type:0});else if("material"===h)d(["material"],p);else if("materials"===h)for(let[g,v]of Object.entries(p))d(["materials",g],v);else 0===c[h]?("geometry"===h&&void 0!==p.extrusion&&(l.push({path:[h,"extrusion"],props:p.extrusion,type:0}),p={...p},delete p.extrusion),Object.keys(p).length>0&&l.push({path:[h],props:p,type:0})):(void 0===a&&(a={path:[],props:{},type:0},l.push(a)),a.props[h]=p);return l},e.patch=function r(o,s){if(void 0===s)return o;let a={...o};if(Object.assign(a,Vv.merge(a,s)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:s.pathSnapping?.slide??a.pathSnapping?.slide??0,offset:s.pathSnapping?.offset??a.pathSnapping?.offset??0})}),og.is(o.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let l=s;void 0!==l.orthographic?.zoom&&(a.orthographic.zoom=l.orthographic.zoom),void 0!==l.perspective?.zoom&&(a.perspective.zoom=l.perspective.zoom),void 0!==l.isUpVectorFlipped&&(a.isUpVectorFlipped=l.isUpVectorFlipped),void 0!==l.targetOffset&&(a.targetOffset=l.targetOffset)}else if("Mesh"===o.type)"geometry"in s&&Object.assign(a,{geometry:bI.merge(a.geometry,s.geometry)}),(s.material||s.materials)&&(a=function n(o,s){if(void 0===s)return o;let a={...o};return"material"in a&&"material"in s&&s.material&&(a.material=h_(a.material,l=>{if("string"!=typeof l)for(let[c,d]of Object.entries(s.material.layers)){let h=l.layers.data(c);h&&la.patch(h,d)}}).data),a.materials&&s.materials&&(a.materials=h_(a.materials,l=>{for(let c=0;c<a.materials.length;c++){let d=s.materials[c];if("string"!=typeof d)for(let[h,p]of Object.entries(d.layers)){let g=l[c]?.layers?.data(h);g&&la.patch(g,p)}}}).data),a}(a,s)),a.cloner&&"cloner"in s&&Object.assign(a,{cloner:ff.merge(a.cloner,s.cloner)});else if("Empty"===o.type)a.cloner&&"cloner"in s&&Object.assign(a,{cloner:ff.merge(a.cloner,s.cloner)});else if(pI.is(o.type)){let l=s;void 0!==l.intensity&&(a.intensity=l.intensity),void 0!==l.color&&(a.color="string"==typeof l.color?l.color:Pa.clone(l.color))}return a}})(lg||(lg={})),(e=>{e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0}})(AP||(AP={})),(e=>{e.defaultData={orbitControls:AP.defaultData,playPage:p_,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),0===n||10===n||5===n?i=30:(4===n||11===n||9===n)&&(i=-30),[120,[i,r],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1}})(gf||(gf={})),(e=>{e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""}})(TI||(TI={})),(e=>{e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0}})(II||(II={})),(e=>{e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...TI.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:II.defaultData}),e.generateSeed=()=>Math.round(1e5*Math.random())})(cg||(cg={})),(e=>{e.physicsEnabled=function t(i){return void 0!==i.find(r=>"Page"===r.data.type&&r.data.globalPhysics.usePhysics)},e.traverseModuleInstances=function n(i,r,o){i.scene.objects.traverseFrom(r,(s,a)=>{if("Instance"===a.type){let l=kP.getComponentData(i,a.component)?.data;l&&o(s,a,l.events)}else o(s,a,a.events)})}})(m_||(m_={})),(e=>{function t(r=!0,o=[]){let s=[],a=AI.defaultMeshObject;r&&(s.push({...e.defaultLight}),s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:a,children:[]})),s.push(...o);let l=new Ma;return l.push({fi:1,id:p_,data:{...Hv.defaultData,name:"Scene 1"},children:s}),l}function n(r){return{...e.defaultData,objects:Gc(r,Ma.prototype)}}e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:DI.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]},e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:gf.defaultData,styles:cg.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Ma,publish:gf.defaultData,styles:cg.defaultData()}},e.emptyDataWithPage=function(r=!0){return{objects:t(r),publish:gf.defaultData,styles:cg.defaultData()}},e.emptyData=function(){return{objects:new Ma,publish:{...gf.defaultData},styles:cg.defaultData()}},e.withObjs=n,e.withObj=function i(r,o){return n([{id:r,data:o,children:[],fi:0}])}})(dg||(dg={})),(e=>{e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}}})(g_||(g_={})),(e=>{e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new Gn}),e.defaultParameterValueByType=t=>"number"===t?0:"boolean"!==t&&""})(kI||(kI={})),(e=>{e.defaultData=(t,n="GET")=>({url:t,method:n,name:"New API",headers:new Gn,queries:new Gn,autoStart:!0})})(yq||(yq={})),(e=>{function t(s){return void 0!==s.textValue}function i(s){return"boolean"==typeof s}e.isTextValue=t,e.isNumber=function n(s){return"number"==typeof s},e.isBoolean=i,e.typeOfVariable=function r(s){return t(s)?"string":i(s)?"boolean":"number"},e.getDisplayedValue=function o(s){return e.isTextValue(s)?Array.isArray(s.textValue)?s.textValue.map(a=>a.toString().padStart(s.padding??2,"0")).join(s.deliminator??":")+(void 0!==s.suffix?" "+s.suffix:""):s.textValue.toString():e.isBoolean(s)?s?"True":"False":e.isNumber(s)?parseFloat(s.toFixed(3)).toString():s.toString()}})(Oa||(Oa={})),(e=>{e.all=["images","videos","colors","audios","particles","fonts","materials","variables"]})(RI||(RI={})),(e=>{e.all=[...RI.all,"components"]})(bq||(bq={})),(e=>{e.defaultData=function t(){return{images:new ii,videos:new ii,colors:new ii,audios:new ii,particles:new ii,fonts:new ii,materials:new ii,components:new ii,variables:new ii,userAPIs:new ii,userWebhooks:new ii}}})(_q||(_q={})),(e=>{e.defaultData=function t(){return{images:new ii,videos:new ii,colors:new ii,audios:new ii,particles:new ii,fonts:new ii,materials:new ii,components:new ii,variables:new ii,userAPIs:new ii,userWebhooks:new ii}}})(Yu||(Yu={})),(e=>{e.defaultColors=function t(){return Gc({"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}},ii.prototype)},e.defaultImages=function n(){return Gc({},ii.prototype)},e.emptyData=function i(){return{catelogs:new ii,materials:new ii,images:new ii,videos:new ii,colors:new ii,audios:new ii,particles:new ii,fonts:new ii,variables:new Gn,userAPIs:new ii,userWebhooks:new ii,lib:Yu.defaultData()}},e.defaultVariables=function r(s){switch(s){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let a=[0,0,0];return{name:"Time",value:{textValue:a,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:a,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",s)}},e.getFormattedTimerTime=function o(s,a){if("HH:mm:ss"===a.format){let l=Math.floor(s/3600),c=Math.floor((s-3600*l)/60);return{textValue:[l,c,Math.round(s-3600*l-60*c)]}}if("mm:ss"===a.format){let l=Math.floor(s/60);return{textValue:[l,Math.round(s-60*l)]}}return"number"===a.format?Math.round(s):Math.round(1e3*s)/1e3}})(qc||(qc={})),(e=>{e.list=["idle","move","jump","run"]})(TP||(TP={})),(e=>{e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25b2"],["rotPosY","\u25c0"],["rotNegX","\u25bc"],["rotNegY","\u25b6"],["jump","Space"],["run","\u21e7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Gn,move:new Gn,jump:new Gn,run:new Gn},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Hr.fromHexAndA(3728051,1)}}})(IP||(IP={}));var Gv=180/Math.PI;function Tq(e){e.rotation=e.rotation.slice(0,3).map(t=>t*Gv)}function Iq(e){Tq(e),"Page"===e.type&&Tq(e.camera),e.states?.forEach(n=>{null==n.rotation||(n.rotation=n.rotation.slice(0,3).map(i=>i*Gv))});let t=e.geometry;t&&"SphereGeometry"===t.type&&(t.thetaLength=(t.thetaLength??180)*Gv),t&&"TorusGeometry"===t.type&&(t.arc=t.arc*Gv),t&&"PathGeometry"===t.type&&(t.extrusion.angle*=Gv,t.extrusion.twist*=Gv),"Mesh"===e.type&&"TextGeometry"===e.geometry.type&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(ds(e.events))&&e.events?.forEach(n=>{("MouseDown"===n.type||"MouseUp"===n.type||"MousePress"===n.type||"KeyDown"===n.type||"KeyUp"===n.type||"KeyPress"===n.type||"Collision"===n.type||"Trigger"===n.type)&&(n.runMode=n.toggle?"Toggle":"Repeat")})}var kP,FI,Nq,RP,LI,Fq,NP,hg,v_,Wv,FP,BI,y_,zI,UI,Lq,LP,jI,ug,VI,Xu=115;function kq(e,t){t(e.data);for(let n of e.children)kq(n,t)}function dIe(e){let t=e.schema??104;t!==Xu&&t<105&&(kq(e.asset,Iq),e.schema=105)}function Rq(e){let t=e.schema??0;if(t!==Xu){console.warn("updating from ",t,"to ",Xu),function oIe(e,t){if(t<1&&(yf(e,xq),vf(e,xq),e.schema=1),t<2&&(function w3e(e){Object.assign(e.scene.publish,{orbitControls:{...AP.defaultData,...ds(e.scene.publish.orbitControls)}})}(e),e.schema=2),t<3&&(function P3e(e){function t(n){if(n.layers)for(let i of Object.values(n.layers))if(i)for(let[r,o]of Object.entries(i))if((dq.includes(r)||"boolean"==typeof o)&&delete i[r],"texture"===r)for(let[s,a]of Object.entries(o))(C3e.includes(s)||"boolean"==typeof a)&&delete o[s]}e.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let o=r;o.material?t(o.material):o.materials&&o.materials.forEach(s=>{t(s)})})})}(e),e.schema=3),t<4&&(function S3e(e){e.scene.publish.withBackground=!0}(e),e.schema=4),t<5&&(function O3e(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}(e),e.schema=5),t<6&&(function E3e(e){e.scene.objects.traverse((t,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}(e),e.schema=6),t<7&&(function D3e(e){e.scene.objects.traverse((t,n)=>{let i=n.geometry;i&&("DodecahedronGeometry"===i.type||"IcosahedronGeometry"===i.type)&&(i.detail=Math.round(i.detail))})}(e),e.schema=7),t<8&&(e.schema=8),t<9&&(wq(e),e.schema=9),t<10&&(function k3e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&("BooleanGeometry"===n.geometry.type||"SubdivGeometry"===n.geometry.type)&&(n.geometry.phongAngle=35)})}(e),e.schema=10),t<11&&(function R3e(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,n)=>{("DirectionalLight"===n.type||"SpotLight"===n.type)&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),t<12&&(wq(e),e.schema=12),t<13&&(function N3e(e){e.shared.audios=Gc({},ii.prototype)}(e),e.schema=13),t<14&&(function L3e(e){let t=e.shared.materials;Object.entries(t).forEach(([n,i])=>{i.layers||Object.assign(t,{[n]:{name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]}})})}(e),e.schema=14),t<15&&(function B3e(e){Object.entries(ds(e.shared.images)).filter(t=>!1===t[1].asset).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(ds(e.shared.audios)).filter(t=>!1===t[1].asset).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}(e),e.schema=15),t<16&&(function z3e(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),t<17&&(yf(e,Mq),vf(e,Mq),e.schema=17),t<18&&(yf(e,Cq),vf(e,Cq),e.schema=18),t<19&&(function M3e(e){Object.assign(e.scene.publish.settings,{video:{...gf.defaultData.settings.video,...ds(e.scene.publish.settings.video)}})}(e),e.schema=19),t<20&&(function U3e(e){e.shared.fonts=Gc({},ii.prototype)}(e),function V3e(e){let t=[];e.scene.objects.traverse((n,i)=>{let r=i;if("TextFrame"===r.type){let o=Sa.defaultTwoLayerData("phong"),s="string"==typeof r.color?e.shared.colors[r.color]:r.color;o.layers[1].data.color={r:s.r,g:s.g,b:s.b},o.layers[1].data.alpha=r.alpha;let a=function j3e(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}(r.font);void 0===e.shared.fonts[a]&&(e.shared.fonts[a]={name:a});let l={name:r.name,...ca.defaultData,...ag.defaultData,flatShading:!1,wireframe:!1,geometry:{...sg.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:1.40625*r.fontSize,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:o,states:ds(r.states),events:ds(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=ds(e.scene.objects).parent(n);e.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),t.push(n)}}),t.forEach(n=>{e.scene.objects.delete(n)})}(e),e.schema=20),t<21&&(function H3e(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(t[Number(r.type)])if(Object.assign(r,{type:t[Number(r.type)]}),"Audio"===r.type&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),"GameControl"===r.type)Object.assign(r,{gameActions:{idle:new Gn,move:new Gn,jump:new Gn}});else{let o=new Gn;Object.assign(r,{actions:o}),("MouseDown"===r.type||"MouseUp"===r.type||"KeyDown"===r.type||"KeyUp"===r.type)&&"url"in r&&o.push({fi:0,id:En.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((s,a,l)=>{let d={easing:s.easing,duration:s.duration};6===s.easing?Object.assign(d,Ph(s,"mass","stiffness","damping","velocity")):5===s.easing&&Object.assign(d,{control1:{...s.control1},control2:{...s.control2}});let p={state:s.state,repeat:s.repeat?-1:0,delay:s.delay,delayDirection:s.delayDirection,direction:s.cycle&&s.rewind?"pingpong-rewind":s.cycle?"pingpong":"normal",...d},g={allowSlerp:!0,type:"Transition",object:s.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Gn({fi:0,id:En.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:En.generateUUID(),data:p})};o.push({fi:l,id:a,data:g})}),delete r.targets)}})})}(e),function G3e(e){e.scene.objects.traverse((t,n)=>{function i(r,o){let s=new Gn,a=[];if(n.events.forEach((l,c,d)=>{if("Audio"===l.type&&l.trigger===o){let h;a.push(c),"play"===l.interaction?h={...Ph(l,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in l?l.after:void 0,toggle:"after"in l?l.toggle:void 0,type:"Audio"}:("pause"===l.interaction||"stop"===l.interaction)&&(h={...Ph(l,"interaction","delay","object","playAudio"),type:"Audio"}),h&&s.push({fi:d,id:c,data:h})}}),a.forEach(l=>n.events.delete(l)),s.length){let l=n.events.find(c=>c.type===r)?.data;l?"actions"in l&&l.actions.insertBefore(null,s):n.events.insertBefore(null,[{id:En.generateUUID(),data:{type:r,actions:s}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}(e),e.schema=21),t<22&&(Oq(e),e.schema=22),t<23&&(function W3e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&"SubdivGeometry"===n.geometry.type&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}(e),e.schema=23),t<24&&(function q3e(e){e.scene.objects.traverse((t,n)=>{("Empty"===n.type||"Mesh"===n.type)&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}(e),e.schema=24),(t<25||void 0===e.shared.videos)&&(function F3e(e){e.shared.videos=Gc({},ii.prototype)}(e),t<25&&(e.schema=25)),t<26&&(function A3e(e){e.scene.objects.traverse((t,n)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let r=ds(e.scene.objects.data(i));r&&"Mesh"===r.type&&"BooleanGeometry"===r.geometry.type&&"Mesh"===n.type&&(n.visible=!0!==ds(n).booleanExclude)}})}(e),e.schema=26),t<27&&(function T3e(e){e.scene.objects.traverse((t,n)=>{if("Mesh"===n.type){let i=n;"NonParametricGeometry"===n.geometry.type?void 0!==i.material&&delete i.material:void 0!==i.materials&&delete i.materials}})}(e),e.schema=27),t<28&&(Oq(e),e.schema=28),t<29&&(function I3e(e){function t(i){Object.setPrototypeOf(i,Ss.prototype),i.texture&&Object.setPrototypeOf(i.texture,Ss.prototype)}function n(i){Object.setPrototypeOf(i,Ss.prototype);for(let r in i)t(i[r])}e.scene.objects.traverse((i,r)=>{r.states.forEach(o=>{let s=o;if(s.material){let a=ds(s.material).layers;n(a),s.material.layers=a}if(s.materials)for(let a=0;a<s.materials.length;a++){let l=s.materials[a],c=ds(l).layers;n(c),l.layers=c}})})}(e),e.schema=29),t<30&&(function Y3e(e){e.scene.objects.traverse((t,n)=>{"Mesh"===n.type&&"NonParametricGeometry"===n.geometry.type&&!("material"in n)&&!("materials"in n)&&(n.material=Sa.defaultTwoLayerData("phong"))})}(e),e.schema=30),t<31&&(function X3e(e){void 0===e.scene.publish.orbitControls.autoZoom&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,n)=>{("OrthographicCamera"===n.type||"PerspectiveCamera"===n.type)&&(void 0===n.orthographic.autoZoom&&(n.orthographic.autoZoom=!1),void 0===n.orthographic.autoZoomFrustumSize&&(n.orthographic.autoZoomFrustumSize=790))})}(e),e.schema=31),t<33&&(function $3e(e){e.scene.objects.traverse((t,n)=>{void 0===n.pathSnapping&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),void 0===n.pathSnapping.offset&&(n.pathSnapping.offset=0)})}(e),e.schema=33),t<34&&(function Q3e(e){void 0===e.scene.publish.mouseEventTarget&&(e.scene.publish.mouseEventTarget="canvas"),void 0===e.scene.publish.settings.web.hint&&(e.scene.publish.settings.web.hint=!1)}(e),e.schema=34),t<35&&(function K3e(e){let{video:t}=e.scene.publish.settings;"gif"===t.format&&t.fps>48&&(t.fps=15)}(e),e.schema=35),t<36&&(function Z3e(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}(e),e.schema=36),t<37&&(function J3e(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((n,i)=>{i.collision=(!t||null!==i.physics)&&"visibility"})}(e),e.schema=37),t<38&&(yf(e,Pq),vf(e,Pq),e.schema=38),t<39&&(function eIe(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.navmesh=IP.defaultDataThirdPerson.navmesh)})})}(e),e.schema=39),t<40&&(function tIe(e){e.scene.styles||(e.scene.styles=cg.defaultData())}(e),e.schema=40),t<41&&(function nIe(e){void 0===e.scene.environment.ambientLight.occlusion&&(e.scene.environment.ambientLight.occlusion=!1),void 0===e.scene.environment.ambientLight.aoFullRes&&(e.scene.environment.ambientLight.aoFullRes=!1),void 0===e.scene.environment.ambientLight.radius&&(e.scene.environment.ambientLight.radius=256),void 0===e.scene.environment.ambientLight.bias&&(e.scene.environment.ambientLight.bias=.5),void 0===e.scene.environment.ambientLight.aoColor&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),yf(e,Eq),vf(e,Eq)}(e),e.schema=41),t<42&&(function iIe(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&Object.assign(i.gameActions,{run:new Gn})})})}(e),e.schema=42),t<43&&(function rIe(e){e.scene.objects.traverse((t,n)=>{n.events.forEach(i=>{"GameControl"===i.type&&(i.keyAssignments=[...i.keyAssignments,["run","\u21e7"],["none","Ctrl"]])})})}(e),e.schema=43),t<99){yf(e,Dq),vf(e,Dq),null===e.scene.publish.playCamera&&(e.scene.publish.playCamera=Lv);let n=ds(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=p_,i.insertBefore(null,null,[{id:p_,data:{...Hv.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Ph(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Ph(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...jv.defaultData,...Ph(e.scene.environment,"usePhysics","gravity")},camera:ds(e.scene.ownerCamera)??Hv.defaultData.camera,name:"Scene"},children:[]}]);for(let s of n)s.id!==dg.TRASH_CAN_ID&&i.move(p_,s.fi,s.id);let r=0,o=0;e.shared.penumbraSize&&e.scene.objects.traverse((s,a)=>{"DirectionalLight"===a.type?(a.penumbraSize=e.shared.penumbraSize[Math.min(r,2)],r+=1):"SpotLight"===a.type&&(a.penumbraSize=e.shared.penumbraSize[3+Math.min(o,1)],o+=1),null==a.physics&&"Instance"!==a.type&&(a.physics={},Object.assign(a.physics,Uv.defaultData)),null!=a.physics&&(a.physics.enabled=a.collision??"visibility",delete a.collision)}),e.schema=99}}(e,t),t<100&&(void 0===e.scene.publish.joystickSizeAndXYOffset&&(e.scene.publish.joystickSizeAndXYOffset=gf.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(yf(e,Aq),vf(e,Aq),e.schema=101),t<102&&(function sIe(e){e.scene.objects.traverse((t,n)=>{let i=n.geometry;i&&"PathGeometry"===i.type&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,"Custom"===i.extrusion.shape.type&&(i.extrusion.shape.shapeQuality="low"))})}(e),e.schema=102),t<104&&(e.shared.catelogs=new ii,e.shared.lib=Yu.defaultData(),e.schema=104),t<105&&(function lIe(e){e.shared.variables=Gc({},ii.prototype)}(e),e.scene.objects.traverse((n,i)=>{Iq(i)}),e.schema=105);for(let n of Object.values(e.shared.lib.components))dIe(n);t<106&&(function cIe(e){let t=ds(e.shared.variables);e.shared.variables=Gc(Object.entries(t??{}).map(([n,i],r)=>({fi:r,id:n,data:i})),Gn.prototype)}(e),e.schema=106),t<107&&(e.shared.lib.variables=Yu.defaultData().variables,e.schema=107),t<109&&(function hIe(e){e.shared.particles=Gc({},ii.prototype),e.shared.lib&&(e.shared.lib.particles=Yu.defaultData().particles)}(e),e.schema=109),t<110&&(function uIe(e){e.scene.objects.traverse((t,n)=>{"Particle"===n.type&&"number"==typeof n.renderMaterial.size&&Object.assign(n.renderMaterial,{size:[n.renderMaterial.size,n.renderMaterial.size]})})}(e),e.schema=110),t<111&&(e.scene.objects.traverse((n,i)=>{!function aIe(e){Array.isArray(ds(e.events))&&e.events?.forEach(t=>{"disabled"in t||(t.disabled=!1),("MouseDown"===t.type||"MouseUp"===t.type||"MousePress"===t.type)&&(t.mode=t.mode||"Object")})}(i)}),e.schema=111),t<112&&(function pIe(e){e.scene.objects.traverse((t,n)=>{"Page"===n.type&&(n.postprocessing.depthOfField.focusDistance=100,n.postprocessing.depthOfField.focalLength=20,n.postprocessing.depthOfField.bokehScale=5)})}(e),e.schema=112),t<113&&(function fIe(e){e.scene.objects.traverse((t,n)=>{!1!==Array.isArray(ds(n.events))&&n.events?.forEach(i=>{let r=i.runMode;"MouseDown"===i.type||"MouseUp"===i.type||"KeyDown"===i.type||"KeyUp"===i.type||"Collision"===i.type||"Trigger"===i.type?i.actions?.forEach(o=>{"Transition"===o.type&&(o.runMode=r??"Repeat"),("Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Toggle"===r?"Toggle":"Normal")}):"MouseHover"===i.type||"MousePress"===i.type||"KeyPress"===i.type?i.actions?.forEach(o=>{("Transition"===o.type||"Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Toggle")}):"GameControl"===i.type?(delete i.actions,Object.keys(i.gameActions).forEach(o=>{i.gameActions[o]?.forEach(s=>{"Transition"===s.type&&(s.runMode="Repeat"),"Animation"===s.type&&(s.runMode="Normal")})})):"DragDrop"===i.type?(delete i.actions,i.dragDropActions?.drag?.forEach(o=>{("Transition"===o.type||"Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Toggle")}),i.dragDropActions?.drop?.forEach(o=>{("Transition"===o.type||"Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Toggle")})):"Resize"===i.type?(delete i.actions,i.breakpoints?.forEach(o=>{o.actions?.forEach(s=>{("Transition"===s.type||"Animation"===s.type||"SwitchCamera"===s.type)&&(s.runMode="Toggle")})})):"Start"===i.type?i.actions?.forEach(o=>{"Transition"===o.type&&(o.runMode="Once"),("Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Normal")}):"VariableChange"===i.type||"Scroll"===i.type?i.actions?.forEach(o=>{"Transition"===o.type&&(o.runMode="Repeat"),("Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Normal")}):"Conditional"===i.type&&(delete i.actions,i.inActions?.forEach(o=>{"Transition"===o.type&&(o.runMode="Repeat"),("Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Normal")}),i.outActions?.forEach(o=>{"Transition"===o.type&&(o.runMode="Repeat"),("Animation"===o.type||"SwitchCamera"===o.type)&&(o.runMode="Normal")}))})})}(e),e.schema=113),t<114&&(void 0===e.scene.publish.settings.web.imageQuality&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(function mIe(e){e.shared.userAPIs=Gc({},ii.prototype),e.shared.userWebhooks=Gc({},ii.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Yu.defaultData().userAPIs,e.shared.lib.userWebhooks=Yu.defaultData().userWebhooks)}(e),e.schema=115)}}function pg(e,t=!1){let n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),r=new Set(Object.keys(e[0].morphAttributes)),o={},s={},a=e[0].morphTargetsRelative,l=new Xn,c=0;for(let d=0;d<e.length;++d){let h=e[d],p=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let g in h.attributes){if(!i.has(g))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+g+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[g]&&(o[g]=[]),o[g].push(h.attributes[g]),p++}if(p!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let g in h.morphAttributes){if(!r.has(g))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[g]&&(s[g]=[]),s[g].push(h.morphAttributes[g])}if(t){let g;if(n)g=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;g=h.attributes.position.count}l.addGroup(c,g,d),c+=g}}if(n){let d=0,h=[];for(let p=0;p<e.length;++p){let g=e[p].index;for(let v=0;v<g.count;++v)h.push(g.getX(v)+d);d+=e[p].attributes.position.count}l.setIndex(h)}for(let d in o){let h=Bq(o[d]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,h)}for(let d in s){let h=s[d][0].length;if(0===h)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let p=0;p<h;++p){let g=[];for(let y=0;y<s[d].length;++y)g.push(s[d][y][p]);let v=Bq(g);if(!v)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(v)}}return l}function Bq(e){let t,n,i,r=0;for(let a=0;a<e.length;++a){let l=e[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let o=new t(r),s=0;for(let a=0;a<e.length;++a)o.set(e[a].array,s),s+=e[a].array.length;return new ui(o,n,i)}(e=>{e.defaultData={schema:Xu,scene:dg.defaultData,frames:(new ii).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",g_.defaultData),shared:{...qc.emptyData(),colors:qc.defaultColors()}},e.emptyDataForImports=function(){let o=dg.emptyDataWithPage();return{schema:Xu,scene:o,frames:(new ii).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",g_.defaultData),shared:{...qc.emptyData(),colors:qc.defaultColors(),images:qc.defaultImages()}}},e.emptyData=function(){return{schema:Xu,scene:dg.emptyDataWithPage(),frames:(new ii).add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",g_.defaultData),shared:qc.emptyData()}},e.clipboard2dData=function(){return{schema:Xu,scene:dg.emptyData(),frames:new ii,shared:qc.emptyData()}},e.collabHelper={...H3,updateSchema:o=>(o.schema??0)<Xu?h_(o,Rq):(o.schema??0)-Xu},e.updateSchemaDirectly=function t(o){let s=e.collabHelper.updateSchema(o);return"number"==typeof s?0===s?o:null:s.data},e.withoutLib=function n(o){return{...o,shared:{...o.shared,lib:Yu.defaultData()}}},e.getComponentData=function i(o,s){let a=o.scene.objects.get(s);if(a&&"Component"===a.data.type)return a;{let l=o.shared.lib.components[s];if(l)return l.asset}},e.hasSensitiveData=function r(o){let s=Object.values(o.shared.userAPIs);for(let a of s){let l=a.headers;for(let c of l)if("authorization"===c.data.key.toLowerCase()&&""!==c.data.value)return!0}return!1}})(kP||(kP={})),(e=>{e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"}})(FI||(FI={})),(e=>{e.is=function t(n){return!0}})(Nq||(Nq={})),(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]},e.merge=function t(i,r){return{position:r?.position??i.position,rotation:r?.rotation??i.rotation,scale:r?.scale??i.scale,shear:r?.shear??i.shear}},e.diff=function n(i,r){return qG({position:qu.isEqual(i.position,r.position)?void 0:r.position,rotation:i.rotation===r.rotation?void 0:r.rotation,scale:qu.isEqual(i.scale,r.scale)?void 0:r.scale,shear:i.shear&&r.shear&&qu.isEqual(i.shear,r.shear)?void 0:r.shear})}})(RP||(RP={})),(e=>{e.defaultData={horizontalConstraint:0,verticalConstraint:0}})(LI||(LI={})),(e=>{e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8}})(Fq||(Fq={})),(e=>{e.defaultData={opacity:1,fill:{color:Hr.fromHexAndA(gc,1),enabled:!0},stroke:{color:Hr.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:Hr.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:Hr.from0to1([0,0,0,1]),enabled:!1,spread:0}}})(NP||(NP={})),(e=>{e.newEmpty=function t(s,a){return{name:a}},e.patch=function r(s,a){if(void 0===a)return s;let l={...s};return Object.assign(l,RP.merge(l,a)),l=function n(s,a){if(void 0===a)return s;let l={...s},c=["width","height","cornerRadius"];for(let d of c)d in l&&d in a&&void 0!==a[d]&&Object.assign(l,{[d]:a[d]});return l}(l,a),l=function i(s,a){if(void 0===a)return s;let l={...s};return"fill"in l&&"fill"in a&&void 0!==a.fill&&Object.assign(l,{fill:{...l.fill,...a.fill}}),"stroke"in l&&"stroke"in a&&void 0!==a.stroke&&Object.assign(l,{stroke:{...l.stroke,...a.stroke}}),"layerBlur"in l&&"layerBlur"in a&&void 0!==a.layerBlur&&Object.assign(l,{layerBlur:{...l.layerBlur,...a.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in a&&void 0!==a.backgroundBlur&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...a.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in a&&void 0!==a.dropShadow&&Object.assign(l,{dropShadow:{...l.dropShadow,...a.dropShadow}}),"innerShadow"in l&&"innerShadow"in a&&void 0!==a.innerShadow&&Object.assign(l,{innerShadow:{...l.innerShadow,...a.innerShadow}}),l}(l,a),l},e.toOps=function o(s,a){let l,c=[];for(let[d,h]of Object.entries(a))"name"!==d&&(void 0===l&&(l={path:[],props:{},type:0},c.push(l)),l.props[d]=h);return c}})(hg||(hg={})),(e=>{e.defaultData={...RP.defaultData,...LI.defaultData,states:new Gn,events:new Gn,visible:!0,raycastLock:!1}})(v_||(v_={})),(e=>{e.defaultData={...v_.defaultData,...NP.defaultData}})(Wv||(Wv={})),(e=>{e.defaultData={cornerRadius:[0,0,0,0]}})(FP||(FP={})),(e=>{e.defaultData={...Wv.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"}})(BI||(BI={})),(e=>{e.defaultData={...Wv.defaultData,...FP.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"}})(y_||(y_={})),(e=>{e.defaultData={...Wv.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"}})(zI||(zI={})),(e=>{e.defaultData={...Wv.defaultData,type:"path2d",path:"",name:"Path"}})(UI||(UI={})),(e=>{e.is=function t(n){return"ellipse2d"===n.type||"rectangle2d"===n.type||"text2d"===n.type||"vector2d"===n.type||"path2d"===n.type}})(Lq||(Lq={})),(e=>{e.defaultData={...v_.defaultData,name:"Group",type:"group2d"}})(LP||(LP={})),(e=>{e.defaultData=()=>({...v_.defaultData,...FP.defaultData,...NP.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:Hr.fromHexAndA(4737101,1),enabled:!0},stroke:{color:Hr.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}})})(jI||(jI={})),(e=>{e.defaultData=function t(s){switch(s){case"rectangle2d":case"vector2d":return{...y_.defaultData};case"ellipse2d":return{...BI.defaultData};case"text2d":return{...zI.defaultData};case"path2d":return{...UI.defaultData};case"frame2d":return{...jI.defaultData()};case"group2d":return{...LP.defaultData}}},e.getPivot=function n(s){return"width"in s&&"height"in s?["number"==typeof s.width?.5*s.width:0,"number"==typeof s.height?.5*s.height:0]:[0,0]},e.isResizeable=function i(s){return"rectangle2d"===s.type||"ellipse2d"===s.type||"text2d"===s.type||"frame2d"===s.type},e.isAutoLayoutable=function r(s){return"frame2d"===s.type&&void 0!==s.autoLayout},e.hasCorners=function o(s){return"rectangle2d"===s.type||"frame2d"===s.type}})(ug||(ug={})),(e=>{e.defaultData={name:"UI",type:"scene2d",objects:new Ma},e.emptyData=function(){return{type:"scene2d",objects:new Ma}}})(VI||(VI={}));var gIe=Math.pow(2,-24),BP=class{constructor(){}};function Dh(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function zq(e){let t=-1,n=-1/0;for(let i=0;i<3;i++){let r=e[i+3]-e[i];r>n&&(n=r,t=i)}return t}function Uq(e,t){t.set(e)}function jq(e,t,n){let i,r;for(let o=0;o<3;o++){let s=o+3;i=e[o],r=t[o],n[o]=i<r?i:r,i=e[s],r=t[s],n[s]=i>r?i:r}}function zP(e,t,n){for(let i=0;i<3;i++){let r=t[e+2*i],o=t[e+2*i+1],s=r-o,a=r+o;s<n[i]&&(n[i]=s),a>n[i+3]&&(n[i+3]=a)}}function b_(e){let t=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return 2*(t*n+n*i+i*t)}function HI(e,t,n,i,r=null){let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0,h=1/0,p=1/0,g=1/0,v=-1/0,y=-1/0,b=-1/0,P=null!==r;for(let S=6*t,O=6*(t+n);S<O;S+=6){let A=e[S+0],H=e[S+1],U=A-H,X=A+H;U<o&&(o=U),X>l&&(l=X),P&&A<h&&(h=A),P&&A>v&&(v=A);let Y=e[S+2],Z=e[S+3],ee=Y-Z,oe=Y+Z;ee<s&&(s=ee),oe>c&&(c=oe),P&&Y<p&&(p=Y),P&&Y>y&&(y=Y);let ce=e[S+4],de=e[S+5],he=ce-de,Pe=ce+de;he<a&&(a=he),Pe>d&&(d=Pe),P&&ce<g&&(g=ce),P&&ce>b&&(b=ce)}i[0]=o,i[1]=s,i[2]=a,i[3]=l,i[4]=c,i[5]=d,P&&(r[0]=h,r[1]=p,r[2]=g,r[3]=v,r[4]=y,r[5]=b)}var xIe=(e,t)=>e.candidate-t.candidate,bf=new Array(32).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),UP=new Float32Array(6);var Ah=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let r=0,o=e.length;r<o;r++){let s=e[r][t];n=s<n?s:n,i=s>i?s:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let r=0,o=t.length;r<o;r++){let a=e.dot(t[r]);n=a<n?a:n,i=a>i?a:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};Ah.prototype.setFromBox=function(){let e=new te;return function(t,n){let i=n.min,r=n.max,o=1/0,s=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=i.x*a+r.x*(1-a),e.y=i.y*l+r.y*(1-l),e.z=i.z*c+r.z*(1-c);let d=t.dot(e);o=Math.min(d,o),s=Math.max(d,s)}this.min=o,this.max=s}}(),new Ah;var OIe=function(){let e=new te,t=new te,n=new te;return function(i,r,o){let a=e,c=t;n.subVectors(i.start,r.start),e.subVectors(i.end,i.start),t.subVectors(r.end,r.start);let y,b,d=n.dot(c),h=c.dot(a),p=c.dot(c),g=n.dot(a),v=a.dot(a)*p-h*h;y=0!==v?(d*h-g*p)/v:0,b=(d+y*h)/p,o.x=y,o.y=b}}(),GI=function(){let e=new Ue,t=new te,n=new te;return function(i,r,o,s){OIe(i,r,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1)return i.at(a,o),void r.at(l,s);if(a>=0&&a<=1)return r.at(l<0?0:1,s),void i.closestPointToPoint(s,!0,o);if(l>=0&&l<=1)return i.at(a<0?0:1,o),void r.closestPointToPoint(o,!0,s);{let c,d;c=a<0?i.start:i.end,d=l<0?r.start:r.end;let h=t,p=n;return i.closestPointToPoint(d,!0,t),r.closestPointToPoint(c,!0,n),h.distanceToSquared(d)<=p.distanceToSquared(c)?(o.copy(h),void s.copy(d)):(o.copy(c),void s.copy(p))}}}(),EIe=function(){let e=new te,t=new te,n=new Ll,i=new jc;return function(r,o){let{radius:s,center:a}=r,{a:l,b:c,c:d}=o;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,e).distanceTo(a)<=s||(i.start=l,i.end=d,i.closestPointToPoint(a,!0,e).distanceTo(a)<=s)||(i.start=c,i.end=d,i.closestPointToPoint(a,!0,e).distanceTo(a)<=s))return!0;let h=o.getPlane(n);if(Math.abs(h.distanceToPoint(a))<=s){let p=h.projectPoint(a,t);if(o.containsPoint(p))return!0}return!1}}();function qv(e){return Math.abs(e)<1e-15}var Qu=class extends wa{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new te),this.satBounds=new Array(4).fill().map(()=>new Ah),this.points=[this.a,this.b,this.c],this.sphere=new Fl,this.plane=new Ll,this.needsUpdate=!0}intersectsSphere(e){return EIe(e,this)}update(){let e=this.a,t=this.b,n=this.c,i=this.points,r=this.satAxes,o=this.satBounds,s=r[0],a=o[0];this.getNormal(s),a.setFromPoints(s,i);let l=r[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,i);let d=r[2],h=o[2];d.subVectors(t,n),h.setFromPoints(d,i);let p=r[3],g=o[3];p.subVectors(n,e),g.setFromPoints(p,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}};Qu.prototype.closestPointToSegment=function(){let e=new te,t=new te,n=new jc;return function(i,r=null,o=null){let c,{start:s,end:a}=i,l=this.points,d=1/0;for(let h=0;h<3;h++){let p=(h+1)%3;n.start.copy(l[h]),n.end.copy(l[p]),GI(n,i,e,t),c=e.distanceToSquared(t),c<d&&(d=c,r&&r.copy(e),o&&o.copy(t))}return this.closestPointToPoint(s,e),c=s.distanceToSquared(e),c<d&&(d=c,r&&r.copy(e),o&&o.copy(s)),this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<d&&(d=c,r&&r.copy(e),o&&o.copy(a)),Math.sqrt(d)}}(),Qu.prototype.intersectsTriangle=function(){let e=new Qu,t=new Array(3),n=new Array(3),i=new Ah,r=new Ah,o=new te,s=new te,a=new te,l=new te,c=new jc,d=new jc,h=new jc;return function(p,g=null,v=!1){this.needsUpdate&&this.update(),p.isExtendedTriangle?p.needsUpdate&&p.update():(e.copy(p),e.update(),p=e);let y=this.plane,b=p.plane;if(Math.abs(y.normal.dot(b.normal))>1-1e-10){let P=this.satBounds,S=this.satAxes;n[0]=p.a,n[1]=p.b,n[2]=p.c;for(let H=0;H<4;H++){let U=P[H];if(i.setFromPoints(S[H],n),U.isSeparated(i))return!1}let O=p.satBounds,A=p.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let H=0;H<4;H++){let U=O[H];if(i.setFromPoints(A[H],t),U.isSeparated(i))return!1}for(let H=0;H<4;H++){let U=S[H];for(let X=0;X<4;X++)if(o.crossVectors(U,A[X]),i.setFromPoints(o,t),r.setFromPoints(o,n),i.isSeparated(r))return!1}return g&&(v||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),g.start.set(0,0,0),g.end.set(0,0,0)),!0}{let P=this.points,S=!1,O=0;for(let de=0;de<3;de++){let he=P[de],Pe=P[(de+1)%3];c.start.copy(he),c.end.copy(Pe),c.delta(s);let we=S?d.start:d.end,_e=qv(b.distanceToPoint(he));if(qv(b.normal.dot(s))&&_e){d.copy(c),O=2;break}if((b.intersectLine(c,we)||_e)&&!qv(we.distanceTo(Pe))){if(O++,S)break;S=!0}}if(1===O&&p.containsPoint(d.end))return g&&(g.start.copy(d.end),g.end.copy(d.end)),!0;if(2!==O)return!1;let A=p.points,H=!1,U=0;for(let de=0;de<3;de++){let he=A[de],Pe=A[(de+1)%3];c.start.copy(he),c.end.copy(Pe),c.delta(a);let we=H?h.start:h.end,_e=qv(y.distanceToPoint(he));if(qv(y.normal.dot(a))&&_e){h.copy(c),U=2;break}if((y.intersectLine(c,we)||_e)&&!qv(we.distanceTo(Pe))){if(U++,H)break;H=!0}}if(1===U&&this.containsPoint(h.end))return g&&(g.start.copy(h.end),g.end.copy(h.end)),!0;if(2!==U)return!1;if(d.delta(s),h.delta(a),s.dot(a)<0){let de=h.start;h.start=h.end,h.end=de}let X=d.start.dot(s),Y=d.end.dot(s),Z=h.start.dot(s),ee=h.end.dot(s),oe=Y<Z,ce=X<ee;return(X===ee||Z===Y||oe!==ce)&&(g&&(l.subVectors(d.start,h.start),l.dot(s)>0?g.start.copy(d.start):g.start.copy(h.start),l.subVectors(d.end,h.end),l.dot(s)<0?g.end.copy(d.end):g.end.copy(h.end)),!0)}}}(),Qu.prototype.distanceToPoint=function(){let e=new te;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Qu.prototype.distanceToTriangle=function(){let e=new te,t=new te,n=["a","b","c"],i=new jc,r=new jc;return function(o,s=null,a=null){let l=s||a?i:null;if(this.intersectsTriangle(o,l))return(s||a)&&(s&&l.getCenter(s),a&&l.getCenter(a)),0;let c=1/0;for(let d=0;d<3;d++){let h,p=n[d],g=o[p];this.closestPointToPoint(g,e),h=g.distanceToSquared(e),h<c&&(c=h,s&&s.copy(e),a&&a.copy(g));let v=this[p];o.closestPointToPoint(v,e),h=v.distanceToSquared(e),h<c&&(c=h,s&&s.copy(v),a&&a.copy(e))}for(let d=0;d<3;d++){i.set(this[n[d]],this[n[(d+1)%3]]);for(let g=0;g<3;g++){r.set(o[n[g]],o[n[(g+1)%3]]),GI(i,r,e,t);let b=e.distanceToSquared(t);b<c&&(c=b,s&&s.copy(e),a&&a.copy(t))}}return Math.sqrt(c)}}();var Th=class{constructor(e,t,n){this.isOrientedBox=!0,this.min=new te,this.max=new te,this.matrix=new qt,this.invMatrix=new qt,this.points=new Array(8).fill().map(()=>new te),this.satAxes=new Array(3).fill().map(()=>new te),this.satBounds=new Array(3).fill().map(()=>new Ah),this.alignedSatBounds=new Array(3).fill().map(()=>new Ah),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Th.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let d=0;d<=1;d++){let p=i[1*l|2*c|4*d];p.x=l?n.x:t.x,p.y=c?n.y:t.y,p.z=d?n.z:t.z,p.applyMatrix4(e)}let r=this.satBounds,o=this.satAxes,s=i[0];for(let l=0;l<3;l++){let c=o[l],d=r[l];c.subVectors(s,i[1<<l]),d.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},Th.prototype.intersectsBox=function(){let e=new Ah;return function(t){this.needsUpdate&&this.update();let n=t.min,i=t.max,r=this.satBounds,o=this.satAxes,s=this.alignedSatBounds;if(e.min=n.x,e.max=i.x,s[0].isSeparated(e)||(e.min=n.y,e.max=i.y,s[1].isSeparated(e))||(e.min=n.z,e.max=i.z,s[2].isSeparated(e)))return!1;for(let a=0;a<3;a++){let c=r[a];if(e.setFromBox(o[a],t),c.isSeparated(e))return!1}return!0}}(),Th.prototype.intersectsTriangle=function(){let e=new Qu,t=new Array(3),n=new Ah,i=new Ah,r=new te;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let s=this.satBounds,a=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let h=0;h<3;h++){let p=s[h];if(n.setFromPoints(a[h],t),p.isSeparated(n))return!1}let l=o.satBounds,c=o.satAxes,d=this.points;for(let h=0;h<3;h++){let p=l[h];if(n.setFromPoints(c[h],d),p.isSeparated(n))return!1}for(let h=0;h<3;h++){let p=a[h];for(let g=0;g<4;g++)if(r.crossVectors(p,c[g]),n.setFromPoints(r,t),i.setFromPoints(r,d),n.isSeparated(i))return!1}return!0}}(),Th.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},Th.prototype.distanceToPoint=function(){let e=new te;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Th.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new jc),n=new Array(12).fill().map(()=>new jc),i=new te,r=new te;return function(o,s=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(a||l)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;let c=s*s,d=o.min,h=o.max,p=this.points,g=1/0;for(let y=0;y<8;y++){let b=p[y];r.copy(b).clamp(d,h);let P=b.distanceToSquared(r);if(P<g&&(g=P,a&&a.copy(b),l&&l.copy(r),P<c))return Math.sqrt(P)}let v=0;for(let y=0;y<3;y++)for(let b=0;b<=1;b++)for(let P=0;P<=1;P++){let S=(y+1)%3,O=(y+2)%3;t[v].set(p[b<<S|P<<O],p[1<<y|b<<S|P<<O]);let Y=e[y],Z=e[S],ee=e[O],oe=n[v],ce=oe.start,de=oe.end;ce[Y]=d[Y],ce[Z]=b?d[Z]:h[Z],ce[ee]=P?d[ee]:h[Z],de[Y]=h[Y],de[Z]=b?d[Z]:h[Z],de[ee]=P?d[ee]:h[Z],v++}for(let y=0;y<=1;y++)for(let b=0;b<=1;b++)for(let P=0;P<=1;P++){r.x=y?h.x:d.x,r.y=b?h.y:d.y,r.z=P?h.z:d.z,this.closestPointToPoint(r,i);let S=r.distanceToSquared(i);if(S<g&&(g=S,a&&a.copy(i),l&&l.copy(r),S<c))return Math.sqrt(S)}for(let y=0;y<12;y++){let b=t[y];for(let P=0;P<12;P++){GI(b,n[P],i,r);let O=i.distanceToSquared(r);if(O<g&&(g=O,a&&a.copy(i),l&&l.copy(r),O<c))return Math.sqrt(O)}}return Math.sqrt(g)}}();var Yv=new te,Xv=new te,$v=new te,jP=new Ue,VP=new Ue,HP=new Ue,Vq=new te,Hq=new te,Gq=new te,GP=new te;function Wq(e,t,n,i,r){let o=3*i,s=e.index.getX(o),a=e.index.getX(o+1),l=e.index.getX(o+2),{position:c,normal:d,uv:h,uv1:p}=e.attributes,g=function TIe(e,t,n,i,r,o,s,a,l){Yv.fromBufferAttribute(t,o),Xv.fromBufferAttribute(t,s),$v.fromBufferAttribute(t,a);let c=function AIe(e,t,n,i,r,o){let s;return s=1===o?e.intersectTriangle(i,n,t,!0,r):e.intersectTriangle(t,n,i,2!==o,r),null===s?null:{distance:e.origin.distanceTo(r),point:r.clone()}}(e,Yv,Xv,$v,GP,l);if(c){i&&(jP.fromBufferAttribute(i,o),VP.fromBufferAttribute(i,s),HP.fromBufferAttribute(i,a),c.uv=wa.getInterpolation(GP,Yv,Xv,$v,jP,VP,HP,new Ue)),r&&(jP.fromBufferAttribute(r,o),VP.fromBufferAttribute(r,s),HP.fromBufferAttribute(r,a),c.uv1=wa.getInterpolation(GP,Yv,Xv,$v,jP,VP,HP,new Ue)),n&&(Vq.fromBufferAttribute(n,o),Hq.fromBufferAttribute(n,s),Gq.fromBufferAttribute(n,a),c.normal=wa.getInterpolation(GP,Yv,Xv,$v,Vq,Hq,Gq,new te),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let d={a:o,b:s,c:a,normal:new te,materialIndex:0};wa.getNormal(Yv,Xv,$v,d.normal),c.face=d,c.faceIndex=o}return c}(n,c,d,h,p,s,a,l,t);return g?(g.faceIndex=i,r&&r.push(g),g):null}function Ih(e,t,n,i){let r=e.a,o=e.b,s=e.c,a=t,l=t+1,c=t+2;n&&(a=n.getX(t),l=n.getX(t+1),c=n.getX(t+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),o.x=i.getX(l),o.y=i.getY(l),o.z=i.getZ(l),s.x=i.getX(c),s.y=i.getY(c),s.z=i.getZ(c)}function qq(e,t,n,i,r,o,s){let a=n.index,l=n.attributes.position;for(let c=e,d=t+e;c<d;c++)if(Ih(s,3*c,a,l),s.needsUpdate=!0,i(s,c,r,o))return!0;return!1}var Yq=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function _f(e,t){return 65535===t[e+15]}function Qv(e,t){return t[e+6]}function __(e,t){return t[e+14]}function x_(e){return e+8}function C_(e,t){return t[e+6]}var Kv=new ls,WP=new te,NIe=["x","y","z"];function WI(e,t,n,i,r){let o=2*e,s=Zv,a=xf,l=Cf;if(_f(o,a))!function IIe(e,t,n,i,r,o){for(let s=i,a=i+r;s<a;s++)Wq(e,t,n,s,o)}(t,n,i,Qv(e,l),__(o,a),r);else{let c=x_(e);qP(c,s,i,WP)&&WI(c,t,n,i,r);let d=C_(e,l);qP(d,s,i,WP)&&WI(d,t,n,i,r)}}function qI(e,t,n,i){let r=2*e,o=Zv,s=xf,a=Cf;if(_f(r,s))return function kIe(e,t,n,i,r){let o=1/0,s=null;for(let a=i,l=i+r;a<l;a++){let c=Wq(e,t,n,a);c&&c.distance<o&&(s=c,o=c.distance)}return s}(t,n,i,Qv(e,a),__(r,s));{let h,p,l=function RIe(e,t){return t[e+7]}(e,a),c=NIe[l],d=i.direction[c]>=0;d?(h=x_(e),p=C_(e,a)):(h=C_(e,a),p=x_(e));let g=qP(h,o,i,WP)?qI(h,t,n,i):null;if(g){let y=g.point[c];if(d?y<=o[p+l]:y>=o[p+l+3])return g}let v=qP(p,o,i,WP)?qI(p,t,n,i):null;return g&&v?g.distance<=v.distance?g:v:g||v||null}}var FIe=function(){let e,t,n=[],i=new Yq(()=>new ls);return function(...o){e=i.getPrimitive(),t=i.getPrimitive(),n.push(e,t);let s=r(...o);i.releasePrimitive(e),i.releasePrimitive(t),n.pop(),n.pop();let a=n.length;return a>0&&(t=n[a-1],e=n[a-2]),s};function r(o,s,a,l,c=null,d=0,h=0){function p(S){let O=2*S,A=xf,H=Cf;for(;!_f(O,A);)O=2*(S=x_(S));return Qv(S,H)}function g(S){let O=2*S,A=xf,H=Cf;for(;!_f(O,A);)O=2*(S=C_(S,H));return Qv(S,H)+__(O,A)}let v=2*o,y=Zv,b=xf,P=Cf;if(_f(v,b)){let S=Qv(o,P),O=__(v,b);return Dh(o,y,e),l(S,O,!1,h,d+o,e)}{let U,X,Y,Z,S=x_(o),O=C_(o,P),A=S,H=O;if(c&&(Y=e,Z=t,Dh(A,y,Y),Dh(H,y,Z),U=c(Y),X=c(Z),X<U)){A=O,H=S;let we=U;U=X,X=we,Y=Z}Y||(Y=e,Dh(A,y,Y));let ce,oe=a(Y,_f(2*A,b),U,h+1,d+A);if(2===oe){let we=p(A);ce=l(we,g(A)-we,!0,h+1,d+A,Y)}else ce=oe&&r(A,s,a,l,c,d,h+1);if(ce)return!0;Z=t,Dh(H,y,Z);let Pe,he=a(Z,_f(2*H,b),X,h+1,d+H);if(2===he){let we=p(H);Pe=l(we,g(H)-we,!0,h+1,d+H,Z)}else Pe=he&&r(H,s,a,l,c,d,h+1);return!!Pe}}}(),LIe=function(){let e=new Qu,t=new Qu,n=new qt,i=new Th,r=new Th;return function o(s,a,l,c,d=null){let h=2*s,p=Zv,g=xf,v=Cf;if(null===d&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),d=i),!_f(h,g)){let y=s+8,b=v[s+6];return Dh(y,p,Kv),!!(d.intersectsBox(Kv)&&o(y,a,l,c,d)||(Dh(b,p,Kv),d.intersectsBox(Kv)&&o(b,a,l,c,d)))}{let b=a.index,P=a.attributes.position,S=l.index,O=l.attributes.position,A=Qv(s,v),H=__(h,g);if(n.copy(c).invert(),l.boundsTree)return Dh(s,p,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:U=>r.intersectsBox(U),intersectsTriangle:U=>{U.a.applyMatrix4(c),U.b.applyMatrix4(c),U.c.applyMatrix4(c),U.needsUpdate=!0;for(let X=3*A,Y=3*(H+A);X<Y;X+=3)if(Ih(t,X,b,P),t.needsUpdate=!0,U.intersectsTriangle(t))return!0;return!1}});for(let U=3*A,X=H+3*A;U<X;U+=3){Ih(e,U,b,P),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(let Y=0,Z=S.count;Y<Z;Y+=3)if(Ih(t,Y,S,O),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}}();function qP(e,t,n,i){return Dh(e,t,Kv),n.intersectBox(Kv,i)}var YP,Zv,xf,Cf,YI=[];function w_(e){YP&&YI.push(YP),YP=e,Zv=new Float32Array(e),xf=new Uint16Array(e),Cf=new Uint32Array(e)}function XP(){YP=null,Zv=null,xf=null,Cf=null,YI.length&&w_(YI.pop())}var XI=Symbol("skip tree generation"),$I=new ls,QI=new ls,Jv=new qt,fg=new Th,M_=new Th,P_=new te,$P=new te,BIe=new te,zIe=new te,UIe=new te,Xq=new ls,kh=new Yq(()=>new Qu),S_=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),S_.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t={cloneBuffers:!0,...t};let o,i=e._roots,r=e.geometry.getIndex();return o=t.cloneBuffers?{roots:i.map(s=>s.slice()),index:r.array.slice()}:{roots:i,index:r.array},o}static deserialize(e,t,n={}){if("boolean"==typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),S_.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};let{index:i,roots:r}=e,o=new S_(t,{...n,[XI]:!0});if(o._roots=r,n.setIndex){let s=t.getIndex();if(null===s){let a=new ui(e.index,1,!1);t.setIndex(a)}else s.array!==i&&(s.array.set(i),s.needsUpdate=!0)}return o}constructor(e,t={}){if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if((t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[XI]:!1},t)).useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[XI]||(this._roots=function SIe(e,t){let i,r,o,n=function PIe(e,t){function n(P){p&&p(P/g)}function i(P,S,O,A=null,H=0){if(!v&&H>=l&&(v=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),O<=d||H>=l)return n(S+O),P.offset=S,P.count=O,P;let U=function CIe(e,t,n,i,r,o){let s=-1,a=0;if(0===o)s=zq(t),-1!==s&&(a=(t[s]+t[s+3])/2);else if(1===o)s=zq(e),-1!==s&&(a=function wIe(e,t,n,i){let r=0;for(let o=t,s=t+n;o<s;o++)r+=e[6*o+2*i];return r/n}(n,i,r,s));else if(2===o){let l=b_(e),c=1.25*r,d=6*i,h=6*(i+r);for(let p=0;p<3;p++){let g=t[p],v=(t[p+3]-g)/32;if(r<8){let y=[...bf];y.length=r;let b=0;for(let S=d;S<h;S+=6,b++){let O=y[b];O.candidate=n[S+2*p],O.count=0;let{bounds:A,leftCacheBounds:H,rightCacheBounds:U}=O;for(let X=0;X<3;X++)U[X]=1/0,U[X+3]=-1/0,H[X]=1/0,H[X+3]=-1/0,A[X]=1/0,A[X+3]=-1/0;zP(S,n,A)}y.sort(xIe);let P=r;for(let S=0;S<P;S++){let O=y[S];for(;S+1<P&&y[S+1].candidate===O.candidate;)y.splice(S+1,1),P--}for(let S=d;S<h;S+=6){let O=n[S+2*p];for(let A=0;A<P;A++){let H=y[A];O>=H.candidate?zP(S,n,H.rightCacheBounds):(zP(S,n,H.leftCacheBounds),H.count++)}}for(let S=0;S<P;S++){let O=y[S],A=O.count,H=r-O.count,U=O.leftCacheBounds,X=O.rightCacheBounds,Y=0;0!==A&&(Y=b_(U)/l);let Z=0;0!==H&&(Z=b_(X)/l);let ee=1+1.25*(Y*A+Z*H);ee<c&&(s=p,c=ee,a=O.candidate)}}else{for(let P=0;P<32;P++){let S=bf[P];S.count=0,S.candidate=g+v+P*v;let O=S.bounds;for(let A=0;A<3;A++)O[A]=1/0,O[A+3]=-1/0}for(let P=d;P<h;P+=6){let S=~~((n[P+2*p]-g)/v);S>=32&&(S=31);let O=bf[S];O.count++,zP(P,n,O.bounds)}let y=bf[31];Uq(y.bounds,y.rightCacheBounds);for(let P=30;P>=0;P--){let S=bf[P];jq(S.bounds,bf[P+1].rightCacheBounds,S.rightCacheBounds)}let b=0;for(let P=0;P<31;P++){let S=bf[P],O=S.count,A=S.bounds,H=bf[P+1].rightCacheBounds;0!==O&&(0===b?Uq(A,UP):jq(A,UP,UP)),b+=O;let U=0,X=0;0!==b&&(U=b_(UP)/l);let Y=r-b;0!==Y&&(X=b_(H)/l);let Z=1+1.25*(U*b+X*Y);Z<c&&(s=p,c=Z,a=S.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:a}}(P.boundingData,A,s,S,O,h);if(-1===U.axis)return n(S+O),P.offset=S,P.count=O,P;let X=function _Ie(e,t,n,i,r){let o=n,s=n+i-1,a=r.pos,l=2*r.axis;for(;;){for(;o<=s&&t[6*o+l]<a;)o++;for(;o<=s&&t[6*s+l]>=a;)s--;if(!(o<s))return o;for(let c=0;c<3;c++){let d=e[3*o+c];e[3*o+c]=e[3*s+c],e[3*s+c]=d;let h=t[6*o+2*c+0];t[6*o+2*c+0]=t[6*s+2*c+0],t[6*s+2*c+0]=h;let p=t[6*o+2*c+1];t[6*o+2*c+1]=t[6*s+2*c+1],t[6*s+2*c+1]=p}o++,s--}}(a,s,S,O,U);if(X===S||X===S+O)n(S+O),P.offset=S,P.count=O;else{P.splitAxis=U.axis;let Y=new BP,Z=S,ee=X-S;P.left=Y,Y.boundingData=new Float32Array(6),HI(s,Z,ee,Y.boundingData,o),i(Y,Z,ee,o,H+1);let oe=new BP,ce=X,de=O-ee;P.right=oe,oe.boundingData=new Float32Array(6),HI(s,ce,de,oe.boundingData,o),i(oe,ce,de,o,H+1)}return P}!function vIe(e,t){if(!e.index){let r,n=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;r=n>65535?new Uint32Array(new i(4*n)):new Uint16Array(new i(2*n)),e.setIndex(new ui(r,1));for(let o=0;o<n;o++)r[o]=o}}(e,t);let r=new Float32Array(6),o=new Float32Array(6),s=function MIe(e,t){let n=e.attributes.position,i=e.index.array,r=i.length/3,o=new Float32Array(6*r),s=n.normalized,a=n.array,l=n.offset||0,c=3;n.isInterleavedBufferAttribute&&(c=n.data.stride);let d=["getX","getY","getZ"];for(let h=0;h<r;h++){let v,y,b,p=3*h,g=6*h;s?(v=i[p+0],y=i[p+1],b=i[p+2]):(v=i[p+0]*c+l,y=i[p+1]*c+l,b=i[p+2]*c+l);for(let P=0;P<3;P++){let S,O,A;s?(S=n[d[P]](v),O=n[d[P]](y),A=n[d[P]](b)):(S=a[v+P],O=a[y+P],A=a[b+P]);let H=S;O<H&&(H=O),A<H&&(H=A);let U=S;O>U&&(U=O),A>U&&(U=A);let X=(U-H)/2,Y=2*P;o[g+Y+0]=H+X,o[g+Y+1]=X+(Math.abs(H)+X)*gIe,H<t[P]&&(t[P]=H),U>t[P+3]&&(t[P+3]=U)}}return o}(e,r),a=e.index.array,l=t.maxDepth,c=t.verbose,d=t.maxLeafTris,h=t.strategy,p=t.onProgress,g=e.index.count/3,v=!1,y=[],b=function yIe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],n=new Set;for(let r of e.groups)n.add(r.start),n.add(r.start+r.count);let i=Array.from(n.values()).sort((r,o)=>r-o);for(let r=0;r<i.length-1;r++){let o=i[r];t.push({offset:o/3,count:(i[r+1]-o)/3})}return t}(e);if(1===b.length){let P=b[0],S=new BP;S.boundingData=r,function bIe(e,t,n,i){let r=1/0,o=1/0,s=1/0,a=-1/0,l=-1/0,c=-1/0;for(let d=6*t,h=6*(t+n);d<h;d+=6){let p=e[d+0];p<r&&(r=p),p>a&&(a=p);let g=e[d+2];g<o&&(o=g),g>l&&(l=g);let v=e[d+4];v<s&&(s=v),v>c&&(c=v)}i[0]=r,i[1]=o,i[2]=s,i[3]=a,i[4]=l,i[5]=c}(s,P.offset,P.count,o),i(S,P.offset,P.count,o),y.push(S)}else for(let P of b){let S=new BP;S.boundingData=new Float32Array(6),HI(s,P.offset,P.count,S.boundingData,o),i(S,P.offset,P.count,o),y.push(S)}return y}(e,t),s=[],a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<n.length;d++){let h=n[d],g=new a(32*l(h));i=new Float32Array(g),r=new Uint32Array(g),o=new Uint16Array(g),c(0,h),s.push(g)}return s;function l(d){return d.count?1:1+l(d.left)+l(d.right)}function c(d,h){let p=d/4,g=d/2,v=!!h.count,y=h.boundingData;for(let b=0;b<6;b++)i[p+b]=y[b];if(v){let P=h.count;return r[p+6]=h.offset,o[g+14]=P,o[g+15]=65535,d+32}{let O,P=h.right,S=h.splitAxis;if(O=c(d+32,h.left),O/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[p+6]=O/4,O=c(O,P),r[p+7]=S,O}}}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ls))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let r,o,s,a,t=this.geometry,n=t.index.array,i=t.attributes.position,l=0,c=this._roots;for(let h=0,p=c.length;h<p;h++)r=c[h],o=new Uint32Array(r),s=new Uint16Array(r),a=new Float32Array(r),d(0,l),l+=r.byteLength;function d(h,p,g=!1){let v=2*h;if(65535===s[v+15]){let y=o[h+6],P=1/0,S=1/0,O=1/0,A=-1/0,H=-1/0,U=-1/0;for(let X=3*y,Y=3*(y+s[v+14]);X<Y;X++){let Z=n[X],ee=i.getX(Z),oe=i.getY(Z),ce=i.getZ(Z);ee<P&&(P=ee),ee>A&&(A=ee),oe<S&&(S=oe),oe>H&&(H=oe),ce<O&&(O=ce),ce>U&&(U=ce)}return(a[h+0]!==P||a[h+1]!==S||a[h+2]!==O||a[h+3]!==A||a[h+4]!==H||a[h+5]!==U)&&(a[h+0]=P,a[h+1]=S,a[h+2]=O,a[h+3]=A,a[h+4]=H,a[h+5]=U,!0)}{let y=h+8,b=o[h+6],P=y+p,S=b+p,O=g,A=!1,H=!1;e?O||(A=e.has(P),H=e.has(S),O=!A&&!H):(A=!0,H=!0);let X=O||H,Y=!1;(O||A)&&(Y=d(y,p,O));let Z=!1;X&&(Z=d(b,p,O));let ee=Y||Z;if(ee)for(let oe=0;oe<3;oe++){let ce=y+oe,de=b+oe,he=a[ce],Pe=a[ce+3],we=a[de],_e=a[de+3];a[h+oe]=he<we?he:we,a[h+oe+3]=Pe>_e?Pe:_e}return ee}}}traverse(e,t=0){let n=this._roots[t],i=new Uint32Array(n),r=new Uint16Array(n);!function o(s,a=0){let l=2*s,c=65535===r[l+15];if(c){let d=i[s+6],h=r[l+14];e(a,c,new Float32Array(n,4*s,6),d,h)}else{let d=s+8,h=i[s+6],p=i[s+7];e(a,c,new Float32Array(n,4*s,6),p)||(o(d,a+1),o(h,a+1))}}(0)}raycast(e,t=0){let n=this._roots,i=this.geometry,r=[],o=t.isMaterial,s=Array.isArray(t),a=i.groups,l=o?t.side:t;for(let c=0,d=n.length;c<d;c++){let h=s?t[a[c].materialIndex].side:l,p=r.length;if(w_(n[c]),WI(0,i,h,e,r),XP(),s){let g=a[c].materialIndex;for(let v=p,y=r.length;v<y;v++)r[v].face.materialIndex=g}}return r}raycastFirst(e,t=0){let n=this._roots,i=this.geometry,r=t.isMaterial,o=Array.isArray(t),s=null,a=i.groups,l=r?t.side:t;for(let c=0,d=n.length;c<d;c++){let h=o?t[a[c].materialIndex].side:l;w_(n[c]);let p=qI(0,i,h,e);XP(),null!=p&&(null==s||p.distance<s.distance)&&(s=p,o&&(p.face.materialIndex=a[c].materialIndex))}return s}intersectsGeometry(e,t){let n=this.geometry,i=!1;for(let r of this._roots)if(w_(r),i=LIe(0,n,e,t),XP(),i)break;return i}shapecast(e,t,n){let i=this.geometry;if(e instanceof Function){if(t){let h=t;t=(p,g,v,y)=>{let b=3*g;return h(p,b,b+1,b+2,v,y)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=kh.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:s,intersectsRange:a,intersectsTriangle:l}=e;if(a&&l){let h=a;a=(p,g,v,y,b)=>!!h(p,g,v,y,b)||qq(p,g,i,l,v,y,r)}else a||(a=l?(h,p,g,v)=>qq(h,p,i,l,g,v,r):(h,p,g)=>g);let c=!1,d=0;for(let h of this._roots){if(w_(h),c=FIe(0,i,s,a,o,d),XP(),c)break;d+=h.byteLength}return kh.releasePrimitive(r),c}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:r}=n,o=this.geometry.index,s=this.geometry.attributes.position,a=e.geometry.index,l=e.geometry.attributes.position;Jv.copy(t).invert();let c=kh.getPrimitive(),d=kh.getPrimitive();if(r){let p=function(g,v,y,b,P,S,O,A){for(let H=y,U=y+b;H<U;H++){Ih(d,3*H,a,l),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let X=g,Y=g+v;X<Y;X++)if(Ih(c,3*X,o,s),c.needsUpdate=!0,r(c,d,X,H,P,S,O,A))return!0}return!1};if(i){let g=i;i=function(v,y,b,P,S,O,A,H){return!!g(v,y,b,P,S,O,A,H)||p(v,y,b,P,S,O,A,H)}}else i=p}e.getBoundingBox(QI),QI.applyMatrix4(t);let h=this.shapecast({intersectsBounds:p=>QI.intersectsBox(p),intersectsRange:(p,g,v,y,b,P)=>($I.copy(P),$I.applyMatrix4(Jv),e.shapecast({intersectsBounds:S=>$I.intersectsBox(S),intersectsRange:(S,O,A,H,U)=>i(p,g,S,O,y,b,H,U)}))});return kh.releasePrimitive(c),kh.releasePrimitive(d),h}intersectsBox(e,t){return fg.set(e.min,e.max,t),fg.needsUpdate=!0,this.shapecast({intersectsBounds:n=>fg.intersectsBox(n),intersectsTriangle:n=>fg.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},r=0,o=1/0){e.boundingBox||e.computeBoundingBox(),fg.set(e.boundingBox.min,e.boundingBox.max,t),fg.needsUpdate=!0;let s=this.geometry,a=s.attributes.position,l=s.index,c=e.attributes.position,d=e.index,h=kh.getPrimitive(),p=kh.getPrimitive(),g=$P,v=BIe,y=null,b=null;i&&(y=zIe,b=UIe);let P=1/0,S=null,O=null;return Jv.copy(t).invert(),M_.matrix.copy(Jv),this.shapecast({boundsTraverseOrder:A=>fg.distanceToBox(A),intersectsBounds:(A,H,U)=>U<P&&U<o&&(H&&(M_.min.copy(A.min),M_.max.copy(A.max),M_.needsUpdate=!0),!0),intersectsRange:(A,H)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:U=>M_.distanceToBox(U),intersectsBounds:(U,X,Y)=>Y<P&&Y<o,intersectsRange:(U,X)=>{for(let Y=3*U,Z=3*(U+X);Y<Z;Y+=3){Ih(p,Y,d,c),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let ee=3*A,oe=3*(A+H);ee<oe;ee+=3){Ih(h,ee,l,a),h.needsUpdate=!0;let ce=h.distanceToTriangle(p,g,y);if(ce<P&&(v.copy(g),b&&b.copy(y),P=ce,S=ee/3,O=Y/3),ce<r)return!0}}}});for(let X=0,Y=d?d.count:c.count;X<Y;X+=3){Ih(p,X,d,c),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let Z=3*A,ee=3*(A+H);Z<ee;Z+=3){Ih(h,Z,l,a),h.needsUpdate=!0;let oe=h.distanceToTriangle(p,g,y);if(oe<P&&(v.copy(g),b&&b.copy(y),P=oe,S=Z/3,O=X/3),oe<r)return!0}}}}),kh.releasePrimitive(h),kh.releasePrimitive(p),P===1/0?null:(n.point?n.point.copy(v):n.point=v.clone(),n.distance=P,n.faceIndex=S,i&&(i.point?i.point.copy(b):i.point=b.clone(),i.point.applyMatrix4(Jv),v.applyMatrix4(Jv),i.distance=v.sub(i.point).length(),i.faceIndex=O),n)}closestPointToPoint(e,t={},n=0,i=1/0){let r=n*n,o=i*i,s=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(P_.copy(e).clamp(c.min,c.max),P_.distanceToSquared(e)),intersectsBounds:(c,d,h)=>h<s&&h<o,intersectsTriangle:(c,d)=>{c.closestPointToPoint(e,P_);let h=e.distanceToSquared(P_);return h<s&&($P.copy(P_),s=h,a=d),h<r}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy($P):t.point=$P.clone(),t.distance=l,t.faceIndex=a,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{Dh(0,new Float32Array(t),Xq),e.union(Xq)}),e}},O_=Eu(Fve()),jIe=.5*(Math.sqrt(3)-1),E_=(3-Math.sqrt(3))/6,Rh=1/6,D_=(Math.sqrt(5),Math.sqrt(5),e=>0|Math.floor(e)),$q=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),KI=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function ZI(e=Math.random){let t=Qq(e),n=new Float64Array(t).map(r=>$q[r%12*2]),i=new Float64Array(t).map(r=>$q[r%12*2+1]);return function(r,o){let P,S,s=0,a=0,l=0,c=(r+o)*jIe,d=D_(r+c),h=D_(o+c),p=(d+h)*E_,y=r-(d-p),b=o-(h-p);y>b?(P=1,S=0):(P=0,S=1);let O=y-P+E_,A=b-S+E_,H=y-1+2*E_,U=b-1+2*E_,X=255&d,Y=255&h,Z=.5-y*y-b*b;if(Z>=0){let ce=X+t[Y];Z*=Z,s=Z*Z*(n[ce]*y+i[ce]*b)}let ee=.5-O*O-A*A;if(ee>=0){let ce=X+P+t[Y+S];ee*=ee,a=ee*ee*(n[ce]*O+i[ce]*A)}let oe=.5-H*H-U*U;if(oe>=0){let ce=X+1+t[Y+1];oe*=oe,l=oe*oe*(n[ce]*H+i[ce]*U)}return 70*(s+a+l)}}function Qq(e){let t=new Uint8Array(512);for(let n=0;n<256;n++)t[n]=n;for(let n=0;n<255;n++){let i=n+~~(e()*(256-n)),r=t[n];t[n]=t[i],t[i]=r}for(let n=256;n<512;n++)t[n]=t[n-256];return t}var A_,Rd=new wa,WIe=Eu(ej()),qIe=new qt,YIe=new qt,XIe=new qt;(e=>{e.is=function t(n){return n&&n.__isSPEObject}})(A_||(A_={}));var dr,JI=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new qt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new qt,this.matrixWorldRigid=new qt,this.shearScale=new qt,this.shearScaleInv=new qt}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Fr&&(t=t.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===t)return!0;n=n.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let n of this.children)n.updateMatrixWorld(t)}updateWorldMatrix(t,n){let i=this.parent;if(t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseChildren(t,n=0){for(let i of this.children)A_.is(i)&&i.traverseObject(t,n+1)}traverseObject(t,n=0){if(!0!==t(this,n))for(let i of this.children)A_.is(i)&&i.traverseObject(t,n+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,n=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:r,q:o}=(0,WIe.SVD)(n),s=qIe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=YIe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=XIe.copy(a).transpose();this.shearScale.makeScale(o[0],o[1],o[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,l).copyPosition(this.matrixWorld),this.hasNonUniformScale=!o.every(c=>Math.abs(o[0]-c)<.01)}attach(t,n){this.updateWorldMatrix(!0,!1);let i=(new qt).copy(this.matrixWorld).invert();return null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof qt?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),void 0!==n&&(this.children.pop(),this.children.splice(n,0,t)),this}copy(t,n=!1){return super.copy(t,n),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,n,i,r,o,s){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},$Ie=class extends(JI(Fr)){},Qa=class extends $Ie{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let n=this.children[e];n?.object!==t&&(n&&this.remove(n),n=new Qa(t),this.add(n),this.children.splice(e,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=t.matrix,n.hiddenMatrix=t.hiddenMatrix),n.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){return void 0!==this.playModeVisible?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&!0===this.object.dataPatched.cloner?.hideBase}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return(e=>"Mesh"===this.object.type)()}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},mg=new te,gg=new te,e1=new qt,Kq=[new te(-1,1,1),new te(-1,-1,1),new te(1,-1,1),new te(1,1,1),new te(-1,1,-1),new te(-1,-1,-1),new te(1,-1,-1),new te(1,1,-1)],KIe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],ZIe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],Zq=(e,t,n)=>{e.updateEntityBoxSize(mg,gg),e1.copy(t).multiply(e.matrixWorld),0===gg.x&&0===gg.y&&0===gg.z?n.push(new te(mg.x,mg.y,mg.z).applyMatrix4(e1)):Kq.forEach(i=>{n.push(i.clone().multiply(gg).add(mg).applyMatrix4(e1))})},Jq=class extends ls{constructor(){super(...arguments),this.matrix=new qt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let n=(new qt).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let i=[];return!0===n?e.traverseEntity(r=>{if(r.visible||r.cloner&&r.data.visible){if(!("geometry"in r))return void i.push(new te);Zq(r,t,i)}}):Zq(e,t,i),this.setFromPoints(i)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(e1.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(gg).multiplyScalar(.5),this.getCenter(mg),e1.copy(this.matrix).setPosition(mg),this.vertices=Kq.map(e=>e.clone().multiply(gg).applyMatrix4(e1))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=KIe.map(([e,t])=>new jc(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new te))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=ZIe.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},wf={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},JIe=class extends XV{constructor(){super()}getPoints(e=12){let n,t=[],i=this.getCurveLengths(),r=i[i.length-1]/i.length;for(let o=0,s=this.curves;o<s.length;o++){let a=s[o],c=Math.ceil(e*(0===o?i[o]:i[o]-i[o-1])/r),d=a.getPoints(c);for(let h=0;h<d.length;h++){let p=d[h];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}};function tk(e,t,n){return t.clone().sub(e).cross(t.clone().sub(n)).length()<=.001}function nk(e,t){let n=new te(...e.position),i=new te(...e.controlNext.position),r=new te(...t.controlPrevious.position),o=new te(...t.position);return tk(n,i,o)&&tk(n,r,o)}function eY(e){let t=e.points.map(d=>new te(...d.data.position)),n=[e.points[0]],i=new te(...n[0].data.position);for(let d=0;d<e.points.length-1;d++)tk(i,t[d],t[d+1])||(n.push(e.points[d]),i=t[d]);n.push(e.points[e.points.length-1]);let r=e.isClosed,o=n.length-(r?0:1),s=n.length,a=[];for(let d=0;d<s;d++){let h=n[d].data,p=new te(...h.position),g=new te(...h.controlPrevious.position),v=new te(...h.controlNext.position),y={position:p,baseRoundness:h.roundness,controlPrevious:g,controlNext:v};if(0===h.roundness||!e.isClosed&&(0===d||d===s-1)){a[d]={...y,removedLength:0};continue}let S=n[r&&0==d?s-1:d-1].data,O=n[r&&d==s-1?0:d+1].data,A=new te(...S.position),H=new te(...O.position),U=A.clone().sub(p).normalize(),X=H.clone().sub(p).normalize();Object.assign(y,{prevDir:U,nextDir:X});let Y=nk(S,h),Z=nk(h,O);if(Y&&Z){let ee=U.clone().add(X).normalize(),oe=ee.clone().cross(U).length()/U.dot(ee);a[d]={...y,tan:oe,removedLength:h.roundness/oe}}else a[d]={...y,removedLength:0}}for(let d=0;d<o;d++){let g=a[d],v=a[r&&d===s-1?0:d+1];if(0!==g.removedLength||0!==v.removedLength){let y=g.position.distanceTo(v.position);g.removedLength=Math.min(g.removedLength,y/2),v.removedLength=Math.min(v.removedLength,y/2)}}let l=[];for(let d=0;d<o;d++){let p=r&&d===s-1?0:d+1,g=a[d],v=a[p],y=null;if(nk(n[d].data,n[p].data)){let b=g.position.clone(),P=v.position.clone();(0!==g.removedLength||0!==v.removedLength)&&(g.nextDir&&b.add(g.nextDir.clone().setLength(g.removedLength)),v.prevDir&&P.add(v.prevDir.clone().setLength(v.removedLength))),b.distanceTo(P)>.001&&(y=new wM(b,b.clone().lerp(P,.3),P.clone().lerp(b,.3),P))}else g.position.distanceTo(v.position)>.001&&(y=new wM(g.position,g.controlNext,v.controlPrevious,v.position));l[2*d+1]=y}for(let d=0;d<s;d++){let h=a[d];if(0===h.removedLength){l[2*d]=null;continue}let p=h.position,g=h.prevDir.clone().multiplyScalar(h.removedLength).add(p),v=h.nextDir.clone().multiplyScalar(h.removedLength).add(p),y=h.tan*h.removedLength,b=h.prevDir.clone().add(h.nextDir).normalize(),P=g.clone().lerp(v,.5),S=g.distanceTo(v)/2,O=b.clone().multiplyScalar(Math.sqrt(Math.pow(y,2)-Math.pow(S,2))).add(P),A=b.clone().multiplyScalar(-y).add(O),H=p.distanceTo(A)/p.distanceTo(P),U=h.prevDir.clone().multiplyScalar(H*p.distanceTo(g)).add(p),X=U.clone().lerp(A,2),Y=g.clone().lerp(U,4/3),Z=v.clone().lerp(X,4/3);l[2*d]=new wM(g,Y,Z,v)}let c=new JIe;return l.forEach(d=>{d&&c.add(d)}),c}(e=>{e.is=function t(n){return n&&n.__isEntity}})(dr||(dr={}));var Ku=e=>dr.is(e),eke={type:"completeState",isfromEntity:!0},tke=["x","y","z"],ik=new te,nke=(new te).set(0,1,0),rk=e=>class extends(JI(e)){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new Jq,this._recursiveBBox=new Jq,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let n=this.children[t];if(dr.is(n))return n}entityChildrenCount(){let t=this.children.length;for(;t--;)if(dr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return"string"==typeof this.identity}get isVirtualEntity(){return"string"!=typeof this.identity}get isInstanceRoot(){return this.isConcreteEntity&&"Instance"===this.data.type}nearestInstanceSelfOrParent(){let t=this;for(;"Instance"!==t.data.type;){let n=t.parent;if(!dr.is(n))return;t=n}return t}forInstancesRec(t){this.instances.forEach(n=>{n.disposed||t(n),n.forInstancesRec(t)})}super_Entity(t,n){"string"==typeof t&&(this.uuid=t),this.identity=t,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,n,i=!1){if(0!==this.data.states.length||i){for(let r of this.data.states)lg.toOps(this.data,r.data).forEach(o=>{let s=hP.replaceProps(o,this.data);this.dataPatched=this.data,this.updateByPatchedOp(s,this.data,n)});if(null!==t){let r=this.data.states.data(t);r&&(this.dataPatched=lg.patch(this.data,r),lg.toOps(this.data,r).forEach(o=>{this.updateByPatchedOp(o,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched,n),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,n){t.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{Ku(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let n;return this.traverseEntity(i=>{i.uuid===t&&(n=i)}),n}traverseSortNextHelper(){let t=this.parent;if(t){let n=t.children,i=n.indexOf(this)+1;if(dr.is(n[i]))return n[i];if(dr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&dr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let n=this;for(;t>0&&null!==n;)n=n.parent,t-=1;return n}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let n=this.parent;for(;n;){if(t===n)return!0;n=n.parent}return!1}countToAccestor(t){let n=0,i=this;for(;i!==t;){if(null===i)return-1;i=i.parent,n+=1}return n}forEachEntity(t){for(let n of this.children)Ku(n)&&t(n)}traverseEntityAncestors(t){this.traverseAncestors(n=>{dr.is(n)&&t(n)})}traverseConcreteEntity(t,n=0){if(!0!==t(this,n))for(let i of this.children)Ku(i)&&i.isConcreteEntity&&i.traverseEntity(t,n+1)}traverseEntity(t,n=0){if(!0!==t(this,n))for(let i of this.children)Ku(i)&&i.traverseEntity(t,n+1)}traverseVisibleEntity(t){t(this);for(let n of this.children)Ku(n)&&n.visible&&n.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,n=!1){return super.copy(t,n),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>Ku(t))}isAncestorOf(t){if(this.uuid===t)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===t&&(n=!0)}),n}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x*En.RAD2DEG,this.rotation.y*En.RAD2DEG,this.rotation.z*En.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return F3(n,t)}getTransformValues(t,n,i){return n[t].map((r,o)=>i?.shared.getVariable(r,[this.uuid,t,tke[o]])??r)}updateTransformState(t,n){let i=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,n)),i=!0),t.rotation&&(ik.fromArray(this.getTransformValues("rotation",t,n)).multiplyScalar(En.DEG2RAD),this.rotation.setFromVector3(ik),i=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,n)),i=!0),void 0!==t.hiddenMatrix&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Bv.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&void 0!==t.hiddenMatrix&&this.updateWorldMatrix(!1,!0),i}onVariableUpdate(t=!1){t?this.resetBBoxNeedsUpdate():(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)}))}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)dr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{dr.is(t)&&t.disposeRecursively()})}toState(t=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return F3(n,t)}updateByObjUpdateOp(t,n){void 0!==t&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},n,!1)}updateByOp(t,n,i,r){let o=this.data;this.data=n;let s=t,a=ro(t.path,["states","*"]);if(null!==a){if(0===t.type){let[l]=a;if(this?.stateSelection===l){let c={...t.props};if(delete c.name,Object.values(t.props).some(d=>void 0===d)){let d=this.data;if(void 0!==d){let h=Gs.zoom(d,t.path.slice(2));if(h)for(let p in t.props)void 0===t.props[p]&&p in h&&(c[p]=h[p])}}s={...t,props:c,path:t.path.slice(2)}}}}else if(0===t.type){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==l){if(void 0!==t.props.name&&l.name){let{name:d,...h}=l;l=h}if(void 0!==t.props.material&&"material"in l){let{material:d,...h}=l;l=h}let c=Gs.removeOverridden(t.path,t.props,l);s={...t,props:c}}}if(this.updateByPatchedOpBase(s,lg.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),ro(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&"descendants"===c[0];)l.push(c[1]),c.splice(0,2);if(void 0===l[l.length-1]){if(0===t.type)for(let d of Object.keys(t.props)){l[l.length-1]=d;let h=i.scene.findInstance([this.uuid,...l]);h&&(h.overrideData=t.props[d],h.updateState(df.apply(h.component.data,h.overrideData),i))}}else{let d=i.scene.findInstance([this.uuid,...l]);if(d){let h=Gs.zoom(d.component.data,c);if(0===(t={...t,path:c}).type){let p=t.props;if(h)for(let[g,v]of Object.entries(t.props))void 0===v&&(p===t.props&&(p={...t.props}),p[g]=h[g]);t={...t,props:p}}d.overrideData=DP.resolve(n.overrides,l),d.updateByOp(t,sa.applySimple(d.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(0===t.path.length&&0===t.type){let c;for(let d of mf.rootOverrideProps)d in t.props&&(void 0===c&&(c={}),c[d]=t.props[d]);c&&(l={...t,props:c})}else for(let c of mf.rootOverrideProps)if(ro(t.path,[c])){l=t;break}void 0!==l&&this.instances.forEach(c=>{if(c.isInstanceRoot){let d=df.filterOp(c.overrideData,l);d&&c.updateByOp(d,sa.applySimple(c.data,d),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let d=df.filterOp(c.overrideData,t);if(d){let h;h=o===c.data&&t===d?n:sa.applySimple(c.data,d),c.updateByOp(d,h,i,!0)}}})}}updateByPatchedOpBase(t,n,i){if(this.dataPatched=n,0===t.path.length&&0===t.type)void 0!==t.props.type&&!og.is(t.props.type)&&wf.changeEntityProptotype(this,n,i);else if(1===t.path.length&&"geometry"===t.path[0]&&0===t.type&&"type"in t.props){wf.changeEntityProptotype(this,n,i);for(let r of this.children)dr.is(r)&&r.updateVisible(i.scene)}this.updateByPatchedOp(t,n,i)}updateByPatchedOp(t,n,i){if(0===t.path.length&&0===t.type&&this.updateState(t.props,i),"morphTargetInfluences"===t.path[0]&&0===t.type){let r=n.morphTargetInfluences.get(t.path[1])?.data.name;r&&this.updateMorphInfluences(r,i.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",r]))}if(null!==ro(t.path,["pathSnapping"])&&this.updatePathSnapping(n.pathSnapping),null!==ro(t.path,["cloner"])){let r=sa.drop(t,1);0===r.path.length&&0===r.type&&!0===r.props.disabled?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible(i.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){let n=this._updatedPathSnapping?.pathId??this.dataPatched.pathSnapping.pathId,i=this._updatedPathSnapping?.slide??this.dataPatched.pathSnapping.slide??0,r=this._updatedPathSnapping?.offset??this.dataPatched.pathSnapping.offset??0,o=this._updatedPathSnapping?.orientation??this.dataPatched.pathSnapping.orientation;if(null===n)return;let s=t.find(n);if(!s||!1===this._needApplyPathSnapping)return;this._needApplyPathSnapping=!1;let a=s.data;if(a.geometry.path.points.length<=1)return;let l=eY(a.geometry.path),c=(i+r)%1;i+r===1&&0===c&&(c=1);let d=null;try{d=l.curves.length?l.getPointAt(c):null}catch{}if(null===d)return;let h=this.parent?this.parent?.matrixWorld:new qt;s.updateMatrixWorld();let p=(new qt).multiplyMatrices(h.clone().invert(),s.matrixWorld);d.applyMatrix4(p);let g={position:d.toArray(),rotation:a.rotation};if("tangential"===o){let v=(new qt).extractRotation(s.matrixWorld),y=l.getTangentAt(c).applyMatrix4(v).add(d),b=(new qt).lookAt(d,y,nke),P=ik.setFromEuler((new js).setFromRotationMatrix(b)).multiplyScalar(En.RAD2DEG);g={...g,rotation:P.toArray()}}this.updateTransformState(g),this.traverseEntity(v=>{v._cameraType&&v.dispatchEvent(eke)})}updateVisible(t){if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||!0!==this.dataPatched.cloner?.hideBase),!t)return;let n=!1;this.traverseEntity(i=>{if("Splat"===i.data.type)return n=!0,!0}),n&&t.reloadSplats()}updateState_Entity(t,n){void 0!==t.name&&(this.name=t.name),void 0!==t.raycastLock&&(this.raycastLock=t.raycastLock),void 0!==t.visible&&(this.updateVisible(n?.scene),this.resetBBoxNeedsUpdate()),n&&"cloner"in t&&void 0!==t.cloner&&(this.setFromClonerState(t.cloner,n),this.updateVisible(n.scene)),this.updateTransformState(t,n)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof wf.Cloner&&"toObject"===t.parameters.type)}setFromClonerState(t,n){this.disposed||(null===t||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):void 0===this.cloner?(this.cloner=new wf.Cloner(this,t),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,n.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},tY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);n.thetaLength=En.clamp(n.thetaLength,0,360);let i=n.width/2,r=n.radiusTop??i,o=n.radiusBottom??i;return r===o?(r=i,o=i):r>o?(r=i,o=o*i/r):(r=r*i/o,o=i),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:r,radiusBottom:o})}}static build(e){let v,{width:t,depth:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:d,cornerRadius:h,cornerSegments:p,hollow:g}=e.parameters;return 0===l?(v=new Xn,v.setAttribute("position",new _n([],3))):v=h||g?new iY(c,d,i,r,o,s,a,l*Math.PI/180,h,h,p,g):new XT(c,d,i,r,o,s,a,l*Math.PI/180),v.scale(1,1,n/t),Object.assign(v,{userData:{...e,type:"CylinderGeometry"}})}};function Mf(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function nY(e){return new Ue(e.y,-e.x)}var iY=class extends Xn{constructor(e,t,n,i,r,o,s,a,l,c,d,h,p=!1){super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI,o&&(l=0,c=0);let g=[],v=[],y=[],b=[],P=0,S=n/2,O=new te,A=new te;p&&0==e&&(e=l),p&&0==t&&(t=c);let H=new Ue(e,S),U=new Ue(t,-S),X=null,Y=null,Z=null,ee=null,oe=H.clone().sub(U),ce=0,de=0,he=0;h>0&&(ce=Math.min(e,t)*(1-h),de=e-ce,he=t-ce);let Pe=H.clone();Pe.x-=ce;let we=Math.PI-oe.angle(),_e=oe.angle(),ve=Math.tan(_e/2),ke=Math.tan(we/2),ze=ve+ke,Ne=h?ze:ve;if(l=Math.min(l,(e-de)/(h?ze:ke),oe.length()/ze),c=Math.min(c,(t-he)/Ne,oe.length()/ze),l>0){let Ze=l/ve;X=H.clone().sub(new Ue(Ze,l)),h&&(Z=X.clone(),Z.x-=ce-ze*l),H.sub(oe.clone().setLength(Ze))}if(c>0){let Ze=c/ke;Y=U.clone().sub(new Ue(Ze,-c)),U.add(oe.clone().setLength(Ze)),h&&(ee=Y.clone(),ee.x-=ce-ze*c,Pe.sub(oe.clone().setLength(Ze)))}oe=H.clone().sub(U);let $e=oe.length()<.5,Be=[];for(let Ze=0;Ze<=i;Ze++){let yt=[],nt=Ze/i,zt=nt*a+s,It=new Ue(Math.sin(zt),Math.cos(zt));if(ee&&Y?(Xe(yt,nt,It,we,c,ee,-1,!0),Xe(yt,nt,It,_e,c,Y,-1,!1)):Y?(Ge(yt,It,Y.x,0,-1),Xe(yt,nt,It,_e,c,Y,-1,!1)):o||Ge(yt,It,t,he,-1),Mf(nY(oe).normalize(),It,O),!$e)for(let vn=0;vn<=r;vn++){let yn=vn/r;Mf(oe.clone().multiplyScalar(yn).add(U),It,A),v.push(A.x,A.y,A.z),y.push(O.x,O.y,O.z),b.push(nt,.5+A.y/n),yt.push(P++)}if(Z&&X?(Xe(yt,nt,It,we,l,X,1,!1),Xe(yt,nt,It,_e,l,Z,1,!0)):X?(Xe(yt,nt,It,we,l,X,1,!1),Ge(yt,It,X.x,0,1)):o||Ge(yt,It,e,de,1),h&&!$e){Mf(nY(oe).multiplyScalar(-1).normalize(),It,O);for(let yn=0;yn<=r;yn++){let xn=yn/r;Mf(oe.clone().multiplyScalar(-xn).add(Pe),It,A),v.push(A.x,A.y,A.z),y.push(O.x,O.y,O.z),b.push(nt,.5+A.y/n),yt.push(P++)}}h&&!o&&yt.push(yt[0]),Be.push(yt)}for(let Ze=0;Ze<Be.length-1;Ze++)for(let yt=0;yt<Be[0].length-1;yt++){if(o&&h&&yt==r)continue;let zt=Be[Ze+1][yt],It=Be[Ze+1][yt+1],Ot=Be[Ze][yt+1],vn=v[3*It+0],yn=v[3*It+2];g.push(Be[Ze][yt],zt,Ot),(0!=vn||0!=yn)&&g.push(zt,It,Ot)}function Xe(Ze,yt,nt,zt,It,Ot,vn,yn){for(let xn=0;xn<d+1;xn++){let Dn=xn/d,ln=vn<0?Dn:1-Dn;yn&&(ln-=1),ln*=zt;let sn=new Ue(Math.sin(ln),Math.cos(ln)*vn);Mf(sn.clone().multiplyScalar(It).add(Ot),nt,A),v.push(A.x,A.y,A.z),Mf(sn,nt,O),y.push(O.x,O.y,O.z),b.push(yt,.5+A.y/n),Ze.push(P++)}}function Ge(Ze,yt,nt,zt,It){let Ot=new te,vn=new Ue,yn=[nt,zt];It<0&&yn.reverse();for(let xn of yn)vn.set(xn,S*It),Mf(vn,yt,Ot),v.push(Ot.x,Ot.y,Ot.z),y.push(0,It,0),b.push(.5,.5),Ze.push(P++)}function gt(Ze,yt,nt){let zt=new Ue(Math.sin(nt),Math.cos(nt)),It=new Ue(-Math.cos(nt),Math.sin(nt)),Ot=new te,vn=Ze<0?(Dn,ln,sn)=>g.push(Dn,ln,sn):(Dn,ln,sn)=>g.push(Dn,sn,ln);Mf(new Ue((e+t+de+he)/4,0),zt,Ot),v.push(Ot.x,Ot.y,Ot.z),y.push(It.x,0,It.y),b.push(.5,.5);let xn=P++;for(let Dn of yt){let ln=v.slice(3*Dn,3*Dn+3);v.push(...ln),y.push(It.x,0,It.y);let sn=b.slice(2*Dn,2*Dn+2);b.push(...sn),P++}for(let Dn=xn+1;Dn<P-1;Dn++)vn(xn,Dn,Dn+1);vn(xn,P-1,xn+1)}a<2*Math.PI&&(gt(-1,Be[0],s),gt(1,Be[Be.length-1],s+a)),this.setIndex(g),this.setAttribute("position",new _n(v,3)),this.setAttribute("normal",new _n(y,3)),this.setAttribute("uv",new _n(b,2))}},ok=Math.PI/2,oke=class extends Xn{constructor(e=1,t=1,n=1,i=1,r=1,o=1,s=0,a=4){super(),this.type="BoxGeometry",i=Math.floor(i),r=Math.floor(r),o=Math.floor(o),a=Math.floor(a),s=Math.min(s,e/2,t/2,n/2);let l=[],c=[],d=[],h=[],p=0;function g(b,P,S,O,A,H,U,X,Y,Z){let ee=(H-2*s)/Y,oe=(U-2*s)/Z,ce=H/2-s,de=U/2-s,he=X/2,Pe=Y+1,we=Z+1,_e=0,ve=new te;for(let ke=0;ke<we;ke++){let ze=ke*oe-de;for(let Le=0;Le<Pe;Le++)ve[b]=(Le*ee-ce)*O,ve[P]=ze*A,ve[S]=he,c.push(ve.x,ve.y,ve.z),ve[b]=0,ve[P]=0,ve[S]=X>0?1:-1,d.push(ve.x,ve.y,ve.z),h.push(Le/Y),h.push(1-ke/Z),_e+=1}for(let ke=0;ke<Z;ke++)for(let ze=0;ze<Y;ze++){let Ne=p+ze+Pe*(ke+1),$e=p+(ze+1)+Pe*(ke+1),Be=p+(ze+1)+Pe*ke;l.push(p+ze+Pe*ke,Ne,Be),l.push(Ne,$e,Be)}p+=_e}function v(b,P,S,O,A,H,U,X,Y,Z){let ee=(U-2*s)/Z,oe=U/2-s,ce=X/2-s,de=Y/2,he=Z+1,Pe=0,we=new te,_e=new te;for(let ve=0;ve<a+1;ve++){let ke=ve/a*ok,ze=Math.sin(ke)*s,Le=(1-Math.cos(ke))*s,Ne=Math.sin(ke),$e=Math.cos(ke);we[P]=(ce+ze)*A,we[S]=(de-Le)*H,_e[b]=0,_e[P]=Ne*Math.sign(we[P]),_e[S]=$e*Math.sign(we[S]);for(let Be=0;Be<he;Be++)we[b]=(Be*ee-oe)*O,c.push(we.x,we.y,we.z),d.push(_e.x,_e.y,_e.z),h.push(Be/Z),h.push(0),Pe+=1}for(let ve=0;ve<a;ve++)for(let ke=0;ke<Z;ke++){let Le=p+ke+he*(ve+1),Ne=p+(ke+1)+he*(ve+1),$e=p+(ke+1)+he*ve;l.push(p+ke+he*ve,Le,$e),l.push(Le,Ne,$e)}p+=Pe}function y(b,P,S){let O=new te,A=new te(e/2,t/2,n/2);A.subScalar(s);let H=[],U=b*P*S>0?(Y,Z,ee)=>l.push(Y,Z,ee):(Y,Z,ee)=>l.push(Y,ee,Z);for(let Y=0;Y<=a;Y++){let Z=[],ee=ok*(1-Y/a),oe=Math.cos(ee),ce=Math.sin(ee),de=0;for(let he=0;he<=Y;he++){let Pe=Math.cos(de),we=Math.sin(de);O.x=oe*Pe,O.y=ce,O.z=oe*we;let _e=A.clone().addScaledVector(O,s);c.push(b*_e.x,P*_e.y,S*_e.z),d.push(b*O.x,P*O.y,S*O.z),h.push(0,0),Z.push(p++),de+=ok/Y}H.push(Z)}let X=H.length-1;for(let Y=0;Y<X;Y++){let Z=H[Y],ee=H[Y+1],oe=Z.length-1;U(Z[0],ee[1],ee[0]);for(let ce=1;ce<=oe;ce++)U(Z[ce-1],Z[ce],ee[ce]),U(Z[ce],ee[ce+1],ee[ce])}}g("z","y","x",-1,-1,n,t,e,o,r),g("z","y","x",1,-1,n,t,-e,o,r),g("x","z","y",1,1,e,n,t,i,o),g("x","z","y",1,-1,e,n,-t,i,o),g("x","y","z",1,-1,e,t,n,i,r),g("x","y","z",-1,-1,e,t,-n,i,r),s>0&&(v("z","y","x",-1,-1,1,n,t,e,o),v("z","y","x",1,-1,-1,n,t,e,o),v("z","y","x",-1,1,-1,n,t,e,o),v("z","y","x",1,1,1,n,t,e,o),v("x","y","z",-1,-1,-1,e,t,n,i),v("x","y","z",1,-1,1,e,t,n,i),v("x","y","z",-1,1,1,e,t,n,i),v("x","y","z",1,1,-1,e,t,n,i),v("y","x","z",-1,-1,1,t,e,n,r),v("y","x","z",1,-1,-1,t,e,n,r),v("y","x","z",1,1,1,t,e,n,r),v("y","x","z",-1,1,-1,t,e,n,r),y(1,1,1),y(-1,1,1),y(1,-1,1),y(-1,-1,1),y(1,1,-1),y(-1,1,-1),y(1,-1,-1),y(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new _n(c,3)),this.setAttribute("normal",new _n(d,3)),this.setAttribute("uv",new _n(h,2))}},sk=class extends Xn{constructor(e=[],t=[],n="",i=1,r=.2,o=4){super(),this.type="PolyhedronGeometryRound";let s=[],a=[],l=[];return function c(){0==(r=Math.min(.99999,r))&&(o=0);let h={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],p=new te,g=p.clone(),v=new wa,y=r*i,b=i-y,P=o+1,S=new te,O=(_e,ve)=>S.subVectors(_e,ve).normalize(),A=(_e,ve)=>Array(_e).fill(void 0).map(ve),H=A(e.length/3,(_e,ve)=>(new te).fromArray(e,3*ve).setLength(i)),U=[],X=1e6;for(let _e=0;_e<H.length;_e++){let ze,Le,Ne,ve=H[_e],ke=[],$e=1e10,Be=-1;for(;-1!=(Be=t.indexOf(_e,Be+1));){let Ze=Be-Be%3;ze=t[Ze+(Be+1)%3],Le=t[Ze+(Be+2)%3],Ne=ve.distanceToSquared(H[ze]),$e=Math.min($e,Ne),ke.push([ze,Le,Ne])}$e+=1e-6;let Xe=[],Ge=0,gt=ke.length;for(let Ze=0;Ze<gt;Ze++){[ze,Le,Ne]=ke[Ge];let yt=1==U[ze]?.includes(_e);Ne<=$e&&Xe.push(ze+ +yt*X),Ge=ke.findIndex(nt=>nt[0]==Le)}U.push(Xe)}let Y=[];{let ke,ze,_e=0,ve=0,Le=3==h;for(let Ne=0;Ne<=o;Ne++){ke=Ne*(Ne+1)/2,ze=(Ne+1)*(Ne+2)/2;for(let $e=0;$e<o-Ne;$e++)[_e,ve]=[ke+$e+Ne+2,ze+$e+Ne+3],Y.push(ke,ze,...Le?[ve,ke]:[_e,ze],ve,_e),[ke,ze]=[_e,ve];Y.push(ke,ze,ke+o+2)}}let Z=p.clone(),ee=p.clone(),oe=p.clone(),ce=p.clone(),de=p.clone(),he=[],Pe=A(H.length,()=>A(h,()=>p.clone()));for(let _e=0;_e<H.length;_e++){p.copy(H[_e]).normalize(),Z.copy(p).multiplyScalar(b);let ve=U[_e];for(let Xe=0;Xe<ve.length;Xe++)v.setFromPointsAndIndices(H,_e,ve[Xe]%X,ve[(Xe+1)%h]%X),v.b.sub(v.a).setLength(1e10).add(v.a),v.c.sub(v.a).setLength(1e10).add(v.a),v.closestPointToPoint(Z,Pe[_e][Xe]);let ke=[],ze=[],Le=[],Ne=new te;0==o&&[...Pe[_e]].reduce((Xe,Ge)=>Xe.add(Ge),Ne).multiplyScalar(1/h);for(let Xe=0;Xe<h;Xe++){let Ge=[],Ze=Pe[_e][(Xe-1+h)%h],yt=Pe[_e][Xe];p.copy(Ze).sub(Z),g.copy(yt).sub(Z);let nt=Z.angleTo(p),zt=p.angleTo(g),It=Math.cos(nt)*y;0==o?ee.copy(Ne):ee.copy(Z).setLength(b+It),ze.push(It);let Ot=[ee,Ze,yt];for(let vn=0;vn<2;vn++){let yn=Ot[vn],xn=Ot[vn+1];ce.subVectors(yn,Z),de.subVectors(xn,Z),oe.crossVectors(ce,de).normalize();for(let Dn=0;Dn<P;Dn++){let ln=[nt,zt][vn]*Dn/P;p.copy(ce).applyAxisAngle(oe,ln).add(Z),ke.push(p.clone()),vn&&(O(p,Z),Ge.push([0==Dn?yn:p.clone(),S.clone()]))}vn&&(O(xn,Z),Ge.push([xn,S.clone()]))}Le.push(Ge)}he.push(Le);let $e=2*P,Be=2;for(let Xe=0;Xe<h;Xe++){let Ge=$e*Xe,gt=$e*((Xe+1)%h),Ze=[ke[Ge]];for(let nt=1;nt<P;nt++){ce=ke[Ge+nt],de=ke[gt+nt],Ze.push(ce);for(let zt=1,It=nt-Be+1;zt<=It;zt++)p.lerpVectors(ce,de,zt/(It+1)),p.sub(Z).setLength(ze[Xe]).add(Z),Ze.push(p.clone());Ze.push(de)}for(let nt=0;nt<P;nt++)Ze.push(ke[nt+P+Ge]);Ze.push(ke[gt+P]);let yt=Y.map(nt=>Ze[nt]);s.push(...yt.map(nt=>[nt.x,nt.y,nt.z]).flat()),l.push(...yt.map(nt=>(O(nt,Z),[S.x,S.y,S.z])).flat())}}let we=[];for(let _e=0;_e<U.length;_e++)for(let ve=0;ve<h;ve++){let ke=U[_e][ve];if(ke<X){let ze=U[ke].findIndex($e=>$e%X==_e),Le=he[_e][ve],Ne=he[ke][ze];for(let $e=0;$e<P;$e++){let Xe=Ne[P-$e],Ge=Le[$e+1];[Le[$e],Xe,Ge,Ge,Xe,Ne[P-($e+1)]].forEach(Ze=>{s.push(Ze[0].x,Ze[0].y,Ze[0].z),l.push(Ze[1].x,Ze[1].y,Ze[1].z)})}we.push(Le[0][0],Ne[P][0],Le[P][0],Ne[0][0])}}for(;we.length;){let _e,ve,ke,ze;[_e,ve]=we.splice(0,2);let Le=[_e];for(;_e!=ve;)Le.push(ve),ke=we.indexOf(ve),ze=ke%2,ve=we.splice(ke-ze,2)[1-ze];S.subVectors(Le[0],Le[1]).cross(p.subVectors(Le[0],Le[2])).normalize();let Ne=S.dot(Le[0])<0;Ne&&S.negate();for(let $e=1;$e<=Le.length-2;$e++)[Le[$e+ +Ne],Le[$e+1-+Ne],Le[0]].forEach(Be=>{s.push(Be.x,Be.y,Be.z),l.push(S.x,S.y,S.z)})}}(),function d(){let h=new te;for(let U=0;U<s.length;U+=3){h.x=s[U+0],h.y=s[U+1],h.z=s[U+2];let X=A(h)/2/Math.PI+.5,Y=H(h)/Math.PI+.5;a.push(X,1-Y)}let p=new te,g=new te,v=new te,y=new te,b=new Ue,P=new Ue,S=new Ue,O=(U,X,Y,Z)=>{Z<0&&1===U.x&&(a[X]=U.x-1),0===Y.x&&0===Y.z&&(a[X]=Z/2/Math.PI+.5)};for(let U=0,X=0;U<s.length;U+=9,X+=6){p.set(s[U+0],s[U+1],s[U+2]),g.set(s[U+3],s[U+4],s[U+5]),v.set(s[U+6],s[U+7],s[U+8]),b.set(a[X+0],a[X+1]),P.set(a[X+2],a[X+3]),S.set(a[X+4],a[X+5]),y.copy(p).add(g).add(v).divideScalar(3);let Y=A(y);O(b,X+0,p,Y),O(P,X+2,g,Y),O(S,X+4,v,Y)}for(let U=0;U<a.length;U+=6){let X=a[U+0],Y=a[U+2],Z=a[U+4],ee=Math.max(X,Y,Z),oe=Math.min(X,Y,Z);ee>.9&&oe<.1&&(X<.2&&(a[U+0]+=1),Y<.2&&(a[U+2]+=1),Z<.2&&(a[U+4]+=1))}function A(U){return Math.atan2(U.z,-U.x)}function H(U){return Math.atan2(-U.y,Math.sqrt(U.x*U.x+U.z*U.z))}}(),this.setAttribute("position",new _n(s,3)),this.setAttribute("normal",new _n(l,3)),void this.setAttribute("uv",new _n(a,2))}static fromJSON(e){return new sk(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},rY=class extends sk{constructor(e=1,t=.2,n=4){let i=(1+Math.sqrt(5))/2,r=1/i,a="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,e,t,n),this.type=a}static fromJSON(e){return new rY(e.radius,e.corner,e.cornerSides)}},T_=1e-12,ak=class{constructor(e){this.position=new Ue,this.startPosition=new Ue,this.uuid=En.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new ak(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},lk=class extends ak{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new lk(this.parent).copy(this)}},t1=class extends ak{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new lk(this),new lk(this))}static create(e,t){let n=new t1(e,new Ue(...t.position));return n.controls[0].position.set(...t.controlPrevious.position),n.controls[1].position.set(...t.controlNext.position),n.roundness=t.roundness,n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,n}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let n=0,i=this.controls.length;n<i;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=t?r.position.copy(this.position):r.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new t1(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){let e=this.curveBefore?.getTangentAt(1),t=this.curveAfter?.getTangentAt(0);return[e,t]}computeNormals(e=new Ue,t=new Ue){let[n,i]=this.computeTangents();return n&&i&&(oY(n,e),oY(i,t)),[e,t]}computeTangent(e=new Ue){let[t,n]=this.computeTangents();return t&&n&&e.copy(t).add(n).normalize(),e}computeNormal(e=new Ue){let[t,n]=this.computeNormals();return e.copy(t).add(n).normalize(),e}};function oY(e,t=new Ue){let n=e.length();return t.set(-e.y/n,e.x/n)}var n1=new Ue,QP=new Ue,ake=new Ue,lke=new Ue,cke=new Ue,dke=new Ue,sY=new te,aY=new te;function hke(e){let t=new Ue;t.addVectors(e.v0,n1.subVectors(e.v1,e.v0).multiplyScalar(2/3));let n=new Ue;return n.addVectors(e.v2,QP.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Ad(e.v0,t,n,e.v2)}function I_(e,t,n=Number.EPSILON){return Math.abs(e-t)<n}function uke(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function pke(e,t,n=Number.EPSILON){return e.distanceTo(t)<n}function lY(e,t,n){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((r*r+i*i-o*o)/(2*r*i))}function fke(e,t,n){return dY(e,t)&&dY(t,n)&&dk(e.position,t.position,n.position)}function dk(e,t,n){return 0===n1.copy(t).sub(e).cross(QP.copy(n).sub(e))}function mke(e,t,n,i,r){let o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=(e.y+t.y)/2,a=(e.x+t.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(e.y-t.y)/o,c=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(t.x-e.x)/o;return i.set(a+l,s+c),r.set(a-l,s-c),[i,r]}function gke(e,t,n){return e.distanceTo(n)<t.distanceTo(n)?t:e}function vke(e,t,n,i,r,o){let h,s=t.x-e.x,a=t.y-e.y,l=n.x-e.x,c=n.y-e.y,d=Math.sqrt((s+l)*(s+l)+(a+c)*(a+c));return lY(t,e,n)>Math.PI&&(d*=-1),h=I_(c,a)?(a+c)*(i/d-.5)*8/3/(s-l):(s+l)*(i/d-.5)*8/3/(c-a),r.set(t.x-h*a,t.y+h*s),o.set(n.x+h*c,n.y-h*l),[r,o]}function cY(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function dY(e,t){return dk(e.position,e.controls[1].position,t.position)&&dk(e.position,t.controls[0].position,t.position)}function hY(e,t=12,n=!1){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r],a=0;if(n&&void 0!==s.roundedCurveCorner){let l=.5*vg(s.roundedCurveCorner,t);r>0&&(i[r-1]+=l),a+=l}void 0!==s.curveAfter&&(a+=vg(s.curveAfter,t)),i.push(a)}return e.length>0&&n&&void 0!==e[0].roundedCurveCorner&&(i[e.length-1]+=.5*vg(e[0].roundedCurveCorner,t)),i}function vg(e,t=12){return e&&e instanceof xM?2*t:e&&(e instanceof Td||e instanceof YV)?1:e&&e instanceof YT?t*e.points.length:t}var Gr,Os,hk=new Ue,Cke=new Ue,wke=new Ue,Mke=new Ue,Pke=new Ue,Ske=new Ue,Jo=class extends PM{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Ll(new te(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=En.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,n){let i=new Jo;return i.isClosed=e.isClosed,i.points=e.points.map(r=>t1.create(r.id,r.data)),"number"==typeof e.roundness&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(r=>Jo.createFromState(r)),void 0!==t&&void 0!==n&&i.applySize(t,n),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,n=this.points.findIndex(i=>i.uuid===e);if(n<0){let i=t;for(let r=0,o=this.shapeHoles.length;r<o;r++){let s=this.shapeHoles[r],a=s.points.length,l=s.getPointIndexById(e);if(!(l<0))return l+i;i+=a}}return n}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],o=e-t;if(o<=r.points.length-1)return r.points[o];t+=r.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],o=r.points.indexOf(e);if(o>=0)return t+o;t+=r.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let n=hk.set(e,t);for(let i=0,r=this.points.length;i<r;i++){let o=this.points[i];o.position.multiply(n),o.controls[0].position.multiply(n),o.controls[1].position.multiply(n)}for(let i=0,r=this.shapeHoles.length;i<r;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,n=En.generateUUID()){let i;i=e instanceof Ue?e:new Ue(e,t);let r=new t1(n,i);return r.roundness=this.roundness,r}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,n=this.points.length;t<n;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,n=this.shapeHoles.length;t<n;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(n=>n.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,n=!1){this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let i=n?this.roundedCurveDivisions:this.curveDivisions;return function bke(e,t,n=12,i=!0){let o,r=aY.set(0,0,0),s=0,a=[];for(let l=0;l<t.length;l++){let c=t[l],d=n1,h=vg(c,n);a.push(h);for(let p=0;p<=h;p++)if(c instanceof Ad||c instanceof sf||c instanceof Td){if(c.getPoint(p/h,d),r.set(d.x,d.y,0),void 0!==o&&pke(o,r))continue;void 0===o&&(o=sY),o.copy(r),e.setXYZ(s,r.x,r.y,r.z),s++}}i&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++)}(e,n?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((r,o)=>r+o,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=hY(this.points,e,!1),this.roundedCurveDivisions=hY(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,n=12){return 2*function _ke(e,t,n,i=12,r=!0){let o=aY.set(0,0,0),s=0,a=[];for(let l=0;l<t.length;l++){if(!1===n[l])continue;let c,d=t[l],h=n1,p=vg(d,i);a.push(p);for(let g=0;g<=p;g++)if(d instanceof Ad||d instanceof sf||d instanceof Td){if(d.getPoint(g/p,h),o.set(h.x,h.y,0),c?.equals(o))continue;void 0===c?c=sY:(e.setXYZ(s,c.x,c.y,c.z),s++,e.setXYZ(s,o.x,o.y,o.z),s++),c.copy(o)}}return r&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),a}(e,this.curves,t,n,this.autoClose).reduce((i,r)=>i+r,0)}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function xke(e,t,n=12,i=!0){let r,o=0;for(let s=0;s<t.length;s++){let a=t[s],l=vg(a,n),c=n1;for(let d=0;d<=l;d++)if(a instanceof Ad||a instanceof sf||a instanceof Td){if(a.getPoint(d/l,c),void 0!==r&&uke(r,c,T_))continue;void 0===r&&(r=QP),r.copy(c),e.push(c.x,c.y),o++}}return I_(e[0],e[e.length-2],T_)&&I_(e[1],e[e.length-1],T_)&&(e.pop(),e.pop()),i&&o>1&&!(I_(e[o-1],e[1],T_)&&I_(e[o-2],e[0],T_))&&(e.push(e[0],e[1]),o++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let n=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,r=0;t&&void 0!==this.points[0].roundedCurveCorner&&(r=.5*vg(this.points[0].roundedCurveCorner,this.subdivision));let o=e-r;o<0&&(o+=i.reduce((s,a)=>s+a,0));for(let s=0,a=i.length;s<a;s++){let l=i[s];if(o<n+l)return[s,(o-n+1)/l];n+=l}return[0,1]}getCurveT(e,t,n){let i=this.points[e],r=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,s=o[e];if(cY(i,r)){let l=i.position.distanceTo(r.position);return i.position.distanceTo(hk.set(n.x,n.y))/l}let a=0;for(let l=0;l<e;l++)a+=o[l];return(t-a)/s}dispose(){}_applyCurveForPoint(e,t){cY(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;let i=n.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,n=this.points.length;t<n;t++){let i=this.points[t];0===t?this.moveTo(i.position.x,i.position.y):this._applyCurveForPoint(i,this.points[t-1])}let e=this.getLastPoint();if(e?.curveAfter&&(e.curveAfter=void 0),this.isClosed&&this._applyCurveForPoint(this.points[0],this.points[this.points.length-1]),this.points.length>2){let t=0;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n],o=this.points[n-1]??this.points[this.points.length-1],s=this.points[n+1]??this.points[0],a=r.roundness,l=o&&s&&fke(o,r,s);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,d=r.curveAfter;if(void 0===c||void 0===d)continue;let U,h=r.roundedCurveBefore,p=r.roundedCurveAfter,g=c.getLength(),v=d.getLength(),y=Math.min(a,.499*g),b=Math.min(a,.499*v),P=Math.min(y,b),S=1-P/g,O=P/v,A=c.getPointAt(S,hk),H=d.getPointAt(O,Cke);if(this._subSplitCurve(c,h,S,A,void 0),this._subSplitCurve(d,p,O,void 0,H),this.useCubicForRoundedCorners){let X=lY(A,r.position,H)/2,Y=Math.tan(X)*A.distanceTo(r.position),[Z,ee]=mke(A,H,Y,wke,Mke),oe=gke(Z,ee,r.position),[ce,de]=vke(oe,A,H,Y,Pke,Ske);U=new Ad(A.clone(),ce.clone(),de.clone(),H.clone())}else U=new sf(A.clone(),r.position.clone(),H.clone());r.roundedCurveCorner=U,this.roundedCurves.splice(n+t,0,U),t++}}}}_subSplitCurve(e,t,n,i,r){if(!(e instanceof Td)){let o=e,s=t,a=o.getUtoTmapping(n,0),l=function yke(e,t,n,i,r=.5){let o=n1.subVectors(t,e).multiplyScalar(r).add(e),s=QP.subVectors(n,t).multiplyScalar(r).add(t),a=ake.subVectors(i,n).multiplyScalar(r).add(n),l=o,c=lke.subVectors(s,o).multiplyScalar(r).add(o),d=cke.subVectors(a,s).multiplyScalar(r).add(s),h=a,p=dke.subVectors(d,c).multiplyScalar(r).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,p.x,p.y,d.x,d.y,h.x,h.y,i.x,i.y]}(o.v0,o.v1,o.v2,o.v3,a);return void 0!==i&&(s.v0.set(l[0],l[1]),s.v1.set(l[2],l[3]),s.v2.set(l[4],l[5]),s.v3.set(l[6],l[7])),void 0!==r&&(s.v0.set(l[6],l[7]),s.v1.set(l[8],l[9]),s.v2.set(l[10],l[11]),s.v3.set(l[12],l[13])),s}return void 0!==i&&t.v2.copy(i),void 0!==r&&t.v1.copy(r),t}clone(){let e=new Jo(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let n=0;n<t;n++){let i=7*n,r=e.points[i+0],o=e.points[i+1],s=e.points[i+2],a=e.points[i+3],l=e.points[i+4],c=e.points[i+5],d=e.points[i+6],h=new t1(En.generateUUID(),new Ue(r,o));h.controls[0].position.set(s,a),h.controls[1].position.set(l,c),h.roundness=d,this.points.push(h)}return this.shapeHoles=e.shapeHoles?.length?e.shapeHoles.map(n=>{let i=new Jo;return i.fromJSON(n),i}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let n=(r,o)=>{o instanceof Ad&&o.v3.equals(r.position)&&r.controls[0].position.copy(o.v2)};return this.points=(r=>{let s,a,o=[];for(s=0,a=r.length;s<a;s++)r[s]instanceof sf&&(r[s]=hke(r[s]));for(s=0,a=r.length;s<a;s++){let p,d=r[s],h=s>0?r[s-1]:null;d instanceof Ad?(p=this.createPoint(d.v0),p.controls[1].position.copy(d.v1)):d instanceof Td&&(p=this.createPoint(d.v1)),void 0!==p&&(null!==h&&n(p,h),o.push(p))}let l=r[r.length-1],c=!1;return l instanceof Ad?l.v3.equals(o[0].position)&&(o[0].controls[0].position.copy(l.v2),c=!0):l instanceof Td&&l.v2.equals(o[0].position)&&(c=!0),this.isClosed=c,o})(e.curves),e instanceof PM&&(this.shapeHoles=e.holes.map(r=>{let o=new Jo;return o.fromShape(r),o})),this.update(),this}updatePoint(e,t){let n=this.getPointByUuid(e);n&&(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.roundness&&(n.roundness=t.roundness),void 0!==t.areControlsDirectionsMirrored&&(n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){let n=this.getPointByUuid(e)?.controls[0];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){let n=this.getPointByUuid(e)?.controls[1];n&&(t.position&&n.position.fromArray(t.position),this.needsUpdate=!0)}},uk=2*Math.PI;function pk({x:e,y:t},n,i,r,o){return{x:e*n+r,y:t*i+o}}function Oke(e,t){let n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),o=Math.cos(e+t),s=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:o+s*n,y:s-o*n},{x:o,y:s}]}function uY(e,t,n,i){let r=e*i-t*n<0?-1:1,o=Math.min(1,Math.max(-1,e*n+t*i));return r*Math.acos(o)}function pi(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(Gr||(Gr={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(Os||(Os={}));var ei=function(){function e(){}return e.vertEq=function(t,n){return t.s===n.s&&t.t===n.t},e.vertLeq=function(t,n){return t.s<n.s||t.s===n.s&&t.t<=n.t},e.transLeq=function(t,n){return t.t<n.t||t.t===n.t&&t.s<=n.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,n){return Math.abs(t.s-n.s)+Math.abs(t.t-n.t)},e.edgeEval=function(t,n,i){pi(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,o=i.s-n.s;return r+o>0?r<o?n.t-t.t+r/(r+o)*(t.t-i.t):n.t-i.t+o/(r+o)*(i.t-t.t):0},e.edgeSign=function(t,n,i){pi(e.vertLeq(t,n)&&e.vertLeq(n,i));var r=n.s-t.s,o=i.s-n.s;return r+o>0?(n.t-i.t)*r+(n.t-t.t)*o:0},e.transEval=function(t,n,i){pi(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,o=i.t-n.t;return r+o>0?r<o?n.s-t.s+r/(r+o)*(t.s-i.s):n.s-i.s+o/(r+o)*(i.s-t.s):0},e.transSign=function(t,n,i){pi(e.transLeq(t,n)&&e.transLeq(n,i));var r=n.t-t.t,o=i.t-n.t;return r+o>0?(n.s-i.s)*r+(n.s-t.s)*o:0},e.vertCCW=function(t,n,i){return t.s*(n.t-i.t)+n.s*(i.t-t.t)+i.s*(t.t-n.t)>=0},e.interpolate=function(t,n,i,r){return(t=t<0?0:t)<=(i=i<0?0:i)?0===i?(n+r)/2:n+t/(t+i)*(r-n):r+i/(t+i)*(n-r)},e.intersect=function(t,n,i,r,o){var s,a,l;e.vertLeq(t,n)||(l=t,t=n,n=l),e.vertLeq(i,r)||(l=i,i=r,r=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.vertLeq(i,n)?e.vertLeq(n,r)?((s=e.edgeEval(t,i,n))+(a=e.edgeEval(i,n,r))<0&&(s=-s,a=-a),o.s=e.interpolate(s,i.s,a,n.s)):((s=e.edgeSign(t,i,n))+(a=-e.edgeSign(t,r,n))<0&&(s=-s,a=-a),o.s=e.interpolate(s,i.s,a,r.s)):o.s=(i.s+n.s)/2,e.transLeq(t,n)||(l=t,t=n,n=l),e.transLeq(i,r)||(l=i,i=r,r=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=n,n=r,r=l),e.transLeq(i,n)?e.transLeq(n,r)?((s=e.transEval(t,i,n))+(a=e.transEval(i,n,r))<0&&(s=-s,a=-a),o.t=e.interpolate(s,i.t,a,n.t)):((s=e.transSign(t,i,n))+(a=-e.transSign(t,r,n))<0&&(s=-s,a=-a),o.t=e.interpolate(s,i.t,a,r.t)):o.t=(i.t+n.t)/2},e}(),k_=function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},KP=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),i1=function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},pY=function(){function e(){var t=new i1,n=new k_,i=new KP(0),r=new KP(1);t.next=t.prev=t,t.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=t,this.fHead=n,this.eHead=i,this.eHeadSym=r}return e.prototype.makeEdge_=function(t){var n=new KP(0),i=new KP(1);t.Sym.side<t.side&&(t=t.Sym);var r=t.Sym.next;return i.next=r,r.Sym.next=n,n.next=t,t.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},e.prototype.splice_=function(t,n){var i=t.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=t,t.Onext=r,n.Onext=i},e.prototype.makeVertex_=function(t,n,i){var r=t;pi(r,"Vertex can't be null!");var o=i.prev;r.prev=o,o.next=r,r.next=i,i.prev=r,r.anEdge=n;var s=n;do{s.Org=r,s=s.Onext}while(s!==n)},e.prototype.makeFace_=function(t,n,i){var r=t;pi(r,"Face can't be null");var o=i.prev;r.prev=o,o.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var s=n;do{s.Lface=r,s=s.Lnext}while(s!==n)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var n=t.next,i=t.Sym.next;n.Sym.next=i,i.Sym.next=n},e.prototype.killVertex_=function(t,n){var i=t.anEdge,r=i;do{r.Org=n,r=r.Onext}while(r!==i);var o=t.prev,s=t.next;s.prev=o,o.next=s},e.prototype.killFace_=function(t,n){var i=t.anEdge,r=i;do{r.Lface=n,r=r.Lnext}while(r!==i);var o=t.prev,s=t.next;s.prev=o,o.next=s},e.prototype.makeEdge=function(){var t=new i1,n=new i1,i=new k_,r=this.makeEdge_(this.eHead);return this.makeVertex_(t,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},e.prototype.splice=function(t,n){var i=!1,r=!1;if(t!==n){if(n.Org!==t.Org&&(r=!0,this.killVertex_(n.Org,t.Org)),n.Lface!==t.Lface&&(i=!0,this.killFace_(n.Lface,t.Lface)),this.splice_(n,t),!r){var o=new i1;this.makeVertex_(o,n,t.Org),t.Org.anEdge=t}if(!i){var s=new k_;this.makeFace_(s,n,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var n=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var r=new k_;this.makeFace_(r,t,t.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(t.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var n=this.makeEdge_(t),i=n.Sym;this.splice_(n,t.Lnext),n.Org=t.Dst;var r=new i1;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=t.Lface,n},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t).Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,n){var i=!1,r=this.makeEdge_(t),o=r.Sym;if(n.Lface!==t.Lface&&(i=!0,this.killFace_(n.Lface,t.Lface)),this.splice_(r,t.Lnext),this.splice_(o,n),r.Org=t.Dst,o.Org=n.Org,r.Lface=o.Lface=t.Lface,t.Lface.anEdge=o,!i){var s=new k_;this.makeFace_(s,r,t.Lface)}return r},e.prototype.zapFace=function(t){var i,r,o,s,a,n=t.anEdge;r=n.Lnext;do{r=(i=r).Lnext,i.Lface=null,null===i.Rface&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),(o=i.Sym).Onext===o?this.killVertex_(o.Org,null):(o.Org.anEdge=o.Onext,this.splice_(o,o.Oprev)),this.killEdge_(i))}while(i!=n);(a=t.next).prev=s=t.prev,s.next=a},e.prototype.countFaceVerts_=function(t){var n=t.anEdge,i=0;do{i++,n=n.Lnext}while(n!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var n,i,r,o,s;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(s=(i=n.anEdge).Org;r=i.Lnext,(o=i.Sym)&&o.Lface&&o.Lface.inside&&this.countFaceVerts_(n)+this.countFaceVerts_(o.Lface)-2<=t&&ei.vertCCW(i.Lprev.Org,i.Org,o.Lnext.Lnext.Org)&&ei.vertCCW(o.Lprev.Org,o.Org,i.Lnext.Lnext.Org)&&(r=o.Lnext,this.delete(o),i=null,o=null),!i||i.Lnext.Org!==s;)i=r;return!0},e.prototype.check=function(){var r,o,s,a,l,c,t=this.fHead,n=this.vHead,i=this.eHead;for(o=t,o=t;(r=o.next)!==t;o=r){pi(r.prev===o),l=r.anEdge;do{pi(l.Sym!==l),pi(l.Sym.Sym===l),pi(l.Lnext.Onext.Sym===l),pi(l.Onext.Sym.Lnext===l),pi(l.Lface===r),l=l.Lnext}while(l!==r.anEdge)}for(pi(r.prev===o&&null===r.anEdge),a=n,a=n;(s=a.next)!==n;a=s){pi(s.prev===a),l=s.anEdge;do{pi(l.Sym!==l),pi(l.Sym.Sym===l),pi(l.Lnext.Onext.Sym===l),pi(l.Onext.Sym.Lnext===l),pi(l.Org===s),l=l.Onext}while(l!==s.anEdge)}for(pi(s.prev===a&&null===s.anEdge),c=i,c=i;(l=c.next)!==i;c=l)pi(l.Sym.next===c.Sym),pi(l.Sym!==l),pi(l.Sym.Sym===l),pi(null!==l.Org),pi(null!==l.Dst),pi(l.Lnext.Onext.Sym===l),pi(l.Onext.Sym.Lnext===l);pi(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&null===l.Org&&null===l.Dst&&null===l.Lface&&null===l.Rface)},e}(),fY=function e(){this.handle=null},mY=function e(){this.key=null,this.node=0},Ake=function(){function e(t,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new fY,this.handles[i]=new mY;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r,o,s,n=this.nodes,i=this.handles;for(r=n[t].handle;;){if((s=t<<1)<this.size&&this.leq(i[n[s+1].handle].key,i[n[s].handle].key)&&++s,pi(s<=this.max),o=n[s].handle,s>this.size||this.leq(i[r].key,i[o].key)){n[t].handle=r,i[r].node=t;break}n[t].handle=o,i[o].node=t,t=s}},e.prototype.floatUp_=function(t){var r,o,s,n=this.nodes,i=this.handles;for(r=n[t].handle;;){if(o=n[s=t>>1].handle,0===s||this.leq(i[o].key,i[r].key)){n[t].handle=r,i[r].node=t;break}n[t].handle=o,i[o].node=t,t=s}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var n,i;if(2*(n=++this.size)>this.max){var r,o;for(this.max*=2,o=this.nodes.length,this.nodes.length=this.max+1,r=o;r<this.nodes.length;r++)this.nodes[r]=new fY;for(o=this.handles.length,this.handles.length=this.max+1,r=o;r<this.handles.length;r++)this.handles[r]=new mY}return 0===this.freeList?i=n:this.freeList=this.handles[i=this.freeList].node,this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=t,this.initialized&&this.floatUp_(n),i},e.prototype.extractMin=function(){var t=this.nodes,n=this.handles,i=t[1].handle,r=n[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,n[t[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},e.prototype.delete=function(t){var r,n=this.nodes,i=this.handles;pi(t>=1&&t<=this.max&&null!==i[t].key),n[r=i[t].node].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),fk=function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},gY=function e(){this.key=null,this.next=null,this.prev=null},Tke=function(){function e(t,n){this.frame=t,this.leq=n,this.head=new gY,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var n=this.head;do{n=n.next}while(null!==n.key&&!this.leq(this.frame,t,n.key));return n},e.prototype.insertBefore=function(t,n){do{t=t.prev}while(null!==t.key&&!this.leq(this.frame,t.key,n));var i=new gY;return i.key=n,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Ike=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,n){t.winding+=n.winding,t.Sym.winding+=n.Sym.winding},e.edgeLeq=function(t,n,i){var r=t.event,o=n.eUp,s=i.eUp;return o.Dst===r?s.Dst===r?ei.vertLeq(o.Org,s.Org)?ei.edgeSign(s.Dst,o.Org,s.Org)<=0:ei.edgeSign(o.Dst,s.Org,o.Org)>=0:ei.edgeSign(s.Dst,r,s.Org)<=0:s.Dst===r?ei.edgeSign(o.Dst,r,o.Org)>=0:ei.edgeEval(o.Dst,r,o.Org)>=ei.edgeEval(s.Dst,r,s.Org)},e.deleteRegion=function(t,n){n.fixUpperEdge&&pi(0===n.eUp.winding),n.eUp.activeRegion=null,t.dict.delete(n.nodeUp)},e.fixUpperEdge=function(t,n,i){pi(n.fixUpperEdge),t.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},e.topLeftRegion=function(t,n){var r,i=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===i);if(n.fixUpperEdge){if(null===(r=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,r),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(t,n,i){var r=new fk;return r.eUp=i,r.nodeUp=t.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},e.isWindingInside=function(t,n){switch(t.windingRule){case Gr.ODD:return 0!=(1&n);case Gr.NONZERO:return 0!==n;case Gr.POSITIVE:return n>0;case Gr.NEGATIVE:return n<0;case Gr.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,i){for(var r,o=null,s=n,a=n.eUp;s!==i;){if(s.fixUpperEdge=!1,(r=(o=e.regionBelow(s)).eUp).Org!=a.Org){if(!o.fixUpperEdge){e.finishRegion(t,s);break}r=t.mesh.connect(a.Lprev,r.Sym),e.fixUpperEdge(t,o,r)}a.Onext!==r&&(t.mesh.splice(r.Oprev,r),t.mesh.splice(a,r)),e.finishRegion(t,s),a=o.eUp,s=o}return a},e.addRightEdges=function(t,n,i,r,o,s){var a,l,c,d,h=!0;c=i;do{pi(ei.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,n,c.Sym),c=c.Onext}while(c!==r);for(null===o&&(o=e.regionBelow(n).eUp.Rprev),l=n,d=o;(c=(a=e.regionBelow(l)).eUp.Sym).Org===d.Org;)c.Onext!==d&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(d.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=e.isWindingInside(t,a.windingNumber),l.dirty=!0,!h&&e.checkForRightSplice(t,l)&&(e.addWinding(c,d),e.deleteRegion(t,l),t.mesh.delete(d)),h=!1,l=a,d=c;l.dirty=!0,pi(l.windingNumber-c.winding===a.windingNumber),s&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,n,i){t.mesh.splice(n,i)},e.vertexWeights=function(t,n,i){var r=ei.vertL1dist(n,t),o=ei.vertL1dist(i,t),s=.5*o/(r+o),a=.5*r/(r+o);t.coords[0]+=s*n.coords[0]+a*i.coords[0],t.coords[1]+=s*n.coords[1]+a*i.coords[1],t.coords[2]+=s*n.coords[2]+a*i.coords[2]},e.getIntersectData=function(t,n,i,r,o,s){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,i,r),e.vertexWeights(n,o,s)},e.checkForRightSplice=function(t,n){var i=e.regionBelow(n),r=n.eUp,o=i.eUp;if(ei.vertLeq(r.Org,o.Org)){if(ei.edgeSign(o.Dst,r.Org,o.Org)>0)return!1;ei.vertEq(r.Org,o.Org)?r.Org!==o.Org&&(t.pq.delete(r.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,r)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(r,o.Oprev),n.dirty=i.dirty=!0)}else{if(ei.edgeSign(r.Dst,o.Org,r.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(r.Sym),t.mesh.splice(o.Oprev,r)}return!0},e.checkForLeftSplice=function(t,n){var s,i=e.regionBelow(n),r=n.eUp,o=i.eUp;if(pi(!ei.vertEq(r.Dst,o.Dst)),ei.vertLeq(r.Dst,o.Dst)){if(ei.edgeSign(r.Dst,o.Dst,r.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,s=t.mesh.splitEdge(r),t.mesh.splice(o.Sym,s),s.Lface.inside=n.inside}else{if(ei.edgeSign(o.Dst,r.Dst,o.Org)>0)return!1;n.dirty=i.dirty=!0,s=t.mesh.splitEdge(o),t.mesh.splice(r.Lnext,o.Sym),s.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var g,v,i=e.regionBelow(n),r=n.eUp,o=i.eUp,s=r.Org,a=o.Org,l=r.Dst,c=o.Dst,p=new i1;if(pi(!ei.vertEq(c,l)),pi(ei.edgeSign(l,t.event,s)<=0),pi(ei.edgeSign(c,t.event,a)>=0),pi(s!==t.event&&a!==t.event),pi(!n.fixUpperEdge&&!i.fixUpperEdge),s===a||Math.min(s.t,l.t)>Math.max(a.t,c.t))return!1;if(ei.vertLeq(s,a)){if(ei.edgeSign(c,s,a)>0)return!1}else if(ei.edgeSign(l,a,s)<0)return!1;return e.debugEvent(t),ei.intersect(l,s,c,a,p),pi(Math.min(s.t,l.t)<=p.t),pi(p.t<=Math.max(a.t,c.t)),pi(Math.min(c.s,l.s)<=p.s),pi(p.s<=Math.max(a.s,s.s)),ei.vertLeq(p,t.event)&&(p.s=t.event.s,p.t=t.event.t),g=ei.vertLeq(s,a)?s:a,ei.vertLeq(g,p)&&(p.s=g.s,p.t=g.t),ei.vertEq(p,s)||ei.vertEq(p,a)?(e.checkForRightSplice(t,n),!1):!ei.vertEq(l,t.event)&&ei.edgeSign(l,t.event,p)>=0||!ei.vertEq(c,t.event)&&ei.edgeSign(c,t.event,p)<=0?c===t.event?(t.mesh.splitEdge(r.Sym),t.mesh.splice(o.Sym,r),n=e.topLeftRegion(t,n),r=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),i),e.addRightEdges(t,n,r.Oprev,r,r,!0),!0):l===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(r.Lnext,o.Oprev),i=n,n=e.topRightRegion(n),v=e.regionBelow(n).eUp.Rprev,i.eUp=o.Oprev,o=e.finishLeftRegions(t,i,null),e.addRightEdges(t,n,o.Onext,r.Rprev,v,!0),!0):(ei.edgeSign(l,t.event,p)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(r.Sym),r.Org.s=t.event.s,r.Org.t=t.event.t),ei.edgeSign(c,t.event,p)<=0&&(n.dirty=i.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),!1):(t.mesh.splitEdge(r.Sym),t.mesh.splitEdge(o.Sym),t.mesh.splice(o.Oprev,r),r.Org.s=p.s,r.Org.t=p.t,r.Org.pqHandle=t.pq.insert(r.Org),e.getIntersectData(t,r.Org,s,l,a,c),e.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var r,o,i=e.regionBelow(n);;){for(;i.dirty;)n=i,i=e.regionBelow(i);if(!n.dirty&&(i=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,(r=n.eUp).Dst!==(o=i.eUp).Dst&&e.checkForLeftSplice(t,n)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(o),o=(i=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(r),r=(n=e.regionAbove(i)).eUp)),r.Org!==o.Org)if(r.Dst===o.Dst||n.fixUpperEdge||i.fixUpperEdge||r.Dst!==t.event&&o.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;r.Org===o.Org&&r.Dst===o.Dst&&(e.addWinding(o,r),e.deleteRegion(t,n),t.mesh.delete(r),n=e.regionAbove(i))}},e.connectRightVertex=function(t,n,i){var r,o=i.Onext,s=e.regionBelow(n),a=n.eUp,l=s.eUp,c=!1;a.Dst!==l.Dst&&e.checkForIntersect(t,n),ei.vertEq(a.Org,t.event)&&(t.mesh.splice(o.Oprev,a),n=e.topLeftRegion(t,n),o=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),s),c=!0),ei.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,s,null),c=!0),c?e.addRightEdges(t,n,i.Onext,o,o,!0):(r=ei.vertLeq(l.Org,a.Org)?l.Oprev:a,r=t.mesh.connect(i.Lprev,r),e.addRightEdges(t,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,i){var r,o,s,a,l;return ei.vertEq((r=n.eUp).Org,i)?(pi(!1),void e.spliceMergeVertices(t,r,i.anEdge)):ei.vertEq(r.Dst,i)?(pi(!1),n=e.topRightRegion(n),o=a=(s=(l=e.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(pi(o!==s),e.deleteRegion(t,l),t.mesh.delete(s),s=o.Oprev),t.mesh.splice(i.anEdge,s),ei.edgeGoesLeft(o)||(o=null),void e.addRightEdges(t,n,s.Onext,a,o,!0)):(t.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(t.mesh.delete(r.Onext),n.fixUpperEdge=!1),t.mesh.splice(i.anEdge,r),void e.sweepEvent(t,i))},e.connectLeftVertex=function(t,n){var i,r,o,s,a,l,c=new fk;if(c.eUp=n.anEdge.Sym,i=t.dict.search(c).key,r=e.regionBelow(i)){if(a=r.eUp,0===ei.edgeSign((s=i.eUp).Dst,n,s.Org))return void e.connectLeftDegenerate(t,i,n);o=ei.vertLeq(a.Dst,s.Dst)?i:r,i.inside||o.fixUpperEdge?(l=o===i?t.mesh.connect(n.anEdge.Sym,s.Lnext):t.mesh.connect(a.Dnext,n.anEdge).Sym,o.fixUpperEdge?e.fixUpperEdge(t,o,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,n)):e.addRightEdges(t,i,n.anEdge,n.anEdge,null,!0)}},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var i=n.anEdge;null===i.activeRegion;)if((i=i.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var r=e.topLeftRegion(t,i.activeRegion);pi(null!==r);var o=e.regionBelow(r),s=o.eUp,a=e.finishLeftRegions(t,o,null);a.Onext===s?e.connectRightVertex(t,r,a):e.addRightEdges(t,r,a.Onext,s,s,!0)},e.addSentinel=function(t,n,i,r){var o=new fk,s=t.mesh.makeEdge();s.Org.s=i,s.Org.t=r,s.Dst.s=n,s.Dst.t=r,t.event=s.Dst,o.eUp=s,o.windingNumber=0,o.inside=!1,o.fixUpperEdge=!1,o.sentinel=!0,o.dirty=!1,o.nodeUp=t.dict.insert(o)},e.initEdgeDict=function(t){t.dict=new Tke(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],r=t.bmin[0]-n,o=t.bmax[0]+n,a=t.bmax[1]+i;e.addSentinel(t,r,o,t.bmin[1]-i),e.addSentinel(t,r,o,a)},e.doneEdgeDict=function(t){for(var n,i=0;null!==(n=t.dict.min().key);)n.sentinel||(pi(n.fixUpperEdge),pi(1==++i)),pi(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,i,r,o=t.mesh.eHead;for(n=o.next;n!==o;n=i)i=n.next,r=n.Lnext,ei.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,r,n),t.mesh.delete(n),r=(n=r).Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n))},e.initPriorityQ=function(t){var n,i,r,o=0;for(i=(r=t.mesh.vHead).next;i!==r;i=i.next)o++;for(n=t.pq=new Ake(o+=8,ei.vertLeq),i=(r=t.mesh.vHead).next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i===r&&(n.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,n){var i,r,o;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,pi((o=i.anEdge).Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,n){var i,r;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(i=t.pq.extractMin());){for(;null!==(r=t.pq.min())&&ei.vertEq(r,i);)r=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,r.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),kke=function(){function e(){this.mesh=new pY,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Gr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},e.prototype.normalize_=function(t){var n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),t[0]/=n,t[1]/=n,t[2]/=n},e.prototype.longAxis_=function(t){var n=0;return Math.abs(t[1])>Math.abs(t[0])&&(n=1),Math.abs(t[2])>Math.abs(t[n])&&(n=2),n},e.prototype.computeNormal_=function(t){var n,i,r,o,s,a,l=[0,0,0],c=[0,0,0],d=[0,0,0],h=[0,0,0],p=[0,0,0],g=[null,null,null],v=[null,null,null],y=this.mesh.vHead;n=y.next;for(var b=0;b<3;++b)c[b]=o=n.coords[b],v[b]=n,l[b]=o,g[b]=n;for(n=y.next;n!==y;n=n.next)for(var P=0;P<3;++P)(o=n.coords[P])<c[P]&&(c[P]=o,v[P]=n),o>l[P]&&(l[P]=o,g[P]=n);var S=0;if(l[1]-c[1]>l[0]-c[0]&&(S=1),l[2]-c[2]>l[S]-c[S]&&(S=2),c[S]>=l[S])return t[0]=0,t[1]=0,void(t[2]=1);for(a=0,d[0]=(i=v[S]).coords[0]-(r=g[S]).coords[0],d[1]=i.coords[1]-r.coords[1],d[2]=i.coords[2]-r.coords[2],n=y.next;n!==y;n=n.next)h[0]=n.coords[0]-r.coords[0],h[1]=n.coords[1]-r.coords[1],h[2]=n.coords[2]-r.coords[2],p[0]=d[1]*h[2]-d[2]*h[1],p[1]=d[2]*h[0]-d[0]*h[2],p[2]=d[0]*h[1]-d[1]*h[0],(s=p[0]*p[0]+p[1]*p[1]+p[2]*p[2])>a&&(a=s,t[0]=p[0],t[1]=p[1],t[2]=p[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var n,r,t=this.mesh.fHead,i=this.mesh.vHead,o=0,s=t.next;s!==t;s=s.next)if(!((r=s.anEdge).winding<=0))do{o+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext}while(r!==s.anEdge);if(o<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var i,r,t=this.mesh.vHead,n=[0,0,0],o=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),o=!0),i=this.sUnit,r=this.tUnit;var s=this.longAxis_(n);i[s]=0,i[(s+1)%3]=1,i[(s+2)%3]=0,r[s]=0,r[(s+1)%3]=0,r[(s+2)%3]=n[s]>0?1:-1;for(var a=t.next;a!==t;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);o&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,n){t.winding+=n.winding,t.Sym.winding+=n.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,n){var i,r;if((i=n.anEdge).Lnext===i||i.Lnext.Lnext===i)throw"Mono region invalid";for(;ei.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;ei.vertLeq(i.Org,i.Dst);i=i.Lnext);for(r=i.Lprev;i.Lnext!==r;)if(ei.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(ei.edgeGoesLeft(r.Lnext)||ei.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)r=t.connect(r.Lnext,r).Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(ei.edgeGoesRight(i.Lprev)||ei.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)i=t.connect(i,i.Lprev).Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)r=t.connect(r.Lnext,r).Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var n,i=t.fHead.next;i!==t.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var n,i=t.fHead.next;i!==t.fHead;i=n)n=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,n,i){for(var r,o=t.eHead.next;o!==t.eHead;o=r)r=o.next,o.Rface.inside!==o.Lface.inside?o.winding=o.Lface.inside?n:-n:i?t.delete(o):o.winding=0},e.prototype.getNeighbourFace_=function(t){return t.Rface&&t.Rface.inside?t.Rface.n:-1},e.prototype.outputPolymesh_=function(t,n,i,r){var o,l,s=0,a=0;i>3&&t.mergeConvexFaces(i);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,d.inside){o=d.anEdge,l=0;do{-1===(c=o.Org).n&&(c.n=a,a++),l++,o=o.Lnext}while(o!==d.anEdge);if(l>i)throw"Face vertex greater that support polygon";d.n=s,++s}for(this.elementCount=s,n===Os.CONNECTED_POLYGONS&&(s*=2),this.elements=[],this.elements.length=s*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a,c=t.vHead.next;c!==t.vHead;c=c.next)if(-1!==c.n){var h=c.n*r;this.vertices[h+0]=c.coords[0],this.vertices[h+1]=c.coords[1],r>2&&(this.vertices[h+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}var p=0;for(d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){o=d.anEdge,l=0;do{this.elements[p++]=(c=o.Org).n,l++,o=o.Lnext}while(o!==d.anEdge);for(var g=l;g<i;++g)this.elements[p++]=-1;if(n===Os.CONNECTED_POLYGONS){o=d.anEdge;do{this.elements[p++]=this.getNeighbourFace_(o),o=o.Lnext}while(o!==d.anEdge);for(var v=l;v<i;++v)this.elements[p++]=-1}}},e.prototype.outputContours_=function(t,n){var i,r,o=0,s=0;this.vertexCount=0,this.elementCount=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do{this.vertexCount++,i=i.Lnext}while(i!==r);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,d=0;for(o=0,a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){s=0,r=i=a.anEdge;do{this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,s++,i=i.Lnext}while(i!==r);this.elements[d++]=o,this.elements[d++]=s,o+=s}},e.prototype.addContour=function(t,n){null===this.mesh&&(this.mesh=new pY),t<2&&(t=2),t>3&&(t=3);for(var i=null,r=0;r<n.length;r+=t)null===i?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],i.Org.coords[2]=t>2?n[r+2]:0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,n,i,r,o,s){if(void 0===t&&(t=Gr.ODD),void 0===n&&(n=Os.POLYGONS),void 0===s&&(s=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,o&&(this.normal[0]=o[0],this.normal[1]=o[1],this.normal[2]=o[2]),this.windingRule=t,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),Ike.computeInterior(this,s);var a=this.mesh;return n===Os.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),s&&a.check(),n===Os.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},e}();function Pf(e){var t=e.windingRule,n=void 0===t?Gr.ODD:t,i=e.elementType,r=void 0===i?Os.POLYGONS:i,o=e.polySize,s=void 0===o?3:o,a=e.vertexSize,l=void 0===a?2:a,c=e.normal,d=void 0===c?[0,0,1]:c,h=e.contours,p=void 0===h?[]:h,g=e.strict,v=void 0===g||g,y=e.debug,b=void 0!==y&&y;if(!p&&v)throw new Error("Contours can't be empty");if(p){var P=new kke;e.edgeCreateCallback&&(P.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(P.vertexIdCallback=e.vertexIdCallback);for(var S=0;S<p.length;S++)P.addContour(l||2,p[S]);return P.tesselate(n,r,s,l,d,v),{vertices:P.vertices,vertexIndices:P.vertexIndices,vertexCount:P.vertexCount,elements:P.elements,elementCount:P.elementCount,mesh:b?P.mesh:void 0}}}var mk=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`),this.buffer=new ArrayBuffer(e*mk.eSize);let i=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*i,3*e),r+=3*e,this.normals=new Float32Array(this.buffer,r*i,3*e),r+=3*e,this.uvs=new Float32Array(this.buffer,r*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let i=new ArrayBuffer(e*mk.eSize),r=Float32Array.BYTES_PER_ELEMENT,o=0,s=new Float32Array(i,o*r,3*e);o+=3*e;let a=new Float32Array(i,o*r,3*e);o+=3*e;let l=new Float32Array(i,o*r,2*e);t?(s.set(this.positions.subarray(0,3*this.size)),a.set(this.normals.subarray(0,3*this.size)),l.set(this.uvs.subarray(0,2*this.size))):(s.set(this.positions),a.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=s,this.normals=a,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let n=this.size;return this.size=t,n}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},vY=mk;vY.eSize=8*Float32Array.BYTES_PER_ELEMENT;var Rke=Eu(Bve()),gk={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},yY={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},bY={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},vk=(e,t)=>([n,i])=>(i<n&&(i+=t),(e>=n?e:e+t)<=i),yk=class extends Xn{constructor(e,t,n=0,i=12,r=3,o=Gr.ODD,s=!1){super(),this.forPathBevel=s,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=r;let h,p,g,a=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(Z=>{let ee=Z.extractShapePointsToFlatArray([],i),oe=[];for(let ce=ee.length-1;ce>=1;ce-=2)oe.push(ee[ce-1],ee[ce-0]);return oe}),c=[],d=[];for(let Z=0;Z<a.length;Z+=2)d.push([a[Z],a[Z+1]]);c.push(d);for(let Z=0;Z<l.length;Z++){let ee=l[Z],oe=[];for(let ce=0;ce<ee.length;ce+=2)oe.push([ee[ce],ee[ce+1]]);c.push(oe)}h=e.isText?.1*(new wH).setFromPoints(e.points.map(Z=>Z.position)).getSize(new Ue).length():0===c[0].length?n:(0,Rke.default)(c).distance,n<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(n,h,t/2),this._bevelSegments=Math.floor(r));try{p=Pf({windingRule:o,elementType:Os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch{p=gk}try{g=Pf({windingRule:Gr.ODD,elementType:Os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{g=yY}if(!p)throw new Error("error generating geometry");let v=p.elementCount;if(g){p.elementCount+=g.elementCount;for(let Z=0;Z<g.elements.length;Z++)p.elements.push(g.elements[Z]+(Z%2==0?p.vertexCount:0));for(let Z=0;Z<g.vertexIndices.length;Z++)p.vertexIndices.push(g.vertexIndices[Z]+p.vertexCount);for(let Z=0;Z<g.vertices.length;Z++)p.vertices.push(g.vertices[Z])}let y=1/0,b=-1/0,P=1/0,S=-1/0;for(let Z=0,ee=p.vertexCount;Z<ee;Z++){let oe=2*Z,ce=p.vertices[oe+0],de=p.vertices[oe+1];ce<y&&(y=ce),ce>b&&(b=ce),de<P&&(P=de),de>S&&(S=de)}this._minX=y,this._minY=P,this._width=b-y,this._height=S-P,this._buffer=new vY(this._computeBufferEstimatedSize(p));let O=[],A=[];for(let Z=p.elementCount-1;Z>=0;Z--){let ee=Z>=v,oe=2*Z,ce=p.elements[oe+0],de=p.elements[oe+1],he=ce+de,Pe={start:ce,count:de,normals:[],continuous:[],concave:[]},we=ce,_e=he-1,ve=ce+1,ke=this._shape.roundedCurves.length;do{let Be=we-ce,gt=p.vertices[2*we+0],Ze=p.vertices[2*we+1],yt=p.vertices[2*ve+0],nt=p.vertices[2*ve+1],zt=gt-p.vertices[2*_e+0],It=Ze-p.vertices[2*_e+1],Ot=Math.sqrt(zt*zt+It*It);zt/=Ot,It/=Ot;let vn=gt-yt,yn=Ze-nt,xn=Math.sqrt(vn*vn+yn*yn);vn/=xn,yn/=xn,Pe.normals[2*Be+0]=-yn,Pe.normals[2*Be+1]=vn,Pe.concave[Be]=zt*yn-It*vn>0;let Dn=p.vertexIndices[we];if(Array.isArray(Dn))Pe.continuous[Be]=!1;else{let[ln,sn]=this._shape.getCurveIndexFromVertexId(Dn-1,!0);if(sn>0&&sn<1)Pe.continuous[Be]=!0;else{let Vn=1===sn?ln+1:ln-1;Vn=(Vn+ke)%ke;let ti=1===sn?0:1,Te=this._shape.roundedCurves[ln].getTangent(sn),Me=this._shape.roundedCurves[Vn].getTangent(ti);Pe.continuous[Be]=Te.dot(Me)>.95}}ee&&(Pe.normals[2*Be+0]*=-1,Pe.normals[2*Be+1]*=-1),[_e,we,ve]=[we,ve,ve+1],ve>=he&&(ve-=de)}while(ve!==ce+1);let ze=[];ze.push({bevelI:0,angle:0,size:0,boundary:{vertices:p.vertices.slice(2*ce,2*he),vertexCount:de,vertexIndices:new Array(de).fill(!0).map((Be,Xe)=>[Xe,Xe]),elements:[0,de],elementCount:1,mesh:null},reverseMap:[],insetPoints:p.vertices.slice(2*ce,2*he)});let Le=0;for(let Be=1;Be<=this._bevelSegments;Be++){let Xe=Be/this._bevelSegments*Math.PI/2,Ge=(1-Math.cos(Xe))*this._bevel,gt=[],Ze=[],yt=[],nt=[],zt=0;for(let Ot=0;Ot<de;Ot++){let vn=2*Ot,yn=(Ot-1+de)%de*2,xn=p.vertices[2*Pe.start+vn+0],Dn=p.vertices[2*Pe.start+vn+1],ln=-Pe.normals[yn+0]*Ge,sn=-Pe.normals[yn+1]*Ge,Vn=-Pe.normals[vn+0]*Ge,ti=-Pe.normals[vn+1]*Ge;if(Pe.concave[Ot]||!Pe.concave[Ot]&&ee){let Te=Math.atan2(sn,ln),Me=Math.atan2(ti,Vn);Me>Te&&(Me-=2*Math.PI);let ct=Me-Te;if(Pe.continuous[Ot]||ee){let Xt=Te+ct/2,fe=Math.cos(Xt)*Ge,Tt=Math.sin(Xt)*Ge;gt[2*zt+0]=xn+fe*(ee?-1:1),gt[2*zt+1]=Dn+Tt*(ee?-1:1),nt[zt]=Ot,zt++}else{let Xt=Math.max(1,Math.floor(i/4*Math.abs(ct)/Math.PI));for(let fe=0;fe<=Xt;fe++){let Tt=Te+ct*(fe/Xt),Bn=Math.cos(Tt)*Ge,pn=Math.sin(Tt)*Ge;gt[2*zt+0]=xn+Bn,gt[2*zt+1]=Dn+pn,nt[zt]=Ot,zt++}}}else gt[2*zt+0]=xn+ln,gt[2*zt+1]=Dn+sn,nt[zt]=Ot,Ze[Ot]=zt,zt++,gt[2*zt+0]=xn,gt[2*zt+1]=Dn,nt[zt]=Ot,zt++,gt[2*zt+0]=xn+Vn,gt[2*zt+1]=Dn+ti,nt[zt]=Ot,yt[Ot]=zt,zt++}let It=Pf({windingRule:Gr.POSITIVE,elementType:Os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[gt],edgeCreateCallback:Ot=>{let vn=Ot.Org.idx,yn=nt[vn],xn=nt[(vn+1)%nt.length];Ot.idx=[yn,xn],Ot.Sym.idx=[xn,yn]},vertexIdCallback:Ot=>{let vn=Ot.Lprev.idx;return[vn?vn[1]:0,Ot.idx?Ot.idx[0]:0]}});if(!It)throw console.log("Error"),new Error(`error generating bevel geometry for ${Be}'th loop`);if(!It.vertexCount){let Ot=(Be-1)/this._bevelSegments*Math.PI/2;Le=(1-Math.sin(Ot))*this._bevel;break}for(let Ot=0;Ot<It.vertexIndices.length;Ot++){let[vn,yn]=It.vertexIndices[Ot];if(vn===yn)continue;let xn=yn;yn<vn&&(xn+=de);for(let Dn=vn;Dn<xn;Dn++){let ln=Dn%de,sn=(Dn+1)%de;if(!Pe.continuous[ln]||!Pe.continuous[sn]){It.vertexIndices[Ot]=[vn,ln],It.vertexIndices.splice(Ot+1,0,[sn,yn]),It.vertices.splice(2*(Ot+1),0,It.vertices[2*Ot],It.vertices[2*Ot+1]);break}}}ze.push({bevelI:Be,angle:Xe,size:Ge,boundary:It,reverseMap:nt,insetPoints:gt})}let Ne=(Be,Xe,Ge)=>{let gt=0,Ze=Be.boundary.vertexIndices.length;for(;gt<Ze&&Ge(Be.boundary.vertexIndices[Xe]);)Xe=(Xe+1)%Ze,gt++;return gt},$e=O.length;for(let Be=1;Be<ze.length;Be++){let Xe=ze[Be-1],Ge=ze[Be],gt=Xe.boundary.vertexIndices.length,Ze=Ge.boundary.vertexIndices.length;if(!gt||!Ze)break;let yt=Pe.concave.length,nt=0,zt=vk(nt,de);for(;!Xe.boundary.vertexIndices.filter(zt).length||!Ge.boundary.vertexIndices.filter(zt).length;)nt++,zt=vk(nt,de);let It=Xe.boundary.vertexIndices.findIndex(zt),Ot=Ge.boundary.vertexIndices.findIndex(zt);do{It=(It+1)%gt}while(zt(Xe.boundary.vertexIndices[It]));do{Ot=(Ot+1)%Ze}while(zt(Ge.boundary.vertexIndices[Ot]));nt=(nt+1)%de;let Vn,ti,vn=nt,yn=0,ln=this._buildBevelVert(Pe,Xe,(It-1+gt)%gt,void 0,yn),sn=this._buildBevelVert(Pe,Ge,(Ot-1+Ze)%Ze,void 0,yn),Te=!1;do{yn=(nt||yt)/yt,zt=vk(nt,de);let Me=Ne(Xe,It,zt),ct=Ne(Ge,Ot,zt),Xt=Te;if(Te=!1,Me&&!ct){for(let fe=0;fe<Me;fe++)Vn=this._buildBevelVert(Pe,Xe,(It+fe)%gt,fe/(Me-1),yn),O.push(ln.topN,Vn.topP,sn.topN),!1===s&&O.push(Vn.bottomP,ln.bottomN,sn.bottomN),ln=Vn;Te=!0}else if(!Me&&ct)for(let fe=0;fe<ct;fe++)ti=this._buildBevelVert(Pe,Ge,(Ot+fe)%Ze,fe/(ct-1),yn),O.push(sn.topN,ln.topP,ti.topP),!1===s&&O.push(ln.bottomP,sn.bottomN,ti.bottomP),sn=ti;else if(Me&&ct)if(Vn=this._buildBevelVert(Pe,Xe,It,0,yn),ti=this._buildBevelVert(Pe,Ge,Ot,0,yn),Xt?(O.push(ln.topN,ti.topP,sn.topN),O.push(ln.topN,Vn.topP,ti.topP),!1===s&&(O.push(ti.bottomP,ln.bottomN,sn.bottomN),O.push(ti.bottomP,Vn.bottomP,ln.bottomN))):(O.push(sn.topN,ln.topN,Vn.topP),O.push(sn.topN,Vn.topP,ti.topP),!1===s&&(O.push(Vn.bottomP,ln.bottomN,sn.bottomN),O.push(Vn.bottomP,sn.bottomN,ti.bottomP))),ln=Vn,sn=ti,Me===ct)for(let fe=1;fe<Me;fe++)Vn=this._buildBevelVert(Pe,Xe,(It+fe)%gt,fe/(Me-1),yn),ti=this._buildBevelVert(Pe,Ge,(Ot+fe)%Ze,fe/(ct-1),yn),O.push(ln.topN,Vn.topP,sn.topN),O.push(sn.topN,Vn.topP,ti.topP),!1===s&&(O.push(Vn.bottomP,ln.bottomN,sn.bottomN),O.push(Vn.bottomP,sn.bottomN,ti.bottomP)),ln=Vn,sn=ti;else if(Me>ct){let fe=Me/ct,Tt=0;for(let Bn=1;Bn<Me;Bn++)Vn=this._buildBevelVert(Pe,Xe,(It+Bn)%gt,Bn/(Me-1),yn),O.push(ln.topN,Vn.topP,sn.topN),!1===s&&O.push(Vn.bottomP,ln.bottomN,sn.bottomN),ln=Vn,Bn>(Tt+1)*fe&&(Tt++,ti=this._buildBevelVert(Pe,Ge,(Ot+Tt)%Ze,Tt/(ct-1),yn),O.push(sn.topN,Vn.topP,ti.topP),!1===s&&O.push(Vn.bottomP,sn.bottomN,ti.bottomP),sn=ti)}else{let fe=ct/Me,Tt=0;for(let Bn=1;Bn<ct;Bn++)ti=this._buildBevelVert(Pe,Ge,(Ot+Bn)%Ze,Bn/(ct-1),yn),O.push(sn.topN,Vn.topP,ti.topP),!1===s&&O.push(Vn.bottomP,sn.bottomN,ti.bottomP),sn=ti,Bn>(Tt+1)*fe&&(Tt++,Vn=this._buildBevelVert(Pe,Xe,(It+Tt)%gt,Tt/(Me-1),yn),O.push(ln.topN,Vn.topP,sn.topN),!1===s&&O.push(Vn.bottomP,ln.bottomN,sn.bottomN),ln=Vn)}It=(It+Me)%gt,Ot=(Ot+ct)%Ze,nt=(nt+1)%yt}while(nt!==vn)}if(!1===s&&this._depth>2*this._bevel&&this._buildWall(ze,Pe,O),ee){let Be=[];for(let Xe=O.length-1;Xe>=$e+2;Xe-=3)Be.push(O[Xe-0],O[Xe-1],O[Xe-2]);O.splice($e,O.length-$e,...Be)}if(ee){let Be=[];for(let Xe=ze[ze.length-1].boundary.vertices.length-1;Xe>=1;Xe-=2)Be.push(ze[ze.length-1].boundary.vertices[Xe-1],ze[ze.length-1].boundary.vertices[Xe-0]);A.push(Be)}if(!ee){let Xe,Be=ze[ze.length-1];try{Xe=Pf({windingRule:ze.length>1?Gr.POSITIVE:Gr.ODD,elementType:Os.POLYGONS,vertexSize:2,strict:!0,contours:[Be.insetPoints,...A]})}catch{Xe=bY}if(!Xe)throw new Error("Error generating geometry for surface");0===l.length&&this._bevel<h&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let Ge=0;Ge<3*Xe.elementCount;Ge+=3){let gt=this._buildSurfaceVert(Xe,Xe.elements[Ge+0],Le),Ze=this._buildSurfaceVert(Xe,Xe.elements[Ge+1],Le),yt=this._buildSurfaceVert(Xe,Xe.elements[Ge+2],Le);O.push(gt.top,Ze.top,yt.top),!1===s&&O.push(yt.bottom,Ze.bottom,gt.bottom)}}this.vertexCache={}}this._buffer.shrink();let H=new ui(Uint32Array.from(O),1),U=new ui(this._buffer.positions,3),X=new ui(this._buffer.normals,3),Y=new ui(this._buffer.uvs,2);U.needsUpdate=!0,X.needsUpdate=!0,Y.needsUpdate=!0,H.needsUpdate=!0,this.setAttribute("position",U),this.setAttribute("normal",X),this.setAttribute("uv",Y),this.setIndex(H)}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let i=e[0];for(let r=0,o=i.boundary.vertexCount;r<o;r++){let s=this._buildBevelVert(t,i,r),a=this._buildBevelVert(t,i,(r+1)%o);n.push(a.topP,s.topN,s.bottomN),n.push(a.topP,s.bottomN,a.bottomP)}}_buildSurfaceVert(e,t,n){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let r=e.vertices[2*t+0],o=e.vertices[2*t+1],s=(r-this._minX)/this._width,a=(o-this._minY)/this._height;this.forPathBevel&&(a=1);let l=this._buffer.get(this.forPathBevel?1:2),c=3*l,d=2*l,h={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=r,this._buffer.positions[c+1]=o,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-n,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[d+0]=s,this._buffer.uvs[d+1]=a,!1===this.forPathBevel&&(this._buffer.positions[c+3]=r,this._buffer.positions[c+4]=o,this._buffer.positions[c+5]=n,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[d+2]=s,this._buffer.uvs[d+3]=a),this.vertexCache[i]=h,h}_buildBevelVert(e,t,n,i=1,r){let o=`${t.bevelI}:${n}`;if(o in this.vertexCache&&0!==r&&1!==r&&(!r||r===this.vertexCache[o].pathBevelUCoord))return this.vertexCache[o];let l,c,d,h,[s,a]=t.boundary.vertexIndices[n];s!==a?(c=s,l=a,h=!1,d=e.continuous[c]&&e.continuous[l]):(l=s,c=(l-1+e.count)%e.count,h=e.concave[l]&&t.bevelI>0,d=e.continuous[l]||h);let p=Math.cos(t.angle),g=Math.sin(t.angle),v=2*n,y=2*l,b=2*c,P=t.boundary.vertices[v+0],S=t.boundary.vertices[v+1],O=(1-g)*this._bevel,A=(P-this._minX)/this._width,H=(S-this._minY)/this._height;this.forPathBevel&&(void 0!==r&&(A=r),H=1);let U=e.normals[y+0],X=e.normals[y+1],Y=e.normals[b+0],Z=e.normals[b+1];if(h){U+=(Y-U)*(1-i),X+=(Z-X)*(1-i);let we=Math.sqrt(U*U+X*X);U/=we,X/=we}let ee=this._buffer.get(this.forPathBevel?d?1:2:d?2:4),oe=3*ee,ce=2*ee,de={i:n,fi:l,topP:ee+0,topN:ee+0,bottomP:ee+1,bottomN:ee+1,pathBevelUCoord:r};return this._buffer.positions[oe+0]=P,this._buffer.positions[oe+1]=S,this._buffer.positions[oe+2]=(this.forPathBevel?this._bevel:this._depth)-O,this._buffer.normals[oe+0]=U*p,this._buffer.normals[oe+1]=X*p,this._buffer.normals[oe+2]=g,this._buffer.uvs[ce+0]=A,this._buffer.uvs[ce+1]=H,!1===this.forPathBevel&&(this._buffer.positions[oe+3]=P,this._buffer.positions[oe+4]=S,this._buffer.positions[oe+5]=O,this._buffer.normals[oe+3]=U*p,this._buffer.normals[oe+4]=X*p,this._buffer.normals[oe+5]=-g,this._buffer.uvs[ce+2]=H,this._buffer.uvs[ce+3]=A),d||(this.forPathBevel?(ee+=1,oe+=3,ce+=2):(ee+=2,oe+=6,ce+=4),de.topP=ee+0,de.bottomP=ee+1,this._buffer.positions[oe+0]=P,this._buffer.positions[oe+1]=S,this._buffer.positions[oe+2]=(this.forPathBevel?this._bevel:this._depth)-O,this._buffer.normals[oe+0]=Y*p,this._buffer.normals[oe+1]=Z*p,this._buffer.normals[oe+2]=g,this._buffer.uvs[ce+0]=A,this._buffer.uvs[ce+1]=H,!1===this.forPathBevel&&(this._buffer.positions[oe+3]=P,this._buffer.positions[oe+4]=S,this._buffer.positions[oe+5]=O,this._buffer.normals[oe+3]=Y*p,this._buffer.normals[oe+4]=Z*p,this._buffer.normals[oe+5]=-g,this._buffer.uvs[ce+2]=H,this._buffer.uvs[ce+3]=A)),this.vertexCache[o]=de,de}clone(){let e=new yk(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=ZM(this.userData),e}},_Y=class extends Xn{constructor(e,t=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=Gr.ODD,this.elementType=Os.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Gr.ODD,elementType:Os.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let o,l,c,i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(p=>p.extractShapePointsToFlatArray([],this._curveSegments)),s=!0,a=!0;for(let p=0,g=i.length/2;p<g;p++){let v=2*p,y=i[v+0],b=i[v+1];if(void 0!==l&&y!==l&&(s=!1),void 0!==c&&b!==c&&(a=!1),l=y,c=b,!s&&!a)break}if(!s&&!a)try{o=Pf({contours:[i,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{o=gk}let d=o?.vertexCount??1,h=o?.elementCount??1;if(this._positionAttribute=new ui(new Float32Array(3*d),3),this._normalAttribute=new ui(new Float32Array(3*d),3),this._uvAttribute=new ui(new Float32Array(2*d),2),this._indexAttribute=new ui(new Uint32Array(3*h),1),o){let p=1/0,g=-1/0,v=1/0,y=-1/0;for(let S=0,O=d;S<O;S++){let A=2*S,H=o.vertices[A+0],U=o.vertices[A+1];H<p&&(p=H),H>g&&(g=H),U<v&&(v=U),U>y&&(y=U)}let b=g-p,P=y-v;for(let S=0,O=d;S<O;S++){let A=2*S,H=o.vertices[A+0],U=o.vertices[A+1],X=(H-p)/b,Y=(U-v)/P;this._positionAttribute.setXYZ(S,H,U,0),this._normalAttribute.setXYZ(S,0,0,1),this._uvAttribute.setXY(S,X,Y)}for(let S=0,O=h;S<O;S++){let A=3*S,U=o.elements[A+1],X=o.elements[A+2];this._indexAttribute.setX(A+0,o.elements[A+0]),this._indexAttribute.setX(A+1,U),this._indexAttribute.setX(A+2,X)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,3*(o?.elementCount??1))}clone(){let e=new _Y(this._shape,this._curveSegments);return e.userData=ZM(this.userData),e}},xY=class extends yk{constructor(e,t,n=0,i=12,r=3,o=Gr.ODD){super(e,t,n,i,r,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return 2*e.vertexCount*(2+this._bevelSegments)}_buildWall(e,t,n){let i=e[0];for(let r=0,o=i.boundary.vertexCount;r<o;r++){let s=this._buildBevelVert(t,i,r),a=this._buildBevelVert(t,i,(r+1)%o);n.push(a.topP,s.topN,s.bottomN),n.push(a.topP,s.bottomN,a.bottomP)}}clone(){let e=new xY(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=ZM(this.userData),e}},yg=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Gr.ODD},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),o=Math.abs(n.depth??0),s=e.shape??t?.shape,a=s?.roundness??n.roundness;void 0!==s&&(s instanceof Jo?(s.width!==i||s.height!==r)&&s.applySize(i,r):s=new Jo(i,r).fromJSON(s),void 0!==e.parameters?.roundness&&e.parameters?.roundness>0&&s.update());let l=s??new Jo(i,r);return{parameters:Object.assign(n,{width:i,height:r,depth:o,roundness:a}),shape:l}}static build(e){let a,{depth:t,extrudeBevelSize:n,extrudeBevelSegments:i,subdivisions:r,roundness:o,windingRule:s}=e.parameters;return e.shape.roundness=o,a=t<=0?new _Y(e.shape,r,{windingRule:s}):new xY(e.shape,t,n,r,i,s),Object.assign(a,{userData:{...e,type:"VectorGeometry"}})}},CY=2*Math.PI,bk=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return n.angle=En.clamp(n.angle,0,360),{shape:e.shape&&e.shape instanceof Jo?e.shape:new Jo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let g,{width:t,height:n,spikes:i,angle:r,innerRadius:o,depth:s,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,p=function Nke(e,t,n,i,r,o){if(i>=CY)return r>30||r%4==0?(function Lke(e,t,n,i=0,r=0,o=0){let s=.5522847498,a=t*s,l=n*s;e.addPoint(ZP(r-t,o,r-t,o-l,r-t,o+l)),e.addPoint(ZP(r,o+n,r-a,o+n,r+a,o+n)),e.addPoint(ZP(r+t,o,r+t,o+l,r+t,o-l)),e.addPoint(ZP(r,o-n,r+a,o-n,r-a,o-n)),i>0&&PY(e,t,n,i)}(e,t,n,o),Math.round(r/4)):wY(e,i,r,t,n,o);let s={x:0,y:n},a=(i=Math.max(i,.001))+.5*Math.PI,l={x:Math.cos(a)*t,y:Math.sin(a)*n},c=function Dke({px:e,py:t,cx:n,cy:i,rx:r,ry:o,largeArcFlag:s,sweepFlag:a}){let l=[];if(0===r||0===o)return[];let c=(e-n)/2,d=(t-i)/2;if(0===c&&0===d)return[];r=Math.abs(r),o=Math.abs(o);let h=Math.pow(c,2)/Math.pow(r,2)+Math.pow(d,2)/Math.pow(o,2);h>1&&(r*=Math.sqrt(h),o*=Math.sqrt(h));let p=function Eke(e,t,n,i,r,o,s,a,l,c){let d=Math.pow(r,2),h=Math.pow(o,2),p=Math.pow(s,2),g=Math.pow(a,2),v=d*h-d*g-h*p;v<0&&(v=0),v/=d*g+h*p,v=Math.sqrt(v)*(l===c?-1:1);let y=v*r/o*a,b=v*-o/r*s,P=y+(e+n)/2,S=b+(t+i)/2,O=(s-y)/r,A=(a-b)/o,H=(-s-y)/r,U=(-a-b)/o,X=uY(1,0,O,A),Y=uY(O,A,H,U);return!c&&Y>0&&(Y-=uk),c&&Y<0&&(Y+=uk),{centerx:P,centery:S,ang1:X,ang2:Y}}(e,t,n,i,r,o,c,d,s,a),{ang1:g,ang2:v}=p,{centerx:y,centery:b}=p,P=Math.abs(v)/(uk/4);Math.abs(1-P)<1e-7&&(P=1);let S=Math.max(Math.ceil(P),1);v/=S;for(let O=0;O<S;O++)l.push(Oke(g,v)),g+=v;return l.map(O=>{let{x:A,y:H}=pk(O[0],r,o,y,b),{x:U,y:X}=pk(O[1],r,o,y,b),{x:Y,y:Z}=pk(O[2],r,o,y,b);return{x1:A,y1:H,x2:U,y2:X,x:Y,y:Z}})}({px:s.x,py:s.y,cx:l.x,cy:l.y,rx:t,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length==0?function Fke(e,t,n,i,r,o,s,a){let l=Math.round(r/i.length);e.addPoint(r1(t,n));for(let c=0,d=i.length;c<d;c++){let h=i[c],p=e.points[c],g=r1(h.x,h.y);p.controls[1].position.set(h.x1,h.y1),g.controls[0].position.set(h.x2,h.y2),e.addPoint(g)}return a>0?MY(e,o,s,a):e.addPoint(r1(0,0)),l}(e,s.x,s.y,c,r,t,n,o):wY(e,i,r,t,n,o)}(c,.5*t,.5*n,r*Math.PI/180,i,o);return c.isClosed=!0,c.update(),0===r?(g=new Xn,g.setAttribute("position",new _n([],3))):g=yg.create({shape:c,parameters:{subdivisions:p,depth:s,extrudeBevelSize:a,extrudeBevelSegments:l}}),Object.assign(g,{userData:{...e,type:"EllipseGeometry"}})}};function wY(e,t,n,i,r,o){let s=-t/n;for(let a=0;a<=n;a++){let l=s*a,c=Math.sin(l)*i,d=Math.cos(l)*r;e.addPoint(r1(c,d))}return t<CY?o>0?MY(e,i,r,o):e.addPoint(r1(0,0)):(e.removePoint(e.points[e.points.length-1]),o>0&&PY(e,i,r,o)),1}function r1(e,t){return new t1(En.generateUUID(),new Ue(e,t))}function ZP(e,t,n,i,r,o){let s=r1(e,t);return s.controls[0].position.set(n,i),s.controls[1].position.set(r,o),s}function MY(e,t,n,i){SY(e,t,n,i).forEach(r=>e.addPoint(r))}function PY(e,t,n,i){let r=SY(e,t,n,i),o=new Jo;r.forEach(s=>o.addPoint(s)),o.isClosed=!0,e.shapeHoles.push(o)}function SY(e,t,n,i){let r=i*t/100,o=r*(Math.abs(n)/Math.abs(t)),s=new Ue(r/t,o/n),a=e.points.map(l=>{let c=l.clone();return c.uuid=En.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(s);let c=l.controls[0].position.clone().multiply(s),d=l.controls[1].position.clone().multiply(s);l.controls[0].position.copy(d),l.controls[1].position.copy(c)}),a}var _k=new cv([0,0,0],1),OY=class extends Xn{constructor(e=!0,t=1,n=1,i=1,r=1,o=1,s=1,a=1,l=1,c=1,d=1,h=1){if(super(),0===o)return;let p=e&&1===o;p&&(h=0),d>100&&(d=100),0===d&&(h=0);let S,O,A,H,U,X,Y,Z,g=()=>new te,v=new te,y=g(),b=g(),P=g(),ee=g(),oe=g(),ce=g(),de=g(),he=g(),Pe=g(),we=g(),_e=g(),ve=n-2*a+.001,ke=ve/o,ze=Math.ceil(s*o),Le=ze+1,Ne=ve/ze,$e=-ve/2,Be=c+1,Xe=2*Math.PI/c,Ge=Math.PI/2/h,Ze=Math.min((1-d/100)*a,a-.01),yt=a-Ze,nt=0,It=2*h+2,Ot=Be*It/2,vn=Ot+Be*Le,yn=Math.max(0,Be*(Le+It)),[xn,Dn,ln]=[3,3,2].map(cn=>Array(yn*cn).fill(0)),sn=[],Vn=r-a;function ti(cn,Hn){let zn=Math.PI/2;X=Hn*Ne,Z=2*Math.PI*(X%ke)/ke+zn,X+=$e,Y=Math.sin(Z)*Vn,U=Math.cos(Z)*Vn,e?cn.set(U,Y,X):cn.set(U,X,Y)}ti(v,-1e-10),ti(y,0),ee.copy(v),ti(v,1);let Te=v.distanceTo(y),Me=p?0:yt+Ze,ct=Te*ze+2*Me,Xt=Ze,fe=ct-Me;for(let cn=0;cn<=ze;cn++){ti(b,cn),_e.subVectors(b,ee).normalize(),ee.copy(b),Pe.copy(b).setComponent(+e+1,0).normalize(),we.crossVectors(_e,Pe).normalize();let Hn=0===cn,zn=cn===ze,mi=Hn?3*Math.PI/2:Ge,ri=Hn?Xt:fe,mr=Hn?Be:vn,Xr=Hn?0:yn-Be,hr=_e.clone().multiplyScalar(Hn?-yt:yt).add(b),et=_e.clone().multiplyScalar(Hn?-1:1).normalize();for(let At=0;At<Be;At++){let Jt=At*Xe;if(oe.addVectors(v.copy(Pe).multiplyScalar(a*Math.cos(Jt)),y.copy(we).multiplyScalar(a*Math.sin(Jt))),ce.copy(oe).normalize(),Hn||zn){p||(nt=Xr+At,[0,1,2].forEach(hn=>{xn[3*nt+hn]=hr.getComponent(hn),Dn[3*nt+hn]=et.getComponent(hn)}),ln[2*nt]=+zn,ln[2*nt+1]=At/c),y.copy(ce).multiplyScalar(Ze),P.addVectors(b,y);for(let hn=0;hn<h;hn++){let Zn=hn*Ge+mi;de.addVectors(v.copy(_e).multiplyScalar(yt*Math.sin(Zn)),y.copy(ce).multiplyScalar(yt*Math.cos(Zn))),he.copy(de).normalize(),y.addVectors(P,de),de.normalize(),nt=mr+hn*Be+At,[0,1,2].forEach(Io=>{xn[3*nt+Io]=y.getComponent(Io),Dn[3*nt+Io]=he.getComponent(Io)});let di=+Hn+Math.sin(Zn);ln[2*nt]=(ri+yt*di)/ct,ln[2*nt+1]=At/c}}y.addVectors(b,oe),nt=Ot+cn*Be+At,[0,1,2].forEach(hn=>{xn[3*nt+hn]=y.getComponent(hn),Dn[3*nt+hn]=ce.getComponent(hn)}),ln[2*nt]=(Me+cn*Te)/ct,ln[2*nt+1]=At/c}}let Tt=Le+2*h+2,[pn,Ht]=[+p,Tt-1];for(let cn=pn;cn<=Ht-1;cn++){let Hn=p&&cn===Ht-1;for(let zn=0;zn<Be-1;zn++)S=cn*Be+zn,O=S+1,A=(Hn?zn:S)+Be,H=(Hn?zn+1:O)+Be,0===cn?sn.push(O,H,A):cn===Tt-2?sn.push(S,O,A):sn.push(S,O,A,O,H,A)}this.setIndex(sn),this.setAttribute("position",new _n(xn,3)),this.setAttribute("normal",new _n(Dn,3)),this.setAttribute("uv",new _n(ln,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let r,o,s,a,e=this.userData.parameters,t=Math.ceil(e.tubularSegments),n=e.radialSegments+1,i=Array.from(this.getIndex().array),l=6*(t-1)*e.radialSegments,c=t,d=c===t;for(let h=0;h<e.radialSegments;h++)r=c*n+h,o=r+1,s=(d?h:r)+n,a=(d?h+1:o)+n,i[l++]=r,i[l++]=o,i[l++]=s,i[l++]=o,i[l++]=a,i[l++]=s;return i.length=l,_k.array=i,_k.count=i.length,_k}},EY=class extends sk{constructor(e=1,t=.2,n=4){let i=(1+Math.sqrt(5))/2,s="IcosahedronGeometry";super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],s,e,t,n),this.type=s}static fromJSON(e){return new EY(e.radius,e.corner,e.cornerSides)}},Nh=new qt,xk=new Fr,JP=new te,e2=class extends Ca{constructor(){super(),this.uuid=En.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new Ms).getNormalMatrix(e);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(let o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Nh.makeRotationX(e),this.applyMatrix4(Nh),this}rotateY(e){return Nh.makeRotationY(e),this.applyMatrix4(Nh),this}rotateZ(e){return Nh.makeRotationZ(e),this.applyMatrix4(Nh),this}translate(e,t,n){return Nh.makeTranslation(e,t,n),this.applyMatrix4(Nh),this}scale(e,t,n){return Nh.makeScale(e,t,n),this.applyMatrix4(Nh),this}lookAt(e){return xk.lookAt(e),xk.updateMatrix(),this.applyMatrix4(xk.matrix),this}fromBufferGeometry(e){let t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,o=i.normal,s=i.color,a=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let h=0;h<r.count;h++)t.vertices.push((new te).fromBufferAttribute(r,h)),void 0!==s&&t.colors.push((new ni).fromBufferAttribute(s,h));function c(h,p,g,v){let y=void 0===s?[]:[t.colors[h].clone(),t.colors[p].clone(),t.colors[g].clone()],b=void 0===o?[]:[(new te).fromBufferAttribute(o,h),(new te).fromBufferAttribute(o,p),(new te).fromBufferAttribute(o,g)],P=new Ck(h,p,g,b,y,v);t.faces.push(P),void 0!==a&&t.faceVertexUvs[0].push([(new Ue).fromBufferAttribute(a,h),(new Ue).fromBufferAttribute(a,p),(new Ue).fromBufferAttribute(a,g)]),void 0!==l&&t.faceVertexUvs[1].push([(new Ue).fromBufferAttribute(l,h),(new Ue).fromBufferAttribute(l,p),(new Ue).fromBufferAttribute(l,g)])}let d=e.groups;if(d.length>0)for(let h=0;h<d.length;h++){let p=d[h],g=p.start;for(let y=g,b=g+p.count;y<b;y+=3)void 0!==n?c(n.getX(y),n.getX(y+1),n.getX(y+2),p.materialIndex):c(y,y+1,y+2,p.materialIndex)}else if(void 0!==n)for(let h=0;h<n.count;h+=3)c(n.getX(h),n.getX(h+1),n.getX(h+2));else for(let h=0;h<r.count;h+=3)c(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(JP).negate(),this.translate(JP.x,JP.y,JP.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new qt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new te,t=new te;for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b];e.subVectors(this.vertices[r.c],s),t.subVectors(o,s),e.cross(t),e.normalize(),r.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)t[n]=new te;if(e){let n=new te,i=new te;for(let r=0,o=this.faces.length;r<o;r++){let s=this.faces[r],a=this.vertices[s.a],l=this.vertices[s.b];n.subVectors(this.vertices[s.c],l),i.subVectors(a,l),n.cross(i),t[s.a].add(n),t[s.b].add(n),t[s.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];t[r.a].add(r.normal),t[r.b].add(r.normal),t[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)t[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],o=r.vertexNormals;3===o.length?(o[0].copy(t[r.a]),o[1].copy(t[r.b]),o[2].copy(t[r.c])):(o[0]=t[r.a].clone(),o[1]=t[r.b].clone(),o[2]=t[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,n=this.faces.length;t<n;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,o=i.vertexNormals.length;r<o;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let e=new e2;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let r=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let s=0,a=this.faces.length;s<a;s++){let l=new te,c={a:new te,b:new te,c:new te};r.push(l),o.push(c)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let r=0,o=this.faces.length;r<o;r++){let s=this.faces[r],l=i.vertexNormals[r];i.faceNormals[r].copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ls),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Fl),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,n=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i,r=this.vertices.length,o=this.vertices,s=e.vertices,a=this.faces,l=e.faces,c=this.colors,d=e.colors;void 0!==t&&(i=(new Ms).getNormalMatrix(t));for(let h=0,p=s.length;h<p;h++){let g=s[h].clone();void 0!==t&&g.applyMatrix4(t),o.push(g)}for(let h=0,p=d.length;h<p;h++)c.push(d[h].clone());for(let h=0,p=l.length;h<p;h++){let v,y,g=l[h],b=g.vertexNormals,P=g.vertexColors,S=new Ck(g.a+r,g.b+r,g.c+r);S.normal.copy(g.normal),void 0!==i&&S.normal.applyMatrix3(i).normalize();for(let O=0,A=b.length;O<A;O++)v=b[O].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),S.vertexNormals.push(v);S.color.copy(g.color);for(let O=0,A=P.length;O<A;O++)y=P[O],S.vertexColors.push(y.clone());S.materialIndex=g.materialIndex+n,a.push(S)}for(let h=0,p=e.faceVertexUvs.length;h<p;h++){let g=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let v=0,y=g.length;v<y;v++){let b=g[v],P=[];for(let S=0,O=b.length;S<O;S++)P.push(b[S].clone());this.faceVertexUvs[h].push(P)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(e=4){let t={},n=[],i=[],r=Math.pow(10,e);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],d=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);void 0===t[d]?(t[d]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[t[d]]}let o=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let d=[c.a,c.b,c.c];for(let h=0;h<3;h++)if(d[h]===d[(h+1)%3]){o.push(a);break}}for(let a=o.length-1;a>=0;a--){let l=o[a];this.faces.splice(l,1);for(let c=0,d=this.faceVertexUvs.length;c<d;c++)this.faceVertexUvs[c].splice(l,1)}let s=this.vertices.length-n.length;return this.vertices=n,s}setFromPoints(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){let i=e[t];this.vertices.push(new te(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;e.sort(function n(a,l){return a.materialIndex-l.materialIndex});let o,s,i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];i&&i.length===t&&(o=[]),r&&r.length===t&&(s=[]);for(let a=0;a<t;a++){let l=e[a]._id;o&&o.push(i[l]),s&&s.push(r[l])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let g=this.parameters;for(let v in g)void 0!==g[v]&&(e[v]=g[v]);return e}let t=[];for(let g=0;g<this.vertices.length;g++){let v=this.vertices[g];t.push(v.x,v.y,v.z)}let n=[],i=[],r={},o=[],s={},a=[],l={};for(let g=0;g<this.faces.length;g++){let v=this.faces[g],y=!0,b=!1,P=void 0!==this.faceVertexUvs[0][g],S=v.normal.length()>0,O=v.vertexNormals.length>0,A=1!==v.color.r||1!==v.color.g||1!==v.color.b,H=v.vertexColors.length>0,U=0;if(U=c(U,0,0),U=c(U,1,y),U=c(U,2,b),U=c(U,3,P),U=c(U,4,S),U=c(U,5,O),U=c(U,6,A),U=c(U,7,H),n.push(U),n.push(v.a,v.b,v.c),n.push(v.materialIndex),P){let X=this.faceVertexUvs[0][g];n.push(p(X[0]),p(X[1]),p(X[2]))}if(S&&n.push(d(v.normal)),O){let X=v.vertexNormals;n.push(d(X[0]),d(X[1]),d(X[2]))}if(A&&n.push(h(v.color)),H){let X=v.vertexColors;n.push(h(X[0]),h(X[1]),h(X[2]))}}function c(g,v,y){return y?g|1<<v:g&~(1<<v)}function d(g){let v=g.x.toString()+g.y.toString()+g.z.toString();return void 0!==r[v]||(r[v]=i.length/3,i.push(g.x,g.y,g.z)),r[v]}function h(g){let v=g.r.toString()+g.g.toString()+g.b.toString();return void 0!==s[v]||(s[v]=o.length,o.push(g.getHex())),s[v]}function p(g){let v=g.x.toString()+g.y.toString();return void 0!==l[v]||(l[v]=a.length/2,a.push(g.x,g.y)),l[v]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e}clone(){return(new e2).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let h=0,p=t.length;h<p;h++)this.vertices.push(t[h].clone());let n=e.colors;for(let h=0,p=n.length;h<p;h++)this.colors.push(n[h].clone());let i=e.faces;for(let h=0,p=i.length;h<p;h++)this.faces.push(i[h].clone());for(let h=0,p=e.faceVertexUvs.length;h<p;h++){let g=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let v=0,y=g.length;v<y;v++){let b=g[v],P=[];for(let S=0,O=b.length;S<O;S++)P.push(b[S].clone());this.faceVertexUvs[h].push(P)}}let r=e.morphTargets;for(let h=0,p=r.length;h<p;h++){let g={};if(g.name=r[h].name,void 0!==r[h].vertices){g.vertices=[];for(let v=0,y=r[h].vertices.length;v<y;v++)g.vertices.push(r[h].vertices[v].clone())}if(void 0!==r[h].normals){g.normals=[];for(let v=0,y=r[h].normals.length;v<y;v++)g.normals.push(r[h].normals[v].clone())}this.morphTargets.push(g)}let o=e.morphNormals;for(let h=0,p=o.length;h<p;h++){let g={};if(void 0!==o[h].vertexNormals){g.vertexNormals=[];for(let v=0,y=o[h].vertexNormals.length;v<y;v++){let b=o[h].vertexNormals[v],P={};P.a=b.a.clone(),P.b=b.b.clone(),P.c=b.c.clone(),g.vertexNormals.push(P)}}if(void 0!==o[h].faceNormals){g.faceNormals=[];for(let v=0,y=o[h].faceNormals.length;v<y;v++)g.faceNormals.push(o[h].faceNormals[v].clone())}this.morphNormals.push(g)}let s=e.skinWeights;for(let h=0,p=s.length;h<p;h++)this.skinWeights.push(s[h].clone());let a=e.skinIndices;for(let h=0,p=a.length;h<p;h++)this.skinIndices.push(a[h].clone());let l=e.lineDistances;for(let h=0,p=l.length;h<p;h++)this.lineDistances.push(l[h]);let c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());let d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new jke).fromGeometry(this),t=new Xn,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",t2.call(new ui(n,3),e.vertices)),e.normals.length>0){let i=new Float32Array(3*e.normals.length);t.setAttribute("normal",t2.call(new ui(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(3*e.colors.length);t.setAttribute("color",DY.call(new ui(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(2*e.uvs.length);t.setAttribute("uv",AY.call(new ui(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",AY.call(new ui(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let r=[],o=e.morphTargets[i];for(let s=0,a=o.length;s<a;s++){let l=o[s],c=new _n(3*l.data.length,3);c.name=l.name,r.push(t2.call(c,l.data))}t.morphAttributes[i]=r}if(e.skinIndices.length>0){let i=new _n(4*e.skinIndices.length,4);t.setAttribute("skinIndex",TY.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new _n(4*e.skinWeights.length,4);t.setAttribute("skinWeight",TY.call(i,e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Xn,n=e.geometry;if(e.isPoints||e.isLine){let i=new _n(3*n.vertices.length,3),r=new _n(3*n.colors.length,3);if(t.setAttribute("position",t2.call(i,n.vertices)),t.setAttribute("color",DY.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let o=new _n(n.lineDistances.length,1);t.setAttribute("lineDistance",Vke.call(o,n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}};e2.prototype.isGeometry=!0;var jke=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let n,i,r,t=[],o=e.faces;for(i=0;i<o.length;i++){let s=o[i];s.materialIndex!==r&&(r=s.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){let l,t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,a=s.length;if(a>0){l=[];for(let b=0;b<a;b++)l[b]={name:s[b].name,data:[]};this.morphTargets.position=l}let h,c=e.morphNormals,d=c.length;if(d>0){h=[];for(let b=0;b<d;b++)h[b]={name:c[b].name,data:[]};this.morphTargets.normal=h}let p=e.skinIndices,g=e.skinWeights,v=p.length===n.length,y=g.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let b=0;b<t.length;b++){let P=t[b];this.vertices.push(n[P.a],n[P.b],n[P.c]);let S=P.vertexNormals;if(3===S.length)this.normals.push(S[0],S[1],S[2]);else{let A=P.normal;this.normals.push(A,A,A)}let O=P.vertexColors;if(3===O.length)this.colors.push(O[0],O[1],O[2]);else{let A=P.color;this.colors.push(A,A,A)}if(!0===r){let A=i[0][b];void 0!==A?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",b),this.uvs.push(new Ue,new Ue,new Ue))}if(!0===o){let A=i[1][b];void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",b),this.uvs2.push(new Ue,new Ue,new Ue))}for(let A=0;A<a;A++){let H=s[A].vertices;l[A].data.push(H[P.a],H[P.b],H[P.c])}for(let A=0;A<d;A++){let H=c[A].vertexNormals[b];h[A].data.push(H.a,H.b,H.c)}v&&this.skinIndices.push(p[P.a],p[P.b],p[P.c]),y&&this.skinWeights.push(g[P.a],g[P.b],g[P.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},Ck=class{constructor(e,t,n,i,r,o=0){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new te,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new ni,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function Vke(e){return this.array.set(e),this}function DY(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new ni),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}function AY(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Ue),t[n++]=o.x,t[n++]=o.y}return this}function t2(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new te),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}function TY(e){let t=this.array,n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new bi),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}var Hke=["a","b","c"];function Gke(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function wk(e,t,n){let i=Math.min(e,t),r=Math.max(e,t);return n.get(i+"_"+r)}function Mk(e,t,n,i,r,o){let c,s=Math.min(e,t),a=Math.max(e,t),l=s+"_"+a;i.has(l)?c=i.get(l):(c={a:n[s],b:n[a],newEdge:null,faces:[]},i.set(l,c)),c.faces.push(r),o[e].edges.push(c),o[t].edges.push(c)}function n2(e,t,n,i,r){e.push(new Ck(t,n,i,void 0,void 0,r))}function o1(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function r2(e,t,n,i){e.push([t.clone(),n.clone(),i.clone()])}var Ws=new te,IY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Jo?e.shape:new Jo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,spikes:i,cornerRadius:r,depth:o,extrudeBevelSize:s,extrudeBevelSegments:a}=e.parameters,l=e.shape,c=.5*t,d=.5*n,g=2*Math.PI/i;for(let y=0;y<i;y++){let b=g*y,P=0+Math.sin(b)*c,S=0+Math.cos(b)*d;l.addPoint(l.createPoint(P,S))}l.isClosed=!0;for(let y=0,b=l.points.length;y<b;y++)l.points[y].roundness=r;l.roundness=r,l.update();let v=yg.create({shape:l,parameters:{roundness:r,depth:o,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(v,{userData:{...e,type:"PolygonGeometry"}})}};function R_(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function Pk(e,t,n,i,r,o){let s=t.clone().sub(e),a=n.clone().sub(e),l=s.angleTo(a);if(s.normalize(),a.normalize(),i===r){let c=s.add(a).normalize();o.copy(e).addScaledVector(c,i/Math.sin(l/2))}else{let c=s.angleTo(a);o.copy(e),o.addScaledVector(s,r/Math.sin(c)),o.addScaledVector(a,i/Math.sin(c))}}function $ke(e,t,n){let i=e.clone().sub(t),r=n.clone().sub(t);return i.projectOnVector(r),i.add(t)}var Qke=class extends Xn{constructor(e=.5,t=1,n=4,i=1,r=!1,o=0,s=4){super(),n=Math.floor(Math.max(3,n)),i=Math.floor(i),s=Math.floor(s);let oe,a=[],l=[],c=[],d=[],h=0,p=t/2,g=Math.PI/n,v=e*Math.cos(Math.PI/n),y=2*Math.PI/n,b=(n-2)*Math.PI/n,P=Math.PI-b,S=new te(0,-p,0),O=new te(0,p,0),A=new Ue(e,-p),H=new Ue(v,-p),U=new Ue(0,O.y).sub(H),X=new Ue(0,O.y).sub(A),Y=new Ue(U.y,-U.x).normalize(),Z=new Ue(X.y,-X.x).normalize(),ee=e*Math.cos(Math.PI/n)*Math.tan((Math.PI-U.angle())/2)-1e-8;o=Math.min(o,ee);{let ve=new te(Y.x,Y.y,0),ke=new te(Math.cos(y)*ve.x,ve.y,Math.sin(y)*ve.x);oe=ve.angleTo(ke)}let ce=o/Math.tan((Math.PI-U.angle())/2),de=o/Math.tan((Math.PI-oe)/2),he=new te;if(!r){l.push(S.x,S.y,S.z),c.push(0,-1,0),d.push(0,0);let ve=h++,ke=[],ze=A.clone(),Le=ce/Math.cos(Math.PI/n);ze.x-=Le;for(let Ne=0;Ne<n;Ne++){let $e=Ne/n*Math.PI*2+g;R_(ze,new Ue(Math.sin($e),Math.cos($e)),he),l.push(he.x,he.y,he.z),c.push(0,-1,0),d.push(0,0),ke.push(h++)}for(let Ne=0;Ne<ke.length;Ne++)a.push(ke[Ne],ve,ke[(Ne+1)%ke.length])}let Pe=[];{let ve=new te,ke=new te,ze=new te,Le=new te,Ne=new te,$e=new te;for(let Be=0;Be<n;Be++){let Xe=Be/n*Math.PI*2+g,Ge=(Be+.5)/n*Math.PI*2+g,gt=(Be+1)/n*Math.PI*2+g,Ze=new Ue(Math.sin(Xe),Math.cos(Xe)),yt=new Ue(Math.sin(Ge),Math.cos(Ge)),nt=new Ue(Math.sin(gt),Math.cos(gt));R_(A,Ze,ke),R_(A,nt,ze),R_(Y,yt,ve),Pk(O,ke,ze,de,de,Le),l.push(Le.x,Le.y,Le.z),Pk(ke,O,ze,de,ce,Ne),l.push(Ne.x,Ne.y,Ne.z),Pk(ze,ke,O,ce,de,$e),l.push($e.x,$e.y,$e.z),c.push(ve.x,ve.y,ve.z),c.push(ve.x,ve.y,ve.z),c.push(ve.x,ve.y,ve.z),d.push(0,0),d.push(0,0),d.push(0,0);let zt=h++,It=h++,Ot=h++;if(a.push(zt,It,Ot),o>0){{let xn=ke.clone().add(ze).multiplyScalar(.5),Dn=O.clone().sub(xn).normalize(),ln=S.clone().sub(xn).normalize().add(Dn).normalize().multiplyScalar(-1);we(xn,$e.clone().sub(Ne),ln,U.angle())}let vn,yn;{let xn=new te;R_(Z,nt,xn);let Dn=$e.clone().add(Le).multiplyScalar(.5);Dn=$ke(Dn,ze,O);let ln=$e.clone().sub(Le);[vn,yn]=we(Dn,ln,xn,oe,Le.y)}{let xn=vn,Dn=xn.clone().setY(0).normalize(),ln=new te(0,-1,0),sn=Dn.clone().cross(ln);_e(xn,Dn,ln,sn)}Pe.concat(yn);{let xn=U.angle(),Dn=Math.PI-xn,ln=O.clone();ln.y-=o/Math.sin(xn-Math.PI/2);let sn=new te,Vn=[];for(let Te=0;Te<s;Te++){let Me=[],ct=Math.PI/2-Dn*Te/s,Xt=Math.cos(ct),fe=Math.sin(ct),Tt=Ge;for(let Bn=0;Bn<=Te;Bn++){let pn=Math.cos(Tt),Ht=Math.sin(Tt);ve.x=Xt*Ht,ve.y=fe,ve.z=Xt*pn,sn.copy(ln).addScaledVector(ve,o),l.push(sn.x,sn.y,sn.z),c.push(ve.x,ve.y,ve.z),d.push(0,0),Me.push(h++),Tt+=2*Math.PI/Te/n}Vn.push(Me)}yn.reverse(),Vn.push(yn);let ti=Vn.length-1;for(let Te=0;Te<ti;Te++){let Me=Vn[Te],ct=Vn[Te+1],Xt=Me.length-1;a.push(ct[1],Me[0],ct[0]);for(let fe=1;fe<=Xt;fe++)a.push(Me[fe],Me[fe-1],ct[fe]),a.push(ct[fe+1],Me[fe],ct[fe])}}}}}function we(ve,ke,ze,Le,Ne){let $e=-Le/2,Be=(Math.PI-Le)/2,Xe=ke.clone().normalize().cross(ze);ve.addScaledVector(ze,-o/Math.sin(Be));let Ge=new te,gt=new te,yt=h,nt=[];for(let zt=0;zt<=s;zt++){let It=$e+zt/s*Le;gt.set(0,0,0),gt.addScaledVector(Xe,Math.sin(It)),gt.addScaledVector(ze,Math.cos(It));for(let Ot=0;Ot<=1;Ot++){let vn=Ot/1-.5;if(Ge.copy(ve),Ge.addScaledVector(ke,vn),Ge.addScaledVector(gt,o),null!=Ne){let yn=Math.max(0,Ge.y-Ne);Ge.addScaledVector(ke,-yn/ke.y)}l.push(Ge.x,Ge.y,Ge.z),c.push(gt.x,gt.y,gt.z),d.push(0,0),0===Ot&&nt.push(h),h++}}for(let zt=0;zt<s;zt++)for(let It=0;It<1;It++){let Ot=yt+It+2*zt,vn=Ot+2,yn=vn+1,xn=Ot+1;a.push(Ot,vn,xn),a.push(vn,yn,xn)}return[ve.clone().addScaledVector(ke,.5),nt]}function _e(ve,ke,ze,Le){let Ne=Math.PI/2,$e=X.angle()-Ne,Be=[],Xe=new te,Ge=new te;for(let Ze=0;Ze<=s;Ze++){let yt=[],nt=Ze/s;for(let zt=0;zt<=Ze;zt++){let It=((Ze?zt/Ze:0)-.5)*P,Ot=Math.cos(It),vn=Math.sin(It),xn=(Ne+Math.atan(Math.tan($e)*Ot))*nt,Dn=Math.cos(xn),ln=Math.sin(xn);Xe.set(0,0,0),Xe.addScaledVector(ke,ln*Ot),Xe.addScaledVector(ze,Dn),Xe.addScaledVector(Le,ln*vn),Ge.copy(ve).addScaledVector(Xe,o),l.push(Ge.x,Ge.y,Ge.z),c.push(Xe.x,Xe.y,Xe.z),d.push(0,0),yt.push(h++)}Be.push(yt)}let gt=Be.length-1;for(let Ze=0;Ze<gt;Ze++){let yt=Be[Ze],nt=Be[Ze+1],zt=yt.length-1;a.push(yt[0],nt[1],nt[0]);for(let It=1;It<=zt;It++)a.push(yt[It-1],yt[It],nt[It]),a.push(yt[It],nt[It+1],nt[It])}}this.setIndex(a),this.setAttribute("position",new _n(l,3)),this.setAttribute("normal",new _n(c,3)),this.setAttribute("uv",new _n(d,2))}},Sk=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign(t?.ui??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Jo?e.shape:new Jo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:n,height:i,cornerRadius:r,cornerType:o,depth:s,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c={x:.5*n,y:.5*i},d={x:-c.x,y:-c.y},h={x:c.x,y:c.y};function p(A,H,U){return H>n&&U>i?Math.min(A*n/H,A*i/U):H>n?A*n/H:U>i?A*i/U:A}let g=[];g[0]=0===r[0]?0:p(r[0],r[0]+r[3],r[0]+r[1]),g[1]=0===r[1]?0:p(r[1],r[1]+r[2],r[1]+r[0]),g[2]=0===r[2]?0:p(r[2],r[2]+r[1],r[2]+r[3]),g[3]=0===r[3]?0:p(r[3],r[3]+r[0],r[3]+r[2]);let v=d.x,y=h.x,b=h.y,P=d.y;t.addPoint(t.createPoint(v,b)),t.addPoint(t.createPoint(y,b)),t.addPoint(t.createPoint(y,P)),t.addPoint(t.createPoint(v,P)),t.isClosed=!0;let S=!0;for(let A=0,H=t.points.length;A<H;A++)t.points[A].roundness=g[A],A>0&&g[A]!==g[A-1]&&(S=!1);S&&(t.roundness=g[0]),t.useCubicForRoundedCorners=1!==o,t.update();let O=yg.create({shape:t,parameters:{depth:s,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(O,{userData:{...e,type:"RectangleGeometry"}})}},eRe=class extends Xn{constructor(e=1,t=1,n=1,i=90,r=10,o=24){super(),this.type="BackdropGeometry";let s=[],a=[],l=[],c=.001;0==r&&(o=1),o=Math.max(1,Math.floor(o)),r=Math.min(r,100),i=Math.min(180-c,i),i*=Math.PI/180;let d=[],h=Math.PI/2,p=(gt=0,Ze=0,yt=0)=>new te(gt,Ze,yt),g=p(),v=p(),[y,b,P]=[t/2,e/2,n/2],S=-b,O=+b,[A,H,U]=[p(S,-y,+P),p(S,-y,-P),p(S,+y,-P)],X=(gt,Ze=!1)=>Math.sin(gt-Math.PI/(+Ze+1)),Y=(gt,Ze=!1)=>Math.cos(gt-Math.PI/(+Ze+1));U.y=Math.sin(i)*t-y;let Z=Math.cos(i)*t-P,ee=A.z-c;i<=h?(U.z=Math.min(Z,ee),U.z==ee&&(U.y-=(Z-ee)/Math.tan(h-i))):H.z=Math.min(H.z-Z-P,A.z-c),g.subVectors(A,H),v.subVectors(U,H);let oe=Math.min(g.length(),v.length())*r/100,ce=oe*Math.tan(i/2),de=oe/Math.cos(i/2),he=g.clone().normalize().add(v.normalize()).setLength(de).add(H);g.set(0,X(i,!0),Y(i,!0)),d.push([U,g.clone()]);let Pe=(Math.PI-i)/o;for(let gt=0;gt<=o;gt++){let Ze=h+i+gt*Pe;g.set(0,Math.sin(Ze)*ce,Math.cos(Ze)*ce),g.add(he),v.set(0,X(Ze),Y(Ze)),d.push([g.clone(),v.clone()])}d.push([A,p(0,1,0)]);let we=Math.sin(Pe/2)*ce*2,_e=d.length-1,ve=d[0][0].distanceTo(d[1][0]),ze=ve+we*o+d[_e-1][0].distanceTo(d[_e][0]);d[0].push(1);for(let gt=0;gt<=o;gt++)d[gt+1].push(1-(ve+gt*we)/ze);d[_e].push(0);let Be,Xe,Ge,[Le,Ne,$e]=d[0];for(let gt=1;gt<d.length;gt++)[Be,Xe,Ge]=d[gt],s.push(S,Le.y,Le.z,S,Be.y,Be.z,O,Le.y,Le.z,O,Le.y,Le.z,S,Be.y,Be.z,O,Be.y,Be.z),a.push(0,Ne.y,Ne.z,0,Xe.y,Xe.z,0,Ne.y,Ne.z,0,Ne.y,Ne.z,0,Xe.y,Xe.z,0,Xe.y,Xe.z),l.push(0,$e,0,Ge,1,$e,1,$e,0,Ge,1,Ge),[Le,Ne,$e]=[Be,Xe,Ge];this.setAttribute("position",new _n(s,3)),this.setAttribute("normal",new _n(a,3)),this.setAttribute("uv",new _n(l,2))}},kY=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Jo?e.shape:new Jo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n,innerRadiusPercent:i,spikes:r,cornerRadius:o,angle:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,d=e.shape,h=.5*t,p=.5*n,y=s*Math.PI/360/r,b=Math.PI/2*3*-1,P=h*i/100,S=p*i/100;if(3===r&&50===i){y=2*Math.PI/r;for(let A=0;A<r;A++){let H=y*A,U=0+Math.sin(H)*h,X=0+Math.cos(H)*p;d.addPoint(d.createPoint(U,X))}}else for(let A=0;A<r;A++){let H=0+Math.cos(b)*h,U=0+Math.sin(b)*p;d.addPoint(d.createPoint(H,U)),b+=y,H=0+Math.cos(b)*P,U=0+Math.sin(b)*S,d.addPoint(d.createPoint(H,U)),b+=y}d.isClosed=!0;for(let A=0,H=d.points.length;A<H;A++)d.points[A].roundness=o;d.roundness=o,d.update();let O=yg.create({shape:d,parameters:{roundness:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(O,{userData:{...e,type:"StarGeometry"}})}},fRe_hexStringToRgb=function pRe(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(i,r,o,s)=>String(r+r+o+o+s+s));let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},Dt=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Dt.version}static addUnaryOp(e){return Dt.max_unop_len=Math.max(e.length,Dt.max_unop_len),Dt.unary_ops[e]=1,Dt}static addBinaryOp(e,t,n){return Dt.max_binop_len=Math.max(e.length,Dt.max_binop_len),Dt.binary_ops[e]=t,n?Dt.right_associative.add(e):Dt.right_associative.delete(e),Dt}static addIdentifierChar(e){return Dt.additional_identifier_chars.add(e),Dt}static addLiteral(e,t){return Dt.literals[e]=t,Dt}static removeUnaryOp(e){return delete Dt.unary_ops[e],e.length===Dt.max_unop_len&&(Dt.max_unop_len=Dt.getMaxKeyLen(Dt.unary_ops)),Dt}static removeAllUnaryOps(){return Dt.unary_ops={},Dt.max_unop_len=0,Dt}static removeIdentifierChar(e){return Dt.additional_identifier_chars.delete(e),Dt}static removeBinaryOp(e){return delete Dt.binary_ops[e],e.length===Dt.max_binop_len&&(Dt.max_binop_len=Dt.getMaxKeyLen(Dt.binary_ops)),Dt.right_associative.delete(e),Dt}static removeAllBinaryOps(){return Dt.binary_ops={},Dt.max_binop_len=0,Dt}static removeLiteral(e){return delete Dt.literals[e],Dt}static removeAllLiterals(){return Dt.literals={},Dt}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new Dt(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return Dt.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!Dt.binary_ops[String.fromCharCode(e)]||Dt.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return Dt.isIdentifierStart(e)||Dt.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(Dt.hooks[e]){let n={context:this,node:t};return Dt.hooks.run(e,n),n.node}return t}searchHook(e){if(Dt.hooks[e]){let t={context:this};return Dt.hooks[e].find(function(n){return n.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===Dt.SPACE_CODE||e===Dt.TAB_CODE||e===Dt.LF_CODE||e===Dt.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions();return this.runHook("after-all",1===e.length?e[0]:{type:Dt.COMPOUND,body:e})}gobbleExpressions(e){let n,i,t=[];for(;this.index<this.expr.length;)if(n=this.code,n===Dt.SEMCOL_CODE||n===Dt.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())t.push(i);else if(this.index<this.expr.length){if(n===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,Dt.max_binop_len),t=e.length;for(;t>0;){if(Dt.binary_ops.hasOwnProperty(e)&&(!Dt.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Dt.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,i,r,o,s,a,l;if(o=this.gobbleToken(),!o||(t=this.gobbleBinaryOp(),!t))return o;for(r={value:t,prec:Dt.binaryPrecedence(t),right_a:Dt.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),i=[o,r,s];t=this.gobbleBinaryOp();){if(n=Dt.binaryPrecedence(t),0===n){this.index-=t.length;break}r={value:t,prec:n,right_a:Dt.right_associative.has(t)},l=t;let c=d=>r.right_a&&d.right_a?n>d.prec:n<=d.prec;for(;i.length>2&&c(i[i.length-2]);)s=i.pop(),t=i.pop().value,o=i.pop(),e={type:Dt.BINARY_EXP,operator:t,left:o,right:s},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),i.push(r,e)}for(a=i.length-1,e=i[a];a>1;)e={type:Dt.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:e},a-=2;return e}gobbleToken(){let e,t,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,Dt.isDecimalDigit(e)||e===Dt.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===Dt.SQUOTE_CODE||e===Dt.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===Dt.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,Dt.max_unop_len),n=t.length;n>0;){if(Dt.unary_ops.hasOwnProperty(t)&&(!Dt.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Dt.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;let r=this.gobbleToken();return r||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Dt.UNARY_EXP,operator:t,argument:r,prefix:!0})}t=t.substr(0,--n)}Dt.isIdentifierStart(e)?(i=this.gobbleIdentifier(),Dt.literals.hasOwnProperty(i.name)?i={type:Dt.LITERAL,value:Dt.literals[i.name],raw:i.name}:i.name===Dt.this_str&&(i={type:Dt.THIS_EXP})):e===Dt.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===Dt.PERIOD_CODE||t===Dt.OBRACK_CODE||t===Dt.OPAREN_CODE||t===Dt.QUMARK_CODE;){let n;if(t===Dt.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Dt.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===Dt.OBRACK_CODE?(e={type:Dt.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==Dt.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===Dt.OPAREN_CODE?e={type:Dt.CALL_EXP,arguments:this.gobbleArguments(Dt.CPAREN_CODE),callee:e}:(t===Dt.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:Dt.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let t,n,e="";for(;Dt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===Dt.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);Dt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,"e"===t||"E"===t){for(e+=this.expr.charAt(this.index++),t=this.char,("+"===t||"-"===t)&&(e+=this.expr.charAt(this.index++));Dt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);Dt.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return n=this.code,Dt.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(n===Dt.PERIOD_CODE||1===e.length&&e.charCodeAt(0)===Dt.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Dt.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,n=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===n){i=!0;break}if("\\"===r)switch(r=this.expr.charAt(this.index++),r){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=r}else e+=r}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:Dt.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(Dt.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,Dt.isIdentifierPart(e));)this.index++;return{type:Dt.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===e){n=!0,this.index++,e===Dt.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(r===Dt.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===Dt.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===Dt.CBRACK_CODE)for(let o=t.length;o<i;o++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{let o=this.gobbleExpression();(!o||o.type===Dt.COMPOUND)&&this.throwError("Expected comma"),t.push(o)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(Dt.CPAREN_CODE);if(this.code===Dt.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:Dt.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Dt.ARRAY_EXP,elements:this.gobbleArguments(Dt.CBRACK_CODE)}}},vRe=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][n?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(n){n.call(t&&t.context?t.context:t,t)})}};Object.assign(Dt,{hooks:vRe,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if("object"!=typeof t||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}}(Dt),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),Dt.max_unop_len=Dt.getMaxKeyLen(Dt.unary_ops),Dt.max_binop_len=Dt.getMaxKeyLen(Dt.binary_ops);var s1=e=>new Dt(e).parse();Object.getOwnPropertyNames(Dt).forEach(e=>{void 0===s1[e]&&"prototype"!==e&&(s1[e]=Dt[e])}),s1.Jsep=Dt;var _Re={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let n=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:i,alternate:r},n.operator&&e.binary_ops[n.operator]<=.9){let o=n;for(;o.right.operator&&e.binary_ops[o.right.operator]<=.9;)o=o.right;t.node.test=o.right,o.right=t.node,t.node=n}}else this.throwError("Expected :")}})}};function o2(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(r){r(n)}),(i=e.get("*"))&&i.slice().map(function(r){r(t,n)})}}}s1.plugins.register(_Re);var RY=class{constructor(e,t,n){var i=this;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(r=>r()),this.emitter=o2(),this._innerCallUserAPI=function(){var r=(0,Qn.Z)(function*(o){i.emitter.emit("start",{userAPIId:i.id}),i.isLoading=!0,i.isLoading=!1;try{i.result=yield function PRe(e,t){return Ok.apply(this,arguments)}(i.userAPI,o),i.error="null",i.emitter.emit("success",{userAPIId:i.id})}catch(s){let a=s.message?.split("_:_")?.[0]?.replace("status:","")??"null";i.error=a,i.result=null,i.emitter.emit("error",{userAPIId:i.id})}i.isLoading=!1,i.isPrefetched=!0,i.isLoaded=!0});return function(o){return r.apply(this,arguments)}}(),"OpenAI"===t?.integration?.type?this.result={content:""}:"GET"===t.method&&""!==t.url&&(this.prefetchPromise=this.prefetch(n)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=o_(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=void 0!==this.userAPI.debounce&&this.userAPI.debounce>0?o_(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}prefetch(e){var t=this;return(0,Qn.Z)(function*(){yield t.callUserAPI(e)})()}callUserAPI(e){var t=this;return(0,Qn.Z)(function*(){yield t._debouncedCallUserAPI(e)})()}update(e,t,n=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),""!==this.userAPI.url&&"GET"===this.userAPI.method&&n&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return Gs.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?Gs.zoom(this.result,e):this.result;if(function MRe(e){return"object"==typeof e&&null!==e}(t))return Object.entries(t);if(function wRe(e){return Array.isArray(e)}(t))return t.map((n,i)=>[i.toString(),n]);throw function CRe(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e}(t)?new Error("This path points to a value, use retrieveValue() instead. "+e?.join(".")):new Error("Path error"+e?.join("."))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function xRe(e){let t=new Headers;return e.headers.forEach(n=>{""!==n.data.key&&t.append(n.data.key,n.data.value)}),t}function Ok(){return Ok=(0,Qn.Z)(function*(e,t,n=new AbortController){let i,r=e.url,o=e.proxy?.enabled??!1;if(o)r=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;else if("OpenAI"===e.integration?.type){let a=s2(""===e.integration.prompt?[]:JSON.parse(e.integration.prompt),t),l=""===e.integration.behavior?[]:s2(JSON.parse(e.integration.behavior),t);i=`{\n\t\t\t"model": "${e.integration.model}",\n\t\t\t"messages": [${e.integration.useBehavior?`\n\t\t\t{\n\t\t\t\t"role": "system",\n\t\t\t\t"content": "${l}"\n\t\t\t},`:""}\n\t\t\t{\n\t\t\t\t"role": "user",\n\t\t\t\t"content": "${a}"\n\t\t\t}\n\t\t\t]\n\t\t}`}else"POST"===e.method&&e.body&&(i=s2(JSON.parse(e.body),t));let s=yield fetch(r,{method:o?"GET":e.method,headers:o?void 0:xRe(e),signal:n.signal,body:i});if(!s.ok)throw new Error("status:"+s.status+"_:_"+s.statusText);if("OpenAI"===e.integration?.type){let a=yield s.json();return o&&(a=a.response),{content:a.choices[0].message.content}}{let a=yield s.json();return o&&(a=a.response),a}}),Ok.apply(this,arguments)}var NY=(e,t)=>{if("string"==typeof e){let n=t.getVariable(e);if(n)return NY(n,t)}return Oa.isBoolean(e)?Oa.getDisplayedValue(e).toLowerCase():Oa.getDisplayedValue(e)},s2=(e,t)=>e.map((n,i)=>{if("text"in n)return n.text;if("type"in n){if("paragraph"===n.type)return(i>0?"\n":"")+s2(n.children,t);if("variable"===n.type){let r=t.getVariable(n.variableId);if(void 0!==r)return NY(r,t)}}return""}).join(""),SRe=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],ORe=["0","1","2","3","4","5","6","7","8","9","."],ERe=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function DRe(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}function FY(e,t,n="number"){let r,o,i="";for(let s=0;s<e.length;s++){let a=e[s];if("objType"in a&&"api"===a.objType){let l=JSON.parse(a.id),d=t.getUserAPI(l[0]);if(void 0!==d&&d instanceof RY){let h=d.retrieveValue(l.slice(1));void 0!==h&&(i+=h)}}else if("objType"in a&&"webhook"===a.objType){let l=JSON.parse(a.id),[c,d]=l,h=t.getUserWebhook(c);if(void 0!==h){let p=h.getParameterValue(d);void 0!==p&&(i+=p)}}else if("objType"in a&&"aiAssistant"===a.objType){let l=t.openAIRealtime;if("objId"in a&&void 0!==a.objId){let c;if(t.scene.data.objects.traverse((d,h)=>{let p=h.events?.find(g=>g.id===a.objId);p&&(c=p)}),void 0!==c&&"AIAssistantListener"===c.data.type){let d=l?.computeAnalysisForListenerEvent(c.data);if(void 0!==d){i+=d;continue}}}i+=l?.voice??0}else if("id"in a){let l=e[s-1];if(s>0&&"id"in l)return void console.error("Two variables in a row",e);let c=t.getVariable(a.id),d=Oa.getDisplayedValue(c);"number"===n&&Oa.isTextValue(c)&&Array.isArray(c.textValue)&&1===c.textValue.length?d=parseFloat(d).toString():"boolean"===n&&Oa.isBoolean(c)?d=c?"true":"false":"boolean"===n&&Oa.isTextValue(c)&&!Array.isArray(c.textValue)&&(d='"'+d+'"'),i+=d}else"string"!==n?"and"!==a.name?"or"!==a.name?"True"!==a.name?"False"!==a.name?"boolean"!==n||DRe(a.name)||ORe.includes(a.name)||SRe.includes(a.name)||ERe.includes(a.name.replace(/\($/g,""))?i+=a.name:i+='"'+a.name+'"':i+="false":i+="true":i+="||":i+="&&":('"'!==a.name&&("+"!==a.name||a.escaped)&&(i+=a.name),"+"===a.name&&!a.escaped&&"\\"===i[i.length-1]&&(i=i.slice(0,-1)+a.name))}if("string"===n)return i;if(0===e.length){if("number"===n)return 0;if("boolean"===n)return!1}try{r=s1(i)}catch(s){return void console.error(i,s)}try{o=yr(r)}catch(s){console.error(i,r,s)}return o}function yr(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return Number(yr(e.left)===yr(e.right));case"!=":return Number(yr(e.left)!==yr(e.right));case">":return Number(yr(e.left)>yr(e.right));case">=":return Number(yr(e.left)>=yr(e.right));case"<":return Number(yr(e.left)<yr(e.right));case"<=":return Number(yr(e.left)<=yr(e.right));case"+":return yr(e.left)+yr(e.right);case"-":return yr(e.left)-yr(e.right);case"*":return yr(e.left)*yr(e.right);case"/":return yr(e.left)/yr(e.right);case"%":return yr(e.left)%yr(e.right);case"&&":return yr(e.left)&&yr(e.right);case"||":return yr(e.left)||yr(e.right);case"^":return Math.pow(yr(e.left),yr(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-yr(e.argument);case"!":return Number(!yr(e.argument));default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if("Identifier"===e.callee.type){if("random"===e.callee.name){let t=0,n=1;if(e.arguments.length>=1)try{t=yr(e.arguments[0])}catch(i){console.warn(i)}if(e.arguments.length>=2)try{n=yr(e.arguments[1])}catch(i){console.warn(i)}return t=Math.min(n,t),n=Math.max(n,t),t+Math.random()*(n-t)}return Math[e.callee.name].apply(null,e.arguments.map(yr))}throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}s1.addBinaryOp("^",11,!0);var ARe=new qt,TRe=new qt,RRe=class extends Xn{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&1===this.inputs.parameters.extrusion.depth}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&1===e.depth&&function sRe(e,t){let n=2*Math.PI;return(e%n+n)%n==(t%n+n)%n}(e.twist,0)&&e.startScale===e.endScale)}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:n,offset:i}=this.inputs.parameters.extrusion;n=Math.max(0,Math.min(n,1)),i=Math.max(0,Math.min(i,1));let r=this.inputs.path.isClosed?e.length:e.length-1,o=Math.floor(i*r),s=this.inputs.path.isClosed?Math.ceil((n+i)*r):Math.ceil(Math.min(1,n+i)*r),a=Math.min(Math.max(2,s-o+1),r+2),l=[],c=[];for(let _e=0;_e<a;_e++){let ve=this.inputs.path.isClosed?(_e+o)%e.length:Math.min(_e+o,e.length-1);l.push(e[ve].clone()),c.push(t[ve].clone())}let d=(_e,ve,ke)=>{l[_e]=l[_e].clone().lerp(l[ve],ke),c[_e]=function IRe(e,t,n){let i=[new te,new te,new te],r=[new te,new te,new te];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(r[0],r[1],r[2]),i.forEach((o,s)=>{let a=r[s],l=En.lerp(o.length(),a.length(),n);o.lerp(a,n).setLength(l)}),(new qt).makeBasis(i[0],i[1],i[2])}(c[_e],c[ve],ke)},h=0,p=i*r%1;(!this.inputs.path.isClosed||n<=1)&&(p||0===i)&&(h=p,d(0,1,h));let g=0,v=(i+n)*r%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&i+n<1)&&v&&(g=v,d(l.length-1,l.length-2,1-g)),0===n){let _e=l.length-1;l[_e].copy(l[0]),c[_e].copy(c[0])}this._applyPathModifiers(c,h,g);let{bevel:y,bevelSides:b}=this.inputs.parameters.extrusion,P=y>0?this.inputs.parameters.extrusion.capType:"flat",S=5;"Custom"===this.inputs.parameters.extrusion.shape.type&&(S="low"===this.inputs.parameters.extrusion.shape.shapeQuality?5:12);let X,{regions:O,infos:A,vertices:H}=this._computeShapePoints(S),U=0;"round"===P&&(X=new yk(this.inputs.shapeData,2*y,y,S,b,void 0,!0),U=X.getAttribute("position").count);let Y=0,Z=0;A.sort((_e,ve)=>_e.start-ve.start),A.forEach(_e=>{_e.verticesStart=Y,_e.verticesCount=_e.continuous.reduce((ve,ke,ze)=>ve+(0!==ze&&ke?1:2),0),Z+=_e.verticesCount,Y=Z});let oe,ee=Z*a,ce=0;if(this._isOpenEnded()&&"flat"===P){try{oe=Pf({windingRule:Gr.ODD,elementType:Os.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:O})}catch{oe=bY}ce=oe.vertexCount}let de=ee+2*ce+2*U,he=ee+2*ce,Pe={positions:new Float32Array(3*de),normals:new Float32Array(3*de),uvs:new Float32Array(2*de)},we=[];if(A.forEach(_e=>{this._extrudeRegion(_e,H,c,l,Pe,we,this._isGeometryClosed()&&!this._isOpenEnded())}),oe&&(this._closeEnd(oe,ee,we,Pe,c[0],l[0],!1),this._closeEnd(oe,ee+ce,we,Pe,c[c.length-1],l[l.length-1],!0)),X){Pe.positions.set(X.getAttribute("position").array,3*he),Pe.normals.set(X.getAttribute("normal").array,3*he),Pe.uvs.set(X.getAttribute("uv").array,2*he);for(let ze=he;ze<he+U;ze++)Pe.uvs[2*ze+1]=1e-4;let _e=we.length;we.push(...X.getIndex().array.map(ze=>ze+he)),he+=U,Pe.positions.set(X.getAttribute("position").array,3*he),Pe.normals.set(X.getAttribute("normal").array,3*he),Pe.uvs.set(X.getAttribute("uv").array,2*he);let ve=we.length;we.push(...X.getIndex().array.map(ze=>ze+he)),this.setAttribute("position",new ui(Pe.positions,3)),this.setAttribute("normal",new ui(Pe.normals,3)),this.setAttribute("uv",new ui(Pe.uvs,2)),this.setIndex(we);let ke=ARe;ke.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(ke,he,de),ke.copy(c[0]).setPosition(l[0]).multiply(TRe.makeScale(1,1,-1)),this.applyMatrix4OnRange(ke,he-U,he),this.reverseIndicesOnRange(_e,ve)}else this.setAttribute("position",new ui(Pe.positions,3)),this.setAttribute("normal",new ui(Pe.normals,3)),this.setAttribute("uv",new ui(Pe.uvs,2)),this.setIndex(we)}_extractPathPoints(){let e=eY(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(n=>{t[t.length-1].distanceToSquared(n)>.001&&t.push(n)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],n=e.length,i=this.inputs.path.isClosed,r=new te,o=new te,s=new te,a=new te,l=new te(0,1,0);for(let v=0;v<n;v++){let b,P,y=e[v];b=0===v?i?e[e.length-2]:y.clone().multiplyScalar(2).sub(e[1]):e[v-1],P=v===n-1?i?e[1]:y.clone().multiplyScalar(2).sub(e[v-1]):e[v+1];let S=y.clone().sub(b).normalize(),O=P.clone().sub(y).normalize(),A=S.clone().add(O).normalize();s.copy(A),0===v&&(A.equals(l)||A.clone().negate().equals(l))&&l.set(0,0,1);let H=l.clone().cross(A).normalize(),U=A.clone().cross(H).normalize();l.copy(U),a.copy(H),0===v&&(r.copy(U),o.copy(A));let X=(new qt).makeBasis(H,U,A);t.push(X)}let c=i?o:s,d=i?r:new te(0,1,0),h=c.clone().cross(a).normalize(),p=Math.acos(d.dot(h));if(isNaN(p))return t;let g=d.clone().cross(h);c.dot(g)>0&&(p*=-1);for(let v=1;v<t.length;v++){let y=(new qt).makeRotationZ(p*v/t.length);t[v].multiply(y)}return t}_applyPathModifiers(e,t,n){let i=e.length,{angle:r,twist:o,startScale:s,endScale:a}=this.inputs.parameters.extrusion,l=new qt,c=new qt;return e.forEach((d,h)=>{let p=0===h?0:h===i-1?1:(h-t)/(i-(0===n?0:1)-(t+(1-n)));l.makeRotationZ(En.lerp(r,r+o,p)*En.DEG2RAD);let g=En.lerp(s,a,p);c.makeScale(g,g,g),d.multiply(l).multiply(c)}),e}_computeShapePoints(e=12,t=Gr.ODD){let o,s,n=this.inputs.shapeData,i=n.extractShapePointsToFlatArray([],e),r=n.shapeHoles.map(g=>{let v=g.extractShapePointsToFlatArray([],e),y=[];for(let b=v.length-1;b>=1;b-=2)y.push(v[b-1],v[b-0]);return y});try{o=Pf({windingRule:t,elementType:Os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{o=gk}try{s=Pf({windingRule:Gr.ODD,elementType:Os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]})}catch{s=yY}if(!o)throw new Error("error generating geometry");let a=o.elementCount;if(s){o.elementCount+=s.elementCount;for(let g=0;g<s.elements.length;g++)o.elements.push(s.elements[g]+(g%2==0?o.vertexCount:0));for(let g=0;g<s.vertexIndices.length;g++)o.vertexIndices.push(s.vertexIndices[g]+o.vertexCount);for(let g=0;g<s.vertices.length;g++)o.vertices.push(s.vertices[g])}let l=1/0,c=-1/0,d=1/0,h=-1/0;for(let g=0,v=o.vertexCount;g<v;g++){let y=2*g,b=o.vertices[y+0],P=o.vertices[y+1];b<l&&(l=b),b>c&&(c=b),P<d&&(d=P),P>h&&(h=P)}let p=[];for(let g=o.elementCount-1;g>=0;g--){let v=g>=a,y=2*g,b=o.elements[y+0],P=o.elements[y+1],S=b+P,O={start:b,count:P,normals:[],isHole:v,continuous:[],verticesStart:0,verticesCount:0};p.push(O);let A=b,H=S-1,U=b+1,X=n.roundedCurves.length;do{let Y=A-b,oe=o.vertices[2*A+0],ce=o.vertices[2*A+1],de=o.vertices[2*U+0],he=o.vertices[2*U+1],Pe=oe-o.vertices[2*H+0],we=ce-o.vertices[2*H+1],_e=Math.sqrt(Pe*Pe+we*we);Pe/=_e,we/=_e;let ve=oe-de,ke=ce-he,ze=Math.sqrt(ve*ve+ke*ke);ve/=ze,ke/=ze,O.normals[2*Y+0]=-ke,O.normals[2*Y+1]=ve;let Le=o.vertexIndices[A];if(Array.isArray(Le))O.continuous[Y]=!1;else{let[Ne,$e]=n.getCurveIndexFromVertexId(Le-1,!0);if($e>0&&$e<1)O.continuous[Y]=!0;else{let Be=1===$e?Ne+1:Ne-1;Be=(Be+X)%X;let Xe=1===$e?0:1,Ge=n.roundedCurves[Ne].getTangent($e),gt=n.roundedCurves[Be].getTangent(Xe);O.continuous[Y]=Ge.dot(gt)>.95}}v&&(O.normals[2*Y+0]*=-1,O.normals[2*Y+1]*=-1),[H,A,U]=[A,U,U+1],U>=S&&(U-=P)}while(U!==b+1)}return{regions:[i,...r],infos:p,vertices:o.vertices}}_insertVertex(e,t,n,i,r){let o=2*t,s=3*t;e.positions[s+0]=n.x,e.positions[s+1]=n.y,e.positions[s+2]=n.z,e.normals[s+0]=i.x,e.normals[s+1]=i.y,e.normals[s+2]=i.z,e.uvs[o+0]=r.x,e.uvs[o+1]=r.y}_extrudeRegion(e,t,n,i,r,o,s){let a=new te,l=new te,c=new te,d=new te,h=new Ue;n.forEach((g,v)=>{let y=i[v],b=e.verticesStart*n.length+e.verticesCount*v;for(let P=0;P<e.count;P++){let S=2*(e.start+P);if(a.set(t[S+0],t[S+1],0),c.copy(a).applyMatrix4(g).add(y),e.continuous[P])d.set(e.normals[2*P+0],e.normals[2*P+1],0);else{let O=0===P?2*(e.start+e.count-1):S-2;l.set(t[O+0],t[O+1],0),d.copy(a).sub(l),d.set(-d.y,d.x,0),e.isHole||d.negate()}if(d.applyMatrix4(g).normalize(),h.set(0===P?1:P/e.count,v/(n.length-1)),this._insertVertex(r,b,c,d,h),b++,!e.continuous[P]||0===P){if(0===P)d.set(e.normals[2*P+0],e.normals[2*P+1],0),h.set(0,v/(n.length-1));else{let O=P===e.count-1?2*e.start:S+2;l.set(t[O+0],t[O+1],0),d.copy(l).sub(a),d.set(-d.y,d.x,0),e.isHole||d.negate()}d.applyMatrix4(g).normalize(),this._insertVertex(r,b,c,d,h),b++}}});let p=n.length-1;for(let g=0;g<p;g++){let v=e.verticesStart*n.length+e.verticesCount*g,y=e.verticesStart*n.length+e.verticesCount*(g+1),b=0;for(let P=0;P<e.count;P++){(!e.continuous[P]||0===P)&&b++;let S=P===e.count-1?0:b+1,O=v+b,A=v+S,H=y+S,U=y+b;e.isHole?o.push(O,H,A,O,U,H):o.push(O,A,H,O,H,U),b++}}}_closeEnd(e,t,n,i,r,o,s){let a=e.vertexCount,l=new te(0,0,s?-1:1).applyMatrix4(r),c=new te,d=new Ue;for(let p=0;p<a;p++){let g=2*p;c.set(e.vertices[g+0],e.vertices[g+1],0).applyMatrix4(r).add(o),this._insertVertex(i,t+p,c,l,d)}let h=e.elements;for(let p=0;p<e.elementCount;p++){let g=3*p;n.push(h[g+0]+t,h[g+(s?1:2)]+t,h[g+(s?2:1)]+t)}}applyMatrix4OnRange(e,t,n){let o,s,a,l,i=e.elements,r=(new Ms).getNormalMatrix(e).elements,c=this.attributes.position,d=this.attributes.normal;if(!c||!d)return;let h=c.array,p=d.array,g=c.itemSize;for(let v=t*g,y=n*g;v<y;v+=g)o=h[v+0],s=h[v+1],a=h[v+2],l=1/(i[3]*o+i[7]*s+i[11]*a+i[15]),h[v+0]=(i[0]*o+i[4]*s+i[8]*a+i[12])*l,h[v+1]=(i[1]*o+i[5]*s+i[9]*a+i[13])*l,h[v+2]=(i[2]*o+i[6]*s+i[10]*a+i[14])*l,o=p[v+0],s=p[v+1],a=p[v+2],p[v+0]=r[0]*o+r[3]*s+r[6]*a,p[v+1]=r[1]*o+r[4]*s+r[7]*a,p[v+2]=r[2]*o+r[5]*s+r[8]*a;c.needsUpdate=!0,d.needsUpdate=!0}reverseIndicesOnRange(e,t){let n=this.index;if(n){for(let i=e;i<t;i+=3){let r=n.getX(i),o=n.getX(i+1),s=n.getX(i+2);n.setXYZ(i,s,o,r)}n.needsUpdate=!0}}};function LY(){let e=new Xn;return e.setAttribute("position",new ui(new Float32Array([]),3)),e.setIndex(new ui(new Uint16Array([]),1)),e}var BY,a2,NRe=LY().attributes,Ek=class extends Xn{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,NRe),this.userData={parameters:e,type:"TextGeometry"};let n=t.getFont(e.font);n?.isLoaded?(this.font=n,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t?.requestRender()})}updateFont(e,t){var n=this;return(0,Qn.Z)(function*(){let i=t.getFont(e);i&&(n.font=i,yield i.loadingPromise)})()}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!t?.isLoaded)return void console.warn("Cannot update text because its font is not loaded");let{width:n,height:i,depth:r,extrudeBevelSize:o,extrudeBevelSegments:s,text:a,textTransform:l}=e,c=Oa.getDisplayedValue(a),h=function BRe(e,t,n){let i=[""],r="";for(let o of n)r+=o," "===o||"\n"===o?(i[i.length-1]+=r,r="","\n"===o&&i.push("")):t.getTextWidth(i[i.length-1]+r,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+r,e)>e.width&&(1===r.length?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}(e,t,2===l?c.toUpperCase():3===l?c.toLowerCase():c),{shapes:p,charWidths:g,charCoords:v}=t.generateShapes(h,e),y=.5*("number"==typeof n?n:1),b=.5*("number"==typeof i?i:1),P=p.map(A=>(new Jo).fromShape(A,!0));this.vectorShapes=P;let S=P.map(A=>yg.create({shape:A,parameters:{depth:r,extrudeBevelSegments:s,extrudeBevelSize:o,windingRule:r<=0?Gr.NONZERO:Gr.ODD,subdivisions:this.isLowResolution&&r>0?1:12}})),O=S.length?pg(S):LY();O.translate(-y,b,0),this.dispose(),this.wrappedText=h,this.charCoords=v,this.charWidths=g,this.deleteAttribute("extrudeNormal"),Object.entries(O.attributes).forEach(([A,H])=>{this.setAttribute(A,H)}),this.setIndex(O.index),this.computeBoundingSphere()}clone(){let e=Gc(new Xn,Ek.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,n])=>{this.setAttribute(t,n)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}setText(e){var t=this;return(0,Qn.Z)(function*(){t.font&&(yield t.font.loadingPromise),yield t.update({...t.userData.parameters,text:{textValue:e}})})()}get text(){return this.userData.parameters.text??""}},zY=new Promise(e=>{BY=e}),UY=!1;function zRe(){if(!UY)return a2||(a2=function e(){return t.apply(this,arguments)}(),a2);function t(){return(t=(0,Qn.Z)(function*(){let i=m.e(526).then(m.bind(m,526)),[r,o]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/modelling-wasm@1.9.35/build/process.wasm").then(l=>l.arrayBuffer())]),s=r.default,a=yield s({wasmBinary:o});BY(a),UY=!0})).apply(this,arguments)}}var URe=["font"];function N_(e,t,n,i){let r,o,s;"PathGeometry"===e.type?(o=JSON.parse(JSON.stringify(e)),s=[[],["extrusion"]]):(o={...e},s=[[]]);for(let c of s){let d=o;for(let h of c)d=d[h];for(r in d){let h=d[r];eq(h)&&!URe.includes(r)&&(d[r]=t.getVariable(h,[i.uuid,"geometry",...c,r]),eq(d[r])&&(d[r]=1))}}let l,a={parameters:o,type:o.type};if("PathGeometry"===o.type)a.path=o.path;else if("VectorGeometry"===o.type){let c=Jo.createFromState(o.shape,o.width,o.height);a.shape=c}else if("NonParametricGeometry"===o.type){if(o.data.groups&&o.data.groups?.forEach(c=>c.materialIndex=Math.max(c.materialIndex??0,0)),a.geometry=(new vH).parse(o),0===a.geometry.groups.length){let c=a.geometry;c.addGroup(0,Math.max(c.getIndex()?.count??0,c.getAttribute("position").count),0)}}else{if("SubdivGeometry"===o.type){let c=new vl(o,n);return c.data=e,c}if("TextGeometry"===o.type)return new Ek(o,t);if("InputGeometry"===o.type)return new Ek(o,t);if("UIGeometry"===o.type)return Sk.create({parameters:{width:o.width,height:o.height,cornerRadius:o.cornerRadius,cornerType:o.cornerType}})}try{l=$Y(a)}catch(c){console.error(c)}if(!l){let c=Jo.createFromState(PP.defaultData(),100,100);a.shape=c,l=$Y(a)}return l}var jRe=new qt;function Dk(e,t,n,i){let a,l,c,r=e.position.array,o=e.normal.array,s=jRe.makeScale(t,n,i).invert().elements;for(var d=0,h=r.length;d<h;d+=3)r[d]*=t,r[d+1]*=n,r[d+2]*=i,a=o[d],l=o[d+1],c=o[d+2],o[d]=s[0]*a+s[4]*l+s[8]*c,o[d+1]=s[1]*a+s[5]*l+s[9]*c,o[d+2]=s[2]*a+s[6]*l+s[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var si,l2=new ls,a1=new te;zY.then(e=>{si=e});var jY=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),VY=new Uint32Array([0,1,2,3]),HY=new Uint8Array([4]),vl=class extends Xn{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=rg.div(t,this.data.scaleBaked);this.subdividedGeometry&&Dk(this.subdividedGeometry.attributes,...i),this.originalGeometry&&Dk(this.originalGeometry.attributes,...i),this.data=e;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(a1.fromArray(i));let o=a1.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=o/2}ensureSubdivPointer(){return 0===this.subdivPointer&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,n;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:n}=vl.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Dd(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=e,this.subdividedGeometry=t??void 0,Object.assign(this,this.subdividedGeometry??this.originalGeometry),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(vl.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new Fl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let n=e.boundingSphere.center;l2.setFromBufferAttribute(e.attributes.position),l2.getCenter(n),e.boundingSphere.radius=n.distanceTo(l2.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),l2.getSize(a1);let i={width:a1.x,height:a1.y,depth:a1.z};return this.userData.parameters=i,i}static build(e,t,n,i){let r,o,s,a=e?.phongAngle??35;!1===n&&(a=-1),t&&(si.free_bvh(t),si.free_subdivision_surface(t));try{r=vl.allocate(e,i)}catch(l){console.error(l,e),r=vl.allocate({positionWASM:jY,indexWASM:VY,verticesPerFaceWASM:HY},i)}if(si.set_destination_refinement_level(r,0),o=vl.buildLevel(r,!0,a),e.subdivisions>0)try{si.set_destination_refinement_level(r,e.subdivisions),s=vl.buildLevel(r,!1,a)}catch{try{si.set_destination_refinement_level(r,e.subdivisions-1),s=vl.buildLevel(r,!1,a)}catch{s=null}}else s=null;return{subdivPointer:r,originalGeometry:o,subdividedGeometry:s}}static primitiveToQuads(e,t,n){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);let r,o,s,a,l,c,i=void 0!==e.shape||void 0!==e.path?t.geometry:N_(e,n,!1);if(r="TorusGeometry"===e.type&&e.arc===2*Math.PI?i.getClosedTorusIndicesForBooleanOrSubdiv():i.getIndex(),({positions:o,triIndices:l}=c2(i.getAttribute("position"),r)),"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){let d=e.radialSegments*e.heightSegments*3*2;c=[d,d+3*e.radialSegments]}return({indices:s,verticesPerFace:a}=WY(o,l,i,c)),{positions:o,indices:s,verticesPerFace:a}}static allocate(e,t){let n,i,r,o=[],s=[];e.positionWASM&&e.positionWASM.length>0?(n=e.positionWASM,i=e.indexWASM,r=e.verticesPerFaceWASM):(n=jY,i=VY,r=HY);let S,a=n.length,l=i.length,c=r.length,d=n.length+o.length+s.length,h=i.length+r.length,p=d*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,g=d*Float32Array.BYTES_PER_ELEMENT,y=(Uint32Array,si._malloc(p)),b=new Float32Array(si.HEAPF32.buffer,y,d),P=new Uint32Array(si.HEAPU32.buffer,y+g,h);b.set(n,0),b.set(o,n.length),b.set(s,n.length+o.length),P.set(i,0),P.set(r,i.length),e?.scaleBaked?.some(A=>1!==A)&&(S=(new qt).makeScale(...e.scaleBaked)),t&&(S?S.premultiply(t):S=t);let O=S?si.alloc_subdivision_surface2(y,a,y+g,l,y+g+i.length*Uint32Array.BYTES_PER_ELEMENT,c,S.elements):si.alloc_subdivision_surface(y,a,y+g,l,y+g+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return si._free(y),O}static buildLevel(e,t,n,i,r){let o=r?si.get_mesh_data2(e,t?si.Level.CONTROL:si.Level.REFINED,n,r.elements):si.get_mesh_data(e,t?si.Level.CONTROL:si.Level.REFINED,n),a=si.HEAPU32.subarray(o>>2,8+(o>>2)),l=a.subarray(4,8),c=0,d=si.HEAPU32[a[c]>>2],h=si.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=si.HEAPU32[a[c]>>2],g=si.HEAPF32.subarray(p>>2,(p>>2)+l[c]);c++;let v=si.HEAPU32[a[c]>>2],y=si.HEAPU32.subarray(v>>2,(v>>2)+l[c]);c++;let b=si.HEAPU32[a[c]>>2],P=si.HEAPU32.subarray(b>>2,(b>>2)+l[c]);if(c++,void 0===i){let S=new Xn;if(S.setIndex(new cv(P,1)),S.setAttribute("position",new _n(h,3)),S.setAttribute("normal",new _n(g,3)),t){S.setAttribute("faceMap",new cv(y,1));let O=new Float32Array(g.length/3*4).fill(0);S.setAttribute("color",new ui(O,4))}return si.free_mesh_data(o),S.userData.type="SubdivGeometry",S}i.getAttribute("position").copyArray(h),i.getAttribute("normal").copyArray(g),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,si.free_mesh_data(o)}static freeSubdivPointer(e){si.free_bvh(e),si.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,n){let i=si.get_wireframe_data_for_base_level(e),o=si.HEAPU32.subarray(i>>2,4+(i>>2)),s=o.subarray(2,4),a=0,l=si.HEAPU32[o[a]>>2],c=si.HEAPF32.subarray(l>>2,(l>>2)+s[a]);a++;let d=si.HEAPU32[o[a]>>2],h=si.HEAPU32.subarray(d>>2,(d>>2)+s[a]);if(void 0===t){let p=new Xn;p.setAttribute("position",new _n(c,3));let g=new Float32Array(c.length);for(let v=0,y=c.length;v<y;)g[v++]=n.r,g[v++]=n.g,g[v++]=n.b;return p.setAttribute("color",new ui(g,3)),p.setIndex(new cv(h,1)),si.free_wireframe_data_for_base_level(i),p}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,si.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,n){let i=0===t;i||si.set_destination_refinement_level(e,t);let r=n?si.get_topological_data2(e,i?si.Level.CONTROL:si.Level.REFINED,n.elements):si.get_topological_data(e,i?si.Level.CONTROL:si.Level.REFINED),s=si.HEAPU32.subarray(r>>2,6+(r>>2)),a=s.subarray(3,6),l=0,c=si.HEAPU32[s[l]>>2],d=new Float32Array(si.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let h=si.HEAPU32[s[l]>>2],p=new Uint32Array(si.HEAPU32.subarray(h>>2,(h>>2)+a[l]));l++;let g=si.HEAPU32[s[l]>>2],v=new Uint8Array(si.HEAPU32.subarray(g>>2,(g>>2)+a[l]));return si.free_topological_data(r),{positions:d,indices:p,verticesPerFace:v}}},GY=["getX","getY","getZ"];function c2(e,t){let n={},i=t?t.count:e.count,r=0,o=[],s=[];for(let c=0;c<i;c++){let d=t?t.getX(c):c,h="";for(let p=0;p<3;p++)h+=~~(1e4*e[GY[p]](d))+",";if(h in n)o.push(n[h]);else{for(let p=0;p<3;p++)s.push(e[GY[p]](d));n[h]=r,o.push(r),r++}}let l=[];for(let c=0;c<o.length;c+=3)o[c]===o[c+1]||o[c]===o[c+2]||o[c+1]===o[c+2]||l.push(o[c],o[c+1],o[c+2]);return{positions:s,triIndices:l}}var d2=new te,Ak=new te,Tk=new te,Ik=new te;function WY(e,t,n,i){let r=[],o=[];if(void 0!==n.userData.shape&&0===n.userData.parameters.depth&&0===n.userData.shape.shapeHoles.length){let l=n.userData.shape.extractShapePointsToFlatArray([]),c=n.userData.parameters.spikes;if("EllipseGeometry"===n.userData.type&&c<=24&&c%4==0&&n.userData.parameters.angle>=360){let p=l.length/2/c;l=l.filter((g,v)=>Math.floor(v/2)%p==0)}let d=0;for(let p=0;p<l.length;p+=2)d+=(l[p]-l[(0===p?l.length:p)-2])*(l[p+1]+l[(0===p?l.length:p)-1]);e.length=0;let h=0;if(d<0)for(let p=0;p<l.length;p+=2)e.push(l[p],l[p+1],0),r.push(h++);else for(let p=l.length-2;p>=0;p-=2)e.push(l[p],l[p+1],0),r.push(h++);return o.push(h),{indices:r,verticesPerFace:o}}let s=new Float32Array([n.userData.parameters.depth])[0],a=0;for(;a<t.length;){if(n.useNgonForTopBottomFaceDuringBake){let l=0;if((e[3*t[a]+2]===s||0===e[3*t[a]+2])&&l++,(e[3*t[a+1]+2]===s||0===e[3*t[a+1]+2])&&l++,(e[3*t[a+2]+2]===s||0===e[3*t[a+2]+2])&&l++,3===l)break}if(t[a+1]===t[a+3]&&t[a+2]===t[a+5]||t[a+0]===t[a+3]&&t[a+2]===t[a+4]){d2.set(e[3*t[a]],e[3*t[a]+1],e[3*t[a]+2]),Ak.set(e[3*t[a+1]],e[3*t[a+1]+1],e[3*t[a+1]+2]),Tk.set(e[3*t[a+4]],e[3*t[a+4]+1],e[3*t[a+4]+2]),Ik.set(e[3*t[a+5]],e[3*t[a+5]+1],e[3*t[a+5]+2]),Ak.sub(d2).normalize(),Tk.sub(d2).normalize(),Ik.sub(d2).normalize();let l=Ak.cross(Tk).dot(Ik);Math.abs(l)>.005||i&&i.some((c,d)=>d%2!=1&&a>=i[d]&&a<i[d+1])?(r.push(t[a],t[a+1],t[a+2]),o.push(3),a+=3):(r.push(t[a],t[a+1],t[a+4],t[a+5]),o.push(4),a+=6)}else r.push(t[a],t[a+1],t[a+2]),o.push(3),a+=3}if(n.useNgonForTopBottomFaceDuringBake){let l=[],c=[],d=0;for(let h=0,p=0;h<e.length;h+=3,p++)0===e[h+2]&&(l.push(p),d++),e[h+2]===s&&c.push(p);if(0===n.userData.parameters.extrudeBevelSize){let h=c[0];c[0]=c[1],c[1]=h}l.reverse(),r.push(...l,...c),o.push(d,d)}return{indices:r,verticesPerFace:o}}var Zu={};((e,t)=>{for(var n in t)Vw(e,n,{get:t[n],enumerable:!0})})(Zu,{calcBoolean:()=>qRe,calcBooleanTopological:()=>WRe,freeMeshSet:()=>QRe,getMeshSet:()=>YRe,hasOpenEdges:()=>XRe,transformMeshSet:()=>$Re});var qY,h2,Ki,l1,VRe=new Promise(e=>{qY=e});function HRe(){if(h2)return h2;function t(){return(t=(0,Qn.Z)(function*(){let i=m.e(226).then(m.bind(m,6226)),[r,o]=yield Promise.all([i,fetch("https://unpkg.com/@splinetool/boolean-wasm@1.9.35/build/boolean.wasm").then(l=>l.arrayBuffer())]),s=r.default,a=yield s({wasmBinary:o});qY(a)})).apply(this,arguments)}return h2=function e(){return t.apply(this,arguments)}(),h2}function YY(e){let t=e.length,n=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(e[0])?n:i,o=Ki._malloc(r);return(Number.isInteger(e[0])?new Uint32Array(Ki.HEAPU32.buffer,o,t):new Float32Array(Ki.HEAPF32.buffer,o,t)).set(e,0),o}function XY(e){switch(e){case 0:return Ki.OP.UNION;case 1:return Ki.OP.INTERSECTION;case 2:return Ki.OP.A_MINUS_B;case 3:return Ki.OP.B_MINUS_A;case 4:return Ki.OP.SYMMETRIC_DIFFERENCE;case 5:return Ki.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function WRe(e,t){void 0===l1&&(l1=Ki.init_csg());let n=YY(e),i=Ki.csg_calc_topological(l1,n,e.length,XY(t));Ki._free(n);let o=Ki.HEAPU32.subarray(i>>2,6+(i>>2)),s=o.subarray(3,6),a=0,l=Ki.HEAPU32[o[a]>>2],c=new Float32Array(Ki.HEAPF32.subarray(l>>2,(l>>2)+s[a]));a++;let d=Ki.HEAPU32[o[a]>>2],h=new Uint32Array(Ki.HEAPU32.subarray(d>>2,(d>>2)+s[a]));a++;let p=Ki.HEAPU32[o[a]>>2],g=new Uint8Array(Ki.HEAPU32.subarray(p>>2,(p>>2)+s[a]));return Ki.free_mesh_data(i),{positions:c,indices:h,verticesPerFace:g}}function qRe(e,t,n,i){void 0===l1&&(l1=Ki.init_csg());let r=YY(e),o=Ki.csg_calc(l1,r,e.length,i,XY(t));Ki._free(r);let a=Ki.HEAPU32.subarray(o>>2,5+(o>>2)),l=a.subarray(2,5),c=0,d=Ki.HEAPU32[a[c]>>2],h=Ki.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=Ki.HEAPU32[a[c]>>2],g=Ki.HEAPF32.subarray(p>>2,(p>>2)+l[c]);c++;let v=l[c];n.setAttribute("position",new _n(h,3)),n.setAttribute("normal",new _n(g,3));let y=Ki.HEAPF32.subarray(5+(o>>2),5+(o>>2)+6);return null===n.boundingSphere&&(n.boundingSphere=new Fl),n.boundingSphere.center.set(y[0],y[1],y[2]),n.boundingSphere.radius=(y[3]**2+y[4]**2+y[5]**2)**.5,n.userData.parameters={width:2*y[3],height:2*y[4],depth:2*y[5]},Ki.free_mesh_data(o),v}function YRe(e,t,n){if(void 0===Ki)return-1;let i,r,o;if(t&&void 0!==e.userData.positions){let P=e.userData;o=P.verticesPerFace.length,i=P.positions,r=Array(P.verticesPerFace.reduce((S,O)=>S+O,0)+o);for(let S=0,O=0,A=0;S<P.verticesPerFace.length;S++){r[A++]=P.verticesPerFace[S];for(let H=0;H<P.verticesPerFace[S];H++)r[A++]=P.indices[O++]}}else({positions:i,faceIndices:r,nFaces:o}=function GRe(e,t,n){let i,r;r="TorusGeometry"===e.userData.parameters.type&&e.userData.parameters.arc===2*Math.PI?e.getClosedTorusIndicesForBooleanOrSubdiv():e.getIndex();let a,{positions:o,triIndices:s}=c2(e.getAttribute("position"),r);if(t&&n){let{indices:l,verticesPerFace:c}=WY(o,s,e);a=c.length,i=[];for(let d=0,h=0;d<a;d++){i.push(c[d]);for(let p=0;p<c[d];p++)i.push(l[h++])}}else{let l=s.length;i=Array(l+l/3),a=0;for(let c=0,d=0;d<i.length;)i[d++]=3,a++,i[d++]=s[c++],i[d++]=s[c++],i[d++]=s[c++]}return{positions:o,faceIndices:i,nFaces:a}}(e,t,n));let s=i.length,a=r.length,l=i.length,c=r.length,d=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,h=l*Float32Array.BYTES_PER_ELEMENT,g=(Uint32Array,Ki._malloc(d)),v=new Float32Array(Ki.HEAPF32.buffer,g,l),y=new Uint32Array(Ki.HEAPU32.buffer,g+h,c);v.set(i,0),y.set(r,0);let b=Ki.get_csg_mesh(g,s,g+h,a,o);return Ki._free(g),b}function XRe(e){return Ki.has_open_edges(e)}function $Re(e,t){Ki.transform_csg_mesh(e,t.elements)}function QRe(e){Ki.free_csg_mesh(e)}VRe.then(e=>Ki=e);var KRe={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return n.thetaLength=En.clamp(n.thetaLength,0,360),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let p,{width:t,depth:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:d,cornerSegments:h}=e.parameters;return 0===l?(p=new Xn,p.setAttribute("position",new _n([],3))):p=c>0||d>0||l<360?new iY(0,t/2,i,r,o,s,a,l*Math.PI/180,c,d,h,0,!0):new $T(t/2,i,r,o,s),p.scale(1,1,n/t),Object.assign(p,{userData:{...e,type:"ConeGeometry"}})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let c,{width:t,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s,cornerRadius:a,cornerSegments:l}=e.parameters;return c=0===a?new Dd(t,n,i,r,o,s):new oke(t,n,i,r,o,s,a,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},CylinderGeometry:tY,DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,detail:r,corner:o,cornerSides:s}=e.parameters,a=0===r&&0!==o?new rY(.5*t,o,s):new QV(.5*t,r);return a.scale(1,n/t,i/t),Object.assign(a,{userData:{...e,type:"DodecahedronGeometry"}})}},EllipseGeometry:bk,HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??i),o=Math.abs(n.depth??i),s=Math.abs(Math.min(i,o))/2;return{parameters:Object.assign(n,{width:i,height:r,depth:o,radius:s,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(e){let{width:t,height:n,depth:i,radius:r,revolutions:o,segments:s,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:d,cornerSegments:h}=e.parameters,p=new OY(!1,t,n,i,r,o,s,a,l,c,d,h);return Object.assign(p,{userData:{...e,type:"HelixGeometry"}})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,detail:r,corner:o,cornerSides:s}=e.parameters,a=0===r&&0!==o?new EY(.5*t,o,s):new rH(.5*t,r);return a.scale(1,n/t,i/t),Object.assign(a,{userData:{...e,type:"IcosahedronGeometry"}})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){(e.parameters?.points??[]).forEach(i=>{Array.isArray(i)&&(i.x=i[0],i.y=i[1])});let n=Object.assign({},t?.parameters??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{points:t,segments:n,verticalSegments:i}=e.parameters,r=new PM;r.moveTo(t[0].x,t[0].y),r.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let o=new $V(r.extractPoints(i).shape,n);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i,n=e.geometry??t?.geometry??(new Xn).copy(new Dd(100,100,100));void 0===t?(n.computeBoundingBox(),n.boundingBox.getSize(Ws),i={width:Ws.x,height:Ws.y,depth:Ws.z,subdivisions:0}):i=t.parameters;let r={...i,...e.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:n}}static build(e){let{width:t,height:n,depth:i,subdivisions:r}=e.parameters,o=e.geometry??(new Xn).copy(new Dd(100,100,100)),s=o.userData.parameters;void 0===s?(o.computeBoundingBox(),o.boundingBox.getSize(Ws)):Ws.set(s.width,s.height,s.depth),(t!==Ws.x||n!==Ws.y||i!==Ws.z)&&o.scale(0===Ws.x?1:t/Ws.x,0===Ws.y?1:n/Ws.y,0===Ws.z?1:i/Ws.z);let a=o.originalGeometry;try{r>0?(void 0===a||s?.subdivisions!==r)&&(void 0===a&&(a=o),o=new class{constructor(e=1){this.subdivisions=e}modify(e){(e=e instanceof Xn?(new e2).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let n,i,r,o,s,t=new te,a=e.vertices,l=e.faces,c=e.faceVertexUvs[0],d=void 0!==c&&c.length>0,h=[],p=new Map;!function Wke(e,t,n,i){let r,o,s;for(r=0,o=e.length;r<o;r++)n[r]={edges:[]};for(r=0,o=t.length;r<o;r++)s=t[r],Mk(s.a,s.b,e,i,s,n),Mk(s.b,s.c,e,i,s,n),Mk(s.c,s.a,e,i,s,n)}(a,l,h,p);let v,y,b,P,S,O,A,g=[];for(let gt of Array.from(p.keys())){for(y=p.get(gt),b=new te,S=3/8,O=1/8,A=y.faces.length,2!=A&&(S=.5,O=0),b.addVectors(y.a,y.b).multiplyScalar(S),t.set(0,0,0),o=0;o<A;o++){for(P=y.faces[o],s=0;s<3&&(v=a[Gke(P,Hke[s])],v===y.a||v===y.b);s++);v&&t.add(v)}t.multiplyScalar(O),b.add(t),y.newEdge=g.length,g.push(b)}let H,U,X,Y,Z,ee,oe,ce=[];for(i=0,r=a.length;i<r;i++){for(ee=a[i],Z=h[i].edges,n=Z.length,3==n?H=3/16:n>3&&(H=3/(8*n)),U=1-n*Number(H),X=H,n<=2&&2==n&&(U=3/4,X=1/8),oe=ee.clone().multiplyScalar(U),t.set(0,0,0),o=0;o<n;o++)Y=Z[o],v=Y.a!==ee?Y.a:Y.b,t.add(v);t.multiplyScalar(Number(X)),oe.add(t),ce.push(oe)}let Pe,we,_e,ze,Le,Ne,$e,de=ce.concat(g),he=ce.length,ve=[],ke=[],Be=new Ue,Xe=new Ue,Ge=new Ue;for(i=0,r=l.length;i<r;i++)P=l[i],Pe=Number(wk(P.a,P.b,p).newEdge)+he,we=Number(wk(P.b,P.c,p).newEdge)+he,_e=Number(wk(P.c,P.a,p).newEdge)+he,n2(ve,Pe,we,_e,P.materialIndex),n2(ve,P.a,Pe,_e,P.materialIndex),n2(ve,P.b,we,Pe,P.materialIndex),n2(ve,P.c,_e,we,P.materialIndex),d&&(ze=c[i],Le=ze[0],Ne=ze[1],$e=ze[2],Be.set(o1(Le.x,Ne.x),o1(Le.y,Ne.y)),Xe.set(o1(Ne.x,$e.x),o1(Ne.y,$e.y)),Ge.set(o1(Le.x,$e.x),o1(Le.y,$e.y)),r2(ke,Be,Xe,Ge),r2(ke,Le,Be,Ge),r2(ke,Ne,Xe,Be),r2(ke,$e,Ge,Xe));e.vertices=de,e.faces=ve,d&&(e.faceVertexUvs[0]=ke)}}(r).modify(a).toBufferGeometry()):(void 0!==a&&(o=a),a=void 0,void 0===o.getAttribute("normal")&&o.computeVertexNormals())}catch{void 0!==a&&(o=a),a=void 0,void 0===o.getAttribute("normal")&&o.computeVertexNormals()}return void 0!==a&&Object.assign(o,{originalGeometry:a}),delete e.geometry,Object.assign(o,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,n){new vH(n).load(e,i=>{let r=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Ws);let o=100/Ws.x;Object.assign(r.parameters,{width:100,height:Ws.y*o,depth:Ws.z*o}),t(this.build(r))})}},PolygonGeometry:IY,PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,radialSegments:r,heightSegments:o,openEnded:s,cornerRadius:a,cornerSegments:l}=e.parameters,c=new Qke(.5*t,n,r,o,s,a,l);return c.scale(1,1,i/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}},RectangleGeometry:Sk,SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return n.thetaLength=En.clamp(n.thetaLength,0,180),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let d,{width:t=100,height:n=t,depth:i=t,widthSegments:r=64,heightSegments:o=64,phiStart:s,phiLength:a,thetaStart:l,thetaLength:c}=e.parameters;return 0===c?(d=new Xn,d.setAttribute("position",new _n([],3))):d=new Cv(.5*t,r,o,s,a,l,c*En.DEG2RAD),d.scale(1,n/t,i/t),Object.assign(d,{userData:{...e,type:"SphereGeometry"}})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(e){let{width:t=100,height:n=t,widthSegments:i=8,heightSegments:r=8}=e.parameters,o=new Uu(t,n,i,r);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},BackdropGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(e){let{width:t,height:n,depth:i,angle:r,cornerRadius:o,cornerSegments:s}=e.parameters,a=new eRe(t,n,i,r,o,s);return Object.assign(a,{userData:{...e,type:"BackdropGeometry"}})}},StarGeometry:kY,TextFrameGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t,height:n}=e.parameters,i=new Uu(t,n);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),o=Math.round(Math.abs(n.depth??.25*n.width));return{parameters:Object.assign(n,{width:i,height:r,depth:o})}}static build(e){let{width:t,height:n,depth:i,radialSegments:r,tubularSegments:o,arc:s,cornerRadius:a,cornerSegments:l}=e.parameters,c=function iRe(e,t,n,i,r,o,s,a,l,c,d){[t,n]=[n,t],s=t/2;let h=En.clamp(r/360,0,1);if(0===h){let p=new Xn;return p.setAttribute("position",new _n([],3)),p}return 1===h&&(c=0),new OY(!0,e,t,n,i,h,o,s,a,l,c,d)}(t,n,i,.5*t,s,o,0,0,r,a,l);return c.scale(1,n/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??.125*n.width})}}static build(e){let{width:t,tube:n,tubularSegments:i,radialSegments:r,p:o,q:s}=e.parameters,a=.5*t;a!==n&&(a-=n);let l=new sH(a,n,i,r,o,s);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Jo?e.shape:new Jo,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(e){let{width:t=100,height:n,cornerRadius:i,depth:r,extrudeBevelSize:o,extrudeBevelSegments:s,isRect:a}=e.parameters,l=e.shape,c=.5*t,d=.5*n;a?(l.addPoint(l.createPoint(-c,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))):(l.addPoint(l.createPoint(0,d)),l.addPoint(l.createPoint(c,-d)),l.addPoint(l.createPoint(-c,-d))),l.isClosed=!0;for(let p=0,g=l.points.length;p<g;p++)l.points[p].roundness=i;l.roundness=i,l.update();let h=yg.create({shape:l,parameters:{roundness:i,depth:r,extrudeBevelSize:o,extrudeBevelSegments:s}});return Object.assign(h,{userData:{...e,type:"TriangleGeometry"}})}},PathGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let n=Object.assign({},t?.parameters??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),o=Math.abs(n.depth??0),s=t?.shapeData??bk.create({parameters:hq}).userData.shape;return{path:e.path??SP.defaultData(),parameters:Object.assign(n,{width:i,height:r,depth:o,extrusion:{...uq,...n.extrusion}}),shapeData:s}}static build(e){if(e.path.points.length>=2){let t=new RRe(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}return Object.assign(new Xn,{userData:{...e,type:"PathGeometry"}})}},VectorGeometry:yg},$Y=e=>KRe[e.type].create(e);function c1(e){return null!==e&&"booleanOp"in e}var QY=class extends(rk(Vo)){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new qt}updateVisible(e){super.updateVisible(e),this.visible=!c1(this.parent)&&this.visible,c1(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(Zu.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),c1(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof QY&&(e.freeBooleanPointer(),c1(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let n=super.updateTransformState(e,t);return n&&c1(this.parent)&&this.invalidateDownstreamBooleanData(!0),n}onVariableUpdate(e=!1){super.onVariableUpdate(e),c1(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},u2=new ls;function kk(e,t=0,n=e.count,i,r){let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,d=-1/0;for(let h=t;h<n;h++){let p=e.getX(h),g=e.getY(h),v=e.getZ(h);p<o&&(o=p),g<s&&(s=g),v<a&&(a=v),p>l&&(l=p),g>c&&(c=g),v>d&&(d=v)}u2.min.set(o,s,a),u2.max.set(l,c,d),u2.getCenter(i),u2.getSize(r).multiplyScalar(.5)}var ZRe=new Xn,JRe=new zu,yl=class extends QY{constructor(e,t){super(ZRe,JRe),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?kk(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},Sf=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},null===Sf.uuidContext)throw new Error("plz startContext");this.uuid=Sf.uuidContext===Sf.globalContext?"_gid"+Sf.uuidContext.nodeContextUuid++:"_uid"+Sf.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){null===this.uuidContext||this.uuidContext===Sf.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,n){return this.analyze(e,n=n??{}),this.flow(e,t,n)}flow(e,t,n){e.addFlow((n=n??{}).slot,n.cache,n.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,n){t=t??this.getType(e,t);let i=e.getNodeData(n??this);return e.analyzing&&this.appendDepsNode(e,i,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)}updateFrame(e){}generateReadonly(e,t,n,i,r,o){return""}generate(e,t,n,i,r){return""}parse(e,t,n,i){}appendDepsNode(e,t,n){t.deps=(t.deps||0)+1;let i=e.getTypeLength(n);(i>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=i,t.output=n)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}},qs=Sf;qs.globalContext={nodeContextUuid:0},qs.uuidContext=Sf.globalContext;var KY=class{constructor(e){this.name=(e=e??{}).name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},zl=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,n){this.keywords[e]={callback:t,cache:n=void 0===n||n}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},Wr=class extends qs{constructor(e,t){super(e),this.scope="",this.shared=void 0===(t=t??{}).shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,n,i){if(t=t??this.getType(e),this.getShared(e,t)){let r=this.getUnique(e,t);r&&void 0===this.uuid&&(this.uuid=En.generateUUID()),n=e.getUUID(n??this.getUUID(),!r);let o=e.getNodeData(n),s=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,n)):super.build(e,t,n);if(r)return o.name=o.name||super.build(e,t,n),o.name;if(!this.getLabel()&&(!this.getShared(e,s)||e.context.ignoreCache||1===o.deps))return super.build(e,t,n);n=this.getUUID(!1);let a=this.getTemp(e,n);if(a)return e.format(a,s,t);{a=super.generate(e,t,n,o.output,i);let l=this.generate(e,s,n);return e.addNodeCode(a+" = "+l+";"),e.format(a,s,t)}}return super.build(e,t,n)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let n=e.getVars()[t];return n?n.name:void 0}generate(e,t,n,i,r){return this.getShared(e,t)||console.error("TempNode is not shared"),e.getTempVar(n=n??this.uuid,i??this.getType(e),r,this.getLabel()).name}},Ul=class extends Wr{constructor(e,t){(t=t??{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,n,i,r,o){n=e.getUUID(n??this.getUUID()),i=i??this.getType(e);let s=e.getNodeData(n);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,i,r,o):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(i,this,r,o,this.getLabel())),e.format(s.vertex.name,i,t)):(s.fragment||(s.fragment=e.createFragmentUniform(i,this,r,o,this.getLabel())),e.format(s.fragment.name,i,t))}},Ea=class extends Ul{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof Ue?e:new Ue(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,n,i,r,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},Yc=class extends Ul{constructor(e=0,t,n){super("v3"),this.nodeType="Vector3",this.value=e instanceof te?e:new te(e,t,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,n,i,r,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},Da=class extends ni{constructor(e,t,n,i){super(e,t,n),this.isColorA=!0,this.a=i}setRGBA(e,t,n,i){super.setRGB(e,t,n),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let n;if("transparent"===e)return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="rgba"===r?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a="hsla"===r?parseFloat(i[4]):1,super.setStyle(e,t)}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Ju=class extends Ul{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Da?e:new Da(e.r,e.g,e.b,e.a)}generateReadonly(e,t,n,i,r,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},t4e=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,ZY=/[a-z_0-9]+/gi,gn=class extends Wr{constructor(e,t,n,i,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===r,this.isInterface=!1,this.parse(e,t,n,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,n,i,r){let o,s=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;o=ZY.exec(this.src);)l.push(o);for(let c=0;c<l.length;c++){let d=l[c],h=d[0],p=!this.isMethod||!this.getInputByName(h),g=h;if(this.keywords[h]||this.useKeywords&&p&&zl.containsKeyword(h)){let v=this.keywords[h];if(!v){let y=zl.getKeywordData(h);y.cache&&(v=e.keywords[h]),v=v||zl.getKeyword(h,e),y.cache&&(e.keywords[h]=v)}g=v.build(e)}h!==g&&"."!==a[d.index+s-1]&&(a=a.substring(0,d.index+s)+g+a.substring(d.index+h.length+s),s+=g.length-h.length),void 0===this.getIncludeByName(g)&&zl.contains(g)&&e.include(zl.get(g))}return"source"===t?a:this.isMethod?(this.isInterface||e.include(this,void 0,a),this.name):e.format("( "+a+" )",this.getType(e),t)}parse(e,t,n,i){if(this.src=e||"",this.includes=t??[],this.extensions=n??{},this.keywords=i??{},this.isMethod){let r=t4e.exec(this.src);if(this.inputs=[],r&&4==r.length){this.type=r[1],this.name=r[2];let o=r[3].match(ZY);if(o){let s=0;for(;s<o.length;){let l,a=o[s++];"in"===a||"out"===a||"inout"===a?l=o[s++]:(l=a,a="");let c=o[s++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},n4e=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,JY=class extends Wr{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||JY.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,n,i,r){this.src=e||"";let o,s,a="",l=n4e.exec(e);this.useDefine=r??"#"===this.src.charAt(0),l&&l.length>1?(s=l[1],o=l[2],a=l[3]):(o=this.src,s="f"),this.name=o,this.type=s,this.value=a}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,n,i,r){return e.format(this.name,this.getType(e),t)}},qr=JY;qr.PI="PI",qr.PI2="PI2",qr.RECIPROCAL_PI="RECIPROCAL_PI",qr.RECIPROCAL_PI2="RECIPROCAL_PI2",qr.LOG2="LOG2",qr.EPSILON="EPSILON";var i4e=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),r4e=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),eX=class extends Wr{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,n,i,r){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=i4e.exec(e);if(t){let i,n=t[2];for(;i=r4e.exec(n);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},Rk=class extends Wr{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(i,this.getType(e),t)}};zl.addKeyword("uv",function(){return new Rk}),zl.addKeyword("uv2",function(){return new Rk(1)});var d1=class extends Wr{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??d1.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Pd:return["Linear"];case Ri:return["sRGB"];default:return[]}}generate(e,t){let n=this.input.build(e,"v4"),i=this.getType(e),r=d1.Nodes[this.method],o=e.include(r);if(o===d1.LINEAR_TO_LINEAR)return e.format(n,i,t);if(2===r.inputs?.length){let s=this.factor.build(e,"f");return e.format(o+"( "+n+", "+s+" )",i,t)}return e.format(o+"( "+n+" )",i,t)}fromEncoding(e){let t=d1.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=d1.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Fh=d1;Fh.Nodes={LinearToLinear:new gn(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new gn(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new gn(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},Fh.LINEAR_TO_LINEAR="LinearToLinear",Fh.SRGB_TO_LINEAR="sRGBToLinear",Fh.LINEAR_TO_SRGB="LinearTosRGB";var wo=class extends gn{constructor(e="",t,n,i,r){super(e,r,i,n,t),this.nodeType="Expression"}},ep=class extends Ul{constructor(e=new jo,t,n,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new Rk,this.bias=n,this.project=void 0!==i&&i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if("sampler2D"===t)return this.getTexture(e,t);let o,s,n=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),r=this.bias?this.bias.build(e,"f"):void 0;void 0===r&&e.context.bias&&(r=e.context.bias.setTexture(this).build(e,"f")),o=this.project?"texture2DProj":r?"tex2DBias":"tex2D",s=r?o+"( "+n+", "+i+", "+r+" )":o+"( "+n+", "+i+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Fh(new wo("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,l),e.removeContext(),e.format(s,l,t)}},kn=class extends Ul{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,n,i,r,o){return e.format(this.value+(this.value%1?"":".0"),i,t)}},tX=class extends Wr{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,n,i,r){i=this.getType(e);let o=this.value,s=o.build(e,t)+"( ",a=[];if(o.inputs){for(let l=0;l<o.inputs.length;l++){let c=o.inputs[l];a.push((this.inputs[l]||this.inputs[c.name]).build(e,e.getTypeByFormat(c.type)))}s+=a.join(", ")+" )"}return e.format(s,i,t)}},nX=class extends Wr{constructor(e,t,n=nX.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=n}getType(e){let t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}generate(e,t){let n=this.getType(e);this.type=n;let i=this.a.build(e,n),r=this.b.build(e,n);return e.format("( "+i+" "+this.op+" "+r+" )",n,t)}},jl=nX;jl.ADD="+",jl.SUB="-",jl.MUL="*",jl.DIV="/";var Yr=class extends Wr{constructor(e,t=Yr.ABS,n,i){super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:i=t,"string"!=typeof n?this.c=n:i=n,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case Yr.MIX:case Yr.CLAMP:case Yr.REFRACT:case Yr.SMOOTHSTEP:case Yr.FACEFORWARD:return 3;case Yr.MIN:case Yr.MAX:case Yr.MOD:case Yr.STEP:case Yr.REFLECT:case Yr.DISTANCE:case Yr.DOT:case Yr.CROSS:case Yr.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>i?this.a.getType(e):n>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case Yr.LENGTH:case Yr.DISTANCE:case Yr.DOT:return"f";case Yr.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let n,i,r,o=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,a=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case Yr.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case Yr.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case Yr.CROSS:n=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Yr.STEP:n=this.a.build(e,1===o?"f":l),i=this.b.build(e,l);break;case Yr.MIN:case Yr.MAX:case Yr.MOD:n=this.a.build(e,l),i=this.b.build(e,1===s?"f":l);break;case Yr.REFRACT:n=this.a.build(e,l),i=this.b.build(e,l),r=this.c.build(e,"f");break;case Yr.MIX:n=this.a.build(e,l),i=this.b.build(e,l),r=this.c.build(e,1===a?"f":l);break;default:n=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(r=this.c.build(e,l))}let d=[];d.push(n),i&&d.push(i),r&&d.push(r);let h=this.getNumInputs(e);if(d.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",c,t)}},Ii=Yr;Ii.RAD="radians",Ii.DEG="degrees",Ii.EXP="exp",Ii.EXP2="exp2",Ii.LOG="log",Ii.LOG2="log2",Ii.SQRT="sqrt",Ii.INV_SQRT="inversesqrt",Ii.FLOOR="floor",Ii.CEIL="ceil",Ii.NORMALIZE="normalize",Ii.FRACT="fract",Ii.SATURATE="saturate",Ii.SIN="sin",Ii.COS="cos",Ii.TAN="tan",Ii.ASIN="asin",Ii.ACOS="acos",Ii.ARCTAN="atan",Ii.ABS="abs",Ii.SIGN="sign",Ii.LENGTH="length",Ii.NEGATE="negate",Ii.INVERT="invert",Ii.MIN="min",Ii.MAX="max",Ii.MOD="mod",Ii.STEP="step",Ii.REFLECT="reflect",Ii.DISTANCE="distance",Ii.DOT="dot",Ii.CROSS="cross",Ii.POW="pow",Ii.MIX="mix",Ii.CLAMP="clamp",Ii.REFRACT="refract",Ii.SMOOTHSTEP="smoothstep",Ii.FACEFORWARD="faceforward";var F_=class extends Wr{constructor(e,t,n){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=n}bilinearCubeUV(e,t,n,i){let r=new tX(F_.Nodes.bilinearCubeUV,[t,n,i]);this.colorSpaceTL=this.colorSpaceTL??new Fh(new wo("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Fh(new wo("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Fh(new wo("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Fh(new wo("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new wo(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new wo(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new wo(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new wo(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let s=new wo("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return s.keywords.cubeUV_TL=this.colorSpaceTLExp,s.keywords.cubeUV_TR=this.colorSpaceTRExp,s.keywords.cubeUV_BL=this.colorSpaceBLExp,s.keywords.cubeUV_BR=this.colorSpaceBRExp,s.keywords.cubeUV=r,s}generate(e,t){if(e.isShader("fragment")){let n=this.uv,r=new tX(F_.Nodes.roughnessToMip,[this.bias||e.context.roughness]),o=new Ii(r,F_.Nodes.m0,F_.Nodes.cubeUV_maxMipLevel,Ii.CLAMP),s=new Ii(o,Ii.FLOOR),a=new Ii(o,Ii.FRACT),l=this.bilinearCubeUV(e,this.value,n,s),c=this.bilinearCubeUV(e,this.value,n,new jl(s,new kn(1).setReadonly(!0),jl.ADD)),d=new Ii(l,c,a,Ii.MIX);return e.format(d.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},Nk=F_;Nk.Nodes=function(){let e=new eX("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new qr("float cubeUV_maxMipLevel 8.0",!0),n=new qr("float cubeUV_minMipLevel 4.0",!0),i=new qr("float cubeUV_maxTileSize 256.0",!0),r=new qr("float cubeUV_minTileSize 16.0",!0),o=new gn("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;let s=new gn("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");s.useKeywords=!1;let a=new gn("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,s,t,n,i,r]);a.useKeywords=!1;let l=new qr("float r0 1.0",!0),c=new qr("float v0 0.339",!0),d=new qr("float m0 -2.0",!0),h=new qr("float r1 0.8",!0),p=new qr("float v1 0.276",!0),g=new qr("float m1 -1.0",!0),v=new qr("float r4 0.4",!0),y=new qr("float v4 0.046",!0),b=new qr("float m4 2.0",!0),P=new qr("float r5 0.305",!0),S=new qr("float v5 0.016",!0),O=new qr("float m5 3.0",!0),A=new qr("float r6 0.21",!0),H=new qr("float v6 0.0038",!0),U=new qr("float m6 4.0",!0);return{bilinearCubeUV:a,roughnessToMip:new gn("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,c,d,h,p,g,v,y,b,P,S,O,A,H,U]),m0:d,cubeUV_maxMipLevel:t}}();var h1=class extends Wr{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??h1.VIEW}getShared(){return this.scope===h1.WORLD}build(e,t,n,i){let r=e.context[this.scope+"Normal"];return r?r.build(e,t,n,i):super.build(e,t,n)}generate(e,t,n,i,r){let o;switch(this.scope){case h1.VIEW:o=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case h1.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case h1.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal")}return e.format(o,this.getType(e),t)}},Vl=h1;Vl.LOCAL="local",Vl.WORLD="world",Vl.VIEW="view",Vl.NORMAL="normal",zl.addKeyword("viewNormal",function(){return new Vl(Vl.VIEW)}),zl.addKeyword("localNormal",function(){return new Vl(Vl.NORMAL)}),zl.addKeyword("worldNormal",function(){return new Vl(Vl.WORLD)});var tp=class extends Wr{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??tp.LOCAL}getType(){return this.scope===tp.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case tp.LOCAL:case tp.WORLD:return!1}return!0}generate(e,t,n,i,r){let o;switch(this.scope){case tp.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case tp.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case tp.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case tp.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(o,this.getType(),t)}},Nd=tp;Nd.LOCAL="local",Nd.WORLD="world",Nd.VIEW="view",Nd.PROJECTION="projection",zl.addKeyword("position",function(){return new Nd}),zl.addKeyword("worldPosition",function(){return new Nd(Nd.WORLD)}),zl.addKeyword("viewPosition",function(){return new Nd(Nd.VIEW)});var Lh=class extends Wr{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Lh.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===Lh.SPHERE?"v2":this.type}generate(e,t){let n=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case Lh.VECTOR:{let r=new Vl(Vl.VIEW),o=e.context.roughness,s=r.build(e,"v3"),a=new Nd(Nd.VIEW).build(e,"v3"),l=o?o.build(e,"f"):void 0,c=`reflect( -normalize( ${a} ), ${s} )`;l&&(c=`normalize( mix( ${c}, ${s}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${c}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${d};`),i="reflectVec"):i=d;break}case Lh.CUBE:{let r=new Lh(Lh.VECTOR).build(e,"v3"),o="vec3( -"+r+".x, "+r+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${o};`),i="reflectCubeVec"):i=o;break}case Lh.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new Lh(Lh.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${r};`),i="reflectSphereVec"):i=r;break}}return e.format(i,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},u1=Lh;u1.CUBE="cube",u1.SPHERE="sphere",u1.VECTOR="vector";var o4e=class extends Wr{constructor(e=new ep,t,n){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Nk(this.value,t??new u1(u1.VECTOR),n),this.irradianceNode=new Nk(this.value,new Vl(Vl.WORLD),new kn(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},s4e=class extends Ul{constructor(e=new TT,t,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new u1,this.bias=n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){if("samplerCube"===t)return this.getTexture(e,t);let o,n=this.getTexture(e,t),i=this.uv?.build(e,"v3"),r=this.bias?this.bias.build(e,"f"):void 0;void 0===r&&e.context.bias&&(r=e.context.bias.setTexture(this).build(e,"f")),o=r?"texCubeBias( "+n+", "+i+", "+r+" )":"texCube( "+n+", "+i+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},a=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new Fh(new wo("",a)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,a),e.removeContext(),e.format(o,a,t)}},iX=["x","y","z","w"],p4e=["float","vec2","vec3","vec4"],f4e={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},m4e={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},rX=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,n){return t.deps.length-n.deps.length}return function(t,n){let i=this.getIncludes(t,n);if(!i)return"";let r="";i=i.sort(e);for(let o=0;o<i.length;o++)i[o].src&&(r+=i[o].src+"\n");return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode("\nuniform int frameIndex;\nuniform vec2 resolution;\nuniform mat4 previousModelViewMatrix;\nuniform mat4 previousProjectionMatrix;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n"),this.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n\nuniform int frameIndex;\nuniform vec2 resolution;\n\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos) {\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n"),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode("\n// TODO: This could be generated CPU side and passed to the shader every frame\nconst vec2 haltonSequence[16] = vec2[16](\nvec2( 0.000000,-0.333334),\nvec2(-0.500000, 0.333334),\nvec2( 0.500000,-0.777778),\nvec2(-0.750000,-0.111112),\nvec2( 0.250000, 0.555556),\nvec2(-0.250000,-0.555556),\nvec2( 0.750000, 0.111112),\nvec2(-0.875000, 0.777778),\nvec2(0.125000, -0.925926),\nvec2(-0.375000, -0.259260),\nvec2(0.625000, 0.407408),\nvec2(-0.625000, -0.703704),\nvec2(0.375000, -0.037038),\nvec2(-0.125000, 0.629630),\nvec2(0.875000, -0.481482),\nvec2(-0.937500, 0.185186));\n\n// TODO: Pass correct view size\nvec2 offset = haltonSequence[frameIndex];\noffset.x /= resolution.x;\noffset.y /= resolution.y;\n\nvec4 currentPosition = gl_Position;\nvec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);\n\n// We want to calculate the velocity with unjittered positions\n// so that things that are not moving get a velocity = 0\nvCurrentPosition = currentPosition;\nvPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);\n#ifdef OUTLINE_COMPENSATION\nvPreviousPosition.xy += OUTLINE_COMPENSATION;\n#endif\ngl_Position = currentPositionJittered;\n\n"),this.addFragmentFinalCode("\nvec2 oldPos = vPreviousPosition.xy;\n    oldPos /= vPreviousPosition.w;\n    oldPos.xy = (oldPos.xy+1.)/2.0;\n\nvec2 newPos = vCurrentPosition.xy;\n    newPos /= vCurrentPosition.w;\n    newPos.xy = (newPos.xy+1.)/2.0;\n\nvec2 velocity = (newPos - oldPos);\n\n// Discard fully transparent pixels \nif (gl_FragColor.a <= 0.0) discard;\n\ngVelocity = vec4(velocity, 0.0, 1.0);\n")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+"\n"}clearNodeCode(e){let t=this.nodeCode[e=e??this.shader];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,n,i="varying",r="V",o=""){let s=this.getVars(i),a=s[e];if(!a){let l=s.length;a={name:n||"node"+r+l+(o?"_"+o:""),type:t},s.push(a),s[e]=a}return a}getTempVar(e,t,n,i){return this.getVar(e,t,n,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){t=t??"";let n="";for(let i=0,r=e.length;i<r;++i){let o=e[i],a=o.name,l=o.size,c=this.getFormatByType(o.type);if(void 0===c)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=t+" "+c.substring(0,c.length-2)+" "+a+`[${l}];\n`:n+=t+" "+c+" "+a+";\n"}return n}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof qs?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,n,i,r,o){if(t.includes("[]")){let s=this.inputs.arrayUniforms,a=s.list.length,l=new KY({type:t,size:n.size,name:i||"nodeUA"+a+(o?"_"+o:""),node:n,needsUpdate:r});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}{let s=this.inputs.uniforms,a=s.list.length,l=new KY({type:t,name:i||"nodeU"+a+(o?"_"+o:""),node:n,needsUpdate:r});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,n,i,r){return this.createUniform("vertex",e,t,n,i,r)}createFragmentUniform(e,t,n,i,r){return this.createUniform("fragment",e,t,n,i,r)}include(e,t,n){let i;if(e="string"==typeof e?zl.get(e):e,!1===this.context.include)return e.name;e instanceof gn?i=this.includes.functions:e instanceof qr?i=this.includes.consts:e instanceof eX&&(i=this.includes.structs);let r=i[this.shader]=i[this.shader]||[];if(e){let o=r[e.name];if(o||(o=r[e.name]={node:e,deps:[]},r.push(o),o.src=e.build(this,"source")),e instanceof gn&&t&&r[t.name]&&-1===r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),e.includes?.length)){let s=0;do{this.include(e.includes[s++],t)}while(s<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return p4e[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(n?.isNode)return n}}resolve(...e){for(let t=0;t<arguments.length;t++){let n=e[t];if(void 0!==n){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case 301:case 302:return new s4e(n);case 306:return new o4e(new ep(n));default:return new ep(n)}else{if(n.isVector2)return new Ea(n);if(n.isVector3)return new Yc(n);if(n.isVector4)return new Ju(n)}}}}format(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return f4e[e]||e}getFormatByType(e){return m4e[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return iX[e]}getIndexByElement(e){return iX.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Pd,t===Pd&&this.context.gamma&&(t=Ri),t}},es=class extends Ul{constructor(e=0,t,n,i){super("c"),this.nodeType="Color",this.value=e instanceof Da?e:new Da(e||0,t,n,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,n,i,r,o){n=e.getUUID(n??this.getUUID()),i=i??this.getType(e);let s=e.getNodeData(n),a=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(e,t,n,i,r,o):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(i,this,r,o,this.getLabel())),e.format(s.vertex.name,i,t)):(s.fragment||(s.fragment=e.createFragmentUniform(i,this,r,o,this.getLabel())),e.format(s.fragment.name,i,t))}generateReadonly(e,t,n,i,r,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},oo=class extends Ul{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,n,i,r,o){return e.format(this.value.toString(),i,t)}},bl=class extends Ul{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,n,i){return e.format(this.value?"true":"false",i,t)}},bg=class extends Ul{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}},Fk=class extends Ul{},g4e=class extends Fk{constructor(e){super("v3"),this.image=e,this._value=new te}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Lk=class extends Fk{constructor(e,t,n=1008,i=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=n,this.magFilter=i}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},oX=class extends Ul{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Ms}generateReadonly(e,t,n,i,r,o){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Bh=class extends Ul{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new qt}generateReadonly(e,t,n,i,r,o){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function sX(e,t,n,i=0){e.setUvTransform(n[0],n[1],t[0],t[1],0,0,0).premultiply((new Ms).makeRotation(i*En.DEG2RAD))}var v4e=class extends oX{constructor(e,t,n=0){super(new Ms),this.repeat=e,this.offset=t,this.rotation=n,sX(this.value,e,t,n)}updateMatrix(){sX(this.value,this.repeat,this.offset,this.rotation)}},_g=class extends Ul{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof bi?new Array(e).fill(t):new Array(e).fill(new bi(0))}},aX=class extends Wr{constructor(e,t,n,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=n,this.mode=i}generate(e,t){if(e.isShader("fragment")){let n=[];return n.push(this.a.build(e,"c")),n.push(this.b.build(e,"c")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),e.format("spe_blend("+n.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},lX=class extends Wr{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(lX.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Bk=lX;Bk.Nodes={customColor:new gn("vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color;\n\t\t\t}")};var cX=class extends Wr{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n=e.include(cX.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},dX=cX;dX.Nodes={customNormal:new gn("vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var L_=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d,h){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=n,this.projection=i,this.axis=r,this.side=o,this.size=s,this.blending=a,this.mat=l,this.isMask=h,this.alpha=c,this.mode=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i,n=`g${this.uuid.toString().replace(/-/g,"")}`;switch(this.projection.value){case 3:i=e.include(L_.Nodes.cylindrical);break;case 2:i=e.include(L_.Nodes.spherical);break;case 1:let o=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=new gn(`\n\t\tvec3 ${n}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 projected = (1. + (position.${["zy","xz","xy"][this.axis.value]})) / 2.;\n\t\t\t\tvec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t${2===this.side.value?"":`lalpha *= step(0.0, ${1===this.side.value?"-1.0 * ":""}dot(vObjectNormal, ${o}));`}\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}`);i=e.include(a);break;case 4:i=e.include(L_.Nodes.triplanar);break;default:i=e.include(L_.Nodes.uv)}e.addFragmentVariable(this.calpha,"float");let r=[];if(r.push("normal"),r.push(this.texture.generate(e,"t")),r.push(this.textureSize.build(e,"v2")),r.push(this.crop.build(e,"f")),r.push(this.mat.build(e,"mat3")),r.push(this.size.build(e,"v2")),r.push(this.blending.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),4===this.projection.value){let o=`${n}_writeUvs`,s=o+"0",a=o+"1",l=o+"2",c=`${n}_triplanarWeights`;e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(c,"vec3"),r.push(s),r.push(a),r.push(l),r.push(c)}else{let o=`${n}_writeUvs`;e.addFragmentVariable(o,"vec2"),r.push(o)}return e.format(i+"("+r.join(",")+")",this.getType(e),t)}},zk=L_;zk.Nodes={cylindrical:new gn("\nvec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\t\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new gn("\nvec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new gn("vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\twriteUv = uvs;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlalpha *= mask;\n\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;\n\t\t\t}"),triplanar:new gn("vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {\n\t\t\t\tvec3 p = position;\n\t\t\t\tvec2 uv0 = (1.0 + p.xy) / 2.0;     \n\t\t\t\tvec2 uv1 = (1.0 + p.zy) / 2.0;\t\t\n\t\t\t\tvec2 uv2 = (1.0 + p.xz) / 2.0;\t\t\n\t\n\t\t\t\tuv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\t\t\t\tuv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;\n\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\n\t\t\t\t// Write out all sets of UVs that we generated\n\t\t\t\twriteUvs0 = uv0;\n\t\t\t\twriteUvs1 = uv1;\n\t\t\t\twriteUvs2 = uv2;\n\t\t\t\twriteWeights = weights;\n\n\t\t\t\t// Derivatives for LOD\n\t\t\t\tvec2 df0 = fwidth(uv0);\n\t\t\t\tvec2 df1 = fwidth(uv1);\n\t\t\t\tvec2 df2 = fwidth(uv2);\n\t\t\t\tif (df0.x > 0.5) df0.x = 0.0;\n\t\t\t\tif (df1.x > 0.5) df1.x = 0.0;\n\t\t\t\tif (df2.x > 0.5) df2.x = 0.0;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                \tvec4 tmp = \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttexture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#else\n                \tvec4 tmp = \n\t\t\t\t\t\ttextureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + \n\t\t\t\t\t\ttextureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + \n\t\t\t\t\t\ttextureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\n\t\t\t\t// Apply cropping across all 3 planes\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlalpha *= mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn col;//n * 0.5 + 0.5;\n\t\t\t}\t\t\t\n\t\t\t")};var B_=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=n,this.far=i,this.isVector=r,this.isWorldSpace=o,this.origin=s,this.direction=a,this.colors=l,this.steps=c,this.isMask=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new gn(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ${n}_IS_VECTOR\n                   #ifdef ${n}_LINEAR\n                       #ifdef ${n}_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ${n}_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ${n}_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a * mask;\n               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t   \n               return color.rgb;\n\t\t\t}`,[B_.Nodes.vectorLinearWorldSpaceDepth,B_.Nodes.vectorLinearObjectSpaceDepth,B_.Nodes.vectorSphericalObjectSpaceDepth,B_.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${n}_SMOOTH`),this.isVector.value>.5&&e.define(`${n}_IS_VECTOR`),0===this.gradientType.value&&e.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${n}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let r=e.include(i),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(r+"("+o.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},hX=B_;hX.Nodes={vectorLinearWorldSpaceDepth:new gn("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new gn("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new gn("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new gn("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var y4e=class extends Wr{constructor(e,t,n,i,r,o,s,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=n,this.intensity=i,this.factor=r,this.isMask=a,this.alpha=o,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=new gn("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {\n\t\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\t\tfloat lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn color;\n\t\t\t\t}"),i=e.include(n),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},uX=class extends Wr{constructor(e,t,n,i,r,o,s,a,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=n,this.steps=i,this.offset=r,this.morph=o,this.angle=s,this.isMask=l,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(uX.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},pX=uX;pX.Nodes={gradient:new gn("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var fX=class extends Wr{constructor(e,t,n,i,r){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=r}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(fX.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),i.push(this.rotation.build(e,"f")),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},mX=fX;mX.Nodes={matcap:new gn("vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {\n\t\t\t\t\tvec3 viewDir = normalize( vViewPosition );\n\t\t\t\t\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\t\t\t\t\tvec3 y = cross( viewDir, x );\n\t\t\t\t\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) );\n\t\t\t\t\tuv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;\n\t\t\t\t\tuv = uv * 0.495 + 0.5;\n\t\t\t\t\tvec4 matcapColor = texture2D( matcapTex, uv );\n\n\t\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\t\t\t\t\t\n\t\t\t\t\treturn matcapColor.rgb;\n            \t}")};var Uk=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Uk||{}),Hl=function(){let e=new gn("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new gn("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new qr("float F3 0.3333333"),t.keywords.G3=new qr("float G3 0.1666667");let n=new gn("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),i=new gn("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new gn("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new gn("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[i,r]),s=new gn("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new gn("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),l=new gn("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[a]),c=new gn("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);c.keywords.NUM_OCTAVES=new qr("int NUM_OCTAVES 5");let d=new gn("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),h=new gn("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[i,r,d]),p=new gn("float hashwithoutsine13(vec3 p3)\n\t\t{\n\t\t\tp3  = fract(p3 * .1031);\n\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t}"),g=new gn("vec3 hashwithoutsine33(vec3 p3)\n\t\t{\n\t\t\tp3 = fract(p3 * vec3(.1031, .1030, .0973));\n\t\t\tp3 += dot(p3, p3.yxz+33.33);\n\t\t\treturn fract((p3.xxy + p3.yxx)*p3.zyx);\n\t\t}"),v=new gn("float metric(in vec3 p)\n\t\t{\n\t\t\t// L2 \n\t\t\treturn length(p);\n\n\t\t\t// Chebyshev \n\t\t\t// vec3 a = abs(p);\n\t\t\t// return max(a.x, max(a.y, a.z));\n\t\t}"),y=new gn("float smin( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(b, a, h) - correction;\n\t\t}"),b=new gn("float smax( float a, float b, float k )\n\t\t{\n\t\t\tfloat h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);\n\t\t\tfloat correction = k * h * (1.0 - h);\n\t\t\treturn mix(a, b, h) + correction;\n\t\t}"),P=new gn("float remap(float value, float input_min, float input_max, float output_min, float output_max) {\n\t\t\t// Compute width of each interval\n\t\t\tfloat input_width = input_max - input_min;\n\t\t\tfloat output_width = output_max - output_min;\n\t\t\n\t\t\t// Convert input range into a 0-1 range \n\t\t\tfloat scaled = (value - input_min) / input_width;\n\t\t\n\t\t\t// Convert the 0-1 range into a value in output range\n\t\t\treturn output_min + (scaled * output_width);\n\t\t}");return{simplex:t,simplexFractal:n,simplexAshima:o,fbm:c,perlin:h,voronoi:new gn('float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) \n\t\t{\n\t\t\t// Integer and fractional parts of this point\'s coordinates\n\t\t\tivec3 p = ivec3(floor(x));\n\t\t\tvec3 f = fract(x);\n\n\t\t\t// Different variables that we will use to construct noise:\n\t\t\t//\n\t\t\t// f1: distance to the closest feature point\n\t\t\t// f2: distance to the second closest feature point\n\t\t\t// e: distance to the closest edge (cell boundary)\n\t\t\t//\n\t\t\t// We also compute "smooth" versions of all of the above quantites, essentially\n\t\t\t// replacing "hard" minimums with "smooth" minimums (described by IQ)\n\t\t\tfloat f1_smooth = 8.0;\n\t\t\tfloat f1 = 8.0;\n\t\t\tfloat f2_smooth = 8.0;\n\t\t\tfloat f2 = 8.0;\n\t\t\tfloat e_smooth = 8.0;\n\t\t\tfloat e = 8.0;\n\n\t\t\t// Variables stored from closest cell\n\t\t\tivec3 mb;\n\t\t\tvec3 mr; \n\n\t\t\tint steps = quality;\n\t\t\t\n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d = length(r);\n\t\t\t\t\n\t\t\t\tf1_smooth = smin(d, f1_smooth, smoothness);\n\n\t\t\t\t// Store un-smoothed distances too \n\t\t\t\tif (d < f1) \n\t\t\t\t{\n\t\t\t\t\tf2 = f1;\n\t\t\t\t\tf1 = d;\n\n\t\t\t\t\tmb = ivec3(x, y, z);\n\t\t\t\t\tmr = r;\n\t\t\t\t} \n\t\t\t\telse if (d < f2) \n\t\t\t\t{\n\t\t\t\t\tf2 = d;\n\t\t\t\t}\n\t\t\t}\t\n\t\t\t\n\t\t\tfloat id = hashwithoutsine13(vec3(p + mb) + seed);\n\n\t\t\t// Second pass for edge distance  \n\t\t\tfor (int x = -steps; x <= steps; x++) \n\t\t\tfor (int y = -steps; y <= steps; y++)\n\t\t\tfor (int z = -steps; z <= steps; z++)\n\t\t\t{\n\t\t\t\t// Start search at the cell that contains the closest point to "x" (found in 1st pass)\n\t\t\t\tivec3 b = mb + ivec3(x, y, z);\n\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\tfloat d1 = dot(0.5 * (mr + r), (r - mr)); \t\t\t\t// IQ normalizes "r - mr" but that breaks things for the smooth version?\n\t\t\t\tfloat d2 = dot(0.5 * (mr + r), normalize(r - mr));\n\n\t\t\t\te_smooth = smin(d1, e_smooth, smoothness);\n\n\t\t\t\te = min(e, d2);\n\n\t\t\t\t// Also compute a smooth version of F2 in this pass\n\t\t\t\t{\n\t\t\t\t\tivec3 b = ivec3(x, y, z);\n\t\t\t\t\tif (b != mb) \n\t\t\t\t\t{\n\t\t\t\t\t\tvec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;\n\t\t\t\t\t\tfloat d = length(r);\n\n\t\t\t\t\t\tf2_smooth = smin(d, f2_smooth, smoothness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Different visualization modes \n\t\t\tif (style == 0) \n\t\t\t{\n\t\t\t\treturn f1_smooth;\n\t\t\t}\n\t\t\tif (style == 1) \n\t\t\t{\n\t\t\t\treturn f2_smooth;\n\t\t\t}\n\t\t\tif (style == 2) \n\t\t\t{\n\t\t\t\treturn f2_smooth - f1_smooth;\n\t\t\t\t\n\t\t\t\t// "Pebbles" also cool\n\t\t\t\t//return step(0.2, f2_smooth - f1_smooth);\n\t\t\t}\n\t\t\tif (style == 3) \n\t\t\t{\n\t\t\t\t// This one is really good for rock / stone effects\n\t\t\t\tfloat a = f1; \n\t\t\t\tfloat b = f2;\n\t\t\t\tfloat k = 3.0;\n\t\t\t\tfloat h = max(k - abs(a - b), 0.0) / k;\n\t\t\t\tfloat final = min(a, b) - h * h * k * (1.0 / 4.0);\n\t\t\t\treturn final;\n\t\t\t}\n\t\t\tif (style == 4) \n\t\t\t{\n\t\t\t\t// Some random adjustments to make this style stand out more \n\t\t\t\treturn exp(5.0 * e_smooth);\n\t\t\t}\n\t\t\tif (style == 5) \n\t\t\t{\n\t\t\t\treturn pow(f1_smooth, 3.0);\n\t\t\t}\n\t\t\tif (style == 6) \n\t\t\t{\t\t\t\t\n\t\t\t\tconst float eps = 0.0125;\n\n\t\t\t\t// Thicker lines as the user increases the smoothness slider\n\t\t\t\tfloat thickness = smoothness * 0.25 + eps;\n\n\t\t\t\t// Blurrier lines as the user increases the smoothness slider\n\t\t\t\tfloat blur = pow(smoothness, 3.0) * 0.25 + eps;\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\tthickness - thickness * blur, \n\t\t\t\t\tthickness + thickness * blur, \n\t\t\t\t\te\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (style == 7) \n\t\t\t{\n\t\t\t\treturn hashwithoutsine13(vec3(p + mb) + seed);\n\t\t\t}\n\t\t}\n\t',[p,g,v,y,b,P])}}(),gX=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d,h,p,g,v,y,b,P,S){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=n,this.fA=i,this.fB=r,this.distortion=o,this.colorA=s,this.colorB=a,this.colorC=l,this.colorD=c,this.noiseType=h,this.voronoiStyle=g,this.highCut=v,this.lowCut=y,this.smoothness=b,this.seed=P,this.quality=S,this.isMask=p,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,n,i,r){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(Uk)[this.noiseType.value],a=new gn(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) \n\t\t\t{\n                // Prevent scale of zero \n\t\t\t\tscale = max(abs(scale), 0.001);\n\n\t\t\t\tvec3 st = position / size;\n\t\t\t\tst /= scale;\n\n\t\t\t\t${"voronoi"==o?`\n\t\tfloat v = ${o}(st + move, voronoiStyle, smoothness, seed, quality);\n\n\t\t// Apply clipping to colors\n\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t// Note that the voronoi mode only uses colors "A" and "C" from the UI \n\t\tvec4 color = mix(colorA, colorC, v); \n\t\t`:`\n\t\tvec3 q = vec3(${o}(st),\n\t\t\t\t\t   ${o}(st + vec3(1.0)),\n\t\t\t\t\t   ${o}(st + vec3(1.0)));\n\t\tvec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t  ${o}(st * q));\n\t\tfloat f = ${o}(st + r);\n\t\tvec4 color;\n\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\t\t`}\n\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}`,[Hl.simplex,Hl.simplexFractal,Hl.simplexAshima,Hl.fbm,Hl.perlin,Hl.voronoi]),l=e.include(a),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};gX.numOctaves=5;var vX=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d,h,p,g,v,y){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=n,this.contourWidth=i,this.contourThreshold=r,this.outlineThreshold=o,this.contourFrequency=s,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=d,this.resolution=h,this.normalMap=p,this.depthMap=g,this.pixelRatio=v,this.alpha=y,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let n=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${n}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),o=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(o,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`\n                vID = randomColor.r;\n                vec2 ${n}_offset = vec2(0.0);\n                if (${o}) {\n                    vec4 ${n}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ${n}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    ${n}_offset = normalize(${n}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${n}_clipPosition.w * 2.0 * ${s};\n                    ${n}_clipPosition.xy += ${n}_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ${n}_clipPosition;\n                }\n            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(vX.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+r.join(",")+")",this.getType(e),t)}return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},yX=vX;yX.Nodes=function(){let e=new gn("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    vec2 texelSize = (vec2(1.0) / resolution);\n    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);\n\tuvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);\n\tuvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);\n\tuvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);\n\tuvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);\n\tuvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);\n\tuvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);\n  \tvec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new gn("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                //resultAlpha = 1.0;\n                //result = vec3(sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha * mask;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\t \n                 return result;\n             }",[e])}}();var np=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d,h,p,g,v,y,b,P){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=n,this.blending=i,this.offset=r,this.colorA=o,this.colorB=s,this.frequency=a,this.size=l,this.variation=c,this.smoothness=d,this.zigzag=h,this.rotation=p,this.vertical=g,this.horizontal=v,this.sides=y,this.isMask=P,this.alpha=b,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let n;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float"),this.style.value){case 0:default:n="circle";break;case 1:n="ring";break;case 2:n="polygon";break;case 3:n="xcross";break;case 4:n="diamond";break;case 5:n="checkerboard";break;case 6:n="line";break;case 7:n="wave"}let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new gn("float hashwithoutsine12(vec2 p)\n\t\t\t\t{\n\t\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * .1031);\n\t\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t\t}"),o=new gn("vec2 rotate_uv(in vec2 uv, float a, bool repeat) \n\t\t\t\t{\n\t\t\t\t\tconst float mid = 0.5;\n\t\t\t\t\tfloat radians = a * (PI / 180.0);\n\t\t\t\t\tvec2 rotated = vec2(\n\t\t\t\t\t\tcos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,\n\t\t\t\t\t\tcos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid\n\t\t\t\t\t);\n\t\t\t\t\treturn repeat ? fract(rotated): rotated;\n\t\t\t\t}"),s="";if(4===this.projection.value)s=`\n\t\t\t\tvec3 p = position;\n\t\t\t\tfloat factor = 0.0125;\n\t\t\t\tvec2 uv0 = fract(p.xy * factor);\n\t\t\t\tvec2 uv1 = fract(p.zy * factor);\n\t\t\t\tvec2 uv2 = fract(p.xz * factor);\n\t\t\t\t\n\t\t\t\tuv0 = rotate_uv(uv0 + offset, rotation, true);\n\t\t\t\tuv1 = rotate_uv(uv1 + offset, rotation, true);\n\t\t\t\tuv2 = rotate_uv(uv2 + offset, rotation, true);\n\t\n\t\t\t\tfloat d0 = ${2===this.style.value?`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d1 = ${2===this.style.value?`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\tfloat d2 = ${2===this.style.value?`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`};\n\t\t\t\t\n\t\t\t\t// Range from 3 to 128 seems to be good\n\t\t\t\tfloat exponent = (1.0 - blending) * 125.0 + 3.0;\n\n\t\t\t\tvec3 n = vObjectNormal;\n\t\t\t\tvec3 weights = abs(normalize(n));\n\t\t\t\tweights = pow(weights, vec3(exponent));\n\t\t\t\tweights /= dot(weights, vec3(1.0));\n\t\t\t\td0 *= weights.z;\n\t\t\t\td1 *= weights.x;\n\t\t\t\td2 *= weights.y;\n\t\t\t\tfloat draw = d0 + d1 + d2;\n\t\n\t\t\t\tvec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;\n\t\t\t\t`;else{let d=2===this.style.value?`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${n}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h="";h=0===this.axis.value?"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.z);\n\t\t\t\t\tfloat phi = acos(p.x / radius);":1===this.axis.value?"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.x, p.z);\n\t\t\t\t\tfloat phi = acos(p.y / radius);":"float radius = length(p);\n\t\t\t\t\tfloat theta = atan(p.y, p.x);\n\t\t\t\t\tfloat phi = acos(p.z / radius);";let p="";switch(this.projection.value){case 0:p="custom_uv = vUv.st;";break;case 1:case 3:default:break;case 2:p=`\n\t\t\t\t\t\t\tvec3 p = position;\n\t\t\t\t\t\t\t${h}\n\t\t\t\t\t\t\tcustom_uv = vec2(theta, phi);\n\t\t\t\t\t\t\tcustom_uv /= PI;\n\t\t\t\t\t\t\t`}s=`\n\t\t\t\tvec2 custom_uv;\n\t\t\t\t${p}\n\t\n\t\t\t\tcustom_uv += offset;\n\t\t\t\tcustom_uv = fract(custom_uv);\n\t\t\t\tcustom_uv = rotate_uv(custom_uv, rotation, true);\n\t\n\t\t\t\tfloat draw = ${d};\n\t\t\t\t`}let a=new gn(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\t\tconst float TWO_PI = PI * 2.0;\n\t\t\t\t\tfloat smoothness_remapped = pow(smoothness, 5.0);\t\n\n\t\t\t\t\t${s}\n\n\t\t\t\t\t// Construct final output color\n\t\t\t\t\tvec4 color = mix(colorA, colorB, draw);\n\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t// Apply cuts\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(vertical.x, custom_uv.y) * \n\t\t\t\t\t\tstep(custom_uv.y, vertical.y);\n\t\t\t\t\tcolor.a *= \n\t\t\t\t\t\tstep(horizontal.x, abs(custom_uv.x)) * \n\t\t\t\t\t\tstep(abs(custom_uv.x), horizontal.y);\n\n\t\t\t\t\t// Accumulate alpha \n\t\t\t\t\tfloat lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;\n\t\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t\t}`,[o,r,np.DrawFunctions.circle,np.DrawFunctions.ring,np.DrawFunctions.polygon,np.DrawFunctions.cross,np.DrawFunctions.diamond,np.DrawFunctions.checkerboard,np.DrawFunctions.line,np.DrawFunctions.wave]),l=e.include(a),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},bX=np;bX.DrawFunctions=function(){let e=new gn("float hashwithoutsine12(vec2 p) {\n\t\t\t\tvec3 p3 = fract(vec3(p.xyx) * 0.1031);\n\t\t\t\tp3 += dot(p3, p3.yzx + 33.33);\n\t\t\t\treturn fract((p3.x + p3.y) * p3.z);\n\t\t\t}"),t=new gn("vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {\n                // Create tiles in UV-space\n                uv *= frequency;\n\n                // Integer coords\n                vec2 i = floor(uv);\n\n                // Offset every other row based on zigzag param, then compute fractional coords\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = fract(uv);\n\n\t\t\t\t// Rotate the tile itself:\n\t\t\t\t// const float mid = 0.5;\n\t\t\t\t// f = vec2(\n\t\t\t\t// \tcos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,\n\t\t\t\t// \tcos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid\n\t\t\t\t// );\n\t\t\t\t// f = fract(f);\n\n                f = f * 2.0 - 1.0;\n\n\t\t\t\t// Recompute integer coords after shifting - then, random value per tile \n\t\t\t\ti = floor(uv);\n\t\t\t\tfloat rand = (hashwithoutsine12(i) * 5.0 + 1.0);\n\t\t\t\tfloat jitter = mix(1.0, rand, variation);\n\t\t\t\tf *= jitter;\n\n                return f;\n            }",[e]);return{tileAndCenter:t,circle:new gn("float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(\n                    -smoothness, \n                     smoothness, \n                     length(f) - size\n                );\n            }",[t]),ring:new gn("float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\n\t\t\t\tfloat d = length(f);\n                const float inner_width = 0.5;\n\n                float outer = smoothstep(-smoothness, smoothness, d - size);\n                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);\n\t\t\t\treturn outer + (1.0 - inner);   \n            }",[t]),polygon:new gn("float sdf_ngon(in vec2 p, in float r, in int n) {\n                float an = (PI * 2.0) / float(n);\n                float he = r * tan(0.5 * an);\n                \n                // Rotate to first sector\n                p = -p.yx; \n                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);\n                vec2  cs = vec2(cos(bn), sin(bn));\n                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;\n            \n                // Side of polygon\n                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);\n            }\n            \n            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));\n            }",[t]),cross:new gn("float sdf_cross(in vec2 p, in vec2 b, float r ) {\n                p = abs(p); \n\t\t\t\tp = (p.y > p.x) ? p.yx : p.xy;\n                vec2  q = p - b;\n                float k = max(q.y, q.x);\n                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n                return sign(k) * length(max(w, 0.0)) + r;\n            }\n            \n            // Avoid namespace conflicts \n            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));\n            }",[t]),diamond:new gn("float ndot(vec2 a, vec2 b) { \n                return a.x*b.x - a.y*b.y; \n            }\n            \n            float sdf_diamond(in vec2 p, in vec2 b) {\n                p = abs(p);\n                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);\n                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));\n                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);\n            }\n\n            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);\n\t            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));\n            }",[t]),checkerboard:new gn("float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                uv *= frequency;\n                vec2 i = floor(uv);\n\n                float offset = mod(i.y, 2.0);\n\n                uv.x += offset + zigzag * offset;\n                float x = floor(uv.x);\n                \n                return mod(x, 2.0);\n            }"),line:new gn("float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);\n\t\t\t\t\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat row = floor(uv * frequency).y;\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(row));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n\t\t\t\treturn smoothstep(\n\t\t\t\t\ts - smoothness, \n\t\t\t\t\ts + smoothness, \n\t\t\t\t\tabs(f.y)\n\t\t\t\t);\n            }",[t]),wave:new gn("// Uses bisection \n            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {\n                // Convert all data to a primitive cosine wave\n                p = c * (p - vec2(d, a));\n                \n                const float TWO_PI = PI * 2.0;\n\n                // Reduce to principal half cycle\n                p.x = mod(p.x, TWO_PI); \n                if (p.x > PI) {\n                    p.x = TWO_PI - p.x;\n                }\n            \n                // Find zero of derivative (minimize distance)\n                float xa = 0.0;\n                float xb = TWO_PI;\n\n                // 24 bit precision\n                for (int i = 0; i < 24; i++) {\n                    float x = 0.5 * (xa + xb);\n                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));\n                    if (y < 0.0) xa = x; \n                    else xb = x;\n                }\n                float x = 0.5 * (xa + xb);\n                \n                // Compute distance    \n                vec2 q = vec2(x, b * c * cos(x));\n                return length(p - q) / c;\n            }\n\n            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {\n                float repeat = frequency.x;\n                uv *= repeat;\n                vec2 i = floor(uv);\n                float row_offset = mod(i.y, 2.0);\n                uv.x += row_offset * zigzag;\n                vec2 f = vec2(uv.x, fract(uv.y));\n\n                // Generalized cosine: y(x) = a + b * cos(cx + d)\n                const float amplitude = 0.125;\n                float wave_frequency = frequency.y * 0.1;\n                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);\n\n\t\t\t\t// Different approach for variation param here\n\t\t\t\tfloat rand = hashwithoutsine12(vec2(i.y));\n\t\t\t\tfloat s = mix(size, size * rand, variation);\n\n                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);\n            }")}}();var _X=class extends Wr{constructor(e,t,n,i,r,o,s,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=n,this.noiseStrength=i,this.noiseScale=r,this.offset=o,this.isMask=a,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(_X.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},xX=_X;xX.Nodes=function(){let e=new gn("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[Hl.simplex]);return{rainbow:new gn("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {\n\t\t\t\tvec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n\t\t\t\tfloat rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n\n\t\t\t\tfloat lalpha = alpha * rainbowContribution * mask;\n\t\t\t\tcalpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));\n\n\t\t\t\treturn res;\n             }",[e])}}();var CX=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=n,this.source=i,this.isWorldSpace=r,this.noiseStrength=o,this.noiseScale=s,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let n=e.include(CX.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},wX=CX;wX.Nodes=function(){let e=new gn("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new gn("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),n=new gn("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),i=new gn("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),r=new gn('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[i]);return{toon:new gn('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotLightCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplex3d(st),\n\t\t\t\t\t// \tsimplex3d(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplex3d(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a * mask;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[Hl.simplex,e,n,r])}}();var b4e={textureBicubic:new gn("float w0( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n        }\n    \n        float w1( float a ) {\n            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n        }\n    \n        float w2( float a ){\n            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n        }\n    \n        float w3( float a ) {\n            return ( 1.0 / 6.0 ) * ( a * a * a );\n        }\n    \n        // g0 and g1 are the two amplitude functions\n        float g0( float a ) {\n            return w0( a ) + w1( a );\n        }\n    \n        float g1( float a ) {\n            return w2( a ) + w3( a );\n        }\n    \n        // h0 and h1 are the two offset functions\n        float h0( float a ) {\n            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n        }\n    \n        float h1( float a ) {\n            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n        }\n    \n        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n            uv = uv * texelSize.zw + 0.5;\n    \n            vec2 iuv = floor( uv );\n            vec2 fuv = fract( uv );\n    \n            float g0x = g0( fuv.x );\n            float g1x = g1( fuv.x );\n            float h0x = h0( fuv.x );\n            float h1x = h1( fuv.x );\n            float h0y = h0( fuv.y );\n            float h1y = h1( fuv.y );\n    \n            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n    \n            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + \n                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n        }\n\n        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n            vec2 fLodSizeInv = 1.0 / fLodSize;\n            vec2 cLodSizeInv = 1.0 / cLodSize;\n            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n            return mix( fSample, cSample, fract( lod ) );\n        }")},MX=class extends Wr{constructor(e,t,n,i,r,o,s,a){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=n,this.transmissionSamplerSize=i,this.transmissionSamplerMap=r,this.transmissionDepthMap=o,this.aspectRatio=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,ai.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let n=e.include(MX.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},PX=MX;PX.Nodes=function(){let e=new gn("vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n\t\t\t\t// Special case for blur == 0.0\n\t\t\t\tif (lod == 0.0) {\n\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\treturn texture2DLodEXT( sp, U, 0.0).rgb;\n\t\t\t\t\t#else\n\t\t\t\t\treturn textureLod( sp, U, 0.0).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec2 texelSize = vec2(1.0) / resolution;\n                vec2 halton = haltonSequence[frameIndex];\n                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n                float temporalAngle  = temporalOffset * PI2;\n\t\t\t\tvec3 res = vec3(0.0);\n                vec2 uv = vec2(0.0);\n                vec2 offset = vec2(0.0);\n                vec2 vogelSample = vec2(0.0);\n                for (int i = 0; i < NUM_SAMPLES; i++) {\n                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;\n                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20\n                    uv = U + offset;\n                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    res += textureLod(sp, uv, lod).rgb;\n                }\n                return res / float(NUM_SAMPLES);\n            }"),t=new gn("vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        \n\t\t\t\t// Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t        // The thickness is specified in local space\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),n=new gn("float applyIorToRoughness( float roughness, float ior ) {\n\t\t\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\t\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t\t\t}"),i=new gn('vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\t\t\t// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see\n\t\t\t\t// also the code in convertTransmission.ts, which runs during export\n\t\t\t\t#ifdef IS_THREEJS_EXPORT\n\t\t\t\t\tfloat lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);\n\t\t\t\t\treturn textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;\n\t\t\t\t#else\n\t\t\t\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t\t\t\tfloat lod = applyIorToRoughness(roughness, ior);\n\t\t\t\t\treturn blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t\t\t\t#endif\n\t\t\t}',[b4e.textureBicubic,n,e]),r=new gn("vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\n\t\t\t\tvec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n\t\t\t\tvec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n\t\t\t\tunrefractedCoords += 1.0;\n\t\t\t\tunrefractedCoords /= 2.0;\n\n\t\t\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\t\t\treturn getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    \t\t}",[i,t]);return{transmission:new gn("vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                \n\t\t\t\tfloat lalpha = alpha * mask;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn transmission;\n            }",[r])}}();var jk=(e=>(e.NOISE="noise",e.MAP="map",e))(jk||{}),SX=class extends Wr{constructor(e,t,n,i,r,o,s,a,l,c,d){super("v3"),this.displacementTypeIndex=new oo(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,"map"===Object.values(jk)[this.displacementTypeIndex.value]&&(this.mat=new oX(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=c,this.noiseFunctionIndex=d,this.voronoiStyle=i,this.smoothness=r,this.seed=o,this.highCut=s,this.lowCut=a,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let n,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(jk)[this.displacementTypeIndex.value]){case"map":n=e.include(SX.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break;case"noise":{let r=Object.values(Uk)[this.noiseFunctionIndex.value],o=new gn("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),a=new gn(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {\n\t\t\t\t\t\t\t${"voronoi"==r?`\n\t\t\t\t\tfloat v = ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);\n\t\t\t\t\tv = remap(v, lowCut, highCut, 0.0, 1.0);\n\t\t\t\t\tv = smax(v, 0.0, smoothness * 0.25);\n\t\t\t\t\tv = smin(v, 1.0, smoothness * 0.25);\n\n\t\t\t\t\treturn p + n * v * intensity;\n\t\t\t\t\t`:`\n\t\t\t\t\treturn p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t`}\n\t\t\t\t\t\t}`,[Hl.simplex,Hl.simplexFractal,Hl.simplexAshima,Hl.fbm,Hl.perlin,Hl.voronoi]),l=new gn("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[a,o]);n=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(n+"("+i.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},OX=SX;OX.Nodes=function(){let e=new gn("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new gn("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new gn("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var ai={normalRenderTarget:new ep,normalRenderTargetDepth:new ep,transmissionRenderTarget:new ep,aspectRatio:new Ea,transmissionSize:new Ea(2048,2048),transmissionRenderTargetDepth:new ep,aoRenderTarget:new ep,aoEnabled:new bl,pixelRatioNode:new kn(1),resolution:new Ea,penumbraSize:new bg(5,.5),frameIndex:new oo(0),transmissionLod:new oo(2)};for(let e of Object.values(ai))e.isRenderGlobal=!0;var Hk,EX={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.35/build/ui.wasm"},Vk=class extends qs{constructor(){super("basic"),this.nodeType="Basic",this.color=new es(gc),this.shadingAlpha=new kn(1),this.shadingBlend=new oo(0),this.previousModelViewMatrix=new Bh,this.previouseProjectionMatrix=new Bh}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({resolution:ai.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pv.merge([un.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{void 0===this.color&&(this.color=new es(gc)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let n=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,r=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==i,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let s=["#include <normal_fragment_begin>",n.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),o?s.push(o.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${n.result};`);let a="1.0";this.mask&&(this.mask.analyze(e),a=`luminance(${this.mask.flow(e,"v3").result})`),s.push(i?`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${a} );`:"gl_FragColor = vec4("+n.result+", 1.0 );"),r&&s.push(`gl_FragColor.a *= ${r.result};`),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join("\n")}return t}},x4e=class extends qs{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new es(gc),this.emissive=new es(0),this.emissiveIntensity=new kn(1),this.previousModelViewMatrix=new Bh,this.previouseProjectionMatrix=new Bh,this.shadingAlpha=new kn(1),this.shadingBlend=new oo(0),this.occlusion=new bl(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({resolution:ai.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pv.merge([un.fog,un.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t"),i.push("\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:ai.penumbraSize}),e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({aoMap:ai.aoRenderTarget}),e.mergeUniform({aoEnabled:ai.aoEnabled}),void 0===this.color&&(this.color=new es(gc)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.occlusion.flow(e,"b",{slot:"occlusion"}),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];h.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+r.result+";"),h.push("vec3 ao = aoEnabled && "+o.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let p="1.0";this.mask&&(this.mask.analyze(e),p=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${p} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${p}, ${a.result} );\n\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h.push(c?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&h.push(`gl_FragColor.a *= ${d.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}},p1={dHdxy:new gn("vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {\n\n            // Gradient of UVs w.r.t. X coordinate (in screen-space)\n            vec2 dSTdx = dFdx(bumpMapUv);\n\n            // Gradient of UVs w.r.t. Y coordinate (in screen-space)\n            vec2 dSTdy = dFdy(bumpMapUv);\n            \n            // Forward differencing\n            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);\n            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;\n            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;\n            \n            return vec2( dBx, dBy );\n        }"),perturbNormalArb:new gn("vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n            vec3 vSigmaX = dFdx( surf_pos.xyz );\n            vec3 vSigmaY = dFdy( surf_pos.xyz );\n            vec3 vN = surf_norm; // normalized\n            \n            vN = normalize(vN);\n\n            vec3 R1 = cross( vSigmaY, vN );\n            vec3 R2 = cross( vN, vSigmaX );\n\n            R1 = normalize(R1);\n            R2 = normalize(R2);\n    \n            float fDet = dot( vSigmaX, R1 ) * faceDirection;\n    \n            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n            return normalize( abs( fDet ) * vN - vGrad );\n        }")},C4e=class extends qs{constructor(){super("phong"),this.nodeType="Phong",this.color=new es(gc),this.specular=new es(1118481),this.shininess=new kn(30),this.previousModelViewMatrix=new Bh,this.previouseProjectionMatrix=new Bh,this.shadingAlpha=new kn(1),this.shadingBlend=new oo(0),this.occlusion=new bl(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({resolution:ai.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pv.merge([un.fog,un.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:ai.penumbraSize}),e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({aoMap:ai.aoRenderTarget}),e.mergeUniform({aoEnabled:ai.aoEnabled}),void 0===this.color&&(this.color=new es(gc)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let n=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let h=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];if(this.bumpMap){e.include(p1.dHdxy),e.include(p1.perturbNormalArb);let g=this.bumpMap.texture.flow(e,"t"),v=this.bumpMap.flow(e,"v3"),y=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",b="";b=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${g.result}, uv0, ${y});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${g.result}, uv1, ${y});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${g.result}, uv2, ${y});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${g.result}, bumpMapCachedUv, ${y});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,h.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${v.result};\n\t\t\t\t\t${b}\n\t\t\t\t\t`)}h.push(i.code,"\tvec3 diffuseColor = "+i.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",r.code,"\tvec3 specular = "+r.result+";",o.code,"\tfloat shininess = max( 0.0001, "+o.result+" );","\tfloat specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let p="1.0";this.mask&&(this.mask.analyze(e),p=`luminance(${this.mask.flow(e,"v3").result})`),h.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${p} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${p}, ${a.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h.push(c?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&h.push(`gl_FragColor.a *= ${d.result};`),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}},w4e=class extends qs{constructor(){super("standard"),this.nodeType="Standard",this.color=new es(gc),this.roughness=new kn(.3),this.metalness=new kn(0),this.reflectivity=new kn(.5),this.previousModelViewMatrix=new Bh,this.previouseProjectionMatrix=new Bh,this.shadingAlpha=new kn(1),this.shadingBlend=new oo(0),this.occlusion=new bl(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({resolution:ai.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pv.merge([un.fog,un.lights])),un.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:ai.penumbraSize}),e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({aoMap:ai.aoRenderTarget}),e.mergeUniform({aoEnabled:ai.aoEnabled});let n={gamma:!0};void 0===this.color&&(this.color=new es(gc)),this.color.analyze(e,{slot:"color",context:n}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:n}),o=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,d=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,p=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==d,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let g=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(p1.dHdxy),e.include(p1.perturbNormalArb);let y=this.bumpMap.texture.flow(e,"t"),b=this.bumpMap.flow(e,"v3"),P=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",S="";S=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${y.result}, uv0, ${P});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${y.result}, uv1, ${P});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${y.result}, uv2, ${P});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${y.result}, bumpMapCachedUv, ${P});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,g.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${b.result};\n\t\t\t\t\t${S}\n\t\t\t\t\t`)}if(g.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"\tfloat metalnessFactor = "+s.result+";"),this.roughnessMap){let y=this.roughnessMap.texture.flow(e,"t"),b=this.roughnessMap.flow(e,"v3"),P="";P=4===this.roughnessMap.projection.value?`\n\t\t\t\t\tfloat roughnessChange = 1.0;\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tfloat r0 = luminance(texture(${y.result}, uv0).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r1 = luminance(texture(${y.result}, uv1).rgb) * roughnessScale;\n\t\t\t\t\t\tfloat r2 = luminance(texture(${y.result}, uv2).rgb) * roughnessScale;\n\n\t\t\t\t\t\troughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);\n\t\t\t\t\t}\n\t\t\t\t\tfloat roughnessFactor = roughnessChange * ${o.result};\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\n\t\t\t\t\tvec4 vals = texture(${y.result},  roughnessMapCachedUv);\n\t\t\t\t\tfloat roughnessFactor = luminance(vals.rgb) * ${o.result};\n\t\t\t\t\t`,g.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${b.result};\n\n\t\t\t\t\tconst float roughnessScale = 1.0;\n\n\t\t\t\t\t${P}\n\t\t\t\t`)}else g.push(o.code,"\tfloat roughnessFactor = "+o.result+";");d&&g.push(d.code,"#ifdef ALPHATEST","\tif ( "+d.result+" <= ALPHATEST ) discard;","#endif"),g.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),g.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),p?g.push(p.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+p.result+" ) ), diffuseColor, metalnessFactor );"):g.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),g.push("#include <lights_fragment_begin>"),g.push("#include <lights_fragment_end>"),g.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let v="1.0";this.mask&&(this.mask.analyze(e),v=`luminance(${this.mask.flow(e,"v3").result})`),g.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${v} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${v}, ${l.result} );\n\t\t\t\t\t\n\t\t\t\t\toutgoingLight *= ao;\n\t\t\t\t}\n\t\t\t\t`),c&&g.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),g.push(d?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${d.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&g.push(`gl_FragColor.a *= ${h.result};`),g.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=g.join("\n")}return t}},M4e=class extends qs{constructor(){super("toon"),this.nodeType="Toon",this.color=new es(gc),this.specular=new es(1118481),this.shininess=new kn(30),this.previousModelViewMatrix=new Bh,this.previouseProjectionMatrix=new Bh,this.shadingAlpha=new kn(1),this.shadingBlend=new oo(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({resolution:ai.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pv.merge([un.fog,un.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","\n\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t#include <skinnormal_vertex>\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = objectNormal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join("\n")}else{e.mergeUniform({penumbraSize:ai.penumbraSize}),e.mergeUniform({frameIndex:ai.frameIndex}),e.mergeUniform({aoMap:ai.aoRenderTarget}),e.mergeUniform({aoEnabled:ai.aoEnabled}),void 0===this.color&&(this.color=new es(gc)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),r=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let d=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];if(this.bumpMap){e.include(p1.dHdxy),e.include(p1.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";y=4===this.bumpMap.projection.value?`\n\t\t\t\t\tvec3 bumpNormal = vec3(0.0);\n\t\t\t\t\t{\n\t\t\t\t\t\tvec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;\n\t\t\t\t\t\tvec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;\n\t\t\t\t\t\tvec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;\n\t\t\t\t\t\tvec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;\n\n\t\t\t\t\t\tvec2 grad0 = dHdxy(${p.result}, uv0, ${v});\n\t\t\t\t\t\tvec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);\n\n\t\t\t\t\t\tvec2 grad1 = dHdxy(${p.result}, uv1, ${v});\n\t\t\t\t\t\tvec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);\n\n\t\t\t\t\t\tvec2 grad2 = dHdxy(${p.result}, uv2, ${v});\n\t\t\t\t\t\tvec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);\n\t\t\t\t\t\t\n\t\t\t\t\t\tbumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;\n\t\t\t\t\t\tbumpNormal = normalize(bumpNormal);\n\t\t\t\t\t}\n\n\t\t\t\t\tnormal = bumpNormal;\n\t\t\t\t\t`:`\n\t\t\t\t\tvec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;\n\t\t\t\t\tvec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${v});\n\t\t\t\t\tnormal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );\n\t\t\t\t\t`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates\n\t\t\t\t\t${g.result};\n\t\t\t\t\t${y}\n\t\t\t\t\t`)}d.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"\tvec3 specular = "+i.result+";",r.code,"\tfloat shininess = max( 0.0001, "+r.result+" );","\tfloat specularStrength = 1.0;"),l&&d.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${h} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${h}, ${s.result} );\n\t\t\t\t}\n\t\t\t\t`),a&&d.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),d.push(l?`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`:"gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join("\n")}return t}};var DX=class extends class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount-=1,0===this.refCount&&(this.cache.remove(this),this.dispose())}dispose(){}}{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo="video"===e.type,this.isBuffer=!0===e.isWebGLRenderTarget,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}updateSrc(e){var t=this;return(0,Qn.Z)(function*(){if(typeof document>"u")return;t.disposeTextures(),t.loaded=!1;let n=()=>{t.loaded=!0;for(let r of Object.values(t._cache))for(let o of Object.values(r))for(let s of Object.values(o))s&&(s.image=t.img,s.needsUpdate=!0);t.shared.requestRender()};if(t.isBuffer)t.img=e,t.loaded=!0;else if(t.isVideo){if(t.img=document.createElement("video"),t.img.preload="auto",t.img.playsInline=!0,t.img.currentTime=.01,"string"!=typeof e){var i=new FileReader;let r;i.readAsDataURL(new Blob([e],{type:"video/mp4"})),yield new Promise(o=>{i.onloadend=s=>{r=s.target?.result,o(null)}}),t.img.src=r}else t.img.src=e;t.img.onloadeddata=()=>{n()}}else t.img=new Image,t.img.src=function O4e(e){return"string"==typeof e?e:(Hk||(Hk=new class extends class{constructor(e=1e4){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){return this.cache.get(e)?.data}load(e){let t=Date.now(),n=this.cache.get(e);return void 0===n?(n={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}}{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}}),Hk.load(e))}(e),t.img.onload=n,yield new Promise(r=>{t.img.onload=()=>{n(),r(null)}})})()}getTexture(e,t=1008,n=1006){let i=this._cache[e]?.[t]?.[n];if(i)return i;{let r;return r=this.isBuffer?this.img.texture:this.isVideo?new ZCe(this.img,void 0,e,e):new jo(this.img,void 0,e,e,n,t),this.loaded&&(r.needsUpdate=!0),void 0===this._cache[e]&&(this._cache[e]={}),void 0===this._cache[e][t]&&(this._cache[e][t]={}),this._cache[e][t][n]=r,r}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let n of Object.values(t))for(let i of Object.values(n))i&&(i.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[n,i]of Object.entries(t))for(let[r,o]of Object.entries(i))o?.dispose(),void 0!==this._cache[e]&&void 0!==this._cache[e][n]&&(this._cache[e][n][r]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Of=class extends DX{};var T4e={year:0,month:1,day:2,hour:3,minute:4,second:5},Gk={};function AX(e,t,n,i,r,o,s){var a=new Date(0);return a.setUTCFullYear(e,t,n),a.setUTCHours(i,r,o,s),a}var Wk={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function IX(e,t,n){var i,r,o;if(!e||(i=Wk.timezoneZ.exec(e)))return 0;if(i=Wk.timezoneHH.exec(e))return kX(o=parseInt(i[1],10))?-36e5*o:NaN;if(i=Wk.timezoneHHMM.exec(e)){o=parseInt(i[1],10);var s=parseInt(i[2],10);return kX(o,s)?(r=36e5*Math.abs(o)+6e4*s,o>0?-r:r):NaN}if(function B4e(e){if(RX[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),RX[e]=!0,!0}catch{return!1}}(e)){t=new Date(t||Date.now());var a=n?t:function F4e(e){return AX(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),l=qk(a,e),c=n?l:function L4e(e,t,n){var r=e.getTime()-t,o=qk(new Date(r),n);if(t===o)return t;r-=o-t;var s=qk(new Date(r),n);return o===s?o:Math.max(o,s)}(t,l,e);return-c}return NaN}function qk(e,t){var n=function A4e(e,t){var n=function R4e(e){if(!Gk[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));Gk[e]="06/25/2014, 00:00:00"===t||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===t?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Gk[e]}(t);return n.formatToParts?function I4e(e,t){try{for(var n=e.formatToParts(t),i=[],r=0;r<n.length;r++){var o=T4e[n[r].type];o>=0&&(i[o]=parseInt(n[r].value,10))}return i}catch(s){if(s instanceof RangeError)return[NaN];throw s}}(n,e):function k4e(e,t){var n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[i[3],i[1],i[2],i[4],i[5],i[6]]}(n,e)}(e,t),i=AX(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),r=e.getTime(),o=r%1e3;return i-(r-(o>=0?o:1e3+o))}function kX(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var RX={},z4e=Eu(zve(),1),NX=Eu(Uve(),1),Yk=36e5,_l={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function G4e(e){var i,t={},n=_l.dateTimePattern.exec(e);if(n?(t.date=n[1],i=n[3]):(n=_l.datePattern.exec(e))?(t.date=n[1],i=n[2]):(t.date=null,i=e),i){var r=_l.timeZone.exec(i);r?(t.time=i.replace(r[1],""),t.timeZone=r[1].trim()):t.time=i}return t}function W4e(e,t){var r,n=_l.YYY[t],i=_l.YYYYY[t];if(r=_l.YYYY.exec(e)||i.exec(e)){var o=r[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(r=_l.YY.exec(e)||n.exec(e)){var s=r[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}function q4e(e,t){if(null===t)return null;var n,i,r,o;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=_l.MM.exec(e))return i=new Date(0),zX(t,r=parseInt(n[1],10)-1)?(i.setUTCFullYear(t,r),i):new Date(NaN);if(n=_l.DDD.exec(e)){i=new Date(0);var s=parseInt(n[1],10);return function Q4e(e,t){if(t<1)return!1;var n=BX(e);return!(n&&t>366||!n&&t>365)}(t,s)?(i.setUTCFullYear(t,0,s),i):new Date(NaN)}if(n=_l.MMDD.exec(e)){i=new Date(0),r=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return zX(t,r,a)?(i.setUTCFullYear(t,r,a),i):new Date(NaN)}if(n=_l.Www.exec(e))return UX(0,o=parseInt(n[1],10)-1)?LX(t,o):new Date(NaN);if(n=_l.WwwD.exec(e)){o=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return UX(0,o,l)?LX(t,o,l):new Date(NaN)}return null}function Y4e(e){var t,n,i;if(t=_l.HH.exec(e))return Xk(n=parseFloat(t[1].replace(",",".")))?n%24*Yk:NaN;if(t=_l.HHMM.exec(e))return Xk(n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")))?n%24*Yk+6e4*i:NaN;if(t=_l.HHMMSS.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return Xk(n,i,r)?n%24*Yk+6e4*i+1e3*r:NaN}return null}function LX(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var o=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+o),i}var X4e=[31,28,31,30,31,30,31,31,30,31,30,31],$4e=[31,29,31,30,31,30,31,31,30,31,30,31];function BX(e){return e%400==0||e%4==0&&e%100!=0}function zX(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var i=BX(e);if(i&&n>$4e[t]||!i&&n>X4e[t])return!1}return!0}function UX(e,t,n){return!(t<0||t>52||null!=n&&(n<0||n>6))}function Xk(e,t,n){return!(null!=e&&(e<0||e>=25)||null!=t&&(t<0||t>=60)||null!=n&&(n<0||n>=60))}function xl(e,t){return t.color(e)}function jX(e=new Date,t){let n=t.format,i=e.getSeconds(),r=e;t&&null!==t.timeZone&&(r=function K4e(e,t,n){var i=function H4e(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},i=null==n.additionalDigits?2:(0,z4e.default)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r=G4e(e),o=W4e(r.date,i),l=q4e(o.restDateString,o.year);if(isNaN(l))return new Date(NaN);if(l){var h,c=l.getTime(),d=0;if(r.time&&(d=Y4e(r.time),isNaN(d)))return new Date(NaN);if(r.timeZone||n.timeZone){if(h=IX(r.timeZone||n.timeZone,new Date(c+d)),isNaN(h))return new Date(NaN)}else h=(0,NX.default)(new Date(c+d)),h=(0,NX.default)(new Date(c+d+h));return new Date(c+d+h)}return new Date(NaN)}(e,n),r=IX(t,i,!0),o=new Date(i.getTime()-r),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}(new Date,t.timeZone));let a,o=r.getHours(),s=r.getMinutes();"12ampm"===t.format12h24h&&(a=o>=12?"PM":"AM");let c,d,l=o;switch("24"!==t.format12h24h&&(l=o%12,0===l&&(l=12)),n){case"HH:mm:ss":c=[l,s,i];break;case"HH:mm":c=[l,s];break;case"HH":c=[l],a=void 0;break;case"mm":c=[s],a=void 0;break;case"ss":c=[i],a=void 0;break;case"year":d=r.getFullYear();break;case"month":d=r.getMonth()+1;break;case"dayOfYear":d=Math.floor((r.getTime()-new Date(r.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":d=r.getDate();break;case"secondOfDay":d=60*o*60+60*s+i;break;default:console.error("Unknown time format",n),d=0}return void 0!==c?{textValue:c,suffix:a}:d}function J4e(e){return{type:e.type}}function Fd(e,t){let{alpha:n,mode:i,isMask:r}=e,o="string"==typeof n?(Number(t.getVariable(n))??100)/100:n;return{...J4e(e),alpha:o,mode:i,isMask:r}}var p2=class extends Da{},hNe={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},uNe={depth:["colors"]};function pNe(e,t,n){if("isMask"===t)return!0;let i=hNe[e.type],r=uNe[e.type];if(void 0!==r){let o=e.color;if(r.includes(t)){let s=o[t]?.value?.length;if(void 0!==s&&s!==n.length)return!0}}return void 0!==i&&i.includes(t)}function VX(e,t,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let o=e;if("image"in o){let a=t.image(o.image),l=i;l.image instanceof Of||l.image.deref(),l.image=a}if("video"in o){let a=t.video(o.video),l=i;l.image instanceof Of||l.image.deref(),l.image=a}if("wrapping"in o&&(i.wrap=o.wrapping),"minFilter"in o&&(i.minFilter=o.minFilter),"magFilter"in o&&(i.magFilter=o.magFilter),"rotation"in o&&n.uniforms[`f${n.id}_rotation`])return n.uniforms[`f${n.id}_rotation`].value=(o.rotation??0)*En.DEG2RAD,!1;if("repeat"in o||"offset"in o||"rotation"in o){let a=n.uniforms[`f${n.id}_mat`];"repeat"in o&&(a.repeat=o.repeat),"offset"in o&&(a.offset=o.offset),"rotation"in o&&(a.rotation=o.rotation??0),a.updateMatrix()}return!1}var xg=(e,t,n)=>Math.max(0,Math.min(1,Number(t.getVariable("number"==typeof e?100*e:e,n)??100)/100))??1,z_=class{constructor(e,t,n,i,r){this.id=e,this.uuid=t,this.data=n,this.uniforms={};for(let o in i)this.uniforms[`f${this.id}_${o}`]=i[o];for(let o in n)GX(o,this,n,r)}get type(){return this.data.type}static create(e,t,n,i){if("light"===n.type)return zh.createLigherLayer(e,t,n,i);if("texture"===n.type||"video"===n.type){let r="texture"===n.type?i.uiBuffer(n.texture.image)??i.image(n.texture.image):i.video(n.texture.video),o=new Lk(r,n.texture.wrapping,n.texture.minFilter??1008,n.texture.magFilter??1006),s=new g4e(r),a=new v4e(n.texture.repeat,n.texture.offset,n.texture.rotation??0),l=new kn(n.crop?1:0),c=new oo(n.projection??0),d=new oo(["x","y","z"].indexOf(n.axis)??0),h=new oo(n.side??0),p=new Ea(n.size?new Ue(n.size[0],n.size[1]):new Ue(100,100)),g=new kn(n.blending??0),v=new kn(xg(n.alpha,i)),y=new oo(n.mode??0),b=new bl(n.isMask??!1),P=new zk(o,s,l,c,d,h,p,g,a,v,y,b),S=new wo(P.calpha,"f");return new ts(e,t,n,{texture:o,textureSize:s,crop:l,projection:c,axis:d,side:h,size:p,blending:g,mat:a,alpha:v,mode:y,isMask:b},P,y,S,b,i)}if("matcap"===n.type){let r=i.image(n.texture.image),o=new Lk(r,n.texture.wrapping,n.texture.minFilter??1008,n.texture.magFilter??1006),s=new kn(xg(n.alpha,i)),a=new oo(n.mode??0),l=new bl(n.isMask??!1),c=new kn((n.texture.rotation??0)*En.DEG2RAD),d=new mX(o,s,a,l,c),h=new wo(d.calpha,"f");return new ts(e,t,n,{texture:o,alpha:s,mode:a,isMask:l,rotation:c},d,a,h,l,i)}if("displace"===n.type){if("noise"===n.displacementType){let r=new Yc(new te(...n.offset)),o=new kn(n.scale??10),s=new kn(n.intensity??8),a=new kn(n.movement??1),l=new oo(n.noiseType??0),c=new oo(n.voronoiStyle??0),d=new kn(n.smoothness??.5),h=new kn(n.seed??0),p=new kn(n.highCut??1),g=new kn(n.lowCut??0),v=new oo(n.quality??1),y=new OX(s,a,r,c,d,h,p,g,v,o,l);return new HX(e,t,n,{offset:r,scale:o,intensity:s,movement:a,noiseType:l,voronoiStyle:c,smoothness:d,seed:h,highCut:p,lowCut:g,quality:v},y,i)}throw new Error}return function vNe(e,t,n,i){let r=function Z4e(e,t){switch(e.type){case"fresnel":return function tNe(e,t){let{bias:n,scale:i,intensity:r,factor:o,color:s}=e;return{...Fd(e,t),color:xl(s,t),bias:n,scale:i,intensity:r,factor:o}}(e,t);case"gradient":return function nNe(e,t){let{gradientType:n,smooth:i,colors:r,steps:o,angle:s,offset:a,morph:l}=e;return{...Fd(e,t),gradientType:n,smooth:i,colors:r.map(c=>new bi(c[0],c[1],c[2],c[3])),num:r.length,steps:o,offset:new Ue(...a),morph:new Ue(...l),angle:s}}(e,t);case"depth":return function iNe(e,t){let{gradientType:n,near:i,far:r,isVector:o,isWorldSpace:s,origin:a,direction:l,colors:c,steps:d,smooth:h}=e;return{...Fd(e,t),gradientType:n,near:i,far:r,isVector:o,isWorldSpace:s,origin:new te(...a),direction:l?new te(...l):new te(1,0,0),colors:c.map(p=>void 0!==p?new bi(p[0],p[1],p[2],p[3]):new bi(0,0,0,0)),steps:d.slice(0,c.length),smooth:h}}(e,t);case"normal":return function rNe(e,t){let{cnormal:n}=e;return{...Fd(e,t),cnormal:new te(n[0],n[1],n[2])}}(e,t);case"noise":return function oNe(e,t){return{...Fd(e,t),scale:e.scale,move:e.move,fA:new Ue(...e.fA),fB:new Ue(...e.fB),size:new te(...e.size),distortion:new Ue(...e.distortion),colorA:xl(e.colorA,t),colorB:xl(e.colorB,t),colorC:xl(e.colorC,t),colorD:xl(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}(e,t);case"rainbow":return function sNe(e,t){return{...Fd(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new te(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new te(...e.offset)}}(e,t);case"toon":return function aNe(e,t){return{...Fd(e,t),positioning:e.positioning,colors:e.colors.map(n=>new bi(n[0],n[1],n[2],n[3])),num:e.colors.length,steps:e.steps,source:new te(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:xl(e.shadowColor,t),offset:new te(...e.offset)}}(e,t);case"outline":return function lNe(e,t){return{...Fd(e,t),outlineColor:xl(e.outlineColor,t),contourColor:xl(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new te(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}(e,t);case"transmission":return function cNe(e,t){return{...Fd(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}(e,t);case"color":return function eNe(e,t){return{...Fd(e,t),color:xl(e.color,t)}}(e,t);case"pattern":return function dNe(e,t){return{...Fd(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new Ue(...e.offset),colorA:xl(e.colorA,t),colorB:xl(e.colorB,t),frequency:new Ue(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new Ue(...e.vertical),horizontal:new Ue(...e.horizontal),sides:e.sides}}(e,t)}}(n,i);return function gNe(e,t,n,i,r){switch(e.type){case"color":{let o=new es(i.color??gc),s=Xc(i),a=new Bk(o,s.alpha),l=new wo(a.calpha,"f");return new ts(t,n,e,{color:o,...s},a,s.mode,l,s.isMask,r)}case"fresnel":{let o=new es(i.color??16777215),s=new kn(i.bias??.1),a=new kn(i.scale??1),l=new kn(i.intensity??2),c=new kn(i.factor??1),d=Xc(i),h=new y4e(o,s,a,l,c,d.alpha,d.mode,d.isMask),p=new wo(h.calpha,"f");return new ts(t,n,e,{color:o,bias:s,scale:a,intensity:l,factor:c,...d},h,d.mode,p,d.isMask,r)}case"rainbow":{let o=new kn(i.filmThickness??30),s=new kn(i.movement??0),a=new Yc(i.wavelengths??new te(0,0,0)),l=new kn(i.noiseStrength??0),c=new kn(i.noiseScale??1),d=new Yc(i.offset??new te(0,0,0)),h=Xc(i),p=new xX(o,s,a,l,c,d,h.alpha,h.isMask),g=new wo(p.calpha,"f");return new ts(t,n,e,{filmThickness:o,movement:s,wavelengths:a,noiseStrength:l,noiseScale:c,offset:d,...h},p,h.mode,g,h.isMask,r)}case"transmission":{let o=new kn(i.thickness??10),s=new kn(i.ior??1.5),a=new kn(i.roughness??.5),l=ai.transmissionSize,c=ai.transmissionRenderTarget,d=ai.transmissionRenderTargetDepth,h=window.innerWidth,p=window.innerHeight,g=h>=p?new Ea(p/h,1):new Ea(1,h/p),v=Xc(i),y=new PX(o,s,a,l,c,d,g,v.alpha),b=new wo(y.calpha,"f");return new ts(t,n,e,{thickness:o,ior:s,roughness:a,aspectRatio:g,...v},y,v.mode,b,v.isMask,r)}case"toon":{let s,a,o=new oo(i.positioning??0);i.colors?s=new _g(i.colors.length,i.colors):(s=new _g(10,new bi(0,0,0,1)),s.value[1]=new bi(1,1,1,1)),i.steps?a=new bg(i.steps.length,i.steps):(a=new bg(10,1),a.value[0]=0);let l=new Yc(i.source??new te(0,0,0)),c=new bl(i.isWorldSpace??!0),d=new kn(i.noiseStrength??0),h=new kn(i.noiseScale??1),p=new Ju(i.shadowColor),g=new Yc(i.offset??new te(0,0,0)),v=Xc(i),y=new wX(o,s,a,l,c,d,h,p,g,v.alpha),b=new wo(y.calpha,"f");return new ts(t,n,e,{positioning:o,colors:s,steps:a,source:l,isWorldSpace:c,noiseStrength:d,noiseScale:h,shadowColor:p,offset:g,...v},y,v.mode,b,v.isMask,r)}case"outline":{let o=new es(i.outlineColor??16777215),s=new es(i.contourColor??16777215),a=new kn(i.outlineWidth??.1),l=new kn(i.contourWidth??.1),c=new kn(i.outlineThreshold??.1),d=new kn(i.contourThreshold??.1),h=new kn(i.outlineSmoothing??.1),p=new kn(i.contourFrequency??.1),g=new Yc(i.contourDirection??new te(0,1,0)),v=new bl(i.positionalLines??!1),y=new bl(i.compensation??!0),b=ai.normalRenderTarget,P=ai.normalRenderTargetDepth,S=ai.pixelRatioNode,O=ai.resolution,A=Xc(i),H=new yX(o,s,a,l,c,d,h,p,g,v,y,O,b,P,S,A.alpha),U=new wo(H.calpha,"f");return new ts(t,n,e,{outlineColor:o,contourColor:s,outlineWidth:a,contourWidth:l,outlineThreshold:c,contourThreshold:d,outlineSmoothing:h,contourFrequency:p,contourDirection:g,positionalLines:v,compensation:y,...A},H,A.mode,U,A.isMask,r)}case"depth":{let g,v,o=new oo(i.gradientType??0),s=new bl(i.smooth??!1),a=new kn(i.near??50),l=new kn(i.far??200),c=new kn(i.isVector??1),d=new kn(i.isWorldSpace??0),h=new Yc(i.origin??new te),p=new Yc(i.direction??new te);i.colors?g=new _g(i.colors.length,i.colors):(g=new _g(2,new bi(0,0,0,1)),g.value[1]=new bi(1,1,1,1)),i.steps?v=new bg(i.steps.length,i.steps):(v=new bg(2,1),v.value[0]=0);let y=Xc(i),b=new hX(o,s,a,l,c,d,h,p,g,v,y.alpha,y.isMask),P=new wo(b.calpha,"f");return new ts(t,n,e,{gradientType:o,smooth:s,near:a,far:l,isVector:c,isWorldSpace:d,origin:h,direction:p,colors:g,steps:v,...y},b,y.mode,P,y.isMask,r)}case"noise":{let o=new kn(i.scale??1),s=new Yc(i.size??new te(100,100,100)),a=new kn(i.move??1),l=new Ea(i.fA??new Ue(1.7,9.2)),c=new Ea(i.fB??new Ue(8.3,2.8)),d=new Ea(i.distortion??new Ue(1,1)),h=new Ju(i.colorA),p=new Ju(i.colorB),g=new Ju(i.colorC),v=new Ju(i.colorD),y=new oo(i.noiseType??0),b=new oo(i.voronoiStyle??0),P=new kn(i.highCut??1),S=new kn(i.lowCut??0),O=new kn(i.smoothness??.5),A=new kn(i.seed??.5),H=new oo(i.quality??1),U=Xc(i),X=new gX(o,s,a,l,c,d,h,p,g,v,U.alpha,y,U.isMask,b,P,S,O,A,H),Y=new wo(X.calpha,"f");return new ts(t,n,e,{scale:o,size:s,move:a,fA:l,fB:c,distortion:d,colorA:h,colorB:p,colorC:g,colorD:v,noiseType:y,...U,voronoiStyle:b,highCut:P,lowCut:S,smoothness:O,seed:A,quality:H},X,U.mode,Y,U.isMask,r)}case"normal":{let o=new Yc(i.cnormal??new te(1,1,1)),s=Xc(i),a=new dX(o,s.alpha),l=new wo(a.calpha,"f");return new ts(t,n,e,{cnormal:o,...s},a,s.mode,l,s.isMask,r)}case"gradient":{let a,l,o=new oo(i.gradientType??0),s=new bl(i.smooth??!1);i.colors?a=new _g(i.colors.length,i.colors):(a=new _g(10,new bi(0,0,0,1)),a.value[1]=new bi(1,1,1,1)),i.steps?l=new bg(i.steps.length,i.steps):(l=new bg(10,1),l.value[0]=0);let c=new Ea(i.offset??new Ue(0,0)),d=new Ea(i.morph??new Ue(0,0)),h=new kn(i.angle??0),p=Xc(i),g=new pX(o,s,a,l,c,d,h,p.alpha,p.isMask),v=new wo(g.calpha,"f");return new ts(t,n,e,{gradientType:o,smooth:s,colors:a,steps:l,offset:c,morph:d,angle:h,...p},g,p.mode,v,p.isMask,r)}case"pattern":{let o=new oo(i.style??0),s=new oo(i.projection??0),a=new oo(["x","y","z"].indexOf(i.axis)??0),l=new kn(i.blending??0),c=new Ea(i.offset??new Ue(0,0)),d=new Ju(i.colorA),h=new Ju(i.colorB),p=new Ea(i.frequency??new Ue(10,10)),g=new kn(i.size??.5),v=new kn(i.variation??0),y=new kn(i.smoothness??.5),b=new kn(i.zigzag??0),P=new kn(i.rotation??0),S=new Ea(i.vertical??new Ue(0,1)),O=new Ea(i.horizontal??new Ue(0,1)),A=new oo(i.sides??6),H=Xc(i),U=new bX(o,s,a,l,c,d,h,p,g,v,y,b,P,S,O,A,H.alpha,H.isMask),X=new wo(U.calpha,"f");return new ts(t,n,e,{style:o,projection:s,axis:a,blending:l,offset:c,colorA:d,colorB:h,frequency:p,size:g,variation:v,smoothness:y,zigzag:b,rotation:P,vertical:S,horizontal:O,sides:A,...H},U,H.mode,X,H.isMask,r)}default:{let o=new es(1,0,0,1),s=Xc(i),a=new Bk(o,s.alpha),l=new wo(a.calpha,"f");return new ts(t,n,e,{color:o,...s},a,s.mode,l,s.isMask,r)}}}(n,e,t,r,i)}(e,t,n,i)}updateByOp(e,t,n){let i=e;if(void 0===i.path[0]){if(0===i.type)return"type"in i.props||"category"in i.props||"visible"in i.props?(n.scene.markNeedsUpdateRendererDirty(),!0):function fNe(e,t,n,i){let r=!1;for(let[o,s]of Object.entries(e)){if("bumpMap"===o||"roughnessMap"===o){r=!0;continue}if(!o||void 0===s)continue;if(GX(o,n,i,t)){"visible"===o&&"light"===n.type&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${o}`];if(a&&!(a instanceof Fk))switch(r=r||pNe(n,o,s),a.constructor){case es:if("string"==typeof s){let l=t.getColor(s);l&&(a.value=l);break}{let l=s;a.value instanceof p2?a.value=new Da(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case Ju:if("string"==typeof s){let l=t.getColor(s);l&&(a.value=l);break}{let l=s;a.value instanceof p2?a.value=new Da(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case Ea:{let l=s;a.value.setX(l[0]),a.value.setY(l[1]);break}case Yc:{let l=s;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case ep:VX(s,t,n);break;case _g:a.value=s.map(l=>new bi(...l));break;default:a.value=s}}return r}(i.props,n.shared,this,t)}else if("texture"===i.path[0])return!("texture"in t)&&!("video"in t)||VX(i.props,n.shared,this);return!1}dispose(){if(function mNe(e){let t=e instanceof z_?e.type:e;return"texture"===t||"video"===t||"displace_map"===t||"matcap"===t}(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Of||t.image.deref()}}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let n=`f${this.id}_${e}`;this.hasValueByKey(n)&&void 0!==t&&(this.uniforms[n].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let n=this.getName(t);n&&e.push(n)}return e}},ts=class extends z_{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,l),this.params=i,this.color=r,this.mode=o,this.alpha=s,this.isMask=a}},HX=class extends z_{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this.position=r}},zh=class extends z_{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.node=i}static createLigherLayer(e,t,n,i){let r,c,o=new kn(xg(n.alpha,i)),s=new oo(n.mode),a=new kn(n.bumpMapIntensity),l=new kn(xg(n.alphaOverride,i));if(n.visible)if("lambert"===n.category){r=new x4e;let d=new es(i.color(n.emissive)??0),h=new bl(n.occlusion??!0);c={emissive:d,occlusion:h},r.emissive=d,r.occlusion=h}else if("toon"===n.category){r=new M4e;let d=new kn(n.shininess??30),h=new es(i.color(n.specular)??1118481);c={shininess:d,specular:h},r.shininess=d,r.specular=h}else if("physical"===n.category){r=new w4e;let d=new kn(n.roughness??.3),h=new kn(n.metalness??0),p=new kn(n.reflectivity??.5),g=new bl(n.occlusion??!0);c={roughness:d,metalness:h,reflectivity:p,occlusion:g},r.roughness=d,r.metalness=h,r.reflectivity=p,r.occlusion=g}else{r=new C4e;let d=new kn(n.shininess??30),h=new es(void 0!==n.specular?i.color(n.specular)??1118481:1118481),p=new bl(n.occlusion??!0);c={shininess:d,specular:h,occlusion:p},r.shininess=d,r.specular=h,r.occlusion=p}else r=new Vk,c={};return r.alpha=new kn(1),r.shadingAlpha=o,r.shadingBlend=s,r.bumpMapIntensity=a,r.alphaOverride=l,c.alpha=r.shadingAlpha,c.mode=r.shadingBlend,c.bumpMapIntensity=r.bumpMapIntensity,c.alphaOverride=r.alphaOverride,new zh(e,t,n,r,c,i)}get category(){return this.node.category}};function Xc(e){return{alpha:new kn(e.alpha??1),mode:new oo(e.mode??0),isMask:new bl(e.isMask??!1)}}function GX(e,t,n,i){if("displace"===n.type&&("intensity"===e||"visible"===e)){let r=t.uniforms[`f${t.id}_intensity`];return r?(r.value=n.intensity*(n.visible?1:0),r):void 0}if("displace"!==n.type&&("alpha"===e||"visible"===e)){let r=t.uniforms[`f${t.id}_alpha`];if(!r)return;if(r.value=xg(n.alpha,i)*(n.visible?1:0),"outline"===n.type&&"visible"===e){let o=t.uniforms[`f${t.id}_compensation`];o&&(o.value=n.compensation&&n.visible)}return r}}function f1(e,t){let n=0,i=e.layers.find(r=>"light"===r.data.type);if(i){let r=i.data,o=Number(t.getVariable(r.alphaOverride));if(("string"==typeof r.alphaOverride?o/100:r.alphaOverride)<1)return!0}for(let r of e.layers){if("displace"!==r.data.type&&r.data.isMask)return!0;if("displace"!==r.data.type&&"alpha"in r.data&&"light"!==r.data.type&&"fresnel"!==r.data.type&&"texture"!==r.data.type&&"matcap"!==r.data.type&&"rainbow"!==r.data.type&&"outline"!==r.data.type&&"pattern"!==r.data.type){let o=r.data.visible?r.data.alpha:0;if("string"==typeof o&&(o=Math.max(0,Math.min(1,Number(t.getVariable(o)??100)/100))),1===o&&"depth"===r.data.type||"gradient"===r.data.type){for(let s of r.data.colors)if(s[3]<1){o=s[3];break}}else if(1===o&&"noise"===r.data.type){let s=t.color(r.data.colorA).a,a=t.color(r.data.colorB).a,l=t.color(r.data.colorC).a,c=t.color(r.data.colorD).a,d=Math.min(s,Math.min(a,Math.min(l,c)));d<1&&(o=d)}n+=(1-n)*o}}return n<1}var Ef=class extends wr{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},yNe=class extends Ef{constructor(e,t,n,i){super(),this.flatShading=e,this.side=t,this.wireframe=n,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,n){return this.root.getFlavor(e,t,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,n){this.root.updateByOp(e,t,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},$k=class extends Ef{constructor(e,t,n=!0){super(),this.data=e,this.allowVariableSaves=n,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,qs.startContext(this),this.reset0(e,t),qs.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,n){let i=n?6:(e?3:0)+t;if(0===i)return this;void 0===this.flavors&&(this.flavors=[]),i-=1;let r=this.flavors[i];return void 0===r&&(r=new yNe(e,t,n,this),r.needsJitter=this.needsJitter,this.flavors[i]=r,r.flatShading=e,r.side=t,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){return this.lightLayer.getNode("occlusion")?.value??!1}reset(e,t,n=!1){qs.startContext(this),(this.data!==e||n)&&this.reset0(e,t),qs.endContext(this)}reset0(e,t){this.data=e;let n=e.layers??Sa.defaultTwoLayerData("phong").layers;try{this.layers=n.map(i=>z_.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=f1(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,n){if("alphaOverride"===e[0])this.transparent=f1(this.data,n.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if("layer"===e[0]){let i=e[1],r=e[2];if(i&&r){let o=this.layers.find(s=>s.uuid===i);o?.hasValue(r)&&("alpha"===r?(this.transparent=f1(this.data,n.shared),o.setValue(r,Math.max(0,Math.min(Number(t)/100,1)))):o.setValue(r,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(n=>"light"===n.data.type);t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(n=>{"alpha"in n.data&&"string"==typeof n.data.alpha&&e.shared.getVariable(n.data.alpha,["material",this.uuid,"layer",n.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof zh),void 0===this.lightLayer&&(this.lightLayer=new zh(0,"",{...la.defaultData("light","phong"),visible:!1},new Vk,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(r=>r instanceof zh);if(!e)return;let t=e.data,n=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let r=0;r<this.layers.length;++r){let o=this.layers[r];o instanceof ts&&o.color instanceof zk&&(o.uuid===n&&(e.node.bumpMap=o.color),o.uuid===i&&(e.node.roughnessMap=o.color))}}updateByOp(e,t,n){if(qs.startContext(this),void 0!==t?this.data=t:t=this.data,this.transparent=f1(t,n.shared),"layers"===e.path[0]){let i=n.shared,r=e.path[1];if(void 0===r)n.scene.markNeedsUpdateRendererDirty(),this.reset0(t,n);else{0===e.type&&void 0!==e.props.occlusion&&n.scene.markNeedsUpdateRendererDirty();let o=this.layers.find(s=>s.uuid===r);if(o){let a,s=t.layers.data(r);0===e.type&&("alpha"in e.props||"alphaOverride"in e.props)&&(a="alpha"in e.props?{...e.props,alpha:xg(e.props.alpha,i,["material",this.uuid,"layer",r,"alpha"])}:{...e.props,alphaOverride:xg(e.props.alphaOverride,i,["material",this.uuid,"alphaOverride"])}),o.updateByOp({...e,...a?{props:a}:{},path:e.path.slice(2)},s,n)&&this.reset0(t,n)}}}else this.reset0(t,n);qs.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof ts?t.color.mask=void 0:t instanceof zh&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof ts&&t.isMask.value&&t.data.visible&&e>0){let i=this.layers[e-1];i instanceof zh?i.node.mask=new jl(t.color,t.alpha,jl.MUL):i instanceof ts&&(i.isMask.value||(i.color.mask=new jl(t.color,t.alpha,jl.MUL)))}}}blendColors(){let e=this.layers.findIndex(n=>n instanceof ts),t=this.layers.findIndex(n=>n instanceof zh);if(-1!==e&&e<t){let n=this.layers[e].color;for(let i=e+1;i<t;++i){let r=this.layers[i];if(r instanceof ts){if(r.isMask.value)continue;n=new aX(n,r.color,r.alpha,r.mode)}}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let e=new wo("outgoingLight","f"),t=this.layers.findIndex(n=>n instanceof zh);if(this.layers.length>t+1){for(let n=t+1;n<this.layers.length;++n){let i=this.layers[n];if(i instanceof ts){if(i.isMask.value)continue;e=new aX(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof HX);if(e.length>0){let t=e[0].position;for(let n=1;n<e.length;++n)e[n]&&(t=new jl(t,e[n].position,jl.ADD),t=new jl(t,new kn(.5).setReadonly(!0),jl.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}clampUniformsForPreview(e,t){let n=(i,r,o)=>Math.min(Math.max(i,r),o);for(let i of this.layers)if("displace"===i.type){let r=n(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=r}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new rX;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof ts){let t=e.params.texture;if(t instanceof Lk&&!t.image.loaded)return!1}return!0}};Object.defineProperties(Ef.prototype,{properties:{get:function(){return this.fragment.properties}}});var Qk=class extends $k{constructor(e,t,n){super(e,t,!1),this.uuid=n,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},WX=new Map;function bNe(e){if("string"==typeof e)return e;let t=WX.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},WX.set(e,t)),t.url}var qX,f2,XX,_Ne=new Promise(e=>{qX=e}),YX=!1;function xNe(){if(!YX)return f2||(f2=function e(){return t.apply(this,arguments)}(),f2);function t(){return(t=(0,Qn.Z)(function*(){yield m.e(725).then(m.bind(m,7725)),qX(void 0!==window?window:global),YX=!0})).apply(this,arguments)}}function CNe(e){let t=!1;return e.scene.objects.traverse((n,i)=>{if(void 0===i.events||!1===Array.isArray(i.events))return!0;let r=[];i.events.forEach(o=>{"dragDropActions"in o.data?(r.push(...o.data.dragDropActions.drag),r.push(...o.data.dragDropActions.drop)):"inActions"in o.data?(r.push(...o.data.inActions),r.push(...o.data.outActions)):"gameActions"in o.data?(r.push(...o.data.gameActions.idle),r.push(...o.data.gameActions.move),r.push(...o.data.gameActions.jump),r.push(...o.data.gameActions.run)):"breakpoints"in o.data?o.data.breakpoints.forEach(s=>{r.push(...s.data.actions)}):"actions"in o.data&&r.push(...o.data.actions),t=t||r.some(s=>"Audio"===s.data.type)})}),t}_Ne.then(e=>XX=e);var QX,m2,U_=class{constructor({src:e,volume:t,delay:n,loop:i}){let r;this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)},r="string"==typeof e?{src:e}:{src:bNe(e),format:"wav"},this.sound=new XX.Howl(r),this.sound.on("end",this.onEnd),this.src=e,void 0!==t&&(this.volume=t),void 0!==n&&(this.delay=n),void 0!==i&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,n){this.sound.on(e,t,n)}off(e,t,n){this.sound.off(e,t,n)}play(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}pause(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},$X=!1,KX=new Promise(e=>{QX=e}),ZX=!1;function MNe(){if($X=!0,!ZX)return m2||(m2=function e(){return t.apply(this,arguments)}(),m2);function t(){return(t=(0,Qn.Z)(function*(){let n=yield m.e(990).then(m.bind(m,2990));QX(n),ZX=!0})).apply(this,arguments)}}function SNe(e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,Qn.Z)(function*(e){return yield(yield fetch(e)).arrayBuffer()}),Kk.apply(this,arguments)}var ONe=new class{load(e,t,n=(()=>{})){return(0,Qn.Z)(function*(){let{load:i}=yield KX;i(e,(r,o)=>{r||!o?n(r??"Something went wrong"):t(o)})})()}parse(e){return(0,Qn.Z)(function*(){let{parse:t,Bidi:n}=yield KX;try{let i=t(e),r=new n;return r.registerModifier("glyphIndex",null,s=>i.charToGlyphIndex(s.char)),r.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:r}}catch(i){console.error(i)}})()}};function JX(e){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,Qn.Z)(function*(e){let t,n,i=!1;if(e.url?(t=yield SNe(e.url),n=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){if(!$X)return{font:void 0,url:n,intercepted:i,arr:t,bidi:null};{let r=yield ONe.parse(t);if(r)return{font:r.font,url:n,intercepted:i,arr:t,bidi:r.bidi}}}}),Zk.apply(this,arguments)}function ENe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var e$=class extends class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,n){let i=this.objects.get(e);return void 0===i?(i=this.createObject(e,t,n),this.objects.set(e,i)):i.isShared=!0,i}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let n=this.objects.get(e);if(n&&!0!==n.isShared)return this.objects.delete(e),this.objects.set(t,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){t===this.objects.get(e)&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}}{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,n){let i=N_(e,t,this.flatShading,n);return i.computeBoundingSphere(),i}},INe={markNeedsUpdateRendererDirty:()=>{}},FNe=globalThis.atob,LNe=globalThis.btoa,m1=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(2*e.length),n=new DataView(t),i=0;for(let r=0;r<e.length;r++,i+=2){let o=Math.max(-1,Math.min(1,e[r]));n.setInt16(i,o<0?32768*o:32767*o,!0)}return t}static base64ToArrayBuffer(e){let t=FNe(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}static arrayBufferToBase64(e){e instanceof Float32Array?e=this.floatTo16BitPCM(e):e instanceof Int16Array&&(e=e.buffer);let t="",n=new Uint8Array(e);for(let r=0;r<n.length;r+=32768){let o=n.subarray(r,r+32768);t+=String.fromCharCode.apply(null,o)}return LNe(t)}static mergeInt16Arrays(e,t){if(e instanceof ArrayBuffer&&(e=new Int16Array(e)),t instanceof ArrayBuffer&&(t=new Int16Array(t)),!(e instanceof Int16Array&&t instanceof Int16Array))throw new Error("Both items must be Int16Array");let n=new Int16Array(e.length+t.length);for(let i=0;i<e.length;i++)n[i]=e[i];for(let i=0;i<t.length;i++)n[e.length+i]=t[i];return n}static generateId(e,t=21){let n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return`${e}${Array(t-e.length).fill(0).map(r=>n[Math.floor(Math.random()*n.length)]).join("")}`}},BNe=e=>new Promise(t=>setTimeout(()=>t(),e)),i$=class{constructor(){this.eventHandlers={},this.nextEventHandlers={}}clearEventHandlers(){return this.eventHandlers={},this.nextEventHandlers={},!0}on(e,t){return this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t),t}onNext(e,t){return this.nextEventHandlers[e]=this.nextEventHandlers[e]||[],this.nextEventHandlers[e].push(t),t}off(e,t){let n=this.eventHandlers[e]||[];if(t){let i=n.indexOf(t);if(-1===i)throw new Error(`Could not turn off specified event listener for "${e}": not found as a listener`);n.splice(i,1)}else delete this.eventHandlers[e];return!0}offNext(e,t){let n=this.nextEventHandlers[e]||[];if(t){let i=n.indexOf(t);if(-1===i)throw new Error(`Could not turn off specified next event listener for "${e}": not found as a listener`);n.splice(i,1)}else delete this.nextEventHandlers[e];return!0}waitForNext(e,t=null){var n=this;return(0,Qn.Z)(function*(){let r,i=Date.now();for(n.onNext(e,o=>r=o);!r;){if(t&&Date.now()-i>t)return null;yield BNe(1)}return r})()}dispatch(e,t){let n=[].concat(this.eventHandlers[e]||[]);for(let r of n)r(t);let i=[].concat(this.nextEventHandlers[e]||[]);for(let r of i)r(t);return delete this.nextEventHandlers[e],!0}},zNe=class extends i${constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:i}={}){if(super(),this.defaultUrl="wss://api.openai.com/v1/realtime",this.url=e||this.defaultUrl,this.apiKey=t||null,this.debug=!!i,this.ws=null,globalThis.document&&this.apiKey&&!n)throw new Error('Can not provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}isConnected(){return!!this.ws}log(...e){let t=[`[Websocket/${(new Date).toISOString()}]`].concat(e).map(n=>"object"==typeof n&&null!==n?JSON.stringify(n,null,2):n);return this.debug&&console.log(...t),!0}connect({model:e}={model:"gpt-4o-realtime-preview-2024-10-01"}){var t=this;return(0,Qn.Z)(function*(){if(!t.apiKey&&t.url===t.defaultUrl&&console.warn(`No apiKey provided for connection to "${t.url}"`),t.isConnected())throw new Error("Already connected");if(globalThis.document){t.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");let i=new(0,globalThis.WebSocket)(`${t.url}${e?`?model=${e}`:""}`,["realtime",`openai-insecure-api-key.${t.apiKey}`,"openai-beta.realtime-v1"]);return i.addEventListener("message",r=>{let o=JSON.parse(r.data);t.receive(o.type,o)}),new Promise((r,o)=>{let s=()=>{t.disconnect(i),o(new Error(`Could not connect to "${t.url}"`))};i.addEventListener("error",s),i.addEventListener("open",()=>{t.log(`Connected to "${t.url}"`),i.removeEventListener("error",s),i.addEventListener("error",()=>{t.disconnect(i),t.log(`Error, disconnected from "${t.url}"`),t.dispatch("close",{error:!0})}),i.addEventListener("close",()=>{t.disconnect(i),t.log(`Disconnected from "${t.url}"`),t.dispatch("close",{error:!1})}),t.ws=i,r(!0)})})}})()}disconnect(e){if(!e||this.ws===e)return this.ws&&this.ws.close(),this.ws=null,!0}receive(e,t){return this.log("received:",e,t),this.dispatch(`server.${e}`,t),this.dispatch("server.*",t),!0}send(e,t){if(!this.isConnected())throw new Error("RealtimeAPI is not connected");if("object"!=typeof(t=t||{}))throw new Error("data must be an object");let n={event_id:m1.generateId("evt_"),type:e,...t};return this.dispatch(`client.${e}`,n),this.dispatch("client.*",n),this.log("sent:",e,n),this.ws.send(JSON.stringify(n)),!0}},r$=class extends i${constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:i}={}){super(),this.defaultSessionConfig={modalities:["text","audio"],instructions:"",voice:"alloy",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:null,turn_detection:null,tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096},this.sessionConfig={},this.transcriptionModels=[{model:"whisper-1"}],this.defaultServerVadConfig={type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:200},this.realtime=new zNe({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:i}),this.conversation=new class{constructor(){Lm(this,"defaultFrequency",24e3),Lm(this,"EventProcessors",{"conversation.item.created":e=>{let{item:t}=e,n=JSON.parse(JSON.stringify(t));if(this.itemLookup[n.id]||(this.itemLookup[n.id]=n,this.items.push(n)),n.formatted={},n.formatted.audio=new Int16Array(0),n.formatted.text="",n.formatted.transcript="",this.queuedSpeechItems[n.id]&&(n.formatted.audio=this.queuedSpeechItems[n.id].audio,delete this.queuedSpeechItems[n.id]),n.content){let i=n.content.filter(r=>["text","input_text"].includes(r.type));for(let r of i)n.formatted.text+=r.text}return this.queuedTranscriptItems[n.id]&&(n.formatted.transcript=this.queuedTranscriptItems.transcript,delete this.queuedTranscriptItems[n.id]),"message"===n.type?"user"===n.role?(n.status="completed",this.queuedInputAudio&&(n.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=null)):n.status="in_progress":"function_call"===n.type?(n.formatted.tool={type:"function",name:n.name,call_id:n.call_id,arguments:""},n.status="in_progress"):"function_call_output"===n.type&&(n.status="completed",n.formatted.output=n.output),{item:n,delta:null}},"conversation.item.truncated":e=>{let{item_id:t,audio_end_ms:n}=e,i=this.itemLookup[t];if(!i)throw new Error(`item.truncated: Item "${t}" not found`);let r=Math.floor(n*this.defaultFrequency/1e3);return i.formatted.transcript="",i.formatted.audio=i.formatted.audio.slice(0,r),{item:i,delta:null}},"conversation.item.deleted":e=>{let{item_id:t}=e,n=this.itemLookup[t];if(!n)throw new Error(`item.deleted: Item "${t}" not found`);delete this.itemLookup[n.id];let i=this.items.indexOf(n);return i>-1&&this.items.splice(i,1),{item:n,delta:null}},"conversation.item.input_audio_transcription.completed":e=>{let{item_id:t,content_index:n,transcript:i}=e,r=this.itemLookup[t],o=i||" ";return r?(r.content[n].transcript=i,r.formatted.transcript=o,{item:r,delta:{transcript:i}}):(this.queuedTranscriptItems[t]={transcript:o},{item:null,delta:null})},"input_audio_buffer.speech_started":e=>{let{item_id:t,audio_start_ms:n}=e;return this.queuedSpeechItems[t]={audio_start_ms:n},{item:null,delta:null}},"input_audio_buffer.speech_stopped":(e,t)=>{let{item_id:n,audio_end_ms:i}=e;this.queuedSpeechItems[n]||(this.queuedSpeechItems[n]={audio_start_ms:i});let r=this.queuedSpeechItems[n];if(r.audio_end_ms=i,t){let o=Math.floor(r.audio_start_ms*this.defaultFrequency/1e3),s=Math.floor(r.audio_end_ms*this.defaultFrequency/1e3);r.audio=t.slice(o,s)}return{item:null,delta:null}},"response.created":e=>{let{response:t}=e;return this.responseLookup[t.id]||(this.responseLookup[t.id]=t,this.responses.push(t)),{item:null,delta:null}},"response.output_item.added":e=>{let{response_id:t,item:n}=e,i=this.responseLookup[t];if(!i)throw new Error(`response.output_item.added: Response "${t}" not found`);return i.output.push(n.id),{item:null,delta:null}},"response.output_item.done":e=>{let{item:t}=e;if(!t)throw new Error('response.output_item.done: Missing "item"');let n=this.itemLookup[t.id];if(!n)throw new Error(`response.output_item.done: Item "${t.id}" not found`);return n.status=t.status,{item:n,delta:null}},"response.content_part.added":e=>{let{item_id:t,part:n}=e,i=this.itemLookup[t];if(!i)throw new Error(`response.content_part.added: Item "${t}" not found`);return i.content.push(n),{item:i,delta:null}},"response.audio_transcript.delta":e=>{let{item_id:t,content_index:n,delta:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.audio_transcript.delta: Item "${t}" not found`);return r.content[n].transcript+=i,r.formatted.transcript+=i,{item:r,delta:{transcript:i}}},"response.audio.delta":e=>{let{item_id:t,delta:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.audio.delta: Item "${t}" not found`);let o=m1.base64ToArrayBuffer(i),s=new Int16Array(o);return r.formatted.audio=m1.mergeInt16Arrays(r.formatted.audio,s),{item:r,delta:{audio:s}}},"response.text.delta":e=>{let{item_id:t,content_index:n,delta:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.text.delta: Item "${t}" not found`);return r.content[n].text+=i,r.formatted.text+=i,{item:r,delta:{text:i}}},"response.function_call_arguments.delta":e=>{let{item_id:t,delta:n}=e,i=this.itemLookup[t];if(!i)throw new Error(`response.function_call_arguments.delta: Item "${t}" not found`);return i.arguments+=n,i.formatted.tool.arguments+=n,{item:i,delta:{arguments:n}}}}),this.clear()}clear(){return this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=null,!0}queueInputAudio(e){return this.queuedInputAudio=e,e}processEvent(e,...t){if(!e.event_id)throw console.error(e),new Error('Missing "event_id" on event');if(!e.type)throw console.error(e),new Error('Missing "type" on event');let n=this.EventProcessors[e.type];if(!n)throw new Error(`Missing conversation event processor for "${e.type}"`);return n.call(this,e,...t)}getItem(e){return this.itemLookup[e]||null}getItems(){return this.items.slice()}},this._resetConfig(),this._addAPIEventHandlers()}_resetConfig(){return this.sessionCreated=!1,this.tools={},this.sessionConfig=JSON.parse(JSON.stringify(this.defaultSessionConfig)),this.inputAudioBuffer=new Int16Array(0),!0}_addAPIEventHandlers(){var e=this;this.realtime.on("client.*",r=>{let o={time:(new Date).toISOString(),source:"client",event:r};this.dispatch("realtime.event",o)}),this.realtime.on("server.*",r=>{let o={time:(new Date).toISOString(),source:"server",event:r};this.dispatch("realtime.event",o)}),this.realtime.on("server.session.created",()=>this.sessionCreated=!0);let t=(r,...o)=>{let{item:s,delta:a}=this.conversation.processEvent(r,...o);return{item:s,delta:a}},n=(r,...o)=>{let{item:s,delta:a}=t(r,...o);return s&&this.dispatch("conversation.updated",{item:s,delta:a}),{item:s,delta:a}},i=function(){var r=(0,Qn.Z)(function*(o){try{let s=JSON.parse(o.arguments),a=e.tools[o.name];if(!a)throw new Error(`Tool "${o.name}" has not been added`);let l=yield a.handler(s);e.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:o.call_id,output:JSON.stringify(l)}})}catch(s){e.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:o.call_id,output:JSON.stringify({error:s.message})}})}e.createResponse()});return function(s){return r.apply(this,arguments)}}();return this.realtime.on("server.response.created",t),this.realtime.on("server.response.output_item.added",t),this.realtime.on("server.response.content_part.added",t),this.realtime.on("server.input_audio_buffer.speech_started",r=>{t(r),this.dispatch("conversation.interrupted")}),this.realtime.on("server.input_audio_buffer.speech_stopped",r=>t(r,this.inputAudioBuffer)),this.realtime.on("server.conversation.item.created",r=>{let{item:o}=n(r);this.dispatch("conversation.item.appended",{item:o}),"completed"===o.status&&this.dispatch("conversation.item.completed",{item:o})}),this.realtime.on("server.conversation.item.truncated",n),this.realtime.on("server.conversation.item.deleted",n),this.realtime.on("server.conversation.item.input_audio_transcription.completed",n),this.realtime.on("server.response.audio_transcript.delta",n),this.realtime.on("server.response.audio.delta",n),this.realtime.on("server.response.text.delta",n),this.realtime.on("server.response.function_call_arguments.delta",n),this.realtime.on("server.response.output_item.done",function(){var r=(0,Qn.Z)(function*(o){let{item:s}=n(o);"completed"===s.status&&e.dispatch("conversation.item.completed",{item:s}),s.formatted.tool&&i(s.formatted.tool)});return function(o){return r.apply(this,arguments)}}()),!0}isConnected(){return this.realtime.isConnected()}reset(){return this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers(),!0}connect(){var e=this;return(0,Qn.Z)(function*(){if(e.isConnected())throw new Error("Already connected, use .disconnect() first");return yield e.realtime.connect(),e.updateSession(),!0})()}waitForSessionCreated(){var e=this;return(0,Qn.Z)(function*(){if(!e.isConnected())throw new Error("Not connected, use .connect() first");for(;!e.sessionCreated;)yield new Promise(t=>setTimeout(()=>t(),1));return!0})()}disconnect(){this.sessionCreated=!1,this.realtime.isConnected()&&this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){return this.sessionConfig.turn_detection?.type||null}addTool(e,t){if(!e?.name)throw new Error("Missing tool name in definition");let n=e?.name;if(this.tools[n])throw new Error(`Tool "${n}" already added. Please use .removeTool("${n}") before trying to add again.`);if("function"!=typeof t)throw new Error(`Tool "${n}" handler must be a function`);return this.tools[n]={definition:e,handler:t},this.updateSession(),this.tools[n]}removeTool(e){if(!this.tools[e])throw new Error(`Tool "${e}" does not exist, can not be removed.`);return delete this.tools[e],!0}deleteItem(e){return this.realtime.send("conversation.item.delete",{item_id:e}),!0}updateSession({modalities:e,instructions:t,voice:n,input_audio_format:i,output_audio_format:r,input_audio_transcription:o,turn_detection:s,tools:a,tool_choice:l,temperature:c,max_response_output_tokens:d}={}){void 0!==e&&(this.sessionConfig.modalities=e),void 0!==t&&(this.sessionConfig.instructions=t),void 0!==n&&(this.sessionConfig.voice=n),void 0!==i&&(this.sessionConfig.input_audio_format=i),void 0!==r&&(this.sessionConfig.output_audio_format=r),void 0!==o&&(this.sessionConfig.input_audio_transcription=o),void 0!==s&&(this.sessionConfig.turn_detection=s),void 0!==a&&(this.sessionConfig.tools=a),void 0!==l&&(this.sessionConfig.tool_choice=l),void 0!==c&&(this.sessionConfig.temperature=c),void 0!==d&&(this.sessionConfig.max_response_output_tokens=d);let h=[].concat((a||[]).map(g=>{let v={type:"function",...g};if(this.tools[v?.name])throw new Error(`Tool "${v?.name}" has already been defined`);return v}),Object.keys(this.tools).map(g=>({type:"function",...this.tools[g].definition}))),p={...this.sessionConfig};return p.tools=h,this.realtime.isConnected()&&this.realtime.send("session.update",{session:p}),!0}sendUserMessageContent(e=[]){if(e.length){for(let t of e)"input_audio"===t.type&&(t.audio instanceof ArrayBuffer||t.audio instanceof Int16Array)&&(t.audio=m1.arrayBufferToBase64(t.audio));this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:e}})}return this.createResponse(),!0}appendInputAudio(e){return e.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:m1.arrayBufferToBase64(e)}),this.inputAudioBuffer=m1.mergeInt16Arrays(this.inputAudioBuffer,e)),!0}createResponse(){return null===this.getTurnDetectionType()&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create"),!0}cancelResponse(e,t=0){if(!e)return this.realtime.send("response.cancel"),{item:null};if(e){let n=this.conversation.getItem(e);if(!n)throw new Error(`Could not find item "${e}"`);if("message"!==n.type)throw new Error('Can only cancelResponse messages with type "message"');if("assistant"!==n.role)throw new Error('Can only cancelResponse messages with role "assistant"');this.realtime.send("response.cancel");let i=n.content.findIndex(r=>"audio"===r.type);if(-1===i)throw new Error("Could not find audio on item to cancel");return this.realtime.send("conversation.item.truncate",{item_id:e,content_index:i,audio_end_ms:Math.floor(t/this.conversation.defaultFrequency*1e3)}),{item:n}}}waitForNextItem(){var e=this;return(0,Qn.Z)(function*(){let t=yield e.waitForNext("conversation.item.appended"),{item:n}=t;return{item:n}})()}waitForNextCompletedItem(){var e=this;return(0,Qn.Z)(function*(){let t=yield e.waitForNext("conversation.item.completed"),{item:n}=t;return{item:n}})()}},VNe=new Blob(["\nclass AudioProcessor extends AudioWorkletProcessor {\n\n  constructor() {\n    super();\n    this.port.onmessage = this.receive.bind(this);\n    this.initialize();\n  }\n\n  initialize() {\n    this.foundAudio = false;\n    this.recording = false;\n    this.chunks = [];\n  }\n\n  /**\n   * Concatenates sampled chunks into channels\n   * Format is chunk[Left[], Right[]]\n   */\n  readChannelData(chunks, channel = -1, maxChannels = 9) {\n    let channelLimit;\n    if (channel !== -1) {\n      if (chunks[0] && chunks[0].length - 1 < channel) {\n        throw new Error(\n          `Channel ${channel} out of range: max ${chunks[0].length}`\n        );\n      }\n      channelLimit = channel + 1;\n    } else {\n      channel = 0;\n      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);\n    }\n    const channels = [];\n    for (let n = channel; n < channelLimit; n++) {\n      const length = chunks.reduce((sum, chunk) => {\n        return sum + chunk[n].length;\n      }, 0);\n      const buffers = chunks.map((chunk) => chunk[n]);\n      const result = new Float32Array(length);\n      let offset = 0;\n      for (let i = 0; i < buffers.length; i++) {\n        result.set(buffers[i], offset);\n        offset += buffers[i].length;\n      }\n      channels[n] = result;\n    }\n    return channels;\n  }\n\n  /**\n   * Combines parallel audio data into correct format,\n   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]\n   */\n  formatAudioData(channels) {\n    if (channels.length === 1) {\n      // Simple case is only one channel\n      const float32Array = channels[0].slice();\n      const meanValues = channels[0].slice();\n      return { float32Array, meanValues };\n    } else {\n      const float32Array = new Float32Array(\n        channels[0].length * channels.length\n      );\n      const meanValues = new Float32Array(channels[0].length);\n      for (let i = 0; i < channels[0].length; i++) {\n        const offset = i * channels.length;\n        let meanValue = 0;\n        for (let n = 0; n < channels.length; n++) {\n          float32Array[offset + n] = channels[n][i];\n          meanValue += channels[n][i];\n        }\n        meanValues[i] = meanValue / channels.length;\n      }\n      return { float32Array, meanValues };\n    }\n  }\n\n  /**\n   * Converts 32-bit float data to 16-bit integers\n   */\n  floatTo16BitPCM(float32Array) {\n    const buffer = new ArrayBuffer(float32Array.length * 2);\n    const view = new DataView(buffer);\n    let offset = 0;\n    for (let i = 0; i < float32Array.length; i++, offset += 2) {\n      let s = Math.max(-1, Math.min(1, float32Array[i]));\n      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n    }\n    return buffer;\n  }\n\n  /**\n   * Retrieves the most recent amplitude values from the audio stream\n   * @param {number} channel\n   */\n  getValues(channel = -1) {\n    const channels = this.readChannelData(this.chunks, channel);\n    const { meanValues } = this.formatAudioData(channels);\n    return { meanValues, channels };\n  }\n\n  /**\n   * Exports chunks as an audio/wav file\n   */\n  export() {\n    const channels = this.readChannelData(this.chunks);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const audioData = this.floatTo16BitPCM(float32Array);\n    return {\n      meanValues: meanValues,\n      audio: {\n        bitsPerSample: 16,\n        channels: channels,\n        data: audioData,\n      },\n    };\n  }\n\n  receive(e) {\n    const { event, id } = e.data;\n    let receiptData = {};\n    switch (event) {\n      case 'start':\n        this.recording = true;\n        break;\n      case 'stop':\n        this.recording = false;\n        break;\n      case 'clear':\n        this.initialize();\n        break;\n      case 'export':\n        receiptData = this.export();\n        break;\n      case 'read':\n        receiptData = this.getValues();\n        break;\n      default:\n        break;\n    }\n    // Always send back receipt\n    this.port.postMessage({ event: 'receipt', id, data: receiptData });\n  }\n\n  sendChunk(chunk) {\n    const channels = this.readChannelData([chunk]);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const rawAudioData = this.floatTo16BitPCM(float32Array);\n    const monoAudioData = this.floatTo16BitPCM(meanValues);\n    this.port.postMessage({\n      event: 'chunk',\n      data: {\n        mono: monoAudioData,\n        raw: rawAudioData,\n      },\n    });\n  }\n\n  process(inputList, outputList, parameters) {\n    // Copy input to output (e.g. speakers)\n    // Note that this creates choppy sounds with Mac products\n    const sourceLimit = Math.min(inputList.length, outputList.length);\n    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {\n      const input = inputList[inputNum];\n      const output = outputList[inputNum];\n      const channelCount = Math.min(input.length, output.length);\n      for (let channelNum = 0; channelNum < channelCount; channelNum++) {\n        input[channelNum].forEach((sample, i) => {\n          output[channelNum][i] = sample;\n        });\n      }\n    }\n    const inputs = inputList[0];\n    // There's latency at the beginning of a stream before recording starts\n    // Make sure we actually receive audio data before we start storing chunks\n    let sliceIndex = 0;\n    if (!this.foundAudio) {\n      for (const channel of inputs) {\n        sliceIndex = 0; // reset for each channel\n        if (this.foundAudio) {\n          break;\n        }\n        if (channel) {\n          for (const value of channel) {\n            if (value !== 0) {\n              // find only one non-zero entry in any channel\n              this.foundAudio = true;\n              break;\n            } else {\n              sliceIndex++;\n            }\n          }\n        }\n      }\n    }\n    if (inputs && inputs[0] && this.foundAudio && this.recording) {\n      // We need to copy the TypedArray, because the `process`\n      // internals will reuse the same buffer to hold each input\n      const chunk = inputs.map((input) => input.slice(sliceIndex));\n      this.chunks.push(chunk);\n      this.sendChunk(chunk);\n    }\n    return true;\n  }\n}\n\nregisterProcessor('audio_processor', AudioProcessor);\n"],{type:"application/javascript"}),GNe=URL.createObjectURL(VNe),o$=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],WNe=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Df=[],Jk=[];for(let e=1;e<=8;e++)for(let t=0;t<o$.length;t++)Df.push(o$[t]/Math.pow(2,8-e)),Jk.push(WNe[t]+e);var v2=[32,2e3],s$=Df.filter((e,t)=>Df[t]>v2[0]&&Df[t]<v2[1]),qNe=Jk.filter((e,t)=>Df[t]>v2[0]&&Df[t]<v2[1]),eR=class{static getFrequencies(e,t,n,i="frequency",r=-100,o=-30){n||(n=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(n));let l,c,d,a=1/n.length*(t/2);if("music"===i||"voice"===i){let p="voice"===i?s$:Df,g=Array(p.length).fill(r);for(let v=0;v<n.length;v++){let y=v*a,b=n[v];for(let P=p.length-1;P>=0;P--)if(y>p[P]){g[P]=Math.max(g[P],b);break}}l=g,c="voice"===i?s$:Df,d="voice"===i?qNe:Jk}else l=Array.from(n),c=l.map((p,g)=>a*g),d=c.map(p=>`${p.toFixed(2)} Hz`);let h=l.map(p=>Math.max(0,Math.min((p-r)/(o-r),1)));return{values:new Float32Array(h),frequencies:c,labels:d}}constructor(e,t=null){if(this.fftResults=[],t){let{length:n,sampleRate:i}=t,r=new OfflineAudioContext({length:n,sampleRate:i}),o=r.createBufferSource();o.buffer=t;let s=r.createAnalyser();s.fftSize=8192,s.smoothingTimeConstant=.1,o.connect(s);let a=1/60,l=n/i,c=d=>{let h=a*d;h<l&&r.suspend(h).then(()=>{let p=new Float32Array(s.frequencyBinCount);s.getFloatFrequencyData(p),this.fftResults.push(p),c(d+1)}),1===d?r.startRendering():r.resume()};o.start(0),c(1),this.audio=e,this.context=r,this.analyser=s,this.sampleRate=i,this.audioBuffer=t}else{let n=new AudioContext,i=n.createMediaElementSource(e),r=n.createAnalyser();r.fftSize=8192,r.smoothingTimeConstant=.1,i.connect(r),r.connect(n.destination),this.audio=e,this.context=n,this.analyser=r,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}getFrequencies(e="frequency",t=-100,n=-30){let i=null;if(this.audioBuffer&&this.fftResults.length){let o=Math.min(this.audio.currentTime/this.audio.duration*this.fftResults.length|0,this.fftResults.length-1);i=this.fftResults[o]}return eR.getFrequencies(this.analyser,this.sampleRate,i,e,t,n)}resumeIfSuspended(){var e=this;return(0,Qn.Z)(function*(){return"suspended"===e.context.state&&(yield e.context.resume()),!0})()}},g1=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(2*e.length),n=new DataView(t),i=0;for(let r=0;r<e.length;r++,i+=2){let o=Math.max(-1,Math.min(1,e[r]));n.setInt16(i,o<0?32768*o:32767*o,!0)}return t}static mergeBuffers(e,t){let n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}_packData(e,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][e]}pack(e,t){if(!t?.bitsPerSample)throw new Error('Missing "bitsPerSample"');if(!t?.channels)throw new Error('Missing "channels"');if(!t?.data)throw new Error('Missing "data"');let{bitsPerSample:n,channels:i,data:r}=t,o=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,i.length),this._packData(1,e),this._packData(1,e*i.length*n/8),this._packData(0,i.length*n/8),this._packData(0,n),"data",this._packData(1,i[0].length*i.length*n/8),r],s=new Blob(o,{type:"audio/mpeg"});return{blob:s,url:URL.createObjectURL(s),channelCount:i.length,sampleRate:e,duration:r.byteLength/(i.length*e*2)}}},a$=class{constructor({sampleRate:e=44100,outputToSpeakers:t=!1,debug:n=!1}={}){this.scriptSrc=GNe,this.sampleRate=e,this.outputToSpeakers=t,this.debug=!!n,this._deviceChangeCallback=null,this._devices=[],this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}static decode(e,t=44100,n=-1){return(0,Qn.Z)(function*(){let r,o,i=new AudioContext({sampleRate:t});if(e instanceof Blob){if(-1!==n)throw new Error('Can not specify "fromSampleRate" when reading from Blob');o=e,r=yield o.arrayBuffer()}else if(e instanceof ArrayBuffer){if(-1!==n)throw new Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');r=e,o=new Blob([r],{type:"audio/wav"})}else{let c,d;if(e instanceof Int16Array){d=e,c=new Float32Array(e.length);for(let p=0;p<e.length;p++)c[p]=e[p]/32768}else if(e instanceof Float32Array)c=e;else{if(!(e instanceof Array))throw new Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');c=new Float32Array(e)}if(-1===n)throw new Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(n<3e3)throw new Error('Minimum "fromSampleRate" is 3000 (3kHz)');d||(d=g1.floatTo16BitPCM(c));let h={bitsPerSample:16,channels:[c],data:d};o=(new g1).pack(n,h).blob,r=yield o.arrayBuffer()}let s=yield i.decodeAudioData(r),a=s.getChannelData(0);return{blob:o,url:URL.createObjectURL(o),values:a,audioBuffer:s}})()}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}_event(e,t={},n=null){var i=this;return(0,Qn.Z)(function*(){if(!(n=n||i.processor))throw new Error("Can not send events without recording first");let r={event:e,id:i._lastEventId++,data:t};n.port.postMessage(r);let o=(new Date).valueOf();for(;!i.eventReceipts[r.id];){if((new Date).valueOf()-o>i.eventTimeout)throw new Error(`Timeout waiting for "${e}" event`);yield new Promise(a=>setTimeout(()=>a(!0),1))}let s=i.eventReceipts[r.id];return delete i.eventReceipts[r.id],s})()}listenForDeviceChange(e){var t=this;if(null===e&&this._deviceChangeCallback)navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeCallback),this._deviceChangeCallback=null;else if(null!==e){let n=0,i=[],r=s=>s.map(a=>a.deviceId).sort().join(","),o=function(){var s=(0,Qn.Z)(function*(){let a=++n,l=yield t.listDevices();a===n&&r(i)!==r(l)&&(i=l,e(l.slice()))});return function(){return s.apply(this,arguments)}}();navigator.mediaDevices.addEventListener("devicechange",o),o(),this._deviceChangeCallback=o}return!0}requestPermission(){return(0,Qn.Z)(function*(){let e=yield navigator.permissions.query({name:"microphone"});if("denied"===e.state)window.alert("You must grant microphone access to use this feature.");else if("prompt"===e.state)try{(yield navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop())}catch{window.alert("You must grant microphone access to use this feature.")}return!0})()}listDevices(){var e=this;return(0,Qn.Z)(function*(){if(!navigator.mediaDevices||!("enumerateDevices"in navigator.mediaDevices))throw new Error("Could not request user devices");yield e.requestPermission();let t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>"audioinput"===r.kind),n=t.findIndex(r=>"default"===r.deviceId),i=[];if(-1!==n){let r=t.splice(n,1)[0],o=t.findIndex(s=>s.groupId===r.groupId);-1!==o&&(r=t.splice(o,1)[0]),r.default=!0,i.push(r)}return i.concat(t)})()}begin(e){var t=this;return(0,Qn.Z)(function*(){if(t.processor)throw new Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw new Error("Could not request user media");try{let a={audio:!0};e&&(a.audio={deviceId:{exact:e}}),t.stream=yield navigator.mediaDevices.getUserMedia(a)}catch{throw new Error("Could not start media stream")}let n=new AudioContext({sampleRate:t.sampleRate}),i=n.createMediaStreamSource(t.stream);try{yield n.audioWorklet.addModule(t.scriptSrc)}catch(a){throw console.error(a),new Error(`Could not add audioWorklet module: ${t.scriptSrc}`)}let r=new AudioWorkletNode(n,"audio_processor");r.port.onmessage=a=>{let{event:l,id:c,data:d}=a.data;if("receipt"===l)t.eventReceipts[c]=d;else if("chunk"===l)if(t._chunkProcessorSize){let h=t._chunkProcessorBuffer;t._chunkProcessorBuffer={raw:g1.mergeBuffers(h.raw,d.raw),mono:g1.mergeBuffers(h.mono,d.mono)},t._chunkProcessorBuffer.mono.byteLength>=t._chunkProcessorSize&&(t._chunkProcessor(t._chunkProcessorBuffer),t._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else t._chunkProcessor(d)};let o=i.connect(r),s=n.createAnalyser();return s.fftSize=8192,s.smoothingTimeConstant=.1,o.connect(s),t.outputToSpeakers&&(console.warn("Warning: Output to speakers may affect sound quality,\nespecially due to system audio feedback preventative measures.\nuse only for debugging"),s.connect(n.destination)),t.source=i,t.node=o,t.analyser=s,t.processor=r,!0})()}getFrequencies(e="frequency",t=-100,n=-30){if(!this.processor)throw new Error("Session ended: please call .begin() first");return eR.getFrequencies(this.analyser,this.sampleRate,null,e,t,n)}pause(){var e=this;return(0,Qn.Z)(function*(){if(!e.processor)throw new Error("Session ended: please call .begin() first");if(!e.recording)throw new Error("Already paused: please call .record() first");return e._chunkProcessorBuffer.raw.byteLength&&e._chunkProcessor(e._chunkProcessorBuffer),e.log("Pausing ..."),yield e._event("stop"),e.recording=!1,!0})()}record(e=(()=>{}),t=8192){var n=this;return(0,Qn.Z)(function*(){if(!n.processor)throw new Error("Session ended: please call .begin() first");if(n.recording)throw new Error("Already recording: please call .pause() first");if("function"!=typeof e)throw new Error("chunkProcessor must be a function");return n._chunkProcessor=e,n._chunkProcessorSize=t,n._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},n.log("Recording ..."),yield n._event("start"),n.recording=!0,!0})()}clear(){var e=this;return(0,Qn.Z)(function*(){if(!e.processor)throw new Error("Session ended: please call .begin() first");return yield e._event("clear"),!0})()}read(){var e=this;return(0,Qn.Z)(function*(){if(!e.processor)throw new Error("Session ended: please call .begin() first");return e.log("Reading ..."),yield e._event("read")})()}save(e=!1){var t=this;return(0,Qn.Z)(function*(){if(!t.processor)throw new Error("Session ended: please call .begin() first");if(!e&&t.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");t.log("Exporting ...");let n=yield t._event("export");return(new g1).pack(t.sampleRate,n.audio)})()}end(){var e=this;return(0,Qn.Z)(function*(){if(!e.processor)throw new Error("Session ended: please call .begin() first");let t=e.processor;e.log("Stopping ..."),yield e._event("stop"),e.recording=!1,e.stream.getTracks().forEach(i=>i.stop()),e.log("Exporting ...");let n=yield e._event("export",{},t);return e.processor.disconnect(),e.source.disconnect(),e.node.disconnect(),e.analyser.disconnect(),e.stream=null,e.processor=null,e.source=null,e.node=null,(new g1).pack(e.sampleRate,n.audio)})()}quit(){var e=this;return(0,Qn.Z)(function*(){return e.listenForDeviceChange(null),e.processor&&(yield e.end()),!0})()}},XNe=new Blob(["\nclass StreamProcessor extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.hasStarted = false;\n    this.hasInterrupted = false;\n    this.outputBuffers = [];\n    this.bufferLength = 128;\n    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };\n    this.writeOffset = 0;\n    this.trackSampleOffsets = {};\n    this.port.onmessage = (event) => {\n      if (event.data) {\n        const payload = event.data;\n        if (payload.event === 'write') {\n          const int16Array = payload.buffer;\n          const float32Array = new Float32Array(int16Array.length);\n          for (let i = 0; i < int16Array.length; i++) {\n            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32\n          }\n          this.writeData(float32Array, payload.trackId);\n        } else if (\n          payload.event === 'offset' ||\n          payload.event === 'interrupt'\n        ) {\n          const requestId = payload.requestId;\n          const trackId = this.write.trackId;\n          const offset = this.trackSampleOffsets[trackId] || 0;\n          this.port.postMessage({\n            event: 'offset',\n            requestId,\n            trackId,\n            offset,\n          });\n          if (payload.event === 'interrupt') {\n            this.hasInterrupted = true;\n          }\n        } else {\n          throw new Error(`Unhandled event \"${payload.event}\"`);\n        }\n      }\n    };\n  }\n\n  writeData(float32Array, trackId = null) {\n    let { buffer } = this.write;\n    let offset = this.writeOffset;\n    for (let i = 0; i < float32Array.length; i++) {\n      buffer[offset++] = float32Array[i];\n      if (offset >= buffer.length) {\n        this.outputBuffers.push(this.write);\n        this.write = { buffer: new Float32Array(this.bufferLength), trackId };\n        buffer = this.write.buffer;\n        offset = 0;\n      }\n    }\n    this.writeOffset = offset;\n    return true;\n  }\n\n  process(inputs, outputs, parameters) {\n    const output = outputs[0];\n    const outputChannelData = output[0];\n    const outputBuffers = this.outputBuffers;\n    if (this.hasInterrupted) {\n      this.port.postMessage({ event: 'stop' });\n      return false;\n    } else if (outputBuffers.length) {\n      this.hasStarted = true;\n      const { buffer, trackId } = outputBuffers.shift();\n      for (let i = 0; i < outputChannelData.length; i++) {\n        outputChannelData[i] = buffer[i] || 0;\n      }\n      if (trackId) {\n        this.trackSampleOffsets[trackId] =\n          this.trackSampleOffsets[trackId] || 0;\n        this.trackSampleOffsets[trackId] += buffer.length;\n      }\n      return true;\n    } else if (this.hasStarted) {\n      this.port.postMessage({ event: 'stop' });\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n\nregisterProcessor('stream_processor', StreamProcessor);\n"],{type:"application/javascript"}),QNe=URL.createObjectURL(XNe),c$=class{constructor(e,t,n){var i=this;this.data=e,this.id=t,this.shared=n,this.items=[],this.isConnected=!1,this.rafId=0,this.emitter=o2(),this.voice=0,this.frequencies=new Float32Array([0]),this.onRealTimeEvent=({source:o,event:s})=>{"server"===o&&"spline.ready"===s.type?this.onSessionCreated(s):"server"===o&&"session.created"===s.type&&(this.client.createResponse(),this.client.on("realtime.event",this.onRealTimeEvent))},this.onSessionCreated=function(){var r=(0,Qn.Z)(function*(o){let s=Object.values(i.client.tools).map(a=>({type:"function",...a.definition}));i.client.realtime.send("spline.tools",{tools:s}),i.client.realtime.send("spline.connect",{}),yield i.wavRecorder.record(a=>i.client.isConnected()&&i.client.appendInputAudio(a.mono))});return function(o){return r.apply(this,arguments)}}(),this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected){let r=this.wavStreamPlayer.analyser?this.wavStreamPlayer.getFrequencies("voice"):{values:new Float32Array([0])},o=r.values.reduce((s,a)=>s+a,0)/r.values.length;this.voice=o,this.frequencies=r.values,this.emitter.emit("voice",{value:o,frequencies:r.values})}},this.client=new r$({url:"https://relayserver.spline.design/?uuidfile="+e.integration.hash}),this.wavRecorder=new a$({sampleRate:24e3}),this.wavStreamPlayer=new class{constructor({sampleRate:e=44100}={}){this.scriptSrc=QNe,this.sampleRate=e,this.context=null,this.stream=null,this.analyser=null,this.trackSampleOffsets={},this.interruptedTrackIds={}}connect(){var e=this;return(0,Qn.Z)(function*(){e.context=new AudioContext({sampleRate:e.sampleRate}),"suspended"===e.context.state&&(yield e.context.resume());try{yield e.context.audioWorklet.addModule(e.scriptSrc)}catch(n){throw console.error(n),new Error(`Could not add audioWorklet module: ${e.scriptSrc}`)}let t=e.context.createAnalyser();return t.fftSize=8192,t.smoothingTimeConstant=.1,e.analyser=t,!0})()}getFrequencies(e="frequency",t=-100,n=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return eR.getFrequencies(this.analyser,this.sampleRate,null,e,t,n)}_start(){let e=new AudioWorkletNode(this.context,"stream_processor");return e.connect(this.context.destination),e.port.onmessage=t=>{let{event:n}=t.data;if("stop"===n)e.disconnect(),this.stream=null;else if("offset"===n){let{requestId:i,trackId:r,offset:o}=t.data;this.trackSampleOffsets[i]={trackId:r,offset:o,currentTime:o/this.sampleRate}}},this.analyser.disconnect(),e.connect(this.analyser),this.stream=e,!0}add16BitPCM(e,t="default"){if("string"!=typeof t)throw new Error("trackId must be a string");if(this.interruptedTrackIds[t])return;let n;if(this.stream||this._start(),e instanceof Int16Array)n=e;else{if(!(e instanceof ArrayBuffer))throw new Error("argument must be Int16Array or ArrayBuffer");n=new Int16Array(e)}return this.stream.port.postMessage({event:"write",buffer:n,trackId:t}),n}getTrackSampleOffset(e=!1){var t=this;return(0,Qn.Z)(function*(){if(!t.stream)return null;let i,n=crypto.randomUUID();for(t.stream.port.postMessage({event:e?"interrupt":"offset",requestId:n});!i;)i=t.trackSampleOffsets[n],yield new Promise(o=>setTimeout(()=>o(),1));let{trackId:r}=i;return e&&r&&(t.interruptedTrackIds[r]=!0),i})()}interrupt(){var e=this;return(0,Qn.Z)(function*(){return e.getTrackSampleOffset(!0)})()}}({sampleRate:24e3})}update(e){this.data=e,this.client=new r$({url:"https://relayserver.spline.design/?uuidfile="+e.integration.hash})}setColorByName(e,t){let n=this.shared.getColorByName(e);if(n){let{id:i}=n,{r,g:o,b:s}=fRe_hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(i,{r:r/255,g:o/255,b:s/255})}}connect(){var e=this;if(this.isConnected)return;this.isConnected=!0,this.client.updateSession({turn_detection:{type:"server_vad"}}),this.client.addTool({name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:o})=>{this.setColorByName("Voice Assistant Color",o)});let t=this.shared.getVariablesNames().join(", ");this.client.addTool({name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${t}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:o,value:s})=>{let a=this.shared.getVariableByName(o);if(a){let c,l=this.shared.getVariable(a.id);c="number"==typeof l?parseFloat(s):"boolean"==typeof l?"true"===s.toLowerCase():{textValue:s},this.shared.updateVariable(a.id,c)}});let n=this.shared.getColorNames().join(", ");this.client.addTool({name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${n}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:o,value:s})=>{this.setColorByName(o,s)});let r=[];this.shared.scene.traverseEntity(o=>{o.data.events.forEach(s=>{if("AIAssistantTrigger"===s.data.type){let{description:a}=s.data;r.push(a)}})}),this.client.addTool({name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(r)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:o,direction:s})=>{this.emitter.emit("trigger_event",{description:o,direction:s})}),this.client.on("error",o=>console.error(o)),this.client.on("conversation.interrupted",(0,Qn.Z)(function*(){let o=yield e.wavStreamPlayer.interrupt();if(o?.trackId){let{trackId:s,offset:a}=o;yield e.client.cancelResponse(s,a)}})),this.client.on("conversation.updated",function(){var o=(0,Qn.Z)(function*({item:s,delta:a}){let l=e.client.conversation.getItems();if(a?.audio&&e.wavStreamPlayer.add16BitPCM(a.audio,s.id),"completed"===s.status&&s.formatted.audio?.length){let c=yield a$.decode(s.formatted.audio,24e3,24e3);s.formatted.file=c}e.items=l});return function(s){return o.apply(this,arguments)}}()),this.animate()}disconnect(){cancelAnimationFrame(this.rafId),this.voice=0,this.isConnected=!1}start(){var e=this;return(0,Qn.Z)(function*(){try{yield e.wavRecorder.end()}catch{}yield e.wavRecorder.begin(),e.client.on("realtime.event",e.onRealTimeEvent),yield e.wavStreamPlayer.connect(),yield e.client.connect()})()}stop(){var e=this;return(0,Qn.Z)(function*(){try{e.client.off("realtime.event",e.onRealTimeEvent)}catch(t){console.error(t)}e.client.disconnect(),yield e.wavRecorder.end(),yield e.wavStreamPlayer.interrupt()})()}computeAnalysisForListenerEvent(e){if("range"===e.analysis){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((n,i)=>n+i,0)/t.length}return"single"===e.analysis?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function tR(e){return"variable_"+e}var nR=class{constructor(e,t={},n=!0,i=!1){if(this.data=e,this.needsJitter=n,this.enableLocalStorageForPersistentVariables=i,this.geometryCache=new e$(!0),this.geometryCache2=new e$(!1),this.imageHolderCache=new class extends class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return void 0===t&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}}{constructor(e){super(),this.shared=e}create(e){return new DX(e,this.shared)}}(this),this.thisContext={scene:INe,shared:this},this.deletedMaterial=new Qk(Sa.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Of(FI.emptyImage,this),this.deletedVideo=new Of(MP.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,o]of Object.entries(t.images))this.addImage(r,o);if(t.videos)for(let[r,o]of Object.entries(t.videos))this.addVideo(r,o);if(t.audios)for(let[r,o]of Object.entries(t.audios))this.addAudio(r,o);if(t.particles)for(let[r,o]of Object.entries(t.particles))this.addParticle(r,o);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:n,data:i}of e.variables)this.addVariableHolder(n,i),t&&this.updateVariableHolder(n,i);for(let[n,i]of Object.entries(e.userAPIs))this.addUserAPI(n,i);for(let[n,i]of Object.entries(e.userWebhooks))this.addUserWebhook(n,i);for(let[n,i]of Object.entries(e.images))this.addImage(n,i);for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);for(let[n,i]of Object.entries(e.colors))this.addColor(n,i);for(let[n,i]of Object.entries(e.materials))this.addMaterial(n,i);for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i);for(let[n,i]of Object.entries(e.particles))this.addParticle(n,i);for(let[n,i]of Object.entries(e.fonts))this.addFont(n,i)}addMaterial(e,t){if(this.materials[e]){let n=this.materials[e];n.reset(t,this.thisContext),n.dispose()}else{let n=new Qk(t,this.thisContext,e);this.materials[e]=n}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):null==e?(console.error("material is undefined or null"),this.deletedMaterial):new $k(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Of(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return"string"==typeof e?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Of(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Of(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return"string"==typeof e?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.colors[e].setRGBA(t.r,t.g,t.b,"a"in t?t.a:1),!0):(this.colors[e]=new p2(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[e];return this.colors[e].r=t.r??n.r,this.colors[e].g=t.g??n.g,this.colors[e].b=t.b??n.b,this.colors[e].a=t.a??n.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if("string"!=typeof e)return new Da(e.r,e.g,e.b,"a"in e?e.a:1);{let n=this.getColor(e);n?t=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Da(0,0,0,0))}return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof U_)return t;{let n=new U_({src:t.data});return this.audios[e]=n,n}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof U_&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=JX(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=JX(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,n){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let r=i.tokenizer.tokens,o=[],s=0,a=n.length===r.length;for(let l=0;l<n.length;l++){let c=n[l].index,d=String.fromCharCode(n[l].unicode),h=r[s];if(ENe(c,h)||a)o.push({char:d,index:c,replacements:[h.state.glyphIndex],replacementChars:[h.char]}),s++;else{let p=h.char,g="",v=[h.state.glyphIndex],y=[],b=!1;for(;!b;)s++,g=t.charAt(s),p+=g,v.push(e.charToGlyphIndex(g)),y=e.stringToGlyphs(p),1===y.length&&y[0].index===c&&(b=!0),s>t.length&&(b=!0);o.push({char:d,index:c,replacements:v,replacementChars:Array.from(p)}),s++}}return o}generateShapes(e,t){if(!this._isLoaded)return;let y,n=this.font,i=t.fontSize/this.unitsPerEm,r=t.fontSize*t.lineHeight,o=e.map(P=>this.getTextWidth(P,t)),s=t.width,a=this.getCharWidth("\n",t),l=1===t.horizontalAlign?a:0,c=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(o[0],s,t.horizontalAlign,e[0],a),h=this.getLineInitialOffsetY(r,e.length,t.height,i,t.verticalAlign),p=[],g=e.map(P=>[]),v=e.map(P=>[]);for(let P=0;P<e.length;P++){let S=e[P],O={features:{liga:!0}},A=[];try{A=n.stringToGlyphs(S,O)}catch(U){console.warn(U)}d=this.getLineInitialOffsetX(o[P],s,t.horizontalAlign,S,a);let H=[];try{H=this.reverseLigaturesTable(n,S,A)}catch(U){console.warn(U)}c=this.computeSpaceWidthForLine(e,P,t);for(let U=0;U<A.length;U++){let X=A[U],Y=0===X.index?"\n":X.unicode?String.fromCharCode(X.unicode):void 0,Z=H[U],ee=0,oe=0;0===U&&2===t.horizontalAlign&&void 0!==X.leftSideBearing&&(oe=-X.leftSideBearing*i),y&&(ee=n.getKerningValue(X,y)*i),d+=oe+ee;let ce=0;if("\n"===Y)ce=l;else if(" "===Y)ce=c;else{let de=this.createPath(X,i,d,h,t);de&&(ce=de.offsetX-(ee+oe),p.push(de.path))}if(1===Z.replacements.length)v[P].push([d,h]),g[P].push(ce);else{let de=Z.replacements.map(_e=>(n.glyphs.get(_e).advanceWidth??0)*i),he=de.reduce((_e,ve)=>_e+ve,0),Pe=de.map(_e=>_e/he),we=d;for(let _e=0;_e<Pe.length;_e++){let ve=ce*Pe[_e];v[P].push([we,h]),g[P].push(ve),we+=ve}}d+=ce,y=X}h-=r}let b=[];for(let P=0,S=p.length;P<S;P++)b.push(...p[P].toShapes());return{shapes:b,charWidths:g,lineWidths:o,charCoords:v}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){return this.font?.ascender??0}get descender(){return this.font?.descender??0}get familyName(){return this.font?.names.fontFamily??""}get subfamilyName(){return this.font?.names.fontSubfamily??""}get unitsPerEm(){return this.font?.unitsPerEm??1}getLineInitialOffsetX(e,t,n,i,r){return(3===n||2===n)&&i.indexOf("\n")>=0&&(e-=r),3===n?.5*t-.5*e:2===n?t-e:0}getLineInitialOffsetY(e,t,n,i,r){let o=t*e,s=Math.abs(this.ascender-this.descender)*i,l=-this.ascender*i-(e-s)/2;return 3===r?-(n-o-l):2===r?-(.5*n-.5*o-l):l}createPath(e,t,n,i,r){let o=e.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");let s=new class{constructor(){this.type="ShapePath",this.color=new ni,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new MM,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath?.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath?.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,o){return this.currentPath?.bezierCurveTo(e,t,n,i,r,o),this}splineThru(e){return this.currentPath?.splineThru(e),this}toShapes(){let t={loc:0,t:0};function n(g,v,y,b){let P=g.x,S=v.x,O=y.x,A=b.x,H=g.y,U=v.y,X=y.y,Y=b.y,Z=(A-O)*(H-X)-(Y-X)*(P-O),oe=(Y-X)*(S-P)-(A-O)*(U-H),ce=Z/oe,de=((S-P)*(H-X)-(U-H)*(P-O))/oe;if(0===oe&&0!==Z||ce<=0||ce>=1||de<0||de>1)return null;if(0===Z&&0===oe){for(let he=0;he<2;he++){if(i(0===he?y:b,g,v),0===t.loc){let Pe=0===he?y:b;return{x:Pe.x,y:Pe.y,t:t.t}}if(2===t.loc)return{x:+(P+t.t*(S-P)).toPrecision(10),y:+(H+t.t*(U-H)).toPrecision(10),t:t.t}}return null}for(let we=0;we<2;we++)if(i(0===we?y:b,g,v),0===t.loc){let _e=0===we?y:b;return{x:_e.x,y:_e.y,t:t.t}}return{x:+(P+ce*(S-P)).toPrecision(10),y:+(H+ce*(U-H)).toPrecision(10),t:ce}}function i(g,v,y){let H,b=y.x-v.x,P=y.y-v.y,S=g.x-v.x,O=g.y-v.y,A=b*O-S*P;return g.x===v.x&&g.y===v.y?(t.loc=0,void(t.t=0)):g.x===y.x&&g.y===y.y?(t.loc=1,void(t.t=1)):void(A<-Number.EPSILON?t.loc=3:A>Number.EPSILON?t.loc=4:b*S<0||P*O<0?t.loc=5:Math.sqrt(b*b+P*P)<Math.sqrt(S*S+O*O)?t.loc=6:(H=0!==b?S/b:O/P,t.loc=2,t.t=H))}let a=0,l=999999999,c=-999999999,d=[];this.subPaths.forEach(g=>{let v=g.getPoints(),y=-999999999,b=999999999,P=-999999999,S=999999999;for(let O=0;O<v.length;O++){let A=v[O];A.y>y&&(y=A.y),A.y<b&&(b=A.y),A.x>P&&(P=A.x),A.x<S&&(S=A.x)}c<=P&&(c=P+1),l>=S&&(l=S-1),v.length&&d.push({curves:g.curves,points:v,isCW:tH.isClockWise(v),identifier:a++,boundingBox:new wH(new Ue(S,b),new Ue(P,y))})});let h=d.map(g=>function s(g,v,y,b,P){(null==P||""===P)&&(P="nonzero");let S=new Ue;g.boundingBox.getCenter(S);let A=function o(g,v,y){let b=new Ue;v.getCenter(b);let P=[];return y.forEach(S=>{S.boundingBox.containsPoint(b)&&function r(g,v){let y=[],b=[];for(let P=1;P<g.length;P++){let S=g[P-1],O=g[P];for(let A=1;A<v.length;A++){let X=n(S,O,v[A-1],v[A]);null!==X&&void 0===y.find(Y=>Y.t<=X.t+Number.EPSILON&&Y.t>=X.t-Number.EPSILON)&&(y.push(X),b.push(new Ue(X.x,X.y)))}}return b}(g,S.points).forEach(O=>{P.push({identifier:S.identifier,isCW:S.isCW,point:O})})}),P.sort((S,O)=>S.point.x-O.point.x),P}([new Ue(y,S.y),new Ue(b,S.y)],g.boundingBox,v);A.sort((ee,oe)=>ee.point.x-oe.point.x);let H=[],U=[];A.forEach(ee=>{ee.identifier===g.identifier?H.push(ee):U.push(ee)});let X=H[0].point.x,Y=[],Z=0;for(;Z<U.length&&U[Z].point.x<X;)Y.length>0&&Y[Y.length-1]===U[Z].identifier?Y.pop():Y.push(U[Z].identifier),Z++;if(Y.push(g.identifier),"evenodd"===P)return{identifier:g.identifier,isHole:Y.length%2==0,for:Y[Y.length-2]};if("nonzero"===P){let ee=!0,oe=null,ce=null;for(let de=0;de<Y.length;de++){let he=Y[de];v[he]&&(ee?(ce=v[he].isCW,ee=!1,oe=he):ce!==v[he].isCW&&(ce=v[he].isCW,ee=!0))}return{identifier:g.identifier,isHole:ee,for:oe}}console.warn('fill-rule: "'+P+'" is currently not implemented.')}(g,d,l,c,this.userData?.style.fillRule)),p=[];return d.forEach(g=>{let v=h[g.identifier];if(v&&!v.isHole){let y=new PM;y.curves=g.curves,h.filter(b=>b?.isHole&&b.for===g.identifier).forEach(b=>{if(b){let P=d[b.identifier],S=new MM;S.curves=P.curves,y.holes.push(S)}}),p.push(y)}}),p}},a=(e.advanceWidth??1)*t;if(e)for(let l of o.commands){let c=s.currentPath?.currentPoint;if(!c||"Z"===l.type||c.x!==l.x||-c.y!==l.y)switch(l.type){case"M":s.moveTo(l.x,-l.y);break;case"L":s.lineTo(l.x,-l.y);break;case"Q":s.quadraticCurveTo(l.x1,-l.y1,l.x,-l.y);break;case"C":s.bezierCurveTo(l.x1,-l.y1,l.x2,-l.y2,l.x,-l.y)}}return s.subPaths.forEach(l=>{let c=function ANe(e){if(e.length){let t=e[0];if(t instanceof Td)return t.v1;if(t instanceof Ad||t instanceof sf)return t.v0}}(l.curves);void 0!==c&&l.currentPoint.distanceTo(c)>0&&l.lineTo(c.x,c.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:s}}getCharWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}getTextWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}computeSpaceWidthForLine(e,t,n){let i=this.getCharWidth(" ",n),r=e[t];if(r){let o=this.countSpaces(r.trimEnd());if(4===n.horizontalAlign&&t<e.length-1&&o)return(n.width-(this.getTextWidth(r,n)-o*i))/o}return i}countSpaces(e){return(e.match(/ /g)||[]).length}}(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof U_&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(void 0===this.variables[e]){let n=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let i=localStorage.getItem(tR(e));n=null!==i?JSON.parse(i):t.value}return this.variables[e]={value:n,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)void 0!==this.variables[e].dynamicVariablePlayState&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(void 0===this.variables[e])return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(tR(e),JSON.stringify(t));let n=t;for(;"string"==typeof n;)n=this.variables[n].value;let i=this.entityOpContext.scene;for(let r=this.variables[e].locations.length-1;r>=0;r--){let o=this.variables[e].locations[r];if("material"===o[0]){let s=o[1],a=n,l={scene:i,shared:this},c=o.slice(2);i.traverseMaterial(h=>{let p=h.root??h;p.uuid===s&&p.onVariableUpdate(c,a,l)});let d=this.materials[s];d&&d.onVariableUpdate(c,a,l)}else{let s=i.find(o[0]);if(void 0===s){this.variables[e].locations.splice(r,1);continue}if("geometry"!==o[1]&&"particles"!==o[1]){for(let a=1;a<o.length-1;a++)s=s[o[a]];s[o[o.length-1]]="rotation"===o[1]?n*En.DEG2RAD:n}if(s=i.find(o[0]),"ParticleEmitter"===s.type&&s.updateVariableState(n,o),dr.is(s))if("position"===o[1]||"rotation"===o[1]||"scale"===o[1])s.onVariableUpdate();else if("geometry"===o[1]){let a=s;s.component&&(a=s.component);let l=a.dataPatched;a.chooseGeoemtryCache(this).forceDelete(l.geometry),a.createGeometryDelayed(this.entityOpContext),a.onVariableUpdate(!0),a.invalidateDownstreamBooleanData(),a.instances.forEach(c=>{let d=c.dataPatched;c.chooseGeoemtryCache(this).forceDelete(d.geometry),c.createGeometryDelayed(this.entityOpContext),c.onVariableUpdate(!0),c.invalidateDownstreamBooleanData()})}else"morphTargetInfluences"===o[1]&&s.updateMorphInfluences(o[2],n)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){if(Array.isArray(e)){if("mouse"===e[0])return this.mouseProperty?.[e[1]]??0;if("raycast"===e[0])return this.raycastProperty?.[e[1]]??0;let n=this.entityOpContext.scene.find(e[0]);if("width"===e[1]||"height"===e[1]||"depth"===e[1])return n.geometry.userData.parameters[e[1]];for(let i=1;i<e.length;i++)n=n[e[i]];return"rotation"===e[1]&&(n*=En.RAD2DEG),n}for(let n in this.variables){if(void 0===t)break;let i=this.variables[n],r=i.locations?.findIndex(o=>Gs.equal(o,t));void 0!==r&&-1!==r&&i.locations.splice(r,1)}if("string"==typeof e){let n=e,i=e;do{if(i=n,void 0===this.variables[n])break;let r=this.variables[n].value;t&&void 0!==this.variables[i]&&this.variables[i].locations.push(t),n=r}while("string"==typeof n);return n}return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){return this.variables[e]?.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){return this.variables[e]?.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){void 0!==this.variables[e]&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,n]of Object.entries(e.images))this.addImage(t,n.asset);for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.asset);for(let[t,n]of Object.entries(e.particles))this.addParticle(t,n.asset);for(let[t,n]of Object.entries(e.colors))this.addColor(t,n.asset);for(let[t,n]of Object.entries(e.fonts))this.addFont(t,n.asset);for(let[t,n]of Object.entries(e.materials))this.addMaterial(t,n.asset);for(let[t,n]of Object.entries(e.videos))this.addVideo(t,n.asset);for(let[t,n]of Object.entries(e.variables))this.addVariableHolder(t,n.asset)}updateLibByOp(e,t){"images"===e.path[0]?1===e.path.length&&1===e.type?this.addImage(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteImage(e.id):"videos"===e.path[0]?1===e.path.length&&1===e.type?this.addVideo(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVideo(e.id):"audios"===e.path[0]?1===e.path.length&&1===e.type?this.addAudio(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteAudio(e.id):"particles"===e.path[0]?1===e.path.length&&1===e.type?this.addParticle(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteParticle(e.id):"colors"===e.path[0]?1===e.path.length&&1===e.type?this.addColor(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteColor(e.id):"materials"===e.path[0]?1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteMaterial(e.id):"fonts"===e.path[0]?1===e.path.length&&1===e.type?this.addFont(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteFont(e.id):"variables"===e.path[0]?1===e.path.length&&1===e.type?this.addVariableHolder(e.id,e.data.asset):1===e.path.length&&2===e.type&&this.deleteVariable(e.id):"components"===e.path[0]&&t.updateByLibOp(e,this)}updateByOp(e,t,n){if(this.data=t,"images"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addImage(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteImage(e.id);else if("videos"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):1===e.path.length&&1===e.type?this.addVideo(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteVideo(e.id);else if("audios"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):1===e.path.length&&1===e.type?this.addAudio(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteAudio(e.id);else if("particles"===e.path[0])2===e.path.length&&0===e.type?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):1===e.path.length&&1===e.type?this.addParticle(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteParticle(e.id);else if("colors"===e.path[0])2===e.path.length&&0===e.type?this.updateColor(e.path[1],e.props):1===e.path.length&&1===e.type?this.addColor(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteColor(e.id);else if("materials"===e.path[0])1===e.path.length&&1===e.type?this.addMaterial(e.id,e.data):1===e.path.length&&2===e.type?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(sa.drop(e,2),t.materials[e.path[1]],{shared:this,scene:n});else if("fonts"===e.path[0])2===e.path.length&&0===e.type?this.updateFont(e.path[1],e,n):1===e.path.length&&1===e.type?this.addFont(e.id,e.data):1===e.path.length&&2===e.type&&this.deleteFont(e.id);else if("variables"===e.path[0])2===e.path.length&&0===e.type?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):1===e.path.length&&4===e.type?this.addVariableHolder(e.id,e.data):1===e.path.length&&5===e.type&&this.deleteVariable(e.id);else if("userAPIs"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserAPI(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserAPI(e.id);else if("string"==typeof e.path[1]){let i=t.userAPIs[e.path[1]];if(i){let r=0===e.type&&void 0===e.props.debounce,o=this.getUserAPI(e.path[1]);o instanceof c$?o.update(i):o?.update(i,this,r)}}}else if("userWebhooks"===e.path[0]){if(1===e.path.length&&1===e.type)this.addUserWebhook(e.id,e.data);else if(1===e.path.length&&2===e.type)this.deleteUserWebhook(e.id);else if("string"==typeof e.path[1]){let i=t.userWebhooks[e.path[1]];i&&this.getUserWebhook(e.path[1])?.update(i)}}else"lib"===e.path[0]&&this.updateLibByOp(sa.drop(e,1),n)}updateFont(e,t,n){if(t.props.url){let i=this.getFont(e),r={...this.data.fonts[e],url:t.props.url};i.update(r),i.loadingPromise.then(()=>this.requestRender()),n.updateFont(e,this)}}addUserAPI(e,t){return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):this.openAIRealtime?.id===e?(this.openAIRealtime.update(t),!0):"VoiceAssistant"===t.integration?.type?(this.openAIRealtime=new c$(t,e,this),!1):(this.userAPIs[e]=new RY(e,t,this),!1)}getUserAPI(e){return this.openAIRealtime?.id===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=o2(),this.reconnectWaitFor=1e3,this._onError=n=>{this.eventSource?.removeEventListener("message",this._onMessage),this.eventSource?.removeEventListener("error",this._onError),this.eventSource?.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=n=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=1e3,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=1e3,this._connected=!1},this._onMessage=n=>{let r,i=n.data;try{r=JSON.parse(i)}catch(o){console.error("Error parsing webhook message",o)}if(r){let o=!1;this.userWebhook.parametersSchemas.forEach(({data:s})=>{void 0!==r[s.name]&&function kNe(e,t){let n=typeof e;return!!(("string"===t||"number"===t)&&n===t||"boolean"===t&&("true"===e||"false"===e||!0===e||!1===e)||"image"===t&&"string"===n&&e.startsWith("http"))}(r[s.name],s.type)&&(void 0===this.result&&(this.result={}),this.result[s.name]=r[s.name],o=!0)}),o&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource("https://hooks.spline.design/events?hashFile="+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){this.eventSource?.removeEventListener("message",this._onMessage),this.eventSource?.removeEventListener("error",this._onError),this.eventSource?.removeEventListener("open",this._onConnected),this.eventSource?.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>512e3&&(this.reconnectWaitFor=512e3),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){if(this.getParametersKeys().includes(e)){if(this.result)return this.result?.[e];for(let t of this.userWebhook.parametersSchemas)if(t.data.name===e)return kI.defaultParameterValueByType(t.data.type)}}}(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}},v1=(new nR(qc.emptyData()),class extends yl{updateByPatchedOp(e,t,n){if(super.updateByPatchedOp(e,t,n),null!==function s3e(e,t){let n=[];if(t.length!==e.length)return null;for(var i=0;i<e.length;){if("*"===t[i])n.push(e[i]);else if(e[i]!==t[i])return null;i+=1}return n}(e.path,["materials"])&&0===e.type&&Array.isArray(this.material))for(let[i,r]of Object.entries(e.props)){let o=n.shared.material(r);this.material[Number(i)]=o}else if(ro(e.path,["material"])&&this.material instanceof Ef)"material"in t&&"string"!=typeof t.material&&this.material.updateByOp(sa.drop(e,1),t.material,n);else if(ro(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let r=t.materials[i];"string"!=typeof r&&this.material[i].updateByOp(sa.drop(e,2),r,n)}}}get needsAO(){return void 0!==this.material&&(Array.isArray(this.material)?this.material[0]:this.material).hasAO}updateState(e,t){super.updateState(e,t),void 0!==e.castShadow&&(this.castShadow=e.castShadow),void 0!==e.receiveShadow&&(this.receiveShadow=e.receiveShadow);let n=this.dataPatched;if("NonParametricGeometry"!==e.geometry?.type&&"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe),t.scene.markNeedsUpdateRendererDirty()),("NonParametricGeometry"===e.geometry?.type||"materials"in e)&&("materials"in e&&void 0!==e.materials?(this.disposeMaterial(),this.material=e.materials.map(i=>t.shared.material(i).getFlavor(n.flatShading,n.side,n.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&void 0!==e.material&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(n.flatShading,n.side,n.wireframe)],t.scene.markNeedsUpdateRendererDirty())),void 0!==e.flatShading||void 0!==e.wireframe||void 0!==e.side)if(Array.isArray(this.material))for(let i=0;i<this.material.length;i++)this.material[i]=this.material[i].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&$G(this.material).forEach(e=>{e instanceof Ef&&(e instanceof Qk||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}}),d$=new te,h$=new bi,u$=new bi,JNe=new te,p$=new qt,Ka=class extends v1{constructor(e,t,n){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=(new qt).fromArray(t.bindMatrix),this.bindMatrixInverse=new qt)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Xn&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(void 0!==this.localGeometry)return this.localGeometry;if(this.geometryCreateDeleyed instanceof nR){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return OP.is2DParametricMesh(e.type)&&0===e.depth}get is2DType(){return OP.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return"NonParametricGeometry"===this.geometry.userData.type}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),ro(e.path,["geometry"])&&this.updateByPatchedOpGeometry(sa.drop(e,1),t.geometry,n)}removeInteractionGeometry(e){this.localGeometry?.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){this.invalidateDownstreamBooleanData();let n=this.data.geometry.type;if("NonParametricGeometry"===n||"SubdivGeometry"===n){let r,o,s,i=e;if(void 0===this.localGeometry){let l={...this.data.geometry,...i};this.localGeometry=N_(l,t,this.data.flatShading,this)}i.scaleBaked?[r,o,s]=i.scaleBaked:({width:r,height:o,depth:s}=i);let a=this.localGeometry.userData;void 0!==a.sxPrev&&Dk(this.localGeometry.attributes,r/a.sxPrev,o/a.syPrev,s/a.szPrev),a.sxPrev=r,a.syPrev=o,a.szPrev=s}else{let i={...this.data.geometry,...e};this.localGeometry?.dispose(),this.localGeometry=N_(i,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,n){let i=!1;0===e.type&&0===e.path.length&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof vl&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),i||(n.scene?.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){void 0!==e.geometry&&this.updateGeometryOnStateUpdate(e.geometry,t);let n=e.morphTargetInfluences;if(n){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:i,value:r}}of n)this.updateMorphInfluences(i,t.shared.getVariable(r,[this.uuid,"morphTargetInfluences",i]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(void 0===this.morphTargetDictionary)return;let n=this.morphTargetDictionary[e];void 0!==n&&(this.morphTargetInfluences[n]=t)}updateGeometryGroupsIfNeeded(){Array.isArray(this.material)&&0===this.geometry.groups.length&&this.geometry.addGroup(0,Math.max(this.geometry.getIndex()?.count??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;this.is2DType?e.set(0,0,.5*n.depth):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new bi,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){t.fromBufferAttribute(n,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),n.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let n=this.skeleton;if(void 0===n)return;let i=this.geometry;h$.fromBufferAttribute(i.attributes.skinIndex,e),u$.fromBufferAttribute(i.attributes.skinWeight,e),d$.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){let o=u$.getComponent(r);if(0!==o){let s=h$.getComponent(r);p$.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),t.addScaledVector(JNe.copy(d$).applyMatrix4(p$),o)}}return t.applyMatrix4(this.bindMatrixInverse)}};function iR(e){if(Array.isArray(e.material)){for(let t of e.material)if(0===t.getLayersOfType("outline").length)return}else if(!(e.material instanceof Ef)||0===e.material.getLayersOfType("outline").length)return;e instanceof Ka&&e.is2DAndNoDepth?function t5e(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=new te;for(let r=0;r<t.length;r+=3)i.set(t[r],t[r+1],t[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;e.geometry.setAttribute("extrudeNormal",new _n(n,3))}(e):function e5e(e){if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,n=e.geometry.attributes,i=n.position.array,r=n.normal.array,o=new Float32Array(i.length);for(let s=0;s<i.length;s+=3){let a=`${i[s]}_${i[s+1]}_${i[s+2]}`,l=new te(r[s],r[s+1],r[s+2]);t.has(a)?t.get(a)?.normals.push(l):t.set(a,{normals:[l],result:new te})}t.forEach((s,a)=>{for(let l of s.normals)s.result.add(l);s.result.divideScalar(s.normals.length)});for(let s=0;s<i.length;s+=3){let l=t.get(`${i[s]}_${i[s+1]}_${i[s+2]}`)?.result;l&&(o[s]=l.x,o[s+1]=l.y,o[s+2]=l.z)}e.geometry.setAttribute("extrudeNormal",new _n(o,3))}(e)}function rR(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),r=[En.seededRandom(i),En.seededRandom(i+1e4),En.seededRandom(i+2e4)];for(let o=0;o<t.length;o++)n[o]=r[o%3];e.geometry.setAttribute("randomColor",new ui(n,3))}var Uh=new ls,j_=new te;function n5e(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"Mesh"===i.type&&"SubdivGeometry"===i.geometry.type&&(t=!0)}),t}var V_=class extends Ka{constructor(e,t,n){super(e,t,n),this.data=t,this.hiddenMatrixOld=new qt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return void 0!==this.localGeometry?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return void 0!==this.localGeometry?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let n=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(e){if(!0===this.skipReactionUpdate)return;let t=this.localGeometry?.uuid,{originalGeometry:n,subdividedGeometry:i,subdivPointer:r}=vl.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,void 0!==n&&(this.originalGeometry?.dispose(),this.originalGeometry=n),void 0!==i&&(this.subdividedGeometry?.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,iR(this),rR(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),void 0!==e.flatShading){let n=this.material;this.material=Array.isArray(n)?n.map(i=>i.getFlavor(!1,i.side,i.wireframe)):n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){vl.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&vl.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=vl.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=vl.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,yl.prototype.raycast.call(this,e,t),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new Fl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let n=e.boundingSphere.center;Uh.setFromBufferAttribute(e.attributes.position),Uh.getCenter(n),e.boundingSphere.radius=n.distanceTo(Uh.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Uh.getSize(j_),this.hasNonUniformScale&&j_.divide(this.scale);let i={width:j_.x,height:j_.y,depth:j_.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Uh.min.set(e[0],e[2],e[4]),Uh.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Uh.min.applyMatrix4(this.shearScaleInv),Uh.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new Fl);let n=t.boundingSphere.center;Uh.getCenter(n),t.boundingSphere.radius=n.distanceTo(Uh.max)}freeSubdivPointer(){this.subdivPointer&&(vl.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,this.originalGeometry?.dispose(),this.subdividedGeometry?.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),this.localGeometry&&this.createGeometryByControls(t)}},r5e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},o5e={polygon_center:0,edge:1,vertex:2},y2=(e,t)=>(n,i)=>t&&0!==n&&0!==e?e*i/100:0,Ni=(e,t)=>{let n=Math.abs(t),i=-1*n;return(e- -1)*(n-i)/2+i},a5e=new te,b2=new te,l5e=new te,c5e=new te;function y1(e,t){let n=l5e.fromArray(e),i=c5e.fromArray(t);b2.copy(i).sub(n);let r=b2.length();return b2.normalize().multiplyScalar(.5*r),a5e.copy(n).add(b2).toArray()}var $c=new wa,_2=new te,x2=new te,Cg=new te,oR=e=>.5*(1-Math.cos(e*Math.PI)),m$=new te,g$=new qt,v$=new rv;function y$(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"Mesh"===i.type&&("TextGeometry"===i.geometry.type||"InputGeometry"===i.geometry.type)&&(t=!0)}),t}var jh,b$,_$,x$,sR=class extends Ka{constructor(e,t,n){super(e,t,n),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){let e=this.dataPatched;return this.font?.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign)??0}get fontScale(){return this.font?this.dataPatched.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){return(this.font?.ascender??1)*this.fontScale}get descender(){return(this.font?.descender??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:n}=this;if(!isNaN(e.ray.origin.x)&&0!==this.scale.x&&0!==this.scale.y&&0!==this.scale.z&&(g$.copy(n).invert(),v$.copy(e.ray).applyMatrix4(g$),v$.intersectBox(this.singleBBox,m$))){let i=m$.applyMatrix4(n),r=e.ray.origin.distanceTo(i);t.push({distance:r,point:i.clone(),object:this})}}},Cl=1e-4,C$=new te,w$=new te;zY.then(e=>{b$=[(jh=e).get_face_center,jh.get_edge_midpoint,jh.get_vertex_position],_$=[jh.get_face_normal,jh.get_edge_normal,jh.get_vertex_normal],x$=[jh.face_count,jh.edge_count,jh.vertex_count]});var g5e=new qt,v5e=new qt,Af=new te,C2=new te,H_=new te,aR=new te,y5e=new te,b5e=new te,ip=new class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,n=0){if(null==this.perlin){this.perlin=new Array(4096);for(let b=0;b<4096;b++)this.perlin[b]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);let c,d,g,v,y,i=Math.floor(e),r=Math.floor(t),o=Math.floor(n),s=e-i,a=t-r,l=n-o,h=0,p=.5;for(let b=0;b<4;b++){let P=i+(r<<4)+(o<<8);c=oR(s),d=oR(a),g=this.perlin[4095&P],g+=c*(this.perlin[P+1&4095]-g),v=this.perlin[P+16&4095],v+=c*(this.perlin[P+16+1&4095]-v),g+=d*(v-g),P+=256,v=this.perlin[4095&P],v+=c*(this.perlin[P+1&4095]-v),y=this.perlin[P+16&4095],y+=c*(this.perlin[P+16+1&4095]-y),v+=d*(y-v),g+=oR(l)*(v-g),h+=g*p,p*=.5,i<<=1,s*=2,r<<=1,a*=2,o<<=1,l*=2,s>=1&&(i++,s--),a>=1&&(r++,a--),l>=1&&(o++,l--)}return h}noiseSeed(e){let t=(()=>{let n,i;return{setSeed(r){i=n=(r??4294967296*Math.random())>>>0},getSeed:()=>n,rand:()=>(i=(1664525*i+1013904223)%4294967296,i/4294967296)}})();t.setSeed(e),this.perlin=new Array(4096);for(let n=0;n<4096;n++)this.perlin[n]=t.rand()}},Ld=class extends(JI(Fr)){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(null===this.parent)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Qa&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Qa&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){"toObject"!==this.parameters.type&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(t=void 0!==e?e:"grid"===this.parameters.type?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,"toObject"===this.parameters.type&&!this.parameters.toObject.object&&(t=0),"toObject"===this.parameters.type&&this.objectForSample){for(let i=0,r=this.children.length;i<r;++i)this.remove(this.children[0]);let n=this.children;if(n.length===t)return;if(n.length<t)for(let i=0,r=t-n.length;i<r;++i){let o=new Qa(this.object);o.expand(),this.add(o)}else for(let i=0,r=n.length-t;i<r;++i)this.remove(n[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let n=0,i=t-this.children.length;n<i;++n){let r=new Qa(this.object);r.expand(),this.add(r)}else for(let n=0,i=this.children.length-t;n<i;++n)this.remove(this.children[0])}}_updateRadial(e){let s,t=e.radial,n=t.start*En.DEG2RAD,r=n-t.end*En.DEG2RAD,o=new js(t.rotation[0],t.rotation[1],t.rotation[2]);switch(t.axis){case"z":s=new te(0,0,1);break;case"y":s=new te(0,1,0);break;default:s=new te(1,0,0)}let a=e.randomnessObject??ff.defaultData([1,1,1]).randomnessObject,l="perlin"===a.noiseType;ip.noiseSeed(a.seed);let c=ZI((0,O_.default)(a.seed)),d=y2(a.strength,this.parameters.randomness);for(let[h,p]of this.children.entries()){let g=h*(a.freqScale/10)+a.movement,v=l?ip.noise(g):c(g,g),y=h+1;p.scale.x=t.scale[0]+d(y,Ni(v,a.scale[0]))||Cl,p.scale.y=t.scale[1]+d(y,Ni(v,a.scale[1]))||Cl,p.scale.z=t.scale[2]+d(y,Ni(v,a.scale[2]))||Cl,p.position.setScalar(0);let b=r/e.count*h-n;switch(t.axis){case"x":p.rotation.set(0,b,0);break;case"y":p.rotation.set(0,0,b);break;case"z":p.rotation.set(b,0,0)}p.translateOnAxis(s,t.radius),p.position.x+=t.position[0]+d(y,Ni(v,a.position[0])),p.position.y+=t.position[1]+d(y,Ni(v,a.position[1])),p.position.z+=t.position[2]+d(y,Ni(v,a.position[2]));let P=d(y,Ni(v,a.rotation[0])),S=d(y,Ni(v,a.rotation[1])),O=d(y,Ni(v,a.rotation[2]));!0===t.alignment?(p.rotation.x+=o.x+P,p.rotation.y+=o.y+S,p.rotation.z+=o.z+O):p.rotation.set(o.x+P,o.y+S,o.z+O)}}_updateLinear(e){if("linear"!==e.type)throw new Error;let t=e.linear,n=new js(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??ff.defaultData([1,1,1]).randomnessObject,r="perlin"===i.noiseType;ip.noiseSeed(i.seed);let o=ZI((0,O_.default)(i.seed)),s=y2(i.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(i.freqScale/10)+i.movement,d=r?ip.noise(c):o(c,c),h=a+1,p=s(h,Ni(d,i.rotation[0])),g=s(h,Ni(d,i.rotation[1])),v=s(h,Ni(d,i.rotation[2]));l.scale.x=1+(t.scale[0]-1)*a+s(h,Ni(d,i.scale[0]))||Cl,l.scale.y=1+(t.scale[1]-1)*a+s(h,Ni(d,i.scale[1]))||Cl,l.scale.z=1+(t.scale[2]-1)*a+s(h,Ni(d,i.scale[2]))||Cl,l.rotation.x=n.x*a+p,l.rotation.y=n.y*a+g,l.rotation.z=n.z*a+v,l.position.x=t.position[0]*a+s(h,Ni(d,i.position[0])),l.position.y=t.position[1]*a+s(h,Ni(d,i.position[1])),l.position.z=t.position[2]*a+s(h,Ni(d,i.position[2]))}}_updateGrid(e){let t=0,n=e.grid,i=e.randomnessObject??ff.defaultData([1,1,1]).randomnessObject,r=y2(i.strength,this.parameters.randomness),o="perlin"===i.noiseType;ip.noiseSeed(i.seed);let s=function HIe(e=Math.random){let t=Qq(e),n=new Float64Array(t).map(o=>KI[o%12*3]),i=new Float64Array(t).map(o=>KI[o%12*3+1]),r=new Float64Array(t).map(o=>KI[o%12*3+2]);return function(o,s,a){let l,c,d,h,X,Y,Z,ee,oe,ce,p=.3333333333333333*(o+s+a),g=D_(o+p),v=D_(s+p),y=D_(a+p),b=(g+v+y)*Rh,A=o-(g-b),H=s-(v-b),U=a-(y-b);A>=H?H>=U?(X=1,Y=0,Z=0,ee=1,oe=1,ce=0):A>=U?(X=1,Y=0,Z=0,ee=1,oe=0,ce=1):(X=0,Y=0,Z=1,ee=1,oe=0,ce=1):H<U?(X=0,Y=0,Z=1,ee=0,oe=1,ce=1):A<U?(X=0,Y=1,Z=0,ee=0,oe=1,ce=1):(X=0,Y=1,Z=0,ee=1,oe=1,ce=0);let de=A-X+Rh,he=H-Y+Rh,Pe=U-Z+Rh,we=A-ee+2*Rh,_e=H-oe+2*Rh,ve=U-ce+2*Rh,ke=A-1+.5,ze=H-1+.5,Le=U-1+.5,Ne=255&g,$e=255&v,Be=255&y,Xe=.6-A*A-H*H-U*U;if(Xe<0)l=0;else{let yt=Ne+t[$e+t[Be]];Xe*=Xe,l=Xe*Xe*(n[yt]*A+i[yt]*H+r[yt]*U)}let Ge=.6-de*de-he*he-Pe*Pe;if(Ge<0)c=0;else{let yt=Ne+X+t[$e+Y+t[Be+Z]];Ge*=Ge,c=Ge*Ge*(n[yt]*de+i[yt]*he+r[yt]*Pe)}let gt=.6-we*we-_e*_e-ve*ve;if(gt<0)d=0;else{let yt=Ne+ee+t[$e+oe+t[Be+ce]];gt*=gt,d=gt*gt*(n[yt]*we+i[yt]*_e+r[yt]*ve)}let Ze=.6-ke*ke-ze*ze-Le*Le;if(Ze<0)h=0;else{let yt=Ne+1+t[$e+1+t[Be+1]];Ze*=Ze,h=Ze*Ze*(n[yt]*ke+i[yt]*ze+r[yt]*Le)}return 32*(l+c+d+h)}}((0,O_.default)(i.seed));if(!0===n.useCenter){let a={x:n.count[0]%2==0?2:1,y:n.count[1]%2==0?2:1,z:n.count[2]%2==0?2:1},l=new te(n.size[0]*(n.count[0]-a.x)*.5,n.size[1]*(n.count[1]-a.y)*.5,n.size[2]*(n.count[2]-a.z)*.5);for(let c=0;c<n.count[0];c++)for(let d=0;d<n.count[1];d++)for(let h=0;h<n.count[2];h++){let p=[(c+1)*(i.freqScale/10)+i.movement,(d+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement],g=o?ip.noise(...p):s(...p),v=this.children[t++];v.scale.x=1+r(t,Ni(g,i.scale[0]))||Cl,v.scale.y=1+r(t,Ni(g,i.scale[1]))||Cl,v.scale.z=1+r(t,Ni(g,i.scale[2]))||Cl;let y=r(t,Ni(g,i.rotation[0])),b=r(t,Ni(g,i.rotation[1])),P=r(t,Ni(g,i.rotation[2]));v.rotation.set(y,b,P),v.position.x=n.size[0]*c-l.x+r(t,Ni(g,i.position[0])),v.position.y=n.size[1]*d-l.y+r(t,Ni(g,i.position[1])),v.position.z=n.size[2]*h-l.z+r(t,Ni(g,i.position[2]))}}else for(let a=0;a<n.count[0];a++)for(let l=0;l<n.count[1];l++)for(let c=0;c<n.count[2];c++){let d=[(a+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement],h=o?ip.noise(...d):s(...d),p=this.children[t++];p.scale.x=1+r(t,Ni(h,i.scale[0]))||Cl,p.scale.y=1+r(t,Ni(h,i.scale[1]))||Cl,p.scale.z=1+r(t,Ni(h,i.scale[2]))||Cl;let g=r(t,Ni(h,i.rotation[0])),v=r(t,Ni(h,i.rotation[1])),y=r(t,Ni(h,i.rotation[2]));p.rotation.set(g,v,y),p.position.x=n.size[0]*a+r(t,Ni(h,i.position[0])),p.position.y=-n.size[1]*l+r(t,Ni(h,i.position[1])),p.position.z=-n.size[2]*c+r(t,Ni(h,i.position[2]))}}_updateToObject(e){if("toObject"!==e.type)throw new Error;let{toObject:t}=e,n=new js(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??ff.defaultData([1,1,1]).randomnessObject,r="perlin"===i.noiseType;ip.noiseSeed(i.seed);let o=ZI((0,O_.default)(i.seed)),s=y2(i.strength,this.parameters.randomness);if(!t.object){for(let[,y]of this.children.entries())y.position.set(0,0,0),y.scale.setScalar(1),y.rotation.set(0,0,0);return void(this.objectForSample=void 0)}if(!this.objectForSample)return;if(this.objectForSample instanceof sR){if(!this.objectForSample.font?.isLoaded||void 0===this.objectForSample.geometry.attributes.position)return void(this._pendingMediaLoad=!0);this._pendingMediaLoad=!1}if(void 0===this.objectForSample.geometry&&this.objectForSample.isAncestorOf(this.object.uuid))return void console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);let a=this.getSubdivData(),l=[],c=y=>{let b=y.length;return[y.map(A=>A[0]).reduce((A,H)=>A+H,0)/b,y.map(A=>A[1]).reduce((A,H)=>A+H,0)/b,y.map(A=>A[2]).reduce((A,H)=>A+H,0)/b]},d=y=>Math.round(1e6*y)/1e6;a.forEach(y=>{let b=a.filter(P=>d(y.pos[0])===d(P.pos[0])&&d(y.pos[1])===d(P.pos[1])&&d(y.pos[2])===d(P.pos[2]));l.push(b.length>1?{pos:y.pos,norm:c(b.map(P=>P.norm))}:y)});let h=function s5e(e){let t=[],n={};for(var i=0,r=e.length;i<r;i++){var o=JSON.stringify(e[i].pos.map(s=>Math.round(1e4*s)/1e4));n[o]||(t.push(e[i]),n[o]=!0)}return t}(l);if(h.length>0){let y=Math.round(h.length*t.count/100);this._updateCount(y)}else{let y=this.objectForSample.geometry.getAttribute("position");if(!y||isNaN(y.count)||0===y.count)return void console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`)}this.objectForSample.updateMatrixWorld();let p=new class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let r=1;Rd.a.fromBufferAttribute(e,i),Rd.b.fromBufferAttribute(e,i+1),Rd.c.fromBufferAttribute(e,i+2),r*=Rd.getArea(),t[i/3]=r}this.distribution=new Float32Array(e.count/3);let n=0;for(let i=0;i<t.length;i++)n+=t[i],this.distribution[i]=n;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,n=0,i=t.length-1,r=-1;for(;n<=i;){let o=Math.ceil((n+i)/2);if(0===o||t[o-1]<=e&&t[o]>e){r=o;break}e<t[o]?i=o-1:n=o+1}return r}sampleFace(e,t,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),Rd.a.fromBufferAttribute(this.positionAttribute,3*e),Rd.b.fromBufferAttribute(this.positionAttribute,3*e+1),Rd.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(Rd.a,i).addScaledVector(Rd.b,r).addScaledVector(Rd.c,1-(i+r)),Rd.getNormal(n),this}}(this.objectForSample).build(),g=r5e[t.axis],v=this.children;p.setRandomGenerator((0,O_.default)(this.object.uuid+t.seed));for(let[y,b]of v.entries()){let P=y*(i.freqScale/10)+i.movement,S=r?ip.noise(P):o(P,P),O=y+1,A=s(O,Ni(S,i.rotation[0])),H=s(O,Ni(S,i.rotation[1])),U=s(O,Ni(S,i.rotation[2]));"random"===t.spreadType?p.sample(H_,aR):(h.length&&(H_.fromArray(h[y].pos),aR.fromArray(h[y].norm)),this.objectForSample instanceof V_&&H_.applyMatrix4(g5e.copy(this.objectForSample.matrixWorld).invert())),H_.applyMatrix4(this.object.hiddenMatrix.clone().invert()),b.position.copy(H_),Af.fromArray(g);let X="normal"===t.align?aR:this.object.getWorldDirection(b5e),Y=C2.fromArray(t.position);C2.x+=s(O,Ni(S,i.position[0])),C2.y+=s(O,Ni(S,i.position[1])),C2.z+=s(O,Ni(S,i.position[2]));let Z=Math.acos(X.dot(Af)),ee=y5e.crossVectors(Af,X).normalize(),oe=v5e.makeRotationAxis(ee,Z),ce=X.clone().cross(this.object.up).normalize(),de=ce.clone().cross(X).normalize(),he=(new qt).makeBasis(ce,X,de),Pe=new te(Af.y,Af.z,Af.x).normalize(),we=Pe.clone().cross(Af).normalize(),_e=(new qt).makeBasis(Pe,Af,we).invert(),ve=(new qt).multiplyMatrices(he,_e);b.rotation.setFromRotationMatrix(ve),Y.applyMatrix4(oe),b.position.add(Y),b.rotation.x=b.rotation.x+n.x+A,b.rotation.y=b.rotation.y+n.y+H,b.rotation.z=b.rotation.z+n.z+U,b.scale.setScalar(1),b.scale.x=b.scale.x+t.scale[0]+s(O,Ni(S,i.scale[0]))||Cl,b.scale.y=b.scale.y+t.scale[1]+s(O,Ni(S,i.scale[1]))||Cl,b.scale.z=b.scale.z+t.scale[2]+s(O,Ni(S,i.scale[2]))||Cl,b.scale.multiply(this.object.scale),b.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if("random"===e)return[];if(this.objectForSample instanceof V_){let t=this.objectForSample,n=o5e[e],r=b$[n],o=_$[n],s=[],a=(0,x$[n])(t.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=r(t.subdivPointerNew,l),d=o(t.subdivPointerNew,l);C$.fromArray(c).applyMatrix4(t.matrixWorld),w$.fromArray(d),s.push({pos:C$.toArray(),norm:w$.toArray()})}return s}return(this.objectForSample.geometry.index?function d5e(e){let t=[];for(let n=0;n<=e.index.count;n++)if(_2.fromArray(e.index.array,3*n),$c.setFromAttributeAndIndices(e.attributes.position,_2.x,_2.y,_2.z),$c.getNormal(x2),$c.getMidpoint(Cg),!(isNaN(Cg.x)||isNaN(Cg.y)||isNaN(Cg.z))){let{a:i,b:r,c:o}=$c,s=i.toArray(),a=r.toArray(),l=o.toArray(),c=i.distanceTo(r),d=r.distanceTo(o),h=o.distanceTo(i),p=y1(s,a),g=y1(a,l),v=y1(l,s),y=[c,d,h],b=Math.max(...y),P=y.filter(A=>Math.round(A)===Math.round(b)).length>1,S=[],O=$c.getMidpoint(Cg).toArray();b===c&&!P&&(S=[g,v,v],O=p),b===d&&!P&&(S=[p,v,v],O=g),b===h&&!P&&(S=[p,g,g],O=v),P&&(S=[p,g,v]),t.push({vertices:[s,a,l],faceCenters:S,midpoint:O,norm:$c.getNormal(x2).toArray()})}return t}(this.objectForSample.geometry):function h5e(e){let t=[],{position:n}=e.attributes;for(let i=0;i<n.count;i++){$c.setFromAttributeAndIndices(n,3*i,3*i+1,3*i+2),$c.getNormal(x2),$c.getMidpoint(Cg);let r=$c.a.toArray(),o=$c.b.toArray(),s=$c.c.toArray();t.push({vertices:[r,o,s],faceCenters:[y1(r,o),y1(o,s),y1(s,r)],midpoint:Cg.toArray(),norm:x2.toArray()})}return t}(this.objectForSample.geometry)).map((t,n)=>"polygon_center"===e?{pos:t.midpoint,norm:t.norm}:"vertex"===e?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:"edge"===e?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){if(this.parameters=ZM(e),"toObject"!==this.parameters.type)(null===this.parent||this.parent!==this.object)&&(this.removeFromParent(),this.object.parent?.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(null===this.parent||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let n=t.find(this.parameters.toObject.object);this.objectForSample=n instanceof yl?n:void 0,this.matrix=new qt,this.hiddenMatrix=new qt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,n&&n.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},G_=e=>{var t;return(t=class extends e{}).geometryHelper=new Dd(30,30,30),t},w2=new rv,lR=new Fl,M$=new qt,W_=(e,t,n,i,r=!1,o=e)=>{let s=t,a=o.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),lR.copy(s.boundingSphere),lR.applyMatrix4(a),!1===n.ray.intersectsSphere(lR)||(M$.copy(a).invert(),w2.copy(n.ray).applyMatrix4(M$),null!==s.boundingBox&&!1===w2.intersectsBox(s.boundingBox)))return;let l,c,d,h,y,b,p=s.index,g=s.attributes.position,v=s.drawRange;if(!1===r){for(y=Math.max(0,v.start),b=Math.min(p.count,v.start+v.count);y<b;y+=3)if(c=p.getX(y),d=p.getX(y+1),h=p.getX(y+2),l=P(e,n,w2,g,c,d,h),l)return l.faceIndex=Math.floor(y/3),void i.push(l)}else{let S=s.attributes.position,O=new te,A=new te,H=new te,U=new te,X=2,Y=1/((o.scale.x+o.scale.y+o.scale.z)/3),Z=Y*Y;for(let ce=Math.max(0,v.start),de=Math.min(S.count,v.start+v.count)-1;ce<de;ce+=X){if(O.fromBufferAttribute(S,ce),A.fromBufferAttribute(S,ce+1),w2.distanceSqToSegment(O,A,U,H)>Z)continue;U.applyMatrix4(o.matrixWorld);let he=n.ray.origin.distanceTo(U);he<n.near||he>n.far||i.push({distance:he,point:H.clone().applyMatrix4(o.matrixWorld),object:e})}}function P(S,O,A,H,U,X,Y){let Z=new te,ee=new te,oe=new te,ce=new te,de=new te;if(Z.fromBufferAttribute(H,U),ee.fromBufferAttribute(H,X),oe.fromBufferAttribute(H,Y),null===A.intersectTriangle(Z,ee,oe,!1,ce))return null;de.copy(ce),de.applyMatrix4(S.matrixWorld);let he=O.ray.origin.distanceTo(de);return he<O.near||he>O.far?null:{faceIndex:1,distance:he,point:de.clone(),object:S}}},M2=new te,Qc=new Xm,_5e=class extends jb{constructor(e){let t=new Xn,n=new rf({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},s=new ni(15711266),a=new ni(15711266),l=new ni(2857471);function c(h,p,g){d(h,g),d(p,g)}function d(h,p){i.push(0,0,0),r.push(p.r,p.g,p.b),void 0===o[h]&&(o[h]=[]),o[h].push(i.length/3-1)}c("n1","n2",s),c("n2","n4",s),c("n4","n3",s),c("n3","n1",s),c("f1","f2",s),c("f2","f4",s),c("f4","f3",s),c("f3","f1",s),c("n1","f1",s),c("n2","f2",s),c("n3","f3",s),c("n4","f4",s),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),t.setAttribute("position",new _n(i,3)),t.setAttribute("color",new _n(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;Qc.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let o=.8;Bd("n1",t,e,Qc,-1,-1,o),Bd("n2",t,e,Qc,1,-1,o),Bd("n3",t,e,Qc,-1,1,o),Bd("n4",t,e,Qc,1,1,o);let s=o;Bd("f1",t,e,Qc,-1,-1,s),Bd("f2",t,e,Qc,1,-1,s),Bd("f3",t,e,Qc,-1,1,s),Bd("f4",t,e,Qc,1,1,s),Bd("u1",t,e,Qc,.35,1.1,.8),Bd("u2",t,e,Qc,-.35,1.1,.8),Bd("u3",t,e,Qc,0,1.55,.8),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Bd(e,t,n,i,r,o,s){M2.set(r,o,s).unproject(i);let a=t[e];if(void 0!==a){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],M2.x,M2.y,M2.z)}}var cR,x5e=class extends(G_(_5e)){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){W_(this.object,this.geometry,e,t,!0)}};(e=>{e.is=t=>"objectHelper"in t})(cR||(cR={}));var b1=(e,t)=>class extends(rk(e)){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof BM&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof Dd?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof BM&&(i.visible=!1)}}},_1=new te,dR=new te,hR=new _i,uR=new te,q_=new te,pR=new te,Za=class extends(b1(Xm,x5e)){constructor(e="",t={...f_.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=zv.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new qt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,i=this.height;this.orthoCamera=new fM(-.5*n,.5*n,.5*i,-.5*i,-5e4,1e4),this.perspCamera=new Xa(45,n/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,n){"number"==typeof e&&(e=new te(e,t,n)),super.lookAt(e),this.getWorldPosition(_1),this.targetOffset=_1.distanceTo(e)}getTarget(e=new te){return this.getWorldDirection(dR),this.getWorldPosition(_1),dR.multiplyScalar(this.targetOffset),e.copy(_1).add(dR),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(_1),_1.distanceTo(e)}updateUp(){this.getWorldQuaternion(hR),uR.set(0,0,1).applyQuaternion(hR),q_.copy(Fr.DEFAULT_UP),this.isUpVectorFlipped&&q_.negate(),q_.applyQuaternion(hR),pR.copy(Fr.DEFAULT_UP).projectOnPlane(uR),this.angleOffsetFromUp=pR.angleTo(q_),this.angleOffsetFromUp*=pR.cross(q_).dot(uR)>=0?1:-1}updateTransformState(e,t){let n=super.updateTransformState(e,t);return void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),n}getViewFrontToObject(e){let t=e.getWorldPosition(new te),n=e.getWorldDirection(new te).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new te).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new te;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,n=!1){if(this.aspect=e/t,n){let i=e>t?this.aspect:1,r=e>t?1:this.aspect;this.left=-395*i,this.right=395*i,this.top=1/r*395,this.bottom=1/r*-395}else this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,n,i,r,o){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,n,i,r,o):this.orthoCamera.setViewOffset(e,t,n,i,r,o)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return F3(t,e)}updateCameraSubtype(e,t){let n="perspective"===e?"PerspectiveCamera":"OrthographicCamera";void 0!==t.zoom&&this.setZoom(n,t.zoom),void 0!==t.near&&this.setNear(n,t.near),void 0!==t.fov&&"PerspectiveCamera"===n&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),void 0!==e.far&&(this.far=e.far),void 0!==e.orthographic&&this.updateCameraSubtype("orthographic",e.orthographic),void 0!==e.perspective&&this.updateCameraSubtype("perspective",e.perspective),void 0!==e.type&&(this.cameraType=e.type),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&0===e.type&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},x1=new qt,C5e=new qt;function P$(e){let t=!1;return e.scene.objects.traverse((n,i)=>{"BooleanGeometry"===i.geometry?.type&&(t=!0)}),t}var fR,wg=class extends v1{constructor(e,t,n){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Xn,this.onAfterRender=(i,r,o,s,a,l)=>{super.onAfterRender(i,r,o,s,a,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),1===e.path.length&&"geometry"===e.path[0]&&0===e.type&&void 0!==e.props.operation&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){if(-1!==this.booleanMeshSetAddress&&!e)return;for(let i=0;i<this.children.length;i++){let r=this.children[i];r instanceof wg&&!0===r.dataPatched.visible&&r.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(let i=0;i<this.children.length;i++){let r=this.children[i];if(r instanceof yl&&!0===r.dataPatched.visible&&r.geometry.attributes.position?.count>0&&r.geometry.drawRange.count>0&&0!==r.booleanMeshSetAddress){x1.multiplyMatrices(r.hiddenMatrix,r.matrix);try{if(-1===r.booleanMeshSetAddress){if((r.geometry.index??r.geometry.getAttribute("position")).count/3<15e5&&(r.booleanMeshSetAddress=Zu.getMeshSet(r.geometry,!0===e,t)),-1===r.booleanMeshSetAddress)return;Zu.transformMeshSet(r.booleanMeshSetAddress,x1),r.booleanMatrixInvOld.copy(x1).invert(),r.booleanWasTransformed=!1}else r instanceof wg&&!0===r.needsTransformForDownstream?(Zu.transformMeshSet(r.booleanMeshSetAddress,x1),r.needsTransformForDownstream=!1):!0===r.booleanWasTransformed&&(Zu.transformMeshSet(r.booleanMeshSetAddress,C5e.multiplyMatrices(x1,r.booleanMatrixInvOld)),r.booleanMatrixInvOld.copy(x1).invert(),r.booleanWasTransformed=!1)}catch(o){console.error(o),r.booleanMeshSetAddress=0,r.geometry.userData.booleanOperationDidFail=!0;continue}!1===Zu.hasOpenEdges(r.booleanMeshSetAddress)||i===this.children.length-1&&2===this.booleanOp?(this.meshSetAddresses.push(r.booleanMeshSetAddress),r.geometry.userData.booleanOperationDidFail=!1):r.geometry.userData.booleanOperationDidFail="openEdges"}}if(0===this.meshSetAddresses.length)return this.geometry.setAttribute("position",new _n([],0)),void this.geometry.setDrawRange(0,0);if(!0===e)return Zu.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new Xn,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=Zu.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(i){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(i)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,iR(this),rR(this)}dispose(){super.dispose(),this.geometry.dispose()}};(e=>{e.is=function t(n){return dr.is(n)&&n instanceof $b}})(fR||(fR={}));var mR=(e,t)=>class extends(b1(e,t)){updateState_Light(n,i){this.updateState_Entity(n,i),void 0!==n.color&&(this.color=i.shared.color(n.color)),void 0!==n.intensity&&(this.intensity=n.intensity),void 0!==n.depth&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),void 0!==n.shadows&&(this.castShadow=n.shadows)}},zd=e=>e instanceof yl,rp=e=>null!==e&&e instanceof wg,gR=e=>cR.is(e),P5e=new te(1,1,1),S$=new te,S5e=new te,O$=new _i,Y_=class extends(G_(lMe)){constructor(e,t=15){super(t),this.object=e,this.dummy=new ju,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){W_(this.object,Y_.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(S$,O$,S5e),this.matrix.compose(S$,O$,P5e),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},C1=class extends(b1(ju,Y_)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&1===Object.keys(e).length&&t.scene.reloadSplats()}},S2=class extends(b1(ju,Y_)){constructor(e,t,n){super(),this.super_Entity(e,t),this.context=n,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},X_="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",O2=class extends wr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Lt(null),kernel16:new Lt(null),inputBuffer:new Lt(null),cocBuffer:new Lt(null),texelSize:new Lt(new Ue),scale:new Lt(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}",vertexShader:X_}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let t=new Float32Array(128),n=new Float32Array(32),i=0,r=0;for(let a=0;a<80;++a){let l=2.39996323*a,c=Math.sqrt(a)/Math.sqrt(80),d=c*Math.cos(l),h=c*Math.sin(l);a%5==0?(n[r++]=d,n[r++]=h):(t[i++]=d,t[i++]=h)}let o=[],s=[];for(let a=0;a<128;)o.push(new bi(t[a++],t[a++],t[a++],t[a++]));for(let a=0;a<32;)s.push(new bi(n[a++],n[a++],n[a++],n[a++]));this.uniforms.kernel64.value=o,this.uniforms.kernel16.value=s}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function D$(e,t,n){return e*(t-n)-t}function vR(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var D5e=class extends wr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Lt(null),focusDistance:new Lt(0),focusRange:new Lt(0),cameraNear:new Lt(.3),cameraFar:new Lt(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:X_}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Iu){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-D$(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=vR(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-D$(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=vR(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Xa?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},A$=class extends wr{constructor(e=new Ue){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Lt(null),texelSize:new Lt(new Ue),halfTexelSize:new Lt(new Ue),kernel:new Lt(0),scale:new Lt(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},k5e=class extends wr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Lt(null),opacity:new Lt(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:X_}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},L5e=class extends wr{constructor(e=new Ue,t=2){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:$0.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Lt(null),depthBuffer:new Lt(null),predicationBuffer:new Lt(null),texelSize:new Lt(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Iu){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ud={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},yR=class extends wr{constructor(e,t,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:$0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Lt(null),depthBuffer:new Lt(null),resolution:new Lt(new Ue),texelSize:new Lt(new Ue),cameraNear:new Lt(.3),cameraFar:new Lt(1e3),aspect:new Lt(1),time:new Lt(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Iu){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(Ud.FRAGMENT_HEAD,e.get(Ud.FRAGMENT_HEAD)).replace(Ud.FRAGMENT_MAIN_UV,e.get(Ud.FRAGMENT_MAIN_UV)).replace(Ud.FRAGMENT_MAIN_IMAGE,e.get(Ud.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(Ud.VERTEX_HEAD,e.get(Ud.VERTEX_HEAD)).replace(Ud.VERTEX_MAIN_SUPPORT,e.get(Ud.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Xa?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return Ud}},j5e=class extends wr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:$0.replace(/\D+/g,"")},uniforms:{inputBuffer:new Lt(null),threshold:new Lt(0),smoothing:new Lt(1),range:new Lt(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:X_}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},H5e=class extends wr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Lt(e),inputBuffer:new Lt(null),strength:new Lt(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:X_}),this.toneMapped=!1,this.setColorChannel(0),this.setMaskFunction(0)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==qa&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},q5e=class extends wr{constructor(e=new Ue,t=new Ue){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Lt(null),searchTexture:new Lt(null),areaTexture:new Lt(null),resolution:new Lt(t),texelSize:new Lt(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.resolution.value.set(e,t)}},Y5e=new Xm,Tf=null,wl=class{constructor(e="Pass",t=new _h,n=Y5e){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new Vo(function X5e(){if(null===Tf){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(Tf=new Xn).setAttribute?(Tf.setAttribute("position",new ui(e,3)),Tf.setAttribute("uv",new ui(t,2))):(Tf.addAttribute("position",new ui(e,3)),Tf.addAttribute("uv",new ui(t,2)))}return Tf}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new _h),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Iu){}render(e,t,n,i,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof _h||t===this.renderer)continue;this[e].dispose()}}}},bR=class extends wl{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new k5e,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Or(1,1,{minFilter:Ui,magFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==qa?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Ri&&(this.renderTarget.texture.encoding=Ri))}},$5e=class extends wl{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,i,r){let o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},_R=new ni,xR=class extends wl{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,i,r){let o=this.overrideClearColor,s=this.overrideClearAlpha,a=e.getClearAlpha(),l=null!==o,c=s>=0;l?(_R.copy(e.getClearColor(_R)),e.setClearColor(o,c?s:a)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(_R,a):c&&e.setClearAlpha(a)}},Gl=class extends Ca{constructor(e,t=-1,n=-1,i=1){super(),this.resizable=e,this.base=new Ue(1,1),this.preferred=new Ue(t,n),this.target=this.preferred,this.s=i}get width(){let i,{base:e,preferred:t,scale:n}=this;return i=-1!==t.width?t.width:-1!==t.height?Math.round(t.height*(e.width/Math.max(e.height,1))):Math.round(e.width*n),i}set width(e){this.preferredWidth=e}get height(){let i,{base:e,preferred:t,scale:n}=this;return i=-1!==t.height?t.height:-1!==t.width?Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):Math.round(e.height*n),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(-1),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return-1}},CR=!1,I$=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let n;if(t.material.flatShading)switch(t.material.side){case 2:n=this.materialsFlatShadedDoubleSide;break;case 1:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded}else switch(t.material.side){case 2:n=this.materialsDoubleSide;break;case 1:n=this.materialsBackSide;break;default:n=this.materials}this.originalMaterials.set(t,t.material),t.material=t.isSkinnedMesh?n[2]:t.isInstancedMesh?n[1]:n[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let n of t)n.uniforms=Object.assign({},e.uniforms),n.side=0;t[2].skinning=!0,this.materialsBackSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=1,i}),this.materialsDoubleSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=2,i}),this.materialsFlatShaded=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=1,i}),this.materialsFlatShadedDoubleSide=t.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=2,i})}}render(e,t,n){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,CR){let r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(let o of r)o[0].material=o[1];this.meshCount!==r.size&&r.clear()}else{let r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=i}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return CR}static set workaroundEnabled(e){CR=e}},Q5e=class extends wl{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new xR,this.overrideMaterialManager=null===n?null:new I$(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new I$(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,i,r){let o=this.scene,s=this.camera,a=this.selection,l=s.layers.mask,c=o.background,d=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==a&&s.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,s):e.render(o,s),s.layers.mask=l,o.background=c,e.shadowMap.autoUpdate=d}},k$=class extends wl{constructor(e,t,{resolutionScale:n=1,width:i=Gl.AUTO_SIZE,height:r=Gl.AUTO_SIZE,renderTarget:o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Q5e(e,t,new RV({depthPacking:3201}));let s=this.renderPass;s.skipShadowMapUpdate=!0,s.ignoreBackground=!0;let a=s.getClearPass();a.overrideClearColor=new ni(16777215),a.overrideClearAlpha=1,this.renderTarget=o,void 0===this.renderTarget&&(this.renderTarget=new Or(1,1,{minFilter:Ir,magFilter:Ir,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Gl(this,i,r,n);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,i,r){this.renderPass.render(e,this.renderToScreen?null:this.renderTarget)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},pr=(new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),{SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18}),mFe=new Map([[pr.SKIP,null],[pr.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[pr.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[pr.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[pr.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[pr.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[pr.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[pr.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[pr.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[pr.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[pr.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[pr.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[pr.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[pr.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),gFe=class extends Ca{constructor(e,t=1){super(),this.f=e,this.opacity=new Lt(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return mFe.get(this.blendFunction)}},Hh=class extends Ca{constructor(e,t,{attributes:n=0,blendFunction:i=pr.SCREEN,defines:r=new Map,uniforms:o=new Map,extensions:s=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=a,this.defines=r,this.uniforms=o,this.extensions=s,this.blendMode=new gFe(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Iu){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"object"==typeof t&&"function"==typeof t.dispose){if(t instanceof _h||t===this.renderer)continue;this[e].dispose()}}}};function R$(e,t,n){for(let i of t){let r="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let s of n.entries())null!==s[1]&&n.set(s[0],s[1].replace(o,r))}}function vFe(e,t,n,i,r,o,s){let a=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==a.get("fragment")&&/mainImage/.test(a.get("fragment")),c=void 0!==a.get("fragment")&&/mainUv/.test(a.get("fragment")),d=[],h=[],p=!1,g=!1;if(void 0===a.get("fragment"))console.error("Missing fragment shader",t);else if(c&&0!=(2&s))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||c){let v=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,y=yR.Section;if(c){let P=`\t${e}MainUv(UV);\n`;n.set(y.FRAGMENT_MAIN_UV,n.get(y.FRAGMENT_MAIN_UV)+P),p=!0}if(null!==a.get("vertex")&&/mainSupport/.test(a.get("vertex"))){let P=`\t${e}MainSupport(`;P+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?"vUv);\n":");\n",n.set(y.VERTEX_MAIN_SUPPORT,n.get(y.VERTEX_MAIN_SUPPORT)+P),d=d.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(S=>S[1])),h=h.concat(d).concat([...a.get("vertex").matchAll(v)].map(S=>S[1]))}h=h.concat([...a.get("fragment").matchAll(v)].map(P=>P[1])),h=h.concat([...t.defines.keys()].map(P=>P.replace(/\([\w\s,]*\)/g,""))),h=h.concat([...t.uniforms.keys()]),t.uniforms.forEach((P,S)=>o.set(e+S.charAt(0).toUpperCase()+S.slice(1),P)),t.defines.forEach((P,S)=>r.set(e+S.charAt(0).toUpperCase()+S.slice(1),P)),R$(e,h,r),R$(e,h,a);let b=t.blendMode;if(i.set(b.blendFunction,b),l){let P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,S=`${e}MainImage(color0, UV, `;0!=(1&s)&&P.test(a.get("fragment"))&&(S+="depth, ",g=!0),S+="color1);\n\t";let O=e+"BlendOpacity";o.set(O,b.opacity),S+=`color0 = blend${b.blendFunction}(color0, color1, ${O});\n\n\t`,n.set(y.FRAGMENT_MAIN_IMAGE,n.get(y.FRAGMENT_MAIN_IMAGE)+S),S=`uniform float ${O};\n\n`,n.set(y.FRAGMENT_HEAD,n.get(y.FRAGMENT_HEAD)+S)}n.set(y.FRAGMENT_HEAD,n.get(y.FRAGMENT_HEAD)+a.get("fragment")+"\n"),null!==a.get("vertex")&&n.set(y.VERTEX_HEAD,n.get(y.VERTEX_HEAD)+a.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:d,transformedUv:p,readDepth:g}}var D2=class extends wl{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new yR(null,null,null,e),this.effects=t.sort((n,i)=>i.attributes-n.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=yR.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,o=new Set,s=0,a=0,l=0,c=!1,d=!1;for(let p of this.effects)if(p.blendMode.blendFunction===pr.SKIP)l|=1&p.getAttributes();else if(0!=(l&p.getAttributes()&2))console.error("Convolution effects cannot be merged",p);else{l|=p.getAttributes();let v=vFe("e"+s++,p,t,n,i,r,l);if(a+=v.varyings.length,c=c||v.transformedUv,d=d||v.readDepth,null!==p.extensions)for(let y of p.extensions)o.add(y)}let h=/\bblend\b/g;for(let p of n.values()){let g=p.getShaderCode().replace(h,`blend${p.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+g+"\n")}0!=(1&l)?(d&&t.set(e.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,c?(t.set(e.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((p,g,v)=>v.set(g,p.trim().replace(/^#/,"\n#"))),this.uniformCount=r.size,this.varyingCount=a,this.skipRendering=0===s,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(o).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Iu){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,i,r){for(let o of this.effects)o.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let o=this.fullscreenMaterial;o.inputBuffer=t.texture,o.time+=i,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(let i of this.effects)i.initialize(e,t,n),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),void 0!==n&&n!==qa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}},yFe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],wR=class extends wl{constructor({resolutionScale:e=.5,width:t=Gl.AUTO_SIZE,height:n=Gl.AUTO_SIZE,kernelSize:i=A2.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Or(1,1,{minFilter:Ui,magFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new Gl(this,t,n,e);r.addEventListener("change",o=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new A$,this.ditheredBlurMaterial=new A$,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,i,r){let p,g,o=this.scene,s=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=yFe[this.kernelSize],d=this.blurMaterial,h=t;for(this.fullscreenMaterial=d,p=0,g=c.length-1;p<g;++p){let v=0==(1&p)?a:l;d.kernel=c[p],d.inputBuffer=h.texture,e.setRenderTarget(v),e.render(o,s),h=v}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=c[p],d.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(o,s)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==qa?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Ri&&(this.renderTargetA.texture.encoding=Ri,this.renderTargetB.texture.encoding=Ri))}static get AUTO_SIZE(){return Gl.AUTO_SIZE}},bFe=class extends wl{constructor({width:e=Gl.AUTO_SIZE,height:t=Gl.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new j5e(r,i),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new Or(1,1,{minFilter:Ui,magFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let o=this.resolution=new Gl(this,e,t);o.addEventListener("change",s=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,i,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==qa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},_Fe=class extends wl{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new xR(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,i,r){let o=e.getContext(),s=e.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,d=this.inverted?0:1,h=1-d;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.stencil.setFunc(o.ALWAYS,d,4294967295),s.stencil.setClear(h),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(n),e.render(a,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(o.EQUAL,1,4294967295),s.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.stencil.setLocked(!0)}},Kc=class extends wl{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,n,i,r){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){void 0!==n&&n!==qa&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},A2={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},MFe=class extends Hh{constructor({blendFunction:e=pr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:o=Gl.AUTO_SIZE,height:s=Gl.AUTO_SIZE,kernelSize:a=A2.LARGE}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new Lt(null)],["intensity",new Lt(r)]])}),this.renderTarget=new Or(1,1,{minFilter:Ui,magFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new bFe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new wR({resolutionScale:i,width:o,height:s,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e.outputEncoding===Ri&&(this.renderTarget.texture.encoding=Ri))}},SFe=class extends Hh{constructor({blendFunction:e=pr.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new Lt(t)],["contrast",new Lt(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},EFe=class extends Hh{constructor(e=pr.NORMAL){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}},TFe=class extends Hh{constructor({blendFunction:e=pr.NORMAL,offset:t=new Ue(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:2,uniforms:new Map([["offset",new Lt(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},kFe=class extends Hh{constructor(e,{blendFunction:t=pr.NORMAL,worldFocusDistance:n,worldFocusRange:i,focusDistance:r=0,focalLength:o=.1,focusRange:s=o,bokehScale:a=1,width:l=Gl.AUTO_SIZE,height:c=Gl.AUTO_SIZE}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:1,uniforms:new Map([["nearColorBuffer",new Lt(null)],["farColorBuffer",new Lt(null)],["nearCoCBuffer",new Lt(null)],["scale",new Lt(1)]])}),this.camera=e,this.renderTarget=new Or(1,1,{minFilter:Ui,magFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Kc(new D5e(e));let d=this.cocMaterial;d.focusDistance=r,d.focusRange=s,void 0!==n&&(d.worldFocusDistance=n),void 0!==i&&(d.worldFocusRange=i),this.blurPass=new wR({kernelSize:A2.MEDIUM,width:l,height:c});let h=this.blurPass.getResolution();h.addEventListener("change",g=>this.setSize(h.getBaseWidth(),h.getBaseHeight())),this.maskPass=new Kc(new H5e(this.renderTargetCoC.texture));let p=this.maskPass.fullscreenMaterial;p.maskFunction=1,p.colorChannel=1,this.bokehNearBasePass=new Kc(new O2(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Kc(new O2(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Kc(new O2(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Kc(new O2(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of t)n.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return vR(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e,t=Iu){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,n){let i=this.renderTarget,r=this.renderTargetCoC,o=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(null!==this.target){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(e,null,r),this.blurPass.render(e,r,o),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let i=n.width,r=n.height,o=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];o.push(this.renderTargetCoC,this.renderTargetMasked),o.forEach(s=>s.setSize(e,t)),o=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],o.forEach(s=>s.setSize(i,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(s=>s.fullscreenMaterial.setSize(i,r))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,n)),this.blurPass.initialize(e,t,qa),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e.outputEncoding===Ri&&(this.renderTarget.texture.encoding=Ri,this.renderTargetNear.texture.encoding=Ri,this.renderTargetFar.texture.encoding=Ri,this.renderTargetMasked.texture.encoding=Ri))}},NFe=(new te,new qt,class extends Hh{constructor({blendFunction:e=pr.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new Lt(new te)],["saturation",new Lt(n)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}}),LFe=(new ni,class extends Hh{constructor({blendFunction:e=pr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}}),zFe=class extends Hh{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new Lt(!1)],["d",new Lt(new Ue)]])}),this.resolution=new Ue,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},N$=(Math,new te,new te,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),F$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",L$=class extends Hh{constructor({preset:e=1,edgeDetectionMode:t=2,predicationMode:n=0}={}){let i,r;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:pr.NORMAL,attributes:3,uniforms:new Map([["weightMap",new Lt(null)]])}),arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Or(1,1,{minFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new xR(!0,!1,!1),this.clearPass.overrideClearColor=new ni(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Kc(new L5e),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new Kc(new q5e);let o=new uH;o.onLoad=()=>{let s=new jo(i);s.name="SMAA.Search",s.magFilter=Ir,s.minFilter=Ir,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!0,this.weightsMaterial.searchTexture=s;let a=new jo(r);a.name="SMAA.Area",a.magFilter=Ui,a.minFilter=Ui,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),void 0!==i&&void 0!==r?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",()=>o.itemEnd("search")),r.addEventListener("load",()=>o.itemEnd("area")),i.src=N$,r.src=F$),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case 0:t.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case 1:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case 2:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case 3:t.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0}}setDepthTexture(e,t=Iu){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return N$}static get areaImageDataURL(){return F$}},HFe=class extends Hh{constructor({blendFunction:e=pr.NORMAL,technique:t=0,eskil:n=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Lt(i)],["darkness",new Lt(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return 1===this.technique}set eskil(e){this.technique=e?1:0}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}};function PR(e,t,n){return e+(t-e)*n}function Ja(e,t,n,i){let r=PR(e,t,.75),o=PR(n,i,.75);return PR(r,o,.875)}new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),Ja(0,0,0,0),new Float32Array([0,0,0,0]),Ja(0,0,0,1),new Float32Array([0,0,0,1]),Ja(0,0,1,0),new Float32Array([0,0,1,0]),Ja(0,0,1,1),new Float32Array([0,0,1,1]),Ja(0,1,0,0),new Float32Array([0,1,0,0]),Ja(0,1,0,1),new Float32Array([0,1,0,1]),Ja(0,1,1,0),new Float32Array([0,1,1,0]),Ja(0,1,1,1),new Float32Array([0,1,1,1]),Ja(1,0,0,0),new Float32Array([1,0,0,0]),Ja(1,0,0,1),new Float32Array([1,0,0,1]),Ja(1,0,1,0),new Float32Array([1,0,1,0]),Ja(1,0,1,1),new Float32Array([1,0,1,1]),Ja(1,1,0,0),new Float32Array([1,1,0,0]),Ja(1,1,0,1),new Float32Array([1,1,0,1]),Ja(1,1,1,0),new Float32Array([1,1,1,0]),Ja(1,1,1,1),new Float32Array([1,1,1,1]);var op=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=pr.NORMAL}},GFe=class extends op{constructor(){super(MFe),this.blendFunction=pr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},WFe=class extends op{constructor(){super(SFe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},qFe=class extends op{constructor(){super(TFe),this.effect.offset=new Ue(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},YFe=class extends op{constructor(){super(EFe)}},XFe=class extends op{constructor(){super(NFe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},$Fe=class extends op{constructor(){super(LFe),this.blendFunction=pr.OVERLAY}},QFe=class extends op{constructor(){super(HFe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},KFe=class extends op{constructor(e){super(kFe)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&!1===this.isPerspectiveCamera||!e.isPerspectiveCamera&&!0===this.isPerspectiveCamera)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},ZFe=class extends op{constructor(){super(zFe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},SR=class extends wr{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Lt(null)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}",fragmentShader:"#define GLSLIFY 1\nlayout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},iLe=class extends wl{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new SR,this.resolutionVector=new Ue,this.resolveMaterial=new wr({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Lt(null),historyBuffer:new Lt(null),velocityBuffer:new Lt(null),depthBuffer:new Lt(null),resolution:new Lt(new Ue)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\n#include <common>\nvarying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;\n#define USE_YCOCG\n#define USE_CATMULL_ROM\nconst float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){\n#ifdef USE_YCOCG\nvec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);\n#else\nreturn texture(tex,uv);\n#endif\n}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){\n#ifdef CHOOSE_LONGEST_MOTION_VECTOR\nfloat longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;\n#else\nfloat closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;\n#endif\n}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);\n#ifdef USE_CATMULL_ROM\nvec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);\n#else\nvec4 previousColor=sample_color(historyBuffer,previousPixelPos);\n#endif\n#ifdef USE_YCOCG\npreviousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);\n#endif\nvec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);\n#ifdef USE_YCOCG\nvec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;\n#endif\nvec4 previousColorClipped=clamp(previousColor,cmin,cmax);\n#ifdef LUMINANCE_DIFFERENCES\n#ifdef USE_YCOCG\nfloat lum0=currentColor.r;float lum1=previousColorClipped.r;\n#else\nfloat lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);\n#endif\nfloat unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));\n#else\nconst float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);\n#endif\n#ifdef USE_YCOCG\ngl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);\n#else\ngl_FragColor=result;\n#endif\n}"}),this.historyRenderTarget=new Or(1024,1024,{minFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Or(1024,1024,{minFilter:Ui,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let n=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(n),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},rLe=class extends wl{constructor(e,t,n){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new k$(e,t,{renderTarget:n.transmissionDepthTarget}),this.passThroughMaterial=new SR,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new SR,this.depthPass=new k$(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,n){let i=this.camera.layers.mask,r=e;r.setRenderTarget(r.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],r.clear(),r.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,n),r.shadowMap.needsUpdate=!1,r.shadowMap.autoUpdate=!1;let o=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(o),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},B$=new _h,oLe=new wr({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        layout(location = 1) out vec4 gVelocity;\n\n        void main() {\n            gl_FragColor = vec4(0.0);\n\t\t\tgVelocity = vec4(0.0);\n        }\n    "}),OR=class extends wl{constructor(e,t,n){super("OpaquePass",t??B$,n),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??B$}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof yl&&(this.originalMaterials.set(i.id,i.material),i.material=oLe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8),e.setRenderTarget(this.renderToScreen?null:t),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,r)=>{let o=this.scene.getObjectById(r);o&&(o.material=i)})}},aLe=new wr({name:"CombineMaterial",uniforms:{inputBufferA:new Lt(null),inputBufferB:new Lt(null)},blending:0,depthWrite:!1,depthTest:!1,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n    vUv = position.xy * 0.5 + 0.5;\n}\n",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D inputBufferA;\n    uniform sampler2D inputBufferB;\n\n    // TODO: Why do we need these when postpro of framemode is enabled???\n    layout(location = 1) out vec4 gVelocity;\n\n    void main() {\n\tvec4 resA = texture2D(inputBufferA, vUv);\n\tvec4 resB = texture2D(inputBufferB, vUv);\n    float a = resA.a + resB.a * ( 1.0 - resA.a );\n\n\tvec4 res;\n\tres.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));\n\tres.a = resA.a + resB.a * (1.0 - resA.a);\n\tgl_FragColor = res;\n    gVelocity = vec4(0.0);\n    }\n"}),lLe=class extends wl{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=aLe,this.helperPass=new OR(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new OR(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new L$({preset:0,edgeDetectionMode:2});this.effectPass=new D2(this.camera,t),this.rt=new Or(10,10,{minFilter:Ui,magFilter:Ui,wrapS:Ao,wrapT:Ao,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,n){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,n),this.fullscreenMaterial.uniforms.inputBufferA.value=n.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},$_=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],mLe=new wr({vertexShader:"#define GLSLIFY 1\n#include <skinning_pars_vertex>\n#include <morphtarget_pars_vertex>\nout vec3 n;void main(){\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\nvec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}",fragmentShader:"#define GLSLIFY 1\nin vec3 n;void main(){gl_FragColor=vec4(n,1.0);}"}),w1=new wr({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){\n#ifdef DEBUG\nfloat d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);\n#else\nvec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;\n#endif\n}",uniforms:{texture_ao_lrez:new Lt(null),texture_depth_lrez:new Lt(null),texture_depth_hrez:new Lt(null),near:new Lt(null),far:new Lt(null)}}),gLe=class extends wl{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let n=1024,i=1024;this.gBuffer=new Or(n,i,{type:s_?Tu:Cs,depthTexture:new _v(n,i),minFilter:Ui,magFilter:Ui}),this.depthBufferHighRes=new Or(n,i,{depthTexture:new _v(n,i)}),this.aoBuffer=new Or(n,i,{minFilter:Ui,magFilter:Ui}),this.splineScene=e,this.splineCamera=t;let r=new Float32Array(2*$_.length);for(let s=0;s<$_.length;s++){let a=2*s;r[a+0]=$_[s][0],r[a+1]=$_[s][1]}this.blueNoiseInDiskTexture=new Uc(r,$_.length,1,1030,Cs),this.blueNoiseInDiskTexture.wrapS=Du,this.blueNoiseInDiskTexture.wrapT=Du,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new wr({vertexShader:"#define GLSLIFY 1\nout vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}",fragmentShader:"#define GLSLIFY 1\nin vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}\n#define USE_GBUFFER_NORMALS\nvoid main(){vec3 view_space_p=get_view_position(v_uv);\n#ifdef USE_GBUFFER_NORMALS\nvec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;\n#else\nvec3 view_space_n=-rebuild_normal(v_uv,view_space_p);\n#endif\nfloat radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}",uniforms:{near:new Lt(null),far:new Lt(null),fov:new Lt(null),proj_info:new Lt(new bi),is_ortho:new Lt(!1),resolution:new Lt(new Ue),radius_of_influence:new Lt(8),radius_in_screen_space:new Lt(1),exponent:new Lt(1),ao_color:new Lt(new te),bias:new Lt(.5),texture_depth:new Lt(null),texture_normals:new Lt(null),texture_blue_noise:new Lt(null),texture_blue_noise_in_disk:new Lt(this.blueNoiseInDiskTexture),frame_index:new Lt(0),fog_enabled:new Lt(!1),fog_near:new Lt(1),fog_far:new Lt(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Or(n,i,{minFilter:Ui,magFilter:Ui,wrapS:Ao,wrapT:Ao,depthBuffer:!1,type:Cs});let o=new L$({preset:3,edgeDetectionMode:2});this.effectPass=new D2(this.camera,o)}initialize(e,t,n){super.initialize(e,t,n),this.effectPass.initialize(e,t,n)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let n=this._runHalfRes?.5:1,i=e*n,r=t*n;this.gBuffer.setSize(i,r),this.aoBuffer.setSize(i,r),this.hbaoMaterial.uniforms.resolution.value.set(i,r),this.aaBuffer.setSize(i,r),this.effectPass.setSize(i,r)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,w1.uniforms.texture_depth_hrez.value=e,w1.needsUpdate=!0}render(e,t,n){this.splineScene.overrideMaterial=mLe;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let r=this.splineCamera.perspCamera.projectionMatrix.elements;this.hbaoMaterial.uniforms.proj_info.value.set(2/r[0],2/r[5],-(1-r[8])/r[0],-(1+r[9])/r[5]);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),d=this.hbaoMaterial.uniforms.resolution.value.y/(2*Math.tan(.5*c));this.hbaoMaterial.uniforms.radius_in_screen_space.value=.5*this.hbaoMaterial.uniforms.radius_of_influence.value*d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let r=this.splineCamera.orthoCamera.projectionMatrix.elements,s=2/r[5];this.hbaoMaterial.uniforms.proj_info.value.set(2/r[0],s,-(1+r[12])/r[0],-(1-r[13])/r[5]),this.hbaoMaterial.uniforms.radius_in_screen_space.value=this.hbaoMaterial.uniforms.radius_of_influence.value*(this.hbaoMaterial.uniforms.resolution.value.y/s*.5),this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=w1,w1.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,w1.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,w1.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},bLe=class extends Kc{constructor(){super(new wr({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tMap;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uCoords;\n\n// Draws a rectangle at center <st> with size <size>\nfloat rectangle(vec2 st, vec2 size) {\n    size = vec2(0.5) - size * 0.5;\n    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));\n    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));\n\n    return uv.x * uv.y;\n}\n\nuniform vec2 uSize;\nuniform float uScale;\nuniform float uDPR;\nuniform float uCurrent;\nuniform vec3 uSceneColor;\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n    screenUv *= 1.0 / uDPR;\n\n    vec2 center = vec2(0.5, -0.5);\n    vec2 outsideUv = screenUv;\n    outsideUv += center;\n    outsideUv -= uCoords.xy / uResolution.xy;\n    outsideUv = (outsideUv - 0.5) + 0.5;\n    outsideUv -= center;\n    vec2 s = (uSize / uResolution) * uScale;\n    float isOutside = 1.0 - rectangle(outsideUv, s);\n    \n    vec2 mid = vec2(0.5);\n    vec2 insideUv = (screenUv - mid + s * mid) / s;\n    vec4 background = texture2D(tInput, screenUv);\n    vec4 image = texture2D(tMap, insideUv);\n    gl_FragColor = mix(image, background, isOutside);\n}\n",uniforms:{tInput:new Lt(null),tMap:new Lt(null),uResolution:new Lt(new Ue),uSize:new Lt(new Ue),uCoords:new Lt(new Ue),uScale:new Lt(1),uSceneColor:new Lt(new ni(16711680)),uDPR:new Lt(1),uCurrent:new Lt(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},CLe=[],wLe=class extends Kc{constructor(){super(new wr({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D toScene;\nuniform sampler2D fromScene;\nuniform vec2 resolution;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nuniform float mixRatio;\nuniform sampler2D tMixTexture;\nuniform int useTexture;\nuniform float threshold;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( fromScene, screenUv );\n\tvec4 texel2 = texture2D( toScene, screenUv );\n\n\tif (useTexture==1) {\n\t\t\n\t\tvec4 transitionTexel = texture2D( tMixTexture, screenUv );\n\t\tfloat r = mixRatio * (1.0 + threshold * 2.0) - threshold;\n\t\tfloat mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixf );\n\t} else {\n\t\t\n\t\tgl_FragColor = mix( texel1, texel2, mixRatio );\n\t\t\n\t}\n}\n",uniforms:{toScene:new Lt(null),fromScene:new Lt(null),uResolution:new Lt(new Ue),uDPR:new Lt(1),mixRatio:new Lt(0),threshold:new Lt(.1),useTexture:new Lt(0),tMixTexture:{value:CLe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},SLe=class extends Kc{constructor(){super(new wr({vertexShader:"\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D inputBuffer;\nuniform sampler2D blurredInputBuffer;\nuniform sampler2D overlay;\nuniform float blurIntensity;\n\nuniform vec2 uResolution;\nuniform float uDPR;\n\nvoid main() {\n\tvec2 screenUv = gl_FragCoord.xy / uResolution.xy;\n\tscreenUv *= 1.0 / uDPR;\n\n\tvec4 texel1 = texture2D( overlay, screenUv );\n\tvec4 texel2 = texture2D( inputBuffer, screenUv );\n\tvec4 texel3 = texture2D( blurredInputBuffer, screenUv );\n\n\tfloat blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;\n    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );\n}\n",uniforms:{inputBuffer:new Lt(null),blurredInputBuffer:new Lt(null),overlay:new Lt(null),uResolution:new Lt(new Ue),uDPR:new Lt(1),blurIntensity:new Lt(0)}})),this._blurEnabled=!1,this.blurTarget=new Or(1,1,{minFilter:Ui,magFilter:Ui,wrapS:Ao,wrapT:Ao}),this.blurPass=new wR({width:window.innerWidth,height:window.innerHeight,kernelSize:A2.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,n=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=n,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let n=t.data.backgroundBlur,i=n.radius;this._blurEnabled=n.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=i/3}}render(e,t,n,i,r){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,i,r)),super.render(e,t,n,i,r)}},DLe=class extends Kc{constructor(){super(new wr({vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D tInput;\nuniform sampler2D tOverlayImage;\nvarying vec2 vUv;\nuniform vec2 uResolution;\nuniform vec2 uRightBottom;\nuniform vec2 uImageSize;\nuniform float uScale;\nuniform float uDPR;\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {\n\tvec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);\n\tif (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\n\t\treturn vec4(0.0);\n\t}\n\treturn texture2D(image, uv);\n}\n\nvoid main() {\n    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);\n\tvec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);\n    vec4 background = texture2D(tInput, screenUV);\n    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);\n    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));\n}\n",uniforms:{tInput:new Lt(null),tOverlayImage:new Lt(null),uResolution:new Lt(new Ue),uImageSize:new Lt(new Ue),uRightBottom:new Lt(new Ue(20,20)),uScale:new Lt(.25),uDPR:new Lt(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function z$(e,t){return t&&t.enabled&&e.push(t.effect),e}var ALe=e=>Object.values(pr).includes(e)?e:pr.NORMAL,TLe=class extends Ca{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=EP.defaultData,this._scene=new _h,this._camera=new Za,this.effects=new Map,this.blueNoiseTexture=new Uc,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=yH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=yH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},this.renderer=e,this.debug=!1,this.effects.set("bloom",new GFe),this.effects.set("chromaticAberration",new qFe),this.effects.set("vignette",new QFe),this.effects.set("noise",new $Fe),this.effects.set("colorAverage",new YFe),this.effects.set("hueSaturation",new XFe),this.effects.set("brightnessContrast",new WFe),this.effects.set("depthOfField",new KFe),this.effects.set("pixelation",new ZFe),this.effectComposer=new class{constructor(e,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new bR,this.depthTexture=null,this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return.001*this.delta}getFixedDelta(){return.001*this.fixedDelta}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return.001*this.elapsed}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,n,r,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,n,r,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,n,r,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){let t=e.getSize(new Ue),n=e.getContext().getContextAttributes()?.alpha??!1,i=this.inputBuffer.texture[0].type;i===qa&&e.outputEncoding===Ri&&(this.inputBuffer.texture[0].encoding=Ri,this.outputBuffer.texture[0].encoding=Ri,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(t.width,t.height,!1);for(let r of this.passes)r.initialize(e,n,i)}}replaceRenderer(e,t=!0){let n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(e),t&&null!==i&&(i.removeChild(n.domElement),i.appendChild(e.domElement)),n}createDepthTexture(){let e=this.depthTexture=new _v(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=Hm,e.type=jm):e.type=Au,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i,r,o){let c,s=this.renderer,a=null===s?new Ue:s.getDrawingBufferSize(new Ue),l={minFilter:Ui,magFilter:Ui,wrapS:Ao,wrapT:Ao,stencilBuffer:t,depthBuffer:e};return i>0?(c=new Or(a.width,a.height,l),c.samples=i):(r?(c=new J1e(a.width,a.height,2,l),c.texture[1].type=Tu):c=new Or(a.width,a.height,l),c.depthTexture=new _v(2048,2048),c.depthTexture.type=Cs),n===qa&&null!==s&&s.outputEncoding===Ri&&(Array.isArray(c.texture)?c.texture.forEach(d=>d.encoding=Ri):c.texture.encoding=Ri),Array.isArray(c.texture)?c.texture.forEach((d,h)=>{d.name=`EffectComposer.Buffer ${r} ${h}`,d.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${r}`,c.texture.generateMipmaps=!1),c.name=o,c}addPass(e,t){let s,n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Ue),o=i.getContext().getContextAttributes()?.alpha??!1;if(e.MRTCompatible&&(s=this.inputBuffer.texture[0].type),e.MRTCompatible||(s=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(r.width,r.height),e.initialize(i,o,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let a=this.createDepthTexture();for(e of n)e.setDepthTexture(a)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,n=t.indexOf(e);-1!==n&&t.splice(n,1).length>0&&(null!==this.depthTexture&&(t.reduce((r,o)=>r||o.needsDepthTexture,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)),this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0)))}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let l,c,d,h,t=this.renderer,n=this.copyPass,i=this.inputBuffer,r=this.outputBuffer,o=this.inputBufferSingle,s=this.outputBufferSingle,a=!1;void 0===e&&(e=this.timer.update().getDelta());for(let p of this.passes)p.enabled&&(p.MRTCompatible?p.render(t,i,r,e,a):p.render(t,o,s,e,a),p.needsSwap&&(a&&(n.renderToScreen=p.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),n.render(t,i,r,e,a),c.setFunc(l.EQUAL,1,4294967295)),d=i,h=o,i=r,o=s,r=d,s=h),p instanceof _Fe?a=!0:p instanceof $5e&&(a=!1))}setSize(e,t,n){let i=this.renderer;if(this._width=e,this._height=t,void 0===e||void 0===t){let o=i.getSize(new Ue);e=o.width,t=o.height}i.setSize(e,t,n);let r=i.getDrawingBufferSize(new Ue);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height),this.inputBufferSingle.setSize(r.width,r.height),this.outputBufferSingle.setSize(r.width,r.height);for(let o of this.passes)o.setSize(r.width,r.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),null!==this.inputBufferSingle&&this.inputBufferSingle.dispose(),null!==this.outputBufferSingle&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new OR(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new rLe(this.scene,this.camera,this.renderer),this.aoPass=new gLe(this.scene,this.camera),this.taaPass=new iLe,this.taaPass.renderToScreen=!1,this.helperPass=new lLe(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new bLe,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new SLe,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new DLe,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new wLe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){void 0!==e?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let n=this.effectComposer.passes[t];!0!==n.enabled||e||!this._renderToScreen?n.renderToScreen=!1:(n.renderToScreen=!0,e=!0)}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new Uc(e,128,128),this.blueNoiseTexture.wrapS=Du,this.blueNoiseTexture.wrapT=Du,this.blueNoiseTexture.minFilter=Ir,this.blueNoiseTexture.magFilter=Ir,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,n,i,r,o,s,a){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=n,this.aoPass.aoColor=i,this.aoPass.fogEnabled=r,this.aoPass.fogNear=o,this.aoPass.fogFar=s,this.aoPass.runHalfRes!==!a&&(this.aoPass.runHalfRes=!a)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){if(this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let e=[this.effects.get("pixelation")].reduce(z$,[]);e.length>0&&(this.uvEffectPass=new D2(this.camera,...e),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(z$,[]);if(t.length>0&&(this.effectPass=new D2(this.camera,...t),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&this.effects.get("depthOfField")?.enabled&&void 0!==window)){let n=this.renderer.viewportWidth,i=this.renderer.viewportHeight;this.renderer.setSize(n-1,i-1),this.renderer.setSize(n,i)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new Ue;this.renderer.getDrawingBufferSize(e),this._rt=new Or(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Du,wrapT:Du}),this._rt.samples=0,this._savePass=new bR(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new bR(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(!0===e?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(null!==e?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=null!==e,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...n}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let r of Object.entries(n)){let o=r[1],s=this.effects.get(r[0]);if(s){s.enabled!==o.enabled&&(i=!0),s.enabled=o.enabled;for(let[a,l]of Object.entries(o))"blendFunction"===a?s.blendFunction=ALe(l):s[a]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,n,i){e instanceof bi?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,n,i),this.effectComposer.outputBuffer.scissor.set(e,t,n,i));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(e,t,n,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,n,i){e instanceof bi?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,n,i),this.effectComposer.outputBuffer.viewport.set(e,t,n,i))}resize(e,t,n){if(this.effectComposer.setSize(e,t,n),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.dispose()}},kLe=ji.lights_fragment_begin,RLe=ji.shadowmask_pars_fragment,U$=null,ER=new wr({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n#include <skinning_pars_vertex>\n#include <morphtarget_pars_vertex>\n\t\nvoid main()\n{\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\nvec3 transformed = vec3(position);\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}}),j$=new jo,V$=new Ue,zLe=class extends NV{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Ue,this.dummyCamera=new Za,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(r=!0,o=!0,s=!0)=>{let a=this.getContext(),l=0;r&&(l|=a.COLOR_BUFFER_BIT),o&&(l|=a.DEPTH_BUFFER_BIT),s&&(l|=a.STENCIL_BUFFER_BIT),a.clear(l),a.clearBufferfv(a.COLOR,1,[0,0,0,1])},this.pipeline=new TLe(this,e?.needsDOFResize??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),n=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=1,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(r){console.warn(r)}this.setPixelRatio=r=>{this._pixelRatio!==r&&(this._pixelRatio=r,t(r))},this.setSize=(r,o,s=!0)=>{(this.viewportWidth!==r||this.viewportHeight!==o)&&(this.viewportWidth=r,this.viewportHeight=o,n(r,o,s),this.normalRenderTarget?.setSize(r*this._pixelRatio,o*this._pixelRatio),this._resizeTransmission(r,o),this.transmissionDepthTarget?.setSize(r*this._pixelRatio/2,o*this._pixelRatio/2),this.pipeline.resize(r,o,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){void 0===this.aoRenderTarget&&(this.aoRenderTarget=new Or(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ui,magFilter:Ui,wrapS:Ao,wrapT:Ao,depthBuffer:!1}))}_resizeTransmission(e,t){this.transmissionRenderTarget?.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),this.aoRenderTarget?.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return 1===ai.transmissionLod.value}set hdTransmission(e){ai.transmissionLod.value=!0===e?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new Or(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:K0,magFilter:Ui,wrapS:Ao,wrapT:Ao,depthBuffer:!1}),this.transmissionDepthTarget=new Or(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Ir,magFilter:Ir,depthBuffer:!1}))}createNormalRenderTarget(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new Or(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ir,magFilter:Ir,type:Cs,depthTexture:new _v(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,n){this.normalRenderTarget&&(this.setClearColor(0),n.layers.enable(8),n.layers.disable(0),n.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),ER.uniforms.depthContrast.value=n instanceof Za?(n.far-n.near)/1e4:1,t.overrideMaterial=ER,this.render(t,n),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?KR:null,n.layers.enable(0),n.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,n=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let i=t.height,r=t.width,o=this.viewportWidth/this.viewportHeight;r<i?r=i*o:i=r/o,this.dummyCamera.setViewplaneSize(r,i);for(let s=0;s<n;s++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:n=this.sceneHelpers,sceneHelpersOnTop:i=this.sceneHelpersOnTop,overrideTransmission:r,overrideNormal:o}={}){let s=e instanceof ZR?e.activePage:e,a=s.visible;s.visible=!0;let l=s.scene;this.xr.enabled&&(!1===this.isXRCopyPassSet&&null!==this.getRenderTarget()&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(s.bgColor,s.bgColor.a),s.penumbraSizeArray.forEach((p,g)=>{ai.penumbraSize.value[g]=p}),ai.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?ai.resolution.value.set(this.resolution.x,this.resolution.y):ai.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==o?(ai.normalRenderTarget.value=o,ai.normalRenderTargetDepth.value=j$):l.needsNormal()&&(this.createNormalRenderTarget(),ai.normalRenderTarget.value=this.normalRenderTarget.texture,ai.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,s,t));let c=s.data.ao,d=c.occlusion;if(d&&(this.createAORenderTarget(),ai.aoRenderTarget.value=this.aoRenderTarget.texture),ai.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,s.aoColor,null!==s.fog,s.backupFog.near,s.backupFog.far,c.aoFullRes&&!s_),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&s.uiCanvas?.enabled&&s.uiCanvas.texture&&s.uiCanvas.texture.image.width>0){let p=this.getSize(V$),g=this.getPixelRatio();(s.uiCanvas.width!==this.viewportWidth||s.uiCanvas.height!==this.viewportHeight||s.uiCanvas.dpr!==g)&&s.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},g),s.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=s.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(p.x,p.y,g),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let p=this.getSize(V$),g=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(p.x,p.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=g}let h=!1;if(void 0!==r)ai.transmissionRenderTarget.value=r,ai.transmissionRenderTargetDepth.value=j$,this.pipeline.setTransmissionPassEnabled(!1);else{let p=l.needsTransmission();p&&(void 0===this.transmissionRenderTarget&&(h=!0),this.createTransmissionRenderTarget(),ai.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,ai.aspectRatio.value=function _4e(e,t){return e>=t?new Ue(t/e,1):new Ue(1,e/t)}(this.viewportWidth,this.viewportHeight),ai.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(p)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=n,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=s,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==s.postprocessing&&(this.pipeline.updatePostprocessing(s.postprocessing),!n&&!i&&this.pipeline.disableHelpers()),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),s.overrideMaterial=l.wireframeState?KR:null,this.pipeline.render(),ai.frameIndex.value=(ai.frameIndex.value+1)%16,t instanceof Za&&t.copyHistory(),s.visible=a}renderFromSceneForSceneTransitionPass(e,t,n){this.pipeline.renderToScreen=!1,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=n,this.sceneTransitionTimeRemaining=n,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){this._superDispose(),this.pipeline.dispose(),this.aoRenderTarget?.dispose(),this.transmissionRenderTarget?.dispose(),this.transmissionDepthTarget?.dispose(),this.normalRenderTarget?.dispose(),this.normalRenderTarget?.depthTexture?.dispose()}},H$=class extends(G_(aMe)){constructor(e,t=15,n=10066329){super(e,t,n),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){W_(this.object,H$.geometryHelper,e,t)}},G$=class extends(G_(sMe)){constructor(e,t=15,n=6710886){super(e,t,n),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){W_(this.object,G$.geometryHelper,e,t)}},DR=class extends(G_(oMe)){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){W_(this.object,DR.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=DR._vector,t=this.object.distance?this.object.distance:1e3,n=t*Math.tan(this.object.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,o=this.cone.material.length;r<o;r++)this.cone.material[r].color.set(i);else this.cone.material.color.set(i)}}},W$=DR;W$._vector=new te;var q$=class extends ju{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new Vo(new Uu(1,1),new zu({transparent:!0,opacity:0,side:2})),this.add(this.caretMesh),this.selectionMesh=new Vo(new Uu(1,1),new zu({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:2})),this.add(this.selectionMesh),this.hide()}get caretHeight(){return this.object?.AD??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=.5*-this.caretHeight,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(void 0===this.object)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(void 0===this.object)return;let e=this.object,t=e.parent;null!==t&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),null!==t?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let n of this.children)n.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let n=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,n&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(void 0===this.object)return;this.caretIndex=e;let n=this.object.wrappedText,[i,r]=I2(n,e),[o,s]=e>0?I2(n,e-1):[null,null];"\n"===(e>0&&n.length?n[o].charAt(s):null)&&(i++,r=0),this.current.start=e,this.current.end=void 0;let[a,l]=AR(this.object,i,r),{AD:c,descender:d}=this.object,h=d+.5*c,{width:p,height:g,depth:v}=this.object.geometry.userData.parameters,y="string"==typeof p?0:p,b="string"==typeof g?0:g;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(a-.5*y,l+h+.5*b,v),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(void 0===this.object)return;let n=this.object.wrappedText;this.current.start=e,this.current.end=t;let i=[],r=[],o=function ULe(e,t,n){let[i,r]=I2(e,t),[o,s]=I2(e,n),a=[];r>=e[i].length&&(i++,r=0);for(let l=i;l<=o;l++){let c=e[l];a.push([l,l===i?r:0,l===o?s:c.length])}return a}(n,e,t),{lineHeight:s,AD:a,descender:l}=this.object,c=l+.5*a-.5*s;for(let[b,P,S]of o)if(P!==S){let[O,A]=AR(this.object,b,P),[H,U]=AR(this.object,b,S);A+=c,U+=c,U+=s;let X=i.length/3;i.push(O,A,0),i.push(H,A,0),i.push(H,U,0),i.push(O,U,0),r.push(X+0,X+1,X+2),r.push(X+2,X+3,X+0)}let d=new Xn;d.setIndex(r),d.setAttribute("position",new _n(i,3));let{width:h,height:p,depth:g}=this.object.geometry.userData.parameters,v="string"==typeof h?0:h,y="string"==typeof p?0:p;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=d,this.selectionMesh.position.x=.5*-v,this.selectionMesh.position.y=.5*y,this.selectionMesh.position.z=g,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,n="previous"){if(void 0===this.object||void 0===this.object.font)return;let i=this.object.wrappedText,r=i.length,o=this.object.lineHeight,s=r*o,{height:a,verticalAlign:l}=this.object.geometry.userData.parameters,c="string"==typeof a?0:a,d=0;3===l?d=c-s:2===l&&(d=.5*c-.5*s);let h=Math.min(Math.floor(Math.max(Math.min(-t-d,s),0)/o),r-1),p=this.object.charCoords[h],g=this.object.charWidths[h],v=0,y=!1;if("previous"===n){for(let b=0;b<p.length;b++)if(p[b][0]+.5*g[b]-e>0){v=b,y=!0;break}}else if("closest"===n){let b=1/0;for(let P=0;P<p.length;P++){let O=Math.abs(p[P][0]+.5*g[P]-e);O<b&&(b=O,v=P,y=!0)}}else for(let b=0;b<p.length;b++){let S=p[b][0]+g[b];if(e>=p[b][0]&&e<S){v=b,y=!0;break}}return y||(v=p.length),{index:this.getGlobalIndexFromLineAndCharIndexes(i,h,v),lineIndex:h,characterIndex:v}}getGlobalIndexFromLineAndCharIndexes(e,t,n){return e.slice(0,t).reduce((i,r)=>i+r.length,0)+n}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function AR(e,t,n){let{charCoords:i,charWidths:r,initialOffsetY:o,lineHeight:s}=e;if(i[t]&&0===i[t].length||0===i.length){let d=0,{horizontalAlign:h}=e.data.geometry,p=e.wrappedText,{width:g}=e.geometry.userData.parameters;return 1===p.length&&0===p[0].length&&(3===h?d=.5*g:2===h&&(d=g)),[d,o-s*t]}let a=i[t];if(void 0===a||0===a.length)return[0,0];let[l,c]=a[Math.min(n,a.length-1)];return n>=a.length&&(l+=r[t][n-1]),[l,c]}function I2(e,t){let n=0;for(let i=0;i<e.length;i++){let r=e[i],o=t-n;if(o<=r.length)return[i,o];n+=r.length}return[Math.max(0,e.length-1),e[e.length-1]?.length??0]}function VLe(e,t){return"string"==typeof e?t.data.colors[e]:e}function HLe(e){return e.colors[0]}var br,Y$=class extends(mR(Gwe,H$)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let r=new LM(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof LM&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let n=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;void 0!==e.size&&function GLe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),n&&this.update()}},X$=new te,$$=new te,Q$=new _i,K$=class extends(mR(Uwe,W$)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=2*En.RAD2DEG*this.angle,i.aspect=1,i.near=100,i.far=2500;let r=new LM(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof LM&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),$$.setFromMatrixPosition(this.matrixWorld),Q$.setFromRotationMatrix(this.matrixWorld),X$.copy(this.up).applyQuaternion(Q$).negate().multiplyScalar(this.distance),this.target.position.copy($$).add(X$),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.penumbraSize&&t.scene.markPenumbraSizeDirty(),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function k2(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function Z$(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}(e=>{function a(U){return[U[0],U[3],U[1],U[4],U[2],U[5]]}e.identity=function t(){return[1,0,0,0,1,0,0,0,1]},e.copy=function n(U,X=e.identity()){for(let Y=0,Z=U.length;Y<Z;Y++)X[Y]=U[Y];return X},e.create=function i(U,X,Y,Z,ee,oe){return e.setAbcdef(e.identity(),U,X,Y,Z,ee,oe)},e.setAbcdef=function r(U,X,Y,Z,ee,oe,ce){return U[0]=X,U[1]=Z,U[2]=oe,U[3]=Y,U[4]=ee,U[5]=ce,U},e.append=function o(U,X){let[Y,Z,ee,oe,ce,de]=a(U),[he,Pe,we,_e,ve,ke]=a(X);return e.create(he*Y+Pe*ee,he*Z+Pe*oe,we*Y+_e*ee,we*Z+_e*oe,ve*Y+ke*ee+ce,ve*Z+ke*oe+de)},e.prepend=function s(U,X){let[Y,Z,ee,oe,ce,de]=a(U),[he,Pe,we,_e,ve,ke]=a(X),ze=Y,Le=Z,Ne=ee,$e=oe;return(1!==he||0!==Pe||0!==we||1!==_e)&&(ze=Y*he+Z*we,Le=Y*Pe+Z*_e,Ne=ee*he+oe*we,$e=ee*Pe+oe*_e),e.create(ze,Le,Ne,$e,ce*he+de*we+ve,ce*Pe+de*_e+ke)},e.getAbcdef=a,e.invert=function l(U){let[X,Y,Z,ee,oe,ce]=e.getAbcdef(U),de=X*ee-Y*Z;return e.create(ee/de,-Y/de,-Z/de,X/de,(Z*ce-ee*oe)/de,-(X*ce-Y*oe)/de)},e.apply=function c([U,X],Y){let[Z,ee,oe,ce,de,he]=e.getAbcdef(Y);return[Z*U+oe*X+de,ee*U+ce*X+he]},e.applyInverse=function d(U,X){let[Y,Z,ee,oe,ce,de]=e.getAbcdef(X),he=1/(Y*oe+ee*-Z),[Pe,we]=U;return[oe*he*Pe+-ee*he*we+(de*ee-ce*oe)*he,Y*he*we+-Z*he*Pe+(-de*Y+ce*Z)*he]},e.scale=function h(U,X,Y=X){let[Z,ee,oe,ce,de,he]=e.getAbcdef(U);return e.setAbcdef(U,Z*X,ee*Y,oe*X,ce*Y,de*X,he*Y),U},e.rotate=function p(U,X){let Y=Math.cos(X),Z=Math.sin(X),[ee,oe,ce,de,he,Pe]=e.getAbcdef(U);return e.setAbcdef(U,ee*Y-oe*Z,ee*Z+oe*Y,ce*Y-de*Z,ce*Z+de*Y,he*Y-Pe*Z,he*Z+Pe*Y),U},e.rotateAround=function g(U,X,Y){let[Z,ee]=Y,oe=e.translate(U,-Z,-ee);return oe=e.rotate(oe,X),oe=e.translate(oe,Z,ee),oe},e.translate=function v(U,X,Y){let[Z,ee,oe,ce,de,he]=e.getAbcdef(U);return e.setAbcdef(U,Z,ee,oe,ce,de+X,he+Y),U},e.setTranslate=function y(U,X,Y){let[Z,ee,oe,ce]=e.getAbcdef(U);return e.setAbcdef(U,Z,ee,oe,ce,X,Y),U},e.setPosition=function b(U,X,Y){let[Z,ee,oe,ce]=e.getAbcdef(U);return e.setAbcdef(U,Z,ee,oe,ce,X,Y),U},e.getScale=function P(U){let[X,Y,Z,ee]=e.getAbcdef(U);return[Math.sqrt(X*X+Y*Y),Math.sqrt(Z*Z+ee*ee)]},e.getPosition=function S(U){let[,,,,X,Y]=e.getAbcdef(U);return[X,Y]},e.getRotation=function O(U,X){return e.decompose(U,X).rotation},e.decompose=function A(U,X){let[Y,Z,ee,oe,ce,de]=e.getAbcdef(U),{rotation:he,scale:Pe,shear:we}=function qLe(e){let[t,n,i]=function WLe(e){let t=(e[0][0]+e[1][1])/2,n=(e[0][0]-e[1][1])/2,i=(e[1][0]+e[0][1])/2,r=(e[1][0]-e[0][1])/2,o=Math.sqrt(t*t+r*r),s=Math.sqrt(n*n+i*i),a=o+s,l=o-s,c=Math.atan2(i,n),d=Math.atan2(r,t),h=(d-c)/2,p=(d+c)/2,g=[[Math.cos(p),Math.sin(p)],[-Math.sin(p),Math.cos(p)]],v=[[a,0],[0,l]],y=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]];return g[0][0]*=-1,g[0][1]*=-1,y[0][0]*=-1,y[1][0]*=-1,[g,v,y]}(e),r=k2(t,Z$(i)),o=k2(k2(i,n),Z$(i));return{rotation:Math.atan2(r[1][0],r[0][0]),scale:[o[0][0],o[1][1]],shear:[o[0][1]/o[1][1],o[1][0]/o[0][0]]}}([[Y,ee],[Z,oe]]);return{position:[ce+(X[0]*Y+X[1]*ee)-X[0],de+(X[0]*Z+X[1]*oe)-X[1]],scale:Pe,rotation:he,shear:we,pivot:X}},e.compose=function H(U,X,Y,Z,ee=[0,0]){let[oe,ce]=U,[de,he]=Z,[Pe,we,_e,ve]=function YLe({rotation:e,scale:t,shear:n}){let i=Math.cos(e),r=Math.sin(e),a=k2([[i,-r],[r,i]],[[t[0],n[0]*t[1]],[n[1]*t[0],t[1]]]);return[a[0][0],a[1][0],a[0][1],a[1][1]]}({rotation:Y,scale:X,shear:ee});return e.create(Pe,we,_e,ve,oe-(de*Pe+he*_e)+de,ce-(de*we+he*ve)+he)}})(br||(br={}));var XLe=Math.PI/180;Math;var da=class{constructor(e,t,n){this.uuid=e,this.data=t,this.localMatrix=br.identity(),this.worldMatrix=br.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new TR,this._recursiveBBox=new TR,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=o2(),this.dpr=n.dpr??1,this.dataPatched=t}project(e,t){let n=this.worldMatrix;return t&&(n=br.append(t.worldMatrix,n)),br.applyInverse(e,n)}intersects(e,t,n,i=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],n),i)}intersectsInLocalSpace(e,t,n=!1){let{min:i,max:r}=n?this.recursiveBBox:this.singleBBox;return e>=i[0]&&e<=r[0]&&t>=i[1]&&t<=r[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=br.compose(this.position,this.scale,function QLe(e){return e*XLe}(this.rotation),ug.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,n){let i=this.parent;t&&null!=i&&i.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.worldMatrix=this.parent?br.append(this.parent.worldMatrix,this.localMatrix):br.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return ug.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;void 0!==e.position&&(t=!0,this.position=e.position),void 0!==e.rotation&&(t=!0,this.rotation=e.rotation),void 0!==e.scale&&(t=!0,this.scale=e.scale),void 0!==e.shear&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,n){0===e.type&&void 0!==e.props.visible&&(this.visible=e.props.visible),this.data=t,this.data=t;let i=e,r=ro(e.path,["states","*"]);if(null!==r){if(0===e.type){let[o]=r;if(this?.stateSelection===o){let s={...e.props};if(delete s.name,Object.values(e.props).some(a=>void 0===a)){let a=this.data;if(void 0!==a){let l=Gs.zoom(a,e.path.slice(2));if(l)for(let c in e.props)void 0===e.props[c]&&c in l&&(s[c]=l[c])}}i={...e,props:s,path:e.path.slice(2)}}}}else if(0===e.type){let o=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(void 0!==o){if(void 0!==e.props.name&&o.name){let{name:a,...l}=o;o=l}let s=Gs.removeOverridden(e.path,e.props,o);i={...e,props:s}}}this.updateByPatchedOpBase(i,hg.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),n)}changeSelectedState(e,t,n=!1){if(0!==this.data.states.length||n){for(let i of this.data.states)hg.toOps(this.data,i.data).forEach(r=>{let o=hP.replaceProps(r,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,t)});if(null!==e){let i=this.data.states.data(e);i&&(this.dataPatched=hg.patch(this.data,i),hg.toOps(this.data,i).forEach(r=>{this.updateByPatchedOp(r,this.dataPatched,t)}))}n&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){void 0!==e.name&&(this.name=e.name),void 0!==e.visible&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,n){this.dataPatched=t,this.updateByPatchedOp(e,t,n)}updateByPatchedOp(e,t,n){0===e.path.length&&0===e.type&&this.updateState(e.props,n),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{"frame2d"===t.data.type&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new da(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let n=t.indexOf(this)+1;return t[n]?t[n]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof da&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},jd=class extends da{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.context=n,this.children=[]}add(e){e.parent&&e.parent instanceof jd&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(!0!==t)for(let n of this.children)n instanceof jd?n.traverse(e):t=e(n)}intersectsChildrenHelper(e,t,n,i,r){for(let o of this.children)if(o.intersects(e,t,n,!1)&&(r.push(o),i)||o instanceof jd&&o.intersectsChildrenHelper(e,t,n,i,r))return!0;return!1}intersectsChildren(e,t,n,i=!1,r=[],o=!1){return this.intersectsChildrenHelper(e,t,n,i,r),r}intersectsChildrenHelperReverse(e,t,n,i,r){for(let o of this.children)if(o instanceof jd&&o.intersectsChildrenHelperReverse(e,t,n,i,r)||o.intersects(e,t,n,!1)&&(r.push(o),i))return!0;return!1}intersectsChildrenReverse(e,t,n,i=!1,r=[],o=!1){return this.intersectsChildrenHelperReverse(e,t,n,i,r),r}updateWorldMatrix(e,t,n){if(super.updateWorldMatrix(e,t,n),n&&this.children)for(let i of this.children)i.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(n=>{n.uuid===e&&(t=n)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new jd(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}},kf=class extends jd{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.updateState(t,n)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new kf(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}};function KLe(e,t){let[[n,i],[r,o]]=e,[[s,a],[l,c]]=t,d=(n-r)*(a-c)-(i-o)*(s-l);if(0===d)return!1;let h=((n-s)*(a-c)-(i-a)*(s-l))/d,p=-((n-r)*(i-a)-(i-o)*(n-s))/d;return h>=0&&h<=1&&p>=0&&p<=1}var tQ,R2,wi,IR,J$=[[-1,1],[-1,-1],[1,-1],[1,1]],eQ=(e,t,n)=>{let i=e.getCenter(),r=e.getHalfSize(),o=br.append(t,e.worldMatrix);0===r[0]&&0===r[1]?n.push(br.apply(i,o)):J$.forEach(s=>{n.push(br.apply([s[0]*r[0]+i[0],s[1]*r[1]+i[1]],o))})},TR=class{constructor(){this.matrix=br.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),br.copy(e.worldMatrix,this.matrix);let n=br.invert(e.worldMatrix);this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t,n=!1){let i=[];!0===n&&e instanceof jd?e.traverse(r=>{r.visible&&eQ(r,t,i)}):eQ(e,t,i),this.setFromPoints(i)}setFromSize(e,t,n){this.makeEmpty(),br.copy(n,this.matrix),this.expandBySize(e,t,n)}expandBySize(e,t,n){[br.apply([0,0],n),br.apply([0,t],n),br.apply([e,t],n),br.apply([e,0],n)].forEach(i=>this.expandByPoint(i))}getCenter(){let[e,t]=this.min,[n,i]=this.getHalfSize();return br.apply([e+n,t+i],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[.5*(this.max[0]-this.min[0]),.5*(this.max[1]-this.min[1])]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),n=this.getCenter(),[i,r,o,s]=br.getAbcdef(this.matrix),a=br.create(i,r,o,s,n[0],n[1]);this.vertices=J$.map(([l,c])=>br.apply([l*e,c*t],a))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let n=this.matrix;return t&&(n=br.append(t.worldMatrix,n)),br.applyInverse(e,n)}intersects(e,t,n){return this.intersectsInLocalSpace(...this.project([e,t],n))}intersectsInLocalSpace(e,t){let{min:n,max:i}=this;return e>=n[0]&&e<=i[0]&&t>=n[1]&&t<=i[1]}containsPoint(e){let[t,n]=e,[i,r]=this.min,[o,s]=this.max;return t>=i&&t<=o&&n>=r&&n<=s}intersectsBBox2D(e){for(let t=0,n=this.edges.length;t<n;t++){let i=this.edges[t];for(let r=0,o=e.edges.length;r<o;r++)if(KLe(i,e.edges[r]))return!0}for(let t=0,n=e.vertices.length;t<n;t++)if(this.containsPoint(e.vertices[t]))return!0;return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],br.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new TR;return e.copy(this),e}},ZLe=new Promise(e=>{tQ=e}),nQ=!1;function JLe(){if(!nQ)return R2||(R2=function e(){return t.apply(this,arguments)}(),R2);function t(){return(t=(0,Qn.Z)(function*(){let n=yield m.e(952).then(m.bind(m,952));tQ(n.default??n),nQ=!0})).apply(this,arguments)}}function iQ(e){let t=!1;return e.scene.objects.traverse((n,i)=>{("Mesh"===i.type&&"UIGeometry"===i.geometry.type||"Page"===i.type&&void 0!==i.uiFrame)&&(t=!0)}),t}function kR(){return kR=(0,Qn.Z)(function*(e){let t=yield ZLe;wi||(IR||(IR=t({locateFile:()=>e})),wi=yield IR)}),kR.apply(this,arguments)}var rQ=br.identity(),oQ=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=Hr.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=Hr.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let n=e.getBoundingClientRect();e.width=n.width*t,e.height=n.height*t}catch{console.log(e.width,t)}this._currentM3Transform=rQ,this._currentTransform=new Float32Array(rQ)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}init(){var e=this;return(0,Qn.Z)(function*(){if(!e.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");yield function eBe(e){return kR.apply(this,arguments)}(e.wasmURL),e._surface=wi.MakeWebGLCanvasSurface(e.canvas),e.ctx=e._surface?.getCanvas(),e._paint=new wi.Paint,e._paint.setAntiAlias(!0),e._paintFill=e._paint.copy(),e._paintFill.setStyle(wi.PaintStyle.Fill),e._paintStroke=e._paint.copy(),e._paintStroke.setStyle(wi.PaintStyle.Stroke),e.ctx?.scale(e.dpr,e.dpr)})()}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}loadFont(e,t){var n=this;return(0,Qn.Z)(function*(){let i=yield(yield fetch(e)).arrayBuffer();n.registerFont(i,t)})()}registerFont(e,t){if(this._fonts.has(t))return;let n=wi.FontMgr.FromData(e);if(!n)throw new Error("Invalid font data for "+t);this._fonts.set(t,n)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(N2(e),wi.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(N2(e),wi.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth("center"===this._strokeMode?e:2*e)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){this.ctx?.clear(wi.TRANSPARENT)}save(){this.ctx?.save()}restore(){this.ctx?.restore()}beginPath(){this._currentPath?.delete(),this._currentPath=new wi.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,n,i,r=0,o=0,s=0,a=0){let l=wi.XYWHRect(e,t,n,i);if(0===r&&0===o&&0===a&&0===s)this.ctx?.clipRect(l,wi.ClipOp.Intersect,!0);else{let c=wi.RRectXY(l,r,r);c[4]=c[5]=r,c[6]=c[7]=o,c[8]=c[9]=s,c[10]=c[11]=a,this.ctx?.clipRRect(c,wi.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=br.invert(this.currentTransform);this.ctx.concat(e);let t=br.translate(br.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,n=!0){if(this.ctx&&this._currentPath){let i,r=!1;if(n&&this._hasDropShadow()){let s,o=e.copy();o.setColor(N2(this._dropShadowColor)),this._dropShadowBlur>0&&(s=wi.MaskFilter.MakeBlur(wi.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(this.camera?.scale??1),!1),o.setMaskFilter(s)),this.ctx.save(),this.ctx.clipPath(this._currentPath,wi.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(o),this.ctx.restore(),o.delete(),s?.delete()}if(this._backgroundBlur>0&&n){this.ctx.save(),this.ctx.clipPath(this._currentPath,wi.ClipOp.Intersect,!0);let o=wi.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,wi.TileMode.Clamp,null),s=e.copy();s.setImageFilter(o),s.setAlphaf(1);let a=this._currentPath.computeTightBounds();this.ctx.saveLayer(s,a,null,wi.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),s.delete(),o.delete(),r=!0}if(this._layerBlur>0){let o=e.copy();i=wi.MaskFilter.MakeBlur(wi.BlurStyle.Normal,this._layerBlur*this.dpr*(this.camera?.scale??1),!1),o.setMaskFilter(i),t(o),o.delete(),i.delete(),r=!0}if(r||t(e),n&&this._hasInnerShadow()){let s,o=new wi.Paint;o.setAntiAlias(!0),o.setStyle(wi.PaintStyle.Fill),o.setColor(N2(this._innerShadowColor)),this._innerShadowBlur>0&&(s=wi.MaskFilter.MakeBlur(wi.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(this.camera?.scale??1),!1),o.setMaskFilter(s));let a=this._currentPath.computeTightBounds(),[l,c,d,h]=a,p=d-l,g=h-c;this.ctx.save(),this.ctx.clipPath(this._currentPath,wi.ClipOp.Intersect,!0),this.ctx.saveLayer(o,a,null,wi.SaveLayerInitWithPrevious),this.ctx?.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(wi.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+p+Math.abs(2*this._innerShadowOffsetX),2e3+g+Math.abs(2*this._innerShadowOffsetY)),o),o.setBlendMode(wi.BlendMode.Clear),this.ctx.drawPath(this._currentPath,o),this.ctx.restore(),this.ctx.restore(),o.delete(),s?.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let n=this.ctx,i=this._currentPath;this._applyEffectsToPaint(e,r=>{let o=!1;!t&&"center"!==this._strokeMode&&(n.save(),n.clipPath(i,"outside"===this._strokeMode?wi.ClipOp.Difference:wi.ClipOp.Intersect,!0),o=!0),n.drawPath(i,r),o&&n.restore()},t)}}_hasDropShadow(){return this._dropShadowColor?.a>0}_hasInnerShadow(){return this._innerShadowColor?.a>0}path(e){this._currentPath?.addPath(wi.Path.MakeFromSVGString(e))}ellipse(e,t,n,i,r,o,s,a){if(!sQ([e,t,n,i])||!this._currentPath)return;if(n<0||i<0)throw Error("radii cannot be negative");let l=wi.XYWHRect(e-n,t-i,2*n,2*i);this._currentPath?.addOval(l)}rect(e,t,n,i,r=0,o=0,s=0,a=0){let l=wi.XYWHRect(e,t,n,i);if(sQ(l))if(0===r&&0===o&&0===a&&0===s)this._currentPath?.addRect(l);else{let c=wi.RRectXY(l,r,r);c[4]=c[5]=r,c[6]=c[7]=o,c[8]=c[9]=s,c[10]=c[11]=a,this._currentPath?.addRRect(c)}}getHorizontalAlign(e){switch(e){case 2:return wi.TextAlign.Right;case 3:return wi.TextAlign.Center;case 4:return wi.TextAlign.Justify;default:return wi.TextAlign.Left}}drawTextInner(e,t,n,[i,r,o,s],a,l,c=!0){let d=0,{ctx:h}=this;if(!h)return d;let p=l.copy(),g=l.copy();return g.setAlphaf(0),this._applyEffectsToPaint(p,v=>{t.pushPaintStyle(n,v,g),t.addText(e);let y=t.build();y.layout(o);let b=r;2===a?b+=(s-y.getHeight())/2:3===a&&(b+=s-y.getHeight()),h.drawParagraph(y,i,b),d=y.getHeight(),t.reset(),y.delete()},c),p.delete(),g.delete(),d}drawText(e,t){let n=0,i=this._fonts.get(t.font),{ctx:r,_paintFill:o,_paintStroke:s}=this;if(i&&r){let a=new wi.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new wi.ParagraphStyle({textStyle:a,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),c=wi.XYWHRect(t.x,t.y,t.width,t.height),d=wi.ParagraphBuilder.Make(l,i);o&&(n=this.drawTextInner(e,d,a,c,t.verticalAlign,o,!0)),s&&(n=this.drawTextInner(e,d,a,c,t.verticalAlign,s,!1)),d.delete()}return{height:n}}render(){this._surface?.flush()}moveTo(e,t){this._currentPath?.moveTo(e,t)}lineTo(e,t){this._currentPath?.lineTo(e,t)}bezierCurveTo(e,t,n,i,r,o){this._currentPath?.cubicTo(e,t,n,i,r,o)}quadraticCurveTo(e,t,n,i){this._currentPath?.quadTo(e,t,n,i)}setTransform(e,t=!1){if(!this.ctx)return;let n=this.ctx.getTotalMatrix(),i=br.invert(n);if(i&&this.ctx.concat(i),this.ctx?.scale(this.dpr,this.dpr),this.camera?.enabled&&(this.ctx?.concat(this.camera.worldMatrix),t)){let r=br.getScale(this.camera.worldMatrix);this.ctx?.scale(1/r[0],1/r[1])}this.ctx?.concat(e),this.currentTransform=e}transform(e){this.ctx?.concat(e)}setSize(e,t){!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=wi.MakeWebGLCanvasSurface(this.canvas),this.ctx=this._surface?.getCanvas()))}};function sQ(e){for(let t=0;t<e.length;t++)if(void 0!==e[t]&&!Number.isFinite(e[t]))return!1;return!0}function N2({r:e,g:t,b:n,a:i}){return wi.Color4f(e,t,n,i)}var F2,FR,LR,aQ=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=Hr.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){void 0!==e.color&&(this.color=e.color),void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.blurRadius&&(this.blurRadius=e.blurRadius),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.spread&&(this.spread=e.spread)}},lQ=class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.radius&&(this.radius=e.radius)}},ha=class extends da{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=Hr.transparent,this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color)}}(e+"-fill",t.fill,n),this.stroke=new class{constructor(e,t,n){this.uuid=e,this.data=t,this.enabled=!1,this.color=Hr.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.color&&(this.color=e.color),void 0!==e.thickness&&(this.thickness=e.thickness),void 0!==e.mode&&(this.mode=e.mode)}}(e+"-stroke",t.stroke,n),this.dropShadow=new aQ(e+"-dropShadow",t.dropShadow,n),this.innerShadow=new aQ(e+"-innerShadow",t.innerShadow,n),this.backgroundBlur=new lQ(e+"-backgroundBlur",t.backgroundBlur,n),this.layerBlur=new lQ(e+"-layerBlur",t.layerBlur,n)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Hr.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Hr.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){e.layerBlur=this.layerBlur.enabled?5*this.layerBlur.radius:0,e.backgroundBlur=this.backgroundBlur.enabled?5*this.backgroundBlur.radius:0,this.dropShadow.enabled?(e.dropShadowBlur=5*this.dropShadow.blurRadius,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=Hr.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=5*this.innerShadow.blurRadius,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=Hr.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),0===e.type&&(ro(e.path,["fill"])?this.fill.update(e.props):ro(e.path,["stroke"])?this.stroke.update(e.props):ro(e.path,["dropShadow"])?this.dropShadow.update(e.props):ro(e.path,["innerShadow"])?this.innerShadow.update(e.props):ro(e.path,["layerBlur"])?this.layerBlur.update(e.props):ro(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new ha(this.uuid,this.data,e);return t.parent=void 0,t}},RR=class extends ha{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,n)}innerDraw(e){e.ellipse(.5*this.width,.5*this.height,.5*this.width,.5*this.height,0,0,2*Math.PI)}intersectsInLocalSpace(e,t){return function $Le(e,t,n,i,r,o){let s=e-n,a=t-i;return s*s/(r*r)+a*a/(o*o)<=1}(e,t,.5*this.width,.5*this.height,.5*this.width,.5*this.height)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new RR(this.uuid,this.data,e);return t.parent=void 0,t}},Q_=class extends ha{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,n)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new Q_(this.uuid,this.data,e);return t.parent=void 0,t}},NR=class extends ha{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,n)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Hr.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Hr.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){this._fontHolder?.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,n=this.data.text.textValue.toString(),i=2===t?n.toUpperCase():3===t?n.toLowerCase():n,{height:r}=e.drawText(i,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=r}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){void 0!==e.font&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new NR(this.uuid,this.data,e);return t.parent=void 0,t}},cQ=class extends ha{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,n)}computeExtremas(){0===this.curves.length&&this.computeCurves();let e=this.curves.map(i=>F2.extremas(i)),t=[1/0,1/0],n=[-1/0,-1/0];for(let i=0,r=e.length;i<r;i++){let o=e[i];o[0][0]<t[0]&&(t[0]=o[0][0]),o[0][1]<t[1]&&(t[1]=o[0][1]),o[1][0]>n[0]&&(n[0]=o[1][0]),o[1][1]>n[1]&&(n[1]=o[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[n[0],n[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let n=1,i=this.data.points.length;n<i;n++){let r=this.data.points[n].data,o=this.data.points[n-1].data;this.curves.push({start:o.position,cp1:o.controlNext.position,cp2:r.controlPrevious.position,end:r.position})}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;this.data.isClosed&&this.curves.push({start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position})}getCenter(){let[e,t]=this.extremasBBox.min,[n,i]=this.getHalfSize();return[e+n,t+i]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[.5*(t[0]-e[0]),.5*(t[1]-e[1])]}innerDraw(e){for(let i=0,r=this.data.points.length;i<r;i++){let o=this.data.points[i].data;if(0===i){let[s,a]=o.position;e.moveTo(s,a)}else{let s=this.data.points[i-1].data,[a,l]=s.controlNext.position,[c,d]=o.controlPrevious.position,[h,p]=o.position;F2.derive({start:s.position,cp1:s.controlNext.position,cp2:o.controlPrevious.position,end:o.position}),e.bezierCurveTo(a,l,c,d,h,p)}}let t=this.data.points[0].data,n=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[i,r]=n.controlNext.position,[o,s]=t.controlPrevious.position,[a,l]=t.position;e.bezierCurveTo(i,r,o,s,a,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new cQ(this.uuid,this.data,e);return t.parent=void 0,t}};(e=>{function n(s,a,l,c=!1){let d=s-2*a+l;if(0!==d){let h=-Math.sqrt(Math.abs(a*a-s*l)),p=-s+a;return[-(h+p)/d,-(-h+p)/d]}return a!==l&&0===d?[(2*a-l)/(2*(a-l))]:[]}e.derive=function t(s){let a=s.start,l=s.cp1,c=s.cp2,d=s.end,v={start:[3*(l[0]-a[0]),3*(l[1]-a[1])],cp:[3*(c[0]-l[0]),3*(c[1]-l[1])],end:[3*(d[0]-c[0]),3*(d[1]-c[1])]};return s.derivative=v,v.derivative=FR.derive(v),v},e.droot=function i(s){let a=s.derivative??e.derive(s),l=a.start,c=a.cp,d=a.end;return[n(l[0],c[0],d[0]),n(l[1],c[1],d[1])]},e.extremas=function r(s){let[a,l]=e.droot(s),c=[s.start[0],s.end[0]],d=[s.start[1],s.end[1]];for(let h of a)c.push(e.compute(s,Math.min(1,Math.max(0,h)))[0]);for(let h of l)d.push(e.compute(s,Math.min(1,Math.max(0,h)))[1]);return c.sort((h,p)=>h-p),d.sort((h,p)=>h-p),[[c[0],d[0]],[c[c.length-1],d[d.length-1]]]},e.compute=function o(s,a){if(0===a)return[...s.start];if(1===a)return[...s.end];let l=1-a,c=l*l,d=a*a,h=c*l,p=c*a*3,g=l*d*3,v=a*d;return[h*s.start[0]+p*s.cp1[0]+g*s.cp2[0]+v*s.end[0],h*s.start[1]+p*s.cp1[1]+g*s.cp2[1]+v*s.end[1]]}})(F2||(F2={})),(e=>{e.derive=function t(r){let o=r.start,s=r.cp,a=r.end,d={start:[2*(s[0]-o[0]),2*(s[1]-o[1])],end:[2*(a[0]-s[0]),2*(a[1]-s[1])]};return d.derivative=LR.derive(d),r.derivative=d,d},e.droot=function n(r){let o=r.derivative??e.derive(r),s=o.start,a=o.end;return[s[0]!==a[0]?s[0]/(s[0]-a[0]):0,s[1]!==a[1]?s[1]/(s[1]-a[1]):0]},e.compute=function i(r,o){if(0===o)return[...r.start];if(1===o)return[...r.end];let s=1-o,a=s*s,l=o*o,d=s*o*2;return[a*r.start[0]+d*r.cp[0]+l*r.end[0],a*r.start[1]+d*r.cp[1]+l*r.end[1]]}})(FR||(FR={})),(e=>{e.derive=function t(i){let r=i.start,o=i.end;return i.derivative=[o[0]-r[0],o[1]-r[1]],i.derivative},e.compute=function n(i,r){if(0===r)return[...i.start];if(1===r)return[...i.end];let o=i.start,s=i.end;return[o[0]+(s[0]-o[0])*r,o[1]+(s[1]-o[1])*r]}})(LR||(LR={}));var Gh=class extends jd{constructor(e,t,n){super(e,t,n),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Q_(e+"-background",y_.defaultData,n),this.background.parent=this,this.updateState(t,n)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){super.updateLocalMatrix(),this.background?.updateLocalMatrix()}updateWorldMatrix(e,t,n){super.updateWorldMatrix(e,t,n),this.background?.updateWorldMatrix(e,t,n)}draw(e){if(!this.visible)return;e.save();let t=this.width,n=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=n,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,n,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[.5*this.width,.5*this.height]}getHalfSize(){return[.5*this.width,.5*this.height]}updateCornerState(e){void 0!==e.cornerRadius&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;void 0!==e.width&&(this.width="number"==typeof e.width?e.width:this.width,t=!0),void 0!==e.height&&(this.height="number"==typeof e.height?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),void 0!==e.fill&&this.fill.update(e.fill),void 0!==e.stroke&&this.stroke.update(e.stroke),void 0!==e.dropShadow&&this.dropShadow.update(e.dropShadow),void 0!==e.innerShadow&&this.innerShadow.update(e.innerShadow),void 0!==e.layerBlur&&this.layerBlur.update(e.layerBlur),void 0!==e.backgroundBlur&&this.backgroundBlur.update(e.backgroundBlur),void 0!==e.clipped&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),0===e.type&&(ro(e.path,["fill"])?this.fill.update(e.props):ro(e.path,["stroke"])?this.stroke.update(e.props):ro(e.path,["dropShadow"])?this.dropShadow.update(e.props):ro(e.path,["innerShadow"])?this.innerShadow.update(e.props):ro(e.path,["layerBlur"])?this.layerBlur.update(e.props):ro(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Gh(this.uuid,this.data,e);t.parent=void 0;for(let n of this.children)t.add(n.clone(e));return t}},iBe=Eu(tj(),1),L2=class extends ha{constructor(e,t,n){super(e,t,n),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,n),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),void 0!==e.path&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new L2(this.uuid,this.data,e);return t.parent=void 0,t}},dQ=class{constructor(e,t,n){this.uuid=e,this.data=t,this.group=new kf(dQ.GROUP_ID,{...LP.defaultData},n),this.createChildrenObjects(t.objects,this.group,n)}createObject(e,t,n,i,r,o){let s=function sBe(e,t,n){switch(t.type){case"ellipse2d":return new RR(e,t,n);case"rectangle2d":return new Q_(e,t,n);case"text2d":return new NR(e,t,n);case"vector2d":return new cQ(e,t,n);case"path2d":return new L2(e,t,n);case"frame2d":return new Gh(e,t,n);default:return new kf(e,t,n)}}(e,t,o);s&&(i.add(s),i.children.splice(r,0,i.children.pop()),s.updateWorldMatrix(),n.length>0&&(s instanceof kf||s instanceof Gh)&&this.createChildrenObjects(n,s,o))}createChildrenObjects(e,t,n){let i=0;for(let r of e)this.createObject(r.id,r.data,r.children,t,i,n),i+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,n,i){let r=this.find(e);if(r)try{r.updateByOp(t,n,{shared:i})}catch(o){console.error(o)}}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let n=null===e.parent?this.group:this.find(e.parent);void 0!==n&&n instanceof jd&&(this.createObject(e.id,e.data,e.children,n,e.localIndex,t),n.requestRender())}else if(0===e.path.length&&8===e.type){let n=this.find(e.id);if(void 0!==n&&void 0!==n.parent&&n.parent instanceof jd){let i=n.parent;n.resetBBoxNeedsUpdate(),i?.remove(n),i?.requestRender()}}else if(0===e.path.length&&9===e.type){let n=this.find(e.id);if(void 0!==n){let i=n.parent,r=null===e.parent?this:this.find(e.parent);(r instanceof jd||r===this)&&(r.add(n),r.children.splice(e.localIndex,0,r.children.pop()),n.updateWorldMatrix(!0,!1,!0),i?.requestRender(),n.requestRender()),n.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,n,i=!1,r=[]){return this.group.intersectsChildren(e,t,n,i,r,!0)}intersectsChildrenReverse(e,t,n,i=!1,r=[]){return this.group.intersectsChildrenReverse(e,t,n,i,r,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let n=[],i=t;for(;i!==this.group;){let r=i;i=i.parent;let o=i.children.indexOf(r);n.splice(0,0,o)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let i=this.getWithSortKey(n.id);void 0!==i&&t.push(i)}return t.sort((n,i)=>QG(n.sortKey,i.sortKey)),t.map(n=>n.entity)}},BR=dQ;function hQ({constraints:e,newParentWidth:t,newParentHeight:n,initialParentWidth:i,initialParentHeight:r,objectInitialWidth:o,objectInitialHeight:s,objectInitialPosition:a}){let{horizontalConstraint:l,verticalConstraint:c}=e,d=t-i,h=n-r,p=o,g=s,v=a[0],y=a[1];if(0!==l)if(1===l)v+=d;else if(3===l)v+=d/2;else if(2===l)p=Math.max(1,p+d);else if(4===l){let b=t/i;p*=b,v*=b}if(0!==c)if(1===c)y+=h;else if(3===c)y+=h/2;else if(2===c)g=Math.max(1,g+h);else if(4===c){let b=n/r;g*=b,y*=b}return{width:p,height:g,position:[v,y]}}BR.GROUP_ID="scene2d",Eu(tj(),1);var cBe=new fM(-1,1,1,-1,0,1),hBe=new class extends(null){constructor(){super(),this.setAttribute("position",new _n([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new _n([0,2,0,0,2,0],2))}},uQ=new wr({defines:{},uniforms:{tDiffuse:new Lt(null)},vertexShader:null,fragmentShader:null}),pBe=new class{constructor(e){this._mesh=new Vo(hBe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,cBe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}(uQ),zR=null,UR=null,gBe=br.identity(),pQ=class{constructor(e,t,n,i){this.uuid=e,this.width=t,this.height=n,this.context=i,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let r=this.width,o=this.height;this.renderer.dpr=this.isScreenSpace?this.dpr:Math.floor(2048/Math.max(r,o)),this.renderer.setSize(r,o)},this.onFrameOverrideObjectEvent=r=>{if(void 0!==r.target?.uuid){let o=this.frameRoot?.find(r.target.uuid);o&&o.dispatchEvent({...r,target:o})}},this.scene2d=new BR(En.generateUUID(),VI.defaultData,{dpr:window.devicePixelRatio,shared:i.shared}),this.canvas=(null===zR&&(zR=document.createElement("canvas")),zR),this.renderer=(e=>(null===UR&&(UR=new oQ(this.canvas)),UR))(),this.promise=this.init(),this.renderTarget=new Or(1,1,{type:Tu,stencilBuffer:!1,depthBuffer:!1}),i.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=i.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new JCe(this.canvas)),this._canvasTexture}init(){var e=this;return(0,Qn.Z)(function*(){e.renderer instanceof oQ&&(e.renderer.wasmURL=EX.skiaWasmUrl),yield e.renderer.init()})()}render(e){if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),this.frameOverride?.draw(this.renderer),this.renderer.render(),uQ.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),pBe.render(e),e.setRenderTarget(t),this.textureHolder?.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,n,i){this.scene2d.updateEntityByOp(e,t,n,i),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=e?.width??this.width,n=e?.height??this.height;this.frameOverride.width=t,this.frameOverride.height=n,this.frameOverride.localMatrix=gBe,this.isScreenSpace&&(this.frameOverride.fill.color=Hr.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:n},fQ({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){let n=Math.max(1,e?.width??this.width),i=Math.max(1,e?.height??this.height);this.dpr=t,this.width=n,this.height=i,this._innerApplySize();let r=1;(n*t<512||i*t<512)&&(r=Math.max(512/(n*t),512/(i*t))),this.renderTarget.setSize(n*t*r,i*t*r),this._canvasTexture?.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),this.frameOverride?.requestRender()}applyFrame(e){let t=this.context.scene.find2D(e);if(t&&t instanceof Gh)return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),this.frame?.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(n=>{n.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(n=>{n.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frame?.requestRender(),t}get frame(){return this.frameOverride}get frameId(){return this.frame?.uuid}find(e){return this.scene2d.find(e)}get texture(){return this.textureHolder?.getTexture(1001)}disposeFrameOverride(){this.frameOverride?.removeEventListener("render",this.onRenderRequestedDownstream),this.frameOverride?.traverse(e=>{e.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),this.frameOverride?.traverse(e=>{e.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function fQ({objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:i,initialParentWidth:r,initialParentHeight:o}){if(e instanceof Gh&&t instanceof Gh||e instanceof kf&&t instanceof kf)for(let s=0,a=e.children.length;s<a;s++){let l=e.children[s],c=t.children[s];l&&c&&l.uuid===c.uuid&&yBe({objectOverride:l,objectRoot:c,newParentWidth:n,newParentHeight:i,initialParentWidth:r,initialParentHeight:o})}}function yBe({objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:i,initialParentWidth:r,initialParentHeight:o}){let[s,a]=function vBe(e){if(jR(e))return[e.width,e.height];if(e instanceof L2){let[t,n]=e.getHalfSize();return[2*t,2*n]}if(e instanceof kf){let[t,n]=e.recursiveBBox.getHalfSize();return[2*t,2*n]}return[0,0]}(t),{width:l,height:c,position:d}=hQ({constraints:e.data,newParentWidth:n,newParentHeight:i,initialParentWidth:r,initialParentHeight:o,objectInitialWidth:s,objectInitialHeight:a,objectInitialPosition:t.position});if(e.position=d,e.data={...e.data,position:d},e.states)for(let h in e.states)bBe({stateId:h,objectOverride:e,objectRoot:t,newParentWidth:n,newParentHeight:i,initialParentWidth:r,initialParentHeight:o});jR(e)||e instanceof kf?(jR(e)&&(e.width=l,e.height=c,e.data={...e.data,width:l,height:c}),fQ({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:c,initialParentWidth:s,initialParentHeight:a})):e instanceof L2&&(e.path=function rBe(e,t=1,n=1){return t<=0||n<=0?e:function oBe(e){let n,t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"];return e.map(i=>{let r=[];t.forEach(s=>{if(s in i){let a=1*i[s];r.length&&a>=0&&r.push(","),r.push(a)}});let o=(n===i.code?r[0]<0?"":",":i.code)+r.join("");return n=i.code,o}).join("")}((0,iBe.parseSVG)(e).map(r=>{let o={...r};return"x"in o&&(o.x=o.x*t),"y"in o&&(o.y=o.y*n),"x1"in o&&(o.x1=o.x1*t),"x2"in o&&(o.x2=o.x2*t),"y1"in o&&(o.y1=o.y1*n),"y2"in o&&(o.y2=o.y2*n),"rx"in o&&(o.rx=o.rx*t),"ry"in o&&(o.ry=o.ry*n),o}))}(t.path,0!==s?l/s:1,0!==a?c/a:1),e.data={...e.data,path:e.path})}function bBe({stateId:e,objectOverride:t,objectRoot:n,newParentWidth:i,newParentHeight:r,initialParentWidth:o,initialParentHeight:s}){let a=t.states?.[e],l=n.states?.[e];if(a&&l){let{width:c,height:d,position:h}=hQ({constraints:t.data,newParentWidth:i,newParentHeight:r,initialParentWidth:o,initialParentHeight:s,objectInitialWidth:ug.isResizeable(l)?l.width:0,objectInitialHeight:ug.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:h}),ug.isResizeable(a)&&Object.assign(t.states[e],{width:c,height:d})}}function jR(e){return e instanceof Q_||e instanceof Gh||e instanceof RR||e instanceof NR}var ua=class extends(rk(_h)){constructor(e,t,n){super(),this.data=t,this.bgColor=new Da(1,1,1,1),this.fog=null,this.backupFog=new FV(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new ni,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new Za(Lv,{...f_.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Bwe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new BR((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:n.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,n)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){return this.uiCanvas?.frame}createUICanvas(e,t){this.uiCanvas=new pQ(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{this.uiCanvas?.applyFrame(e),this.uiCanvas?.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){void 0!==e.color&&(this.ambientLight.color=xl(e.color,t)),void 0!==e.intensity&&(this.ambientLight.intensity=e.intensity),void 0!==e.enabled&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof wg&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof v1)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){void 0!==e.softShadowQuality&&this.isActive&&((e="medium")=>{if(U$===e)return!1;U$=e;let t=(e=>{switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}})(e);ji.shadowmap_pars_fragment=(e=>`\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ${e};\nconst int gShadowSamples = ${e};\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    vec2 halton = haltonSequence[frameIndex];\n    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        vec2 halton = haltonSequence[frameIndex];\n        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);\n        float temporalAngle  = temporalOffset * PI2;\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n`)(t);let n=kLe.slice();n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),ji.lights_fragment_begin=n;let i=RLe.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),ji.shadowmask_pars_fragment=i,!0})(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){this.fog=e.enabled?this.backupFog:null,this.isActive&&(this.scene.fog=this.fog),this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=xl(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){void 0!==e.aoColor&&(this.aoColor=xl(e.aoColor,t))}updateByOp(e,t,n,i){let r=this.data.uiFrame;super.updateByOp(e,t,n,i);let o=t;ro(e.path,["fog"])?this.updateFog(o.fog,n.shared):ro(e.path,["ao"])?this.updateAo(o.ao,n.shared):ro(e.path,["ambient"])?this.updateAmbientLight(o.ambient,n.shared):ro(e.path,["shadow"])?this.updateShadow(o.shadow):0===e.type&&0===e.path.length&&(void 0!==e.props.uiFrame||r!==o.uiFrame)&&this.updateUIFrame(e.props.uiFrame,n)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),void 0!==e.backgroundColor&&this.setBackgroundColor(xl(e.backgroundColor,t.shared)),void 0!==e.fog&&this.updateFog(e.fog,t.shared),void 0!==e.ambient&&this.updateAmbientLight(e.ambient,t.shared),void 0!==e.ao&&this.updateAo(e.ao,t.shared),void 0!==e.shadow&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){return this.scene?.find(this.data.publish.playCamera)??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return null===this.penumbraSizeArrayCache&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(n=>{if(!n.visible)return!0;n instanceof Y$&&n.visible&&e<3&&(this.penumbraSizeArrayCache[e]=n.data.penumbraSize??.5,e+=1),n instanceof K$&&n.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=n.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],n=i=>{for(let r of i.children){let o=r.cloner;dr.is(r)&&(r.visible||o?.object.data.visible)&&((zd(r)||gR(r)&&this.scene.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),$R(r,e,t,!0)),n(r))}};return n(this),t}updateEntity2DByOp(e,t,n,i){this.uiCanvas?.updateEntity2DByOp(e,t,n,i)}},_Be=class extends(mR(Vwe,G$)){constructor(e,t,n){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let r=new te(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),o=new te(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),s=new ls(r,o),a=new BM(s,new ni(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof BM){let n=this.shadow.camera,i=new te(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new te(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);t.box.set(i,r),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},xBe=class extends Ka{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?kk(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},VR=class extends Ka{constructor(e,t,n){super(e,t,n),this._shapeId=null,this._context=n}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){let t,e={...this.data.geometry.extrusion.shape};for(let i in e)"string"==typeof e[i]&&(e[i]=this._context.shared.getVariable(e[i],[this.uuid,"geometry","extrusion","shape",i]));if("Custom"===e.type){let i=e.shapeId;if(i!==this._shapeId&&this.detachShape(),i){this._shapeId=i;let r=this._context.scene.find(i);r?.data&&(r.attachedPaths.add(this),t=r.geometry.userData?.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let i;switch(e.type){case"Rectangle":i=Sk;break;case"Ellipse":i=bk;break;case"Polygon":i=IY;break;case"Star":i=kY;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=i.create({parameters:e}).userData.shape}let n=this.geometry;t&&n.inputs&&(n.inputs.shapeData=t,n.build(),this.attachedSurfaceCloners.forEach(i=>i.update()))}detachShape(){null!==this._shapeId&&this._context.scene.find(this._shapeId)?.attachedPaths.delete(this)}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let n=this.geometry.getAttribute("position");void 0!==n?kk(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,e,t):super.updateEntityBoxSize(e,t)}},HR=class extends sR{constructor(e,t,n){super(e,t,n),this.data=t}},M1=class extends(b1(ju,Y_)){constructor(e,t,n){super(),"Instance"===t.type&&"string"==typeof e&&(t=this.transformAssignData(t,n)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return"Component"===this.data.type&&"string"==typeof this.identity}get isInstanceRoot(){return"Instance"===this.data.type&&"string"==typeof this.identity}transformAssignData(e,t){let n=kP.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(n){let i,r;for(let o of mf.rootOverrideProps)void 0===e[o]?(void 0===i&&(i={...e}),i[o]=n.data[o]):(void 0===r&&(r={}),r[o]=e[o],void 0===i&&(i={...e}),i[o]=df.apply(n.data[o],e[o]));return this.overrideData=r,i}return{...ca.defaultData,...e,...Ph(ca.defaultData,mf.rootOverrideProps)}}updateByOp(e,t,n,i){let r;if(this.isInstanceRoot&&!i)if(t=this.transformAssignData(t,n),0===e.type&&0===e.path.length&&this.component)for(let o of mf.rootOverrideProps)o in e.props&&void 0===e.props[o]&&(void 0===r&&(r={...e,props:{...e.props}}),r.props[o]=this.component.data[o]);else if(0===e.type&&e.path.length>0&&mf.rootOverrideProps.includes(e.path[0])){let o=e.path[0];void 0===r&&(r={...e,path:[],props:{[o]:t[o]}})}super.updateByOp(r??e,t,n,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(void 0===this.component){let n=e.scene.find(t.component)??null,i=!1;if(n!==this.oldComponent){if(this.oldComponent){let r=0;for(let o of this.children){if(!dr.is(o))break;e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(o),GR(o),r+=1}this.children.splice(0,r)}i=!0}if(n){let r={};gQ(e,[this.uuid],t.overrides,this,n,n,0,i,r);for(let o of this.children)if(dr.is(o)){let s=o.data;"Empty"===s.type&&s.animations&&o.traverseEntity(a=>{let l=a.dataPatched;if(a instanceof Ka&&l.bones&&l.boneInverses){let c=a.dataPatched;if(c.bones&&c.boneInverses){let d=c.bones.map(g=>e.scene.find(r[g])),h=c.boneInverses.map(g=>(new qt).fromArray(g)),p=new jT(d,h);a.bind(p,a.bindMatrix)}}else a.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function GR(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let n of e.children)dr.is(n)&&GR(n)}}function mQ(e,t,n,i){return e.component===t&&N3(e.identity,i)?e.overrideData===n?2:1:0}function gQ(e,t,n,i,r,o,s,a,l){if(s>50)return!1;if(i.component!==r){if(i.component){let d=i.component.instances.indexOf(i);d>=0&&i.component.instances.splice(d,1)}r.instances.find(d=>d===i)||r.instances.push(i),i.component=r}r instanceof M1&&r.isInstanceRoot&&r.expandInstanceChildren(e);let c=0;for(let d of r.children)if(dr.is(d)){let h=[...t,..."string"==typeof d.identity?[d.identity]:d.identity],p=DP.resolve(n,h,1);null!=p&&!(p instanceof Ss)&&(Object.setPrototypeOf(p,Ss.prototype),console.error("wrong prototype"));let v,g=null;if(!a){let y=i.children[c];if(g=dr.is(y)?y:null,null!==g){let b=mQ(g,d,p,h);v=b>=1?g.stateSelection:void 0,2!==b&&(g=null)}if(null===g&&(g=e.scene.findInstance(h)??null,null!==g)){let b=mQ(g,d,p,h);if(v=b>=1?g.stateSelection:void 0,2!==b)g=null;else{let P=g.parent.children.indexOf(g);g.parent.children.splice(P,1),i.children.splice(c,0,g),g.parent===i?P<=c&&console.error("not possible"):(g.parent=i,g.matrixWorldNeedsUpdate=!0,g.resetBBoxNeedsUpdate(),g.updateVisible(),e.pendingDeletes.delete(g))}}}if(null===g){let y=p?df.apply(d.data,p):d.data;og.is(y.type)&&(y={...y,type:"Empty"}),g=wf.createEntity(h,y,e),g.overrideData=p,i.add(g),i.children.splice(i.children.length-1,1),i.children.splice(c,0,g),g.updateState(g.data,e),v&&g.changeSelectedState(v,e),e.scene.registerInstanceAndSetUuid(g)}g.isBone&&(l[g.identity[g.identity.length-1]]=g.uuid),c+=1,gQ(e,t,n,g,d,o,s+1,a,l)}if(!a){let d=c;for(;;){let h=i.children[c];if(!dr.is(h))break;e.pendingDeletes.add(h),c+=1}i.children.splice(d,c-d)}return!0}var CBe=class extends(b1(LV,Y_)){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},el=class extends Ka{constructor(e,t,n){super(e,t,n),this.onBeforeRender=i=>{this.uiCanvas.render(i)},this.uiCanvas=new pQ(e+"-canvas",t.geometry.width,t.geometry.height,n),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,n.shared)})}updateByPatchedOpGeometry(e,t,n){super.updateByPatchedOpGeometry(e,t,n),0===e.type&&(void 0!==e.props.frame&&this.applyFrame(e.props.frame,n.shared),(void 0!==e.props.width||void 0!==e.props.height)&&this.applySize(e.props,n.shared))}applySize(e,t){this.uiCanvas.applySize({width:e?.width??this.dataPatched.geometry.width,height:e?.height??this.dataPatched.geometry.height}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){let t=this.frame;t&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),this.localGeometry?.dispose(),this.localGeometry=N_(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let n=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:n.radius,alpha:n.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:n.radius,alpha:n.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,n,i){this.uiCanvas.updateEntity2DByOp(e,t,n,i),e===this.frameId&&0===t.type&&(void 0!==t.props.cornerRadius?this.applyGeometryParametersFromFrame(i):ro(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:i}))}get frame(){return this.uiCanvas.frame}get frameId(){return this.frame?.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},Aa=new wa,B2=new te;function vQ(e,t){let n=e,i=new Float32Array(4*t*t);for(let o=0;o<t*t;o++)i[4*o]=n[3*o],i[4*o+1]=n[3*o+1],i[4*o+2]=n[3*o+2],i[4*o+3]=0;let r=new Uc(i,t,t,ra,Cs);return r.needsUpdate=!0,r}var VBe=class extends wr{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],qs.startContext(qs.globalContext),this.lightLayer=new zh(0,"",{...la.defaultData("light","phong"),visible:!1},new Vk,{},t.shared),qs.endContext(qs.globalContext),this.build()}updateState(e){void 0!==e.coloring&&(this.isColoringRandom="random"===e.coloring),void 0!==e.color&&(this.uniforms.uColor.value=e.color instanceof Array?e.color:this.context.shared.color(e.color)),void 0!==e.color2&&(this.uniforms.uColor2.value=e.color2 instanceof Array?e.color2:this.context.shared.color(e.color2)),void 0!==e.size&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],this.useSizeEnd=e.size[0]!==e.size[1]),void 0!==e.ease&&(this.easeOpacity=e.ease,this.build()),void 0!==e.easeSize&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new rX;return e.needsJitter=this.needsJitter,e.addFragmentParsCode("\nlayout(location = 1) out vec4 gVelocity;\n"),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode("\n    // Discard fully transparent pixels \n    if (gl_FragColor.a <= 0.0) discard;\n\n    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);\n"),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode("\n  uniform sampler2D uPosition;\n  uniform float uSize;\n  uniform float uSizeEnd;\n  uniform vec3 uWorldOffset;\n  uniform vec4 uWorldQuaternion;\n  // Billboard Behavior - Currently at Zero, but we can change that\n  uniform float uRotation;\n  uniform float uRotationEnd;\n  uniform vec2 center;\n\n  // Randomness\n  uniform float uRandScaleFactor;\n  uniform float uRandRotationFactor;\n\n  attribute vec2 ref;\n\n  varying float v_LifeLeft;    // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  \n\nfloat rand(vec3 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n    \n  return acceleration;\n}\n\n  \n\n  // Linear Fade In\n  float linearFadeIn(float t) {\n    return t;\n  }\n\n\n  // linear fade out\n  float linearFadeOut(float t) {\n    return 1.0 - t;\n  }\n  \n  float linearInOut(float t) {\n    return t < 0.5 ? t :  (1.0 - t);  \n  }\n\n    // lerp\n    float lerp(float a, float b, float t) {\n      return a + (b - a) * t;\n    }\n\n  // Ease In Out Quart\n  float exponentialInOut(float t) {\n    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :\n    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :\n    1.0;\n   }\n\n  // constant\n  float constant(float t) {\n    return 1.0;\n  } \n\n"),e.addFragmentParsCode("\n  uniform vec4 uColor;                // start color\n  uniform vec4 uColor2;               // end color\n  uniform sampler2D uTexture;         // texture\n  varying float v_LifeLeft;   // normalized lifetime 1 to 0\n  varying vec2 vUv;\n  varying vec2 vRef;\n\n  float random(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n  }\n  \n\n  // Linear Fade In\n  float linearFadeIn(float t) {\n    return t;\n  }\n\n\n  // linear fade out\n  float linearFadeOut(float t) {\n    return 1.0 - t;\n  }\n  \n  float linearInOut(float t) {\n    return t < 0.5 ? t :  (1.0 - t);  \n  }\n\n    // lerp\n    float lerp(float a, float b, float t) {\n      return a + (b - a) * t;\n    }\n\n  // Ease In Out Quart\n  float exponentialInOut(float t) {\n    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :\n    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :\n    1.0;\n   }\n\n  // constant\n  float constant(float t) {\n    return 1.0;\n  } \n  \n  \nvec3 rgb2xyz (in vec3 rgb) {\n    float r = rgb.r;\n\tfloat g = rgb.g;\n\tfloat b = rgb.b;\n\n\tr = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tfloat x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tfloat y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tfloat z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n    \n    vec3 xyz = vec3(\n        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,\n        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,\n        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0\n    );\n    return(xyz);\n}\n\nvec3 xyz2lab (in vec3 xyz) {\n\tfloat x = xyz.x / 95.047;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 108.883;\n\n\tx = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);\n\ty = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);\n\tz = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);\n\n    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));\n    return(lab);\n}\n\nvec3 rgb2lab(in vec3 rgb) {\n    vec3 xyz = rgb2xyz(rgb);\n    vec3 lab = xyz2lab(xyz);\n    return(lab);\n}\n\nvec3 xyz2rgb (in vec3 xyz) {\n\tfloat x = xyz.x / 100.0;\n\tfloat y = xyz.y / 100.0;\n\tfloat z = xyz.z / 100.0;\n\t\n    \n\tfloat r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);\n\tfloat g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);\n\tfloat b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);\n\n\tr = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;\n\tg = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;\n\tb = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;\n\n\tr = min(max(0.0, r), 1.0);\n\tg = min(max(0.0, g), 1.0);\n\tb = min(max(0.0, b), 1.0);\n\n\treturn(vec3(r, g, b));\n}\n\nvec3 lab2xyz (in vec3 lab) {\n    float l = lab.x;\n\tfloat a = lab.y;\n\tfloat b = lab.z;\n\n  \tfloat y = (l + 16.0) / 116.0;\n\tfloat x = a / 500.0 + y;\n\tfloat z = y - b / 200.0;\n\n\tfloat y2 = pow(y, 3.0);\n\tfloat x2 = pow(x, 3.0);\n\tfloat z2 = pow(z, 3.0);\n\n  \ty = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100.0;\n\tz *= 108.883;\n\n\treturn(vec3(x, y, z));\n}\nvec3 lab2rgb (in vec3 lab) {\n    vec3 xyz = lab2xyz(lab);\n    vec3 rgb = xyz2rgb(xyz);\n    return(rgb);\n}\n\n\n\n"),e.addVertexFinalCode((({easeSize:e="linearFadeOut"})=>`\n  vUv = uv;  \n  vRef = ref;\n  // Normalized LifeTime 1 to 0\n  float lifeLeft = texture2D(uPosition, ref).w;\n  v_LifeLeft = lifeLeft;\n  // Position From DataTexture Simulation\n  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;\n  // Apply World Quaternion\n  pos = applyQuaternionToVector(uWorldQuaternion, pos);  \n            \n  #ifdef  USE_SIZE_END\n    // Scaled Over Time\n    float t = 1. - lifeLeft;\n    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd\n    vec3 scaledPosition = position * vec3(currentSize);\n  #else\n    // Change Size Behavior over LifeTime\n    float easeSize = ${e}(1. - lifeLeft);\n    // Scaled Over Time\n    vec3 scaledPosition = position * vec3(uSize * easeSize);\n  #endif\n\n  // Billboard Behavior\n  vec2 scale;\n  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    \n  // Randomness \n  float randRef = rand(ref);\n  scale *= (1.0 - (uRandScaleFactor * randRef));\n  // Rotation\n  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);\n  float originalRotation = (1.0 - uRotation) * 2.0 * PI;\n  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;\n  // OverTime\n  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);\n\n  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;\n  vec2 rotatedPosition;\n  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;\n  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;\n  \n  mat4 instanceMatrix = mat4(\n    vec4(1.0, 0.0, 0.0, 0.0),\n    vec4(0.0, 1.0, 0.0, 0.0),\n    vec4(0.0, 0.0, 1.0, 0.0),\n    vec4(pos.x, pos.y, pos.z, 1.0)\n  );  \n\n  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n  mvPosition.xy += rotatedPosition;\n  gl_Position = projectionMatrix  * mvPosition;   \n`)({easeSize:this.easeSize})),e.addFragmentFinalCode((({easeOpacity:e="linearFadeOut"})=>`  \n  // if Particle is dead, hide it\n  if (v_LifeLeft <= 0.005 ) {\n    discard;\n  }\n\n  #ifdef USE_RANDOM_COLORING\n    float randVal = random(vRef); // Generate a random value based on the reference\n    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors\n  #else\n    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);\n  #endif\n\n  // Opacity over Life Time\n  float finalAlpha = ${e}(1. - v_LifeLeft);  \n  vec4 textureColor = texture2D(uTexture, vUv).rgba; \n  finalColor = textureColor.rgb * color.rgb;\n  finalAlpha = color.a * textureColor.a * finalAlpha;\n  \n  gl_FragColor = vec4(finalColor, finalAlpha);     \n\n`)({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},WR=class{constructor(e,t,n,i){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=n,this.textureSize=function SBe(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}(t),this.targetMesh="Mesh"===i?.type&&i?i:this.getMesh(n,1);let{positions:o,dataTexture:s,dataTextureNormals:a}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(n,1));this.positionsTexture=s,this.positionsAttribute=o,this.directionsTexture=a}createPositions(e,t){let{positions:n,normals:i}=function OBe(e,t){let n=new Vo(e.geometry,e.material),i=[],r=[],o=new te,s=new te;null!==n.geometry.index&&(n.geometry=n.geometry.toNonIndexed());let a=new class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||3!==t.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,n=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let o=1;t&&(o=t.getX(r)+t.getX(r+1)+t.getX(r+2)),Aa.a.fromBufferAttribute(e,r),Aa.b.fromBufferAttribute(e,r+1),Aa.c.fromBufferAttribute(e,r+2),o*=Aa.getArea(),n[r/3]=o}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<n.length;r++)i+=n[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,n){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t,n)}binarySearch(e){let t=this.distribution,n=0,i=t.length-1,r=-1;for(;n<=i;){let o=Math.ceil((n+i)/2);if(0===o||t[o-1]<=e&&t[o]>e){r=o;break}e<t[o]?i=o-1:n=o+1}return r}sampleFace(e,t,n,i){let r=this.randomFunction(),o=this.randomFunction();return r+o>1&&(r=1-r,o=1-o),Aa.a.fromBufferAttribute(this.positionAttribute,3*e),Aa.b.fromBufferAttribute(this.positionAttribute,3*e+1),Aa.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(Aa.a,r).addScaledVector(Aa.b,o).addScaledVector(Aa.c,1-(r+o)),void 0!==n&&Aa.getNormal(n),void 0!==i&&void 0!==this.colorAttribute&&(Aa.a.fromBufferAttribute(this.colorAttribute,3*e),Aa.b.fromBufferAttribute(this.colorAttribute,3*e+1),Aa.c.fromBufferAttribute(this.colorAttribute,3*e+2),B2.set(0,0,0).addScaledVector(Aa.a,r).addScaledVector(Aa.b,o).addScaledVector(Aa.c,1-(r+o)),i.r=B2.x,i.g=B2.y,i.b=B2.z),this}}(n).build();for(let d=0;d<t;d++)a.sample(o,s),i.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z);return{positions:new Float32Array(i),normals:new Float32Array(r)}}(t,e*e);return{dataTexture:vQ(n,e),positions:n,dataTextureNormals:vQ(i,e)}}getMesh(e,t){let n=null;switch(e){case"SphereEmitterShape":n=new Cv(.5*t,32,32);break;case"TorusEmitterShape":n=new oH(.5*t,.3,15,40);break;case"ConeEmitterShape":n=new $T(t,t,15);break;case"BoxEmitterShape":n=new Dd(t,t,t);break;case"PlaneEmitterShape":n=new Uu(t,t),n.rotateX(-Math.PI/2);break;default:n=new Cv(t,32,32)}return new Vo(n,new zu({color:16711680}))}applyToShader(e,t){this.size=(new te).fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function P1(e){let t={...e},n=wP.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let i={...n.shape,...t.shape},r={...n.renderMaterial,...t.renderMaterial};return{...n,...t,shape:i,renderMaterial:r}}var GBe=class extends Fr{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Lwe,this.currentWorldPosition=new te,this.systemQuaternion=new _i,this.worldGravity=new te(0,0,0),this.directionAxis=new te(0,0,0),this.colliderV3=new te(0,0,0),this.colliderQuaternion=new _i(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let n=t.data;this.material=new VBe(n.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:n.renderMaterial.color},uColor2:{value:n.renderMaterial.color2},uPosition:{value:new te(0,0,0)},uEmissionData:{value:new te(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new te(0,0,0)},uWorldQuaternion:{value:new bi(0,0,0,1)},uRandScaleFactor:{value:n.randomScale??0},uRandRotationFactor:{value:n.randomRotation??0},uRotation:{value:n.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:n.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,n.renderMaterial.texture),this.init(n)}setTexture(e,t){let n=t.data;if("string"==typeof t){let i=this.shared.image(t),r=new jo(i.img);return r.needsUpdate=!0,void(e.uTexture.value=r)}if("string"!=typeof n){let i=new Image;i.onload=()=>{let s=new jo(i);s.needsUpdate=!0,e.uTexture.value=s};let r=new Blob([n],{type:"image/*"}),o=URL.createObjectURL(r);i.src=o}}updateGeometryAttributes(e,t){let n=function PBe(e){let t=new Float32Array(e*e*2);for(let n=0;n<e;n++)for(let i=0;i<e;i++){let r=n*e+i;t[2*r+0]=n/(e-1),t[2*r+1]=i/(e-1)}return t}(t);!this.emitterShape?.positionsAttribute||e.geometry.setAttribute("ref",new zb(n,2))}applyWorldSpace(){if(!(this.system.started&&this.worldSpace&&this.positionSimRT&&this.velocitySimRT))return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset)return void this.reset();this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let r=this.previousRatio+(this.targetFPS/(1e3/t)-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=r,this.previousRatio=r;let o=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=o,this.material.uniforms.uPosition.value=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT)?.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0];e.destroyedInAction&&(this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX)&&this.init(P1({...this.system.data,colliderEntityId:null})),e&&!e.destroyedInAction&&(e.getWorldPosition(this.colliderV3),0===this.colliderV3.y&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3),this.colliderV3.fromArray(e.data.size),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert()))}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;"size"===t[2]&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),"sizeEnd"===t[2]&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let n=(i,r)=>{let o=[...this.system.data.shape.size];o[i]=r,this.updateParticleState({shape:{...this.system.data.shape,size:o}})};"shape_size_0"===t[2]&&n(0,e),"shape_size_1"===t[2]&&n(1,e),"shape_size_2"===t[2]&&n(2,e),"speed"===t[2]&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/10),"gravity"===t[2]&&this.worldGravity.set(0,e/100,0),"noiseStrength"===t[2]&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),"noiseScale"===t[2]&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),"direction_x"===t[2]&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),"direction_y"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),"direction_z"===t[2]&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){if(this.positionSimRT&&this.velocitySimRT){if(this.shouldReInitGPUCompute(e)&&this.init(P1(this.system.data)),void 0!==e.life&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),void 0!==e.speed&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10),void 0!==e.collisionBounce&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),void 0!==e.noiseStrength&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),void 0!==e.noiseScale&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),void 0!==e.noiseSeed&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),void 0!==e.randomMass&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),void 0!==e.renderMaterial?.size){let t=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(t)}if(void 0!==e.renderMaterial?.spriteRotation&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),void 0!==e.shape){let t=e.shape.size??this.system.data.shape.size,n=[Number(this.shared.getVariable(t[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(t[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(t[2],[this.uuid,"particles","shape_size_2"]))],i={...P1(this.system.data).shape,size:n};this.emitterShape?.applyToShader(this.positionSimRT.material.uniforms,i)}if(void 0!==e.gravity&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),void 0!==e.direction){let t=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(t),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}void 0!==e.randomRotation&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),void 0!==e.randomScale&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(void 0!==e.forceIntensity&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),void 0!==e.forceDambing&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*En.DEG2RAD,Number(e[1])*En.DEG2RAD,Number(e[2])*En.DEG2RAD],n=new js(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(n).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:n,colliderEntityId:i,shape:r,emitTimeDuration:o,emitTimeCycle:s,life:a,directionMode:l,noiseType:c}=e;return void 0!==t||void 0!==n||i||null===i||void 0!==s||void 0!==r||void 0!==a||void 0!==o||void 0!==l||void 0!==c}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:"infinity"===e.emitTimeCycle?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape){if(isNaN(this.emitterShape.positionsTexture.source.data.data[0]))return void this.init(e);clearInterval(t)}},100);if(!this.emitterShape)return;let n=new class{constructor(e,t,n){this.variables=[],this.currentTextureIndex=0;let i=Cs,r=new _h,o=new Xm;o.position.z=1;let s={passThruTexture:{value:null}},a=d("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",s),l=new Vo(new Uu(2,2),a);function c(g){g.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function d(g,v){let y=new wr({uniforms:v=v||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:g});return c(y),y}r.add(l),this.setDataType=function(g){return i=g,this},this.addVariable=function(g,v,y){let P={name:g,initialValueTexture:y,material:this.createShaderMaterial(v),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Ir,magFilter:Ir};return this.variables.push(P),P},this.setVariableDependencies=function(g,v){g.dependencies=v},this.init=function(){if(!1===n.capabilities.isWebGL2&&!1===n.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(let g=0;g<this.variables.length;g++){let v=this.variables[g];v.renderTargets[0]=this.createRenderTarget(e,t,v.wrapS,v.wrapT,v.minFilter,v.magFilter),v.renderTargets[1]=this.createRenderTarget(e,t,v.wrapS,v.wrapT,v.minFilter,v.magFilter),this.renderTexture(v.initialValueTexture,v.renderTargets[0]),this.renderTexture(v.initialValueTexture,v.renderTargets[1]);let y=v.material,b=y.uniforms;if(null!==v.dependencies)for(let P=0;P<v.dependencies.length;P++){let S=v.dependencies[P];if(S.name!==v.name){let O=!1;for(let A=0;A<this.variables.length;A++)if(S.name===this.variables[A].name){O=!0;break}if(!O)return"Variable dependency not found. Variable="+v.name+", dependency="+S.name}b[S.name]={value:null},y.fragmentShader="\nuniform sampler2D "+S.name+";\n"+y.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let g=this.currentTextureIndex,v=0===this.currentTextureIndex?1:0;for(let y=0,b=this.variables.length;y<b;y++){let P=this.variables[y];if(null!==P.dependencies){let S=P.material.uniforms;for(let O=0,A=P.dependencies.length;O<A;O++){let H=P.dependencies[O];S[H.name].value=H.renderTargets[g].texture}}this.doRenderTarget(P.material,P.renderTargets[v])}this.currentTextureIndex=v},this.getCurrentRenderTarget=function(g){return g.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(g){return g.renderTargets[0===this.currentTextureIndex?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let g=this.variables;for(let v=0;v<g.length;v++){let y=g[v];y.initialValueTexture&&y.initialValueTexture.dispose();let b=y.renderTargets;for(let P=0;P<b.length;P++)b[P].dispose()}},this.addResolutionDefine=c,this.createShaderMaterial=d,this.createRenderTarget=function(g,v,y,b,P,S){return new Or(g=g||e,v=v||t,{wrapS:y=y||Ao,wrapT:b=b||Ao,minFilter:P=P||Ir,magFilter:S=S||Ir,format:ra,type:i,depthBuffer:!1})},this.createTexture=function(){let g=new Float32Array(e*t*4),v=new Uc(g,e,t,ra,Cs);return v.needsUpdate=!0,v},this.renderTexture=function(g,v){s.passThruTexture.value=g,this.doRenderTarget(a,v),s.passThruTexture.value=null},this.doRenderTarget=function(g,v){let y=n.getRenderTarget(),b=n.xr.enabled,P=n.shadowMap.autoUpdate,S=n.outputEncoding,O=n.toneMapping;n.xr.enabled=!1,n.shadowMap.autoUpdate=!1,n.outputEncoding=Pd,n.toneMapping=0,l.material=g,n.setRenderTarget(v),n.render(r,o),l.material=a,n.xr.enabled=b,n.shadowMap.autoUpdate=P,n.outputEncoding=S,n.toneMapping=O,n.setRenderTarget(y)}}}(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),i=this.updateSimulationDefinition(e),r=n.addVariable("uCurrentPosition",i+"\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform float uTime;\nuniform float uSpeed;     // update speed of the particles\nuniform vec3 uWorldOffset;    \nuniform vec4 uWorldQuaternion;\nuniform float uMaxLifeTime;\nuniform vec3 uEmitterSize;\nuniform float uFPSRatio;     // 1  for 60 FPS\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n        vec2(12.9898,78.233)))*\n        43758.5453123);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n\nvec3 applyForce(vec3 force, float mass) {\n    vec3 acceleration = force / mass;\n    \n    return acceleration;\n  }\n  \n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted\n    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);\n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided\n    float lifeTime = uMaxLifeTime;\n\n    // Calculate the position adjustment based on collision\n    //     if (collisionFlag > .5) {  \n    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0\n    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise\n    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);\n\n    // Update position based on collision or normal movement\n    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);\n    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);\n\n    // EMISSION RATE - BIRTH\n    // if (isSpawning == 1.0) {\n    // Better Approach to avoid If statement\n    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;\n    originalPosition = mix(originalPosition, newPosition, isSpawning);\n    position = mix(position, originalPosition, isSpawning);;\n    timeStart = mix(timeStart, uTime, isSpawning);\n\n    // Calculate timeLeft for life normalization\n    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);\n    float life_Normalize = timeLeft / lifeTime;\n\n    // Use isActive to blend between the calculated color and black\n    vec4 activeColor = vec4(position, life_Normalize);\n    // if (isActive == 1.0) {\n    gl_FragColor = mix(vec4(0.0), activeColor, isActive);\n\n}\n",this.emitterShape.positionsTexture),o=n.addVariable("uCurrentVelocity",i+"\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\nuniform sampler2D uOriginalPosition;\nuniform sampler2D uDirections;     \nuniform vec3 uDirectionsAxis;\nuniform vec4 uWorldQuaternion;\nuniform vec3 uGravity;        \nuniform float uNoiseStrength;     // Variation of the noise\nuniform float uNoiseScale;        // Scale of the noise\nuniform float uNoiseSeed;         // Seed of the noise\nuniform float particleSize;\nuniform float uSpeed;     // update speed of the particles\nuniform float uRandomMassFactor;\n\n// COLLIDER\nuniform vec3 uColliderPos;                // Collider Position\nuniform vec3 uColliderSize;               // Collider Dimension\nuniform vec4 uColliderQuaternion;         // Collider Rotation\nuniform vec4 uColliderQuaternionInvert;   // Collider Rotation\nuniform float uBounce;                    // Bounce factor\nuniform float uForceDamping;\nuniform float uForceIntensity;\n\n\n\n\n    vec3 mod289(vec3 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 mod289(vec4 x) {\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 permute(vec4 x) {\n        return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    vec4 taylorInvSqrt(vec4 r)\n    {\n    return 1.79284291400159 - 0.85373472095314 * r;\n    }\n    \n    vec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n    float snoise(vec3 v)\n    {\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n    \n    // Permutations\n    i = mod289(i);\n    vec4 p = permute( permute( permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n    \n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                  dot(p2,x2), dot(p3,x3) ) );\n    }\n    \n    vec3 snoiseVec3( vec3 x ){\n    \n      float s  = snoise(vec3( x ));\n      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n      vec3 c = vec3( s , s1 , s2 );\n      return c;\n    \n    }\n    \n      \n    vec3 curlNoise( vec3 p, float seed){\n      p += seed;\n      const float e = .1;\n      vec3 dx = vec3( e   , 0.0 , 0.0 );\n      vec3 dy = vec3( 0.0 , e   , 0.0 );\n      vec3 dz = vec3( 0.0 , 0.0 , e   );\n    \n      vec3 p_x0 = snoiseVec3( p - dx );\n      vec3 p_x1 = snoiseVec3( p + dx );\n      vec3 p_y0 = snoiseVec3( p - dy );\n      vec3 p_y1 = snoiseVec3( p + dy );\n      vec3 p_z0 = snoiseVec3( p - dz );\n      vec3 p_z1 = snoiseVec3( p + dz );\n    \n      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n    \n      const float divisor = 1.0 / ( 2.0 * e );\n      return normalize( vec3( x , y , z ) * divisor );\n    \n    }\n\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n\nvec3 fbm_vec3(vec3 p, float frequency, float offset)\n{\n  return vec3(\n    cnoise((p+vec3(offset))*frequency),\n    cnoise((p+vec3(offset+20.0))*frequency),\n    cnoise((p+vec3(offset-30.0))*frequency)\n  );\n}\n\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\nvec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n } \nvec3 applyForce(vec3 force, float mass) {\n  vec3 acceleration = force / mass;\n  \n  return acceleration;\n}\n\nvec4 conjugate(vec4 q) {\n  return vec4(q.w, -q.x, -q.y, -q.z);\n}\n\n// Function to compute the normal of the ellipsoid at a given point\nvec3 ellipsoidNormal(vec3 p, vec3 radii) {\n  return normalize(p / (radii * radii));\n}\n\nfloat friction = .3;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;\n    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    vec3 directions = texture2D( uDirections, vUv ).xyz;    \n    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;\n    float mass = rand(originalPosition.xy) * 0.5 + 0.5;\n    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active\n    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision\n\n    // Randomness Mass\n    mass = (1.0 - (uRandomMassFactor * mass));\n    \n    if (isActive == 1.0) {\n      // **************************************************************\n      // FORCES NOISES\n      // **************************************************************\n      #ifdef USE_CURL_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {\n          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;\n        }\n      #endif\n      // **************************************************************\n      #ifdef USE_SIMPLEX_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {\n          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);\n        }\n      #endif\n      // ************************************************************** \n      #ifdef USE_FBM_NOISE\n        if (uNoiseScale > 0.0 ) {\n          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);\n          velocity *= uSpeed;\n        }\n        // Variation of the noise Over Time\n        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      \n          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;\n        }\n      #endif\n\n      // COLLIDER\n      \n  #ifdef USE_COLLIDER\n    float restitution = max(uBounce * 2., .01); // Energy Loss\n    // SPHERE COLLIDER\n    // **************************************************************\n    #ifdef USE_SPHERE_COLLIDER       \n      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n      vec3 radii = uColliderSize;\n      // Adjust position relative to collider\n      vec3 relPos = position - uColliderPos;\n      // Apply rotation of the collider to the relative position\n      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n      // Scale relative position by radii (for ellipsoid collision detection)\n      vec3 scaledPos = relPos / radii;\n      // Calculate ellipsoidal distance\n      float dist = length(scaledPos); // Distance in terms of ellipsoid\n      \n      // Check for collision\n      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {\n          // Compute the normal at the collision point, accounting for particle size\n        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          \n        // Compute the normal at the collision point\n        vec3 normal = ellipsoidNormal(adjustedPos, radii);\n        // Rotate the normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);\n        // Reflect the velocity vector off the normal\n        velocity = reflect(velocity, normal) * restitution;\n\n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif\n\n    // BOX COLLIDER or PLANE COLLIDER \n    // **************************************************************\n    #ifdef USE_BOX_COLLIDER\n      // Box dimensions and repulsion variables\n      vec3 boxHalfSize = uColliderSize / 2.0;\n      // Convert world position to box's local space\n      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n      // Collision detection\n      vec3 localDistance = abs(localPos) - boxHalfSize;\n      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    \n\n      // Collision Detected\n      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      \n        // Find the nearest face normal for bounce direction\n        vec3 normal;\n        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {\n            normal = vec3(sign(localPos.x), 0.0, 0.0);\n        } else if (localDistance.y > localDistance.z) {\n            normal = vec3(0.0, sign(localPos.y), 0.0);\n        } else {\n            normal = vec3(0.0, 0.0, sign(localPos.z));\n        }            \n        // Rotate normal back to world space\n        normal = applyQuaternionToVector(uColliderQuaternion, normal);      \n        // Reflect velocity and apply repulsion force\n        velocity = reflect(velocity, normal) * restitution;\n        \n        collisionFlag = 1.0;\n      } else {\n        collisionFlag = 0.0;\n      }\n    #endif      \n  #endif      \n  // END COLLIDER    \n\n      // ATTRACTION\n      \n  #ifdef USE_ATTRACTOR\n\n      #ifdef USE_SPHERE_COLLIDER      \n        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)\n        vec3 radii = uColliderSize;\n        // Adjust position relative to collider\n        vec3 relPos = position - uColliderPos;\n        // Apply rotation of the collider to the relative position\n        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n        // Scale relative position by radii (for ellipsoid collision detection)\n        vec3 scaledPos = relPos / radii;\n        // Calculate ellipsoidal distance\n        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid\n        float insideCheck = 1.0;\n\n      #endif\n\n\n      #ifdef USE_BOX_COLLIDER\n        // Box dimensions\n        vec3 boxHalfSize = uColliderSize / 2.0;\n        // Convert world position to box's local space\n        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n        vec3 localDistance = abs(localPos) - boxHalfSize;\n        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n        float insideCheck = particleSize;\n      #endif      \n  \n      // Apply vortex force inside the Helper\n      #ifdef USE_FORCE_LOCAL_SPACE\n        if (distToSurface <= insideCheck ) {    \n            // Define parameters for the attractor field\n            #ifdef USE_SPHERE_COLLIDER      \n              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed\n            #endif\n\n            #ifdef USE_BOX_COLLIDER\n              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed\n              #endif\n\n            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)\n          \n            // Use the same radii calculation code as for the collider\n            vec3 attractorRadii = uColliderSize;\n            // Adjust position relative to attractor center\n            vec3 relPos = position - uColliderPos;\n            // Apply rotation of the collider to the relative position\n            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            \n            // Scale relative position by radii (for ellipsoid attraction)\n            vec3 scaledPos = relPos / attractorRadii;\n\n            // Calculate ellipsoidal distance as attractor radius\n            float attractorRadius = length(scaledPos);\n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * attractorStrength;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= attractorDamping;\n        }\n      #else \n            // Calculate the distance from the attractor center\n            vec3 relativePosition = position - uColliderPos;\n            // Calculate the force vector towards the attractor center\n            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;\n            // Apply the attractor force to the particle\n            velocity -= attractorForce;\n            // Attenuate the particle's velocity\n            velocity *= uForceDamping;\n      #endif    \n  #endif      \n  \n      // VORTEX\n      \n  #ifdef USE_VORTEX\n    // Box dimensions\n    vec3 boxHalfSize = uColliderSize / 2.0;\n    // Convert world position to box's local space\n    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      \n    vec3 localDistance = abs(localPos) - boxHalfSize;\n    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));\n\n    // Apply vortex force inside the box\n    if (distToSurface <= particleSize) {\n      float vortexStrength = uForceIntensity;\n      vec3 localTopCenter = vec3(0.0, 0., 0.0);\n\n      // Transform the local top center to the world space\n      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);\n      // Calculate the vector from particle to vortex center\n      vec3 vortexVector = vortexCenter - position;\n\n      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector\n      // Note: important to add a tiny z component to the up vector to avoid instability\n      vec3 upVector = vec3(0.0, 1.0, 0.01);\n      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));\n      rotationAxis = normalize(rotationAxis);\n\n      // Add rotational component to velocity\n      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; \n\n      vec3 rotationVelocity = rotationAxis * rotationSpeed;\n      // velocity += rotationVelocity * 0.005 ;\n      velocity = rotationVelocity * 0.005 ;\n\n      // Calculate vortex force\n      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;\n      // Apply the vortex force to the particle\n      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);\n      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);\n    }\n  #endif      \n\n    } \n    // End isActive\n\n    // SPAWN BIRTH \n    // **************************************************************\n    // if (isSpawning == 1.)\n    #ifdef USE_NORMALS\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);\n    #else\n      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    \n    #endif\n    \n    // if (collisionFlag == 0.0)\n    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);\n\n    gl_FragColor = vec4(velocity, collisionFlag);\n}\n",this.emitterShape.directionsTexture),s=n.addVariable("uCurrentEmissionRate","\n// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU\n// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU\n\nuniform sampler2D uIndex; // Texture with corresponding index\nuniform float uLastIndexEmitted; // Last emitted index\nuniform float uParticlesToEmit; // Number of particles to emit on that frame\nuniform float uTime;\n\nvoid main() {\n    vec2 vUv = gl_FragCoord.xy / resolution.xy;\n    float particleIndex = texture(uIndex, vUv).x;\n    float timeLeft = texture2D( uCurrentPosition, vUv ).w;\n    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active\n    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;\n\n\n    // ********** Detect Colision to Create a flag and use it in position **********\n    // We are doing this here, so\n\n    // ********** Emit Particles **********\n    // X = isSpawning 0.0 or 1.0\n    // Y = isActive 0.0 or 1.0\n    // Check if the vertex index is between the first value and the last value\n    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {\n    //     // Emit a particle by writing 1 to the red channel of the color output\n    //     // r: 1. == emit the particle\n    //     // g: 1. == particle is now active\n    //     timeStart = uTime;\n    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);\n    // } else {\n    //     // The Particle is either already emitted or not in the range of the particles to emit\n    //     // Do not emit a particle by writing 0 to the red channel of the color output        \n    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);\n    // }\n    // Determine if the particle is within the emission range\n    float emitLowerBound = step(uLastIndexEmitted, particleIndex);\n    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);\n    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise\n\n    // Set timeStart and color\n    timeStart = mix(timeStart, uTime, emitParticle);\n    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);\n\n\n}\n",function DBe(e){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=0,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let n=new Uc(t,e,e,ra,Cs);return n.needsUpdate=!0,n}(this.emitterShape.textureSize));n.setVariableDependencies(r,[r,o,s]),n.setVariableDependencies(o,[r,o,s]),n.setVariableDependencies(s,[r,o,s]);let a=function EBe({size:e}){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=i,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let n=new Uc(t,e,e,ra,Cs);return n.needsUpdate=!0,n}({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new te(0,0,0)},uWorldQuaternion:{value:new bi(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new te(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};r.material.uniforms=l;let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let d=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),h={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new bi(0,0,0,1)},uColliderPos:{value:new te(0,0,0)},uColliderSize:{value:new te(0,0,0)},uForceIntensity:{value:d?d.forceIntensity:0},uForceDamping:{value:d?d.forceDambing:0},uColliderQuaternion:{value:new bi(0,0,0,1)},uColliderQuaternionInvert:{value:new bi(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/10}};o.material.uniforms=h,s.material.uniforms={uIndex:{value:a},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};let g=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],v={...P1(this.system.data).shape,size:g};this.emitterShape.applyToShader(r.material.uniforms,v),n.init(),this.gpuCompute=n,this.positionSimRT=r,this.velocitySimRT=o,this.emissionRateSimRT=s,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){return[Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]))]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let n=this.system.getColliderData(e.colliderEntityId);switch(n?.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0}let i=n?.colliderType;"sphere"===i&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),"box"===i&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),"helper"===n?.forceRange&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}"normals"===e.directionMode&&(this.simFeaturesDefinition.USE_NORMALS=!0),"curl"===e.noiseType&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),"simplex"===e.noiseType&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),"fbm"===e.noiseType&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[n,i]of Object.entries(this.simFeaturesDefinition))i&&(t+=`#define ${n}\n`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let n=new te(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if("MeshEmitterShape"===e.type){let i=null;return this.system.context.scene.traverseEntity(r=>{r.uuid===e.fromMeshId&&(i=r)}),i?new WR(n,t,e.type,i):new WR(n,t,"SphereEmitterShape")}return new WR(n,t,e.type)}createPrimaryEmitter(e){let t,n=e*e;return t=new KCe(new Uu(1,1,1),this.material,n),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:n=0}){return Math.ceil(e*(t+n))}dispose(){!this.gpuCompute||(this.rootObject?.parent?.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),this.emitterShape?.dispose())}GoEmitSomeParticles(e,t){let n=e-this.lastEmitTime,i=1/t;if(n>=i){let r=Math.max(1,Math.floor(n/i));return this.lastEmitTime=e,this.emittedParticlesAmount+r>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=r,r}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(P1(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},z2=class extends yl{constructor(e,t,n){super(e,t),this.type="ParticleSystem",this.geometry=new Xn,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=i=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(i))},this.context=n,this.data={...t,...P1(t)},this.geometry.setAttribute("position",new _n([],3)),this.material=new zu({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new GBe(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t="one_time"===this.data.emitTimeCycle;("loop"===this.data.emitTimeCycle||t)&&this.currentLoopTime>1e3*this.data.emitTimeDuration&&(this.stopped||(this.stop(),t||this.start(1e3*this.data.emitTimeDelay))),this.emitter&&this.started&&this.emitter.update(this.actualTime/1e3,e),this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(n=>n.identity===e);return t?t.data:null}updateByPatchedOp(e,t,n){super.updateByPatchedOp(e,t,n),ro(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...sa.drop(e,1).props}}),ro(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...sa.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(null!=e.colliderEntityId){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}null===e.colliderEntityId&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){this.currentLoopTime=0,e?this.timeoutId=window.setTimeout(()=>{this.start(0)},e):(this.started=!0,this.stopped=!1,this.isFrozen=!1,this.emitter?.startEmitting(this.actualTime/1e3))}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){this.stopped=!0,this.currentLoopTime=0,this.emitter?.stopEmitting(),clearTimeout(this.timeoutId)}reset(){this.started=!1,this.stopped=!1,this.emitter?.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}},YR=function WBe(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}();function XR(e,t,n){return console.assert(void 0!==t.type),"Mesh"===t.type?function qBe(e,t,n){let i;return void 0!==YR&&(t?.geometry?.subdivisions??0)>YR&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=YR),"TextGeometry"===t.geometry.type?new sR(e,t,n):"InputGeometry"===t.geometry.type?new HR(e,t,n):(i="SubdivGeometry"===t.geometry.type?new V_(e,t,n):"PathGeometry"===t.geometry.type?new VR(e,t,n):"VectorGeometry"===t.geometry.type?new xBe(e,t,n):"BooleanGeometry"===t.geometry.type?new wg(e,t,n):"UIGeometry"===t.geometry.type?new el(e,t,n):new Ka(e,t,n),i)}(e,t,n):"Empty"===t.type?new C1(e,t):"Particle"===t.type?new z2(e,t,n):"ParticleCollider"===t.type?new S2(e,t,n):"Splat"===t.type?new C1(e,t):"Bone"===t.type?new CBe(e,t):"Page"===t.type?new ua(e,t,n):"PointLight"===t.type?new _Be(e,t,n):"SpotLight"===t.type?new K$(e,t,n):"DirectionalLight"===t.type?new Y$(e,t,n):"Component"===t.type||"Instance"===t.type?new M1(e,t,n):og.is(t.type)?new Za(e,t):(console.error(t),new C1(e,t))}function bQ(e,t){let n=!1,i=t.getLayersOfType("transmission"),r=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),n=!0,rR(e),iR(e)),0===i.length&&0===r.length&&e.layers.set(0),e instanceof v1&&e.needsAO&&e.layers.enable(5),n}function _Q(e,t){if(!t.layers)return!1;let n=!1,i=t.getLayersOfType("transmission").filter(o=>o.data.visible),r=t.getLayersOfType("outline").filter(o=>o.data.visible);return i.length>0&&(e.layers.set(3),r.length>0&&e.layers.enable(8),n=!0),0===i.length&&0===r.length&&e.layers.set(0),e.needsAO&&e.layers.enable(5),n}wf.createEntity=XR,wf.changeEntityProptotype=function YBe(e,t,n){let i=XR(e.identity,t,n),r=e.children,o=e.attachedPaths,s=e.parent,a=e.component,l=e.instances,c=e.overrideData,d=e.uuid,h=e.stateSelection;e.dispose();for(let p of Object.keys(e))delete e[p];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let p of Object.keys(i))e[p]=i[p];e.children=[...e.children,...r],e.attachedPaths=o,e.parent=s,e.component=a,e.instances=l,e.uuid=d,e.overrideData=c,e.updateState(e.data,n),h&&e.changeSelectedState(h,n),e.resetBBoxNeedsUpdate()},wf.Cloner=Ld;var KBe=new bH,ZBe=new qt,JBe=new rv;function $R(e,t,n,i=!1){let r=e.cloner;if(r)for(let o of r.children){let s=ZBe.copy(o.matrixWorld).invert(),a=JBe.copy(t.ray).applyMatrix4(s);a.applyMatrix4(e.matrixWorld);let c=KBe;c.set(a.origin,a.direction),c.near=t.near,c.far=t.far;let d=c.intersectObject(e,!1);d.length>0&&n.push({...d[0],object:i?o:e})}}var Rf=class{};function n6e(e){let t,n,i,r,o,s,a,l,c,d,h,p,g,v,y,b;function S(oe,ce,de){let he=new Float32Array(d,o,3*n);i=0;let Pe=new Uint32Array(d,r,n);for(let we=0;we<de.length-1;we++){let _e=ce[we],ve=oe[we].elements,ke=_e.filter(Le=>Le.enabled&&"Include"===Le.mode).map(Le=>"Box"===Le.type?U(Le):Z(Le)),ze=_e.filter(Le=>Le.enabled&&"Exclude"===Le.mode).map(Le=>"Box"===Le.type?U(Le):Z(Le));for(let Le=de[we];Le<de[we+1];Le++){let Ne=g[3*Le],$e=g[3*Le+1],Be=g[3*Le+2];if((0===ke.length||A(Ne,$e,Be,ke))&&(0===ze.length||!A(Ne,$e,Be,ze))){let Xe=1/(ve[3]*Ne+ve[7]*$e+ve[11]*Be+ve[15]);he[3*i]=(ve[0]*Ne+ve[4]*$e+ve[8]*Be+ve[12])*Xe,he[3*i+1]=(ve[1]*Ne+ve[5]*$e+ve[9]*Be+ve[13])*Xe,he[3*i+2]=(ve[2]*Ne+ve[6]*$e+ve[10]*Be+ve[14])*Xe,Pe[i]=Le,i++}}}}function A(oe,ce,de,he,Pe){return he["Intersect"===Pe?"every":"some"](we=>{let _e=function H(oe,ce,de,he,Pe){let we=oe-Pe[0],_e=ce-Pe[1],ve=de-Pe[2],ke=1/(he[3]*we+he[7]*_e+he[11]*ve+he[15]);return{x:(he[0]*we+he[4]*_e+he[8]*ve+he[12])*ke+Pe[0],y:(he[1]*we+he[5]*_e+he[9]*ve+he[13])*ke+Pe[1],z:(he[2]*we+he[6]*_e+he[10]*ve+he[14])*ke+Pe[2]}}(oe,ce,de,we.invRotationMatrix,we.cropCenter);return Array.isArray(we)?function Y(oe,ce,de,he){return oe>=he[0]&&oe<=he[3]&&ce>=he[1]&&ce<=he[4]&&de>=he[2]&&de<=he[5]}(_e.x,_e.y,_e.z,we):function ee(oe,ce,de,he){let Pe=(oe-he.cropCenter[0])*he.invRadiusX,we=(ce-he.cropCenter[1])*he.invRadiusY,_e=(de-he.cropCenter[2])*he.invRadiusZ;return Pe*Pe+we*we+_e*_e<=1}(_e.x,_e.y,_e.z,we)})}function U(oe){let ce=oe.cropSize[0]/2,de=oe.cropSize[1]/2,he=oe.cropSize[2]/2,Pe=[oe.cropCenter[0]-ce,oe.cropCenter[1]-de,oe.cropCenter[2]-he,oe.cropCenter[0]+ce,oe.cropCenter[1]+de,oe.cropCenter[2]+he],we=X(oe.cropRotation);return Object.assign(Pe,{invRotationMatrix:we,cropCenter:oe.cropCenter})}function X(oe){let ce=[],de=oe[0]*Math.PI/180,he=oe[1]*Math.PI/180,Pe=oe[2]*Math.PI/180,we=Math.cos(de),_e=Math.sin(de),ve=Math.cos(he),ke=Math.sin(he),ze=Math.cos(Pe),Le=Math.sin(Pe),Ne=we*ze,$e=we*Le,Be=_e*ze,Xe=_e*Le;return ce[0]=ve*ze,ce[1]=-ve*Le,ce[2]=ke,ce[4]=$e+Be*ke,ce[5]=Ne-Xe*ke,ce[6]=-_e*ve,ce[8]=Xe-Ne*ke,ce[9]=Be+$e*ke,ce[10]=we*ve,ce[12]=0,ce[13]=0,ce[14]=0,ce[3]=0,ce[7]=0,ce[11]=0,ce[15]=1,ce}function Z(oe){let ce=2/oe.cropSize[0],de=2/oe.cropSize[1],he=2/oe.cropSize[2],Pe=X(oe.cropRotation);return{invRadiusX:ce,invRadiusY:de,invRadiusZ:he,cropCenter:oe.cropCenter,invRotationMatrix:Pe}}e.onmessage=oe=>{if(oe.data.getCroppedIndexes){let ce=new Uint32Array(function O(oe,ce){let de=[],he=ce.filter(_e=>_e.enabled&&"Include"===_e.mode).map(_e=>"Box"===_e.type?U(_e):Z(_e)),Pe=ce.filter(_e=>_e.enabled&&"Exclude"===_e.mode).map(_e=>"Box"===_e.type?U(_e):Z(_e)),we=oe.length;for(let _e=0;_e<we;_e+=3){let ve=oe[_e],ke=oe[_e+1],ze=oe[_e+2];(0===he.length||A(ve,ke,ze,he))&&(0===Pe.length||!A(ve,ke,ze,Pe))||de.push(_e/3)}return de}(new Float32Array(oe.data.positions),oe.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:ce},[ce])}else if(oe.data.positions)h=oe.data.positions,g=new Float32Array(h),y=oe.data.meshMatrixWorlds,b=oe.data.cropsArray,v=oe.data.meshIndexIntervals,S(y,b,v),e.postMessage({sortSetupComplete:!0});else if(oe.data.sort||oe.data.newMatrixWorlds||oe.data.newCropsArray)(oe.data.newMatrixWorlds||oe.data.newCropsArray)&&(b=oe.data.newCropsArray||b,y=oe.data.newMatrixWorlds||y,S(y,b,v)),function P(oe){let de,ce=new Float64Array(d,s,16);for(let he=0;he<16;he++)ce[he]=oe[he];if(i>1){t.exports.sortIndexes(r,o,c,s,a,l,p.DepthMapRange,i);let he=new Uint32Array(i);de=he.buffer,he.set(new Uint32Array(d,l,i))}else if(1===i){let he=new Uint32Array(i);he[0]=new Uint32Array(d,r,n)[0],de=he.buffer}else de=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:de},[de])}(oe.data.sort.view);else if(oe.data.init){p=oe.data.init.Constants,n=oe.data.init.splatCount;let ce=p.BytesPerInt,de=3*p.BytesPerFloat,he=new Uint8Array(oe.data.init.sorterWasmBytes),ze=Math.floor((n*(ce+de)+(n*p.BytesPerInt*2+p.DepthMapRange*p.BytesPerInt*2)+32*p.MemoryPageSize)/p.MemoryPageSize)+1,Le={module:{},env:{memory:new WebAssembly.Memory({initial:2*ze,maximum:3*ze,shared:!0})}};WebAssembly.compile(he).then(Ne=>WebAssembly.instantiate(Ne,Le)).then(Ne=>{t=Ne,r=0,o=n*ce,s=o+n*de,c=s+16*p.BytesPerFloat*2,a=c+n*p.BytesPerInt,l=a+p.DepthMapRange*p.BytesPerInt,d=Le.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}Lm(Rf,"DepthMapRange",65536),Lm(Rf,"MemoryPageSize",65536),Lm(Rf,"BytesPerFloat",4),Lm(Rf,"BytesPerInt",4);var QR=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(n){return e[0]=n,t[0]}}(),r6e=function(e,t,n,i){return e+(t<<8)+(n<<16)+(i<<24)},U2=new Ue;function xQ(e){let t=!1;return e.scene.objects.traverse((n,i)=>{if(!1===i.visible)return!0;"Splat"===i.type&&(t=!0)}),t}var CQ,V2,MQ,j2=class extends Vo{constructor(e,t,n,i,r=!1,o=1,s,a){super(n,i),this.splatCount=t,this.meshIndexIntervals=s,this.meshMatrixWorlds=a,this.splatBuffers=e,this.geometry=n,this.material=i,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=r,this.devicePixelRatio=o,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,n=!1,i=1,r,o){let s=j2.buildGeomtery(t),a=j2.buildMaterial(r);return new j2(e,t,s,a,n,i,r,o)}static buildMaterial(e){let i={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new Ue},viewport:{type:"v2",value:new Ue},basisViewport:{type:"v2",value:new Ue},debugColor:{type:"v3",value:new ni},covariancesTextureSize:{type:"v2",value:new Ue(1024,1024)},centersColorsTextureSize:{type:"v2",value:new Ue(1024,1024)},orthoZoom:{type:"f",value:-1}};return new wr({uniforms:i,vertexShader:"\n            precision highp float;\n            #include <common>\n\n            attribute uint splatIndex;\n\n            uniform highp sampler2D covariancesTexture;\n            uniform highp usampler2D centersColorsTexture;\n            uniform vec2 focal;\n            uniform vec2 viewport;\n            uniform vec2 basisViewport;\n            uniform vec2 covariancesTextureSize;\n            uniform vec2 centersColorsTextureSize;\n\t\t\t\t\t\tuniform highp sampler2D meshMatrixWorldsTexture;\n\t\t\t\t\t\tuniform uint meshIndexIntervals[257];\n\t\t\t\t\t\tuniform float orthoZoom;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\n            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\n            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));\n            const uvec4 shift4 = uvec4(0, 8, 16, 24);\n            vec4 uintToRGBAVec (uint u) {\n               uvec4 urgba = mask4 & u;\n               urgba = urgba >> shift4;\n               vec4 rgba = vec4(urgba) * encodeNorm4;\n               return rgba;\n            }\n\n            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {\n                vec2 samplerUV = vec2(0.0, 0.0);\n                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;\n                samplerUV.y = float(floor(d)) / dimensions.y;\n                samplerUV.x = fract(d);\n                return samplerUV;\n            }\n\n            void main () {\n                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));\n                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));\n                vColor = uintToRGBAVec(sampledCenterColor.r);\n\n                vPosition = position.xy * 2.0;\n\n\t\t\t\t\t\t\t\tuint meshIndex;\n\t\t\t\t\t\t\t\tfor (int i = 1; i < 257; i++) {\n\t\t\t\t\t\t\t\t\tif (splatIndex < meshIndexIntervals[i]) {\n\t\t\t\t\t\t\t\t\t\tmeshIndex = uint(i - 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfloat strideMulmeshIndex = float(4u*meshIndex);\n\t\t\t\t\t\t\t\tfloat meshMatrixWorldsTextureLength = float(256*4);\n\n\t\t\t\t\t\t\t\tmat4 modelMat = mat4(\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),\n\t\t\t\t\t\t\t\t\ttexture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmat4 modelViewMat = viewMatrix * modelMat;\n\t\t\t\t\t\t\t\tvec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); \n                vec4 clipCenter = projectionMatrix * viewCenter;\n\n                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;\n                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;\n\n                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);\n                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);\n\n                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix\n                mat3 Vrk = mat3(\n                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,\n                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,\n                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z\n                );\n                float s = 1.0 / (viewCenter.z * viewCenter.z);\n\n                mat3 W = transpose(mat3(modelViewMat));\n                mat3 T = orthoZoom > 0.0 ? W : W * mat3(\n\t\t\t\t\t\t\t\t\tfocal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,\n\t\t\t\t\t\t\t\t\t0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,\n\t\t\t\t\t\t\t\t\t0., 0., 0.\n\t\t\t\t\t\t\t\t);\n                mat3 cov2Dm = transpose(T) * Vrk * T;\n                cov2Dm[0][0] += 0.3;\n                cov2Dm[1][1] += 0.3;\n\n                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because\n                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],\n                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't\n                // need cov2Dm[1][0] because it is a symetric matrix.\n                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);\n\n                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;\n\n                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix\n                // so that we can determine the 2D basis for the splat. This is done using the method described\n                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html\n                //\n                // This is a different approach than in the original work at INRIA. In that work they compute the\n                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle\n                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance\n                // matrix (called 'conic') to determine fragment opacity.\n                float a = cov2Dv.x;\n                float d = cov2Dv.z;\n                float b = cov2Dv.y;\n                float D = a * d - b * b;\n                float trace = a + d;\n                float traceOver2 = 0.5 * trace;\n                float term2 = sqrt(trace * trace / 4.0 - D);\n                float eigenValue1 = traceOver2 + term2;\n\t\t\t\t\t\t\t\tfloat eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value\n\n                const float maxSplatSize = 1024.0;\n                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));\n                // since the eigen vectors are orthogonal, we derive the second one from the first\n                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);\n                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);\n                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);\n\n                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;\n\n\t\t\t\t\t\t\t\tif (orthoZoom > 0.0) {\n\t\t\t\t\t\t\t\t\tndcOffset *= orthoZoom;\n\t\t\t\t\t\t\t\t}\n\n                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);\n            }",fragmentShader:"\n            precision highp float;\n            #include <common>\n\n            uniform vec3 debugColor;\n\n            varying vec4 vColor;\n            varying vec2 vUv;\n\n            varying vec2 vPosition;\n\t\t\t\t\t\tlayout(location = 1) out vec4 gVelocity; \n\n            void main () {\n                // compute the negative squared distance from the center of the splat to the\n                // current fragment in the splat's local space.\n                float A = -dot(vPosition, vPosition);\n                if (A < -4.0) discard;\n                vec3 color = vColor.rgb;\n                A = exp(A) * vColor.a;\n                gl_FragColor = vec4(color.rgb, A);\n\t\t\t\t\t\t\t\tgVelocity = vec4(0.0); // so it is ignored by TAA\n            }",transparent:!0,alphaTest:1,blending:1,depthTest:!0,depthWrite:!1,side:2})}static buildGeomtery(e){let t=new Xn;t.setIndex([0,1,2,0,2,3]);let n=new Float32Array(12),i=new ui(n,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;let r=(new gH).copy(t),o=new Uint32Array(e),s=new zb(o,1,!1);return s.setUsage(35048),r.setAttribute("splatIndex",s),r.instanceCount=e,r}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(i=>i.buildPreComputedBuffers()),this.covariances=new Float32Array(6*this.splatCount),this.colors=new Uint8Array(4*this.splatCount),this.centers=new Float32Array(3*this.splatCount);let e=0,t=0,n=0;for(let i of this.splatBuffers){let r=i.nsplats;this.colors.subarray(e,e+4*r).set(i.colorsA),e+=4*r,this.centers.subarray(t,t+3*r).set(i.decoded.xyz.denormDequant().data),t+=3*r,this.covariances.subarray(n,n+6*r).set(new Float32Array(i.precomputedCovarianceBufferData)),n+=6*r}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new Ue(4096,1024);for(;t.x*t.y*2<6*e;)t.y*=2;let i,r,n=new Ue(4096,1024);for(;n.x*n.y*4<4*e;)n.y*=2;if(this.halfPrecisionCovariancesOnGPU){r=new Uint16Array(t.x*t.y*2);for(let d=0;d<this.covariances.length;d++)r[d]=uMe.toHalfFloat(this.covariances[d]);i=new Uc(r,t.x,t.y,1030,Tu)}else r=new Float32Array(t.x*t.y*2),r.set(this.covariances),i=new Uc(r,t.x,t.y,1030,Cs);i.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=i,this.material.uniforms.covariancesTextureSize.value.copy(t);let o=new Uint32Array(n.x*n.y*4);for(let d=0;d<e;d++){let h=4*d,p=3*d,g=4*d;o[g]=r6e(this.colors[h],this.colors[h+1],this.colors[h+2],this.colors[h+3]),o[g+1]=QR(this.centers[p]),o[g+2]=QR(this.centers[p+1]),o[g+3]=QR(this.centers[p+2])}let s=new Uc(o,n.x,n.y,1033,Au);s.internalFormat="RGBA32UI",s.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=s,this.material.uniforms.centersColorsTextureSize.value.copy(n);let l=new Float32Array(4096);for(let d=0;d<this.meshMatrixWorlds.length;d++)l.set(this.meshMatrixWorlds[d].elements,16*d);let c=new Uc(l,1024,1,ra,Cs);c.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=c,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:r,texture:i,size:t},centerColors:{data:o,texture:s,size:n},meshMatrixWorlds:{data:l,texture:c}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,n,i){this.splatCount>0&&(U2.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(U2),this.material.uniforms.basisViewport.value.set(2/U2.x,2/U2.y),this.material.uniforms.focal.value.set(t,n),this.material.uniforms.orthoZoom.value=i,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},o6e=new Promise(e=>{CQ=e}),wQ=!1;function s6e(){if(!wQ)return V2||(V2=function e(){return t.apply(this,arguments)}(),V2);function t(){return(t=(0,Qn.Z)(function*(){let n=yield m.e(492).then(m.bind(m,7666));CQ(n),wQ=!0})).apply(this,arguments)}}o6e.then(e=>MQ=e);var KR=new zu;KR.wireframe=!0;var PQ=new te,ZR=class extends _h{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new class{constructor(){this._constraints=new Map}setConstraint(e,t){null===t?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((n,i)=>{let r=[i,n],o=n;for(;this._constraints.has(o);){if(o=this._constraints.get(o),r.includes(o)){console.warn(`circular dependency detected: ${r.join(" -> ")}`);break}t.has(o)||r.push(o)}for(let s=r.length-2;s>=0;s--)if(!t.has(r[s])){let a=e.find(r[s]);a?a.applyPathSnapping(e):console.warn(`missing entity ${r[s]}`),t.add(r[s])}})}findDependency(e,t){let n=e;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===t)return!0;return!1}},this.invisibleObjects=new C1("jflkdsafjasdifjaslk",{...EI.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new ua("fdasfa",{...Hv.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=function QBe(e){let t=!1;return e.traverseEntity(n=>{if(n instanceof v1)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)_Q(n,n.material[i])&&(t=!0);else _Q(n,n.material)&&(t=!0)}),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=function $Be(e){let t=!1;return e.traverseEntity(n=>{if(n instanceof v1)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)bQ(n,n.material[i])&&(t=!0);else bQ(n,n.material)&&(t=!0)}),t}(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),n=this.entityIdentityToEntity[t];n&&(e.uuid=n.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof ua&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(void 0===t)return;let n=[],i=t;for(;i!==this;){let r=i;i=i.parent;let o=i.children.indexOf(r);n.splice(0,0,o)}return{entity:t,sortKey:n}}getAllSorted(e){let t=[];for(let n of e){let i=this.getWithSortKey(n.id);void 0!==i&&t.push(i)}return t.sort((n,i)=>QG(n.sortKey,i.sortKey)),t.map(n=>n.entity)}nonExistOrDescendantOf(e,t){let n=this.find(e);if(void 0===n)return!0;for(;n;){if(n.uuid===t)return!0;n=n.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if("f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera"===e)return this.activePage.personalCamera;if(e===Lv)return this.activePage.personalCamera}if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof ua&&t.uiScene){let n=t.uiScene.find(e);if(n)return n}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof ua&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(n=>{void 0===t&&n instanceof el&&(t=n.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof ua&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);t?Array.isArray(t.identity)&&void 0===this.findInstance(t.identity)&&console.error("not found instance"):console.error("not found")}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{e.cloner?.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){1===e.path.length&&"components"===e.path[0]&&1===e.type&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){if(0===e.path.length&&7===e.type){let n=null===e.parent?this:this.find(e.parent);if(void 0===n)throw new Error("unexpected");let i=this.createObject(e.id,e.data,e.children,n,e.localIndex,t);i.updateVisible(this),i.resetBBoxNeedsUpdate(),zd(i)&&rp(i.parent)&&(i.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markToExpandCloner(i),this.markPenumbraSizeDirty(),i.updatePathSnapping()}else if(0===e.path.length&&8===e.type){let n=this.find(e.id);if(void 0===n)throw new Error("unexpected");this.markToExpandCloner(n),n.resetBBoxNeedsUpdate(),this.unregisterObject(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markPenumbraSizeDirty(),n.parent.remove(n),rp(n.parent)&&(n.parent.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),zd(n)&&(n.freeBooleanPointer(),i instanceof wg&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n instanceof VR&&n.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),this.pathConstraints.removeDependencies(n.uuid),n.updatePathSnapping()}else if(0===e.path.length&&9===e.type){let n=this.find(e.id);if(void 0===n)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(n);let i=n.parent;this.markNeedsRecomputeInstancesForAncessors(i),n.cloner?.resetOnMove(),this.markToExpandCloner(n);let r=null===e.parent?this:this.find(e.parent);if(void 0===r)throw new Error("unexpected");r.add(n),this.markNeedsRecomputeInstancesForAncessors(r),this.markToExpandCloner(n),n.invalidateClonerTransform(n),n.updateVisible(this),n.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty(),r.children.splice(e.localIndex,0,r.children.pop()),zd(n)&&(n.invalidateUpstreamBooleanData(),rp(n.parent)?n.parent.invalidateDownstreamBooleanData().recomputeBoolean():i instanceof wg&&i.invalidateDownstreamBooleanData().recomputeBoolean()),n.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof ua&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)));this.activePage!==this.splatViewer?.activePage&&this.reloadSplats()}updateEntityByOp(e,t,n,i){if(0===t.type){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:o}=t.props;t={...t,props:o},this.markNeedsRecomputeInstances()}"pathSnapping"===t.path[0]&&void 0!==t.props.pathId&&this.pathConstraints.setConstraint(e,t.props.pathId)}let r=this.find(e);if(r)try{(function XBe(e,t,n,i){e.updateByOp(t,n,i,!1)})(r,t,n,{scene:this,shared:i}),r instanceof Ka&&r.updateGeometryGroupsIfNeeded()}catch(o){console.error(o)}}updateEntity2DByOp(e,t,n,i,r,o=[]){e.updateEntityByOp(t,n,i,r),this.traverseEntity(s=>{(s instanceof el||s instanceof ua)&&(o.includes(s.frameId??"")||s.frameId===t)&&s.updateEntity2DByOp(t,n,i,r)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let n=Object.entries(t.data.lib.components).map((i,r)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:r}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(n,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{i instanceof Za&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{("Component"===t.data.type||"Instance"===t.data.type)&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){dr.is(e)&&("Component"===e.data.type&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{dr.is(t)&&"Component"===t.data.type&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,n,i,r,o,s){if(e){let a=i.find(e);a&&a!==i&&r.forInstancesRec(l=>{l.data=h_(l.data,c=>{let d=c.events.data(s.id),h=l.goUp(o);if(h){let p=[...$G(h.identity),e].join("-"),g=this.entityIdentityToEntity[p];if(g){let v=g.uuid;Gs.zoom(d,t)[n]=v}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,n,i,r,o){e.forEach(s=>{"Transition"===s.data.type||"Animation"===s.data.type?this.relativeizeInner(s.data.object,[...t,s.id],"object",n,i,r,o):"Conditional"===s.data.type&&(this.rewriteActions(s.data.ifActions,[...t,s.id,"ifActions"],n,i,r,o),this.rewriteActions(s.data.elseActions,[...t,s.id,"elseActions"],n,i,r,o))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof M1&&"string"==typeof e.identity&&"Component"===e.data.type)return e.traverseEntity((t,n)=>{t.data.events.forEach(i=>{if("GameControl"===i.data.type){let r=!1;if(t.forInstancesRec(o=>{o.data=h_(o.data,s=>{o.isInstanceRoot||(s.events.delete(i.id),r=!0)}).data}),!1===r)for(let o of TP.list)this.rewriteActions(i.data.gameActions[o],["gameActions",o],e,t,n,i)}else"Conditional"===i.data.type?("Distance"===i.data.condition.type?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,n,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,n,i)):"State"===i.data.condition.type?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,n,i):"Comparison"===i.data.condition.type&&("Property"===i.data.condition.lOperand.type&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,n,i),"Property"===i.data.condition.rOperand.type&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,n,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,n,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,n,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,n,i)})}),!0})}expandInstances(e,t,n){let i=new Set;this.traverseEntity(r=>{if(r instanceof M1&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||r.resetBBoxNeedsUpdate(),n&&r.traverseEntity(o=>{n.addClip(o)}),!0});for(let r of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),GR(r)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(n=>{n instanceof M1&&n.isInstanceRoot&&(n.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let n="string"==typeof t.identity?t.identity:t.identity.join("-");this.entityIdentityToEntity[n]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[n]),t.dispose()})}clearScene(){for(let e of this.children)dr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let n=[],i=r=>{for(let o of r.children){let s=o.cloner;if(dr.is(o)&&!o.raycastLock&&(o.visible||s?.object.data.visible))if(!0===t&&o.isInstanceRoot){let a=[];if(e.intersectObject(o,!0,a),a.length){let l=a[0];l.object=o,l.point.applyMatrix4(l.object.matrixWorld);let c=o.matrixWorld.clone().invert();l.point.applyMatrix4(c),n.push(l)}}else(zd(o)||gR(o)&&this.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,n),$R(o,e,n)),i(o)}};return i(this.activePage),n}raycastWithClones(e){let t=[],n=i=>{for(let r of i.children){let o=r.cloner;dr.is(r)&&(r.visible||o?.object.data.visible)&&((zd(r)||gR(r)&&this.enableHelpers&&r.objectHelper.visible)&&(e.intersectObject(r,!1,t),$R(r,e,t,!0)),n(r))}};return n(this),t}forEachEntity(e){for(let t of this.children)dr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)dr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)dr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(n=>{if(n instanceof Ka&&"Mesh"===n.data.type&&("TextGeometry"===n.data.geometry.type||"InputGeometry"===n.data.geometry.type)&&n.data.geometry.font===e){let i=n.geometry,r=n.data.geometry;i.updateFont(e,t).then(()=>{i.update(r);let o=n.invalidateDownstreamBooleanData();rp(o)&&o.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)A_.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)dr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,n){let i=0;for(let r of e)this.createObject(r.id,r.data,r.children,t,i,n),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,n,i,r,o){let s={scene:this,shared:o},a=XR(e,t,s);return a&&(this.entityByUuid[e]=a,i.add(a),i.children.splice(r,0,i.children.pop()),n.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,a,o)),a.updateState(t,s),a instanceof Ka&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(this),a.cloner&&this.toExpandCloner.add(a),t.pathSnapping?.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),"Empty"===t.type&&t.animations&&a.traverseEntity(l=>{let c=l.dataPatched;if(l instanceof Ka&&c.bones&&c.boneInverses){let d=c.bones.map(g=>this.find(g)),h=c.boneInverses.map(g=>(new qt).fromArray(g)),p=new jT(d,h);l.bind(p,l.bindMatrix)}else l.matrixAutoUpdate=!0}),a}getCenter(e){let t=[];for(let i=0,r=e.length;i<r;++i){let{id:o,recursive:s}=e[i],a=this.find(o);t.push(...(s?a.recursiveBBox:a.singleBBox).vertices)}let n=new ls;return n.setFromPoints(t),n.getCenter(PQ),PQ}copyMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e)?.parent;n?t.copy(n.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof yl)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)t.material[n]instanceof Ef&&e(t.material[n]);else t.material instanceof Ef&&e(t.material)})}updateViewPlaneSize(e,t,n=!1){this.traverseConcreteEntity(i=>{i instanceof Za&&i.setViewplaneSize(e,t,n)})}initializeSplatViewer(){this.splatViewer=new class{constructor(e={}){Lm(this,"updateView",function(){let t=new qt,n=[],i=new te(0,0,-1),r=new te(0,0,-1),o=new te,s=new te;return function(a=!1,l){let c=this.updateMatrixWorldsInWorkerIfNeeded(),d=this.cropsChanged();if(!a){r.set(0,0,-1).applyQuaternion(l.quaternion);let p=!1,g=!1;if(r.dot(i)<=.95&&(p=!0),s.copy(l.position).sub(o).length()>=1&&(g=!0),!(p||g||c||d||this.needsInitialRender))return}this.needsInitialRender=!1,o.copy(l.position),i.copy(r),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),n[0]=l.position.x,n[1]=l.position.y,n[2]=l.position.z;let h={sort:{view:t.elements,cameraPosition:n,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...c?{newMatrixWorlds:this.meshMatrixWorlds}:{},...d?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=h:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(h))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=(new qt).makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let n=new Ue;null!==this.splatMesh&&this.splatMesh.getSplatCount()>0&&(e.getSize(n),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*n.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*n.y*.45,this.splatMesh.updateUniforms(n,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=(new te).fromArray(e.position)),e.orientation&&(e.orientation=(new _i).fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(o=>{"Splat"===o.data.type&&t.push(o)}),this.splatMesh&&this.splatMesh.dispose(),0===t.length)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(o=>o.matrixWorld),this.meshMatrixWorldsOld=t.map(o=>o.matrixWorld.clone()),this.cropsArray=t.map(o=>o.data.crops.map(s=>s.data));let n=t.map(o=>new MQ.GSplineBuffer(new Uint8Array(o.data.buffer).buffer)),i=0,r=[0];for(let o of n)i+=o.getSplatCount(),r.push(i);return this.setupSplatMesh(n,i,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,r,this.meshMatrixWorlds),this.setupSortWorker(i),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,16*t);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,!this.meshMatrixWorlds.every((t,n)=>t.equals(this.meshMatrixWorldsOld[n]))&&(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,n)=>{t.data.crops.forEach((i,r)=>{void 0===this.cropsArray[n][r]?(e=!0,this.cropsArray[n][r]=i.data):Object.entries(i.data).forEach(([o,s])=>{(Array.isArray(s)&&s.some((a,l)=>a!==this.cropsArray[n][r][o][l])||s!==this.cropsArray[n][r]?.[o])&&(e=!0,this.cropsArray[n][r][o]=s)})}),t.data.crops.length!==this.cropsArray[n]?.length&&(this.cropsArray[n].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,n=new te,i=new _i,r=!1,o=1,s,a){this.splatMesh=j2.buildMesh(e,t,r,o,s,a),this.splatMesh.position.copy(n),this.splatMesh.quaternion.copy(i),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,c,d)=>this.update(l,d)}setupSortWorker(e){this.sortWorker=function i6e(e){let t=new Worker(URL.createObjectURL(new Blob(["(",n6e.toString(),")(self)"],{type:"application/javascript"}))),n=atob("AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL"),i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return t.postMessage({init:{sorterWasmBytes:i.buffer,splatCount:e,Constants:{BytesPerFloat:Rf.BytesPerFloat,BytesPerInt:Rf.BytesPerInt,DepthMapRange:Rf.DepthMapRange,MemoryPageSize:Rf.MemoryPageSize}}}),t}(e),this.sortWorker.onmessage=t=>{t.data.sortDone?(this.sortRunning=!1,this.splatMesh?.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){null!==this.splatMesh&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}}({scene:this}),this.reloadSplats()}reloadSplats(){this.splatViewer?.loadSplat()}},H2=(e,t)=>{let n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},JR=e=>e*(Math.PI/180),e4=new Map,SQ=e=>{e4.has(e)&&clearTimeout(e4.get(e)),e4.set(e,setTimeout(e,100))},G2=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent(r,n)},OQ=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.removeEventListener?e.removeEventListener(r,n):e.detachEvent&&e.detachEvent(r,n)},EQ=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),DQ=()=>{if(!(typeof window>"u"))return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},t4=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},n4=(e,t,n)=>{let i=AQ(e);for(let r in i)if(i.hasOwnProperty(r))if("string"==typeof t)i[r]=t+" "+n;else{let o="";for(let s=0,a=t.length;s<a;s+=1)o+=t[s]+" "+n+", ";i[r]=o.slice(0,-2)}return i},AQ=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},i4=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r4=(e,t)=>{if(e.length)for(let n=0,i=e.length;n<i;n+=1)t(e[n]);else t(e)};typeof window<"u"&&(TQ="ontouchstart"in window,IQ=!!window.PointerEvent,kQ=!!window.MSPointerEvent);var TQ,IQ,kQ,S1,K__mouse={start:"mousedown",move:"mousemove",end:"mouseup"},Z_={};function Pg(){}IQ?S1={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:kQ?S1={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:TQ?(S1={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},Z_=K__mouse):S1=K__mouse,Pg.prototype.on=function(e,t){var r,n=this,i=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var o=0;o<i.length;o+=1)n._handlers_[r=i[o]]=n._handlers_[r]||[],n._handlers_[r].push(t);return n},Pg.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},Pg.prototype.trigger=function(e,t){var r,n=this,i=e.split(/[ ,]+/g);n._handlers_=n._handlers_||{};for(var o=0;o<i.length;o+=1)n._handlers_[r=i[o]]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(s){s.call(n,{type:r,target:n},t)})},Pg.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{let n={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?n[i]=t[i]:e.hasOwnProperty(i)&&(n[i]=e[i]);return n})(t.options,e))},Pg.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},G2(e,S1[t],n._domHandlers_[t]),Z_[t]&&G2(e,Z_[t],n._domHandlers_[t]),n},Pg.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},OQ(e,S1[t],n._domHandlers_[t]),Z_[t]&&OQ(e,Z_[t],n._domHandlers_[t]),delete n._domHandlers_[t],this};var o4=Pg;function Ys(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=Ys.id,Ys.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ys.prototype=new o4,Ys.constructor=Ys,Ys.id=0,Ys.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},Ys.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{let n=AQ("borderRadius");for(let i in n)n.hasOwnProperty(i)&&(n[i]="50%");return n})(),n=n4("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},i4(i.el,n),"circle"===this.options.shape&&i4(i.back,t),i4(i.front,t),this.applyStyles(i),this},Ys.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},Ys.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},Ys.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},Ys.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Ys.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)},t.options.fadeTime)),t},Ys.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){t.ui.el.style.display="dynamic"===t.options.mode?"none":"block","function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let n=t.options.restJoystick,i={};i.x=!0===n||!1!==n.x?0:t.instance.frontPosition.x,i.y=!0===n||!1!==n.y?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t},Ys.prototype.setPosition=function(e,t){var n=this;n.frontPosition={x:t.x,y:t.y};var r={};r.front=n4("transition",["top","left"],n.options.fadeTime+"ms");var o={front:{}};o.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(o),n.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(n),n.restCallback()},n.options.fadeTime)},Ys.prototype.restCallback=function(){var e=this,t={};t.front=n4("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},Ys.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Ys.prototype.computeDirection=function(e){var r,o,s,t=e.angle.radian,n=Math.PI/4,i=Math.PI/2;if(t>n&&t<3*n&&!e.lockX?r="up":t>-n&&t<=n&&!e.lockY?r="left":t>3*-n&&t<=-n&&!e.lockX?r="down":e.lockY||(r="right"),e.lockY||(o=t>-i&&t<i?"left":"right"),e.lockX||(s=t>0?"up":"down"),e.force>this.options.threshold){var l,a={};for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};for(l in this.direction={x:o,y:s,angle:r},e.direction=this.direction,a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+o,e),c.y||this.trigger("plain:"+s,e),c.angle||this.trigger("dir dir:"+r,e)}else this.resetDirection();return e};var m6e=Ys;function us(e,t){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=e,n.id=us.id,us.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(t),("static"===n.options.mode||"semi"===n.options.mode)&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let i=getComputedStyle(n.options.zone.parentElement);return i&&"flex"===i.display&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}us.prototype=new o4,us.constructor=us,us.id=0,us.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(n){if(void 0===n)return t[0];for(var i=0,r=t.length;i<r;i+=1)if(t[i].identifier===n)return t[i];return!1}},us.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},us.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},us.prototype.createNipple=function(e,t){var n=this,i=n.manager.scroll,r={},o=n.options;if(e.x&&e.y)r={x:e.x-(n.parentIsFlex?i.x:i.x+n.box.left),y:e.y-(n.parentIsFlex?i.y:i.y+n.box.top)};else if(e.top||e.right||e.bottom||e.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=e.top,a.style.right=e.right,a.style.bottom=e.bottom,a.style.left=e.left,a.style.position="absolute",o.zone.appendChild(a);var l=a.getBoundingClientRect();o.zone.removeChild(a),r=e,e={x:l.left+i.x,y:l.top+i.y}}var c=new m6e(n,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(t4(c.ui.el,r),t4(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c},us.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},us.prototype.bindNipple=function(e){var t=this,i=function(r,o){t.trigger(r.type+" "+o.id+":"+r.type,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},us.prototype.pressureFn=function(e,t,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var o=e.force||e.pressure||e.webkitForce||0;o!==r&&(t.trigger("pressure",o),i.trigger("pressure "+t.identifier+":pressure",o),r=o)}.bind(i),100)},us.prototype.onstart=function(e){var t=this,n=t.options,i=e;return e=EQ(e),t.updateBox(),r4(e,function(o){t.actives.length<n.maxNumberOfNipples?t.processOnStart(o):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(s){if(Object.values(i.touches).findIndex(function(l){return l.identifier===s})<0){var a=[e[0]];a.identifier=s,t.processOnEnd(a)}}),t.actives.length<n.maxNumberOfNipples&&t.processOnStart(o))}),t.manager.bindDocument(),!1},us.prototype.processOnStart=function(e){var i,t=this,n=t.options,r=t.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},a=t.getOrCreate(r,s);a.identifier!==r&&t.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(d){d.trigger("start",d),t.trigger("start "+d.id+":start",d),d.show(),o>0&&t.pressureFn(e,d,d.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(a))>=0&&t.idles.splice(i,1),t.actives.push(a),t.ids.push(a.identifier),"semi"!==n.mode)l(a);else{if(!(H2(s,a.position)<=n.catchDistance))return a.destroy(),void t.processOnStart(e);l(a)}return a},us.prototype.getOrCreate=function(e,t){var r,n=this,i=n.options;return/(semi|static)/.test(i.mode)?(r=n.idles[0])?(n.idles.splice(0,1),r):"semi"===i.mode?n.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):r=n.createNipple(t,e)},us.prototype.processOnMove=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),o=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e)){if(!r)return console.error("Found zombie joystick with ID "+i),void t.manager.removeIdentifier(i);if(n.dynamicPage){var s=r.el.getBoundingClientRect();r.position={x:o.x+s.left,y:o.y+s.top}}r.identifier=i;var a=r.options.size/2,l={x:e.pageX,y:e.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var v,y,c=H2(l,r.position),d=((e,t)=>(e=>e*(180/Math.PI))(Math.atan2(t.y-e.y,t.x-e.x)))(l,r.position),h=JR(d),p=c/a,g={distance:c,position:l};if("circle"===r.options.shape?(v=Math.min(c,a),y=((e,t,n)=>{let i={x:0,y:0};return n=JR(n),i.x=e.x-t*Math.cos(n),i.y=e.y-t*Math.sin(n),i})(r.position,v,d)):(y=((e,t,n)=>({x:Math.min(Math.max(e.x,t.x-n),t.x+n),y:Math.min(Math.max(e.y,t.y-n),t.y+n)}))(l,r.position,a),v=H2(y,r.position)),n.follow){if(c>a){let A=l.y-y.y;r.position.x+=l.x-y.x,r.position.y+=A,r.el.style.top=r.position.y-(t.box.top+o.y)+"px",r.el.style.left=r.position.x-(t.box.left+o.x)+"px",c=H2(l,r.position)}}else l=y,c=v;var b=l.x-r.position.x,P=l.y-r.position.y;r.frontPosition={x:b,y:P},n.dataOnly||t4(r.ui.front,r.frontPosition);var S={identifier:r.identifier,position:l,force:p,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:h,degree:d},vector:{x:b/a,y:-P/a},raw:g,instance:r,lockX:n.lockX,lockY:n.lockY};(S=r.computeDirection(S)).angle={radian:JR(180-d),degree:180-d},r.trigger("move",S),t.trigger("move "+r.id+":move",S)}else this.processOnEnd(e)},us.prototype.processOnEnd=function(e){var t=this,n=t.options,i=t.manager.getIdentifier(e),r=t.nipples.get(i),o=t.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide(function(){"dynamic"===n.mode&&(r.trigger("removed",r),t.trigger("removed "+r.id+":removed",r),t.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(t.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),t.trigger("end "+r.id+":end",r),t.ids.indexOf(r.identifier)>=0&&t.ids.splice(t.ids.indexOf(r.identifier),1),t.actives.indexOf(r)>=0&&t.actives.splice(t.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?t.idles.push(r):t.nipples.indexOf(r)>=0&&t.nipples.splice(t.nipples.indexOf(r),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[o.id]=o.identifier))},us.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},us.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(n){n.destroy()}),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var g6e=us;function pa(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=DQ(),t.config(e),t.prepareCollections();var n=function(){var r;t.collections.forEach(function(o){o.forEach(function(s){r=s.el.getBoundingClientRect(),s.position={x:t.scroll.x+r.left,y:t.scroll.y+r.top}})})};if(typeof window>"u")return t.collections;G2(window,"resize",function(){SQ(n)});var i=function(){t.scroll=DQ()};return G2(window,"scroll",function(){SQ(i)}),t.collections}pa.prototype=new o4,pa.constructor=pa,pa.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every(function(i){return!(n=i.get(t))}),n}},pa.prototype.create=function(e){return this.createCollection(e)},pa.prototype.createCollection=function(e){var t=this,n=new g6e(t,e);return t.bindCollection(n),t.collections.push(n),n},pa.prototype.bindCollection=function(e){var t=this,i=function(r,o){t.trigger(r.type+" "+o.id+":"+r.type,o)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},pa.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},pa.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},pa.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},pa.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},pa.prototype.onmove=function(e){return this.onAny("move",e),!1},pa.prototype.onend=function(e){return this.onAny("end",e),!1},pa.prototype.oncancel=function(e){return this.onAny("end",e),!1},pa.prototype.onAny=function(e,t){var i,n=this,r="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=EQ(t);var o=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)};return r4(t,function(a){i=n.getIdentifier(a),r4(n.collections,o.bind(null,a,i)),a._found_||n.removeIdentifier(i)}),!1},pa.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()},pa.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var RQ=new pa,NQ=new Map,J_=new Map,Sg=class{constructor(e,t,n,i){this.data=t;let{audio:r,volume:o,delay:s,loop:a}=t;if(!r)throw new Error("Missing property");let l="string"==typeof r?i.getAudio(r).src:r.data;this.audioPlayer=new U_({src:l,volume:o,delay:s,loop:a}),J_.has(n.uuid)?J_.get(n.uuid).push(this):J_.set(n.uuid,[this]),NQ.set(e,this)}playByToggle(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},s4=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=NQ.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=J_.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...J_.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},FQ=class{constructor(e,t,n,i,r){if(this.data=t,this.shared=i,this.condition=r,"play"===t.interaction)this.interaction=new Sg(e,t,n,i);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new s4(t)}}dispatchBasic(){if(!1===Mo(this.shared,this.condition))return!1;this.interaction instanceof Sg?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Mo(this.shared,this.condition))return!1;this.interaction instanceof Sg?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(!1===Mo(this.shared,this.condition))return!1;this.interaction instanceof Sg&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},LQ=class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i,this.delay=0,this.emission=e.emission,void 0!==e.delay&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){e?this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e):this.particleSystem.start()}stop(e=0){e?this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e):this.particleSystem.stop()}freeze(e=0){e?this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e):this.particleSystem.froze()}unFreeze(e=0){e?this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e):this.particleSystem.unFroze()}reset(e=0){e?this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e):this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze()}}dispatchBasic(){if(!1===Mo(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchConditional(){if(!1===Mo(this.shared,this.condition)||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay)}}dispatchGameControl(e){if(!1===Mo(this.shared,this.condition)||!this.particleSystem)return!1;"start"===e?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},BQ=(e,t)=>t.some(n=>n instanceof RegExp?n.test(e):n===e);var zQ=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.controlsManager=n,this.shared=i,this.condition=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=o=>{this.timeoutIdQueue.shift();let s=this.page.scene.find(o);if(void 0===s)return;let a=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=!a||s.dataPatched.physics?.fusedBody;if(s.cloner){for(let c of s.cloner.children)l?(c.playModeVisible=!1,c.rigidBody&&"positioned"===s.dataPatched.physics?.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),a.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0)):void 0===this.clone||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),a.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):void 0===c.playModeVisible&&(c.playModeVisible=!0);(l||void 0===this.clone||!1===this.clone)&&(s.visible=!1,s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),a.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0))}else s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),a.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0),s.visible=!1;this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(void 0===a?c=>void 0!==c.bvhGeometry:c=>void 0!==c.rigidBody),s.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(!1===Mo(this.shared,this.condition))return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()}dispatchFromStart(){if(!1===Mo(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},UQ=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.shared=n,this.eventManager=i,this.condition=r,this.shared=n}dispatch(){if(!1===Mo(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{this.shared.reset(this.shared.data,!0),x4(this.page,this.shared,!0),this.eventManager.reset(),this.eventManager.controlsManager.gameControl?.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},1e3*(this.data.delay??0))}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},jQ={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},a4={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},M6e=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],W2={CSS:{},springs:{}};function Vd(e,t,n){return Math.min(Math.max(e,t),n)}function ex(e,t){return e.indexOf(t)>-1}function l4(e,t){return e.apply(null,t)}var fi={arr:function(e){return Array.isArray(e)},obj:function(e){return ex(Object.prototype.toString.call(e),"Object")},pth:function(e){return fi.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||fi.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return fi.hex(e)||fi.rgb(e)||fi.hsl(e)},key:function(e){return!jQ.hasOwnProperty(e)&&!a4.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function VQ(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(n){return parseFloat(n)}):[]}function HQ(e,t){var n=VQ(e),i=Vd(fi.und(n[0])?1:n[0],.1,100),r=Vd(fi.und(n[1])?100:n[1],.1,100),o=Vd(fi.und(n[2])?10:n[2],.1,100),s=Vd(fi.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=o/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,h=l<1?(l*a-s)/c:-s+a;function p(v){var y=t?t*v/1e3:v;return y=l<1?Math.exp(-y*l*a)*(1*Math.cos(c*y)+h*Math.sin(c*y)):(1+h*y)*Math.exp(-y*a),0===v||1===v?v:1-y}return t?p:function g(){var v=W2.springs[e];if(v)return v;for(var y=1/6,b=0,P=0;;)if(1===p(b+=y)){if(++P>=16)break}else P=0;var S=b*y*1e3;return W2.springs[e]=S,S}}function P6e(e){return void 0===e&&(e=10),function(t){return Math.ceil(Vd(t,1e-6,1)*e)*(1/e)}}var S6e=function(){var t=.1;function n(d,h){return 1-3*h+3*d}function i(d,h){return 3*h-6*d}function r(d){return 3*d}function o(d,h,p){return((n(h,p)*d+i(h,p))*d+r(h))*d}function s(d,h,p){return 3*n(h,p)*d*d+2*i(h,p)*d+r(h)}return function c(d,h,p,g){if(0<=d&&d<=1&&0<=p&&p<=1){var v=new Float32Array(11);if(d!==h||p!==g)for(var y=0;y<11;++y)v[y]=o(y*t,d,p);return function(P){return d===h&&p===g||0===P||1===P?P:o(function b(P){for(var S=0,O=1;10!==O&&v[O]<=P;++O)S+=t;--O;var U=S+(P-v[O])/(v[O+1]-v[O])*t,X=s(U,d,p);return X>=.001?function l(d,h,p,g){for(var v=0;v<4;++v){var y=s(h,p,g);if(0===y)return h;h-=(o(h,p,g)-d)/y}return h}(P,U,d,p):0===X?U:function a(d,h,p,g,v){var y,b,P=0;do{(y=o(b=h+(p-h)/2,g,v)-d)>0?p=b:h=b}while(Math.abs(y)>1e-7&&++P<10);return b}(P,S,S+t,d,p)}(P),h,g)}}}}(),GQ=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,o=4;i<((r=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((3*r-2)/22-i,2)}},Elastic:function(i,r){void 0===i&&(i=1),void 0===r&&(r=.5);var o=Vd(i,1,10),s=Vd(r,.1,2);return function(a){return 0===a||1===a?a:-o*Math.pow(2,10*(a-1))*Math.sin((a-1-s/(2*Math.PI)*Math.asin(1/o))*(2*Math.PI)/s)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(function(i,r){t[i]=function(){return function(o){return Math.pow(o,r+2)}}}),Object.keys(t).forEach(function(i){var r=t[i];e["easeIn"+i]=r,e["easeOut"+i]=function(o,s){return function(a){return 1-r(o,s)(1-a)}},e["easeInOut"+i]=function(o,s){return function(a){return a<.5?r(o,s)(2*a)/2:1-r(o,s)(-2*a+2)/2}}}),e}();function c4(e,t){if(fi.fnc(e))return e;var n=e.split("(")[0],i=GQ[n],r=VQ(e);switch(n){case"spring":return HQ(e,t);case"cubicBezier":return l4(S6e,r);case"steps":return l4(P6e,r);default:return l4(i,r)}}function WQ(e){try{return document.querySelectorAll(e)}catch{return}}function q2(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,r=[],o=0;o<n;o++)if(o in e){var s=e[o];t.call(i,s,o,e)&&r.push(s)}return r}function Y2(e){return e.reduce(function(t,n){return t.concat(fi.arr(n)?Y2(n):n)},[])}function qQ(e){return fi.arr(e)?e:(fi.str(e)&&(e=WQ(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function d4(e,t){return e.some(function(n){return n===t})}function h4(e){var t={};for(var n in e)t[n]=e[n];return t}function u4(e,t){var n=h4(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function X2(e,t){var n=h4(e);for(var i in t)n[i]=fi.und(e[i])?t[i]:e[i];return n}function sp(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function p4(e,t){return fi.fnc(e)?e(t.target,t.id,t.total):e}function Wh(e,t){return e.getAttribute(t)}function f4(e,t,n){if(d4([n,"deg","rad","turn"],sp(t)))return t;var r=W2.CSS[t+n];if(!fi.und(r))return r;var s=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(s),s.style.position="absolute",s.style.width=100+n;var l=100/s.offsetWidth;a.removeChild(s);var c=l*parseFloat(t);return W2.CSS[t+n]=c,c}function YQ(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?f4(e,r,n):r}}function m4(e,t){return fi.dom(e)&&!fi.inp(e)&&(Wh(e,t)||fi.svg(e)&&e[t])?"attribute":fi.dom(e)&&d4(M6e,t)?"transform":fi.dom(e)&&"transform"!==t&&YQ(e,t)?"css":null!=e[t]?"object":void 0}function XQ(e){if(fi.dom(e)){for(var r,t=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;r=n.exec(t);)i.set(r[1],r[2]);return i}}function g4(e,t,n,i){switch(m4(e,t)){case"transform":return function I6e(e,t,n,i){var r=ex(t,"scale")?1:0+function T6e(e){return ex(e,"translate")||"perspective"===e?"px":ex(e,"rotate")||ex(e,"skew")?"deg":void 0}(t),o=XQ(e).get(t)||r;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),i?f4(e,o,i):o}(e,t,i,n);case"css":return YQ(e,t,n);case"attribute":return Wh(e,t);default:return e[t]||0}}function v4(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=sp(e)||0,r=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+o+i;case"-":return r-o+i;case"*":return r*o+i}}function $Q(e,t){if(fi.col(e))return function A6e(e){return fi.rgb(e)?function O6e(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):fi.hex(e)?function E6e(e){var n=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,l,c,d){return l+l+c+c+d+d}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1)"}(e):fi.hsl(e)?function D6e(e){var a,l,c,t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),n=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,o=t[4]||1;function s(p,g,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?p+6*(g-p)*v:v<.5?g:v<2/3?p+(g-p)*(2/3-v)*6:p}if(0==i)a=l=c=r;else{var d=r<.5?r*(1+i):r+i-r*i,h=2*r-d;a=s(h,d,n+1/3),l=s(h,d,n),c=s(h,d,n-1/3)}return"rgba("+255*a+","+255*l+","+255*c+","+o+")"}(e):void 0}(e);if(/\s/g.test(e))return e;var n=sp(e),i=n?e.substr(0,e.length-n.length):e;return t?i+t:i}function y4(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function QQ(e){for(var i,t=e.points,n=0,r=0;r<t.numberOfItems;r++){var o=t.getItem(r);r>0&&(n+=y4(i,o)),i=o}return n}function KQ(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function k6e(e){return 2*Math.PI*Wh(e,"r")}(e);case"rect":return function R6e(e){return 2*Wh(e,"width")+2*Wh(e,"height")}(e);case"line":return function N6e(e){return y4({x:Wh(e,"x1"),y:Wh(e,"y1")},{x:Wh(e,"x2"),y:Wh(e,"y2")})}(e);case"polyline":return QQ(e);case"polygon":return function F6e(e){var t=e.points;return QQ(e)+y4(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function ZQ(e,t){var n=t||{},i=n.el||function B6e(e){for(var t=e.parentNode;fi.svg(t)&&fi.svg(t.parentNode);)t=t.parentNode;return t}(e),r=i.getBoundingClientRect(),o=Wh(i,"viewBox"),s=r.width,a=r.height,l=n.viewBox||(o?o.split(" "):[0,0,s,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:a/l[3]}}function U6e(e,t){function n(a){return void 0===a&&(a=0),e.el.getPointAtLength(t+a>=1?t+a:0)}var i=ZQ(e.el,e.svg),r=n(),o=n(-1),s=n(1);switch(e.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(s.y-o.y,s.x-o.x)/Math.PI}}function JQ(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=$Q(fi.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:fi.str(e)||t?i.split(n):[]}}function eK(e){return q2(e?Y2(fi.arr(e)?e.map(qQ):qQ(e)):[],function(n,i,r){return r.indexOf(n)===i})}function tK(e){var t=eK(e);return t.map(function(n,i){return{target:n,id:i,total:t.length,transforms:{list:XQ(n)}}})}function j6e(e,t){var n=h4(t);if(/^spring/.test(n.easing)&&(n.duration=HQ(n.easing)),fi.arr(e)){var i=e.length;2!==i||fi.obj(e[0])?fi.fnc(t.duration)||(n.duration=t.duration/i):e={value:e}}var o=fi.arr(e)?e:[e];return o.map(function(s,a){var l=fi.obj(s)&&!fi.pth(s)?s:{value:s};return fi.und(l.delay)&&(l.delay=a?0:t.delay),fi.und(l.endDelay)&&(l.endDelay=a===o.length-1?t.endDelay:0),l}).map(function(s){return X2(s,n)})}var nK={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){if(i.list.set(t,n),t===i.last||r){var o="";i.list.forEach(function(s,a){o+=a+"("+s+") "}),e.style.transform=o}}};function iK(e,t){tK(e).forEach(function(i){for(var r in t){var o=p4(t[r],i),s=i.target,a=sp(o),l=g4(s,r,a,i),d=v4($Q(o,a||sp(l)),l),h=m4(s,r);nK[h](s,r,d,i.transforms,!0)}})}function Y6e(e,t){return q2(Y2(e.map(function(n){return t.map(function(i){return function q6e(e,t){var n=m4(e.target,t.name);if(n){var i=function W6e(e,t){var n;return e.tweens.map(function(i){var r=function G6e(e,t){var n={};for(var i in e){var r=p4(e[i],t);fi.arr(r)&&1===(r=r.map(function(o){return p4(o,t)})).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),o=r.value,s=fi.arr(o)?o[1]:o,a=sp(s),l=g4(t.target,e.name,a,t),c=n?n.to.original:l,d=fi.arr(o)?o[0]:c,h=sp(d)||sp(l),p=a||h;return fi.und(s)&&(s=c),r.from=JQ(d,p),r.to=JQ(v4(s,d),p),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=c4(r.easing,r.duration),r.isPath=fi.pth(o),r.isColor=fi.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}(t,e),r=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(n,i)})})),function(n){return!fi.und(n)})}function rK(e,t){var n=e.length,i=function(o){return o.timelineOffset?o.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,e.map(function(o){let s=o.startOnceDelay??0,a=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return i(o)+s+a+l+o.duration*(o.loop??1)})):t.duration,r.delay=n?Math.min.apply(Math,e.map(function(o){let s=o.startOnceDelay??0,a=o.pingPongDelayCorrection??0;return i(o)+s+a+o.delay})):t.delay,r.endDelay=n?r.duration-Math.max.apply(Math,e.map(function(o){let s=o.startOnceDelay??0,a=o.pingPongDelayCorrection??0,l=o.pingPongEndDelayCorrection??0;return i(o)+s+a+o.duration*(o.loop??1)-o.endDelay-l})):t.endDelay,r}var $2,oK=0,Zc=[],sK=[],$6e=function(){function e(){$2=requestAnimationFrame(t)}function t(n){var i=Zc.length;if(i){for(var r=0;r<i;){var o=Zc[r];o.paused?(Zc.splice(r,1),i-=1):(o.tick(n),r++)}e()}else $2=cancelAnimationFrame($2)}return e}();function ps(e){void 0===e&&(e={});var r,o,t=0,n=0,i=0,s=0,a=null;function l(X){var Y=window.Promise&&new Promise(function(Z){return a=Z});return X.finished=Y,Y}var c=function X6e(e){var t=u4(jQ,e),n=u4(a4,e),i=function H6e(e,t){var n=[],i=t.keyframes;for(var r in i&&(t=X2(function V6e(e){for(var t=q2(Y2(e.map(function(o){return Object.keys(o)})),function(o){return fi.key(o)}).reduce(function(o,s){return o.indexOf(s)<0&&o.push(s),o},[]),n={},i=function(o){var s=t[o];n[s]=e.map(function(a){var l={};for(var c in a)fi.key(c)?c==s&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<t.length;r++)i(r);return n}(i),t)),t)fi.key(r)&&n.push({name:r,tweens:j6e(t[r],e)});return n}(n,e),r=tK(e.targets),o=Y6e(r,i),s=rK(o,n),a=oK;return oK++,X2(t,{id:a,children:[],animatables:r,animations:o,duration:s.duration,delay:s.delay,endDelay:s.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}(e);function h(){var X=c.direction;"alternate"!==X&&(c.direction="normal"!==X?"normal":"reverse"),c.reversed=!c.reversed,o.forEach(function(Y){(1===Y.loop||Y.loop%2==0)&&(Y.reversed=c.reversed)})}function g(X){return c.reversed?c.duration-X:X}function y(X,Y,Z=!1){Y&&Y.seek(c.reversed?Y.duration*Y.loop-(X-Y.timelineOffset-Y.pingPongDelayCorrection):X-Y.timelineOffset-Y.startOnceDelay-Y.pingPongDelayCorrection,Z)}function P(X){var Y=0,Z=c.animations,ee=Z.length;for("alternate"!==c.direction&&"alternate"===c.parent?.direction?!1===c.parent?.rewind&&!0===c.reversePlayback&&!1===c.rewind&&(X=c.parent?.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-X:c.duration+c.delay-c.endDelay-X):H(!1,c.parent?.rewind,c.rewind,c.parent?.reversePlayback,c.reversePlayback)&&(X=c.parent?.reversed&&"alternate"===c.direction?c.duration-c.delay+c.endDelay-X:c.duration+c.delay-c.endDelay-X);Y<ee;){var oe=Z[Y],ce=oe.animatable,de=oe.tweens,he=de.length-1,Pe=de[he];let yt;he&&(Pe=q2(de,function(nt){return X<nt.end})[0]||Pe),yt=c.parent?.reversed&&"alternate"===c.direction?Vd(X-Pe.start-Pe.endDelay,0,Pe.duration)/Pe.duration:Vd(X-Pe.start-Pe.delay,0,Pe.duration)/Pe.duration;for(var we=isNaN(yt)?1:Pe.easing(yt),_e=Pe.to.strings,ve=Pe.round,ke=[],ze=Pe.to.numbers.length,Le=void 0,Ne=0;Ne<ze;Ne++){var $e=void 0;let nt,zt;"alternate"!==c.direction?!1===c.parent?.rewind&&!0===c.reversePlayback&&!1===c.rewind?(nt=Pe.to.numbers[Ne],zt=Pe.from.numbers[Ne]||0):(zt=Pe.to.numbers[Ne],nt=Pe.from.numbers[Ne]||0):H(!0,c.parent?.rewind,c.rewind,c.parent?.reversePlayback,c.reversePlayback)?(nt=Pe.to.numbers[Ne],zt=Pe.from.numbers[Ne]||0):(zt=Pe.to.numbers[Ne],nt=Pe.from.numbers[Ne]||0),$e=Pe.isPath?U6e(Pe.value,we*zt):nt+we*(zt-nt),ve&&(Pe.isColor&&Ne>2||($e=Math.round($e*ve)/ve)),ke.push($e)}var Be=_e.length;if(Be){Le=_e[0];for(var Xe=0;Xe<Be;Xe++){var gt=_e[Xe+1],Ze=ke[Xe];isNaN(Ze)||(Le+=gt?Ze+gt:Ze+" ")}}else Le=ke[0];nK[oe.type](ce.target,oe.property,Le,ce.transforms),oe.currentValue=Le,Y++}}function S(X){c[X]&&!c.passThrough&&c[X](c)}l(c);let A={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function H(X,Y,Z,ee,oe){return A[X<<4|Y<<3|Z<<2|ee<<1|oe]}function U(X,Y=!1){var Z=c.duration;let ee=c.delay,oe=Z-c.endDelay;c.parent?.reversed&&"alternate"===c.direction&&(ee=c.endDelay,oe=Z-c.delay);var ce=g(X);if(c.progress=Vd(ce/Z*100,0,100),Y||(c.reversePlayback=ce<c.currentTime),s&&function b(X,Y=!1){if(c.reversed)for(var Z=s;Z--;)y(X,o[Z],Y);else for(var ee=0;ee<s;ee++)y(X,o[ee],Y)}(ce,Y),!c.began&&c.currentTime>=0&&(c.began=!0,S("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,S("loopBegin")),(c.reversed||ce>=0)&&ce<=ee&&0!==c.currentTime&&(P(0),S("change")),(ce>=oe&&c.currentTime!==Z+c.pingPongDelayCorrection||!Z)&&(P(Z),S("change")),ce>ee&&ce<oe?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,S("changeBegin")),P(ce),S("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,S("change"),s&&S("timelineChangeComplete")):c.began&&ce>oe&&S("changeComplete"),c.currentTime=Vd(ce,0,Z+c.pingPongDelayCorrection),c.began&&S("update"),X>=Z)if(function O(){c.remaining&&!0!==c.remaining&&c.remaining--}(),c.remaining){t+=s?c.duration/ps.speed:c.duration;for(let de of o)de.setStartTime(0),de.remaining=de.loop;S("loopComplete"),c.loopBegan=!1,"alternate"===c.direction?h():s&&function p(){c.direction="normal",c.reversed=!1,o.forEach(function(X){return X.reversed=!1})}()}else c.paused=!0,c.completed||(c.completed=!0,S("loopComplete"),S("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)))}return c.reset=function(){var X=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===X,c.remaining=c.loop;for(var Y=s=(o=c.children).length;Y--;)c.children[Y].reset();P(c.reversed?c.duration:0)},c.setStartTime=function(X){t=X},c.set=function(X,Y){return iK(X,Y),c},c.tick=function(X){i=X,t||(t=i),U((i+(n-t))*ps.speed)},c.seek=function(X,Y=!1){U(X-t,Y)},c.pause=function(X){c.paused=!0,s&&(r=X??performance.now())},c.play=function(X){!c.paused||(c.completed&&c.reset(),c.paused=!1,Zc.push(c),s&&void 0!==r&&(t+=(X??performance.now())-r),$2||$6e())},c.reverse=function(){h(),c.completed=!c.reversed,function v(){t=0,n=g(c.currentTime)*(1/ps.speed)}()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function aK(e,t){for(var n=t.length;n--;)d4(e,t[n].animatable.target)&&t.splice(n,1)}typeof document<"u"&&document.addEventListener("visibilitychange",function Q6e(e){document.hidden?(Zc.forEach(function(t){return t.pause(e.timeStamp)}),sK=Zc.slice(0),ps.running=Zc=[]):sK.forEach(function(t){return t.play(e.timeStamp)})}),ps.version="3.2.0",ps.speed=1,ps.running=Zc,ps.remove=function K6e(e){for(var t=eK(e),n=Zc.length;n--;){var i=Zc[n],r=i.animations,o=i.children;aK(t,r);for(var s=o.length;s--;){var a=o[s],l=a.animations;aK(t,l),!l.length&&!a.children.length&&o.splice(s,1)}!r.length&&!o.length&&i.pause()}},ps.get=g4,ps.set=iK,ps.convertPx=f4,ps.path=function z6e(e,t){var n=fi.str(e)?WQ(e)[0]:e,i=t||100;return function(r){return{property:r,el:n,svg:ZQ(n),totalLength:KQ(n)*(i/100)}}},ps.setDashoffset=function L6e(e){var t=KQ(e);return e.setAttribute("stroke-dasharray",t),t},ps.stagger=function Z6e(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?c4(t.easing):null,r=t.grid,o=t.axis,s=t.from||0,a="first"===s,l="center"===s,c="last"===s,d=fi.arr(e),h=parseFloat(d?e[0]:e),p=d?parseFloat(e[1]):0,g=sp(d?e[1]:e)||0,v=t.start||0+(d?h:0),y=[],b=0;return function(P,S,O){if(a&&(s=0),l&&(s=(O-1)/2),c&&(s=O-1),!y.length){for(var A=0;A<O;A++){if(r){var H=l?(r[0]-1)/2:s%r[0],U=l?(r[1]-1)/2:Math.floor(s/r[0]),Z=H-A%r[0],ee=U-Math.floor(A/r[0]),oe=Math.sqrt(Z*Z+ee*ee);"x"===o&&(oe=-Z),"y"===o&&(oe=-ee),y.push(oe)}else y.push(Math.abs(s-A));b=Math.max.apply(Math,y)}i&&(y=y.map(function(de){return i(de/b)*b})),"reverse"===n&&(y=y.map(function(de){return o?de<0?-1*de:-de:Math.abs(b-de)}))}return v+(d?(p-h)/b:h)*(Math.round(100*y[S])/100)+g}},ps.timeline=function J6e(e){void 0===e&&(e={});var t=ps(e);return t.duration=0,t.add=function(n,i){var r=Zc.indexOf(t),o=t.children;function s(p){p.passThrough=!0}r>-1&&Zc.splice(r,1);for(var a=0;a<o.length;a++)s(o[a]);var l=X2(n,u4(a4,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=fi.und(i)?c:v4(i,c),s(t);var d=ps(l);s(d),o.push(d),d.parent=t;var h=rK(o,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,!0===d.loop&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},ps.easing=c4,ps.penner=GQ,ps.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var lK=ps,cK=new te,dK=new te,hK=new _i;function Ta(e,t,n,i,r,o){let s=void 0!==n[e]?n[e]:void 0,a=i[e];if(null==a)return;let l=null!=s?"string"==typeof s?Number(r.getVariable(s)??0):s:t[e],c="string"==typeof a?Number(r.getVariable(a)??0):a;return l!==c?{update:d=>{let h=En.lerp(l,c,d);t[e]=o?Math.trunc(h):h},start:()=>{t[e]=l},end:()=>{t[e]=c}}:void 0}function b4(e,t,n,i,r,o){let a=i[e];if(!a)return;let c=[...(n[e]?n[e]:void 0)??t[e]].map(h=>"string"==typeof h?Number(r.getVariable(h)??0):h),d=[...a].map(h=>"string"==typeof h?Number(r.getVariable(h)??0):h);return c.length!==d.length||N3(c,d)?void 0:{update:h=>{c.forEach((p,g)=>{let v=En.lerp(p,d[g],h);t[e][g]=o?Math.trunc(v):v})},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],d)}}}function Q2(e,t,n){return t.forEach((i,r)=>{e.setComponent(r,"string"==typeof i?Number(n.getVariable(i)??0):i)}),e}function uK(e,t,n,i,r){let o=n[e]?n[e]:void 0,s=i[e];if(!s)return;let a=t[e],l=o?Q2(new te,o,r):a.clone(),c=Q2(new te,s,r);return l.equals(c)?void 0:{update:d=>{a.lerpVectors(l,c,d)},start:()=>{a.copy(l)},end:()=>{a.copy(c)}}}function pK(e,t,n){return t.forEach((i,r)=>{e.setComponent(r,"string"==typeof i?Number(n.getVariable(i)??0):i)}),e}function K2(e,t,n,i,r){let o=n[e]?n[e]:void 0,s=i[e];if(!s)return;let a=t[e],l=!(a instanceof Ue),c=a instanceof Ue?a:(new Ue).fromArray(a),d=o?pK(new Ue,o,r):c.clone(),h=pK(new Ue,s,r);return d.equals(h)?void 0:{update:p=>{c.lerpVectors(d,h,p),l&&(t[e]=c.toArray())},start:()=>{c.copy(d),l&&(t[e]=c.toArray())},end:()=>{c.copy(h),l&&(t[e]=c.toArray())}}}function Z2(e,t,n,i,r){let o=n[e]?n[e]:void 0,s=i[e];if(!s)return;let a=t[e],l=new Da(a.r,a.g,a.b,a.a),c=o?"string"==typeof o?r.getColor(o).clone():new Da(o.r,o.g,o.b,o.a):l.clone(),d="string"==typeof s?r.getColor(s).clone():new Da(s.r,s.g,s.b,s.a);return c.equals(d)?void 0:{update:h=>{l.lerpColors(c,d,h);let p=En.lerp(c.a,d.a,h);l.a=p,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(c)},end:()=>{l.copy(d)}}}function Nf(e,t,n,i,r){return"number"==typeof t[e]?Ta(e,t,n??{},i,r):Array.isArray(t[e])?b4(e,t,n??{},i,r):void 0}function fK(e,t,n,i){let r=[],o=f1(n,i)||!!t.layers&&f1(t,i);r.push(function vze(e,t){return{update:()=>{e.transparent=t}}}(e,o));for(let s of e.layers){let a=t.layers?.data(s.uuid),l=n.layers.data(s.uuid);if(!l||"light"!==s.type&&(!(s.visible??1)||!(l.visible??1)))continue;let c=s.getNames().filter(d=>!dq.some(h=>d.includes(h)));for(let d of c)try{let p,h=s.getValue(d);if("colors"===d)p=mze(s,a,l,d);else if(Array.isArray(h))"steps"===d&&(p=fze(s,a,l,d));else if("number"==typeof h)p=cze(s,a,l,d,i);else{if("boolean"==typeof h)continue;h instanceof Ue?p=dze(s,a,l,d):h instanceof te?p=hze(s,a,l,d,i):h instanceof Da?p=pze(s,a,l,d,i):h instanceof ni?p=uze(s,a,l,d,i):"isTexture"in h&&(p=gze(s,a,l,d))}p&&(Array.isArray(p)?r.push(...p):r.push(p))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${d}`,h)}}return r}function cze(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let o=t?t[i]:e.getValue(i),s=n[i],a="string"==typeof o?Number(r.getVariable(o)??0):o,l="string"==typeof s?Number(r.getVariable(s)??0):s;return a!==l?{update:c=>{e.setValue(i,En.lerp(a,l,c))},start:()=>{e.setValue(i,a)},end:()=>{e.setValue(i,l)}}:void 0}function dze(e,t,n,i){if(!e.hasValue(i)||!(i in n))return;let r=e.getValue(i),o=t?(new Ue).fromArray(t[i]):r.clone(),s=(new Ue).fromArray(n[i]);return o.equals(s)?void 0:{update:a=>{r.lerpVectors(o,s,a)},start:()=>{r.copy(o)},end:()=>{r.copy(s)}}}function hze(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let o=e.getValue(i),s=t?t[i]:void 0,a=n[i],l=s?Q2(new te,s,r):o.clone(),c=Q2(new te,a,r);return l.equals(c)?void 0:{update:d=>{o.lerpVectors(l,c,d)},start:()=>{o.copy(l)},end:()=>{o.copy(c)}}}function uze(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let o=t?t[i]:void 0,s=n[i],a=e.getValue(i),l=o?"string"==typeof o?r.getColor(o).clone():(new ni).setRGB(o.r,o.g,o.b):a.clone(),c="string"==typeof s?r.getColor(s).clone():(new ni).setRGB(s.r,s.g,s.b);if(l.equals(c))return;let d=a.clone();return{update:h=>{e.getValue(i)!==d&&e.setValue(i,d),d.lerpColors(l,c,h)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function pze(e,t,n,i,r){if(!e.hasValue(i)||!(i in n))return;let o=t?t[i]:void 0,s=n[i],a=e.getValue(i),l=o?"string"==typeof o?r.getColor(o).clone():(new ni).setRGB(o.r,o.g,o.b):a.clone(),c="string"==typeof s?r.getColor(s).clone():new Da(s.r,s.g,s.b,s.a);if(l.equals(c))return;let d=a.clone();return{update:h=>{e.getValue(i)!==d&&e.setValue(i,d),d.lerpColors(l,c,h)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}function fze(e,t,n,i="steps"){if(!e.hasValue(i)||!(i in n))return;let r=[],o=e.getValue(i),s=t?t[i]:o,a=n[i];return N3(s,a)||r.push({update:l=>{let c=[...o];for(let d=0;d<o.length;++d)c[d]=En.lerp(s[d],a[d],l);e.setValue(i,c)},start:()=>{e.setValue(i,s)},end:()=>{e.setValue(i,a)}}),r.length?r:void 0}function mze(e,t,n,i="colors"){if(!e.hasValue(i)||!(i in n))return;let r=[],o=e.getValue(i),s=t?t[i]:o.map(l=>l.toArray()),a=n[i];for(let l=0;l<o.length;++l){let c=[...s[l]],d=[...a[l]];CP.isEqual(c,d)||r.push({update:h=>{o[l].fromArray(CP.lerp(c,d,h))},start:()=>{o[l].fromArray(c)},end:()=>{o[l].fromArray(d)}})}return r.length?r:void 0}function gze(e,t,n,i="texture"){if(!e.hasValue(i)||!(i in n))return;let r=e.getNode("rotation"),o=t?.[i]?.rotation??0,s=n[i]?.rotation??0;if(r&&o!==s)return{update:b=>{r.value=En.lerp(o,s,b)*En.DEG2RAD},start:()=>{r.value=o*En.DEG2RAD},end:()=>{r.value=s*En.DEG2RAD}};let a=e.getNode("mat");if(!a)return;let l=t?t[i]:a,c=n[i],d=[...l.repeat],h=[...l.offset],p=[...c.repeat],g=[...c.offset],v=l.rotation??0,y=c.rotation??0;return qu.isEqual(d,p)&&qu.isEqual(h,g)&&v===y?void 0:{update:b=>{a.repeat=qu.lerp(d,p,b),a.offset=qu.lerp(h,g,b),a.rotation=En.lerp(v,y,b),a.updateMatrix()},start:()=>{a.repeat=[...d],a.offset=[...h],a.rotation=v,a.updateMatrix()},end:()=>{a.repeat=[...p],a.offset=[...g],a.rotation=y,a.updateMatrix()}}}var _4=new te,mK=new js;function gK(e,t,n,i,r){let o=[];return e.data.visible&&o.push(...function yze(e,t,n,i,r){let s,a,l,c,d,h,p,g,o=[];if(e instanceof da?(s=K2("position",e,t,n,r),s&&o.push(s),l=Ta("rotation",e,t,n,r),l&&o.push(l),c=K2("shear",e,t,n,r),c&&o.push(c)):(g={slide:t.pathSnapping?.slide??e.updatedPathSnapping?.slide??e.dataPatched.pathSnapping?.slide??0,offset:t.pathSnapping?.offset??e.updatedPathSnapping?.offset??e.dataPatched.pathSnapping?.offset??0},h=Ta("slide",g,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,r),h&&o.push(h),p=Ta("offset",g,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,n.pathSnapping??e.dataPatched.pathSnapping,r),p&&o.push(p),!h&&!p&&(s=uK("position",e,t,n,r),s&&o.push(s),a=uK("scale",e,t,n,r),a&&o.push(a),l=function bze(e,t,n,i,r){let o=t?.rotation?t.rotation.map(d=>("string"==typeof d?Number(r.getVariable(d)??0):d)*En.DEG2RAD):void 0,s=n.rotation?.map(d=>("string"==typeof d?Number(r.getVariable(d)??0):d)*En.DEG2RAD);if(!s)return;let a=o?(new te).fromArray(o):(new te).setFromEuler(e.rotation),l=(new te).fromArray(s);if(a.equals(l))return;let c=_4.subVectors(l,a);if(i&&c.toArray().every(d=>Math.abs(d)<2*Math.PI)){let d=(new _i).setFromEuler(mK.setFromVector3(a)),h=(new _i).setFromEuler(mK.setFromVector3(l));return{update:p=>{!function eze(e,t,n,i){if(0===i)return n.copy(e);if(1===i)return n.copy(t);let r=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(r>=1)return n.copy(e);let o=1-r*r;if(o<=Number.EPSILON){let d=1-i;return n.w=d*e.w+i*t.w,n.x=d*e.x+i*t.x,n.y=d*e.y+i*t.y,n.z=d*e.z+i*t.z,n.normalize(),n}let s=Math.sqrt(o),a=Math.atan2(s,r),l=Math.sin((1-i)*a)/s,c=Math.sin(i*a)/s;n.w=e.w*l+t.w*c,n.x=e.x*l+t.x*c,n.y=e.y*l+t.y*c,n.z=e.z*l+t.z*c}(d,h,e.quaternion,p)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(l)}}}return{update:d=>{_4.lerpVectors(a,l,d),e.rotation.setFromVector3(_4)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(l)}}}(e,t,n,i,r),l&&o.push(l),d=function tze(e,t,n,i){let r=n[e]?n[e]:void 0,o=i[e];if(!o)return;let s=t[e],a=r?(new qt).fromArray(r):s.clone(),l=new te,c=new _i,d=new te;a.decompose(l,c,d);let h=(new qt).fromArray(o),p=new te,g=new _i,v=new te;return h.decompose(p,g,v),a.equals(h)?void 0:{update:y=>{hK.slerpQuaternions(c,g,y),cK.lerpVectors(l,p,y),dK.lerpVectors(d,v,y),s.compose(cK,hK,dK)},start:()=>{s.compose(l,c,d)},end:()=>{s.compose(p,g,v)}}}("hiddenMatrix",e,t,n),d&&o.push(d))),s||a||l||d||h||p){let v=e instanceof da?()=>{e.updateWorldMatrix(!0)}:()=>{e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e.parent?.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),zd(e)&&rp(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,g))};o.push({update:v,start:v,end:v})}return o}(e,t,n,r,i)),e instanceof da?o.push(...function Ize(e,t,n,i,r){let s,a,l,c,d,h,p,g,v,y,b,P,S,O,A,o=[];if("width"in e&&(s=Ta("width",e,t,n,r),s&&o.push(s)),"height"in e&&(a=Ta("height",e,t,n,r),a&&o.push(a)),e instanceof ha||e instanceof Gh){let H={...t.fill},U={...n.fill};void 0!==H.enabled&&H.enabled!==U.enabled&&(o.push(function Sze(e,t){return{update:()=>{e instanceof ha&&(e.fill.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,color:{...H.color,a:0}}),U.enabled||Object.assign(U,{enabled:!0,color:{...U.color,a:0}})),l=Z2("color",e.fill,H,U,r),l&&o.push(l)}if(e instanceof ha){let H={...t.stroke},U={...n.stroke};(H.enabled||U.enabled)&&(o.push(function Oze(e,t){return{update:()=>{e instanceof ha&&(e.stroke.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,color:{...H.color,a:0}}),U.enabled||Object.assign(U,{enabled:!0,color:{...U.color,a:0}})),c=Z2("color",e.stroke,H,U,r),c&&o.push(c),d=Ta("thickness",e.stroke,H,U,r),d&&o.push(d)}if(e instanceof ha){let H={...t.dropShadow},U={...n.dropShadow};(H.enabled||U.enabled)&&(o.push(function Eze(e,t){return{update:()=>{e instanceof ha&&(e.dropShadow.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,color:{...H.color,a:0}}),U.enabled||Object.assign(U,{enabled:!0,color:{...U.color,a:0}})),h=Z2("color",e.dropShadow,H,U,r),h&&o.push(h),p=Ta("blurRadius",e.dropShadow,H,U,r),p&&o.push(p),v=Ta("spread",e.dropShadow,H,U,r),v&&o.push(v),g=K2("offset",e.dropShadow,H,U,r),g&&o.push(g)}if(e instanceof ha){let H={...t.innerShadow},U={...n.innerShadow};(H.enabled||U.enabled)&&(o.push(function Dze(e,t){return{update:()=>{e instanceof ha&&(e.innerShadow.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,color:{...H.color,a:0}}),U.enabled||Object.assign(U,{enabled:!0,color:{...U.color,a:0}})),y=Z2("color",e.innerShadow,H,U,r),y&&o.push(y),b=Ta("blurRadius",e.innerShadow,H,U,r),b&&o.push(b),S=Ta("spread",e.innerShadow,H,U,r),S&&o.push(S),P=K2("offset",e.innerShadow,H,U,r),P&&o.push(P)}if(e instanceof ha||e instanceof Gh){let H={...t.backgroundBlur},U={...n.backgroundBlur};(H.enabled||U.enabled)&&(o.push(function Aze(e,t){return{update:()=>{e instanceof ha&&(e.backgroundBlur.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,radius:0}),U.enabled||Object.assign(U,{enabled:!0,radius:0})),O=Ta("radius",e.backgroundBlur,H,U,r),O&&o.push(O)}if(e instanceof ha){let H={...t.layerBlur},U={...n.layerBlur};(H.enabled||U.enabled)&&(o.push(function Tze(e,t){return{update:()=>{e instanceof ha&&(e.layerBlur.enabled=t)}}}(e,!0)),H.enabled||Object.assign(H,{enabled:!0,radius:0}),U.enabled||Object.assign(U,{enabled:!0,radius:0})),A=Ta("radius",e.layerBlur,H,U,r),A&&o.push(A)}if(e instanceof Gh||e instanceof Q_){let H=b4("cornerRadius",e,t,n,r);H&&o.push(H)}return o}(e,t,n,0,i)):(e.data.visible&&o.push(...function _ze(e,t,n,i){let r=[];if(!("cloner"in n)||!e.cloner)return r;let o=e.cloner,s="cloner"in t?t.cloner:{},a=n.cloner;tq.forEach(g=>{let v;v="count"===g?Ta("count",o.parameters,s,a,i,!0):Nf(g,o.parameters,s??{},a,i),v&&r.push(v)});let l=function xze(e,t,n,i){if("radial"!==e.parameters.type)return;let r=t.radial,o=n.radial;if(!o)return;let s=e.parameters.radial,a=[];return nq.forEach(l=>{let c=Nf(l,s,r??{},o,i);c&&a.push(c)}),a}(o,s,a,i);l?.length&&r.push(...l);let c=function Cze(e,t,n,i){if("linear"!==e.parameters.type)return;let r=t.linear,o=n.linear;if(!o)return;let s=[],a=e.parameters.linear;return iq.forEach(l=>{let c=Nf(l,a,r??{},o,i);c&&s.push(c)}),s}(o,s,a,i);c?.length&&r.push(...c);let d=function wze(e,t,n,i){if("grid"!==e.parameters.type)return;let r=t.grid,o=n.grid;if(!o)return;let s=[],a=e.parameters.grid;return rq.forEach(l=>{let c;c="count"===l?b4(l,a,r??{},o,i,!0):Nf(l,a,r??{},o,i),c&&s.push(c)}),s}(o,s,a,i);d?.length&&r.push(...d);let h=function Mze(e,t,n,i){if("toObject"!==e.parameters.type)return;let r=t.toObject,o=n.toObject;if(!o)return;let s=[],a=e.parameters.toObject;return oq.forEach(l=>{let c;c="count"===l?Ta(l,a,r??{},o,i,!0):Nf(l,a,r??{},o,i),c&&s.push(c)}),s}(o,s,a,i);h?.length&&r.push(...h);let p=function Pze(e,t,n,i){if(!e.parameters.randomness)return;let r=t.randomnessObject,o=n.randomnessObject;if(!o)return;let s=[],a=e.parameters.randomnessObject;return sq.forEach(l=>{let c=Nf(l,a,r??{},o,i);c&&s.push(c)}),s}(o,s,a,i);return p?.length&&r.push(...p),r.length&&r.push({update:()=>{o.update()}}),r}(e,t,n,i)),zd(e)?(e instanceof Ka&&e.data.visible&&o.push(...function sze(e,t,n,i){let r=[];if(!("geometry"in n))return r;let o=e.geometry.userData.parameters,s="geometry"in t?t.geometry:{},a=n.geometry;if(e instanceof V_){let l=function rze(e,t,n,i){if(void 0===n.scaleBaked)return;let r=(t.scaleBaked??e.data.geometry.scaleBaked).map(a=>"string"==typeof a?Number(i.getVariable(a)??0):a),o=n.scaleBaked.map(a=>"string"==typeof a?Number(i.getVariable(a)??0):a);if(rg.isEqual(r,o))return;let s=[];return s.push({update:a=>{e.updateGeometryInteractions({scaleBaked:[En.lerp(r[0],o[0],a),En.lerp(r[1],o[1],a),En.lerp(r[2],o[2],a)]},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:r},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:o},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),s}(e,s,a,i);l&&r.push(...l)}else{let l={};if(Object.assign(l,Ph(o,_I),Ph(s,_I)),_I.forEach(c=>{let d=Nf(c,l,s,a,i);d&&r.push(d)}),e instanceof VR){Object.assign(l,{extrusion:{...o.extrusion}});let c=function oze(e,t,n,i){if(!n.extrusion)return;let r=e.extrusion,o=t.extrusion??{},s=n.extrusion,a=[];return pq.forEach(l=>{let c=Nf(l,r,o,s,i);c&&a.push(c)}),a}(l,s,a,i);c&&r.push(...c)}r.length&&r.push({update:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:c=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return r}(e,t,n,i)),e.data.visible&&o.push(...function lze(e,t,n,i){let r=[];if(Array.isArray(e.material)){if(!("materials"in n)||!n.materials)return r;let o="materials"in t&&t.materials?t.materials:[],s=n.materials;e.material.forEach((a,l)=>{if(!s[l])return;let c=o[l]??{},d=s[l];"string"==typeof c||"string"==typeof d||r.push(...fK(a,c,d,i))})}else{if(!("material"in n)||!n.material)return r;let o="material"in t&&t.material?t.material:{},s=n.material;if("string"==typeof o||"string"==typeof s)return r;r.push(...fK(e.material,o,s,i))}return r}(e,t,n,i))):(e=>fR.is(e))(e)?e.data.visible&&o.push(...function aze(e,t,n,i){let r=[];if(void 0!==n.intensity){let o=Ta("intensity",e,t,n,i);o&&r.push(o)}if(void 0!==n.color){let o=function nze(e,t,n,i,r){let o=n[e]?n[e]:void 0,s=i[e];if(!s)return;let a=t[e],l=o?"string"==typeof o?r.getColor(o).clone():(new ni).setRGB(o.r,o.g,o.b):a.clone(),c="string"==typeof s?r.getColor(s).clone():(new ni).setRGB(s.r,s.g,s.b);if(l.equals(c))return;let d=a.clone();return{update:h=>{d.lerpColors(l,c,h),t[e]?.copy?.(d)},start:()=>{d.copy(l)},end:()=>{d.copy(c)}}}("color",e,t,n,i);o&&r.push(o)}return r}(e,t,n,i)):(e=>e instanceof Za)(e)&&o.push(...function ize(e,t,n,i){let r=[],s="OrthographicCamera"===e.cameraType?n.orthographic?.zoom:n.perspective?.zoom;if(void 0!==s){let a=("OrthographicCamera"===e.cameraType?t.orthographic?.zoom:t.perspective?.zoom)??e.zoom,l=s;a!==l&&r.push({update:c=>{e.zoom=En.lerp(a,l,c),e.updateProjectionMatrix()},start:()=>{e.zoom=a,e.updateProjectionMatrix()},end:()=>{e.zoom=l,e.updateProjectionMatrix()}})}if(void 0!==n.targetOffset){let a=Ta("targetOffset",e,t,n,i);a&&r.push(a)}return r}(e,t,n,i))),o.length?{update:s=>{o.forEach(a=>a.update(s))},start:s=>{o.forEach(a=>a.start?.(s))},end:s=>{o.forEach(a=>a.end?.(s))}}:void 0}var vK=new te;function x4(e,t,n=!1){let i=[],r=o=>{let s=o.data;delete o.states,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let a of s.states){let l={...a.data};o.states||(o.states={}),o.states[a.id]=hg.patch(s,l)}bK(e.scene,o,null,t,void 0!==s.events.find(a=>"Follow"===a.data.type||"LookAt"===a.data.type)),yK(e)};e.scene.traverse2D(r),e.traverseChildren(o=>{if(n&&(o.rigidBody?.setTranslation(o.position0,!0),o.rigidBody?.setRotation(o.rotation0,!0),o.rigidBody?.setLinvel(vK,!0),o.rigidBody?.setAngvel(vK,!0)),!dr.is(o))return;let s=o.uuid,a=o.data;if(delete o.states,o.uuid===Lv)return;let l=!1;i.some(c=>e.scene.find(s)?.isDescendantOf(c))?l=!0:!0===a.physics?.fusedBody&&"dynamic"===a.physics.rigidBody&&i.push(s),o.data=a,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let c of a.states){let d={...c.data};!0===e.data.globalPhysics.usePhysics&&a.physics&&("dynamic"===a.physics.rigidBody||l)&&(void 0!==c.data.position&&delete d.position,void 0!==c.data.rotation&&delete d.rotation,void 0!==c.data.hiddenMatrix&&delete d.hiddenMatrix),o.states||(o.states={}),o.states[c.id]=lg.patch(a,d)}bK(e.scene,o,null,t,void 0!==a.events.find(c=>"Follow"===c.data.type||"LookAt"===c.data.type)),yK(e),o instanceof el&&o.frame&&(o.frame.traverse(c=>r(c)),o.uiCanvas?.applySize())}),e.frame&&(e.frame.traverse(o=>r(o)),e.uiCanvas?.applySize())}function yK(e){e.traverseEntity(t=>{for(let n of t.data.events){let i=[];switch(n.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...n.data.actions);break;case"GameControl":for(let r of Object.values(n.data.gameActions))i.push(...r);break;case"DragDrop":i.push(...n.data.dragDropActions.drag,...n.data.dragDropActions.drop);break;case"Conditional":i.push(...n.data.inActions,...n.data.outActions)}for(let r of i)if("Create"===r.data.type&&"Yes"===r.data.hideBase){let o=e.scene.find(r.data.object);o&&(o.visible=!1)}}})}function bK(e,t,n,i,r=!1){if(t instanceof Ka&&t.removeInteractionGeometry(i),t.changeSelectedState(n,t instanceof da?{shared:i}:{scene:e,shared:i},r),t instanceof Ka&&t.updateGeometryGroupsIfNeeded(),t instanceof Za&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),!(t instanceof da)){if(t.cloner)for(let o of t.cloner.children)o.playModeVisible=void 0;t.updateVisible()}}function _K(e){let t;if(5===e.easing){let{control1:n,control2:i}=e;t=`cubicBezier(\n\t\t\t${n[0]}, ${n[1]}, ${i[0]}, ${i[1]}\n\t\t)`}else if(6===e.easing){let{mass:n,stiffness:i,damping:r,velocity:o}=e;t=`spring( ${n}, ${i}, ${r}, ${o} )`}else{let n;switch(e.easing){case 0:default:n=pf.linear;break;case 1:n=pf.ease;break;case 2:n=pf.easeIn;break;case 3:n=pf.easeOut;break;case 4:n=pf.easeInOut}let[i,r,o,s]=n;t=`cubicBezier( ${i}, ${r}, ${o}, ${s} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function C4(e){let t={delay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return"alternate"===t.direction&&(t.delay/=2,t.endDelay/=2,"start"===e.delayDirection?(t.pingPongDelayCorrection=t.delay,"number"==typeof t.loop&&t.loop%2==0&&(t.pingPongEndDelayCorrection=t.delay)):"end"===e.delayDirection?"number"==typeof t.loop&&t.loop%2!=0&&(t.pingPongEndDelayCorrection=t.endDelay):"start-end"===e.delayDirection&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var kze={type:"beginState"},Rze={type:"completeState",isfromEntity:!1},xK=class{constructor(e,t,n,i,r,o){if(this.object=e,this.data=i,this.sharedAssets=r,this.allowSlerp=o,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),0===this.targets.t||1===this.targets.t?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let s=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"beginState",state:s}),this.object instanceof da||this.object.traverseEntity(a=>{a!==this.object&&a instanceof Za&&a.dispatchEvent(kze)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let s=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"completeState",state:s}),this.object instanceof da||this.object.traverseEntity(a=>{a!==this.object&&a instanceof Za&&a.dispatchEvent(Rze)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=gK(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},void 0===t){let s=J2(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!s)throw new Error("Missing property");this.from=s}else{let s=J2(this.object,t);if(!s)throw new Error("Missing property");this.from=s}if(void 0===n)throw new Error("Missing property");{let s=J2(this.object,n);if(!s)throw new Error("Missing property");this.to=s}this.useCurrentState=void 0===t||void 0===n,this.params={targets:this.targets,t:1,autoplay:!1,...C4(i),..._K(i),change:this.onChange},this.callback=gK(this.object,void 0===t?{}:this.from.data,void 0===n?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},CK=class extends Ca{constructor(e,t,n,i,r){if(super(),this.eventType=e,this.data=t,this.page=n,this.shared=i,this.condition=r,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{"normal"!==this.data.tweens[0].data.direction&&(this.toggleIsForward=!this.toggleIsForward),!1!==this.timelineNeedsRebuild&&(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let o=this.page.scene.find(t.object)??this.page.uiCanvas?.find(t.object)??this.page.scene.find2DInUIObjects(t.object);if(!o)throw new Error("Missing property");if(!o.states)throw new Error("Missing property");if(this.object=o,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay="start-once"===t.tweens[0].data.delayDirection?t.tweens[0].data.delay:0,this.init()}get playing(){return!1===this.timeline?.paused}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=J2(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return"Toggle"===this.data.runMode&&LW(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:n=!1}={}){try{let i=C4(this.data.tweens[0].data);n&&"number"==typeof i.loop&&i.loop--,this.timeline?.pause(),this.timeline=lK.timeline({autoplay:!1,...i,...!0===i.loop||i.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let r=this.tweens.findIndex(o=>o?.changeBegan);if(!0===t&&(this.timelineNeedsRebuild=!0),e){let o=-1===r?0:r;for(let s=o;s<this.data.tweens.length-1;s++){let c,a=this.data.tweens[s],l=this.data.tweens[s+1];s!==o||!0!==this.object.wasMovedByUser&&!0!==this.object.previousAction?.changeBegan?c=void 0===a.data.state?this.currentState:a.data.state:(c=void 0,this.object instanceof Za&&(this.object.wasMovedByUser=!1));let d=new xK(this.object,c,void 0===l.data.state?this.currentState:l.data.state,l.data,this.shared,this.data.allowSlerp??!1);-1!==r&&s===o&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[s]=d,this.timeline.add(d.params,this.timeline.duration+(s===o?i.delay:0))}this.timeline.duration+=i.endDelay}else{let o=-1===r?this.data.tweens.length-1:r+1;for(let s=o;s>0;s--){let c,a=this.data.tweens[s],l=this.data.tweens[s-1];s!==o||!0!==this.object.wasMovedByUser&&!0!==this.object.previousAction?.changeBegan?c=void 0===a.data.state?this.currentState:a.data.state:(c=void 0,this.object instanceof Za&&(this.object.wasMovedByUser=!1));let d=new xK(this.object,c,void 0===l.data.state?this.currentState:l.data.state,a.data,this.shared,this.data.allowSlerp??!1);-1!==r&&s===o&&Object.assign(d.params,{startOnceDelay:0}),this.tweens[s-1]=d,this.timeline.add(d.params,this.timeline.duration+(s===o?i.endDelay:0))}this.timeline.duration+=i.delay}}catch(i){i instanceof Error&&console.error(i.message)}!0===this.object.previousAction?.playing&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(!1===Mo(this.shared,this.condition)||LW(this.eventType)&&"Once"===this.data.runMode&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=C4(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){this.timeline?.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=void 0===this.data.tweens[0].data.state?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,this.object instanceof da?{shared:this.shared}:{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){if(!1===Mo(this.shared,this.condition))return!1;void 0===this.timeline&&this.buildTimeline(),this.timeline?.seek(e*this.timeline.duration,!0)}toggle(e){if(!1===Mo(this.shared,this.condition))return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function J2(e,t){let n,i;if("string"==typeof t?(n=t,i=e.states?.[n]):null===t&&(n=null,i=e.data),void 0!==n&&void 0!==i)return{id:n,data:i}}var Nze={type:"beginState"},wK={type:"completeState",isfromEntity:!1},MK={type:"requestRender"},PK=class extends Ca{constructor(e,t,n,i){super(),this.data=e,this.page=t,this.shared=n,this.condition=i,this.toggleIsForward=!1,this.posStart=new te,this.posEnd=new te,this.qStart=new _i,this.qEnd=new _i,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let n={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=lK({targets:n,t:1,..._K(this.data),update:()=>{0===n.t&&("Toggle"!==this.data.runMode||this.toggleIsForward?(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)):this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)),this.page.activeCamera.dispatchEvent(Nze));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,n.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,n.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*n.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(MK),1===n.t&&i.dispatchEvent(wK)}})}switchCamera(e){let t=this.page.activeCamera,n=this.page.scene.find(e);if(!n||!n.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(n),t.dispatchEvent({type:"cameraChange",camera:n})}play(){if(!1===Mo(this.shared,this.condition))return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{delete this.timeoutId,this.data.animate?(this.buildAnimation(),this.animation?.play()):this.switchCamera(this.data.targetCamera)},1e3*this.data.delay)}catch{}}pause(){this.animation?.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){if(!1===Mo(this.shared,this.condition))return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?(this.animation?.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),this.animation?.play()):this.timeoutId=window.setTimeout(()=>{this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?(this.animation?.pause(),this.buildAnimation(),this.animation?.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(wK),this.page.activeCamera.dispatchEvent(MK))},1e3*this.data.delay)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function SK(e){let t=e?.tracks.filter(n=>"vector"===n.ValueTypeName||"quaternion"===n.ValueTypeName).map(n=>n.times.length);if(t?.length){let n=uTe(t);return n&&n>2?n:2}return 2}var OK=class extends Ca{constructor(e,t,n,i,r){super(),this.data=e,this.page=t,this.animationControls=n,this.shared=i,this.condition=r,this.startOnceDelay=0,this.toggleIsForward=!1;let o=e.object,s=t.scene.find(e.object);s&&Array.isArray(s.identity)&&(o=s.identity[0]),this.data={...e,object:o};let a=this.animationControls.clipIdToAction[e.clipId+"/"+o];if(this.duration=a?.getClip()?.duration??1,this.data.crop2){let l=SK(a?.getClip());this.leftFrameTime=this.data.crop2[0]/(l-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(l-1)*this.duration}else{let l=a?.getClip()?.tracks[0]?.times.length;l&&l>1?(this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){return this.threeAnimAction?.isRunning()??!1}play(e=!1){if(!1===Mo(this.shared,this.condition))return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([n,i])=>{let r=n.split("/")[1];this.threeAnimAction!==i&&r===t&&i.isRunning()&&(e?i.fadeOut(.2):i.stop())}),e&&this.threeAnimAction?.fadeIn(.2)},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){this.threeAnimAction?.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=En.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(!1===Mo(this.shared,this.condition))return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let n=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([i,r])=>{let o=i.split("/")[1];this.threeAnimAction!==r&&o===n&&r.isRunning()&&(t?r.fadeOut(.2):r.stop())}),t&&this.threeAnimAction?.fadeIn(.2)}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){let e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object]?.getClip();e&&(e.duration=this.duration),this.pause()}},EK=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.eventManager=n,this.shared=i,this.condition=r,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(!1===Mo(this.shared,this.condition))return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},1e3*this.data.delay))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;"fade"===this.data.transition&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,1e3*this.data.duration),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{"ParticleSystem"===t.type&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),x4(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},DK=class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Mo(this.shared,this.condition)}dispatch(){if(!1===this.evaluatedCondition)return!1;let e=this.shared.getVariable(this.data.variableId),t=FY(this.data.expression,this.shared,Oa.typeOfVariable(e));void 0!==t&&this.shared.updateVariable(this.data.variableId,"string"==typeof t?{textValue:t}:t)}dispose(){}},AK=class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i,this.timeoutId=null}dispatchInner(){if(!1===Mo(this.shared,this.condition))return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if("PlayPause"===this.data.mode)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"===e?"Paused":"Playing");else if("Play"===this.data.mode&&"Playing"!==e)void 0===this.shared.getDynamicVariableToggleIsForward(this.data.variableId)&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if("Stop"===this.data.mode&&"Stopped"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if("Pause"===this.data.mode&&"Paused"!==e)this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if("Restart"===this.data.mode)this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if("Toggle"===this.data.mode){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);"Playing"===e?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,void 0!==t&&!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);"PlayPause"===this.data.mode&&"Playing"===t&&(e=this.data.pauseDelay),0!==e?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Mo(e,t){if(void 0===t)return!0;if(0===t.expression.length)return!1;let n=FY(t.expression,e,"boolean");return t.negate?!n:!!n}function Es(e,t,n,i,r,o){let s={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},a=l=>({id:c,data:d})=>{try{"Audio"===d.type?$a[e.type].includes("Audio")&&s.Audio.push(new FQ(c,d,o,i,l)):"Video"!==d.type||o instanceof da?"Particles"===d.type?$a[e.type].includes("Particles")&&s.Particles.push(new LQ(d,n,i,l)):"Link"===d.type?$a[e.type].includes("Link")&&s.Link.push(new class{constructor({url:e,context:t},n,i,r){if(this.controlsManager=n,this.shared=i,this.condition=r,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:function C6e(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!n)throw new Error(`Invalid URL: ${e}`);let{type:i,data:r,hash:o}=n.groups,s=i.split(";");o=t?"":o;let a=!1;"base64"===s[s.length-1]&&(s.pop(),a=!0);let l=(s.shift()||"").toLowerCase(),c=[...s.map(d=>{let[h,p=""]=d.split("=").map(g=>g.trim());return"charset"===h&&(p=p.toLowerCase(),"us-ascii"===p)?"":`${h}${p?`=${p}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&"text/plain"!==l)&&c.unshift(l),`data:${c.join(";")},${a?r.trim():r}${o?`#${o}`:""}`})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===i.protocol&&(i.protocol="http:"),t.forceHttps&&"http:"===i.protocol&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,a="";for(;;){let c=o.exec(i.pathname);if(!c)break;let d=c[0],h=c.index;a+=i.pathname.slice(s,h).replace(/\/{2,}/g,"/"),a+=d,s=h+d.length}a+=i.pathname.slice(s,i.pathname.length).replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let o=i.pathname.split("/");BQ(o[o.length-1],t.removeDirectoryIndex)&&(o=o.slice(0,-1),i.pathname=o.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...i.searchParams.keys()])BQ(o,t.removeQueryParameters)&&i.searchParams.delete(o);if(!0===t.removeQueryParameters&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let r=e;return e=i.toString(),!t.removeSingleSlash&&"/"===i.pathname&&!r.endsWith("/")&&""===i.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===i.pathname)&&""===i.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){if(!1===Mo(this.shared,this.condition))return!1;s_?window.location.assign(this.url):("tab"===this.context||YG&&"none"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),this.controlsManager.orbitControls?.onPointerUp(ci[0]),function VTe(){ci.splice(0,ci.length)}())}}(d,r.controlsManager,i,l)):"Create"===d.type?$a[e.type].includes("Create")&&s.Create.push(new FK(d,n,r.controlsManager,i,l)):"Destroy"===d.type?$a[e.type].includes("Destroy")&&s.Destroy.push(new zQ(d,n,r.controlsManager,i,l)):"Reset"===d.type?$a[e.type].includes("Reset")&&s.Reset.push(new UQ(d,n,i,r,l)):"Transition"===d.type?$a[e.type].includes("Transition")&&s.Transition.push(new CK(e.type,d,n,i,l)):"SwitchCamera"===d.type?$a[e.type].includes("SwitchCamera")&&s.SwitchCamera.push(new PK(d,n,i,l)):"SceneTransition"===d.type?$a[e.type].includes("SceneTransition")&&s.SceneTransition.push(new EK(d,n,r,i,l)):"Animation"===d.type?$a[e.type].includes("Animation")&&s.Animation.push(new OK(d,n,r.animationControls,i,l)):"SetVariable"===d.type?$a[e.type].includes("SetVariable")&&s.SetVariable.push(new DK(d,n,i,l)):"DynamicVariablePlay"===d.type?$a[e.type].includes("DynamicVariablePlay")&&s.DynamicVariablePlay.push(new AK(d,n,i,l)):"Conditional"===d.type?$a[e.type].includes("Conditional")&&(d.ifActions.forEach(a({expression:d.condition,negate:!1})),d.elseActions.forEach(a({expression:d.condition,negate:!0}))):"ClearLocalStorage"===d.type?$a[e.type].includes("ClearLocalStorage")&&s.ClearLocalStorage.push(new class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i}dispatch(){if(!1===Mo(this.shared,this.condition))return!1;("single"===this.data.target?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{this.shared.getVariable(e);let t=this.shared.data.variables.data(e)?.value;void 0!==t&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(tR(e))})}dispose(){}}(d,n,i,l)):"UserAPI"===d.type&&$a[e.type].includes("UserAPI")&&s.UserAPI.push(new class{constructor(e,t,n,i){this.data=e,this.page=t,this.shared=n,this.condition=i}dispatch(){if(!1===Mo(this.shared,this.condition))return!1;this.data.userAPIId&&this.shared.getUserAPI(this.data.userAPIId)?.callUserAPI(this.shared)}dispose(){}}(d,n,i,l)):$a[e.type].includes("Video")&&s.Video.push(new IK(c,d,o,i,l))}catch{}};return t.forEach(a()),s}function fa(e){Object.values(e).forEach(t=>{t.forEach(n=>{(n instanceof FQ||n instanceof IK||n instanceof LQ||n instanceof OK||n instanceof CK||n instanceof FK||n instanceof zQ||n instanceof PK||n instanceof EK||n instanceof UQ||n instanceof DK||n instanceof AK)&&n.dispose()})})}var TK=new Map,tx=new Map,O1=class{constructor(e,t,n){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:r,volume:o,delay:s}=t;if(this.object=n,void 0===i)throw new Error("Missing property");let a=function Bze(e,t){let n;if("material"in e&&(n=Array.isArray(e.material)?e.material[0].layers.find(r=>r.uuid===t):e.material.layers.find(r=>r.uuid===t)),n)return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}(n,i);a&&(this.videoElement=a,this.videoElement.loop=r===1/0,s_&&(this.videoElement.autoplay=!0),void 0!==o&&(this.videoElement.volume=o)),void 0!==s&&(this.delay=s),tx.has(n.uuid)?tx.get(n.uuid).push(this):tx.set(n.uuid,[this]),TK.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let n=this.videoElement.play();void 0!==n&&n.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){"stop"===this.data.toggle?"playing"===this.status?this.stop():(this.stop(),this.play()):"pause"===this.data.toggle?"playing"===this.status?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},w4=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=TK.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=tx.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let e=[...tx.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},IK=class{constructor(e,t,n,i,r){if(this.data=t,this.shared=i,this.condition=r,"play"===t.interaction)this.interaction=new O1(e,t,n);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new w4(t)}}dispatchBasic(){if(!1===Mo(this.shared,this.condition))return!1;this.interaction instanceof O1?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(!1===Mo(this.shared,this.condition))return!1;this.interaction instanceof O1?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},kK=(()=>{let e,t,n,i;function r(a){!e&&!RK()&&t?.sharedGameControlGlobals.createdObjects.length>0&&(e=requestAnimationFrame(o)),a&&(t=a,i=a.requestRender)}function o(a){let l=n?a-n:0,c=t.sharedGameControlGlobals.createdObjects,d=t.sharedGameControlGlobals.nCreatedPerAction,h=c.length,p=0;for(;p<h;){let g=c[p];void 0===g.userData.createdTime&&(g.userData.createdTime=a),void 0===g.userData.lifetime&&void 0===g.userData.quantity||g.userData.lifetime&&a-g.userData.createdTime<g.userData.lifetime||g.userData.quantity&&d[g.userData.actionId]<=g.userData.quantity?(g.userData.velocity&&(g.position.addScaledVector(g.userData.velocity,l/1e3),g.updateMatrix(),i()),p++):(d[g.userData.actionId]>g.userData.quantity&&d[g.userData.actionId]--,c.splice(p,1),g.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&g.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(g.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(g.rigidBody)):(g.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(v=>void 0!==v.bvhGeometry)),h--,i())}e=p>0?requestAnimationFrame(o):void 0,n=p>0?a:void 0}return typeof document<"u"&&document.addEventListener("visibilitychange",function s(){RK()?e&&(cancelAnimationFrame(e),e=void 0,n=void 0):r()}),r})();function RK(){return!!document&&document.hidden}var NK=new _i,zze=new te,Uze=new te,FK=class{constructor(e,t,n,i,r){this.data=e,this.page=t,this.controlsManager=n,this.shared=i,this.condition=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=En.generateUUID(),this.dispatch=()=>{if(!1===Mo(this.shared,this.condition))return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay)):this.dispatchInner()},this.dispatchFromStart=()=>{if(!1===Mo(this.shared,this.condition))return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,1e3*this.data.delay))},this.dispatchThrottled=function DTe(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return kd(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),o_(e,t,{leading:i,maxWait:t,trailing:r})}(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{null===this.intervalId&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let s=new Qa(this.object);if(s.playModeVisible=!0,s.expand(),"world"!==this.data.coordinateSystem){let c=this.page.scene.find(this.data.coordinateSystem);c&&(c.updateMatrixWorldSVD(),s.hiddenMatrix.copy(c.matrixWorldRigid))}s.scale.copy(this.object.scale),s.position.fromArray(this.data.position),s.rotation.fromArray(this.data.rotation),s.updateMatrix(),this.page.add(s);let a=this.controlsManager.sharedGameControlGlobals;a.createdObjects.push(s),void 0===a.nCreatedPerAction[this.uniqueId]?a.nCreatedPerAction[this.uniqueId]=1:a.nCreatedPerAction[this.uniqueId]++,s.updateWorldMatrix(!0,!0),s.traverseObject(this.traverseObjectCB),kK(),this.controlsManager.requestRender()},this.traverseObjectCB=s=>{let a;if(s.hasNonUniformScale&&s.updateMatrixWorldSVD(),this.controlsManager.sharedGameControlGlobals.rapierWorld){if(s instanceof Ld){if(!s.objectForSample)return!0===s.object.dataPatched.physics.fusedBody&&"dynamic"===s.object.dataPatched.physics.rigidBody||void 0;if(s.objectForSample.dataPatched.physics.fusedBody)return;a=s.object}else if(s instanceof Qa)a=s.object;else if(a=s,a.dataPatched.cloner?.hideBase)return!0}else{if(s instanceof Ld)return;a=s instanceof Qa?s.object:s}"Time"===this.data.destroy?s.userData.lifetime=1e3*this.data.lifetime:"Quantity"===this.data.destroy&&(s.userData.quantity=this.data.destroyAfterQuantity,s.userData.actionId=this.uniqueId);let l=(new te).fromArray(this.data.velocity),c=a.dataPatched;if(!("visibility"===c.physics.enabled?!c.visible:!c.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(s,a,{fromCreate:!0,dynamic:this.data.dynamic}),"Collision"===this.data.destroy&&(s.rigidBody?.collider(0).setActiveEvents(1),s.userData.hasCollisionDestroy=!0),s.matrixWorld.decompose(zze,NK,Uze),l.applyQuaternion(NK),this.data.velocity.some(d=>0!==d)&&this.data.dynamic&&s.rigidBody?.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0)):("geometry"in s.object&&this.controlsManager.addBoundsTree(s),this.data.velocity.some(d=>0!==d)&&this.data.dynamic&&(s.userData.velocity=l)),!0===a.dataPatched.physics?.fusedBody))return!0};let o=this.page.scene.find(this.data.object);if(!o)throw new Error("Missing Property");if(this.object=o,"world"!==this.data.coordinateSystem&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");kK(n)}dispose(){null!==this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},BK=(new te,new te),zK=new te,Vze=new te,Ml=new te,Wl=new te,Ff=new te,S4=new qt,UK=new qt,Hze=new qt,Hd=(new qt,new _i),ap=new _i,qh=new js(0,0,0,"YXZ"),Gze=new te(1,0,0),Gd=new te(0,1,0),Wze=new te(0,0,1),jK=new te(1,1,1),ma=(new Fl,new jc),Jc=new ls,Qze={type:"requestRender"},Kze={type:"updateMatrix"},HK=Math.PI/6,O4=class extends Ca{constructor(e,t,n,i,r,o,s,a,l){super(),this.object=e,this.domElement=t,this.data=n,this.gloabalPhysics=i,this.controlsManager=r,this.cameraFollow=o,this.camera=s,this.page=a,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new qt,this.target0=new te,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=200,this.euler0=new js(0,0,0,"YXZ"),this.position0Cam=new te,this.quat0Cam=new _i,this.scale0Cam=new te,this.hiddenMatrix0Cam=new qt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new jc(new te(0,-40,0),new te(0,40,0)),matrix:new qt,position:new te,rotation:new _i},this.euler=new js(0,0,0,"YXZ"),this.eulerDelta=new te,this.lastPosition=new te,this.lastCameraQuaternion=new _i,this.lastCameraPosition=new te,this.PI_2=Math.PI/2,this.prevMouse=new Ue,this.velocityTarget=new te,this.velocity=new te,this.directionXZ=new te,this.rotVelocityStick=new te,this.rotVelocityTarget=new te,this.rotVelocity=new te,this.rotDirection=new te,this.nonColliderRotOffset=new qt,this.nonColliderPosOffset=new qt,this.firstPointerId=-1,this.rot=new te,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new qt,this.objectToTarget=new te,this.objectToTarget0=new te,this.objectToCamXZ=new te,this.objectToCamXZ0=new te,this.targetToCamera=new te,this.targetToCamera0=new te,this.cameraPolarAxis0=new te,this.targetPos=new te,this.targetQuat=new _i,this.lerpFactorPos=(new te).setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new _i,this.objXZQuatInv=new _i,this.objXZRotMat=new qt,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new te,this.pushedVelocity=new te,this.groundYRotation=0,this.objectRealQuat=new _i,this.colliderWorldQuat=new _i,this.groundNormal=new te,this.groundTilt=new _i,this.groundTiltInv=new _i,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new te,this.quaternion=new _i,this.scale=new te,this.initialAction=!0,this.onPointerDown=v=>{!(v.target===this.domElement||v.target instanceof HTMLElement&&"SPLINE-VIEWER"===v.target.tagName&&v.target.shadowRoot?.contains(this.domElement))||-1!==this.firstPointerId||(this.firstPointerId=v.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),"keys"!==this.rotBy&&!fc&&!XG&&this.domElement.requestPointerLock(),this.prevMouse.set(v.clientX,v.clientY))},this.onPointerUp=v=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),"mouse"===v.pointerType&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=v=>{if(v.pointerId!==this.firstPointerId)return;let y=v.clientX-this.prevMouse.x,b=v.clientY-this.prevMouse.y;this.prevMouse.set(v.clientX,v.clientY),"mouse"===v.pointerType&&"keys"!==this.rotBy&&(XG&&UTe<15.5&&!fc?(this.eulerDelta.y=-y*this.mouseOrbitSensitivity,this.eulerDelta.x=-b*this.mouseOrbitSensitivity):(this.eulerDelta.y=-v.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-v.movementY*this.mouseOrbitSensitivity)),"mouse"!==v.pointerType&&"drag"===this.rotByTouch&&(this.eulerDelta.y=-y*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-b*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=v=>{O4.isLocked=this.domElement.ownerDocument.pointerLockElement===this.domElement},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document?.hidden)for(let v in this.movementState)this.movementState[v]=0},this.onKeyDown=v=>{!(v.target instanceof HTMLInputElement)&&("ArrowLeft"===v.code||"ArrowUp"===v.code||"ArrowRight"===v.code||"ArrowDown"===v.code||"Space"===v.code)&&v.preventDefault();for(let y of this.keyAssignments)if(v.key.toUpperCase()===y[1]||v.key===y[1]){this.movementState[y[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=v=>{for(let y of this.keyAssignments)if(v.key.toUpperCase()===y[1]||v.key===y[1]||v.code.slice(3,v.code.length).toUpperCase()===y[1]){this.movementState[y[0]]=0;break}},this.copyVRGamePadValues=(v,y)=>{for(let b=2;b<4;b++){let P=v.axes[b];0===y?2===b?this.movementState.movePosX=P:this.movementState.movePosZ=P:(this.movementState.jump=v.buttons[3].pressed?1:0,2===b?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(P)>=.3&&(this.vrEulerYOffset+=P<0?1:-1),this.movementState.rotPosY=P):"fly"===this.moveMode&&(this.movementState.moveNegY=P))}},this.sharedGameControlGlobals=r.sharedGameControlGlobals,e===s&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),d=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,d,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||!0===this.cameraFollow)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),!0===this.cameraFollow){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy(this.camera?.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let b,P,v=new te(0,0,-1).applyQuaternion(this.camera.quaternion),y=(new te).subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(y),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ),Math.abs(v.y)<1e-6?(y.y=0,v.y=0,P=y.projectOnVector(v)):P=v.multiplyScalar(y.y/v.y>0?y.y/v.y:y.length()),this.targetToCamera0.copy(P).negate(),b=this.camera.position.clone().add(P),this.objectToTarget0.subVectors(b,this.position);let S=(new js).setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-S.x,S.x=0,S.z=0,S.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(S)}if(this.object instanceof Za&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=1*(n.speedTranslate??250),this.speedOrbit=.025*(n.speedRotate??100),this.mouseOrbitSensitivity=16e-6*(n.speedRotate??100),this.keyAssignments=n.keyAssignments.map(v=>{let y=[v[0],v[1]];return"\u25b2"===y[1]?y[1]="ArrowUp":"\u25c0"===y[1]?y[1]="ArrowLeft":"\u25bc"===y[1]?y[1]="ArrowDown":"\u25b6"===y[1]?y[1]="ArrowRight":"\u21e7"===y[1]?y[1]="Shift":"\u21b5"===y[1]?y[1]="Enter":"Space"===y[1]?y[1]=" ":"\u2318"===y[1]?y[1]="Meta":"Ctrl"===y[1]?y[1]="Control":"Esc"===y[1]&&(y[1]="Escape"),y}),"mouse"===n.rotBy){let v;v=this.keyAssignments.findIndex(y=>"rotNegX"===y[0]),-1!==v&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(y=>"rotPosX"===y[0]),-1!==v&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(y=>"rotPosY"===y[0]),-1!==v&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(y=>"rotNegY"===y[0]),-1!==v&&(this.keyAssignments[v][1]="")}this.lerpFactorPosStart=1-.02**(1/(60*(n.delayPos[0]??.3))),this.lerpFactorPosEnd=1-.02**(1/(60*(n.delayPos[1]??.3))),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(60*(n.delayRot[0]??.3))),this.lerpFactorRotEnd=1-.02**(1/(60*(n.delayRot[1]??.3))),this.lerpFactorPosCamera=1-.02**(1/(60*(n.delayPosCamera??.3))),this.lerpFactorRotCamera=1-.02**(1/(60*(n.delayRotCamera??.3))),this.gravity=12*(this.gloabalPhysics.gravity??jv.defaultData.gravity),this.usePhysics=this.gloabalPhysics.usePhysics??jv.defaultData.usePhysics,this.jumpPower=20*n.jumpPower,this.resetYPosition=this.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??IP.defaultDataThirdPerson.orientWith,this.slopeThresh=65*Math.PI/180,"capsule"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=.02*n.collider.height/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height):"sphere"===n.collider.type?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*.02/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*.3/this.pixelsPerMeter,this.colliderHeight=2*n.collider.radius):(this.offset=.02*n.collider.height/this.pixelsPerMeter,this.stepThresh=.3*n.collider.height/this.pixelsPerMeter,this.colliderHeight=n.collider.height),this.collider.type=n.collider.type;let h=(new te).fromArray(n.collider.position),p=(new _i).setFromEuler((new js).fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(p),this.collider.matrix.compose(h,p,jK),void 0!==n.cameraXAxis&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),this.forwardDir=n.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=n.runMultiplier??2;let g=2*n.navmesh.destinationHelperRadius;if(g>0){let v=new Gn;v.push({fi:0,data:{...la.defaultData("light","phong"),alpha:0},id:"layer1"}),v.push({fi:0,data:{...la.defaultData("color"),color:n.navmesh.destinationHelperColor,alpha:n.navmesh.destinationHelperColor.a},id:"layer2"});let y=new $k({layers:v},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Vo(tY.create({parameters:{width:g,height:g/10,hollow:.7}}),y),this.navMeshPathDest.material.userData.opacity0=n.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=(new js).setFromQuaternion(this.quaternion,"YXZ"),n=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,n,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof Za?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){this.deactivate(),this.navMeshPathDest?.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;void 0!==e.gameActions&&(this.actions={},TP.list.forEach(n=>{this.actions[n]=Es({...e,disabled:!1,type:"GameControl"},e.gameActions[n],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),fa(this.actions.idle),fa(this.actions.move),fa(this.actions.run),fa(this.actions.jump)}dispatchStartEvent(e){void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(!1===this.initialAction)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),null!==t.object.currentState&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Ml.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,n){if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let r=60*i,o=!1;if(this.usePhysics&&this.collisionEnabled){let a=Wl.set(0,(0===this.velocity.y?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/120,1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,a,this.object.rigidBody?.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(l){this.onObject=!0,this.groundNormal.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(o=!0),0===l.collider.parent()?.bodyType()&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let c=l.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let d of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(d.rigidBody===c&&d.userData.isFollowingObj!==this.object.uuid){(d.hasNonUniformScale?d.matrixWorldRigid:d.matrixWorld).decompose(Ml,ap,Wl),this.groundVelocity.subVectors(Ml,d.prevT),this.object.getWorldPosition(Wl).add(this.collider.position).sub(Ml),this.groundYRotation=qh.setFromQuaternion(ap).y-d.prevR.y,Ff.copy(Wl).applyAxisAngle(Gd,this.groundYRotation),this.groundVelocity.add(Ff.sub(Wl)).divideScalar(i);break}}else this.onObject=!1}if("walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*r),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,"+z"===this.forwardDir&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let a=this.navMeshPathDest.material;if("walk"===this.moveMode&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let l=Ml.subVectors(this.path[1],this.position),c=Wl.subVectors(this.path[1],this.path[0]);l.dot(c)<0?this.path.shift():(this.directionXZ.x=c.x,this.directionXZ.z=c.z),a.opacity=a.userData.opacity0}else a.opacity-=.05*a.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.moveForce=this.movementState.run?this.runMultiplier:1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),!1===this.didHit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r)):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let s=Vze.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){let a=Wl.copy(s);a.y=0,s.set(0,s.y,a.length()*("+z"===this.forwardDir?1:-1))}if(this.directionXZ.manhattanLength()>0&&"none"!==this.orientMode&&!1===this.isFirstPerson)if("camera"===this.orientWith&&this.path.length<=1){let a=Ml;this.camera.getWorldDirection(a);let l=Ff.copy(Gd).multiplyScalar(a.dot(Gd));a.sub(l);let c=Wl.copy(this.directionXZ);c.x*=-1,this.rot.y=a.angleTo(c)*(a.cross(c).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*("+z"===this.forwardDir?1:-1);if(qh.setFromVector3(this.rot),"walk"===this.moveMode&&(qh.x=0),s.applyEuler(qh),o&&(ap.setFromUnitVectors(Gd,this.groundNormal),s.applyQuaternion(ap)),n){let a=qh.set(0,this.vrEulerYOffset*HK,0);n.applyEuler(a),s.x+=n.x,s.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*i}if(!0===this.usePhysics){let a=Wl;this.pushedVelocity.set(0,0,0);for(let l of this.sharedGameControlGlobals.entitiesWithTransformAnim){let c=Ff.setFromMatrixPosition(l.matrixWorld).sub(l.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),d=l.rigidBody.collider(0).castCollider(c,this.object.rigidBody.collider(0),Ml.copy(s).divideScalar(this.pixelsPerMeter),i,!1);c.multiplyScalar(this.pixelsPerMeter);let h=dr.is(l)?l:l.object;if(null!==d&&this.lastHitObj!==h){let p;l instanceof Qa&&(p=l);let g=this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid];if(g)for(let v of g)"character"===v.data.target&&(v.dispatch(p),h.dispatchEvent(V4));this.lastHitObj=h}if(null!==d){this.pushedVelocity.copy(c),a.copy(d.normal1).applyQuaternion(l.quaternion);break}}if(0!==this.pushedVelocity.manhattanLength()){let l=a.dot(s);l<0&&s.addScaledVector(a,-l),s.add(this.pushedVelocity)}else s.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotVelocityStick.x="normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?-this.rotDirection.x*this.speedOrbit*this.rotForce:0,this.rotVelocityStick.y="normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?-this.rotDirection.y*this.speedOrbit*this.rotForce:0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){if("radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Gd,this.euler.y-this.euler0.y);let a=Wl.copy(this.objectToCamXZ).normalize(),l=Ff.copy(s).multiplyScalar(i);l.y=0;let c=l.sub(Ml.copy(a).multiplyScalar(l.dot(a))).cross(a).y;this.euler.y-=Math.atan2(c,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.rot.y);if(!0===this.cameraFollow&&("walk"===this.moveMode?this.euler.x="Limit"===this.cameraXAxis?En.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):En.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):"Limit"===this.cameraXAxis&&(this.euler.x=En.clamp(this.euler.x,-this.PI_2,this.PI_2))),"fly"===this.moveMode?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(qh.copy(t),qh.y=0):(qh.copy(this.euler),qh.y=0),this.nonColliderRotOffset.makeRotationFromEuler(qh)),t&&("walk"===this.moveMode?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*HK),Hd.setFromAxisAngle(Gze,this.rot.x),ap.setFromAxisAngle(Gd,this.rot.y),ap.multiply(Hd),Hd.setFromAxisAngle(Wze,this.rot.z),ap.multiply(Hd),this.quaternion.copy(ap),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let a=Wl.copy(s).multiplyScalar(i/this.pixelsPerMeter),l=null;this.didHit=!1;let c=new te;for(let d=0;d<5;d++){let h=a.length(),p=Ff.copy(a).normalize();if(l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(c),this.colliderWorldQuat,p,this.object.rigidBody?.collider(0).shape,h,!1,24,void 0,void 0,this.object.rigidBody),null===l){0===d&&0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),c.add(a);break}{this.didHit=!0;let g=this.sharedGameControlGlobals.colliderToEntity.get(l.collider.handle);if(g!==this.lastHitObj&&0===d){this.lastHitObj=g;let P=this.sharedGameControlGlobals.entityToCollisionEvents[g?.uuid];if(P)for(let S of P)if("character"===S.data.target){let A,O=this.sharedGameControlGlobals.rapierWorld?.getCollider(l.collider.handle)._parent;if(g.cloner)for(let H of g.cloner.children)if(H.rigidBody===O){A=H;break}S.dispatch(A),g.dispatchEvent(V4)}}let v=BK.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat),y=zK.copy(p).multiplyScalar(l.toi).dot(v),b=l.toi;if(0===b&&(this.position.y+=this.offset*this.pixelsPerMeter),y>this.offset&&(b=l.toi*(y-this.offset)/y,c.addScaledVector(p,b)),a.copy(p).multiplyScalar(h-b),Math.acos(-v.y)>this.slopeThresh){let P=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(c),S=Ff.copy(l.witness2).applyQuaternion(this.colliderWorldQuat);S.y=0;let O=P.add(S);O.y+=this.stepThresh;let A=this.sharedGameControlGlobals.rapierWorld.castShape(O,this.colliderWorldQuat,a,this.object.rigidBody?.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);null!==A&&0===A.toi&&(v.y=0,v.normalize())}a.addScaledVector(v,-a.dot(v))}}this.position.addScaledVector(c,this.pixelsPerMeter),this.object.rigidBody?.setTranslation(Ml.copy(this.position).divideScalar(this.pixelsPerMeter),!0),this.object.rigidBody?.setRotation(Hd.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let a=this.onObject?1:5,l=s.multiplyScalar(i/a);for(let c=0;c<a;c++)this.position.add(l),this.collisionAdjustment(i/a)}else this.position.addScaledVector(s,i);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();let a=this.objectToTarget.add(this.position),l=this.targetToCamera.add(a);S4.lookAt(l,a,Gd).setPosition(l),S4.decompose(this.targetPos,this.targetQuat,Ml),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=En.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=En.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(Kze),!(this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(void 0===this.camera||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&("fly"===this.moveMode||!0===this.onObject||!1===this.collisionEnabled)&&(null===this.navMeshPathDest||this.navMeshPathDest.material.opacity<-.04*this.navMeshPathDest?.material?.userData.opacity0)||(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(Qze),0))}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t,e=Hd.setFromAxisAngle(Gd,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?En.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(e),t="Limit"===this.cameraXAxis?En.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):En.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Ml.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&n.applyQuaternion(e);let i=ap.setFromAxisAngle(n,t);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(e),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){180*Gd.angleTo(e)/Math.PI<15||180*Gd.angleTo(e)/Math.PI>85?Hd.identity():Hd.setFromUnitVectors(Gd,e),this.groundTilt.slerp(Hd,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){let t=zK.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let n=S4.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Ml,Hd,Wl).compose(Ml,Hd,jK);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(r=>{if(r===this.object||r.isDescendantOf(this.object))return;Jc.makeEmpty(),r.updateMatrixWorldSVD();let o=r.matrixWorldRigid,s=UK.copy(o).invert(),a=Hze.copy(UK).multiply(n);ma.copy(this.collider.segment),ma.start.applyMatrix4(a),ma.end.applyMatrix4(a);let l=BK.copy(this.position).applyMatrix4(s);Jc.expandByPoint(ma.start),Jc.expandByPoint(ma.end),Jc.min.addScalar(-this.collider.radius),Jc.max.addScalar(this.collider.radius),r.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder:c=>c.distanceToPoint(ma.end),intersectsBounds:c=>c.intersectsBox(Jc),intersectsTriangle:c=>{let d=Ml,h=Wl,p=c.closestPointToSegment(ma,d,h);if(p<this.collider.radius){let g=this.collider.radius-p,v=h.sub(d).normalize(),y=Ff.copy(l);y.addScaledVector(v,g);let b=y.applyMatrix4(o).sub(this.position);t.add(b),ma.start.addScaledVector(v,g),ma.end.addScaledVector(v,g)}}})}),Jc.makeEmpty(),ma.copy(this.collider.segment),ma.start.applyMatrix4(n),ma.end.applyMatrix4(n),Jc.expandByPoint(ma.start),Jc.expandByPoint(ma.end),Jc.min.addScalar(-this.collider.radius),Jc.max.addScalar(this.collider.radius),this.sharedGameControlGlobals.staticMeshBVH?.shapecast({traverseBoundsOrder:r=>r.distanceToPoint(ma.end),intersectsBounds:r=>r.intersectsBox(Jc),intersectsTriangle:r=>{let o=Ml,s=Wl,a=r.closestPointToSegment(ma,o,s);if(a<this.collider.radius){let l=this.collider.radius-a,c=s.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(c),t.addScaledVector(c,l),ma.start.addScaledVector(c,l),ma.end.addScaledVector(c,l)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},GK=O4;GK.isLocked=!1;var Zze=Eu(ej());function lp(e,t){let n=new Xn;if(t){let o=t.elements,a=o[4]**2+o[5]**2+o[6]**2,l=o[8]**2+o[9]**2+o[10]**2,c=o[0]**2+o[4]**2+o[8]**2,d=o[1]**2+o[5]**2+o[9]**2,h=o[2]**2+o[6]**2+o[10]**2,p=1e-8;if(o[0]**2+o[1]**2+o[2]**2<p||a<p||l<p||c<p||d<p||h<p)return n.setAttribute("position",new _n([],3)),n.setIndex([]),n}if(!e.getAttribute("position"))return n.setAttribute("position",new _n([],3)),n.setIndex([]),n;let{positions:i,triIndices:r}=c2(e.getAttribute("position"),e.getIndex());return n.setAttribute("position",new _n(i,3)),n.setIndex(r),t&&n.applyMatrix4(t),n}var Jze=new qt,e8e=new qt,Yh=[[0,0,0],[0,0,0],[0,0,0]];function WK(e){let t=e.elements;Yh[0][0]=t[0],Yh[0][1]=t[4],Yh[0][2]=t[8],Yh[1][0]=t[1],Yh[1][1]=t[5],Yh[1][2]=t[9],Yh[2][0]=t[2],Yh[2][1]=t[6],Yh[2][2]=t[10];let{u:n,v:i}=(0,Zze.SVD)(Yh),r=Jze.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),o=e8e.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return r.multiply(o.transpose())}var t8e=class extends bH{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,n=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,n)}),n}createRaycastLineHelper(){let e=new rf({color:65280,linewidth:10}),t=new te(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new te(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=(new te).addVectors(t,n.multiplyScalar(i)),o=new Xn;return o.setFromPoints([t,r]),new _M(o,e)}},qK=e=>e instanceof C1||e instanceof M1;function n8e(e,t){return e.distance-t.distance}function YK(e,t,n){if(Ku(t)&&t.visible){zd(t)&&t.raycast(e,n);for(let i of t.children)YK(e,i,n)}}function eS(e,t,n,i=!1){if(!i&&!n.some(o=>void 0!==tS(e,o)))return[];let r=[];return t.children.forEach(o=>YK(e,o,r)),r.sort(n8e),r}function E4(e){let t=[];if(e.length){let n=e[0].object;Ku(n)&&t.push(n);let i=n.parent;for(;i;)qK(i)&&t.push(i),i=i.parent}return t}function cp(e,t,n,i){let r=e.frame;if(r){let o=t[0]*r.width,s=(1-t[1])*r.height;for(let a of n){let l=a===r.uuid?r:r.find(a);if(l?.intersects(o,s))return i(l),!0}}return!1}function tS(e,t){if(zd(t)){if(t.visible){let n=[];return t.raycast(e,n),n.length?n[0]:void 0}}else if(qK(t))return XK(e,t)}function XK(e,t){if(Ku(t)&&t.visible){if(zd(t)){let n=[];if(t.raycast(e,n),n.length)return n[0]}for(let n of t.children){let i=XK(e,n);if(i)return i}}}var tl=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},D4=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],$K=e=>D4.find(([t,n])=>n===e)?.[0],nx=e=>D4.find(([t])=>t===e)?.[1],s8e=(e,t)=>{let n=$K(e);if(n){let i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},a8e=class extends tl{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{if(!e.eventName||!e.target||"Scroll"===e.eventName)return;let t=this.splineEvents[$K(e.eventName)]?.[e.target.uuid];if(!t)return;"Scroll"===e.eventName&&void 0!==e.deltaY&&Object.assign(t,{deltaY:e.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{if(t.data?.events.length)for(let[n,i]of D4)if(t.data.events.some(r=>r.data.type===i&&!r.data.disabled)){this.objectsPerEvents.has(n)?this.objectsPerEvents.get(n)?.push(t):this.objectsPerEvents.set(n,[t]);let o=s8e(i,{id:t.uuid,name:t.name}),s=this.splineEvents[n];s?s[t.uuid]=o:this.splineEvents[n]={[t.uuid]:o}}}),this.objectsPerEvents.forEach(t=>{t.forEach(n=>{n.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},l8e=class{constructor(e,t,n,i,r,o){if(this.id=e,this.data=t,this.object=n,this.entered=!1,("KeyDown"===t.type||"KeyUp"===t.type||"KeyPress"===t.type)&&!t.key)throw new Error("Missing property");this.actions=Es(t,t.actions,i,r,o,n)}disconnect(){fa(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),"MousePress"===this.data.type||"KeyPress"===this.data.type?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&"Toggle"!==t.data.runMode)||this.actions.Transition.forEach(t=>{"Toggle"===t.data.runMode?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&"Toggle"!==t.data.runMode)||this.actions.SwitchCamera.forEach(t=>{"Toggle"===t.data.runMode?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{"Toggle"===t.data.runMode?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),!1===e&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},c8e=class extends tl{constructor(e,t,n){super(e),this.eventManager=t,this.useForRaycastProperty=n,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=i=>{if(!0===this.useForRaycastProperty&&null===this.sceneInterects){this.eventContext.updateRaycaster(i);let{raycaster:r,page:o}=this.eventContext,s=eS(r,o,[],!0);this.sceneInterects=s,s.length&&(this.eventContext.sharedAssets.raycastProperty={x:s[0].point.x,y:s[0].point.y,z:s[0].point.z,objX:s[0].object.matrixWorld.elements[12],objY:s[0].object.matrixWorld.elements[13],objZ:s[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=i=>{(i.target===this.eventContext.domElement||"SPLINE-VIEWER"===i.target.tagName)&&this.canvasMouseEvents.forEach(r=>{("MouseDown"===r.data.type||"MousePress"===r.data.type)&&(this.onCanvasRaycast(i),r.dispatch())})},this.onCanvasMouseUp=i=>{(i.target===this.eventContext.domElement||"SPLINE-VIEWER"===i.target.tagName)&&this.canvasMouseEvents.forEach(r=>{"MouseUp"===r.data.type?(this.onCanvasRaycast(i),r.dispatch()):"MousePress"===r.data.type&&r.dispatchRelease()})},this.onMouseDown=i=>{ci.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseDown"))},this.onMouseUp=i=>{ci.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=i=>{ci.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent())},this.onMousePressRelease=i=>{ci.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent(!0))},this.onKeyDown=i=>{this.heldKeys[i.key]||(this.handleKeyEvent(i,"KeyDown"),this.handleKeyEventHeld(i,"KeyDown",!0)),this.heldKeys[i.key]=!0},this.onKeyUp=i=>{this.handleKeyEvent(i,"KeyUp"),this.handleKeyEventHeld(i,"KeyUp",!0)},this.onKeyPressDown=i=>{this.heldKeysPress[i.key]?this.handleKeyEventHeld(i,"KeyPress"):(this.handleKeyEvent(i,"KeyPress"),this.handleKeyEventHeld(i,"KeyPress",!0)),this.heldKeysPress[i.key]=!0},this.onKeyPressUp=i=>{this.handleKeyEvent(i,"KeyPress",!0)},this.releaseHeldKey=i=>{delete this.heldKeys[i.key]},this.releaseHeldKeyPress=i=>{delete this.heldKeysPress[i.key]},this._onUserEvent=({eventName:i,target:r,reverse:o})=>{if(!i||!r)return;let s=nx(i);s&&("MouseDown"===s||"MouseUp"===s||"MousePress"===s?(r.dispatchEvent({type:"beginEvent",eventName:s}),this.eventsPerObjects[s]?.[r.uuid]?.forEach(a=>{a.dispatchUserEvent(o)})):("KeyDown"===s||"KeyUp"===s||"KeyPress"===s)&&(r.dispatchEvent({type:"beginEvent",eventName:s}),this.eventsPerObjects[s]?.[r.uuid]?.forEach(a=>{a.dispatchUserEvent()})))}}connect(){let{page:e,sharedAssets:t,domElement:n}=this.eventContext,i=(r,o)=>{if(!r.data?.events.length)return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let a of s){let l=this.eventsPerObjects[a];r.data.events.filter(({data:c})=>c.type===a&&!0!==c.disabled).forEach(({id:c,data:d})=>{try{let h=new l8e(c,d,r,e,t,this.eventManager);h.actions.Video.length&&(this.hasVideoAction=!0),"MouseDown"!==d.type&&"MouseUp"!==d.type&&"MousePress"!==d.type||"Canvas"!==d.mode&&"Window"!==d.mode?l[r.uuid]?l[r.uuid].some(p=>p.id===h.id)||l[r.uuid].push(h):l[r.uuid]=[h]:this.canvasMouseEvents.push(h)}catch{}}),l[r.uuid]?.length&&this.objectsPerTypes[a].push(r instanceof da&&("MouseDown"===a||"MouseUp"===a||"MousePress"===a)?o:r)}};e.traverseEntity(r=>{(r instanceof el||r instanceof ua)&&r.frame?.traverse(o=>{i(o,r)}),i(r)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),n.addEventListener("pointerdown",this.onCanvasMouseDown),n.addEventListener("pointerup",this.onCanvasMouseUp),(this.objectsPerTypes.MouseDown?.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),n.addEventListener("pointerdown",this.onMouseDown)),this.objectsPerTypes.MouseUp?.length&&(this.domEventsNeeded.add("pointerup"),n.addEventListener("pointerup",this.onMouseUp)),this.objectsPerTypes.MousePress?.length&&(this.domEventsNeeded.add("pointerdown"),n.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),n.addEventListener("pointerup",this.onMousePressRelease)),this.objectsPerTypes.KeyDown?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),this.objectsPerTypes.KeyUp?.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),this.objectsPerTypes.KeyPress?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([r,o])=>{o.forEach(s=>{s.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(n=>{n.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,n])=>{n.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:n,page:i,pointerScreen:r}=this.eventContext,o=this.objectsPerTypes[e],s=o.filter(a=>!(a instanceof da));if((o.length||this.useForRaycastProperty)&&(!i.uiCanvas||!cp(i,[r.x,r.y],Object.keys(this.eventsPerObjects[e]),a=>{this.handleObjectMouseEventDispatch(a,e)}))){if(t||this.useForRaycastProperty){let a;if(null===this.sceneInterects?a=eS(n,i,s,this.useForRaycastProperty):(a=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&a.length&&(this.eventContext.sharedAssets.raycastProperty={x:a[0].point.x,y:a[0].point.y,z:a[0].point.z,objX:a[0].object.matrixWorld.elements[12],objY:a[0].object.matrixWorld.elements[13],objZ:a[0].object.matrixWorld.elements[14]}),t){let l=[a[0]?.uv?.x??0,a[0]?.uv?.y??0];E4(a).forEach(c=>{c instanceof el&&cp(c,l,Object.keys(this.eventsPerObjects[e]),d=>{this.handleObjectMouseEventDispatch(d,e)}),this.eventsPerObjects[e][c.uuid]&&this.handleObjectMouseEventDispatch(c,e)})}}t||s.forEach(a=>{let l=tS(n,a);l&&(this.handleObjectMouseEventDispatch(a,e),a instanceof el&&cp(a,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects[e]),c=>{this.handleObjectMouseEventDispatch(c,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",n=this.objectsPerTypes[t],i=n.filter(o=>!(o instanceof da)),r=[];if(n.length){if(!e){let{stopRaycast:o,raycaster:s,page:a,pointerScreen:l}=this.eventContext,c=!1;if(a.uiCanvas&&(c=cp(a,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),d=>{r.push(d)})),o&&!c){let d=eS(s,a,i);r=E4(d),d.forEach(h=>{h.object instanceof el&&cp(h.object,[h?.uv?.x??0,h?.uv?.y??0],Object.keys(this.eventsPerObjects[t]),p=>{r.push(p)})})}else i.forEach(d=>{let h=tS(s,d);h&&(r.push(d),d instanceof el&&cp(d,[h?.uv?.x??0,h?.uv?.y??0],Object.keys(this.eventsPerObjects[t]),p=>{r.push(p)}))})}this._prevObjects.length&&this._prevObjects.forEach(o=>{r.includes(o)||this.handleObjectMouseEventDispatchRelease(o,t)}),r.length&&r.forEach(o=>{this.handleObjectMouseEventDispatch(o,t)}),this._prevObjects=r}}handleObjectMouseEventDispatch(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,n=!1){this.objectsPerTypes[t].forEach(i=>{let r=this.eventsPerObjects[t][i.uuid];r.some(({data:o})=>"key"in o&&o.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),r.forEach(o=>{"key"in o.data&&o.data.key===e.key&&(n?o.dispatchRelease():o.dispatch(!0))})})}handleKeyEventHeld(e,t,n=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(r=>{"key"in r.data&&r.data.key===e.key&&r.dispatchHeld(n)})})}},d8e=new te,h8e=new te,QK=class{constructor(e,t,n,i,r){this.actionsIn=Es(e,e.inActions,n,i,r,t),this.actionsOut=Es(e,e.outActions,n,i,r,t)}disconnect(){fa(this.actionsIn),fa(this.actionsOut)}},u8e=class extends QK{constructor(e,t,n,i,r,o){super(t,n,i,r,o),this.id=e,this.data=t,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let p of this.objects)if(!p.visible)return;let c=d8e.setFromMatrixPosition(this.objects[0].matrixWorld),d=h8e.setFromMatrixPosition(this.objects[1].matrixWorld),h=c.distanceTo(d)<=this.distance?"in":"out";if(this.stage!==h){this.stage=h;let p="in"===h?this.actionsIn:this.actionsOut;p.Audio.forEach(g=>g.dispatchConditional()),p.Particles.forEach(g=>g.dispatchConditional()),p.Video.forEach(g=>g.dispatchConditional()),p.Link.forEach(g=>g.dispatch()),p.Create.forEach(g=>g.dispatch()),p.Destroy.forEach(g=>g.dispatch()),p.Reset.forEach(g=>g.dispatch()),p.Transition.forEach(g=>{g.object.currentTransitionEvent!==this&&(g.object.currentTransitionEvent=this),g.init()}),p.Transition.forEach(g=>g.play()),p.Animation.forEach(g=>g.play()),p.SwitchCamera.forEach(g=>g.play()),p.SceneTransition.forEach(g=>g.dispatch()),p.SetVariable.forEach(g=>g.checkConditions()),p.SetVariable.forEach(g=>g.dispatch()),p.DynamicVariablePlay.forEach(g=>g.dispatch()),p.ClearLocalStorage.forEach(g=>g.dispatch()),p.UserAPI.forEach(g=>g.dispatch())}};let{distance:s,fromObject:a,toObject:l}=t.condition;this.distance=s;for(let c of[a,l]){if(!c)throw new Error("Missing property");let d=i.find(c);if(!d)throw new Error("Missing property");this.objects.push(d)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},p8e=class extends QK{constructor(e,t,n,i,r,o){super(t,n,i,r,o),this.id=e,this.data=t,this.object=n,this.onBegin=({state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Particles.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Link.forEach(d=>d.dispatch()),this.actionsOut.Create.forEach(d=>d.dispatch()),this.actionsOut.Destroy.forEach(d=>d.dispatch()),this.actionsOut.Reset.forEach(d=>d.dispatch()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()),this.actionsOut.Animation.forEach(d=>d.play()),this.actionsIn.SwitchCamera.forEach(d=>d.pause()),this.actionsOut.SwitchCamera.forEach(d=>d.play()),this.actionsOut.SceneTransition.forEach(d=>d.dispatch()),this.actionsOut.SetVariable.forEach(d=>d.checkConditions()),this.actionsOut.SetVariable.forEach(d=>d.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))},this.onComplete=({state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Particles.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Link.forEach(d=>d.dispatch()),this.actionsIn.Create.forEach(d=>d.dispatch()),this.actionsIn.Destroy.forEach(d=>d.dispatch()),this.actionsIn.Reset.forEach(d=>d.dispatch()),this.actionsOut.Transition.forEach(d=>d.pause()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()),this.actionsIn.Animation.forEach(d=>d.play()),this.actionsOut.SwitchCamera.forEach(d=>d.pause()),this.actionsIn.SwitchCamera.forEach(d=>d.play()),this.actionsIn.SceneTransition.forEach(d=>d.dispatch()),this.actionsIn.SetVariable.forEach(d=>d.checkConditions()),this.actionsIn.SetVariable.forEach(d=>d.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))};let{condition:s}=t;if(!s.object)throw new Error("Missing property");let a=i.find(s.object)??i.scene.find2D(s.object);if(!a)throw new Error("Missing property");if(this.toObject=a,s.state&&!this.toObject.states?.[s.state])throw new Error("Missing property");this.toState=s.state}connect(){tg(this.actionsOut).forEach(e=>{this.actionsOut[e]?.length&&this.toObject.addEventListener("beginState",this.onBegin)}),tg(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),tg(this.actionsOut).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),tg(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},f8e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(n=>{if(n.data?.events.length)for(let{id:i,data:r}of n.data.events)if(!r.disabled&&"Conditional"===r.type)try{let o;"Comparison"===r.condition.type||("Distance"===r.condition.type?o=new u8e(i,r,n,e,t,this.eventManager):"State"===r.condition.type&&(o=new p8e(i,r,n,e,t,this.eventManager))),o&&(this.eventsPerConditions[r.condition.type].push(o),(o.actionsIn.Video.length||o.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}),Object.values(this.eventsPerConditions).forEach(n=>n.forEach(i=>i.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},ix=new te,Lf=new te,Og=new te,KK=new Ll,kr=new te,Xs=new te,ZK=new te,Eg=new _i,A4=new js,g8e=new qt,T4=new Ms,E1=new te,Xh=new te;function I4(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var v8e=function(){let e=new qt;return(t,n,i)=>{let r=t.obj;e.copy(r.hiddenMatrix),null!==r.parent&&e.premultiply(r.parent.matrixWorld),e.invert(),r.position.copy(n),"global"===t.reference&&I4(r.position,t.limits),r.position.applyMatrix4(e),"parent"===t.reference?I4(r.position,t.limits):"local"===t.reference&&(Eg.copy(t.quat0).invert(),r.position.sub(t.position0),r.position.applyQuaternion(Eg),I4(r.position,t.limits),Eg.invert(),r.position.applyQuaternion(Eg),r.position.add(t.position0)),e.multiply(i??r.matrixWorld).decompose(kr,r.quaternion,Xs),r.updateMatrix(),r.hasNonUniformScale&&(r.updateMatrixWorld(),r.updateMatrixWorldSVD()),r instanceof yl&&rp(r.parent)&&r.invalidateDownstreamBooleanData(!0)}}(),b8e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=n=>{if(ci.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:r}=this.eventContext,o=r.raycastWithClones(i);if(this.lastDropDestination=null,0!==o.length){for(let s of this.events){let a=0;for(let{obj:l,pointEnd:c,pointStart:d}of s.dragItems){if(l===o[0].object||l===o[0].object.object||dr.is(l)&&l.isAncestorOf(o[0].object.uuid)){if(s.activeIdx=a,s.activeDragItem.reset=!1,s.activeDragItem.currentDampingFactor=s.data.dampingFactor,s.activeDragItem.snapped=!1,"hand"===s.data.cursor&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){s.activeDragItem.obj.rigidBody&&s.activeDragItem.obj.rigidBody.setBodyType(2,!0);let h=s.activeDragItem.obj;l.hasNonUniformScale&&l.updateMatrixWorldSVD(),(h.hasNonUniformScale?h.matrixWorldRigid:h.matrixWorld).decompose(kr,Eg,Xs),A4.setFromQuaternion(Eg),void 0===h.prevR?(h.prevR=A4.clone(),h.prevT=kr.clone()):(h.prevR.copy(A4),h.prevT.copy(kr)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(s.activeDragItem.obj)}return this.calcPlaneIntersectPos(l,d,s.data.plane,s.data.referenceFrame),c.copy(d),(this.eventManager.controlsManager.usePhysics&&"dynamic"===l.data.physics?.rigidBody||!1===s.data.drop||!1===s.data.resetOnSnapFail)&&s.activeDragItem.fromPosition.setFromMatrixPosition(s.activeDragItem.obj.matrixWorld),this.activeEvent=s,void(this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1))}a++}}this.activeEvent=null}else this.activeEvent=null},this.onPointerMove=n=>{if(ci.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,page:r}=this.eventContext,o=r.raycastWithClones(i);if(0!==ci.length){if(this.activeEvent&&this.activeEvent.activeDragItem){let a,s=this.activeEvent.activeDragItem;if(s.snapped=!1,this.activeEvent.data.drop&&(a=o.filter(l=>s.obj!==l.object&&!s.obj.isAncestorOf(l.object.uuid)&&!(l.object instanceof C1)&&("all"===this.activeEvent.data.dropOn||this.activeEvent.dropDestIds.some(c=>c===l.object.uuid||r.scene.find(c).isAncestorOf(l.object.uuid))))[0]),a){let l=ZK.copy(a.face.normal).applyMatrix3(T4.getNormalMatrix(a.object.matrixWorld));if("center"===this.activeEvent.data.snapTo)s.fromPosition.setFromMatrixPosition(a.object.matrixWorld);else if("surface"===this.activeEvent.data.snapTo){if(s.fromPosition.copy(a.point),"bbox"===this.activeEvent.data.snapSurfaceMode){kr.copy(l).applyMatrix3(T4.setFromMatrix4(s.obj.matrixWorld).transpose());let c=s.obj;kr.x>.2?Xs.x=-c.recursiveBBox.min.x:kr.x<-.2&&(Xs.x=-c.recursiveBBox.max.x),kr.y>.2?Xs.y=-c.recursiveBBox.min.y:kr.y<-.2&&(Xs.y=-c.recursiveBBox.max.y),kr.z>.2?Xs.z=-c.recursiveBBox.min.z:kr.z<-.2&&(Xs.z=-c.recursiveBBox.max.z),Xs.applyMatrix3(T4.invert())}else Xs.copy(l).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);s.fromPosition.add(Xs)}this.activeEvent.data.autoOrient&&(kr.set(0,1,0).cross(l),kr.length()<1e-4&&kr.set(-1,0,0).cross(l),Xs.crossVectors(ZK,kr),s.orientationMatrix.makeBasis(kr,Xs,l)),s.pointStart.copy(s.fromPosition),s.pointEnd.copy(s.pointStart),s.currentDampingFactor=this.activeEvent.snapDampingFactor,s.snapped=!0,this.lastDropDestination!==a.object&&(this.lastDropDestination=a.object,this.activeEvent.actionsDrop.Transition.forEach(c=>{c.play()}),this.activeEvent.actionsDrop.Animation.forEach(c=>{c.play()}),this.activeEvent.actionsDrop.Audio.forEach(c=>{c.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(c=>{c.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(c=>{c.dispatchThrottled()}))}else s.orientationMatrix.makeRotationFromQuaternion(s.quat0),this.lastDropDestination=null,s.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(s.obj,s.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(l=>{l.stop(),null!==l.object.currentState&&l.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(l=>{l.stop()}),this.activeEvent.actionsDrop.Audio.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(l=>{l.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(l=>{l.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(l=>l.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(l=>l.dispatch()),!1===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(l=>{l.play()}),this.activeEvent.actionsDrag.Animation.forEach(l=>{l.play()}),this.activeEvent.actionsDrag.Audio.forEach(l=>{l.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(l=>{l.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(l=>{l.stop(),null!==l.object.currentState&&l.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(l=>{l.stop()}))},500),this.updateDragItem(s),s.obj.dispatchEvent({type:"requestRender"})}}else{let s=!1;for(let a of this.events){for(let{obj:l}of a.dragItems)if(l===o[0]?.object||l===o[0]?.object?.object||dr.is(l)&&l.isAncestorOf(o[0]?.object.uuid)){switch(s=!0,a.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move")}break}if(s)break}s||this.setCursor("default")}},this.onPointerUp=n=>{if(this.activeEvent&&this.activeEvent.activeDragItem){"hand"===this.activeEvent.data.cursor&&this.setCursor("grab");let i="dynamic"===this.activeEvent.activeDragItem.obj.data.physics?.rigidBody;!1===this.activeEvent.activeDragItem.snapped&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(!1===this.eventManager.controlsManager.usePhysics||!i)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&i&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),!0===this.activeEvent.wasDragEventTriggered&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(r=>{r.stop(),null!==r.object.currentState&&r.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(r=>{r.stop()}),this.activeEvent.actionsDrag.Audio.forEach(r=>{r.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(r=>{r.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(r=>r.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(r=>r.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(r=>r.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(r=>r.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(r=>r.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(n=>{n.component&&(e[n.component.uuid]?e[n.component.uuid].push(n.uuid):e[n.component.uuid]=[n.uuid])}),this.eventContext.page.traverseEntity(n=>{n.data?.events.filter(i=>"DragDrop"===i.data.type&&!i.data.disabled).forEach(i=>{this.events.push(new class{constructor(e,t,n,i,r,o,s){this.object=e,this.id=t,this.data=n,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=0===this.data.resetSpeed?1:8/this.data.resetSpeed+1,this.snapDampingFactor=0===this.data.snapSpeed?1:8/this.data.snapSpeed+1,this.actionsDrag=Es(n,n.dragDropActions.drag,i,r,o,this.object),this.actionsDrop=Es(n,n.dragDropActions.drop,i,r,o,this.object);let a=[];this.data.objects.forEach(l=>{let c=i.find(l);!c||!1!==c.data.visible&&(a.push(c),s[c.uuid]&&s[c.uuid].forEach(d=>{let h=i.find(d);!h||!1!==h.data.visible&&a.push(h)}))}),this.data.dropDestinations.forEach(l=>{let c=i.find(l);!c||!1!==c.data.visible&&(this.dropDestIds.push(c.uuid),s[c.uuid]&&s[c.uuid].forEach(d=>{let h=i.find(d);!h||!1!==h.data.visible&&this.dropDestIds.push(h.uuid)}))}),this.dragItems=a.map(l=>("locked"===this.data.planeMode&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=(new te).setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:(new te).setFromMatrixPosition(l.matrixWorld),pointStart:new te,pointEnd:new te,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:(new te).copy(l.position),quat0:(new _i).copy(l.quaternion),snapped:!1,orientationMatrix:new qt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return null!==this.activeIdx?this.dragItems[this.activeIdx]:null}dispose(){fa(this.actionsDrag),fa(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}}(n,i.id,i.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,n,i){let{getCamera:r,raycaster:o}=this.eventContext;r().getWorldDirection(Lf),Lf.negate();let s=Eg.identity();switch("parent"===i?g8e.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(kr,s,Xs):"local"===i&&e.matrixWorld.decompose(kr,s,Xs),n){case"x":kr.set(1,0,0).applyQuaternion(s),E1.copy(Lf).cross(kr),Xh.copy(kr).cross(E1);break;case"y":kr.set(0,1,0).applyQuaternion(s),E1.copy(Lf).cross(kr),Xh.copy(kr).cross(E1);break;case"z":kr.set(0,0,1).applyQuaternion(s),E1.copy(Lf).cross(kr),Xh.copy(kr).cross(E1);break;case"xy":Xh.set(0,0,1).applyQuaternion(s);break;case"yz":Xh.set(1,0,0).applyQuaternion(s);break;case"xz":Xh.set(0,1,0).applyQuaternion(s);break;case"adaptive":Lf.angleTo(Xs.set(0,1,0))>Math.PI/6?(kr.crossVectors(Xs.set(0,1,0),Lf),Xh.crossVectors(kr,Xs)):Xh.set(0,1,0);break;default:Xh.copy(Lf)}Og.setFromMatrixPosition(e.matrixWorld);let a=e.userData.lockedPlane?e.userData.worldPosition0:Og;if(KK.setFromNormalAndCoplanarPoint(Xh,a),o.ray.intersectPlane(KK,t)&&("x"===n||"y"===n||"z"===n)){let l=Xs.subVectors(t,a).dot(kr);t.copy(a).addScaledVector(kr,l)}}updateDragItem(e,t=!1){Og.setFromMatrixPosition(e.obj.matrixWorld),"current"===e.reset?ix.subVectors(e.fromPosition,Og).divideScalar(e.currentDampingFactor):"original"===e.reset?(ix.subVectors(e.obj.userData.worldPosition0,Og).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):ix.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Og).divideScalar(e.currentDampingFactor),e.paused=!(e.currentDampingFactor>1)||ix.length()<.01,(this.activeEvent&&1===this.activeEvent.data.dampingFactor||t)&&v8e(e,ix.add(Og),this.activeEvent?.data.drop&&this.activeEvent?.data.autoOrient?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},A1=new te,k4=new te,dp=new te,hp=new te,JK=new Ll,x8e={type:"requestRender"},C8e=function(){let e=new te,t=new te;return(n,i,r)=>r>0?(e.subVectors(n,i),e.length()<=r?n:t.copy(i).add(e.normalize().multiplyScalar(r))):i}(),eZ=function(){let e=new qt;return(t,n)=>{t.position.copy(n),null!==t.parent&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof yl&&rp(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),M8e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=n=>{if(!(ci.length>1)){this.eventContext.updateRaycaster(n);for(let i of this.events)void 0===i.target&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)void 0===i.target&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)void 0===i.target&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{let r=i.data?.events.find(o=>"Follow"===o.data.type&&!o.data.disabled);r&&(!e.data.globalPhysics.usePhysics||"dynamic"!==i.dataPatched.physics?.rigidBody)&&this.events.push(new class{constructor(e,t,n,i,r,o){this.data=e,this.id=t,this.object=n,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new te,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...aI.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Es(e,e.actions,i,r,o,n)}}(r.data,r.id,i,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:n}=this.eventContext;this.domEventsNeeded.clear(),fc&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events)if(void 0!==i.target){let r=i.target,o=this.onTargetChange(i);this.pairOfEventListeners.push([r,o]),r.addEventListener("requestRender",o)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),fc&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let n of this.events)n.paused=!0,n.isReset=!1,fa(n.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){this.events.forEach(s=>{s.actions.Create.forEach(a=>{a.dispatchThrottled()})});let{plane:n,limitDistance:i,limitDistanceEnabled:r}=e.data;if(e.object.getWorldPosition(dp),e.isReset)hp.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(hp);else{let{getCamera:s,raycaster:a}=this.eventContext;if("custom"===n?(s().getWorldDirection(k4),k4.negate(),A1.copy(k4)):"xy"===n?A1.set(0,0,1):"xz"===n?A1.set(0,1,0):"yz"===n&&A1.set(1,0,0),JK.setFromNormalAndCoplanarPoint(A1,dp),!a.ray.intersectPlane(JK,hp))return}if(!e.isReset)if(hp.distanceTo(e.worldPosition0)>i&&r&&e.target){if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;hp.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor}else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;!1===e.data.enabledTranslation[0]&&(hp.x=dp.x),!1===e.data.enabledTranslation[1]&&(hp.y=dp.y),!1===e.data.enabledTranslation[2]&&(hp.z=dp.z);let o=C8e(dp,hp,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let s=A1.subVectors(o,dp).divideScalar(e.currentDampingFactor);dp.add(s),t&&eZ(e.object,dp),e.paused=s.length()<.01}else eZ(e.object,o),e.paused=!0;e.object?.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(x8e)}},rx=new te,nS=new te,ox=new qt,T1=new _i,Bf=new _i,sx=new te,ax=new te,Dg=new te,up=new te,R4=new Ll,S8e={type:"requestRender"},O8e={type:"changeRotation"},tZ=function(){let e=new qt;return function(t,n){null!==t.parent?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),n.premultiply(WK(e).invert()),t.rotation.setFromRotationMatrix(n),t.updateMatrix(),t instanceof yl&&rp(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),D8e=class extends tl{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(ci.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)void 0===t.target&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)void 0===t.target&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)void 0===t.target&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:n})=>{if(!t||!n)return;let i=nx(t);i&&"LookAt"===i&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{let r=i.data?.events.find(o=>"LookAt"===o.data.type&&!o.data.disabled);r&&(!e.data.globalPhysics.usePhysics||"dynamic"!==i.dataPatched.physics?.rigidBody)&&this.events.push(new class{constructor(e,t,n,i){this.id=t,this.object=n,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new _i,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...lI.defaultData,...e,...void 0===e.resetOnPointerLeave&&{resetOnPointerLeave:!1}},void 0===e.target||"cursor"===e.target||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}}(r.data,r.id,i,e))}),!this.events.length)return;let{domElement:t,eventElement:n}=this.eventContext;this.domEventsNeeded.clear(),fc&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),n.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?n.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events){if(void 0!==i.target){let s=this.onTargetChange(i),a=i.target;this.pairOfEventListeners.push([a,s]),a.addEventListener("requestRender",s)}let r=this.createUserEventListener(i),o=i.object;this.pairOfUserEventListeners.push([o,r]),o.addEventListener("userEvent",r)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),fc&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let[n,i]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){let{tilt:t,axis:n,distance:i,plane:r,limitDistance:o,enabledRotation:s,limitDistanceEnabled:a}=e.data,{getCamera:l,raycaster:c}=this.eventContext,{object:d,target:h}=e;if(d.getWorldPosition(sx),!e.isReset)if(e.target)e.target.getWorldPosition(ax);else{if("custom"===r?(l().getWorldDirection(nS),nS.negate(),R4.setFromNormalAndCoplanarPoint(nS,sx)):("xy"===r?rx.set(0,0,1):"xz"===r?rx.set(0,1,0):"yz"===r&&rx.set(1,0,0),R4.setFromNormalAndCoplanarPoint(rx,sx)),!c.ray.intersectPlane(R4,ax))return;i>0&&("custom"===r||void 0===r)&&ax.addScaledVector(nS,i)}if(e.isReset||(h?"target"===t?Dg.copy(h.up).applyMatrix4(ox.extractRotation(h.matrixWorld)).normalize():s.some(p=>!1===p)?("x"===n?(up.set(0,0,1),!1===s[2]&&up.set(0,1,0)):"y"===n?(up.set(1,0,0),!1===s[0]&&up.set(0,0,1)):(up.set(0,1,0),!1===s[1]&&up.set(1,0,0)),Dg.copy(up).applyQuaternion(e.worldQuaternion0).normalize()):Dg.set(0,1,0):"custom"===r?Dg.set(0,1,0):Dg.copy(rx)),e.isReset)Bf.copy(e.worldQuaternion0);else if(sx.distanceTo(ax)>o&&a&&h){if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&null!==e.timeoutId&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,!e.data.resetAfterDistanceLimit)return;Bf.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor}else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},1e3*e.data.snapDelay)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),!1===e.delayFinished)return;(function A8e(e,t,n,i,r,o){let s=e.elements;fs.subVectors(t,n),0===fs.lengthSq()&&(fs.z=1),fs.normalize(),$s.crossVectors(i,fs),0===$s.lengthSq()&&(1===Math.abs(i.z)?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),$s.crossVectors(i,fs)),$s.normalize(),ed.crossVectors(fs,$s),"x"===r?1===o.z?[$s,ed,fs]=[fs,$s,ed]:($s.negate(),[$s,fs]=[fs,$s]):"y"===r?1===o.x?[$s,ed,fs]=[ed,fs,$s]:($s.negate(),[ed,fs]=[fs,ed]):1===o.x&&($s.negate(),[$s,ed]=[ed,$s]),s[0]=$s.x,s[4]=ed.x,s[8]=fs.x,s[1]=$s.y,s[5]=ed.y,s[9]=fs.y,s[2]=$s.z,s[6]=ed.z,s[10]=fs.z})(ox,ax,sx,Dg,n,up),Bf.setFromRotationMatrix(ox),T1.setFromUnitVectors(up.applyQuaternion(Bf),Dg),s.some(p=>!1===p)&&"target"!==t&&Bf.premultiply(T1).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),T1.setFromRotationMatrix(WK(d.matrixWorld)),T1.slerp(Bf,1/e.currentDampingFactor),tZ(d,ox.makeRotationFromQuaternion(T1)),e.paused=8*(1-T1.dot(Bf))<1e-6):(tZ(d,ox.makeRotationFromQuaternion(Bf)),e.paused=!0),e.object?.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(S8e),d.dispatchEvent(O8e)}},ed=new te,$s=new te,fs=new te,T8e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.entered=!1,this.actions=Es(t,t.actions,i,r,o,n)}disconnect(){fa(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},I8e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=n=>{ci.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onMouseUp=n=>{ci.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=n=>{ci.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:n,target:i,reverse:r})=>{if(!n||!i)return;let o=nx(n);o&&"MouseHover"===o&&(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[i.uuid]?.forEach(s=>s.dispatchUserEvent(r)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,n=(r,o)=>{if(r.visible&&r.data?.events.length){for(let{id:s,data:a}of r.data.events)if(!a.disabled&&"MouseHover"===a.type)try{let l=new T8e(s,a,r,e,t,this.eventManager);this.eventsPerObjects[r.uuid]?this.eventsPerObjects[r.uuid].push(l):this.eventsPerObjects[r.uuid]=[l]}catch{}this.eventsPerObjects[r.uuid]?.length&&this.objects.push(r instanceof da?o:r)}};if(e.traverseEntity(r=>{(r instanceof el||r instanceof ua)&&r.frame?.traverse(o=>{n(o,r)}),n(r)}),!this.objects.length)return;let{domElement:i}=this.eventContext;this.domEventsNeeded.clear(),fc&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(r=>{r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),fc&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(n=>{n.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:n,raycaster:i,page:r,pointerScreen:o}=this.eventContext,s=!1;if(r.uiCanvas&&(s=cp(r,[o.x,o.y],Object.keys(this.eventsPerObjects),a=>{t.push(a)})),n&&!s){let a=eS(i,r,this.objects);t=E4(a),a.forEach(l=>{l.object instanceof el&&cp(l.object,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects),c=>{t.push(c)})})}else this.objects.forEach(a=>{let l=tS(i,a);l&&(t.push(a),a instanceof el&&cp(a,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects),c=>{t.push(c)}))})}this._prevObjects.length&&this._prevObjects.forEach(n=>{t.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[n.uuid]?.forEach(i=>i.dispatchLeave()))}),t.length&&t.forEach(n=>{n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[n.uuid]?.forEach(i=>i.dispatchEnter())}),this._prevObjects=t}},k8e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.scrollCounter=0,this.actions=Es(t,t.actions,i,r,o,n)}connect(){this.scrollCounter=0}disconnect(){fa(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.ClearLocalStorage.forEach(i=>i.dispatch()),this.actions.UserAPI.forEach(i=>i.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},R8e=class{constructor(e,t,n,i,r,o,s){this.id=e,this.data=t,this.object=n,this.domElement=o,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=Es(t,t.actions,i,r,s,n)}getStickyParentElement(){let e=this.domElement;for(;e;){if("sticky"===window.getComputedStyle(e).position)return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e?.parentElement,n=this.domElement.getBoundingClientRect(),i={top:n.top,bottom:n.bottom,left:n.left,right:n.right,width:n.width,height:n.height};if(t){let c=t.getBoundingClientRect(),d=window.getComputedStyle(e),h=parseFloat(d.marginTop)+parseFloat(d.marginBottom),p=parseFloat(d.top),g=parseFloat(d.bottom),v=c.height-h;if(isNaN(p)){if(!isNaN(g)){let y=document.body.clientHeight??window.innerHeight,b=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);n.bottom===y-g?(i.top+=c.top-n.height+g+b,i.bottom+=c.top-n.height+g+b):n.bottom<y-g&&(i.top-=v-n.height,i.bottom-=v-n.height)}}else n.top===p?(i.top+=c.top-p,i.bottom+=c.top-p):n.top<0&&(i.top-=v-n.height,i.bottom-=v-n.height)}let r=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||r.scrollTop,l=Math.round(i.top+s-(o.clientTop||r.clientTop||0));if("enter"===this.data.startFrom){let c=window.innerHeight,d=i.height,h=this.data.enterAnchor;this.scrollStart=l-("top"===h?c:"bottom"===h?c-d:c-.5*d)}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=i,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){fa(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return void 0===this.box||0===this.box.width&&0===this.box.height&&0===this.box.top&&0===this.box.bottom}computeScroll({y:t}){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let i=Math.min(1,Math.max(0,(t-this.scrollStart)/(this.scrollEnd-this.scrollStart)));this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(i)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch()),this.actions.ClearLocalStorage.forEach(r=>r.dispatch()),this.actions.UserAPI.forEach(r=>r.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},N8e=class extends tl{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([n,i])=>{i.forEach(r=>r.handleResize())})},this.onScroll=n=>{if(!this.isInview)return;let i={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([r,o])=>{r.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:i}),o.forEach(s=>s.dispatch(i))})},this.onWheel=n=>{!this.isInview||n.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:n.deltaY}),r.forEach(o=>o.dispatch(n.deltaY))})},this.onUserEvent=({eventName:n,target:i,reverse:r})=>{if(!n||!i)return;let o=nx(n);o&&"Scroll"===o&&(i.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),this.wheelEventsPerObject.get(i)?.forEach(s=>{s.dispatchUserEvent(r)}))}}connect(){let{page:e,sharedAssets:t,domElement:n,isExport:i}=this.eventContext,r=o=>{if(o.data?.events.length)for(let{id:s,data:a}of o.data.events)if(!a.disabled&&"Scroll"===a.type)if("load"!==a.trigger&&i){let l=new R8e(s,a,o,e,t,n,this.managers);this.scrollEventsPerObject.has(o)?this.scrollEventsPerObject.get(o)?.push(l):this.scrollEventsPerObject.set(o,[l])}else{let l=new k8e(s,a,o,e,t,this.managers);this.wheelEventsPerObject.has(o)?this.wheelEventsPerObject.get(o)?.push(l):this.wheelEventsPerObject.set(o,[l])}};e.traverseEntity(o=>{(o instanceof el||o instanceof ua)&&o.frame?.traverse(s=>{r(s)}),r(o)}),this.intersectionObserver=new IntersectionObserver(o=>{let s=o[0];s&&(this.isInview=s.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([o,s])=>{s.forEach(a=>a.connect()),o.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([o,s])=>{s.forEach(a=>a.connect()),o.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(o=>o.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(o=>o.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(n=>n.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},F8e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.actions=Es(t,t.actions,i,r,o,n)}disconnect(){fa(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof Sg?t.interaction.audioPlayer.play():t.interaction instanceof s4&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let n=t.interaction.data.triggerAfter??"autoplay";n===e&&(t.interaction instanceof O1?t.interaction.play("autoplay"===n):t.interaction instanceof w4&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof Sg?t.interaction.audioPlayer.play():t.interaction instanceof s4&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof O1?t.interaction.play():t.interaction instanceof w4&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},L8e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:n,isExport:i}=this.eventContext,r=i?document:n;r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,s])=>{o.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(a=>{a.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.actions.Audio.forEach(o=>{o.interaction instanceof Sg&&o.interaction.audioPlayer.play()}),r.actions.Video.forEach(o=>{o.interaction instanceof O1&&o.interaction.play("autoplay"===(o.interaction.data.triggerAfter??"autoplay"))}),r.actions.Particles.forEach(o=>{o.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([n,i])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(r=>{r.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:n,target:i,reverse:r})=>{if(!n||!i)return;let o=nx(n);o&&"Start"===o&&(i instanceof da||i.dispatchEvent({type:"beginEvent",eventName:"Start"}),this.eventsPerObject.get(i)?.forEach(s=>{s.dispatchUserEvent(r)}),this.eventsAfterPerObject.get(i)?.forEach(s=>{s.dispatchUserEvent(r)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,n=i=>{if(i.data?.events.length)for(let{id:r,data:o}of i.data.events){if(o.disabled||"Start"!==o.type)continue;let s=new F8e(r,o,i,t,e,this.eventManager);(s.actions.Transition.length||s.actions.Animation.length||s.actions.SwitchCamera.length||s.actions.Create.length||s.actions.Destroy.length||s.actions.SceneTransition.length||s.actions.Reset.length||s.actions.SetVariable.length||s.actions.DynamicVariablePlay.length||s.actions.ClearLocalStorage.length||s.actions.UserAPI.length)&&(this.eventsPerObject.has(i)?this.eventsPerObject.get(i)?.push(s):this.eventsPerObject.set(i,[s])),s.actions.Audio.length&&(this.eventsAfterPerObject.has(i)?this.eventsAfterPerObject.get(i)?.push(s):this.eventsAfterPerObject.set(i,[s])),s.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(i)?this.eventsAfterPerObject.get(i)?.push(s):this.eventsAfterPerObject.set(i,[s])),s.actions.Particles.length&&(this.eventsAfterPerObject.has(i)?this.eventsAfterPerObject.get(i)?.push(s):this.eventsAfterPerObject.set(i,[s]))}};if(t.traverseEntity(i=>{(i instanceof el||i instanceof ua)&&i.frame?.traverse(r=>{n(r)}),n(i)}),[...this.eventsAfterPerObject.values()].some(i=>i.length)){if(0===this.eventManager.activateCount){let{domElement:i,isExport:r}=this.eventContext,o=r?document:i;o.addEventListener("pointerdown",this.onMouseDown,{once:!0}),o.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),o.addEventListener("pointerdown",this.onAny),o.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(o=>o.dispatch()),i.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.removeEventListener("pointerdown",this.onMouseDown),n.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.removeEventListener("userEvent",this.onUserEvent),r.forEach(o=>o.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(n=>n.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},B8e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.initialDisabled=!1,this.actions=Es(t,t.actions,i,r,o,n),this.target=t.target}disconnect(){fa(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{"Toggle"===t.data.runMode?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{"Toggle"===t.data.runMode?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},z8e=class extends tl{constructor(e,t,n,i,r){super(e),this.sharedVariables=t,this.eventManager=n,this.needsMouse=i,this.needsRaycast=r,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=o=>{let s=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let a=new Date,l=[],c=[];for(let p=0;p<this.propertiesToWatch.length;p++){let{objectId:g,property:v,prevValue:y}=this.propertiesToWatch[p],b=this.eventContext.scene.find(g),P=dI.propertyPaths[v];if("width"===P[0]||"height"===P[0]||"depth"===P[0])b=b.geometry.userData.parameters[P[0]];else for(let S=0;S<P.length;S++)b=b[P[S]];null===y?this.propertiesToWatch[p].prevValue=b instanceof te?b.clone():b:(b instanceof te?!b.equals(y):y!==b)&&(c.push({objId:g,property:v}),b instanceof te?this.propertiesToWatch[p].prevValue.copy(b):this.propertiesToWatch[p].prevValue=b)}for(let p=0;p<this.variablesToWatch.length;p++){let{id:g,prevValue:v}=this.variablesToWatch[p],y=s.getVariable(g);y!==v&&(l.push(g),this.variablesToWatch[p].prevValue=y)}for(let p=0;p<this.dynamicVars.length;p++){let{id:g,expectedTime:v,last:y,data:b,timerSeconds:P,startValue:S}=this.dynamicVars[p],O=1e3;if("timer"!==b.dynamicVariableType&&"stopwatch"!==b.dynamicVariableType||"number3decimal"!==b.format?"counter"===b.dynamicVariableType?O=b.updateInterval:"random"===b.dynamicVariableType&&(O=b.isStatic?1/0:b.updateInterval):O=1,-1!==v){if("Stopped"!==s.getDynamicVariablePlayState(g)&&"Restarted"!==s.getDynamicVariablePlayState(g)||(this.dynamicVars[p].last=o,this.dynamicVars[p].expectedTime=o+O,"counter"===b.dynamicVariableType&&s.getVariable(g)!==S&&(s.updateVariable(g,S),this.eventManager.requestRender()),("timer"===b.dynamicVariableType||"stopwatch"===b.dynamicVariableType)&&this.dynamicVars[p].timerSeconds!==S&&(this.dynamicVars[p].timerSeconds=S,s.updateVariable(g,qc.getFormattedTimerTime(S,b)),this.eventManager.requestRender()),"Restarted"===s.getDynamicVariablePlayState(g)&&s.setDynamicVariablePlayState(g,"Playing"),"Stopped"!==s.getDynamicVariablePlayState(g))){if("Paused"===s.getDynamicVariablePlayState(g)){void 0===this.dynamicVars[p].deltaToExpectedTime&&(this.dynamicVars[p].deltaToExpectedTime=Math.max(this.dynamicVars[p].expectedTime-o,0)),this.dynamicVars[p].last=o-(O-this.dynamicVars[p].deltaToExpectedTime),this.dynamicVars[p].expectedTime=o+this.dynamicVars[p].deltaToExpectedTime;continue}if(this.dynamicVars[p].deltaToExpectedTime=void 0,o>=v)if(this.dynamicVars[p].last=o,this.dynamicVars[p].expectedTime+=O,"random"===b.dynamicVariableType){let A=b.min+Math.random()*(b.max-b.min),H=b.decimals;A=Math.round(A*Math.pow(10,H))/Math.pow(10,H),s.updateVariable(g,A),l.push(g),this.eventManager.requestRender()}else if("counter"===b.dynamicVariableType){let A=s.getVariable(g),H=s.getDynamicVariableToggleIsForward(g)??!0,U=s.getVariable(g)+b.increment*(H?1:-1);b.hasEnd&&(U=b.increment>0?En.clamp(U,S,b.endValue):En.clamp(U,b.endValue,S),U===S&&s.setDynamicVariableToggleIsForward(g,void 0),b.repeat?U===b.endValue&&(U=S):(U===S||U===b.endValue)&&s.setDynamicVariablePlayState(g,"Paused")),U!==A&&(l.push(g),s.updateVariable(g,U),this.eventManager.requestRender())}else if("time"===b.dynamicVariableType){let A=s.getVariable(g),H=jX(a,b);if("object"==typeof A&&"textValue"in A&&"object"==typeof H&&"textValue"in H){if(Array.isArray(A.textValue)&&Array.isArray(H.textValue)){if(A.textValue.every((U,X)=>U===H.textValue[X]))continue}else if(A.textValue===H.textValue)continue}else if(A===H)continue;s.updateVariable(g,H),l.push(g),this.eventManager.requestRender()}else{let A=Oa.isTextValue(b.endValue)?nZ(b.endValue.textValue):b.endValue,H=s.getDynamicVariableToggleIsForward(g)??!0,U=P+(o-y)/1e3*("timer"===b.dynamicVariableType?-1:1)*(H?1:-1);U=Math.max(U,0),b.hasEnd&&(U="stopwatch"===b.dynamicVariableType?En.clamp(U,S,A):En.clamp(U,A,S),U===S&&s.setDynamicVariableToggleIsForward(g,void 0),b.repeat?Math.abs(U-A)<("number3decimal"===b.format?1e-4:.1)&&(U=S):(Math.abs(U-S)<("number3decimal"===b.format?1e-4:.1)||Math.abs(U-A)<("number3decimal"===b.format?1e-4:.1))&&s.setDynamicVariablePlayState(g,"Paused")),U!==P&&(l.push(g),this.dynamicVars[p].timerSeconds=U,s.updateVariable(g,qc.getFormattedTimerTime(U,b)),this.eventManager.requestRender())}}}else this.dynamicVars[p].last=o,this.dynamicVars[p].expectedTime=o+O}let d=!1;s.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=s.mouseProperty,d=!0);let h=!1;s.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=s.raycastProperty,h=!0),this.events.forEach(p=>{(l.includes(p.data.variableId)||c.find(g=>g.objId===p.data.objectId&&g.property===p.data.property)||"mouseProperty"===p.data.variableId&&d||"raycastProperty"===p.data.variableId&&h)&&(p.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{t.data?.events.filter(n=>"VariableChange"===n.data.type&&!n.data.disabled).forEach(n=>{this.events.push(new U8e(n.id,n.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>"objectProperty"===t.data.variableId&&null!==t.data.objectId).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:n})=>{if(!("dynamicVariableType"in n))return void(this.events.find(r=>r.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)}));let i;if("timer"===n.dynamicVariableType||"stopwatch"===n.dynamicVariableType){let r;if(Oa.isTextValue(n.value)&&Array.isArray(n.value.textValue)){let o=n.value.textValue;r=3===o.length?o[2]+60*o[1]+3600*o[0]:o[1]+60*o[0]}else r=n.value;i=r,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:n,timerSeconds:r,startValue:i})}else"time"===n.dynamicVariableType&&e.updateVariable(t,jX(new Date,n)),"counter"===n.dynamicVariableType&&(i=Oa.isTextValue(n.value)?nZ(n.value.textValue):n.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:n,startValue:i})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},U8e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.actions=Es(t,t.actions,i,r,o,n)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){fa(this.actions)}};function nZ(e){return 3===e.length?e[2]+60*e[1]+3600*e[0]:e[1]+60*e[0]}var rZ,rr,Ia,q8e={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1};WTe.then(e=>{rZ=e,rr=new e.Vec3,Ia=new e.Vec3});var Y8e=new te;function Q8e(e){let t=!1;return e.scene.objects.forEach(n=>{"Page"===n.data.type&&!t&&n.data.publish.gameControlObject&&m_.traverseModuleInstances(e,n.id,(i,r,o)=>{for(let s of o)"GameControl"===s.data.type&&s.data.navmesh.enabled&&(t=!0)})}),t}var K8e={type:"change"},oZ={type:"changeZoom"},Z8e={type:"changePan"},Ag={type:"start"},Tg={type:"end",changed:!0},J8e={type:"end",changed:!1},N4=new _i,sZ=new Ue,e9e=2*Math.PI,F4=new te,iS=new Ue,L4=new te,rS=new _i,aZ=new qt,i9e={type:"requestRender"},lZ=class extends Ca{constructor(e,t,n={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,3,1],this.offset=new te,this.eye=new te,this.lastPosition=new te,this.lastQuaternion=new _i,this.current=new Ue,this.overShoot=new Ue,this.overRatio=new Ue,this.spherical=new xH,this.sphericalDelta=new xH,this.panOffset=new te,this.panLeftV=new te,this.panUpV=new te,this.panV=new te,this.rotateStart=new Ue,this.rotateEnd=new Ue,this.rotateDelta=new Ue,this.panStart=new Ue,this.panEnd=new Ue,this.panDelta=new Ue,this.dollyStart=new Ue,this.dollyEnd=new Ue,this.dollyDelta=new Ue,this.rotationRangeFactor=new Ue,this.panRangeFactor=new Ue,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(L4,rS,F4),this.offset.copy(L4).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(N4.copy(rS).invert()),this.panOffset.applyQuaternion(N4),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(rS),this.panOffset.applyQuaternion(rS)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),L4.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(aZ.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(aZ));let i=this.spherical.phi%e9e;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(Fr.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping){let r=1===this.hoverRotatePanMode?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-r,this.sphericalDelta.phi*=1-r}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8?(this.dispatchEvent(K8e),this.object.dispatchEvent(i9e),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{!1!==this.enabled&&("touch"===i.pointerType||"pen"===i.pointerType&&fc?this.onPointerDownTouch(i):this.onPointerDownMouse(i),-1!==this.state&&(this.isPointerDown=!0,this.dispatchEvent(Ag),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),"touch"===i.pointerType||"pen"===i.pointerType&&fc||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(1===this.hoverRotatePanMode?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,F4.subVectors(this.position0,this.target0),this.spherical.setFromVector3(F4),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):2===this.hoverRotatePanMode&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||void 0===this.pointerLeaveEvent?iS.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):iS.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),1===this.hoverRotatePanMode?(this.rotateDelta.copy(iS).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(sZ,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):2===this.hoverRotatePanMode&&(this.panDelta.copy(iS).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{!1!==this.enabled&&(this.checkRaycastLock()||("touch"===i.pointerType||"pen"===i.pointerType&&fc?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,0===ci.length&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),ci.length>1&&i.preventDefault(),this.dispatchEvent(this.hasChange?Tg:J8e),this.state=-1,i&&(i.stopPropagation(),"touch"===i.pointerType||"pen"===i.pointerType&&fc||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let r;switch(r=this.useKeyEvents?this.mouseButtons[i.button]:this.mouseButtonsPlay[i.button],r){case 0:if(!0!==i.altKey||i.shiftKey||nP(i)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(nP(i)||i.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(nP(i)||i.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(i),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(i);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(i);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(i)}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(ci.length>1&&i.preventDefault(),this.touches[ci.length-1]){case 0:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case 1:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(ci.length>1&&i.preventDefault(),this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(i),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=o_(()=>this.dispatchEvent(Tg),33),this.onMouseWheel=i=>{!1===this.enabled||!1===this.enableZoom&&!1===this.enablePan||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(Ag),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),!1!==this.enabled&&!this.checkRaycastLock()&&!s_)if("gesturechange"===i.type){if(!1===this.enableZoom||!1===this.isTouchZoom)return;this.dispatchEvent(Ag),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Tg)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{!1!==this.enabled&&(this.key=i.key," "===i.key&&this.dispatchEvent(Ag))},this.onKeyUp=i=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&"Alt"===i.key&&this.onPointerUp(ci[0])," "===i.key&&this.dispatchEvent(Tg))},this.onPointerHover=i=>{"mouse"!==i.pointerType||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot||(this.isPointerDown=!0,2===this.hoverRotatePanMode?this.handleMouseMovePan(i,this.hoverRotatePanStrength):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){this.hasChange="start"!==e.type,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents="window"===t,0!==this.hoverRotatePanMode&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.hoverRotatePanStrength=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(N4.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=$h(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=$h(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=$h($h(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=$h($h(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=0),1===e.panTouches&&(this.touches[0]=1),2===e.orbitTouches&&(this.touches[1]=3),2===e.panTouches&&(this.touches[1]=2),3===e.orbitTouches&&(this.touches[2]=0),3===e.panTouches&&(this.touches[2]=1),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),0!==this.hoverRotatePanMode&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,n,i,r,o,s,a){let l,c,d;this.overShoot.set(0,0),e instanceof te?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,c=e.phi,this.current.set($h(this.spherical.theta),$h(this.spherical.phi)),d=!1),0===n&&(this.current.x+=l,this.current.y+=c),(3===t||2===t)&&(!d&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(3===t||1===t)&&(this.current.y>o?this.overShoot.y=o-this.current.y:this.current.y<s&&(this.overShoot.y=s-this.current.y)),d||(this.overShoot.x=$h(this.overShoot.x),this.overShoot.y=$h(this.overShoot.y)),0!==n?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===n&&(this.overRatio.x=cZ(Math.abs(this.overRatio.x)),this.overRatio.y=cZ(Math.abs(this.overRatio.y))),this.isPointerDown||1===n?2===n&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):2===n&&(!d&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=.05*this.overShoot.x),this.phiIsFree||(c=.05*this.overShoot.y),d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof te?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){this.panV.copy(this.object.position).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*t*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(Z8e)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(oZ)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(oZ)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Ag),this.dollyOut(e),this.dispatchEvent(Tg)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Ag),this.dollyIn(e),this.dispatchEvent(Tg)}setZoom(e){this.dispatchEvent(Ag),this.object.isPerspectiveCamera?this.scale=this.initialSphericalRadius/e/this.spherical.radius:this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Tg)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){void 0!==e.movementX?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(sZ,-this.object.angleOffsetFromUp);let i=this.useWindowEvents?window.innerHeight:this.domElement.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,o=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(o),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){void 0!==e.movementX?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(!1===zTe&&!1===nP(e)&&!0===function jTe(e){return 0===e.wheelDeltaY||0===e.deltaY?!(tP&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):this.pan(this.panDelta.x,e.shiftKey?0:this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(!1===this.enableZoom||this.gesture)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){2===ci.length?this.rotateStart.set(.5*(ci[0].pageX+ci[1].pageX),.5*(ci[0].pageY+ci[1].pageY)):this.rotateStart.set(ci[0].pageX,ci[0].pageY)}handleTouchStartPan(){2===ci.length?this.panStart.set(.5*(ci[0].pageX+ci[1].pageX),.5*(ci[0].pageY+ci[1].pageY)):this.panStart.set(ci[0].pageX,ci[0].pageY)}handleTouchStartDolly(){let e=ci[0].pageX-ci[1].pageX,t=ci[0].pageY-ci[1].pageY,n=Math.sqrt(e*e+t*t);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===ci.length){let n=L3(e);this.rotateEnd.set(.5*(e.pageX+n.x),.5*(e.pageY+n.y))}else{if(e.pointerId!==ci[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===ci.length){let t=L3(e);this.panEnd.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}else{if(e.pointerId!==ci[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=L3(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&!0===this.isTouchZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let e=this.options?.showCameraLock;return e&&e(),!0}}return!1}};function $h(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function cZ(e){return 1-Math.pow(1-e,4)}var fr,dZ=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.page=i,this.currentIntersectedObjects=[],this.actions=Es(t,t.actions,i,r,o,n),this.target=t.target,this.triggeringObjects=[];for(let s of t.triggeringObjects){let a=i.scene.find(s);a&&this.triggeringObjects.push(a)}}isValidTriggeringObject(e){return"all"===this.target||this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){fa(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{"Toggle"===e.data.runMode?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}};YTe.then(e=>fr=e);var Ds=new te,Wd=new _i,zf=new te,B4=new js(0,0,0,"YXZ"),hZ=new js(0,0,0,"XYZ"),qd=new te,z4=new te,U4=new te(1,1,1),I1=new _i,oS=new qt,uZ=new qt,r9e={type:"updateMatrix"},pZ=new _i,j4=new Fl,V4={type:"beginEvent",eventName:"Collision"},o9e={type:"beginEvent",eventName:"Trigger"},sS=e=>e.states.some(t=>void 0!==t.data.position||void 0!==t.data.rotation||void 0!==t.data.hiddenMatrix||void 0!==t.data.cloner||void 0!==t.data.pathSnapping);function l9e(e){let t=this._clip.duration,n=this._clip.start??0,i=this.loop,r=this.time+e,o=this._loopCount,s=2202===i;if(0===e)return-1===o?r:s&&1==(1&o)?t-(r-n):r;if(2200===i){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<n){let a=Math.floor((r-n)/(t-n));r-=(t-n)*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s||(r=e>0?t:n,1===this.repetitions&&(r=t)),this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){let c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&1==(1&o))return t-(r-n)}return r}var Uf,fZ=!1,H4=new WeakMap,d9e=class extends Xb{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){let r=new e3(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.decodeDracoFile(o,t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){return this.decodeGeometry(e,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n}).then(t)}decodeGeometry(e,t){let n=JSON.stringify(t);if(H4.has(e)){let a=H4.get(e);if(a.key===n)return a.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,r=this.workerNextTaskID++,s=this._getWorker(r,e.byteLength).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[r]={resolve:l,reject:c},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return s.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),H4.set(e,{key:n,promise:s}),s}_createGeometry(e){let t=new Xn;e.index&&t.setIndex(new ui(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t.setAttribute(i.name,new ui(i.array,i.itemSize))}return t}_loadLibrary(e,t){let n=new e3(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(e,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{let i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);let r=h9e.toString(),o=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){let o=r.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};function h9e(){let e,t;function r(s,a,l,c,d,h){let p=h.num_components(),g=l.num_points()*p,v=g*d.BYTES_PER_ELEMENT,y=function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}(s,d),b=s._malloc(v);a.GetAttributeDataArrayForAllPoints(l,h,y,v,b);let P=new d(s.HEAPF32.buffer,b,g).slice();return s._free(b),{name:c,array:P,itemSize:p}}onmessage=function(s){let a=s.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise(function(d){e.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(e)});break;case"decode":let l=a.buffer,c=a.taskConfig;t.then(d=>{let h=d.draco,p=new h.Decoder,g=new h.DecoderBuffer;g.Init(new Int8Array(l),l.byteLength);try{let v=function n(s,a,l,c){let p,g,d=c.attributeIDs,h=c.attributeTypes,v=a.GetEncodedGeometryType(l);if(v===s.TRIANGULAR_MESH)p=new s.Mesh,g=a.DecodeBufferToMesh(l,p);else{if(v!==s.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");p=new s.PointCloud,g=a.DecodeBufferToPointCloud(l,p)}if(!g.ok()||0===p.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());let y={index:null,attributes:[]};for(let b in d){let S,O,P=self[h[b]];if(c.useUniqueIDs)O=d[b],S=a.GetAttributeByUniqueId(p,O);else{if(O=a.GetAttributeId(p,s[d[b]]),-1===O)continue;S=a.GetAttribute(p,O)}y.attributes.push(r(s,a,p,b,P,S))}return v===s.TRIANGULAR_MESH&&(y.index=function i(s,a,l){let c=3*l.num_faces(),d=4*c,h=s._malloc(d);a.GetTrianglesUInt32Array(l,d,h);let p=new Uint32Array(s.HEAPF32.buffer,h,c).slice();return s._free(h),{array:p,itemSize:1}}(s,a,p)),s.destroy(p),y}(h,p,g,c),y=v.attributes.map(b=>b.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{h.destroy(g),h.destroy(p)}})}}}function p9e(e){return G4.apply(this,arguments)}function G4(){return G4=(0,Qn.Z)(function*(e){if(Uf){let n,t={attributeIDs:Uf.defaultAttributeIDs,attributeTypes:Uf.defaultAttributeTypes,useUniqueIDs:!1};try{n=yield Uf.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}),G4.apply(this,arguments)}function W4(){return W4=(0,Qn.Z)(function*(e,t){let[n,i]=cW(oI.deserialize(new Uint8Array(e)));return Rq(n),t&&t(n),i.result().data}),W4.apply(this,arguments)}function q4(){return q4=(0,Qn.Z)(function*(e){for(let t of e){let n=yield p9e(t.geometry.data.draco);if(n){let i=t.geometry.data;n.index&&(i.index={array:n.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let r={};n.attributes.forEach(({name:o,array:s,itemSize:a})=>{r[o]={array:s,itemSize:a,type:"Float32Array",normalized:!1}}),i.attributes=r,i.draco=void 0}}}),q4.apply(this,arguments)}var y9e=class{constructor(e,t,n,i,r,o,s,a){this.eventId=e,this.id=t,this.data=n,this.dataEvent=i,this.object=r,this.stage=!1,this.actions=Es(i,n.actions,o,s,a,r)}disconnect(){fa(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},b9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(n,i)=>{this.breakpoints.forEach(r=>{let a,o=cI.deviceToSize(r.data.size),s="horizontal"===r.dataEvent.orientation?n:i;switch(r.data.operator){case"<":a=s<o[0];break;case">":a=s>o[0];break;case"<>":a=s>o[0]&&s<o[1]}r.stage!==a&&(r.stage=a,r.stage?r.dispatchIn():r.dispatchOut())})},this.onResizeObserver=new ResizeObserver(n=>{for(let i of n){let{width:r,height:o}=i.contentRect;this.resize(r,o)}})}connect(){let{page:e,sharedAssets:t,domElement:n}=this.eventContext;this.onResizeObserver.observe(n);let i=r=>{if(r.visible&&r.data?.events.length)for(let{data:o,id:s}of r.data.events)o.disabled||"Resize"===o.type&&o.breakpoints.forEach(({data:a,id:l})=>{try{let c=new y9e(s,l,a,o,r,e,t,this.eventManager);this.breakpoints.push(c)}catch{}})};e.traverseEntity(r=>{(r instanceof el||r instanceof ua)&&r.frame?.traverse(o=>{i(o)}),i(r)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},_9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:n})=>{this.events.forEach(i=>{i.data.userAPIId===n&&i.dispatchSuccess()})},this.onError=({userAPIId:n})=>{this.events.forEach(i=>{i.data.userAPIId===n&&i.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>"API"===t.data.type&&!t.data.disabled).forEach(t=>{this.events.push(new x9e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},x9e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.successActions=Es(t,t.successActions,i,r,o,n),this.errorActions=Es(t,t.errorActions,i,r,o,n)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},C9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:n})=>{this.events.forEach(i=>{i.data.userWebhookId===n&&i.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>"WEBHOOK"===t.data.type&&!t.data.disabled).forEach(t=>{this.events.push(new w9e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},w9e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.actions=Es(t,t.actions,i,r,o,n)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},P9e=new te(0,0,1),mZ=new te,gZ=new te,vZ=new Ms,yZ=(e,t)=>{if("string"==typeof e){let n=t.data(e);if(n)return yZ(n.value,t)}return Oa.getDisplayedValue(e)};function bZ(e,t){let n=e.text,i="";if("string"==typeof n){let r=t.variables.data(i);r&&(i=yZ(r.value,t.variables))}else i=n.textValue.toString();return i}var E9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new _h,this.helper=new q$,this._onMouseDownFocusIn=n=>{if(ci.length>1)return;this.eventContext.updateRaycaster(n);let i=null;if(this.eventContext.raycaster)for(let r of this._textInputs)if(this.eventContext.raycaster.intersectObject(r,!0).length>0){i=r;break}this.focusOnTextInput(i),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(n),this._onMouseDown(n)},this.onExit=()=>{let{virtualInput:n}=this.textInputManager;if(null===n)return;let i=this.textInputManager.htmlInput;this.helper.hide(),i?.setSelectionRange(i.value.length,i.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDown,!1),r.removeEventListener("pointerup",this._onMouseUp,!1),r.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),r.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=n=>{this.eventContext.updateRaycaster(n),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=n=>{this.eventContext.updateRaycaster(n),this.textInputManager.handleMouseMove()},this._onTextEdit=n=>{let{htmlInput:i,virtualInput:r,helper:o}=this.textInputManager;if(!i||!r)return;let s=i.value;r.textGeometry.setText(s).then(()=>{this.eventContext.requestRender()});let a=r.data;o.update();let l=a.geometry.text;"string"==typeof l&&this.eventContext.sharedAssets.updateVariable(l,{textValue:s}),this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=n=>{this.textInputManager.handleCaretUpdate(n)},this._onKeyPress=n=>{"Escape"===n.key&&this.onExit()},this.textInputManager=new class{constructor(e,t,n,i,r){this.containerScene=e,this.raycaster=t,this.sharedAssets=n,this.requestRender=i,this.onExit=r,this.htmlInput=null,this.virtualInput=null,this.helper=new q$,this.doubleClickHandler=new class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],n=(new Date).getTime();if(this._clickCount>0){let i=t[0]-this._lastPosition[0],r=t[1]-this._lastPosition[1];Math.sqrt(i*i+r*r)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=n-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=n},this._onMouseUp=e=>{}}start(e,t=500,n=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=n,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},this.isDragging=!1,this.plane=new Ll,this.caretInterval=0,this.planeIntersection=new te,this.projected=new Ue,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{let o=this.virtualInput?.data;if(void 0!==this.virtualInput&&o){let s=o.material,l=function jLe(e,t){let n=Pa.fromHex(3223857),i=.8;for(let r of e.layers){if("light"===r.data.type||"displace"===r.data.type||"fresnel"===r.data.type||"matcap"===r.data.type||"texture"===r.data.type||"toon"===r.data.type||"outline"===r.data.type||"transmission"===r.data.type||"noise"===r.data.type)continue;let o="string"==typeof r.data.alpha?Number(t.getVariable(r.data.alpha)):r.data.alpha;if("color"===r.data.type&&o>.3){n=VLe(r.data.color,t),i=o;break}if(("depth"===r.data.type||"gradient"===r.data.type)&&o>.3){let s=HLe(r.data);n={r:s[0],g:s[1],b:s[2]},i="string"==typeof r.data.alpha?1:r.data.alpha;break}}return{...n,a:i}}("string"==typeof s?this.sharedAssets.data.materials[s]:s,this.sharedAssets);this.helper.setCaretColor(l)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=o=>{if(!this.htmlInput||!this.virtualInput)return;let s=this.helper;this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(s.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:"ArrowLeft"===o?.key||"ArrowRight"===o?.key,verticalKeyMove:"ArrowUp"===o?.key||"ArrowDown"===o?.key}),this.startAnimateTextCursor()):s.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=function M9e(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}(),this.htmlInput}connect(){}disconnect(){this.stopAnimateTextCursor(),this.helper.hide(),this.htmlInput?.remove(),this.doubleClickHandler.stop()}handleMouseDown(){if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:n,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};this.virtualInput?.wrappedText?.length&&"\n"===this.virtualInput.wrappedText[n][Math.max(0,i-1)]&&(t--,i--),this._lastIndex=t,this._isFirstDragMove=!0;let r=this.checkClickedObject();if(1===e){if(null===r)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else r===this.virtualInput&&(2===e?this.selectClosestWord(n,i):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let t=this.data?.geometry.text;this.htmlInput.value="string"==typeof t?"":t?.textValue.toString()??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:n,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};void 0!==n&&void 0!==i&&"\n"===this.virtualInput?.wrappedText[n][i-1]&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof HR)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let n=this.virtualInput.wrappedText,i=n[e],r=t+1,o=t;" "!==i[t]&&(r=this.findNextCharOccurence(i,t,"forward"," "),o=this.findNextCharOccurence(i,t,"backward"," "),o>0&&o++,r>=i.length-1&&e===n.length-1&&r++);let s=this.helper,a=s.getGlobalIndexFromLineAndCharIndexes(n,e,o),l=s.getGlobalIndexFromLineAndCharIndexes(n,e,r);this.setInputSelection(a,l)}findNextCharOccurence(e,t,n,i=" "){let r=Math.max(0,e.length-1),o="forward"===n?r:0,s="forward"===n?1:-1,a=Math.max(Math.min(t,r),0);for(;a!==o;)if(a+=s,e.charAt(a)===i)return a;return o}getPointOnPlane(){let e=this.virtualInput?.data;if(this.virtualInput&&e&&this.raycaster.ray.intersectsPlane(this.plane)){null===this.planeIntersection&&(this.planeIntersection=new te);let t=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);t&&(this.planeIntersection.copy(this.virtualInput.worldToLocal(t)),this.projected.set(t.x+.5*("number"==typeof e.geometry.width?e.geometry.width:1),t.y-.5*("number"==typeof e.geometry.height?e.geometry.height:1)))}}updatePlane(){let e=this.virtualInput?.data;this.virtualInput&&e&&(vZ.getNormalMatrix(this.virtualInput.matrixWorld),mZ.copy(P9e).applyMatrix3(vZ).normalize(),this.virtualInput.localToWorld(gZ.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(mZ,gZ))}setInputSelection(e,t=e){this.htmlInput?.setSelectionRange(e,t),setTimeout(()=>{this.htmlInput?.focus()})}updateTextInputStyles(){let e=this.virtualInput?.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=function O9e(e){return 4===e?"justify":2===e?"right":3===e?"center":"left"}(e.geometry.horizontalAlign))}}(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(i=>{i instanceof HR&&e.push(i)}),this._textInputs=e,0===e.length)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let n=this.textInputManager.createInput();document.body.appendChild(n),n.style.display="none",n.addEventListener("keyup",this._onCaretUpdate),n.addEventListener("keydown",this._onCaretUpdate),n.addEventListener("beforeinput",this._onCaretUpdate),n.addEventListener("paste",this._onCaretUpdate),n.addEventListener("cut",this._onCaretUpdate),n.addEventListener("select",this._onCaretUpdate),n.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e?.removeEventListener("keyup",this._onCaretUpdate),e?.removeEventListener("keydown",this._onCaretUpdate),e?.removeEventListener("beforeinput",this._onCaretUpdate),e?.removeEventListener("paste",this._onCaretUpdate),e?.removeEventListener("cut",this._onCaretUpdate),e?.removeEventListener("select",this._onCaretUpdate),e?.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(n=>{let i=bZ(n.data.geometry,this.eventContext.sharedAssets.data);n.textGeometry.setText(i)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||null===e)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let n=bZ(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=n,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:i}=this.eventContext;i.removeEventListener("pointerdown",this._onMouseDownFocusIn),i.addEventListener("pointerdown",this._onMouseDown,!1),i.addEventListener("pointerup",this._onMouseUp,!1),i.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},D9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({})=>{this.events.forEach(r=>{r.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>"AIAssistantListener"===t.data.type&&!t.data.disabled).forEach(t=>{this.events.push(new A9e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){this.openAIRealtime?.off("voice",this.onVoice)}},A9e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.actions=Es(t,t.actions,i,r,o,n)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},T9e=class extends tl{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:n,direction:i})=>{let r=this.events.find(o=>o.data.description===n);r&&("backward"===i?r.dispatchReverse():r.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>"AIAssistantTrigger"===t.data.type&&!t.data.disabled).forEach(t=>{this.events.push(new I9e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){this.openAIRealtime?.off("trigger_event",this.onTriggerEvent)}},I9e=class{constructor(e,t,n,i,r,o){this.id=e,this.data=t,this.object=n,this.actions=Es(t,t.actions,i,r,o,n)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}};function B9e(e){let t;if(e.index)for(let n=0;n<e.index.array.length;n+=3)t=e.index.array[n],e.index.array[n]=e.index.array[n+2],e.index.array[n+2]=t}function lx(e){return e instanceof V_?"SubdivObject":"NonParametricGeometry"===e.geometry.type?"NonParametric":"Mesh"}var V9e=Eu(Vve(),1),H9e=new Ue,aS=class{constructor(e,{renderOnDemand:t,renderMode:n="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,this._perfs?.start(),this._renderer&&(this._isPaused||!("manual"===this.renderMode&&!this._renderRequested||"auto"===this.renderMode&&this._skipRender))?(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&(this._eventManager.handlers?.Start.hasVideoAction||this._eventManager.handlers?.Basic.hasVideoAction||this._eventManager.handlers?.Conditional.hasVideoAction)&&(this._skipRender=!1),this._animationControls?.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene?.traverseVisibleEntity(r=>{"ParticleSystem"===r.type&&(r.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),this._eventManager?.isEnabled&&(this._eventManager.handlers?.Follow.onAnimationFrameDamping(),this._eventManager.handlers?.LookAt.onAnimationFrameDamping(),this._eventManager.handlers?.DragDrop.onAnimationFrameDamping()),this._scene&&this._camera&&(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0?(this._renderer.sceneTransitionTimeRemaining-=this.dt,this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration,this._skipRender=!1):this._renderer.pipeline.sceneTransitionFromTexture=null,this._renderer.renderSplineScene(this._scene,this._camera)),this.canvas.dispatchEvent(this._renderedEvent),this._perfs?.end()):this._perfs?.end()},this._resize=i=>{if(this._renderer){if(1===this._viewportMode&&this._frameView&&(this._frameView.frameSize=H9e.set(this._viewportWidth,this._viewportHeight)),i){let r=this._viewportWidth,o=this._viewportHeight;this._renderer.setSize(r-1,o-1,!1),this._renderer.setSize(r,o,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=this._scene?.activeCamera,this._scene?.updateViewPlaneSize(this._frameView?.frameSize?.x??this._viewportWidth,this._frameView?.frameSize?.y??this._viewportHeight,this._frameView?.enableResponsive??!1),this._camera){let r=Object.values(this._data?.frames??{})[0].preset??"fullscreen";this._frameView?.setCamera(this._camera),this._frameView?.updateCamera("fullscreen"!==r),"PerspectiveCamera"===this._camera.cameraType&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=o_(this._resize,10),this._onScroll=i=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":n,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new class{constructor({x:e=10,y:t=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){this.element.parentElement?.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}}({x:10,y:10})),function HTe(e){e.addEventListener("pointerdown",KG,!0),e.addEventListener("pointerdown",oP,!0),e.addEventListener("pointermove",oP,!0),e.addEventListener("pointerup",kv,!0),e.addEventListener("pointercancel",kv,!0),e.addEventListener("pointerleave",kv,!0),window.addEventListener("keydown",ZG,!0),window.addEventListener("keyup",JG,!0)}(e)}load(e,t,n){var i=this;return(0,Qn.Z)(function*(){(function G9e(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)})(e),i.disposed=!1;let r=yield(yield fetch(e,n)).arrayBuffer();yield i.start(r,{variables:t})})()}start(e,{interactive:t=!0,variables:n}={}){var i=this;return(0,Qn.Z)(function*(){if(i.disposed)return;let r=yield function f9e(e,t){return W4.apply(this,arguments)}(e);i._data=r;let o=function m9e(e){let t=[];return e.scene.objects.traverse((n,i)=>{"Mesh"===i.type&&"NonParametricGeometry"===i.geometry.type&&void 0!==i.geometry.data.draco&&t.push(i)}),t}(r);r.version&&(0,V9e.default)(r.version,"1.9.35")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),yield Promise.all([o.length&&(Uf||(Uf=new d9e).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),Uf.decoderPending),P$(r)&&HRe(),n5e(r)&&zRe(),m_.physicsEnabled(r.scene.objects)&&XTe(),y$(r)&&MNe(),xQ(r)&&s6e(),CNe(r)&&xNe(),iQ(r)&&JLe(),Q8e(r)&&qTe()].filter(Boolean)),o.length&&(yield function g9e(e){return q4.apply(this,arguments)}(o)),i._eventManager?.deactivate(),i._controls?.deactivate(),i._scene?.dispose();let s=new class{get sharedAssets(){return this.shared}constructor(e,t={},n=!0){this.shared=new nR(e.shared,t,!0,n),this.scene=new ZR(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof ua&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ka&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}}(r);if(s.resetPersonalCameraFromDocumentData(),i._scene=s.scene,i._sharedAssetsManager=s.sharedAssets,i._camera=i._scene.activeCamera,window.location.search.includes("merge-geometries")){let c=performance.now();!function j9e(e,t){let n=function z9e(e,t){let n={};return e.traverseEntity(i=>{if(!i.visible||!(i instanceof yl)||"Mesh"!==i.type||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let r=i.parent;for(;r;){if(r instanceof yl&&i.states&&Object.keys(i.states).length)return;r=r.parent}let o=i.material.uuid,s=t.shared.materials[o];if(s){if(!Sa.isMergable(s))return}else{let l=t.scene.objects.get(i.uuid)?.data;if(l&&"material"in l&&"string"!=typeof l.material){if(!Sa.isMergable(l.material))return;o=Sa.getHash(l.material)}}n[o]||(n[o]={});let a=n[o][lx(i)];if(a){if(a.push(i),i.cloner)for(let l of i.cloner.children)a.push(l)}else if(n[o][lx(i)]=[i],i.cloner)for(let l of i.cloner.children)n[o][lx(i)].push(l)}),n}(t,e),i=function U9e(e){let t=0;return Object.values(e).forEach(n=>{Object.values(n).forEach(i=>{let r=i.length;r>t&&(t=r)})}),t}(n),r=new Array(i),o=0,s=new Array(i),a=0,l=new Array(i),c=0,d=new Array(i),h=0;for(let[p,g]of Object.entries(n))for(let v of Object.values(g)){if(a=0,c=0,v.forEach(b=>{b instanceof yl&&(s[a++]=b.geometry.clone(),l[c++]=b)}),c<2)continue;for(let b=0;b<c;b++)l[b].updateWorldMatrix(!0,!1),s[b].applyMatrix4(l[b].matrixWorld),l[b].matrixWorld.determinant()<0&&B9e(s[b]);let y=pg(s.slice(0,a),!1);if(y){let b;"SubdivObject"===p?(console.warn("Turning subdiv object into mesh"),b=new Vo(y,l[0].material)):b=new Vo(y,l[0].material),b.castShadow=l[0].castShadow,b.receiveShadow=l[0].receiveShadow,t.add(b);let P=S=>{h=0;for(let O of S)O.children&&P(O.children),O instanceof yl&&(Array.isArray(O.material)||n[O.material.uuid]&&n[O.material.uuid][lx(O)]&&n[O.material.uuid][lx(O)].length>1||(d[h++]=O));for(let O=0;O<h;O++)t.attach(d[O])};for(let S=0;S<c;S++){let O=l[S];P(O.children),r[o++]=O}}}for(let p=0;p<o;p++)r[p].removeFromParent()}(r,s.scene);let d=performance.now();console.log("Merged geometries in ",d-c," ms")}P$(r)&&i._scene.traverse(c=>{rp(c)&&c.recomputeBoolean()}),i._sharedAssetsManager.setRequestRender(()=>{i._requestRenderAutoMode(),i._scene?.traverse(c=>{c instanceof Ld&&c.pendingMediaLoad&&c.update()})}),i._scene?.traverse(c=>{"ParticleSystem"===c.type&&(c.wakeUp(),c.data.autoPlay?c.start():c.stop())});let a=Object.keys(r.shared.fonts).map(c=>i._sharedAssetsManager.getFont(c).loadingPromise);if(Promise.all(a).then(()=>{s.scene.markNeedsUpdateRendererDirty(),i._requestRenderAutoMode()}),y$(r)&&function s9e(e){if(m_.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((n,i)=>{if(i.events)if(Array.isArray(i.events)){for(let r of i.events)if(!0!==r.data.disabled&&"GameControl"===r.data.type&&r.data.collisionEnabled){t=!0;break}}else for(let r of Object.values(i.events))if(!0!==r.disabled&&"GameControl"===r.type&&r.collisionEnabled){t=!0;break}}),t}(r)&&(yield Promise.all(a)),iQ(r)){let c=[];i._scene.traverseEntity(d=>{(d instanceof el||d instanceof ua)&&d.uiCanvas&&c.push(d.uiCanvas)}),yield Promise.all(c.map(d=>d.promise))}if(i._scene.rewriteEventsBeforeGoToPlayMode(),x4(i._scene.activePage,i._sharedAssetsManager),!i._renderer&&(i._renderer=new zLe({canvas:i.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),i._renderer.hdTransmission=!0===r.scene.publish.hdTransmission,i._renderer.setPixelRatio(window.devicePixelRatio),i._renderer.pipeline.enableUIOverlay(),i._renderer.pipeline.addEventListener("smaaloaded",i._requestRenderAutoMode),r.shared.images.SplineWatermark)){let c=i._sharedAssetsManager.getImage("SplineWatermark");yield c.loadPromise;let d=c.getTexture(1001);i._renderer.pipeline.setWatermark(d)}xQ(r)&&i._scene.initializeSplatViewer(),void 0!==r.scene.blueNoiseTextureData&&i._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let l=Object.values(r.frames)[0];if(i._frameView?i._frameView.setCamera(i._camera):("fullscreen"===l.preset?(i._viewportMode=1,i.canvas.style.display="block",i.canvas.parentElement&&(i._viewportWidth=i.canvas.parentElement.clientWidth||300,i.canvas.style.width="100%"),i.canvas.parentElement&&(i._viewportHeight=i.canvas.parentElement.clientHeight||150,i.canvas.style.height="100%")):(i._viewportMode=2,i._viewportWidth=l.size[0],i._viewportHeight=l.size[1],i.canvas.style.width=`${i._viewportWidth}px`,i.canvas.style.height=`${i._viewportHeight}px`),i._renderer.setSize(i._viewportWidth,i._viewportHeight,!1),i._frameView=new class{constructor(e,t,n,i,r){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=(new Ue).copy(n),this._editorSize=(new Ue).copy(i),this._aspect=t.aspect,this._fov=r??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.y;this._aspect=e/t,t<=n&&(this._camera.zoom*=n/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let t=this._frameSize.y,n=this._editorSize.y,i=this._fov;if(e&&t>n){let r=function N9e(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i}(t,1080,2160,1,15)/100;i*=t/n,i*=1-r}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}}(i._renderer,i._camera,new Ue(i._viewportWidth,i._viewportHeight),new Ue(window.innerWidth,window.innerHeight)),i._frameView.enableResponsive=(l.allowResponsive??!1)&&"fullscreen"===l.preset),t){let c=new class{constructor(e,t,n,i,r,o,s,a){this.renderer=e,this.publish=t,this.scene=n,this.getCamera=i,this.sharedAssets=r,this.requestRender=o,this.isExport=s,this.frame=a,this.raycaster=new t8e,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents="window"===t.mouseEventTarget,this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){let{pageX:t,pageY:n}=e.touches?.length>0?e.touches[0]:e;this.pointerWorld=function i8e(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width*2-1,y:-(t-(n.top+window.scrollY))/n.height*2+1}}(t,n,this._domRect),this.pointerScreen=function r8e(e,t,n){return{x:(e-(n.left+window.scrollX))/n.width,y:1-(t-(n.top+window.scrollY))/n.height}}(t,n,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}}(i._renderer,i.data.scene.publish,i._scene,()=>i._scene.activeCamera,i._sharedAssetsManager,i._requestRenderAutoMode,!0,l);i._scene.updateMatrixWorld(!0),i._controls=new class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==fr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[n,i,r]=this.rigidBodyToMesh.get(t.handle);if(Ds.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),Wd.copy(t.rotation()),n.matrixWorld.compose(Ds,Wd,i),n.hasNonUniformScale&&n.matrixWorld.multiply(n.shearScale),n.dispatchEvent(r9e),r){let o=n.cloner;if(o&&void 0===o.objectForSample){o.matrixWorld.copy(n.matrixWorld);for(let s of o.children)s.updateMatrixWorld(!0)}for(let s of n.children)s.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,n,i)=>{if(!1===i)return;let r,o;if(this.sensorToTriggerEvent[t]?(r=this.sensorToTriggerEvent[t],o=this.sharedGameControlGlobals.colliderToEntity.get(n)):this.sensorToTriggerEvent[n]&&(r=this.sensorToTriggerEvent[n],o=this.sharedGameControlGlobals.colliderToEntity.get(t)),r&&o&&r.isValidTriggeringObject(o))r.dispatch();else{for(let s=this.sharedGameControlGlobals.createdObjects.length-1;s>=0;s--){let a=this.sharedGameControlGlobals.createdObjects[s];if(a.userData.hasCollisionDestroy&&(a.rigidBody?.collider(0).handle===t||a.rigidBody?.collider(0).handle===n)){this.sharedGameControlGlobals.createdObjects.splice(s,1),a.removeFromParent(),requestAnimationFrame(()=>this.sharedGameControlGlobals.rapierWorld?.removeRigidBody(a.rigidBody));break}}if(void 0!==this.gameControl?.object&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let s=this.sharedGameControlGlobals.colliderToEntity.get(n),a=this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid];if(void 0===a)return;for(let l of a)"character"===l.data.target&&this.dispatchCollisionEvent(l,s,n)}else if(void 0!==this.gameControl?.object&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(n)){let s=this.sharedGameControlGlobals.colliderToEntity.get(t),a=this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid];if(void 0===a)return;for(let l of a)"character"===l.data.target&&this.dispatchCollisionEvent(l,s,t)}else{let s=this.sharedGameControlGlobals.colliderToEntity.get(t),a=this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid];if(void 0!==a)for(let d of a)"scene"===d.data.target&&this.dispatchCollisionEvent(d,s,t);let l=this.sharedGameControlGlobals.colliderToEntity.get(n),c=this.sharedGameControlGlobals.entityToCollisionEvents[l?.uuid];if(void 0!==c)for(let d of c)"scene"===d.data.target&&this.dispatchCollisionEvent(d,l,n)}}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=200,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",n=>{"gamepad"in n.data&&"axes"in n.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(n.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let n of t.events){if(!0===n.data.disabled)continue;let i=n.data.actions?.find(r=>"Destroy"===r.data.type)?.data;if(i)for(let r of i.objects){let o=this.page.scene.find(r);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let n of t.events)if(!0!==n.data.disabled&&"DragDrop"===n.data.type)for(let i of n.data.objects){let r=this.page.scene.find(i);r&&(r.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{let n;if(t instanceof Ld||t instanceof S2||t instanceof z2)return;n=t instanceof Qa?t.object:t;let o=n.dataPatched;if("visibility"===o.physics?.enabled?!o.visible:!o.physics?.enabled)return!0;let s=t.geometry,a=!0===n.userData.hasDestroy,l=!0===n.userData.hasDrag;if(sS(o)||a||l||n.dataPatched.events.some(c=>!0!==c.data.disabled&&"GameControl"===c.data.type))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;s&&e.push(lp(s,t.matrixWorld))}),e.length>0){let t=pg(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new S_(t)}}addRigidBody(e,t,n){let i=[],r="geometry"in e?e.geometry:void 0,o=t.dataPatched;if(void 0!==r?.getAttribute("position")&&i.push(lp(r,e.shearScale)),o.physics.fusedBody){let s=this.gatherChildrenGeom(e,i);e.traverseObject(s),e.children.forEach(l=>l.updateMatrixWorld(!0));let a=e.cloner;a&&void 0===a.objectForSample&&"dynamic"===o.physics.rigidBody&&(a.traverseObject(s),a.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let s,a=!n.fromCreate&&"dynamic"===o.physics.rigidBody||n.fromCreate&&n.dynamic;a?(s=fr.RigidBodyDesc.dynamic(),s.setLinearDamping(o.physics.damping).setAngularDamping(o.physics.damping).setAdditionalMass(1e-9).setGravityScale(o.physics.gravityScale).enabledRotations(...o.physics.enabledRotation).enabledTranslations(...o.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(s=fr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):s=fr.RigidBodyDesc.fixed();let l=pg(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Ds,Wd,zf),e.position0=Ds.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Wd.clone(),Ds.divideScalar(this.pixelsPerMeter),s.setTranslation(Ds.x,Ds.y,Ds.z).setRotation(Wd),r?l?.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l?.scale(zf.x/this.pixelsPerMeter,zf.y/this.pixelsPerMeter,zf.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s);a&&this.rigidBodyToMesh.set(c.handle,[e,zf.clone(),o.physics.fusedBody]);let d=!(void 0===o.geometry||"SubdivGeometry"===o.geometry.type||"NonParametricGeometry"===o.geometry.type||"BooleanGeometry"===o.geometry.type||"VectorGeometry"===o.geometry.type||"StarGeometry"===o.geometry.type||"RectangleGeometry"===o.geometry.type||"EllipseGeometry"===o.geometry.type||"TriangleGeometry"===o.geometry.type||"TorusGeometry"===o.geometry.type||"HelixGeometry"===o.geometry.type);try{this.addCollider(c,o.physics,l,t,d)}catch{try{this.addCollider(c,o.physics,l,t,!1)}catch(h){console.error(h)}}e.rigidBody=c}}addBoundsTree(e){let t=[];if(void 0!==e.geometry?.getAttribute("position")&&e.geometry?.getAttribute("position").count>0&&t.push(lp(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=pg(t,!1);e.bvhGeometry=n,n.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new S_(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,n,i,r=!0){if(0===n?.getAttribute("position").count||0===n?.getIndex()?.count)return;let o;n&&(o="trimesh"===t.colliderType?fr.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):fr.ColliderDesc.convexMesh(n.getAttribute("position").array,r?n.getIndex().array:void 0)),o.setFrictionCombineRule(fr.CoefficientCombineRule.Average).setRestitutionCombineRule(fr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let s=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e);this.sharedGameControlGlobals.colliderToEntity.set(s.handle,i),this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid]?.some(a=>"scene"===a.target)&&s.setActiveEvents(fr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(n,i)=>{if(0===i)return;let r;if(n instanceof Ld){if(!n.objectForSample)return!0===n.object.dataPatched.physics.fusedBody&&"dynamic"===n.object.dataPatched.physics.rigidBody||void 0;if(n.objectForSample.dataPatched.physics.fusedBody)return;r=n.object}else if(n instanceof Qa)r=n.object;else if(r=n,r.dataPatched.cloner?.hideBase)return!0;let o=r.dataPatched;if("visibility"===o.physics.enabled?!o.visible:!o.physics.enabled)return!0;1===i?e.hasNonUniformScale?n.matrixWorld.multiplyMatrices(e.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let s=n.geometry;void 0!==s?.getAttribute("position")&&t.push(lp(s,n.matrixWorld))}}activate(e){if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,n=!1,i=5,r=8,o=9,s="drag",a=this.page.data.publish.gameControlObject,l=null!==a?this.page.find(a):null,c=null;if(l)for(let p of l.data.events){if(p.data.disabled||"GameControl"!==p.data.type)continue;let g=l;for(;this.usePhysics&&null!==(g=g.parent)?.parent;);p.data.collisionEnabled&&(this.needsCollisionDetection=!0),null===c&&(c=p.data)}if(this.page.traverseEntity(p=>{for(let g of p.dataPatched.events)if(!1===g.data.disabled&&"Trigger"===g.data.type)return this.needsCollisionDetection=!0,!0}),l&&c&&(!0===l.data.visible||!0===l.data.physics.enabled)){n=n||c.camera===t.uuid||l.uuid===t.uuid;let p=new GK(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=p,i=c.joystickPosLoc,r=c.joystickRotLoc,o=c.jumpTouchButtonLoc,s=c.rotByTouch,fc&&c.touchControl&&(this.joystickToGameControls[i]="pos","walk"===c.moveMode&&(this.joystickToGameControls[o]="jmp"),"joystick"===s&&(this.joystickToGameControls[r]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let p=this.gameControl.data;if(!this.navigationMeshWrapper){let g;this.navigationMeshWrapper=new class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=n=>{if(1!==ci.length)return;let{raycaster:i,page:r}=this.eventContext;this.eventContext.updateRaycaster(n);let o=r.raycastWithClones(i);if(0!==o.length){if(this.gameControl){let s=Y8e.copy(this.gameControl.colliderWorldPosition);s.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(s,o[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(n,i)=>r=>{let o;if(r instanceof Ld){if(!r.objectForSample)return!0===r.object.dataPatched.physics.fusedBody&&"dynamic"===r.object.dataPatched.physics.rigidBody||void 0;if(r.objectForSample.dataPatched.physics.fusedBody)return;o=r.object}else if(r instanceof Qa)o=r.object;else if(o=r,!1===o.dataPatched.cloner?.disabled&&o.dataPatched.cloner?.hideBase&&!0!==o.dataPatched.physics?.fusedBody)return!0;if(i&&!o.userData.navmesh)return;let s=o.dataPatched;if(!s.visible&&!0!==s.physics?.enabled)return!0;r.updateMatrixWorldSVD();let a=sS(s),l=o.userData.hasDestroy,c=o.userData.hasDrag,d=!1,h=!1;for(let p of s.events)!0!==p.data.disabled&&("GameControl"===p.data.type?d=!0:"Follow"===p.data.type&&(h=!0));if(d||a||h||l||c)return!0;if(this.usePhysics&&"dynamic"===s.physics?.rigidBody){if(this.usePhysics&&s.physics?.fusedBody)return!0}else if("geometry"in r&&r.geometry&&n.push(lp(r.geometry,r.matrixWorld)),this.usePhysics&&s.physics?.fusedBody)return r.traverseObject((p,g)=>{if(0===g)return;let v;if(p instanceof Ld){if(!p.objectForSample)return!0===p.object.dataPatched.physics.fusedBody&&"dynamic"===p.object.dataPatched.physics.rigidBody||void 0;if(p.objectForSample.dataPatched.physics.fusedBody)return;v=p.object}else if(p instanceof Qa)v=p.object;else if(v=p,p.dataPatched.cloner?.hideBase)return!0;let y=v.dataPatched;if(!y.visible&&!0!==y.physics?.enabled)return!0;"geometry"in p&&p.geometry&&n.push(lp(p.geometry,p.matrixWorld))}),!0},this.traverseNoPhysics=(n,i)=>r=>{let o;if(r instanceof Ld)return;o=r instanceof Qa?r.object:r;let s=o.dataPatched;if("visibility"===s.physics.enabled?!s.visible:!s.physics.enabled)return!0;if(i&&!o.userData.navmesh)return;let a=r.geometry,l=!0===o.userData.hasDestroy,c=!0===o.userData.hasDrag;if(sS(s)||l||c||o.dataPatched.events.some(d=>!0!==d.data.disabled&&"GameControl"===d.data.type))return!0;a&&n.push(lp(a,r.matrixWorld))},this.navmeshWasm=rZ,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport('https://unpkg.com/@splinetool/runtime@1.9.35/build/' + 'navmesh.js'),\n\t\tfetch('https://unpkg.com/@splinetool/navmesh-wasm@1.9.35/build/' + 'navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n":"\n(async function() {\n\tconst [wasmImport, wasmBinary] = await Promise.all([\n\t\timport(self.location.origin + '/_libraries/navmesh.js'),\n\t\tfetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),\n\t]);\n\tconst wasmModule = wasmImport.default;\n\tself.module = await wasmModule({ wasmBinary });\n\tpostMessage('ready');\n})();\n")+"\n\nonmessage = function(messageEvent) {\n\tconst meshData = messageEvent.data;\n\tconst positions = meshData[0];\n\tconst offset = meshData[1];\n\tconst indices = meshData[2];\n\tconst indicesLength = meshData[3];\n\tconst parameters = meshData[4];\n\n\tconst module = self.module;\n\tconst rc = new module.rcConfig();\n\trc.cs = parameters.cs;\n\trc.ch = parameters.ch;\n\trc.borderSize = parameters.borderSize ? parameters.borderSize : 0;\n\trc.tileSize = parameters.tileSize ? parameters.tileSize : 0;\n\trc.walkableSlopeAngle = parameters.walkableSlopeAngle;\n\trc.walkableHeight = parameters.walkableHeight;\n\trc.walkableClimb = parameters.walkableClimb;\n\trc.walkableRadius = parameters.walkableRadius;\n\trc.maxEdgeLen = parameters.maxEdgeLen;\n\trc.maxSimplificationError = parameters.maxSimplificationError;\n\trc.minRegionArea = parameters.minRegionArea;\n\trc.mergeRegionArea = parameters.mergeRegionArea;\n\trc.maxVertsPerPoly = parameters.maxVertsPerPoly;\n\trc.detailSampleDist = parameters.detailSampleDist;\n\trc.detailSampleMaxError = parameters.detailSampleMaxError;\n\n\tif (!self.navMesh) {\n\t\tself.navMesh = new module.NavMesh();\n\t}\n\tself.navMesh.build(positions, offset, indices, indicesLength, rc);\n\n\tconst navmeshData = navMesh.getNavmeshData();\n\tconst arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);\n\tconst ret = new Uint8Array(navmeshData.size);\n\tret.set(arrView);\n\tnavMesh.freeNavmeshData(navmeshData);\n\n\tpostMessage(ret);\n}\n"])),this._worker=new Worker(this._workerURL)}init(e,t,n){this.gameControl=t,this.eventContext=n,this.setDefaultQueryExtent((new te).setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(n.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,n){t.objects.forEach(l=>{let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=!0}),c.cloner?.traverseObject(d=>{d.userData.navmesh=!0})});let i=[],r=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,"custom"===t.zones);if(e.traverseChildren(r),t.objects.forEach(l=>{let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=void 0}),c.cloner?.traverseObject(d=>{d.userData.navmesh=void 0})}),0===i.length)return!1;let o=pg(i),{positions:s,triIndices:a}=c2(o.getAttribute("position"),o.getIndex());return this._worker.postMessage([s,s.length/3,a,a.length,{...q8e,...t}]),this._worker.onmessage=n,!0}createDebugNavGeometry(){let e,t,n=this.navMesh.getDebugNavMesh(),i=n.getTriangleCount(),r=new Uint32Array(3*i),o=new Float32Array(3*i*3);for(e=0;e<3*i;e++)r[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let a=n.getTriangle(e).getPoint(t);o[9*e+3*t+0]=a.x,o[9*e+3*t+1]=a.y,o[9*e+3*t+2]=a.z}let s=new Xn;return s.setIndex(new ui(r,1)),s.setAttribute("position",new ui(o,3)),s}getClosestPoint(e){return rr.x=e.x,rr.y=e.y,rr.z=e.z,this.navMesh.getClosestPoint(rr)}getClosestPointToRef(e,t){rr.x=e.x,rr.y=e.y,rr.z=e.z;let n=this.navMesh.getClosestPoint(rr);t.set(n.x,n.y,n.z)}getRandomPointAround(e,t){return rr.x=e.x,rr.y=e.y,rr.z=e.z,this.navMesh.getRandomPointAround(rr,t)}getRandomPointAroundToRef(e,t,n){rr.x=e.x,rr.y=e.y,rr.z=e.z;let i=this.navMesh.getRandomPointAround(rr,t);n.set(i.x,i.y,i.z)}moveAlong(e,t){return rr.x=e.x,rr.y=e.y,rr.z=e.z,Ia.x=t.x,Ia.y=t.y,Ia.z=t.z,this.navMesh.moveAlong(rr,Ia)}moveAlongToRef(e,t,n){return rr.x=e.x,rr.y=e.y,rr.z=e.z,Ia.x=t.x,Ia.y=t.y,Ia.z=t.z,this.navMesh.moveAlong(rr,Ia)}computePath(e,t){let n=this.getClosestPoint(t);if(Ia.x=n.x,Ia.y=n.y,Ia.z=n.z,Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let i=this.navMesh.computePath(rr,Ia),r=i.getPointCount(),o=[];for(let s=0;s<r;s++){let a=i.getPoint(s);o.push(new te(a.x,a.y,a.z))}return o}createCrowd(e,t){return new class{constructor(e,t,n){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,n,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,n){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let r=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(n),this.agents.push(r),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new te(0,0,0)),r}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let n=this.crowd.getAgentPosition(e);t.set(n.x,n.y,n.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let n=this.crowd.getAgentVelocity(e);t.set(n.x,n.y,n.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let n=this.crowd.getAgentNextTargetPath(e);t.set(n.x,n.y,n.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let n=this.agents.indexOf(e);n>-1&&(this._agentDestinationArmed[n]=!0,this._agentDestination[n].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let n=this.crowd.getAgentParameters(e);void 0!==t.radius&&(n.radius=t.radius),void 0!==t.height&&(n.height=t.height),void 0!==t.maxAcceleration&&(n.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(n.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(n.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(n.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(n.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,n)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),!(e<=.001)){{let i=Math.floor(e/.016666666666666666);i>10&&(i=10),i<1&&(i=1);let r=e/i;for(let o=0;o<i;o++)this.crowd.update(r)}for(let i=0;i<this.agents.length;i++){let r=this.agents[i],o=this.getAgentPosition(r);if(this.transforms[i].copy(o),this._agentDestinationArmed[i]){let s=o.x-this._agentDestination[i].x,a=o.z-this._agentDestination[i].z,l=this.reachRadii[i],d=this._agentDestination[i].y+this.reachRadii[i],h=s*s+a*a;o.y>this._agentDestination[i].y-this.reachRadii[i]&&o.y<d&&h<l*l&&(this.onReachTarget(r,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,n=this.crowd.getCorners(e),i=n.getPointCount(),r=[];for(t=0;t<i;t++){let o=n.getPoint(t);r.push(new te(o.x,o.y,o.z))}return r}dispose(){this.crowd.destroy()}}(this,e,t)}setDefaultQueryExtent(e){rr.x=e.x,rr.y=e.y,rr.z=e.z,this.navMesh.setDefaultQueryExtent(rr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,n=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,n,t);i.set(e);let r=new this.navmeshWasm.NavmeshData;r.dataPointer=i.byteOffset,r.size=e.length,this.navMesh.buildFromNavmeshData(r),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),n=new Uint8Array(e.size);return n.set(t),this.navMesh.freeNavmeshData(e),n}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),this.eventContext?.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,n){return rr.x=e.x,rr.y=e.y,rr.z=e.z,this.navMesh.addCylinderObstacle(rr,t,n)}addBoxObstacle(e,t,n){return rr.x=e.x,rr.y=e.y,rr.z=e.z,Ia.x=t.x,Ia.y=t.y,Ia.z=t.z,this.navMesh.addBoxObstacle(rr,Ia,n)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return void 0!==this.navmeshWasm}}(this.usePhysics,this.isExport),g="sphere"===p.collider.type?2*p.collider.radius:p.collider.height,g=Math.floor(g/p.navmesh.ch-1),this.navigationMeshWrapper.init({...p.navmesh,walkableHeight:g},this.gameControl,this.eventContext)}}if(!1===n){let{enableRotate:p,enablePan:g,enableZoom:v,autoRotate:y,hoverRotatePanMode:b}=this.eventManager.publish.orbitControls;(p||g||v||y||0!==b)&&(this.orbitControls=new lZ(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let d=this.renderer.domElement.width/this.renderer.getPixelRatio(),h=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((p,g)=>{let v=document.body.appendChild(document.createElement("div")),[y,b,P]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[g],S=(d-5*y)/4+y,O={},A="jmp"===p,H=A?0:y;g<10?(g<5?O.top=H/2:O.bottom=H/2,O.left=H/2+g%5*S):10===g?(O.left=H/2,O.top=h/2):(O.right=H/2,O.top=h/2),O.top?O.top-=b[1]:O.bottom+=b[1],O.left?O.left+=b[0]:O.right-=b[0];for(let Y in O)O[Y]+="px";if(A){let Y=v.appendChild(document.createElement("div"));Object.assign(Y.style,O,{position:"absolute",width:y+"px",height:y+"px",backgroundColor:`rgba(255,255,255,${"show"===P?.4:0})`,zIndex:"9999",borderRadius:y+"px",border:"show"===P?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let Z=y/16*16*.4;return"show"===P&&(Y.innerHTML=`\n\t\t\t\t\t\t<svg width="${Z}" height="${.4*y}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t`),Y.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),Y.addEventListener("touchend",ee=>ee.preventDefault()),void(this.joysticks[g]=[void 0,v])}let U={zone:v,mode:"static",position:O,size:y};"hide"===P&&(U.restOpacity=0);let X=function(e){return RQ.create(e)}(U);X.on("move",(Y,Z)=>{let ee=this.gameControl;"pos"===p?Z.force<.2?ee.moveForce=0:(ee.movementState.movePosZ=Math.sin(-Z.angle.radian),ee.movementState.movePosX=Math.cos(-Z.angle.radian),ee.movementState.run=Z.force>1.2?1:0,ee.moveForce=Z.force<.3?(Z.force-.2)/.1:1):"rot"===p&&(Z.force<.2?ee.rotForce=0:(ee.movementState.rotPosX=Z.vector.y,ee.movementState.rotPosY=-Z.vector.x,ee.rotForce=Z.force<.3?(Z.force-.2)/.1:1)),this.requestRender()}),X.on("end",(Y,Z)=>{let ee=this.gameControl;"pos"===p?(ee.movementState.movePosZ=0,ee.movementState.movePosX=0,ee.moveForce=1):"rot"===p&&(ee.movementState.rotPosX=0,ee.movementState.rotPosY=0,ee.rotForce=1)}),this.joysticks[g]=[X,v]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(p=>p.initialDisabled=!1)},80)}initPhysics(){this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=new fr.World(new fr.Vector3(0,this.gravity,0)),this.events=new fr.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(s=>{let a;if(s instanceof Ld){if(!s.objectForSample)return!0===s.object.dataPatched.physics.fusedBody&&"dynamic"===s.object.dataPatched.physics.rigidBody||void 0;if(s.objectForSample.dataPatched.physics.fusedBody)return;a=s.object}else if(s instanceof Qa)a=s.object;else{if(s instanceof z2||s instanceof S2)return;if(a=s,!1===a.dataPatched.cloner?.disabled&&a.dataPatched.cloner?.hideBase&&!0!==a.dataPatched.physics?.fusedBody)return!0}let c,l=a.dataPatched;for(let b of l.events)!0!==b.data.disabled&&"GameControl"===b.data.type&&(c=b.data);if(!l.physics||("visibility"===l.physics.enabled?!l.visible:!l.physics.enabled))return!0;s.updateMatrixWorldSVD();let d=sS(l),h=!1,p=a.userData.hasDestroy,g=a.userData.hasDrag,v=!1;for(let b of l.events)if(!0!==b.data.disabled)if("Collision"===b.data.type){h=!0;let P=new B8e(b.id,b.data,a,this.page,this.sharedAssets,this.eventManager);P.initialDisabled=!0,this.collisionEvents.push(P),this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid].every(S=>S.id!==b.id)?this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid].push(P):this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid]=[P]}else if("Follow"===b.data.type){v=!0;let P=b.data.target;s.traverseVisible(S=>{S.userData.isFollowingObj=P})}"dynamic"===l.physics.rigidBody&&!1===l.physics.fusedBody&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let y=s.geometry;if(void 0!==c){let b=fr.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(Ds,Wd,zf),s.position0=Ds.clone().divideScalar(this.pixelsPerMeter),s.rotation0=Wd.clone(),Ds.divideScalar(this.pixelsPerMeter),b.setTranslation(Ds.x,Ds.y,Ds.z).setRotation(Wd);let S,P=this.sharedGameControlGlobals.rapierWorld.createRigidBody(b);s.rigidBody=P,S="sphere"===c.collider.type?fr.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):"capsule"===c.collider.type?fr.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):fr.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),S.setFrictionCombineRule(fr.CoefficientCombineRule.Average).setRestitutionCombineRule(fr.CoefficientCombineRule.Average).setDensity(l.physics.density).setFriction(l.physics.friction).setRestitution(l.physics.restitution);let O=this.sharedGameControlGlobals.rapierWorld.createCollider(S,P);this.sharedGameControlGlobals.colliderToEntity.set(O.handle,a),Ds.fromArray(c.collider.position).multiply(zf.setFromMatrixScale(a.matrixWorld)).divideScalar(this.pixelsPerMeter),O.setTranslationWrtParent(Ds);let A=(new _i).setFromEuler((new js).setFromVector3((new te).fromArray(c.collider.rotation)));O.setRotationWrtParent(A),O.setActiveEvents(fr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(a,!0)}else"dynamic"===l.physics.rigidBody||d||v||p||g||h?(this.addRigidBody(s,a,{hasFollow:v,hasTransformAnim:d,hasDrag:g}),this.generateSensorColliderDescs(a,l.physics.fusedBody)):(y&&e.push(lp(y,s.matrixWorld)),l.physics.fusedBody&&s.traverseObject((b,P)=>{if(0===P)return;let S;if(b instanceof Ld){if(!b.objectForSample)return!0===b.object.dataPatched.physics.fusedBody&&"dynamic"===b.object.dataPatched.physics.rigidBody||void 0;if(b.objectForSample.dataPatched.physics.fusedBody)return;S=b.object}else{if(b instanceof z2||b instanceof S2)return;if(b instanceof Qa)S=b.object;else if(S=b,S.dataPatched.cloner?.hideBase)return!0}let O=S.dataPatched;if("visibility"===O.physics.enabled?!O.visible:!O.physics.enabled)return!0;let A=b.geometry;void 0!==A?.getAttribute("position")&&e.push(lp(A,b.matrixWorld))}),this.generateSensorColliderDescs(a,l.physics.fusedBody,t));return!(!0!==l.physics?.fusedBody&&!c)||void 0}),0===e.length)return;let n=pg(e);n.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=fr.RigidBodyDesc.fixed(),r=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),o=fr.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array).setFrictionCombineRule(fr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(fr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(o,r);for(let[s,a]of t){let l=this.sharedGameControlGlobals.rapierWorld.createCollider(s,r);this.sensorToTriggerEvent[l.handle]=a}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if("Trigger"===t.data.type&&!0!==t.data.disabled){let n=new dZ(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=(new qt).compose(qd.fromArray(t.data.position),I1.setFromEuler(hZ.fromArray(t.data.rotation)),U4);if("box"===t.data.triggerZone){let r=new ls;r.min.fromArray(t.data.size).multiplyScalar(-.5),r.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([r,i,e,n])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,n])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){if(this.isEnabled){this.isEnabled=!1,this.page.traverse(e=>{let t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)}),this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),this.gameControl?.reset(),this.gameControl?.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([e,t])=>{e?.destroy(),t.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),this.navigationMeshWrapper?.dispose(),this.navigationMeshWrapper=void 0;for(let e of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))e.forEach(t=>t.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,n){if(!this.isEnabled)return!0;let i=!0;if(void 0!==this.orbitControls&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):2===this.initializationCounter&&this.gameControl&&(i=!this.gameControl.update(e,t,n)&&i),!1===this.usePhysics&&this.checkTrigger(),this.usePhysics){let r=.016666666666666666;if(0===e)i=this.stepPhysics()&&i;else{let o=e/1e3;o<r&&o>.55*r&&(o=r),this.accumulator+=o;let s=performance.now(),a=0,l=6;for(;this.accumulator>=r&&a<l&&(i=this.stepPhysics()&&i,this.accumulator-=r,a++,!(performance.now()-s>1e3*r)););this.accumulator=this.accumulator%r}}return i}stepPhysics(){for(let e of this.sharedGameControlGlobals.entitiesWithTransformAnim){(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Ds,Wd,zf),B4.setFromQuaternion(Wd);let t=e;void 0===t.prevR?(t.prevR=B4.clone(),t.prevT=Ds.clone()):(t.prevR.copy(B4),t.prevT.copy(Ds)),e.rigidBody&&(e.rigidBody.setNextKinematicTranslation(Ds.divideScalar(this.pixelsPerMeter)),e.rigidBody.setNextKinematicRotation(Wd))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),this.events?.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,n){let r,i=this.sharedGameControlGlobals.rapierWorld?.getCollider(n)._parent;if(t.cloner)for(let o of t.cloner.children)if(o.rigidBody===i){r=o;break}e.dispatch(r),t.dispatchEvent(V4)}updateUseWindowEvents(e){this.orbitControls?.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,n){let i=uZ.copy(e.matrixWorld).invert();e.traverseEntity((r,o)=>{if(!1===t&&1===o)return!0;for(let s of r.dataPatched.events)if("Trigger"===s.data.type&&!0!==s.data.disabled){let l,a=new dZ(s.id,s.data,r,this.page,this.sharedAssets,this.eventManager);if(l="box"===s.data.triggerZone?fr.ColliderDesc.cuboid(...s.data.size.map(c=>c/(2*this.pixelsPerMeter))):fr.ColliderDesc.ball(s.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(fr.ActiveEvents.COLLISION_EVENTS),qd.fromArray(s.data.position),I1.setFromEuler(hZ.fromArray(s.data.rotation)),oS.compose(qd,I1,U4).premultiply(r.matrixWorld),n?(oS.decompose(qd,I1,z4),l.setActiveCollisionTypes(fr.ActiveCollisionTypes.KINEMATIC_FIXED|fr.ActiveCollisionTypes.DYNAMIC_FIXED)):(oS.premultiply(i).decompose(qd,I1,z4),e.rigidBody.bodyType()===fr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===fr.RigidBodyType.Fixed?l.setActiveCollisionTypes(fr.ActiveCollisionTypes.KINEMATIC_FIXED|fr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(fr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|fr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),qd.divideScalar(this.pixelsPerMeter),l.setTranslation(qd.x,qd.y,qd.z),l.setRotation(I1),n)n.push([l,a]);else{let c=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[c.handle]=a}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[n,i,r,o]=this.sharedGameControlGlobals.triggers[t];for(let s=0;s<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;s++){let a=this.sharedGameControlGlobals.entitiesWithTransformAnim[s];if(r===a||!1===o.isValidTriggeringObject(dr.is(a)?a:a.object))continue;let l=uZ.copy(r.matrixWorld).decompose(qd,pZ,z4).compose(qd,pZ,U4).multiply(i),c=oS.copy(a.matrixWorld).invert().multiply(l);n instanceof ls?e=a.bvhGeometry.boundsTree.intersectsBox(n,c):(j4.radius=n,j4.center.setFromMatrixPosition(c),e=a.bvhGeometry.boundsTree.intersectsSphere(j4)),e?-1===o.currentIntersectedObjects.indexOf(a)&&(o.currentIntersectedObjects.push(a),o.dispatch(),r.dispatchEvent(o9e)):o.currentIntersectedObjects=o.currentIntersectedObjects.filter(d=>d!==a)}}}}(c),i._animationControls=new class{constructor(e,t,n,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=n,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=r=>{"Empty"===r.data.type&&r.data.animations&&r.data.animations.forEach((o,s)=>{let a=o[0]+"/";if(Array.isArray(r.identity)?a+=r.identity[0]:a+=r.uuid,this.clipIdToAction[a])return;let l=JT.parse(JSON.parse(o[2]));r.animations[s]=l;let c=this.mixer.clipAction(l,r);!1===fZ&&(Object.getPrototypeOf(c)._updateTime=l9e,fZ=!0),c.clampWhenFinished=!0,this.clipIdToAction[a]=c})},this.mixer=new rMe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let n=this.scene.find(t);if(!n)return;let i=n.animations.find(o=>o.uuid===e);if(!i)return;let r=this.clipIdToAction[e];!r||(r.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],n.animations=n.animations.filter(o=>o.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=2201}),this.mixer.stopAllAction(),this.requestRender()}play(e){let n=this.clipIdToAction[e.clipId+"/"+e.object];if(n)return e&&(e.repeat>=0&&(n.repetitions=e.repeat+1),"pingpong"===e.direction&&0!==e.repeat&&(n.loop=2202)),n.play(),n.paused=!1,this.requestRender(),n}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){if(this.needsUpdate)this.needsUpdate=!1;else if(!1===this.isPlaying||this.animationInspectorState?.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return SK(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let n=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),n&&(this.clipIdToAction[t].paused=!0)}}(i._scene,i._requestRenderAutoMode),i._eventManager=new class{constructor(e,t,n,i,r){this.publish=e,this.controlsManager=t,this.animationControls=n,this.eventContext=i,this.sharedVariables=r,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=o=>{let s=window.parent!==window,a=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(o.touches.length>1||this.preventTouchScroll||!1===s&&!1===a)&&o.preventDefault()},this.onMouseWheelPreventScroll=o=>{this.preventScroll&&o.preventDefault()},this.onMouseMove=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:o.buttons>0}},this.onMouseDown=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!0}},this.onMouseUp=o=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(o),pressed:!1}},this.getMousePosition=o=>{let{domRect:s}=this.eventContext,{pageX:a,pageY:l}=o.touches?.length>0?o.touches[0]:o;return{x:a-(s.left+window.scrollX),y:l-(s.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(e=!1){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new a8e(this.eventContext),VariableChange:new z8e(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new _9e(this.eventContext,this),WEBHOOK:new C9e(this.eventContext,this),AIAssistantListener:new D9e(this.eventContext,this),AIAssistantTrigger:new T9e(this.eventContext,this),Conditional:new f8e(this.eventContext,this),Start:new L8e(this.eventContext,this),Basic:new c8e(this.eventContext,this,this.needsRaycast),MouseHover:new I8e(this.eventContext,this),Scroll:new N8e(this.eventContext,this),Follow:new M8e(this.eventContext,this),DragDrop:new b8e(this.eventContext,this),LookAt:new D8e(this.eventContext),Resize:new b9e(this.eventContext,this),Textfields:new E9e(this.eventContext,this)};let{page:t,domElement:n}=this.eventContext;this.hideCursor&&(n.style.cursor="none"),t.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),n.addEventListener("wheel",this.onMouseWheelPreventScroll),n.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||(this.eventContext.sharedAssets.openAIRealtime?.connect(),this.eventContext.sharedAssets.openAIRealtime?.start())}deactivate(e=!1){if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:n}=this.eventContext;if(n.style.cursor="",Object.values(this.handlers).forEach(i=>i.disconnect()),this.controlsManager.gameControl?.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(i=>{i.removeEventListener("requestRender",this.requestRender),i.destroyedInAction=!1}),n.removeEventListener("touchmove",this.onTouchMovePreventScroll),n.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),!e){let i=this.eventContext.sharedAssets.openAIRealtime;i?.disconnect(),i?.stop().then(()=>{i?.disconnect()})}}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=n=>{if("Conditional"===n.data.type&&(n.data.ifActions.forEach(t),n.data.elseActions.forEach(t)),"Conditional"===n.data.type||"SetVariable"===n.data.type)for(let i of"Conditional"===n.data.type?n.data.condition:n.data.expression)"id"in i&&Array.isArray(i.id)&&("mouse"===i.id[0]&&(this.needsMouse=!0),"raycast"===i.id[0]&&(this.needsRaycast=!0));"DynamicVariablePlay"===n.data.type&&""!==n.data.variableId&&("Play"===n.data.mode||"PlayPause"===n.data.mode||"Toggle"===n.data.mode)&&e.setDynamicVariablePlayState(n.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(n=>{if(n.data?.events.length)for(let i of n.data.events)if("VariableChange"===i.data.type&&("mouseProperty"===i.data.variableId&&(this.needsMouse=!0),"raycastProperty"===i.data.variableId&&(this.needsRaycast=!0)),"Conditional"===i.data.type)for(let r of["inActions","outActions"])i.data[r].forEach(t);else if("DragDrop"===i.data.type)for(let r of["drag","drop"])i.data.dragDropActions[r].forEach(t);else if("GameControl"===i.data.type)for(let r of["idle","move","jump","run"])i.data.gameActions[r].forEach(t);else if("Resize"===i.data.type)for(let r of i.data.breakpoints)r.data.actions.forEach(t);else"LookAt"===i.data.type||"API"===i.data.type||i.data.actions.forEach(t)})}}(r.scene.publish,i._controls,i._animationControls,c,r.shared.variables),i._eventManager.activate(),i._controls.activate(i._eventManager)}i._resize(),i._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(i._sharedAssetsManager.getImageLoadPromises()).then(()=>{i._resize(!0)}),void 0!==n&&i.setVariables(n),0===i.dt&&(i.render(performance.now()),setTimeout(()=>{i._renderer?.setAnimationLoop(i.render)},0)),i._resizeObserverTimeout=setTimeout(()=>{!i._resizeObserver&&i.canvas.parentElement&&(i._resizeObserver=new ResizeObserver(()=>{i._viewportWidth=i.canvas.clientWidth,i._viewportHeight=i.canvas.clientHeight,i._debouncedResize()}),i._resizeObserver.observe(i.canvas.parentElement))},300),document.addEventListener("scroll",i._onScroll)})()}setVariables(e){if(void 0!==this._data){let t=Object.entries(e);for(let[n,i]of t)this.setVariable(n,i)}}setVariable(e,t){let n=this._getVariableByName(e);if(n&&!("dynamicVariableType"in n.data)){let i=t;"number"==typeof n.data.value?i="number"==typeof t?t:"boolean"==typeof t?!0===t?1:0:parseFloat(t):"boolean"==typeof n.data.value?i="number"==typeof t?!!t:"boolean"==typeof t?t:"false"!==t.toLocaleLowerCase()&&!!t:"string"!=typeof n.data.value&&void 0!==n.data.value.textValue&&(i=t.toString()),this._sharedAssetsManager?.updateVariable(n.id,"string"==typeof i?{textValue:i}:i),this.requestRender(),this._requestRenderAutoMode()}else void 0===n?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in n.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{void 0===e[t.data.name]&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let n=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(n)}}_getVariableValue(e){return"string"!=typeof e&&Oa.isTextValue(e)?Oa.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(n=>n.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){let t=this._scene?.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){let t=this._scene?.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){let e=[];return this._scene?.traverseEntity(t=>{if(!(t.uuid===Lv||this._scene.isInvisibleObjects(t)||t instanceof ua)){let n=this._createProxyObject(t);n&&e.push(n)}}),e}getSplineEvents(){return this._eventManager?.handlers?.Spline.splineEvents}emitEvent(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEvent(e)}emitEventReverse(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){this._controls?.orbitControls instanceof lZ&&this._controls?.orbitControls.setZoom(e)}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){let{r:t,g:n,b:i,a:r}={r:0,g:0,b:0,a:1},o=new Da(t,n,i,r);try{o.setStyle(e)}catch{console.error("This is not a valid css color",e)}this._scene?.activePage.setBackgroundColor(o),this._requestRenderAutoMode()}dispose(){this.disposed=!0,this._eventManager?.deactivate(),this._scene?.dispose(),this._sharedAssetsManager?.dispose(),this._proxyObjectCache.forEach(e=>{zH.unsubscribe(e)}),this._variablesCache.clear(),this._renderer?.setAnimationLoop(null),this._renderer?.dispose(),this._renderer=void 0,this._sharedAssetsManager?.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),void 0!==this._resizeObserverTimeout&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),this._controls?.deactivate(),this.dt=0,function GTe(e){e.removeEventListener("pointerdown",KG,!0),e.removeEventListener("pointerdown",oP,!0),e.removeEventListener("pointermove",oP,!0),e.removeEventListener("pointerup",kv,!0),e.removeEventListener("pointercancel",kv,!0),e.removeEventListener("pointerleave",kv,!0),window.removeEventListener("keydown",ZG,!0),window.removeEventListener("keyup",JG,!0)}(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){this._isPaused||(this._renderer?.setAnimationLoop(null),this._isPaused=!0,this._eventManager?.pause(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){!this._isPaused||(this._isPaused=!1,this._eventManager?.resume(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!0),this._renderer?.setAnimationLoop(this.render))}setGlobalEvents(e){this._eventManager?.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){if(null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(r=>{r instanceof ua&&(t=r.name)});let i=zH({name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof ua||e instanceof ZR?void 0:e.parent?.uuid,emitEvent(r){e.dispatchEvent({type:"userEvent",eventName:r})},emitEventReverse(r){e.dispatchEvent({type:"userEvent",eventName:r,reverse:!0})}},(r,o)=>{"object"!=typeof e[r]&&Object.getOwnPropertyDescriptor(e,r)?.writable&&(e[r]=o),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}setUIWasmUrl(e){EX.skiaWasmUrl=e}};let k1=(()=>{class e{constructor(n){this.http=n,this.getTestimonialData=i=>this.http.post(Nt_backendUrl+"/api/home/viewtestimonial",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getAlltestimonial=i=>this.http.post(Nt_backendUrl+"/api/home/alltestimonial",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getMatchDetails=i=>this.http.post(Nt_backendUrl+"/api/match/frontview",i).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),R1=(()=>{class e{constructor(n){this.http=n,this.getblogDetails=i=>this.http.post(Nt_backendUrl+"/api/blog/viewblog",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getAllblog=i=>this.http.post(Nt_backendUrl+"/api/blog/allblog",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getblogWithId=i=>this.http.post(Nt_backendUrl+"/api/blog/blogdetail",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getNextblogWithId=i=>this.http.post(Nt_backendUrl+"/api/blog/nextblogdetail",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getBlogWithString=i=>this.http.post(Nt_backendUrl+"/api/blog/searchblog",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getAllvideoBlog=i=>this.http.post(Nt_backendUrl+"/api/blog/allvideoblog",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getTagDetails=i=>this.http.post(Nt_backendUrl+"/api/blog/viewtag",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.getDownloadLink=i=>this.http.post(Nt_backendUrl+"/api/home/download",i).pipe((0,Vr.K)(o=>(0,no._)(o))),this.addInvites=i=>this.http.post(Nt_backendUrl+"/api/blog/addinvite",i).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ig=(()=>{class e{constructor(n){this.http=n,this.getAllProjects=i=>this.http.post(Nt_backendUrl+"/api/project/listprojects",i).pipe((0,Vr.K)(o=>(0,no._)(o)))}sendContactForm(n){return this.http.post(`${Nt_backendUrl}/api/project/referralmail`,n)}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const W9e=["myVideo"];function q9e(e,t){if(1&e&&(x(0,"div",141)(1,"div",142)(2,"div",143)(3,"div",144),re(4,"img",145),w()(),x(5,"div",146)(6,"div",147)(7,"p",148),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",149),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",150),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",151)(14,"div",147)(15,"p",152),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-story.png",Ce)}}function Y9e(e,t){if(1&e&&(x(0,"div",141)(1,"div",142)(2,"div",143)(3,"div",144),re(4,"img",153),w()(),x(5,"div",146)(6,"div",147)(7,"p",148),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",149),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",150),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",151)(14,"div",147)(15,"p",152),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/crystal-story.png",Ce)}}const X9e=function(e){return{width:e}};let Y4=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.limit=10,this.slides=[],this.recentslider=[],this.customOptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:3},400:{items:4},740:{items:8},940:{items:10}},nav:!1},this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:15e3,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.page=4,this.page1=5,this.invalidNumber=!1,this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$",this.submitted=!1,this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:"https://via.placeholder.com/600/92c952"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:"https://via.placeholder.com/600/771796"}],this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.reviews=[],this.reviewSlider={items:3,loop:!0,margin:20,autoplay:!0,slideTransition:"linear",autoplaySpeed:3e3,autoplayHoverPause:!0,responsive:{0:{items:1},480:{items:1},740:{items:2},991:{items:3}},dots:!1,nav:!1},this.starRating=4,this.instaLimit=9,this.instagramPost=[],this.searchText="",this.closeResult="",this.modalReference=null,this.customMediaSlider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,navSpeed:700,navText:['<i class="fas fa-arrow-left achprevious"></i>','<i class="fas fa-arrow-right achnext active"></i>'],margin:14,responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!1},this.popupslider={loop:!0,autoplay:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:['<i class="fas fa-arrow-left achprevious"></i>','<i class="fas fa-arrow-right achnext active"></i>'],margin:14,responsive:{0:{items:1},400:{items:1},740:{items:1},940:{items:1}},nav:!0},this.isPlaying=!0,this.sectionWidth=10,this.callback=(v,y)=>{y===google.maps.places.PlacesServiceStatus.OK&&(this.reviews=v.reviews.slice())},this.imagepath=Nt_backendUrl+"/public/",this.baseUrl=Nt_baseUrl+"/assets",this.get_PageMeta(),this.get_AllProjects(),this.getInstagramPosts(),this.slides.push({id:1,img:this.baseUrl+"/img/home/veritcal-images/1.jpg"},{id:2,img:this.baseUrl+"/img/home/veritcal-images/2.jpg"},{id:3,img:this.baseUrl+"/img/home/veritcal-images/3.jpg"},{id:4,img:this.baseUrl+"/img/home/veritcal-images/4.jpg"},{id:5,img:this.baseUrl+"/img/home/veritcal-images/5.jpg"},{id:6,img:this.baseUrl+"/img/home/veritcal-images/6.jpg"},{id:7,img:this.baseUrl+"/img/home/veritcal-images/7.jpg"},{id:8,img:this.baseUrl+"/img/home/veritcal-images/8.jpg"},{id:9,img:this.baseUrl+"/img/home/veritcal-images/9.jpg"},{id:10,img:this.baseUrl+"/img/home/veritcal-images/10.jpg"}),this.recentslider.push({id:1,img:this.baseUrl+"/img/home/beyou.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:2,img:this.baseUrl+"/img/home/cups.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:3,img:this.baseUrl+"/img/home/bcard22.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"},{id:4,img:this.baseUrl+"/img/home/vendetta2.webp",brandname:"BeYou",brandtag:"Branding.UI/UX.Technology"})}onScroll(n){const i=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+i/10),this.spline&&this.spline.setZoom(1,1)}isWeekend(n){const i=new Date(n.year,n.month-1,n.day);return 0===i.getDay()||6===i.getDay()}isDisabled(n,i){return n.month!==i.month}ngOnInit(){this.fetch(),document.getElementsByClassName("form-control");let i=document.getElementsByClassName("input-group");for(let s=0;s<i.length;s++)i[s].children[0].addEventListener("focus",function(){i[s].classList.add("input-group-focus")}),i[s].children[0].addEventListener("blur",function(){i[s].classList.remove("input-group-focus")});$("li").removeClass("main-menu__item--active"),$("#home").addClass("main-menu__item--active");const r=document.getElementById("canvas");this.spline=new aS(r),this.spline.load("https://prod.spline.design/0zfpbAp9XmUp3SaF/scene.splinecode").then(()=>{let s=this;this.spline.addEventListener("wheel",function(a){s.spline.setZoom(1,1)},{passive:!1}),this.spline.addEventListener("scroll",function(a){s.spline.setZoom(1,1)},{passive:!1}),this.spline.addEventListener("click",function(a){s.spline.setZoom(1,1)},{passive:!1}),this.spline.setZoom(1,1)}),window.scroll({top:0,left:0,behavior:"smooth"}),this.service=new google.maps.places.PlacesService(document.getElementById("googleReviews")),this.service.getDetails({placeId:"ChIJV7cSUslDXz4R9uz8yYTtshE",fields:["reviews"]},this.callback)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}fetch(){this.http.get(`https://jsonplaceholder.typicode.com/albums/1/photos?_start=0&_limit=${this.limit}`).subscribe(r=>this.apiData=r,r=>(0,no._)(r))}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}createRange(n){const i=[];for(let r=1;r<=n;r++)i.push(r);return i}getInstagramPosts(){this.pageservice.getInstagramPosts({limit:this.instaLimit}).subscribe(i=>{200==i.code&&(this.instagramPost=i.result,this.instagramProfile=i.profile)})}loadmorePost(){this.instaLimit=this.instaLimit+9,this.getInstagramPosts()}openCarasoulpopup(n,i){this.selectedMedia=i,"CAROUSEL_ALBUM"==i.media_type&&(this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`}))}openPopup(n){this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass-video",size:"lg",backdrop:"static"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}openMediaPopup(n,i){this.selectedMedia=i,this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(n){return n===ul.ESC?"by pressing ESC":n===ul.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}closeModal(){this.activeModal.close()}makeLinksClickable(n){if(n){let i=n.split("\n");return i=i.map(r=>(r.includes("#")&&(r=r.split(" ").map(s=>`<a href="https://instagram.com/explore/tags/${s.split("#")[1]}" target="_blank">${s}</a>`).join("")),r)),i.map(r=>`${r}</br>`).join("")}}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}ngAfterViewInit(){const n=this.videoElement.nativeElement;n.muted=!0,n.loop=!0,n.play().catch(i=>{console.log("Autoplay failed, user interaction may be required:",i)})}playInFullscreenWithAudio(){const n=this.videoElement.nativeElement;n.muted=!1,n.loop=!0,n.removeAttribute("controls"),n.play().then(()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen&&n.mozRequestFullScreen()}).catch(i=>{console.log("Error entering fullscreen with audio: ",i)})}onFullscreenChange(){const n=this.videoElement.nativeElement;document.fullscreenElement===n||document.webkitFullscreenElement===n||document.msFullscreenElement===n||document.mozFullScreenElement===n?n.play().catch(i=>{console.log("Could not play in fullscreen mode:",i)}):(n.setAttribute("controls",""),n.muted=!0)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su))},e.\u0275cmp=oi({type:e,selectors:[["app-home"]],viewQuery:function(n,i){if(1&n&&Rp(W9e,5),2&n){let r;Ur(r=jr())&&(i.videoElement=r.first)}},hostBindings:function(n,i){1&n&&St("scroll",function(o){return i.onScroll(o)},0,om)("fullscreenchange",function(o){return i.onFullscreenChange(o)},!1,sm)},decls:367,vars:31,consts:[[1,"cbanner","bannerbgcolor"],["id","canvas",1,"img-globe","floatimg"],[1,"container"],[1,"row"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","home#strategy",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo",3,"scroll"],[1,"container-fluid"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","strategy",1,"toppadding"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100","data-aos-once","true",1,"col-lg-7","col-md-6"],[1,"content","d-flex","flex-column","justify-content-center","h-100"],[1,"fontsize12","semibold"],[1,"heighlight"],[1,"position-relative","actn"],[1,"position-absolute","start-50"],["routerLink","/services",1,"cstbtn"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100","data-aos-once","true",1,"col-lg-5","col-md-6"],[1,"custom-collapse"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],["href","/about#services1","data-scroll-nav","0",1,"d-block","more","hover-underline-animation"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["href","/about#services2","data-scroll-nav","1",1,"d-block","more","hover-underline-animation"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["href","/about#services3","data-scroll-nav","2",1,"d-block","more","hover-underline-animation"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["href","/about#services4","data-scroll-nav","3",1,"d-block","more","hover-underline-animation"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["href","/about#services5","data-scroll-nav","4",1,"d-block","more","hover-underline-animation"],[1,"featuredvideo","m80"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"blocklist","section1"],[1,"col-md-12"],[1,"col","custom-col","mb-lg-5","mb-md-4","mb-4","wow","fadeInLeft"],["href","javascript:void(0)"],["alt","",1,"img-fluid",3,"src"],[1,"col","custom-col","mb-lg-5","mb-md-4","mb-4"],[1,"philosophy","position-relative"],[1,"content"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"fontsize12","semibold","linenormal"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"size90","mb-md-3","mb-sm-3","mb-2"],[1,"textcolor1"],[1,"custom-block"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-8","mbrem8"],[1,"size24","textcolor1"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-11","offset-lg-1","me-lg-0","col-md-11","col-sm-12","col-12","mx-md-auto"],[1,"imagecent","text-end"],["alt","",3,"src"],[1,"card","cardright"],["href","#",1,""],[1,"p1"],[1,"lufgalight"],[1,"cstcardright"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-11","ms-lg-0","col-md-11","col-sm-12","col-12","mx-md-auto"],[1,"imagecent"],[1,"card","cardleft"],[1,"cstcardleft"],[1,"mbrem5"],[1,"position-absolute","start-50","translate-middle","mbrem8"],["routerLink","/services",1,"cstbtn","cstbtn128"],[1,"text","text128"],[1,"success-story"],[1,"mask"],[1,"content","mbrem8"],[1,"size90"],[1,"d-block","textcolor1"],[1,"mrem55"],[3,"options"],["carouselSlide","",3,"id"],[1,"bannerdrk","creativity"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-10","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-md-6","col-sm-6"],[1,"creative"],[1,"d-md-block","d-lg-block","d-xl-block","d-xxl-block","size90"],[1,"textcolor6"],[1,"textcolor7"],[1,"barcy"],[1,"d-block","size90"],[1,"d-flex","justify-content-center","align-items-center","h-100"],[1,"mb-0"],[1,"section","bannerdrk","faqsection"],[1,"col-md-10","col-sm-11","col-11","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,""],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"d-block"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed","brdtp"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","googleReviews",2,"display","none"],["id","reviews",2,"display","none"],["id","title"],["id","reviews"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"row","justify-content-center"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","semibold","textcolor1"],[1,"size32","textcolor1","mt-0","mb30"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3"],["alt","",1,"mx-auto",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0),re(1,"canvas",1),x(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"Pixtar is a Branding"),w(),x(10,"h1",8),E(11,"And Web Development"),w(),x(12,"h1",8),E(13,"Studio in "),x(14,"span",9),E(15,"Dubai"),w()()()()(),x(16,"div",10)(17,"ul",11)(18,"li")(19,"a",12),re(20,"img",13),w()(),x(21,"li")(22,"a",14),re(23,"img",15),w()(),x(24,"li")(25,"a",16),re(26,"img",13),w()(),x(27,"li")(28,"a",17),re(29,"img",18),w()()(),x(30,"div",19)(31,"p"),E(32,"Building your business through "),w(),x(33,"p"),E(34,"creativity, is our business!"),w()()()()(),x(35,"div",20)(36,"p")(37,"a",21)(38,"span",22),E(39," See Our Work"),w(),x(40,"span",23),re(41,"i",24),w()()()()()(),re(42,"div",25),x(43,"section",26),St("scroll",function(o){return i.onScroll(o)},0,om),x(44,"div",27)(45,"div",3)(46,"div",28)(47,"div",29)(48,"video",30,31),St("click",function(){return i.playInFullscreenWithAudio()}),re(50,"source",32)(51,"source",33),E(52," Your browser does not support the video tag. "),w()()()()()(),x(53,"section",34)(54,"div",2)(55,"div",3)(56,"div",4)(57,"div",3)(58,"div",35)(59,"div",36)(60,"h6",37),E(61,"What We Offer"),w(),x(62,"p",38),E(63,"We don\u2019t just design\u2014we create harmony. With the precision of the golden ratio and the creativity of custom solutions, everything we craft is a one-of-a-kind masterpiece. "),w(),x(64,"div",39)(65,"div",40)(66,"p")(67,"a",41)(68,"span",22),E(69,"Explore Our Services"),w(),x(70,"span",23),re(71,"i",24),w()()()()()()(),x(72,"div",42)(73,"div",43)(74,"div",44)(75,"div",45)(76,"h2",46)(77,"button",47),E(78," Branding/Re-branding "),w()(),x(79,"div",48)(80,"div",49),E(81," Whether it's a birth or an evolution of a brand, nothing stands out unless it has a soul. A brand today is all about how it makes your customers feel. It's not just a logo, visual identity, or website design. but rather a cohesive system that spans across all mediums and touchpoints. We're a brand design agency offering a complete solution from naming and logo design to communications and style guides. "),x(82,"a",50),E(83,"More"),w()()()(),x(84,"div",45)(85,"h2",51)(86,"button",52),E(87," Custom Websites "),w()(),x(88,"div",53)(89,"div",49),E(90," Custom Websites Description "),x(91,"a",54),E(92,"More"),w()()()(),x(93,"div",45)(94,"h2",55)(95,"button",56),E(96," eCommerce Solutions "),w()(),x(97,"div",57)(98,"div",49),E(99," We're a web design agency creating next-level eCommerce websites on Magento 2++ by strategically blending user experience and brand storytelling. Our web designers & developers create responsive websites that feel at home on any device. Product landing pages, marketing sites, or UX UI for company intranet portals - we do it all. "),x(100,"a",58),E(101,"More"),w()()()(),x(102,"div",45)(103,"h2",59)(104,"button",60),E(105," Web Application "),w()(),x(106,"div",61)(107,"div",49),E(108," We're a digital agency that design and develop web based applications to manage business and create remote accessibility to manage operations from any where and any device. "),x(109,"a",62),E(110,"More"),w()()()(),x(111,"div",45)(112,"h2",59)(113,"button",63),E(114," Graphic Design "),w()(),x(115,"div",64)(116,"div",49),E(117," Graphic Design Description "),x(118,"a",65),E(119,"More"),w()()()()()()()()()()()(),x(120,"section",66)(121,"div",2)(122,"div",67)(123,"div",68)(124,"h6",37),E(125,"OUR CLIENTS INCLUDE\u2026"),w(),x(126,"div",3),Jr(127),x(128,"div",69)(129,"div",3)(130,"div",70)(131,"a",71),re(132,"img",72),w()(),x(133,"div",73)(134,"a",71),re(135,"img",72),w()(),x(136,"div",73)(137,"a",71),re(138,"img",72),w()(),x(139,"div",73)(140,"a",71),re(141,"img",72),w()(),x(142,"div",73)(143,"a",71),re(144,"img",72),w()(),x(145,"div",73)(146,"a",71),re(147,"img",72),w()(),x(148,"div",73)(149,"a",71),re(150,"img",72),w()(),x(151,"div",73)(152,"a",71),re(153,"img",72),w()(),x(154,"div",73)(155,"a",71),re(156,"img",72),w()(),x(157,"div",73)(158,"a",71),re(159,"img",72),w()(),x(160,"div",73)(161,"a",71),re(162,"img",72),w()(),x(163,"div",73)(164,"a",71),re(165,"img",72),w()(),x(166,"div",73)(167,"a",71),re(168,"img",72),w()(),x(169,"div",73)(170,"a",71),re(171,"img",72),w()()()(),eo(),w()()()()(),x(172,"section",74)(173,"div",2)(174,"div",3)(175,"div",4)(176,"div",75)(177,"p",76),E(178,"Our Philosophy"),w(),x(179,"h1",77)(180,"span",78),E(181,"Beauty, Balance, "),w(),x(182,"span",9),E(183,"And "),w(),x(184,"span",79),E(185," Custom Craftsmanship "),w()(),x(186,"div",3)(187,"div",80)(188,"p",81),E(189,"At Pixtar, we believe that design isn\u2019t just about aesthetics\u2014it\u2019s about creating balance, impact, and authenticity. Every project we deliver is built from the ground up with no templates\u2014because your business deserves nothing less than original."),w()(),x(190,"div",82)(191,"div",83),re(192,"img",84),x(193,"div",85)(194,"a",86)(195,"div",22)(196,"p",87),E(197,"Miniaar Bridal & Couture"),w(),x(198,"p",88),E(199,"Branding & e-Commerce Website"),w()(),x(200,"div",89)(201,"span",23),re(202,"i",24),w()()()()()(),x(203,"div",90)(204,"div",91),re(205,"img",84),x(206,"div",92)(207,"a",86)(208,"div",22)(209,"p",87),E(210,"D\u2019NOUR Dubai"),w(),x(211,"p",88),E(212,"Branding & eCommerce Website"),w()(),x(213,"div",93)(214,"span",23),re(215,"i",24),w()()()()()(),x(216,"div",82)(217,"div",83),re(218,"img",84),x(219,"div",85)(220,"a",86)(221,"div",22)(222,"p",87),E(223,"Space X Fitness"),w(),x(224,"p",88),E(225,"Branding And Website"),w()(),x(226,"div",89)(227,"span",23),re(228,"i",24),w()()()()()(),x(229,"div",90)(230,"div",91),re(231,"img",84),x(232,"div",92)(233,"a",86)(234,"div",22)(235,"p",87),E(236,"Pakhi\u2019s Handhwash"),w(),x(237,"p",88),E(238,"Branding & Packaging"),w()(),x(239,"div",93)(240,"span",23),re(241,"i",24),w()()()()()()()()()(),x(242,"div",94)(243,"div",95)(244,"p")(245,"a",96)(246,"span",97),E(247," Explore All Work"),w(),x(248,"span",23),re(249,"i",24),w()()()()()()(),x(250,"section",98)(251,"div",99),re(252,"img",84),w(),x(253,"div",2)(254,"div",3)(255,"div",67)(256,"div",100)(257,"p",37),E(258,"Client Success Stories"),w(),x(259,"h1",101),E(260,"And our "),x(261,"span",9),E(262,"Creativity "),w(),x(263,"span",102),E(264," Inspired by your story "),w()()(),x(265,"div",103)(266,"owl-carousel-o",104),Jr(267),at(268,q9e,17,1,"ng-template",105),at(269,Y9e,17,1,"ng-template",105),eo(),w()()()()()(),x(270,"section",106)(271,"div",2)(272,"div",3)(273,"div",107)(274,"div",3)(275,"div",108)(276,"div",109)(277,"p",37),E(278,"Our Promise"),w(),x(279,"h1",110)(280,"span",111),E(281," We "),w(),x(282,"span",112),E(283," Go "),w(),x(284,"span",113),E(285,"Beyond "),w()(),x(286,"h1",114),E(287,"The Limits"),re(288,"br"),E(289,"For You "),w()()(),x(290,"div",108)(291,"div",115)(292,"p",116),E(293,"Design is only part of what we do. We partner with you to solve problems, meet challenges, and grow together\u2014always with 100% transparency and trust."),w()()()()()()()(),x(294,"section",117)(295,"div",2)(296,"div",3)(297,"div",118)(298,"div",3)(299,"div",119)(300,"div",109)(301,"h1",120),E(302," What "),re(303,"br"),E(304," makes Pixtar "),re(305,"br"),E(306," Special? "),re(307,"br"),x(308,"span"),E(309," And other FAQs\u2026 "),w()()()(),x(310,"div",121)(311,"div",122)(312,"div",123)(313,"div",124)(314,"div",45)(315,"h2",46)(316,"button",125),E(317," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(318,"div",126)(319,"div",49),E(320," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(321,"div",45)(322,"h2",51)(323,"button",127),E(324," Where are you based? "),w()(),x(325,"div",128)(326,"div",49),E(327," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(328,"div",45)(329,"h2",55)(330,"button",52),E(331," How are you different from a freelance designer? "),w()(),x(332,"div",129)(333,"div",49),E(334," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(335,"div",45)(336,"h2",59)(337,"button",130),E(338," What other design magic do you offer? "),w()(),x(339,"div",131)(340,"div",49),E(341," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(342,"div",45)(343,"h2",59)(344,"button",60),E(345," Who do you usually work with? "),w()(),x(346,"div",132)(347,"div",49),E(348," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(349,"div",45)(350,"h2",59)(351,"button",133),E(352," Which platforms do you use for building websites? "),w()(),x(353,"div",134)(354,"div",49),E(355," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(356,"div",45)(357,"h2",59)(358,"button",135),E(359," I\u2019m in! When can we get started? "),w()(),x(360,"div",136)(361,"div",49),E(362," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()(),re(363,"div",137),x(364,"section",138),re(365,"div",139)(366,"div",140),w()),2&n&&(se(20),Se("src","",i.baseUrl,"/img/home/social-media/instagram.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp.svg",Ce),se(17),Je("ngStyle",Dl(29,X9e,i.sectionWidth+"%")),se(4),Se("src","",i.baseUrl,"/pixtar logo animation 6.MP4",Ce),se(1),Se("src","",i.baseUrl,"/pixtar logo animation 6.MP4",Ce),se(81),Se("src","",i.baseUrl,"/img/home/logos/dnour.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/crystal.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/miniaar.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/bni.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/angle.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/pakhis.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/drminnie.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/veddentta.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/autokoorosh.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/fractal.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/corporate.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/aetrio.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/wrae.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/beyou.svg",Ce),se(21),Se("src","",i.baseUrl,"/img/home/services/miniaar-service.jpg",Ce),se(13),Se("src","",i.baseUrl,"/img/home/services/dnour-service.jpg",Ce),se(13),Se("src","",i.baseUrl,"/img/home/services/spacex-service.jpg",Ce),se(13),Se("src","",i.baseUrl,"/img/home/services/pakhis-service.jpg",Ce),se(21),Se("src","",i.baseUrl,"/img/home/pixtar-mask.svg",Ce),se(14),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl),se(1),Je("id",i.baseUrl))},dependencies:[vm,kc,ph,Rc],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}body[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.h1[_ngcontent-%COMP%]{color:#101010;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{color:#de9b7a}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]{background-size:50%;background-position:100% 103%}}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:2%;top:26%;width:400px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:2%;width:230px;top:30%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}@keyframes float{0%{transform:translatey(0)}50%{transform:translatey(-20px)}to{transform:translatey(0)}}.cbanner[_ngcontent-%COMP%]   .floatimg[_ngcontent-%COMP%]{transform:translatey(0);animation:float 6s ease-in-out infinite}.logotext[_ngcontent-%COMP%]{position:relative;top:5px;left:-24px;font-weight:700;color:#000}.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#101010}@media (max-width: 1440px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 1024px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.banner[_ngcontent-%COMP%]{width:100%}}.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}@font-face{font-family:barcelony;src:local("barcelony"),url(barcelony.68e366dc7c859cc4.ttf) format("truetype")}.barcely[_ngcontent-%COMP%]{font-family:barcelony}.banner-left-content[_ngcontent-%COMP%]{display:flex;width:393px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-4rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:32px;font-weight:400}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:normal}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.down-arrow[_ngcontent-%COMP%]{bottom:13%}}@media (max-width: 767px){.down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.custom-collapse[_ngcontent-%COMP%]{padding:20px;overflow:hidden;border-radius:30px}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]{padding:10px}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:20px}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#1d1d1f}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{color:#de9b7a}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-bottom:1px solid #dadade;border-radius:0;font-size:28px;color:#de9b7a;font-weight:500;display:flex;align-items:center}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#de9b7a}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#de9b7a;outline:none}@media (max-width: 1366px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{margin-top:10px;color:#dadade}.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#1d1d1f;font-size:16px;font-weight:400}@media (max-width: 1199px){.custom-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]{display:inline-block;position:relative;color:#0087ca}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:2px;bottom:0;left:0;background-color:#101010;transform-origin:bottom right;transition:transform .25s ease-out;background-image:none!important}.custom-collapse[_ngcontent-%COMP%]   .hover-underline-animation[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:bottom left}.toppadding[_ngcontent-%COMP%]{padding-top:80px}@media (max-width: 991px){.toppadding[_ngcontent-%COMP%]{padding-top:30px}}.imgblock[_ngcontent-%COMP%]{padding:10px 30px}@media (max-width: 1024px){.imgblock[_ngcontent-%COMP%]{padding:10px 0}}.imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e5e5e3;font-size:26px}@media (max-width: 1366px){.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}.imgblock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#878787;font-weight:400}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;color:#878787;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.creativity[_ngcontent-%COMP%]{padding:80px 0;border-radius:50px 50px 0 0}.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:65px;margin-top:0;line-height:1.2}.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;font-weight:300;line-height:1.8}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:55px}}@media (max-width: 1024px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 991px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:24px}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 1366px){.creativity[_ngcontent-%COMP%]{padding:200px 0}}@media (max-width: 767px){.creativity[_ngcontent-%COMP%]{padding:150px 0}}@media (max-width: 575px){.creativity[_ngcontent-%COMP%]{padding:50px 20px}}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item:nth-child(odd){margin-top:0!important}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item.active:nth-child(3n+4){margin-top:60px!important}.story[_ngcontent-%COMP%]   .customslider[_ngcontent-%COMP%]     .owl-carousel.owl-drag .owl-item:nth-child(even){margin-top:20px!important}.story[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:300px 0}@media (max-width: 1366px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:200px 0}}@media (max-width: 767px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:150px 10px}}@media (max-width: 575px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{padding:80px 10px}}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px;font-weight:600;color:#000}.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:barcelony,sans-serif;font-weight:100;color:#da9777}@media (max-width: 1366px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 1024px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 991px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 575px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 480px){.story[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}  .story .owl-carousel .owl-item:nth-child(2) img{margin-top:30px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{font-size:24px;font-weight:400;color:#101010;line-height:2;padding-right:15px}@media (max-width: 1366px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p.heighlight[_ngcontent-%COMP%]{line-height:1.5;padding-right:0}}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]{margin:15px 0}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{text-decoration:none;color:#000;border:2px solid #000;text-align:center;padding:3px 40px;margin-top:20px;border-radius:30px;font-weight:700;font-size:20px}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]:hover{background:#000;color:#de9b7a;border-color:#000}#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]:focus{border-color:#000;background:#000;color:#de9b7a}@media (max-width: 1366px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:20px;padding:3px 40px}}@media (max-width: 1024px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:18px;padding:3px 30px}}@media (max-width: 991px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]   .bthw[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 767px){#strategy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actn[_ngcontent-%COMP%]{margin:15px 0 30px;text-align:center}}@media (max-width: 767px){#strategy[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}#strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{margin-top:15px;background:-webkit-linear-gradient(#101010,rgba(0,0,0,.6705882353));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none;font-weight:700;cursor:pointer;width:55px;font-size:20px}#strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:hover, #strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:focus, #strategy[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]:active{background:-webkit-linear-gradient(#d16a4c,#e8a18d);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.talk[_ngcontent-%COMP%]{padding-bottom:0}.talk[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{border:2px solid #e1a181;display:flex;width:100px;height:100px;text-align:center;justify-content:center;margin:0 auto;border-radius:50px;color:#fff;text-decoration:none;font-size:28px;font-weight:700;align-items:center;cursor:pointer}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:32px}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#fff;border-bottom:1px solid}.talk[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;border-bottom:1px solid}@media (max-width: 991px){.talk[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media (orientation: landscape) and (max-width: 991px){.h1[_ngcontent-%COMP%]{font-size:38px}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010;padding:80px 0}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px;padding:50px 0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 575px){.head[_ngcontent-%COMP%]{padding:30px 0}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:-8px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px;top:3px}}@media (max-width: 767px){.head[_ngcontent-%COMP%]:before{left:-5px}}.tutorial_link[_ngcontent-%COMP%]{display:none!important}.review-section[_ngcontent-%COMP%]{background-color:#000}.review-section[_ngcontent-%COMP%]   .tutorial_link[_ngcontent-%COMP%]{display:none!important}.review-section[_ngcontent-%COMP%]     .sk_branding a{display:none!important}.sk-ww-google-reviews[_ngcontent-%COMP%]{background-color:#000!important}.sk_branding[_ngcontent-%COMP%]{display:none!important}  .sk-instagram-feed .sk-ig-load-more-posts{border:2px solid #e1a181!important;display:flex!important;width:102px!important;height:100px!important;text-align:center!important;justify-content:center;margin:30px auto 0!important;border-radius:50px!important;color:#fff;text-decoration:none!important;font-size:28px;font-weight:900;align-items:center;cursor:pointer;padding:30px 8px!important}.insta-section[_ngcontent-%COMP%]     .sk-instagram-feed .sk-ig-load-more-posts{height:102px!important;background:transparent!important;border-radius:70px!important}.insta-section[_ngcontent-%COMP%]     .sk-instagram-feed .sk-ig-load-more-posts:hover{padding:30px 8px!important;background:#e1a181!important;color:#fff!important}.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:73%;margin:0 auto;border-top:1px solid rgb(219,219,219)!important;padding:20px 0 0!important}@media (max-width: 1399px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:77%}}@media (max-width: 1199px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:90%}}@media (max-width: 991px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:100%}}@media (max-width: 767px){.insta-section[_ngcontent-%COMP%]     .sk-ig-all-posts{width:101%}}.review-head[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding:80px 0}@media (max-width: 1199px){.review-head[_ngcontent-%COMP%]{font-size:28px;padding:50px 0}}@media (max-width: 991px){.review-head[_ngcontent-%COMP%]{font-size:24px;padding:30px 0}}@media (max-width: 767px){.review-head[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}.review-head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.review-head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.review-head[_ngcontent-%COMP%]:before{height:24px;width:4px;top:3px}}@media (max-width: 767px){.insta-section[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.insta-section[_ngcontent-%COMP%]     .sk_branding a{display:none!important}.review-section[_ngcontent-%COMP%]   .review-shortdecs[_ngcontent-%COMP%]{overflow:hidden}.review-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.review-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}.review-section[_ngcontent-%COMP%]     .owl-item{background-color:#1c1c27;padding:30px}.review-section[_ngcontent-%COMP%]   .coloractive[_ngcontent-%COMP%]{color:#de9b7a;font-size:24px}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]{display:flex;border:none!important;background-color:transparent!important;color:#ac9375}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]:hover{color:#fff}.review-section[_ngcontent-%COMP%]   .noborder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}.review-section[_ngcontent-%COMP%]   .cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}.review-section[_ngcontent-%COMP%]   .box-name[_ngcontent-%COMP%]{height:250px;overflow:hidden;overflow-y:scroll}.review-section[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{color:#de9b7a}.review-section[_ngcontent-%COMP%]   .nameheight[_ngcontent-%COMP%]{height:68px}  .sk-ig-profile-counts{display:flex;justify-content:space-between;width:80%;margin:15px 0}@media (max-width: 1199px){  .sk-ig-profile-counts{width:80%}}@media (max-width: 991px){  .sk-ig-profile-counts{width:100%}}  .sk-ig-profile-bio-container b{display:none}  .sk-ig-profile-bio-container .sk-ig-profile-bio.linked{display:block}  .sk-instagram-profile-pic{width:150px!important;height:150px!important;background-size:150px 150px!important;margin:0 100px 0 0!important}@media (max-width: 1024px){  .sk-instagram-profile-pic{margin:0 80px 0 0!important}}@media (max-width: 991px){  .sk-instagram-profile-pic{width:120px!important;height:120px!important;background-size:120px 120px!important;margin:0 50px 0 0!important}}  .sk-ig-profile-info{width:50%!important}@media (max-width: 1199px){  .sk-ig-profile-info{width:60%!important}}@media (max-width: 991px){  .sk-ig-profile-info{width:100%!important}}  .white-popup{height:96vh!important}  .white-popup>div{height:100%!important}  .ig_media{height:95vh!important}  .instagram-user-root-container{display:flex;justify-content:center;align-items:center;padding-bottom:80px!important;margin-bottom:30px!important}@media (max-width: 991px){  .instagram-user-root-container{padding-bottom:50px!important}}@media (max-width: 767px){  .instagram-user-root-container{padding-left:0!important;padding-right:0!important}}@media (max-width: 480px){  .instagram-user-root-container{display:block}}  button.instagram-user-container{background-color:#efefef!important;border-color:#efefef!important}  button.instagram-user-container:hover{background-color:#dbdbdb!important;border-color:#dbdbdb!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:56px}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:30px}}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{padding-right:0}}@media (max-width: 575px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]{text-align:center}}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;color:#444!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#333;background-color:#efefef!important;border-color:#efefef!important;font-weight:400}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#dbdbdb!important;border-color:#dbdbdb!important}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csmargin[_ngcontent-%COMP%]{margin:15px 0}@media (max-width: 575px){.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csmargin[_ngcontent-%COMP%]{justify-content:center}}.instagram-profile[_ngcontent-%COMP%]   .contentBlock[_ngcontent-%COMP%]   .csdflx[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#444!important;text-decoration:none!important}.instagram-profile[_ngcontent-%COMP%]   .profileblock[_ngcontent-%COMP%]{padding-bottom:80px;margin-bottom:30px}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .profileblock[_ngcontent-%COMP%]{padding-bottom:50px}}.instagram-profile[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{object-fit:cover;width:-webkit-fill-available;border-radius:8px}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{flex-grow:1;width:32%;height:255px}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{width:40%;height:auto}}@media (max-width: 380px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]{width:100%;height:255px}}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{cursor:pointer;background-color:#00000080;margin:0;padding:0;display:inline-block;position:absolute;top:5px;right:5px;border-radius:50%;width:30px;height:30px;text-align:center}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span.fa-play-circle[_ngcontent-%COMP%]{font-size:30px;color:#fff}@media (max-width: 480px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   img.post-image[_ngcontent-%COMP%]{height:165px}}@media (max-width: 380px){.instagram-profile[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .col-md-41[_ngcontent-%COMP%]   img.post-image[_ngcontent-%COMP%]{height:100%}}.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:83%;background-color:#dbdbdb;height:1px;margin:0 auto}@media (max-width: 991px){.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:90%}}@media (max-width: 767px){.instagram-profile[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:100%}}  .myCustomModalClass-video .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-content{background:#000}@media (max-width: 1920px){  .myCustomModalClass-video .modal-dialog.modal-lg{--bs-modal-width: 90% !important;margin:0 auto}}@media (min-width: 992px){  .myCustomModalClass-video .modal-dialog.modal-lg{--bs-modal-width: 100%;margin:0 auto}}@media (max-width: 1280px){  .myCustomModalClass-video .modal-dialog.modal-lg{max-width:100%}}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass-video .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass-video .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass-video .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass-video .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass-video .btn{top:-6px;right:6px}}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:100%}@media (max-width: 480px){  video{width:100%}}  .modal-body{padding:10px}.cstheight[_ngcontent-%COMP%]{min-height:300px;position:relative;display:block}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{min-height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.custom-col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;text-align:center}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:15px;transition:all .5s;cursor:default!important}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:gray}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:57px;cursor:default!important}@media (max-width: 1199px){.custom-col[_ngcontent-%COMP%]{flex:0 0 30%;max-width:30%}}@media (max-width: 768px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1650px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:90px}}@media (max-width: 1366px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.philosophy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:1.2}}.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:52px}@media (max-width: 1366px){.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:42px}}@media (max-width: 1280px){.philosophy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:32px}}.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]{position:relative;margin-bottom:8rem;z-index:1}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]{margin-bottom:5rem}}@media (max-width: 1199px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:87%}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .imagecent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:left;padding:35px 124px 35px 40px;width:390px;border-radius:80px;position:absolute;bottom:8%;right:6%;box-shadow:-7px 6px 20px #00000029;cursor:pointer;transition:all .4s ease-in}@media (max-width: 1399px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{right:0}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{right:0;left:0;margin:0 auto;bottom:-10%;width:280px;height:85px;padding:13px 80px 13px 20px}}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{width:90%}}@media (max-width: 380px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover{background-color:#000;box-shadow:none}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#fff}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;text-decoration:none}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:50px;width:50px}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{font-weight:600;font-family:Montserrat,sans-serif!important}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardleft[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:left;padding:35px 124px 35px 40px;width:390px;border-radius:80px;position:absolute;bottom:8%;left:21%;box-shadow:-7px 6px 20px #00000029;cursor:pointer;transition:all .4s ease-in}@media (max-width: 1399px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{left:0}}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{left:0;right:0;bottom:-10%;margin:0 auto;width:280px;height:85px;padding:13px 80px 13px 20px}}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{width:90%}}@media (max-width: 380px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]{width:100%}}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover{background-color:#000;box-shadow:none}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#fff}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;text-decoration:none}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:50px;width:50px}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{font-weight:600;font-family:Montserrat,sans-serif!important}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cardright[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center;justify-content:center;border-radius:50px;position:absolute;right:16%;top:50%}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.2s all ease-in-out}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}}.philosophy[_ngcontent-%COMP%]   .cstcardright[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center;justify-content:center;border-radius:50px;position:absolute;right:16%;top:50%}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.2s all ease-in-out}@media (max-width: 991px){.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{width:50px;height:50px}}.philosophy[_ngcontent-%COMP%]   .cstcardleft[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.philosophy[_ngcontent-%COMP%]   .text128[_ngcontent-%COMP%]{width:128px;transition:.5s all ease-in-out}.philosophy[_ngcontent-%COMP%]   .cstbtn128[_ngcontent-%COMP%]:hover   .text128[_ngcontent-%COMP%]{width:140px;letter-spacing:1px}.philosophy[_ngcontent-%COMP%]   .custom-block[_ngcontent-%COMP%]{display:block}@media (max-width: 480px){.philosophy[_ngcontent-%COMP%]   .custom-block[_ngcontent-%COMP%]{display:inline}}.philosophy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:1}.philosophy[_ngcontent-%COMP%]   .position-absolute.start-50.translate-middle.mbrem8[_ngcontent-%COMP%]{z-index:1}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777}.mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:0;width:35%;bottom:-14rem}@media (max-width: 991px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-12rem}}@media (max-width: 767px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-10rem;width:60%}}@media (max-width: 600px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:-8.5rem;width:75%}}@media (max-width: 480px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{outline:none;color:#fff!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#fff!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#fff!important;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:52px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 1024px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.start-50[_ngcontent-%COMP%]{left:55%!important}}@media (max-width: 480px){.start-50[_ngcontent-%COMP%]{left:60%!important}}.position-relative.actn[_ngcontent-%COMP%]{margin:5rem auto 0 10rem!important}@media (max-width: 991px){.position-relative.actn[_ngcontent-%COMP%]{margin:3rem auto 0 10rem!important}}@media (max-width: 767px){.position-relative.actn[_ngcontent-%COMP%]{margin:3rem auto 3rem 10rem!important}}.position-relative.actn[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:155px}']}),e})(),$9e=(()=>{class e{constructor(n,i,r){this.pageservice=n,this.metaTagService=i,this.titleService=r,this.get_PageMeta(),this.baseUrl=Nt_baseUrl+"/assets"}ngOnInit(){window.scroll(0,0),window.scroll({top:0,left:0,behavior:"smooth"})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"process"}).subscribe(i=>{200==i.body.code&&i.body.result&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}}return e.\u0275fac=function(n){return new(n||e)(Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-process"]],decls:90,vars:6,consts:[[1,"container","container"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],[1,"mblwd"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","200",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],[1,"barcelony","text-color"],[1,"text-color"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","300",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","h1","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","300",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","400",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","500",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","h1","size90"],[1,"position-absolute","banner-left-content"],[1,"pb-0"],[1,"container-md","container-fluid-sm"],[1,"col-lg-10","offset-lg-1"],[1,"img-block","d-flex","justify-content-center"],["alt","",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content","d-flex","flex-column","position-absolute","startl-31"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"content","d-flex","flex-column","position-absolute","startr-31"],[1,"img-block","d-flex","flex-row","justify-content-center"],[1,"help-block"],["alt","","height","70",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"d-flex","flex-column","justify-content-center","align-items-center","cstpadding"],[1,"mb-0","p40"],[1,"mt-0","p90"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),E(7," Creativity.Identity."),w(),x(8,"h1",6),E(9," Visual."),x(10,"span",7),E(11,"Soul"),w(),x(12,"span",8),E(13,"."),w(),E(14,"Brand."),w(),x(15,"h1",9),E(16," Customer "),w(),x(17,"h1",10),E(18," Creativity."),w(),x(19,"h1",11),E(20," Identity."),w(),x(21,"h1",12),E(22," Visual."),x(23,"span",7),E(24,"Soul"),w(),x(25,"span",8),E(26,"."),w()(),x(27,"h1",13),E(28,"Brand."),w(),x(29,"h1",14),E(30," Customer "),w()()()(),x(31,"div",15)(32,"p"),E(33,"Whether it's a birth or an evolution of a brand, "),w(),x(34,"p"),E(35,"nothing stands out unless it has a soul."),w()()()()(),x(36,"section",16)(37,"div",17)(38,"div",18)(39,"div",19),re(40,"img",20),x(41,"div",21)(42,"h1"),E(43,"Research"),w(),x(44,"p"),E(45,"We start every project by reviewing and analyzing industry Competitor, relevant projects and sustainable references. Feedback to the client for continual input for both parties."),w()()(),x(46,"div",19)(47,"div",22)(48,"h1"),E(49,"Strategy"),w(),x(50,"p"),E(51,"Each project starts with a thorough investigation of the client's business, analysis of it's key features & definition of the optimal strategy for developing it."),w()(),re(52,"img",20),w(),x(53,"div",19),re(54,"img",20),x(55,"div",21)(56,"h1"),E(57,"Design"),w(),x(58,"p"),E(59,"Impeccable design can make or break a brand: we create detailed mood boards, wireframes and define user flows & then we experiment with the visuals using a style guide as the basis until we reach a fully responsive, flawless output."),w()()(),x(60,"div",19)(61,"div",22)(62,"h1"),E(63,"Development"),w(),x(64,"p"),E(65,"Once the decision is made in which direction to develop, a more refined concept will be presented to the client. We will also discuss in more detail print materials, online functions & features and applying a thorough 2-step QA process to our consistent coding process."),w()(),re(66,"img",20),w(),x(67,"div",23),re(68,"img",20),x(69,"div",21)(70,"h1"),E(71,"Delivery"),w(),x(72,"p"),E(73,"The final solution will be delivered, hitting the deadline. we like to develop a relationship with our clients and provide them an ongoing design service for this current project and more."),w()()()(),x(74,"div",24),re(75,"img",25),x(76,"div",26)(77,"p",27),E(78,"Support"),w(),x(79,"h1",28),E(80,"We "),x(81,"span",7),E(82,"keep helping"),w(),E(83," you"),w(),x(84,"h1",28),E(85,"As long as "),x(86,"span",7),E(87,"you"),w(),E(88," need us"),w()()()()(),re(89,"div",29)),2&n&&(se(40),Se("src","",i.baseUrl,"/img/about-us/pixtar-diagram-1-wiggle.gif",Ce),se(12),Se("src","",i.baseUrl,"/img/about-us/pixtar-diagram-2.gif",Ce),se(2),Se("src","",i.baseUrl,"/img/about-us/pixtar-diagram-3.gif",Ce),se(12),Se("src","",i.baseUrl,"/img/about-us/pixtar-diagram-4.gif",Ce),se(2),Se("src","",i.baseUrl,"/img/about-us/pixtar-diagram-5.gif",Ce),se(7),Se("src","",i.baseUrl,"/img/about-us/white-down-arrow.svg",Ce))},styles:['section[_ngcontent-%COMP%]{min-height:100vh;height:100%;background-color:#000}@media (max-width: 768px){section[_ngcontent-%COMP%]{background-size:100rem}}@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}@media (max-width: 480px){section[_ngcontent-%COMP%]{min-height:auto;padding-bottom:0}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;color:#fff}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;color:#fff;line-height:normal;margin-bottom:0}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px}}@media (max-width: 480px){section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:86vh!important}}section[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{position:relative;top:-2px}section[_ngcontent-%COMP%]:before{content:"";width:4px;height:4px;background:#000;position:fixed;background:radial-gradient(ellipse at center,rgba(155,155,155,.2392156863) 0%,rgba(171,171,171,.231372549) 11%,transparent 9%,transparent 100%) 0px center repeat;width:100%;height:100%;background-size:10px 10px;outline:0;margin:0;box-sizing:border-box;z-index:0;mix-blend-mode:lighten;left:0;right:0}.barcelony[_ngcontent-%COMP%]{font-family:barcelony}.p40[_ngcontent-%COMP%]{font-weight:600;font-size:40px;color:#fff}@media (max-width: 1366px){.p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){.p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){.p40[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 575px){.p40[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 480px){.p40[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 385px){.p40[_ngcontent-%COMP%]{font-size:16px}}.p90[_ngcontent-%COMP%]{font-size:90px;font-weight:700;color:#fff}@media (max-width: 1366px){.p90[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 991px){.p90[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 767px){.p90[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 575px){.p90[_ngcontent-%COMP%]{font-size:34px}}@media (max-width: 480px){.p90[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 385px){.p90[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 385px){.p90[_ngcontent-%COMP%]{font-size:20px}}section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:35%}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:24%}}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:28%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:24%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:18%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:16%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .startl-31[_ngcontent-%COMP%]{left:20%}}section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:35%;text-align:right}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:24%}}@media (max-width: 1366px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:28%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:24%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:18%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:16%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .startr-31[_ngcontent-%COMP%]{right:20%}}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:35%}@media (max-width: 1440px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:50%}}@media (max-width: 1024px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:50%}}@media (max-width: 800px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:60%}}@media (max-width: 600px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:78%}}@media (max-width: 575px){section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:73%}}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;mix-blend-mode:lighten}.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;font-weight:700;margin-bottom:20px}@media (max-width: 1366px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 1024px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;margin-top:0;margin-bottom:10px}}@media (max-width: 800px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 767px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px}}@media (max-width: 600px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;margin-top:-10px;margin-bottom:0}}@media (max-width: 380px){.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px;margin-top:-28px}}.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}@media (max-width: 1366px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1024px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 767px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 600px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px}}.img-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .img-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.help-block[_ngcontent-%COMP%]{position:relative;display:block;margin-top:30px;text-align:center}.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}@media (max-width: 1199px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px}}@media (max-width: 1024px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}}@media (max-width: 600px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}}@media (max-width: 480px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}@media (max-width: 380px){.help-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px}}.cstmenu[_ngcontent-%COMP%]{color:#fff}.cstpadding[_ngcontent-%COMP%]{padding:50px 0}@media (max-width: 767px){.cstpadding[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 600px){.cstpadding[_ngcontent-%COMP%]{padding:10px 0 20px}}.banner-left-content[_ngcontent-%COMP%]{bottom:3%;left:auto}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{bottom:100px;left:auto;position:relative!important}}@media (max-width: 330px){.banner-left-content[_ngcontent-%COMP%]{bottom:60px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin-bottom:0;line-height:normal}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.banner-left-content[_ngcontent-%COMP%]   .text-color[_ngcontent-%COMP%]{color:#da9777;font-weight:600}.text-color[_ngcontent-%COMP%]{color:#da9777}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}']}),e})();function Q9e(e,t){if(1&e&&(x(0,"a",19),re(1,"img",20),w()),2&e){const n=rt().$implicit,i=rt().$implicit,r=rt();Mc("href",i.link,Ce),se(1),Je("src",r.backendUrl+n,Ce)}}function K9e(e,t){if(1&e&&(Jr(0),at(1,Q9e,2,2,"ng-template",18),eo()),2&e){const n=t.$implicit;se(1),Je("id",n.id)}}function Z9e(e,t){if(1&e&&(x(0,"div",14)(1,"div",15)(2,"owl-carousel-o",16),at(3,K9e,2,1,"ng-container",17),w()()()),2&e){const n=t.$implicit,i=rt();se(2),Je("options",i.customOptions),se(1),Je("ngForOf",n.project_images)}}function J9e(e,t){if(1&e){const n=vr();x(0,"a",27),St("click",function(){return Ln(n),tn(rt(2).loadMoreProjects())}),E(1,"More"),w()}}function eUe(e,t){if(1&e&&(x(0,"div",10)(1,"div",21),at(2,J9e,2,0,"a",22),x(3,"div",23)(4,"h1",24)(5,"a",25),E(6,"Let's "),x(7,"span",26),E(8,"Talk"),w()()()()()()),2&e){const n=rt();se(2),Je("ngIf",n.isactive)}}let tUe=(()=>{class e{constructor(n,i,r,o){this.projectservice=n,this.pageservice=i,this.metaTagService=r,this.titleService=o,this.allprojects=[],this.currentPage=1,this.initialized=!1,this.currentLimit=6,this.totalRecord=0,this.filterdCategory=[],this.isactive=!0,this.isMorePrasent=!0,this.customOptions={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1e3,center:!0,dots:!1,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.get_PageMeta(),this.get_AllProjects(),this.baseUrl=Nt_baseUrl+"/assets",this.backendUrl=Nt_backendUrl+"/public/"}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"project"}).subscribe(i=>{200==i.body.code&&i.body.result&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&(this.filterdCategory=[],this.allprojects=[],this.totalRecord=i.count,this.totalRecord<this.currentLimit&&(this.isMorePrasent=!1),i.result.forEach(r=>{r.status&&(this.allprojects.push(r),this.filterdCategory.push(r))}))})}getFilterProjects(n){"all"==n?(this.filterdCategory=this.allprojects,this.isactive=!0):(this.isactive=!1,this.allprojects&&this.allprojects.length>0&&(this.filterdCategory=[],this.allprojects.forEach(i=>{i.category&&i.category.length>0&&i.category.forEach(r=>{r.name==n&&this.filterdCategory.push(i)})})))}loadMoreProjects(){this.currentLimit=this.currentLimit+6,this.get_AllProjects()}}return e.\u0275fac=function(n){return new(n||e)(Oe(Ig),Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-projects"]],decls:26,vars:2,consts:[[1,"cst-tabs","p-0"],[1,"col-md-12"],[1,"col-xl-8","offset-xl-2","col-lg-10","offset-lg-1","col-md-10","offset-md-1"],["role","tablist",1,"nav","nav-pills"],[1,"nav-item"],["data-bs-toggle","pill",1,"nav-link","active",3,"click"],["data-bs-toggle","pill",1,"nav-link",3,"click"],[1,"tab-content"],["id","all",1,"tab-pane","active"],[1,"container"],[1,"row"],["class","col-lg-4 col-md-6",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"line"],[1,"col-lg-4","col-md-6"],["data-aos","fade-up","data-aos-once","true",1,"project-block"],[3,"options"],[4,"ngFor","ngForOf"],["class","slide","carouselSlide","",3,"id"],[3,"href"],[3,"src","alt","title"],[1,"co-md-12"],["class","more",3,"click",4,"ngIf"],[1,"linkblock"],[1,"mt-3","mb-3"],["routerLink","/contact"],[1,""],[1,"more",3,"click"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),St("click",function(){return i.getFilterProjects("all")}),E(6,"All"),w()(),x(7,"li",4)(8,"a",6),St("click",function(){return i.getFilterProjects("Branding")}),E(9,"Branding"),w()(),x(10,"li",4)(11,"a",6),St("click",function(){return i.getFilterProjects("UX/UI")}),E(12,"UX/UI"),w()(),x(13,"li",4)(14,"a",6),St("click",function(){return i.getFilterProjects("eCommerce")}),E(15,"eCommerce"),w()(),x(16,"li",4)(17,"a",6),St("click",function(){return i.getFilterProjects("SEO")}),E(18,"SEO"),w()()()(),x(19,"div",7)(20,"div",8)(21,"div",9)(22,"div",10),at(23,Z9e,4,2,"div",11),at(24,eUe,9,1,"div",12),w()()()(),re(25,"div",13),w()()),2&n&&(se(23),Je("ngForOf",i.filterdCategory),se(1),Je("ngIf",i.isMorePrasent))},dependencies:[ja,ta,kc,ph,Rc],styles:["section.cst-tabs[_ngcontent-%COMP%]{margin-top:15rem}@media (max-width: 480px){section.cst-tabs[_ngcontent-%COMP%]{margin-top:10rem}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:start}@media (max-width: 991px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{justify-content:center}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:none;color:#000;font-weight:400;font-size:32px;cursor:pointer}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{font-weight:600}@media (max-width: 1366px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:20px;padding:0 10px}}@media (max-width: 575px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 380px){section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;padding:0 5px}}section.cst-tabs[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:transparent;font-weight:600}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background-color:#000;padding:50px}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]{margin:15px 0}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-right-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #e1a181;display:flex;width:100px;height:100px;text-align:center;justify-content:center;margin:30px auto 0;border-radius:50px;color:#fff;text-decoration:none;font-size:28px;font-weight:700;align-items:center}@media (max-width: 1024px){section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   a.more[_ngcontent-%COMP%]{width:80px;height:80px;font-size:20px}}section.cst-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .project-block[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:20px 20px 50px}.p32[_ngcontent-%COMP%]{font-size:32px;color:#e5e5e3;font-weight:700;margin-bottom:0}@media (max-width: 1366px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.p32[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p32[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){.p32[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 575px){.p32[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 380px){.p32[_ngcontent-%COMP%]{font-size:16px}}.p26[_ngcontent-%COMP%]{font-size:26px;color:#878787;font-weight:100}@media (max-width: 1366px){.p26[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 1199px){.p26[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.p26[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 575px){.p26[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 380px){.p26[_ngcontent-%COMP%]{font-size:14px}}.project-right-block[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:20px 20px 50px}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;text-align:center}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#fff;border-bottom:1px solid}.linkblock[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#de9b7a;border-bottom:1px solid}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}"]}),e})(),nUe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/dnour/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-pakhis"]],decls:166,vars:17,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://www.pakhis.ae/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-pakhis","pb-5"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"content"],[1,"mb-5"],[1,"semibold","subheading","mb-1"],[1,"mb-0"],[1,"row","mt-5"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"heading","mb-2"],["id","branding","data-scroll-nav","3",1,"bg-pakhis","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-pakhis","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100"],[1,"semibold","subheading"],["id","productdesign","data-scroll-nav","6",1,"bg-pakhis","package"],[1,"row","mb-4"],[1,"col-md-12","mb-5"],["alt","packaing2","width","","height","","data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"img1",3,"src"],[1,"col-md-12"],["alt","box","width","","height","","data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"img2",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],[1,"mb-md-4","mb-sm-3","mb-2"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"semibold","subheading","mb-3"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"container"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"Pakhi's"),w(),x(10,"div",7)(11,"p"),E(12,"Pakhi\u2019s is a testament to the enchanting blend of heritage & modernity that the Middle East represents."),w(),x(13,"p")(14,"a",8),E(15,"Pakhis.ae"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"Product Design"),w()(),x(25,"h3",15)(26,"a",13),E(27,"UI/UX Design"),w()()()()()()()()()(),x(28,"section",16)(29,"div",17)(30,"div",2)(31,"div",18),re(32,"img",19),w()()()(),x(33,"section",20)(34,"div",1)(35,"div",2)(36,"div",21)(37,"div",22)(38,"p",23),E(39,'"Pakhi\'s" presents a luxurious and sustainable handwash collection inspired by the enchanting charm of the Middle East. Our handcrafted formulations are meticulously designed to unveil the secrets of nourished and rejuvenated skin. Each product embodies a unique blend of tradition, innovation, and care, providing an unparalleled sense of luxury to your everyday self-care routine. '),w(),x(40,"h3",24),E(41,"Project Objectives:"),w(),x(42,"p",25),E(43,"Creating an online platform for Pakhi's premium hand wash collection, emphasizing UAE's cultural and sensory aspects."),w(),x(44,"p",25),E(45," We aim to develop a user-friendly, mobile-responsive website for an enhanced online shopping experience."),w(),x(46,"p",25),E(47,"Furthermore, the platform will convey the brand's commitment to high quality, sustainability, and affordability."),w()(),x(48,"div",26)(49,"div",27)(50,"div",22)(51,"h1",28),E(52,"Branding"),w(),x(53,"p"),E(54,"In shaping the branding strategy for \"Pakhis,\" our approach involved a thorough exploration of the agency's identity. Through in-depth consultations and market analysis, we crafted a distinctive brand narrative and visual identity aligned with Pakhis' core values. The result is a sophisticated and resonant brand image, strategically positioned to leave a lasting impression on its audience. Our commitment to precision, creativity, and strategic thinking underscores the success of this collaborative endeavor, contributing to Pakhis' emergence as a distinguished entity within its industry"),w()()()()()()()(),x(55,"section",29)(56,"div",1)(57,"div",2)(58,"div",18)(59,"div",30),re(60,"img",31),w()(),x(61,"div",32)(62,"div",2)(63,"div",33),re(64,"img",31),w(),x(65,"div",34)(66,"div",35),re(67,"img",36)(68,"img",37),w()()()()()()(),x(69,"section",38)(70,"div",1)(71,"div",2)(72,"div",3)(73,"div",39),re(74,"img",40),x(75,"p",41),E(76,"The visual design of the website embodies the essence of luxury and the mystique of the Middle East."),w(),x(77,"h3",42),E(78,"Color Schemes:"),w(),x(79,"p"),E(80,"Rich and opulent color palettes reflective of the cultural richness of the Middle East."),w(),x(81,"h3",42),E(82,"Typography:"),w(),x(83,"p"),E(84,"Elegant and legible fonts to enhance readability and convey a sense of sophistication."),w(),x(85,"h3",42),E(86,"Imagery:"),w(),x(87,"p"),E(88,"High-quality, curated visuals showcasing the hand wash collection and the cultural inspiration behind each variant."),w()()()()()(),x(89,"section",43)(90,"div",1)(91,"div",2)(92,"div",3)(93,"div",44)(94,"div",27)(95,"div",22)(96,"h1",28),E(97,"Product Design"),w(),x(98,"p"),E(99,"In crafting the product design for \"Pakhis,\" we seamlessly blended creativity and functionality. Our approach, rooted in the agency's vision, resulted in a distinct hand wash collection that embodies the premium quality and cultural essence of the UAE. Through thoughtful ideation and design iterations, each product within Pakhis' collection speaks to the brand's commitment to excellence, reflecting qualities of quality, sustainability, and affordability. This collaborative effort establishes Pakhis as a standout brand, resonating with the discerning tastes of its audience."),w()()()(),x(100,"div",2)(101,"div",45),re(102,"img",46),w(),x(103,"div",47),re(104,"img",48),w()()()()()(),x(105,"section",49)(106,"div",1)(107,"div",2)(108,"div",3)(109,"div",44)(110,"div",50)(111,"div",22)(112,"h1",28),E(113,"UI/UX Design"),w(),x(114,"p",51),E(115,"Branding is a strategic dance of logos, colors, and more, shaping a unique identity and perception in consumers' minds. It sets a brand apart, evoking emotions and building trust."),w()()()(),x(116,"div",2)(117,"div",52)(118,"video",53),re(119,"source",54)(120,"source",55),E(121," Your browser does not support HTML5 video. "),w(),x(122,"video",56),re(123,"source",54)(124,"source",55),E(125," Your browser does not support HTML5 video. "),w(),x(126,"p",57),E(127,"The design and development process focused on seamlessly integrating tradition, innovation, and user-friendly functionality."),w(),x(128,"p",57),E(129,"Conducted market research to understand user preferences for luxury self-care products."),w(),x(130,"p",57),E(131,"Collaborated with stakeholders to define the brand identity and values."),w(),x(132,"p",57),E(133,"Utilized HTML 5 and Bootstrap for a responsive and visually appealing website."),w(),x(134,"p",57),E(135,"Emphasized user experience and easy navigation to facilitate a smooth browsing and shopping journey."),w()()()()()()(),x(136,"section",58)(137,"div",1)(138,"div",2)(139,"div",3)(140,"div",44)(141,"div",27)(142,"div",22)(143,"h1",28),E(144,"Technical Stack"),w(),x(145,"h3",59),E(146," The technological stack of Pakhi's website included:"),w(),x(147,"p",57),E(148,"HTML 5: Ensuring a robust and structurally sound foundation."),w(),x(149,"p",57),E(150,"Bootstrap: Facilitating a responsive and mobile-friendly design."),w(),x(151,"p",60),E(152,"Fully Mobile Responsive: Adapting seamlessly to various devices for an optimal user experience."),w(),x(153,"p"),E(154,"User-Friendly: Implementing intuitive navigation and user interfaces."),w()()()()()()()(),x(155,"section",61)(156,"div",62)(157,"div",2)(158,"div",47)(159,"div",63)(160,"div",64)(161,"a",65),re(162,"img",66),x(163,"h1",67),E(164,"NEXT PROJECT"),w()()()()()(),re(165,"div",68),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/pakhis#branding",Ce),se(3),Se("href","",i.Url,"/project-details/pakhis#productdesign",Ce),se(3),Se("href","",i.Url,"/project-details/pakhis#ui-ux",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/pakhis/banner-min.jpg",Ce),se(28),Se("src","",i.baseUrl,"/images/projects/pakhis/pakhis-detail.jpg",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/pakhis/stationery-Mockup-min.jpg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/pakhis/broken-plank.jpg",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/pakhis/duct-tape-mockup-min.jpg",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/pakhis/typography.png",Ce),se(28),Se("src","",i.baseUrl,"/images/projects/pakhis/all-three-podium-sand.jpg",Ce),se(2),Se("src","",i.baseUrl,"/images/projects/pakhis/threebottles-min.png",Ce),se(15),Se("src","",i.baseUrl,"/images/projects/pakhis/pakhis-imac-scroll.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/pakhis/pakhis-imac-scroll.ogg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/pakhis/pakhis-laptop-scroll.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/pakhis/pakhis-laptop-scroll.ogg",Ce),se(37),Se("href","",i.Url,"/project-details/beyou",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/dnour/pixtar-case-study-web-design.png",Ce))},styles:["section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}"]}),e})();function iUe(e,t){1&e&&re(0,"img",72),2&e&&Je("src",rt(2).$implicit.url,Ce)}function rUe(e,t){1&e&&at(0,iUe,1,1,"ng-template",71),2&e&&Je("id",rt().$implicit.id)}function oUe(e,t){if(1&e&&(Jr(0),at(1,rUe,1,1,null,70),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id<=3)}}function sUe(e,t){1&e&&re(0,"img",72),2&e&&Je("src",rt(2).$implicit.url,Ce)}function aUe(e,t){1&e&&at(0,sUe,1,1,"ng-template",71),2&e&&Je("id",rt().$implicit.id)}function lUe(e,t){if(1&e&&(Jr(0),at(1,aUe,1,1,null,70),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id>=4&&n.id<=6)}}function cUe(e,t){1&e&&re(0,"img",72),2&e&&Je("src",rt(2).$implicit.url,Ce)}function dUe(e,t){1&e&&at(0,cUe,1,1,"ng-template",71),2&e&&Je("id",rt().$implicit.id)}function hUe(e,t){if(1&e&&(Jr(0),at(1,dUe,1,1,null,70),eo()),2&e){const n=t.$implicit;se(1),Je("ngIf",n.id>=7&&n.id<=9)}}let uUe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-beyou"]],decls:132,vars:22,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://storebeyou.com/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","200",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-beyou"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-beyou","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-beyou","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["alt","envelop","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-beyou","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","ecommerce","data-scroll-nav","6",1,"package"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-12","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"owlcarousel1"],[3,"options"],[4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","150",1,"owlcarousel2"],[1,"owlcarousel3"],["data-aos","fade-up","data-aos-duration","3000","data-aos-delay","200",3,"options"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"],[4,"ngIf"],["class","slide","carouselSlide","",3,"id"],[3,"src","alt","title"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"BEYOU"),w(),x(10,"div",7)(11,"p"),E(12,"Storebeyou redefines beauty empowerment in the e-commerce realm, curating a platform where women's unique beauty takes center stage."),w(),x(13,"p")(14,"a",8),E(15,"storebeyou.com"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"UI/UX Design"),w()(),x(25,"h3",15)(26,"a",13),E(27,"Ecommerce"),w()()()()()()()()()(),x(28,"section",16)(29,"div",17)(30,"div",2)(31,"div",18),re(32,"img",19),w()()()(),x(33,"section",20)(34,"div",21)(35,"div",2)(36,"div",22)(37,"div",23)(38,"p",24),E(39,"\"Storebeyou faced the challenge of establishing a unique online presence in the highly competitive e- commerce landscape for women's beauty products. Pixtar took on the task of creating a visually appealing and secure platform that resonated with the target audience."),w()()()()()(),x(40,"section",25)(41,"div",21)(42,"div",2)(43,"div",26)(44,"div",23)(45,"h1",27),E(46,"Branding"),w(),x(47,"p"),E(48,"Pixtar designed a distinctive logo for Storebeyou, capturing the essence of women's beauty and elegance. The logo became a visual cornerstone for the brand's identity, radiating sophistication and allure."),w()()()()()(),x(49,"section",28)(50,"div",1)(51,"div",2)(52,"div",18)(53,"div",29),re(54,"img",30),w()(),x(55,"div",31)(56,"div",2)(57,"div",32),re(58,"img",30),w(),x(59,"div",33)(60,"div",34),re(61,"img",35)(62,"img",36),w()()()()()()(),x(63,"section",37)(64,"div",1)(65,"div",2)(66,"div",3)(67,"div",38),re(68,"img",39),w()()()()(),x(69,"section",40)(70,"div",1)(71,"div",2)(72,"div",3)(73,"div",41)(74,"div",42)(75,"div",23)(76,"h1",43),E(77,"UI/UX Design"),w(),x(78,"p",44),E(79,"Crafted an intuitive and aesthetically pleasing interface for the Storebeyou website, ensuring a seamless and engaging user experience. The design prioritized showcasing the beauty products while facilitating easy navigation for online shoppers."),w()()()(),x(80,"div",2)(81,"div",45)(82,"video",46),re(83,"source",47)(84,"source",48),E(85," Your browser does not support HTML5 video. "),w(),x(86,"video",49),re(87,"source",47)(88,"source",48),E(89," Your browser does not support HTML5 video. "),w()()()()()()(),x(90,"section",50)(91,"div",1)(92,"div",2)(93,"div",3)(94,"div",41)(95,"div",42)(96,"div",23)(97,"h1",43),E(98,"Ecommerce"),w(),x(99,"p",44),E(100,"Developed the e-commerce platform using Magento, incorporating advanced features to enhance the online shopping experience. Stringent security measures were implemented to safeguard customer data and transactions, fostering trust and reliability."),w()()()()()()(),x(101,"div",51),re(102,"img",30),x(103,"div",52)(104,"owl-carousel-o",53),at(105,oUe,2,1,"ng-container",54),w()(),x(106,"div",55)(107,"owl-carousel-o",53),at(108,lUe,2,1,"ng-container",54),w()(),x(109,"div",56)(110,"owl-carousel-o",57),at(111,hUe,2,1,"ng-container",54),w()()()(),x(112,"section",58)(113,"div",21)(114,"div",2)(115,"div",59)(116,"div",41)(117,"div",60)(118,"div",23)(119,"p",61),E(120,"Storebeyou emerged as a haven for women seeking high-quality beauty products tailored to their unique needs. The platform aimed to empower women through curated selections that celebrated beauty in diversity."),w()()()()()()()(),x(121,"section",62)(122,"div",21)(123,"div",2)(124,"div",63)(125,"div",64)(126,"div",65)(127,"a",66),re(128,"img",67),x(129,"h1",68),E(130,"NEXT PROJECT"),w()()()()()(),re(131,"div",69),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/beyou#branding",Ce),se(3),Se("href","",i.Url,"/project-details/beyou#ui-ux",Ce),se(3),Se("href","",i.Url,"/project-details/beyou#ecommerce",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/beyou/beyou-banner-min.png",Ce),se(22),Se("src","",i.baseUrl,"/images/projects/beyou/beyou-branding.png",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/beyou/beyou-model-new.jpg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/beyou/beyou-bcard.jpg",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/beyou/pack.jpg",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/beyou/typography.png",Ce),se(15),Se("src","",i.baseUrl,"/images/projects/beyou/storebeyou-imac-scroll.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/beyou/storebeyou-imac-scroll.ogg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/beyou/storebeyou-laptop.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/beyou/storebeyou-laptop.ogg",Ce),se(14),Se("src","",i.baseUrl,"/images/projects/beyou/beyou-homescreen.png",Ce),se(2),Je("options",i.desktopslider),se(1),Je("ngForOf",i.imageData),se(2),Je("options",i.desktopslider1),se(1),Je("ngForOf",i.imageData),se(2),Je("options",i.desktopslider2),se(1),Je("ngForOf",i.imageData),se(16),Se("href","",i.Url,"/project-details/autokoorosh",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-banner.png",Ce))},dependencies:[ja,ta,ph,Rc],styles:[".bg-beyou[_ngcontent-%COMP%]{background:#E89F8C}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}"]}),e})(),pUe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-autokoorosh"]],decls:111,vars:13,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://autokoorosh.ae/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-autokoorosh","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-autokoorosh","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-autokoorosh","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-autokoorosh","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["data-aos","fade-up","data-aos-duration","2500","data-aos-delay","100"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto","desktopimg"],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],["id","myVideo3","width","320","height","176","autoplay","true","muted","muted","loop","true","oncanplay","this.play()","onloadedmetadata","this.muted = true",1,"w-100","h-auto"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"AUTOKOOROSH"),w(),x(10,"div",7)(11,"p"),E(12,"One of the leading auto repair shops serving customers in dubai. All mechanic services are performed by highly qualified mechanics."),w(),x(13,"p")(14,"a",8),E(15,"autokoorosh.ae"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"UI/UX Design"),w()()()()()()()()()(),x(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),re(29,"img",18),w()()()(),x(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),E(36,"Autokoorosh, an established auto service provider, embarked on a digital journey with Pixtar, a renowned web development agency. With a track record of 15 years of delivering quality car repair and detailing services, Autokoorosh has earned maximum customer satisfaction. "),re(37,"br")(38,"br"),E(39," Despite their longstanding success in the auto service industry, Autokoorosh recognized the need to enhance their online presence to better serve their customers and expand their reach. Pixtar was tasked with developing a website that not only reflected Autokoorosh's commitment to quality services but also showcased their work and diversified offerings."),w()()()()()(),x(40,"section",24)(41,"div",20)(42,"div",2)(43,"div",25)(44,"div",22)(45,"h1",26),E(46,"Branding"),w(),x(47,"p"),E(48,"Through cohesive branding efforts, Pixtar helped Autokoorosh strengthen its brand presence, establish credibility in the market, and attract new customers. The synergy between web development and branding ensured a holistic approach to enhancing Autokoorosh's overall marketing strategy and driving business growth."),w()()()()()(),x(49,"section",27)(50,"div",1)(51,"div",2)(52,"div",17)(53,"div",28),re(54,"img",29),w()(),x(55,"div",30)(56,"div",2)(57,"div",31),re(58,"img",29),w(),x(59,"div",32)(60,"div",33),re(61,"img",34),w()()()()()()(),x(62,"section",35)(63,"div",1)(64,"div",2)(65,"div",3)(66,"div",36),re(67,"img",37),x(68,"p",38),E(69,"Through cohesive branding efforts, Pixtar helped Autokoorosh strengthen its brand presence, establish credibility in the market, and attract new customers. The synergy between web development and branding ensured a holistic approach to enhancing Autokoorosh's overall marketing strategy and driving business growth."),w()()()()()(),x(70,"section",39)(71,"div",1)(72,"div",2)(73,"div",3)(74,"div",40)(75,"div",41)(76,"div",22)(77,"h1",42),E(78,"UI/UX Design"),w(),x(79,"p",43),E(80,"Pixtar crafted a dynamic and user-friendly website for Autokoorosh, highlighting their core services of car repairing and detailing. The website was designed to provide visitors with easy access to information about Autokoorosh's services, locations, and contact details. Integration of interactive features facilitated seamless communication between Autokoorosh and its customers"),w()()()(),x(81,"div",2)(82,"div",44)(83,"video",45),re(84,"source",46)(85,"source",47),E(86," Your browser does not support HTML5 video. "),w(),x(87,"video",48),re(88,"source",46)(89,"source",47),E(90," Your browser does not support HTML5 video. "),w()()()()()()(),x(91,"section",49)(92,"div",20)(93,"div",2)(94,"div",50)(95,"div",40)(96,"div",51)(97,"div",22)(98,"p",52),E(99,"Pixtar's collaboration with Autokoorosh resulted in a successful digital transformation, positioning them as a leader in the auto service industry. The new website not only improved customer engagement but also strengthened Autokoorosh's brand identity and facilitated business growth. Through strategic web development, Pixtar helped Autokoorosh drive excellence in auto services and expand its reach in the competitive Dubai market."),w()()()()()()()(),x(100,"section",53)(101,"div",20)(102,"div",2)(103,"div",54)(104,"div",55)(105,"div",56)(106,"a",57),re(107,"img",58),x(108,"h1",59),E(109,"NEXT PROJECT"),w()()()()()(),re(110,"div",60),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/autokoorosh#branding",Ce),se(3),Se("href","",i.Url,"/project-details/autokoorosh#ui-ux",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-banner-min.png",Ce),se(25),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-branding.png",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-left.png",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-right.png",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/autokoorosh/typography.png",Ce),se(17),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-desktop.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh-desktop.ogg",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh_laptop.mp4",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/autokoorosh/autokoorosh_laptop.ogg",Ce),se(17),Se("href","",i.Url,"/project-details/vendetta",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/vendetta/vendetta-banner-min.png",Ce))},styles:[".bg-autokoorosh[_ngcontent-%COMP%]{background:#101621}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#fff}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]}),e})(),fUe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-vendetta"]],decls:96,vars:9,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://vendettagarages.com/","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-beyou","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-beyou","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-beyou","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-beyou","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],[1,"text-white","font-bold",3,"href"],["alt","","width","280","height","280",3,"src"],[1,"heading","text-white"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"VENDETTA"),w(),x(10,"div",7)(11,"p"),E(12,"Vendetta Auto Garage Company exemplifies the seamless integration of tradition and innovation in the automotive industry."),w(),x(13,"p")(14,"a",8),E(15,"vendettagarages.com"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"UI/UX Design"),w()()()()()()()()()(),x(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),re(29,"img",18),w()()()(),x(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),E(36,"Pixtar was entrusted with translating our passion for precision car painting into a captivating digital platform. We relied on Pixtar to not only capture the essence of our expertise but also to craft a seamless and engaging website that reflects our commitment to automotive excellence."),w()()()()()(),x(37,"section",24)(38,"div",20)(39,"div",2)(40,"div",25)(41,"div",22)(42,"h1",26),E(43,"Branding"),w(),x(44,"p"),E(45,"Pixtar undertook comprehensive branding work for Vendetta, starting with the creation of a distinctive logo that encapsulated the company's identity. Additionally, Pixtar designed eye-catching flyers, standees, and business cards that effectively conveyed Vendetta's professionalism and expertise in car painting services."),w()()()()()(),x(46,"section",27)(47,"div",1)(48,"div",2)(49,"div",17)(50,"div",28),re(51,"img",29),w()(),x(52,"div",30)(53,"div",2)(54,"div",31),re(55,"img",29),w(),x(56,"div",32)(57,"div",33),re(58,"img",34),w()()()()()()(),x(59,"section",35)(60,"div",1)(61,"div",2)(62,"div",3)(63,"div",36),re(64,"img",37),w()()()()(),x(65,"section",38)(66,"div",1)(67,"div",2)(68,"div",3)(69,"div",39)(70,"div",40)(71,"div",22)(72,"h1",41),E(73,"UI/UX Design"),w(),x(74,"p",42),E(75,"Pixtar developed a dynamic and user-friendly website for Vendetta Auto Garage Company. The website showcased Vendetta's services, including interior and exterior painting for all types of cars, with detailed descriptions and high-quality images. Integration of interactive features allowed customers to easily request quotes and schedule appointments."),w()()()()()()()(),x(76,"section",43)(77,"div",20)(78,"div",2)(79,"div",44)(80,"div",39)(81,"div",45)(82,"div",22)(83,"p",46),E(84,"Pixtar's collaboration with Vendetta Auto Garage Company resulted in a successful digital transformation. The website and branding materials not only enhanced Vendetta's online presence but also positioned them as a leader in car painting services. Through strategic web development and branding, Pixtar helped Vendetta attract new customers and drive business growth in the competitive automotive market."),w()()()()()()()(),x(85,"section",47)(86,"div",20)(87,"div",2)(88,"div",48)(89,"div",49)(90,"div",50)(91,"a",51),re(92,"img",52),x(93,"h1",53),E(94,"NEXT PROJECT"),w()()()()()(),re(95,"div",54),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/vendetta#branding",Ce),se(3),Se("href","",i.Url,"/project-details/vendetta#ui-ux",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/vendetta/vendetta-banner-min.png",Ce),se(22),Se("src","",i.baseUrl,"/images/projects/vendetta/vendetta-branding-min.png",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/vendetta/vendetta-left-min.png",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/vendetta/vendetta-right-min.png",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/vendetta/typography.png",Ce),se(27),Se("href","",i.Url,"/project-details/spacex",Ce),se(1),Se("src","",i.baseUrl,"/images/projects/spacex/spacex-left.png",Ce))},styles:[".bg-beyou[_ngcontent-%COMP%]{background:#444444}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#fff}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]}),e})(),mUe=(()=>{class e{constructor(){this.imageData=[{albumId:1,id:1,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot1.png"},{albumId:1,id:2,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot2.png"},{albumId:1,id:3,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot3.png"},{albumId:1,id:4,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot4.png"},{albumId:1,id:5,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot5.png"},{albumId:1,id:6,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot6.png"},{albumId:1,id:7,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot7.png"},{albumId:1,id:8,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot8.png"},{albumId:1,id:9,thumbnailUrl:"https://via.placeholder.com/150/92c952",title:"accusamus beatae ad facilis cum similique qui sunt",url:Nt_baseUrl+"/assets/images/projects/beyou/shot9.png"}],this.desktopslider={autoplayTimeout:2e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider1={autoplayTimeout:2500,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.desktopslider2={autoplayTimeout:3e3,center:!1,margin:10,loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}},this.baseUrl=Nt_baseUrl+"/assets",this.Url=Nt_baseUrl}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=oi({type:e,selectors:[["app-spacex"]],decls:97,vars:7,consts:[["id","project1","data-scroll-nav","0",1,"projects"],[1,"container-fluid"],[1,"row"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-7","col-md-7","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","h-100","service-content"],[1,"heading"],[1,"points"],["href","https://spacexfitness.in","target","_blank",1,"text-decoration-underline"],[1,"col-xl-5","col-md-5","col-sm-6"],[1,"d-flex","flex-column","justify-content-center","align-items-sm-end"],[1,"list-block"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"mt-0","mb-2"],[3,"href"],["data-aos","fade-up","data-aos-duration","1500","data-aos-delay","150",1,"mt-0","mb-2"],["data-scroll-nav","1",1,"pb-0"],[1,"container-fluid","p-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-md-12","p-0"],["alt","pages","width","","height","",3,"src"],["data-scroll-nav","2",1,"section","bg-autokoorosh","about"],[1,"container"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-9","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"content"],[1,"mb-0"],["id","branding","data-scroll-nav","3",1,"bg-autokoorosh","branding","pb-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-6","col-xl-6","col-lg-6","col-md-6","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],[1,"heading","mb-0"],["id","branding1",1,"bg-autokoorosh","branding"],[1,"imglist","mb-3"],["alt","project1","width","","height","",3,"src"],[1,"col-xxl-10","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","mx-lg-auto","ps-md-0"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","ps-md-0"],[1,"list"],["alt","packaging","width","","height","",3,"src"],["data-scroll-nav","5",1,"bg-autokoorosh","typography"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"typography"],["alt","typography","width","","height","",3,"src"],["id","ui-ux","data-scroll-nav","8",1,"section","ui-ux"],[1,"row","mb-4"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-5","col-xl-6","col-lg-8","col-md-10","col-sm-10"],[1,"heading","mb-2"],[1,""],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-lg-9","mx-lg-auto"],["id","technical","data-scroll-nav","8",1,"technical"],[1,"col-xxl-10","col-xl-10","col-lg-11","col-md-11","col-sm-11","col-11","mx-md-0","mx-sm-auto","mx-auto"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-10","col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"mb-md-4","-sm-3","mb-2"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"next","bg-black","pb-0"],[1,"col-md-12"],[1,"next-block"],[1,"in-line"],["href","#",1,"text-white","font-bold"],[1,"heading","text-white"],[1,"line"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div")(8,"h1",6),E(9,"SPACEXFITNESS"),w(),x(10,"div",7)(11,"p"),E(12,"SpaceX Fitness embodies a fusion of cutting-edge fitness technology and expert coaching, propelling individuals to new heights of strength and vitality."),w(),x(13,"p")(14,"a",8),E(15,"spacexfitness.in"),w()()()()()(),x(16,"div",9)(17,"div",10)(18,"div",11)(19,"h3",12)(20,"a",13),E(21,"Branding"),w()(),x(22,"h3",14)(23,"a",13),E(24,"UI/UX Design"),w()()()()()()()()()(),x(25,"section",15)(26,"div",16)(27,"div",2)(28,"div",17),re(29,"img",18),w()()()(),x(30,"section",19)(31,"div",20)(32,"div",2)(33,"div",21)(34,"div",22)(35,"p",23),E(36,"Pixtar was tasked with encapsulating the essence of our innovative approach to fitness into a digital platform. We entrusted Pixtar not only with capturing our brand's dynamic spirit but also with creating a seamless and engaging website that reflects our commitment to excellence in health and wellness."),w()()()()()(),x(37,"section",24)(38,"div",20)(39,"div",2)(40,"div",25)(41,"div",22)(42,"h1",26),E(43,"Branding"),w(),x(44,"p"),E(45,"In addition to website development, Pixtar undertook comprehensive branding work for SpaceX. This included creating a cohesive visual identity that aligned with their values and industry positioning. From logo design to color schemes and typography, every element was carefully crafted to reflect the brand's professionalism and expertise."),w()()()()()(),x(46,"section",27)(47,"div",1)(48,"div",2)(49,"div",17)(50,"div",28),re(51,"img",29),w()(),x(52,"div",30)(53,"div",2)(54,"div",31),re(55,"img",29),w(),x(56,"div",32)(57,"div",33),re(58,"img",34),w()()()()()()(),x(59,"section",35)(60,"div",1)(61,"div",2)(62,"div",3)(63,"div",36),re(64,"img",37),w()()()()(),x(65,"section",38)(66,"div",1)(67,"div",2)(68,"div",3)(69,"div",39)(70,"div",40)(71,"div",22)(72,"h1",41),E(73,"UI/UX Design"),w(),x(74,"p",42),E(75,"The design prioritized delivering an immersive browsing experience, seamlessly navigating users through the gym's facilities,and membership options. Every element was carefully curated to showcase the dynamic energy and innovative approach of SpaceX Fitness, ensuring visitors feel motivated and empowered to embark on their fitness journey."),w()()()(),x(76,"div",2),re(77,"div",43),w()()()()(),x(78,"section",44)(79,"div",20)(80,"div",2)(81,"div",45)(82,"div",39)(83,"div",46)(84,"div",22)(85,"p",47),E(86,"Pixtar's partnership with SpaceX Fitness has yielded a digital platform that seamlessly merges technology with fitness expertise. This case study highlights Pixtar's adeptness in harmonizing design, development, and functionality, delivering a compelling digital experience for SpaceX Fitness' audience."),w()()()()()()()(),x(87,"section",48)(88,"div",20)(89,"div",2)(90,"div",49)(91,"div",50)(92,"div",51)(93,"a",52)(94,"h1",53),E(95,"NEXT PROJECT"),w()()()()()(),re(96,"div",54),w()()),2&n&&(se(20),Se("href","",i.Url,"/project-details/spacex#branding",Ce),se(3),Se("href","",i.Url,"/project-details/spacex#ui-ux",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/spacex/spacex-banner-min.png",Ce),se(22),Se("src","",i.baseUrl,"/images/projects/spacex/spacex-branding.png",Ce),se(4),Se("src","",i.baseUrl,"/images/projects/spacex/glove.png",Ce),se(3),Se("src","",i.baseUrl,"/images/projects/spacex/kattlebell.png",Ce),se(6),Se("src","",i.baseUrl,"/images/projects/spacex/typography.png",Ce))},styles:[".bg-autokoorosh[_ngcontent-%COMP%]{background:#f3f1ee}section[_ngcontent-%COMP%]{overflow:hidden}section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#101010}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#101010;font-size:18px}@media (max-width: 767px){section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:500}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}section[_ngcontent-%COMP%]   .barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:24px}@media (max-width: 767px){.section[_ngcontent-%COMP%]{padding:50px 0}}.projects[_ngcontent-%COMP%]{margin-top:200px}@media (max-width: 991px){.projects[_ngcontent-%COMP%]{margin-top:150px}}@media (max-width: 768px){.projects[_ngcontent-%COMP%]{margin-top:120px}}.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:15px 0;color:#101010;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#878787}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#da9777}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#da9777}@media (max-width: 575px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]{margin-top:20px}}.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#878787;font-weight:500;font-size:28px}@media (max-width: 1440px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1366px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 1024px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.projects[_ngcontent-%COMP%]   .list-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.branding[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0 30px;color:#000}.branding[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:15px}.branding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000}img[_ngcontent-%COMP%]{max-width:100%;width:100%}.owlcarousel1[_ngcontent-%COMP%]{margin:50px 0}.owlcarousel2[_ngcontent-%COMP%]{margin:0 0 50px}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{display:flex;justify-content:start;height:350px;align-items:center;width:100%}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]{height:250px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:280px;display:inline;opacity:0;transition:.3s;border-radius:5px}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:160px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:90px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 380px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover{width:100%}.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:40px;opacity:1;transition:width .8s ease;margin-left:150px;transition:.3s padding ease-out,.3s margin ease-out,.15s border ease-out}@media (max-width: 991px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:15px;margin-left:90px}}@media (max-width: 480px){.next[_ngcontent-%COMP%]   .next-block[_ngcontent-%COMP%]   .in-line[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-left:25px;margin-right:10px}}.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:80px}@media (max-width: 767px){.ui-ux[_ngcontent-%COMP%]   .desktopimg[_ngcontent-%COMP%]{margin-bottom:50px}}.line[_ngcontent-%COMP%]{width:100%;position:relative;display:block;height:1px;background-color:#f0ebe6}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}"]}),e})();function gUe(e,t){if(1&e&&(x(0,"div",101)(1,"div",102)(2,"div",103)(3,"div",104),re(4,"img",105),w()(),x(5,"div",106)(6,"div",107)(7,"p",108),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",109),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",110),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",111)(14,"div",107)(15,"p",42),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-story.png",Ce)}}let vUe=(()=>{class e{constructor(n,i,r,o){this.router=n,this.pageservice=i,this.metaTagService=r,this.titleService=o,this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.isPlaying=!0,this.get_PageMeta(),this.baseUrl=Nt_baseUrl+"/assets"}ngOnInit(){var i={container:document.getElementById("lottie"),renderer:"svg",loop:!0,autoplay:!0,animationData:{v:"5.9.6",fr:30,ip:0,op:96,w:122,h:119,nm:"hand",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:-34.9,ix:10},p:{a:0,k:[67.1,111.5,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:150,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 3 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:20.363,s:[-8]},{i:{x:[.65],y:[1.156]},o:{x:[.333],y:[0]},t:30.546,s:[8]},{i:{x:[.667],y:[1]},o:{x:[.167],y:[0]},t:42,s:[-1.8]},{i:{x:[.833],y:[1]},o:{x:[.333],y:[0]},t:51,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:60,s:[-.4]},{t:69,s:[0]}],ix:10},p:{a:0,k:[-2.981,.359,0],ix:2,l:2},a:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[15.024,91.188,0],to:[0,0,0],ti:[0,0,0]},{t:44,s:[15.024,91.188,0]}],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[3.903,-5.533],[3.056,-2.353],[6.543,2.313],[4.228,4.252],[.327,6.566],[-.109,2.842],[-.281,9.016],[.083,2.706],[-1.043,.386],[-.666,-2.038],[-.181,-1.13],[.156,-4.374],[-1.579,-.706],[-1.31,1],[-.442,.663],[-6.815,9.598],[-.455,.427],[-1.272,-1.478],[1.046,-1.327],[4.713,-6.619],[.196,-.327],[-1.1,-.992],[-1.181,.832],[-.345,.518],[-6.936,9.765],[-.29,.345],[-1.763,-.582],[-.03,-1.826],[.764,-.91],[6.934,-9.766],[.241,-.499],[-1.104,-.867],[-1.126,.839],[-.321,.495],[-5.124,7.179],[-.342,.391],[-1.712,-.819],[1.17,-2.201],[.133,-.179],[5.282,-7.492],[-1.55,-1.123],[-1.373,1.933],[-2.975,4.189],[-.217,.273],[-1.064,-.33],[-.164,-.992],[.618,-.721],[4.295,-6.063]],o:[[0,0],[-3.925,5.53],[-2.207,3.163],[-5.419,4.144],[-5.658,-1.985],[-4.757,-4.537],[-.132,-2.83],[.352,-9.013],[.084,-2.7],[-.047,-1.53],[2.052,-.622],[.282,1.109],[.785,4.306],[-.141,1.724],[1.431,.818],[.627,-.491],[6.837,-9.584],[.339,-.524],[1.477,-1.272],[1.103,1.28],[-4.699,6.627],[-.221,.311],[-.761,1.271],[1.062,.978],[.484,-.392],[6.95,-9.758],[.262,-.368],[1.202,-1.415],[1.726,.596],[-.023,1.188],[-6.946,9.76],[-.333,.444],[-.56,1.287],[1.107,.863],[.438,-.395],[5.133,-7.171],[.3,-.423],[1.273,-1.408],[2.2,1.171],[-.105,.197],[-5.348,7.451],[-1.34,1.9],[1.55,1.123],[2.98,-4.187],[.2,-.283],[.669,-.891],[.979,.23],[.17,.934],[-4.32,6.046],[0,0]],v:[[23.152,14.265],[23.152,14.265],[11.387,30.834],[3.446,39.158],[-14.469,42.324],[-29.49,32.847],[-37.41,15.555],[-37.109,7.033],[-36.085,-20.008],[-36.314,-28.124],[-34.842,-30.943],[-29.951,-28.395],[-29.245,-25.033],[-28.298,-11.975],[-25.898,-7.919],[-21.376,-8.219],[-19.764,-9.962],[.715,-38.734],[1.91,-40.165],[6.888,-39.794],[6.986,-35.305],[-7.133,-15.436],[-7.783,-14.492],[-7.199,-10.598],[-3.355,-10.348],[-2.105,-11.721],[18.725,-41.005],[19.531,-42.094],[24.437,-43.471],[27.362,-39.438],[26.146,-36.195],[5.327,-6.906],[4.464,-5.488],[5.387,-1.83],[9.168,-1.788],[10.311,-3.128],[25.697,-24.654],[26.645,-25.895],[31.676,-26.887],[33.542,-20.783],[33.185,-20.219],[17.314,2.245],[17.658,7.111],[22.458,5.811],[31.391,-6.755],[32.008,-7.593],[34.898,-8.527],[36.785,-6.509],[36.077,-3.893],[23.154,14.271]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-2.092,-1],[-5.851,1.244],[-2.89,2.122],[-2.836,4.038],[-8.223,11.534],[1.8,3.179],[2.203,.713],[-.482,.692],[3.481,3.721],[1.699,.527],[.484,.17],[1.139,3.155],[2.122,1.241],[3.015,-1.109],[1.758,-2.785],[.644,.543],[3.548,-4.034],[.13,-.169],[1.792,-2.514],[4.079,-5.747],[0,0],[.082,.492],[.844,3.567],[3.743,.857],[2.2,-2.689],[-.104,-2.042],[.639,-12.849],[-1.281,-4.26],[-5.078,-4.319],[-.195,-.238],[0,0]],o:[[2.036,1.113],[5.3,2.515],[3.508,-.744],[3.984,-2.911],[8.184,-11.562],[2.279,-2.855],[-1.124,-2.024],[.544,-.765],[3.017,-4.106],[-1.184,-1.328],[-.386,-.124],[1.837,-2.807],[-.767,-2.335],[-2.755,-1.652],[-3.194,1.082],[-.671,-.678],[-4.034,-3.548],[-.141,.16],[-1.912,2.423],[-4.089,5.741],[0,0],[-.08,-.81],[-.575,-3.63],[-.905,-3.835],[-3.335,-.972],[-1.354,1.532],[.755,12.89],[-.219,4.4],[1.914,6.386],[.221,.214],[0,0],[0,0]],v:[[-26.227,43.472],[-20.111,46.795],[-3.436,49.195],[6.271,44.847],[16.572,34.353],[41.182,-.292],[41.975,-10.279],[36.799,-14.538],[38.319,-16.68],[37.519,-30.18],[33.112,-33.014],[31.862,-33.451],[32.969,-42.919],[28.486,-48.471],[19.361,-49.329],[12.486,-42.977],[10.62,-44.85],[-3.107,-43.971],[-3.514,-43.477],[-8.939,-35.964],[-21.189,-18.731],[-22.033,-17.546],[-22.214,-19.346],[-24.014,-30.219],[-31.486,-37.094],[-40.613,-34.262],[-42.563,-28.686],[-43.555,9.895],[-42.488,22.887],[-31.775,39.287],[-31.152,39.965],[-26.227,43.465]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[44.024,50.688],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 4 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[4]},{t:17,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.591],y:[1.232]},o:{x:[.333],y:[0]},t:3.182,s:[64.512]},{t:17,s:[78.762]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:3.182,s:[-46.004]},{t:17,s:[-45.754]}],ix:4}},a:{a:0,k:[3.602,10.311,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.05,.08],[-.397,.235],[-.245,-.372],[-.243,-2.031],[2.88,-3.875],[.273,0]],o:[[-.461,0],[0,-.17],[6.552,-9.387],[-.235,-.397],[.383,-.227],[1.001,1.784],[.576,4.793],[-.156,.224],[0,0]],v:[[-2.516,10.057],[-3.351,9.221],[-3.201,8.745],[-1.542,-8.689],[-1.249,-9.834],[-.128,-9.576],[1.757,-3.797],[-1.831,9.704],[-2.516,10.061]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.601,10.311],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 5 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:15,s:[0]}],ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.524],y:[1.943]},o:{x:[.333],y:[0]},t:0,s:[63.218]},{t:15,s:[81.718]}],ix:3},y:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-46.437]},{t:15,s:[-45.687]}],ix:4}},a:{a:0,k:[3.592,13.05,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.462],[-.098,.14],[.719,5.523],[1.159,2.111],[-.394,.238],[-.245,-.379],[-.31,-2.601],[4.815,-6.892],[.273,0]],o:[[-.461,0],[0,-.17],[3.6,-5.154],[-.281,-2.392],[-.238,-.395],[.387,-.233],[1.281,2.285],[.55,4.109],[-.156,.224],[0,0]],v:[[-2.507,12.799],[-3.341,11.964],[-3.191,11.486],[1.147,-4.604],[-1.033,-11.421],[-.75,-12.566],[.383,-12.305],[2.792,-4.905],[-1.823,12.439],[-2.508,12.797]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.592,13.05],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 6 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15.909,s:[3]},{t:28,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.706],y:[1.553]},o:{x:[.333],y:[0]},t:15.909,s:[30.436]},{t:28,s:[24.186]}],ix:3},y:{a:1,k:[{i:{x:[.652],y:[1.489]},o:{x:[.333],y:[0]},t:15.909,s:[-81.209]},{t:28,s:[-93.959]}],ix:4}},a:{a:0,k:[9.646,4.948,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.001,.461],[-.075,.128],[-1.692,1.15],[-4.764,-.772],[.06,-.457],[.457,.06],[3.634,-2.451],[1.022,-1.522],[.295,0]],o:[[-.461,-.001],[0,-.148],[1.123,-1.71],[3.99,-2.716],[.457,.06],[-.06,.457],[-4.324,-.717],[-1.519,1.027],[-.151,.253],[0,0]],v:[[-8.561,4.693],[-9.395,3.855],[-9.279,3.435],[-5.016,-.898],[8.617,-3.926],[9.335,-2.989],[8.398,-2.27],[-3.995,.431],[-7.842,4.29],[-8.561,4.698]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.645,4.948],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 7 Outlines",parent:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:13.363,s:[0]},{t:26,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{s:!0,x:{a:1,k:[{i:{x:[.624],y:[2.994]},o:{x:[.333],y:[0]},t:13.363,s:[30.021]},{t:26,s:[22.771]}],ix:3},y:{a:1,k:[{i:{x:[.624],y:[1.964]},o:{x:[.333],y:[0]},t:13.363,s:[-82.012]},{t:26,s:[-97.012]}],ix:4}},a:{a:0,k:[12.19,6.146,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.295,0],[0,.461],[-.076,.128],[-2.168,1.472],[-8.332,-1.099],[.06,-.457],[.457,.06],[4.573,-3.179],[1.34,-2]],o:[[-.461,-.001],[.001,-.149],[1.439,-2.19],[3.394,-2.379],[.457,.06],[-.06,.457],[-6.231,-.82],[-1.994,1.35],[-.151,.254]],v:[[-11.106,5.895],[-11.94,5.059],[-11.824,4.637],[-6.361,-.91],[11.161,-4.796],[11.88,-3.859],[10.943,-3.14],[-5.339,.413],[-10.387,5.486]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.854902020623,.588235294118,.466666696586,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[12.19,6.146],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150,st:0,ct:1,bm:0}],markers:[]}};BU().loadAnimation(i),this.router.parseUrl(this.router.url).fragment||window.scroll({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{const s=document.getElementById("canvas");this.spline=new aS(s),this.spline.load("https://prod.spline.design/ETc1NgtkFiSuPoFT/scene.splinecode")},500)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"about-us"}).subscribe(i=>{200==i.body.code&&i.body.result&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}navigateToLink(n){this.router.navigate([n])}}return e.\u0275fac=function(n){return new(n||e)(Oe(xo),Oe(Nc),Oe(Tl),Oe(Il))},e.\u0275cmp=oi({type:e,selectors:[["app-services"]],decls:290,vars:26,consts:[[1,"service-banner"],[1,"container"],["id","canvas",1,"img-globe","floatimg"],[1,"row"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-start","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","textcolor2","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-flex","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","align-items-end","size90","textcolor2"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none","text-white","size90"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block","text-white","size90"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"text-white"],[1,"featuredvideo","m80","bannerbgcolor"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"blocklist","section1"],[1,"fontsize12","text-white"],[1,"col-md-12"],[1,"col","custom-col","mb-lg-5","mb-md-4","mb-4"],["href","javascript:void(0)"],["alt","",1,"img-fluid",3,"src"],["id","services1","data-scroll-nav","0",1,"services","mtrem5"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","order-sm-1","order-1"],[1,"img-block"],["alt","",1,"w-100",3,"src"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-5","col-lg-5","mx-auto","col-md-6","order-sm-2","order-2"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content"],[1,"fontsize12","semibold"],[1,"size32","mb-1"],[1,"size18"],[1,"size18","textcolor3"],[1,"points"],[1,"fontsize12","mb-0"],[1,"wght600"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/branding",1,"cstbtn","cstbtn128",3,"click"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],["id","services2","data-scroll-nav","1",1,"services"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-5","col-lg-5","mx-auto","col-md-6","order-md-1","order-sm-2","order-2"],[1,"d-flex","flex-column","justify-content-between","h-100","service-content","ps-md-0","ps-sm-auto","ps-auto"],["routerLink","/website",1,"cstbtn","cstbtn128",3,"click"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xl-6","col-lg-6","col-md-6","offset-xl-1","offset-lg-1","order-md-2","order-sm-1","order-1"],[1,"mask"],["alt","",3,"src"],["id","services3","data-scroll-nav","2",1,"services"],[1,"float-start","cwd243","cwd2433"],["routerLink","/ecommerce",1,"cstbtn","cstbtn128",3,"click"],["id","services4","data-scroll-nav","3",1,"services"],[1,"size32"],[1,"float-start","cwd243","cwd2434"],["routerLink","/graphics",1,"cstbtn","cstbtn128",3,"click"],[1,"success-story","backeeedf0"],[1,"col-md-11","col-sm-11","col-11","mx-auto"],[1,"content","mbrem8"],[3,"options"],["carouselSlide","",3,"id"],[1,"section","faqsection","backeeedf0"],[1,"col-md-10","col-sm-11","col-11","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,"textcolor1"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"d-block"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item","brdtp"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"accordion-item"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"row","justify-content-center"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1"],[1,"size32","textcolor1","mt-0","mb30"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1),re(2,"canvas",2),x(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),E(10,"We don't do "),w(),x(11,"h1",10),E(12,"We don't do"),w(),re(13,"div",11),w(),x(14,"h1",12),E(15,"one size fits all"),w(),x(16,"h1",13),E(17,"one size fits all"),w()()()(),x(18,"div",14)(19,"ul",15)(20,"li")(21,"a",16),re(22,"img",17),w()(),x(23,"li")(24,"a",18),re(25,"img",19),w()(),x(26,"li")(27,"a",20),re(28,"img",17),w()(),x(29,"li")(30,"a",21),re(31,"img",22),w()()(),x(32,"div",23)(33,"p",24),E(34,"Our services are tailored to "),w(),x(35,"p",24),E(36,"the needs of your brand."),w()()()()()()(),x(37,"section",25)(38,"div",1)(39,"div",26)(40,"div",27)(41,"p",28),E(42,"OUR CLIENTS INCLUDE\u2026"),w(),x(43,"div",3),Jr(44),x(45,"div",29)(46,"div",3)(47,"div",30)(48,"a",31),re(49,"img",32),w()(),x(50,"div",30)(51,"a",31),re(52,"img",32),w()(),x(53,"div",30)(54,"a",31),re(55,"img",32),w()(),x(56,"div",30)(57,"a",31),re(58,"img",32),w()(),x(59,"div",30)(60,"a",31),re(61,"img",32),w()(),x(62,"div",30)(63,"a",31),re(64,"img",32),w()(),x(65,"div",30)(66,"a",31),re(67,"img",32),w()(),x(68,"div",30)(69,"a",31),re(70,"img",32),w()(),x(71,"div",30)(72,"a",31),re(73,"img",32),w()(),x(74,"div",30)(75,"a",31),re(76,"img",32),w()(),x(77,"div",30)(78,"a",31),re(79,"img",32),w()(),x(80,"div",30)(81,"a",31),re(82,"img",32),w()(),x(83,"div",30)(84,"a",31),re(85,"img",32),w()(),x(86,"div",30)(87,"a",31),re(88,"img",32),w()()()(),eo(),w()()()()(),x(89,"section",33)(90,"div",1)(91,"div",3)(92,"div",4)(93,"div",3)(94,"div",34)(95,"div",35),re(96,"img",36),w()(),x(97,"div",37)(98,"div",38)(99,"div")(100,"p",39),E(101,"Our Services"),w(),x(102,"h1",40),E(103,"Premium Branding"),w(),x(104,"p",41),E(105,"Your Brand, Your Story, Perfectly Told"),w()(),x(106,"p",42),E(107,"Your brand is more than a logo\u2014it\u2019s a promise. With designs built on the timeless principles of the golden ratio, we help businesses create a story that feels both balanced and bold."),w(),x(108,"div",43)(109,"p",44)(110,"span",45),E(111," DESIGNING AND CONCEPTUALISING"),w(),E(112,": Custom Logo | Brand Guidelines | Brand Aesthetics | Luxury Packaging"),w()(),x(113,"div",46)(114,"div",47)(115,"p")(116,"a",48),St("click",function(){return i.navigateToLink("branding")}),x(117,"span",49),E(118,"Explore Branding Packages"),w(),x(119,"span",50),re(120,"i",51),w()()()()()()()()()()()(),x(121,"section",52)(122,"div",1)(123,"div",3)(124,"div",4)(125,"div",3)(126,"div",53)(127,"div",54)(128,"div")(129,"h1",40),E(130,"Highly-Impactful Website"),w(),x(131,"p",41),E(132,"Designs That Perform On Every Screen"),w()(),x(133,"p",42),E(134,"We don\u2019t build websites; we create experiences. Our custom-built websites are fast, functional, and perfectly aligned with your audience and business goals \u2014because we don\u2019t believe in templates."),w(),x(135,"div",43)(136,"p",44)(137,"span",45),E(138," DESIGN AND DEVELOPMENT"),w(),E(139,": Static Website | Dynamic Website | Api Integration"),w()(),x(140,"div",46)(141,"div",47)(142,"p")(143,"a",55),St("click",function(){return i.navigateToLink("website")}),x(144,"span",49),E(145,"Explore Branding Services"),w(),x(146,"span",50),re(147,"i",51),w()()()()()()(),x(148,"div",56)(149,"div",35),re(150,"img",36),w()()()()()(),x(151,"div",57),re(152,"img",58),w()(),x(153,"section",59)(154,"div",1)(155,"div",3)(156,"div",4)(157,"div",3)(158,"div",34)(159,"div",35),re(160,"img",36),w()(),x(161,"div",37)(162,"div",38)(163,"div")(164,"h1",40),E(165,"Highly-Converting Ecommerce Website"),w(),x(166,"p",41),E(167,"Sell Globally With Custom Ecommerce Solutions"),w()(),x(168,"p",42),E(169,"A beautiful online store isn\u2019t enough\u2014you need one that converts. Whether it\u2019s Magento, Shopify, or Node.js, we create custom eCommerce platforms that perform, scale, and grow with you."),w(),x(170,"div",43)(171,"p",44)(172,"span",45),E(173,"DESIGNING AND DEVELOPMENT"),w(),E(174,": Shopify | Custom Magento 2.0+ | Custom eCommerce website on Node .JS & Angular"),w()(),x(175,"div",46)(176,"div",60)(177,"p")(178,"a",61),St("click",function(){return i.navigateToLink("ecommerce")}),x(179,"span",49),E(180,"Explore E-Commerce Solutions"),w(),x(181,"span",50),re(182,"i",51),w()()()()()()()()()()()(),x(183,"section",62)(184,"div",1)(185,"div",3)(186,"div",4)(187,"div",3)(188,"div",53)(189,"div",54)(190,"div")(191,"h1",63),E(192,"High-End Graphic Design"),w()(),x(193,"p",42),E(194,"Need fresh designs every month? Our subscription plan gives you creative power on demand\u2014because good design should always be within reach."),w(),x(195,"div",43)(196,"p",44)(197,"span",45),E(198,"DESIGNING"),w(),E(199," : Catalog | Company Profile | Pitch-deck | Social Media Theme | Event Theme | Marketing Materials"),w()(),x(200,"div",46)(201,"div",64)(202,"p")(203,"a",65),St("click",function(){return i.navigateToLink("graphics")}),x(204,"span",49),E(205,"Explore Packages"),w(),x(206,"span",50),re(207,"i",51),w()()()()()()(),x(208,"div",56)(209,"div",35),re(210,"img",36),w()()()()()()(),x(211,"section",66)(212,"div",1)(213,"div",3)(214,"div",67),re(215,"div",68),x(216,"owl-carousel-o",69),Jr(217),at(218,gUe,17,1,"ng-template",70),eo(),w()()()()(),x(219,"section",71)(220,"div",57),re(221,"img",58),w(),x(222,"div",1)(223,"div",3)(224,"div",72)(225,"div",3)(226,"div",73)(227,"div",74)(228,"h1",75),E(229," What "),re(230,"br"),E(231," makes Pixtar "),re(232,"br"),E(233," Special? "),re(234,"br"),x(235,"span"),E(236," And other FAQs\u2026 "),w()()()(),x(237,"div",76)(238,"div",77)(239,"div",78)(240,"div",79)(241,"div",80)(242,"h2",81)(243,"button",82),E(244," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(245,"div",83)(246,"div",84),E(247," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(248,"div",85)(249,"h2",86)(250,"button",87),E(251," Where are you based? "),w()(),x(252,"div",88)(253,"div",84),E(254," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(255,"div",85)(256,"h2",89)(257,"button",90),E(258," How are you different from a freelance designer? "),w()(),x(259,"div",91)(260,"div",84),E(261," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(262,"div",85)(263,"h2",92)(264,"button",93),E(265," What other design magic do you offer? "),w()(),x(266,"div",94)(267,"div",84),E(268," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(269,"div",85)(270,"h2",92)(271,"button",95),E(272," Who do you usually work with? "),w()(),x(273,"div",96)(274,"div",84),E(275," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(276,"div",85)(277,"h2",92)(278,"button",97),E(279," Which platforms do you use for building websites? "),w()(),x(280,"div",98)(281,"div",84),E(282," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(283,"div",85)(284,"h2",92)(285,"button",99),E(286," I\u2019m in! When can we get started? "),w()(),x(287,"div",100)(288,"div",84),E(289," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()()),2&n&&(se(22),Se("src","",i.baseUrl,"/img/home/social-media/instagram-white.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook-white.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin-white.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp-white.svg",Ce),se(18),Se("src","",i.baseUrl,"/img/home/logos/dnour.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/crystal.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/miniaar.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/bni.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/angle.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/pakhis.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/drminnie.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/veddentta.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/autokoorosh.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/fractal.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/corporate.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/aetrio.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/wrae.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/logos/beyou.svg",Ce),se(8),Se("src","",i.baseUrl,"/img/services/branding.jpg",Ce),se(54),Se("src","",i.baseUrl,"/img/services/impactfull.jpg",Ce),se(2),Se("src","",i.baseUrl,"/img/home/mask2.svg",Ce),se(8),Se("src","",i.baseUrl,"/img/services/ecommerce.jpg",Ce),se(50),Se("src","",i.baseUrl,"/img/services/graphic.jpg",Ce),se(6),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl),se(3),Se("src","",i.baseUrl,"/img/home/mask-transparent.svg",Ce))},dependencies:[kc,ph,Rc],styles:['.bannerbgcolor[_ngcontent-%COMP%], .service-banner[_ngcontent-%COMP%]{background-color:#1d1d1f}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}.img-globe[_ngcontent-%COMP%]{position:absolute;right:2%;top:26%;width:400px}@media (max-width: 1440px){.img-globe[_ngcontent-%COMP%]{width:300px}}@media (max-width: 1366px){.img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 1199px){.img-globe[_ngcontent-%COMP%]{right:2%;width:230px;top:30%}}@media (max-width: 991px){.img-globe[_ngcontent-%COMP%]{width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:20px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:0}}@media (max-width: 767px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1d1d1f;margin-top:0}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .fontsize18.textcolor3[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .fontsize18.textcolor3[_ngcontent-%COMP%]{margin-top:15px 0px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .size18.textcolor3[_ngcontent-%COMP%]{margin-top:15px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1.size32[_ngcontent-%COMP%]{font-weight:500}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;color:#1d1d1f;line-height:normal}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:15px 0}}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .fontsize12[_ngcontent-%COMP%]{letter-spacing:0}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .position-relative[_ngcontent-%COMP%]{margin-top:20px}}.services[_ngcontent-%COMP%]   .img-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 90px 62px -42px #00000040}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}.banner-left-content[_ngcontent-%COMP%]{display:flex;width:393px;justify-content:start;align-items:center;left:auto!important;bottom:3%!important;margin-left:-4rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-3rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]{margin-left:-2rem}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{margin-left:0rem}.banner-left-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}}.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}@media (max-width: 1440px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:2rem}}@media (max-width: 991px){.banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.down-arrow[_ngcontent-%COMP%]{bottom:13%}}@media (max-width: 767px){.down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.custom-col[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;text-align:center}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:15px;transition:all .5s;cursor:default!important}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-color:gray}.custom-col[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:57px;cursor:default!important}@media (max-width: 1199px){.custom-col[_ngcontent-%COMP%]{flex:0 0 30%;max-width:30%}}@media (max-width: 768px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media (max-width: 576px){.custom-col[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}.cwd243[_ngcontent-%COMP%]{position:relative;width:243px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]:hover{outline:none;color:#1d1d1f!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#1d1d1f!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdtp[_ngcontent-%COMP%]{border-top:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:5px;margin-bottom:5px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:52px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 1024px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 1399px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1199px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}}.cwd2433[_ngcontent-%COMP%]{width:270px}.cwd2434[_ngcontent-%COMP%]{width:170px}#services1[_ngcontent-%COMP%], #services2[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;z-index:1}.mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:0;width:30%;bottom:40px}@media (max-width: 991px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:12rem}}@media (max-width: 767px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}@media (max-width: 600px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:20rem;width:75%}}@media (max-width: 480px){.mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.backeeedf0[_ngcontent-%COMP%]{overflow:visible!important}.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:0;left:auto;width:21%;bottom:0}@media (max-width: 991px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:12rem}}@media (max-width: 767px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}}@media (max-width: 600px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:20rem;width:75%}}@media (max-width: 480px){.faqsection[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:0;width:100%}}']}),e})(),N1=(()=>{class e{constructor(n){this.http=n,this.getStripSessionLink=i=>this.http.post(Nt_backendUrl+"/api/home/stripe-payments",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o))),this.savePaymentSuccess=i=>this.http.post(Nt_backendUrl+"/api/home/save-stripe-payments",i,{observe:"response"}).pipe((0,Vr.K)(o=>(0,no._)(o)))}}return e.\u0275fac=function(n){return new(n||e)(Gt(Rl))},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const yUe=["myVideo"];function bUe(e,t){if(1&e){const n=vr();x(0,"div",111)(1,"div",178)(2,"a",179)(3,"img",180),St("mouseenter",function(){const o=Ln(n).index;return tn(rt().onMouseEnter(o))})("mouseleave",function(){return Ln(n),tn(rt().onMouseLeave())}),w(),x(4,"div",181)(5,"p",182),E(6),w(),x(7,"p",183),re(8,"span",184),w()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=rt();se(2),Mc("href",n.link,Ce),se(1),uu("galleryimg",i,""),ic("src","",r.imagepath,"",n.image,"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function _Ue(e,t){if(1&e&&(x(0,"a",185),re(1,"img",186),x(2,"div",181)(3,"p",182),E(4),w(),x(5,"p",183),re(6,"span",184),w()()()),2&e){const n=rt().$implicit,i=rt();Mc("href",n.link,Ce),se(1),ic("src","",i.imagepath,"",n.project_images[0],"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function xUe(e,t){if(1&e&&(Jr(0),at(1,_Ue,7,5,"ng-template",123),eo()),2&e){const n=t.$implicit,i=t.index;se(1),Je("id",n+i)}}function CUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/dnour.svg",Ce)}}function wUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/crystal.svg",Ce)}}function MUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/miniaar.svg",Ce)}}function PUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/bni.svg",Ce)}}function SUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/angle.svg",Ce)}}function OUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/pakhis.svg",Ce)}}function EUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/drminnie.svg",Ce)}}function DUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/veddentta.svg",Ce)}}function AUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",Ce)}}function TUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/fractal.svg",Ce)}}function IUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/aetrio.svg",Ce)}}function kUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/wrae.svg",Ce)}}function RUe(e,t){if(1&e&&(x(0,"div",187)(1,"a",188),re(2,"img",189),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/beyou.svg",Ce)}}function NUe(e,t){if(1&e&&(x(0,"div",190)(1,"div",77)(2,"div",191)(3,"div",192),re(4,"img",193),w()(),x(5,"div",194)(6,"div",195)(7,"p",196),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",197),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",198),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",199)(14,"div",195)(15,"p",200),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/crystal-story.png",Ce)}}function FUe(e,t){1&e&&(x(0,"div",218)(1,"div"),E(2," Name is required. "),w()())}function LUe(e,t){if(1&e&&(x(0,"div",218)(1,"div"),E(2),w()()),2&e){const n=rt(2);se(2),sl(" ",n.hasEmailError("email","required")," ")}}function BUe(e,t){if(1&e){const n=vr();x(0,"div",158)(1,"h5",201),E(2),w(),x(3,"button",202),St("click",function(){return tn(Ln(n).$implicit.dismiss("Cross click"))}),x(4,"span",203),E(5," \xd7 "),w()()(),x(6,"div",161)(7,"div",204)(8,"div",1)(9,"div",2)(10,"div",205)(11,"div",128)(12,"form",206),St("ngSubmit",function(){return Ln(n),tn(rt().submitPayment())}),x(13,"div",207)(14,"div",208),re(15,"input",209),x(16,"label",210),E(17,"What's your name?"),w(),at(18,FUe,3,0,"div",211),w(),x(19,"div",208),re(20,"input",212),x(21,"label",210),E(22,"What\u2019s your e-mail?"),w(),at(23,LUe,3,1,"div",211),w(),x(24,"div",213)(25,"div",214),re(26,"input",215),w(),x(27,"div",216)(28,"button",217),St("click",function(){return Ln(n),tn(rt().closePopUp())}),E(29,"Cancel"),w()()()()()()()()()()()}if(2&e){const n=rt();se(2),sl(" Complete Your Payment - ",n.paymentData.name," "),se(10),Je("formGroup",n.paymentForm),se(6),Je("ngIf",n.submitted&&n.hasError("name","required")),se(5),Je("ngIf",n.submitted&&n.hasEmailError("email","required"))}}const zUe=function(e){return{width:e}};let UUe=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g,v){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.formData={name:"",email:"",contact:"",rname:"",remail:"",rcontact:""},this.hasError=(y,b)=>this.paymentForm.controls[y].hasError(b),this.hasEmailError=(y,b)=>""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.tabTitle="Try with us",this.baseUrl=Nt_baseUrl+"/assets",this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}onScroll(n){const i=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+i/10)}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.paymentForm=this.formBuilder.group({name:["",kl.required],email:["",kl.required]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}openPopup(n){this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(n){return n===ul.ESC?"by pressing ESC":n===ul.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}getStripPayemts(n,i,r){this.paymentData={name:n,amount:i},this.modalReference=this.modalService.open(r,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=Nt_baseUrl,this.payementservice.getStripSessionLink(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(n.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}changeTabTitle(n){this.tabTitle=n}ngAfterViewInit(){const n=this.videoElement.nativeElement;n.muted=!0,n.loop=!0,n.play().catch(i=>{console.log("Autoplay failed, user interaction may be required:",i)})}playInFullscreenWithAudio(){const n=this.videoElement.nativeElement;n.muted=!1,n.removeAttribute("controls"),n.play().then(()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen&&n.mozRequestFullScreen()}).catch(i=>{console.log("Error entering fullscreen with audio: ",i)})}onFullscreenChange(){const n=this.videoElement.nativeElement;document.fullscreenElement===n||document.webkitFullscreenElement===n||document.msFullscreenElement===n||document.mozFullScreenElement===n?n.play().catch(i=>{console.log("Could not play in fullscreen mode:",i)}):(n.setAttribute("controls",""),n.muted=!0)}openModal(){const n=document.getElementById("contactModal");this.renderer.addClass(n,"show"),this.renderer.setStyle(n,"display","block"),this.renderer.setStyle(n,"backgroundColor","rgba(0,0,0,0.5)"),document.body.classList.add("modal-open")}closeModal(){const n=document.getElementById("contactModal");this.renderer.removeClass(n,"show"),this.renderer.setStyle(n,"display","none"),document.body.classList.remove("modal-open")}onSubmit(){this.projectservice.sendContactForm(this.formData).subscribe(n=>{console.log("Email sent successfully",n),this.closeModal()},n=>{console.error("Error sending email",n)})}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su),Oe(N1))},e.\u0275cmp=oi({type:e,selectors:[["app-brading"]],viewQuery:function(n,i){if(1&n&&Rp(yUe,5),2&n){let r;Ur(r=jr())&&(i.videoElement=r.first)}},hostBindings:function(n,i){1&n&&St("fullscreenchange",function(o){return i.onFullscreenChange(o)},0,sm)("scroll",function(o){return i.onScroll(o)},!1,om)},decls:484,vars:25,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","#",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"textcolor2"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","backeeedf0"],[1,"logos"],[1,"fontsize12","mb-0"],["carouselSlide",""],[1,"section","packages","pt-0","backeeedf0"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],[1,"col-md-10","col-sm-11","col-11","mx-auto","mt-5"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],[1,"box"],[1,"cstbtn",3,"click"],[1,"col-xl-6","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","p-3","shadow",2,"max-width","600px"],[1,"text-start","p-3"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["aria-hidden","true",1,"fa","fa-bolt"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content","p-3"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-6"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-center","border-0","p-0","mb-2"],[1,"fa","fa-check","me-2"],[1,"cstprng-table-cta","position-relative","mtrem8","started"],[1,"size14","cntlink"],["routerLink","/contact",1,"text-decoration-none"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"success-story","bannerdrk"],[1,"col-md-11","col-sm-11","col-11","mx-auto"],[1,"content","mbrem8"],["carouselSlide","",3,"id"],[1,"section","bannerdrk","faqsection"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-md-10","col-sm-11","col-11","m-auto"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],[1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["style","z-index: 0;"],["payments",""],["type","button",1,"btn","btn-primary",3,"click"],["id","contactModal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],["contactForm","ngForm"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","contact",1,"form-label"],["type","text","id","contact","name","contact","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","rname",1,"form-label"],["type","text","id","rname","name","rname","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","remail",1,"form-label"],["type","email","id","remail","name","remail","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","rcontact",1,"form-label"],["type","text","id","rcontact","name","rcontact","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"mx-auto",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1","text-white"],[1,"size32","textcolor1","mt-0","mb30","text-white"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none","text-white"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3","text-white"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["id","content"],[1,"col-md-12"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],[1,"error"]],template:function(n,i){if(1&n){const r=vr();x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),E(8,"Build a "),x(9,"span",8),E(10,"Brand "),w()(),x(11,"h1",7),E(12,"that feels just right."),w()()()()()(),x(13,"div",9)(14,"ul",10)(15,"li")(16,"a",11),re(17,"img",12),w()(),x(18,"li")(19,"a",13),re(20,"img",14),w()(),x(21,"li")(22,"a",15),re(23,"img",12),w()(),x(24,"li")(25,"a",16),re(26,"img",17),w()()(),x(27,"div",18)(28,"p"),E(29,"Crafted with the precision of "),w(),x(30,"p"),E(31,"the golden ratio and originality"),w()()(),x(32,"div",19)(33,"p")(34,"a",20)(35,"span",21),E(36," Know About Branding"),w(),x(37,"span",22),re(38,"i",23),w()()()()()(),re(39,"div",24),x(40,"section",25)(41,"div",1)(42,"div",2)(43,"div",26)(44,"div",27)(45,"video",28,29),St("click",function(){return i.playInFullscreenWithAudio()}),re(47,"source",30)(48,"source",31),E(49," Your browser does not support the video tag. "),w()()()()()(),x(50,"section",32)(51,"div",1)(52,"div",2)(53,"div",33)(54,"div",34)(55,"h2",35)(56,"span",36),E(57," Your brand isn\u2019t just a"),w(),x(58,"span",37),E(59," Logo"),w(),E(60,". "),x(61,"span",38),E(62,"It\u2019s how the world sees you. At "),w(),x(63,"span",36),E(64," Pixtar"),w(),E(65,", "),x(66,"span",38),E(67," we blend art with strategy to create bespoke branding solutions "),w(),E(68," that "),x(69,"span",36),E(70,"make your story unforgettable."),w()()()()()()(),x(71,"section",39)(72,"div",40)(73,"div",2)(74,"div",33)(75,"div",41)(76,"h1",42),re(77,"div",43),E(78," Recent Works "),w()()(),x(79,"div",33)(80,"div",2),at(81,bUe,9,8,"div",44),w()()()(),x(82,"div",45)(83,"div",46)(84,"div",41)(85,"h1",42),re(86,"div",43),E(87," Recent Works "),w()()(),x(88,"owl-carousel-o",47),at(89,xUe,2,1,"ng-container",48),w()(),x(90,"div",49)(91,"div",2)(92,"div",50)(93,"div",51)(94,"div",52)(95,"div",53)(96,"p")(97,"a",54)(98,"span",55),E(99,"Book A Consultation"),w(),x(100,"span",22),re(101,"i",23),w()()()()()()()()()(),x(102,"section",56)(103,"div",1)(104,"div",2)(105,"div",33)(106,"div",57)(107,"p",58)(108,"span",59),E(109,"Why Choose Pixtar?"),w()(),x(110,"div",60)(111,"div",2)(112,"div",61)(113,"div",62),re(114,"img",63),x(115,"p",64),E(116,"Crafted With The Golden Ratio"),w(),x(117,"p",65),E(118,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),w()()(),x(119,"div",66)(120,"div",62),re(121,"img",63),x(122,"p",64),E(123,"Crafted With The Golden Ratio"),w(),x(124,"p",65),E(125,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),w()()(),x(126,"div",61)(127,"div",62),re(128,"img",63),x(129,"p",64),E(130,"Crafted With The Golden Ratio"),w(),x(131,"p",65),E(132,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),w()()()()()()()()()(),x(133,"section",67)(134,"div",1)(135,"div",2)(136,"div",33)(137,"div",68)(138,"p",69),E(139,"OUR CLIENTS INCLUDE\u2026"),w(),x(140,"owl-carousel-o",47),Jr(141),at(142,CUe,3,1,"ng-template",70),at(143,wUe,3,1,"ng-template",70),at(144,MUe,3,1,"ng-template",70),at(145,PUe,3,1,"ng-template",70),at(146,SUe,3,1,"ng-template",70),at(147,OUe,3,1,"ng-template",70),at(148,EUe,3,1,"ng-template",70),at(149,DUe,3,1,"ng-template",70),at(150,AUe,3,1,"ng-template",70),at(151,TUe,3,1,"ng-template",70),at(152,IUe,3,1,"ng-template",70),at(153,kUe,3,1,"ng-template",70),at(154,RUe,3,1,"ng-template",70),eo(),w()()()()()(),x(155,"section",71)(156,"div",1)(157,"div",2)(158,"div",72)(159,"div",73)(160,"h2",74)(161,"span",59),E(162,"What\u2019s Included in Our Branding Packages?"),w()(),x(163,"p",75),E(164,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),w()()(),x(165,"div",76)(166,"div",77)(167,"div",78)(168,"div",79)(169,"div",80)(170,"div",81)(171,"div",82)(172,"div",83),re(173,"div",84)(174,"div",85),w(),x(175,"div",21)(176,"p",86),E(177,"Slots available"),w()()()(),x(178,"h1",87),E(179,"Join "),w(),x(180,"h1",88),E(181,"Pixtar"),w(),x(182,"div",89)(183,"h4",90),E(184,"Book a 15-min intro Call"),w(),x(185,"p",86),E(186,"Learn more about how Pixtar "),x(187,"span",91),E(188," works and how it can help you."),w()()(),x(189,"div",92)(190,"h4",90),E(191,"Refer a friend & earn"),w(),x(192,"p",86),E(193,"Earn 5% monthly recurring "),x(194,"span",91),E(195," commission for each referral. "),w()(),x(196,"div",19)(197,"p")(198,"a",93),St("click",function(){return i.openModal()}),x(199,"span",21),E(200," Get Started"),w(),x(201,"span",22),re(202,"i",23),w()()()()()()()(),x(203,"div",94)(204,"div",95)(205,"h2",96),E(206),w(),x(207,"nav")(208,"div",97)(209,"button",98),St("click",function(){return i.changeTabTitle("Try with us")}),E(210," Explorer "),w(),x(211,"button",99),St("click",function(){return i.changeTabTitle("Most Suitable")}),re(212,"i",100),E(213," Navigator "),w(),x(214,"button",101),St("click",function(){return i.changeTabTitle("Create a Brand")}),E(215," Pioneer "),w()()(),x(216,"div",102)(217,"div",103)(218,"div",104)(219,"div",105)(220,"h4",106),E(221,"AED 7,995"),w(),x(222,"h5",107),E(223,"Perfect for startups."),w()(),re(224,"div",108),x(225,"div",109)(226,"h5",110),E(227,"What\u2019s included"),w(),x(228,"div",2)(229,"div",111)(230,"ul",112)(231,"li",113),re(232,"i",114),E(233,"Logo design (3 Options) "),w(),x(234,"li",113),re(235,"i",114),E(236,"Business card "),w(),x(237,"li",113),re(238,"i",114),E(239,"Letterhead and Envelop "),w()()(),x(240,"div",111)(241,"ul",112)(242,"li",113),re(243,"i",114),E(244,"1 Revisions (On shortlisted) "),w(),x(245,"li",113),re(246,"i",114),E(247,"2 Color options "),w(),x(248,"li",113),re(249,"i",114),E(250,"13 Days Delivery "),w()()()()(),x(251,"div",115)(252,"div",19)(253,"p")(254,"a",93),St("click",function(){Ln(r);const s=os(445);return tn(i.getStripPayemts("Explorer",7995,s))}),x(255,"span",21),E(256," Get Started"),w(),x(257,"span",22),re(258,"i",23),w()()()(),x(259,"p",116),E(260,"Or "),x(261,"a",117),E(262,"book a call"),w()()()()(),x(263,"div",118)(264,"div",104)(265,"div",105)(266,"h4",106),E(267,"AED 13,995"),w(),x(268,"h5",107),E(269,"A full brand identity suite."),w()(),re(270,"div",108),x(271,"div",109)(272,"h5",110),E(273,"What\u2019s included"),w(),x(274,"div",2)(275,"div",111)(276,"ul",112)(277,"li",113),re(278,"i",114),E(279,"Logo design (3 Options) "),w(),x(280,"li",113),re(281,"i",114),E(282,"Business card "),w(),x(283,"li",113),re(284,"i",114),E(285,"Letterhead and Envelop "),w(),x(286,"li",113),re(287,"i",114),E(288,"Brand Guidelines "),w()()(),x(289,"div",111)(290,"ul",112)(291,"li",113),re(292,"i",114),E(293,"Packing Design (1 Product) "),w(),x(294,"li",113),re(295,"i",114),E(296,"2 Revisions (On shortlisted) "),w(),x(297,"li",113),re(298,"i",114),E(299,"5 Color options "),w(),x(300,"li",113),re(301,"i",114),E(302,"10 Days Delivery "),w()()()()(),x(303,"div",115)(304,"div",19)(305,"p")(306,"a",93),St("click",function(){Ln(r);const s=os(445);return tn(i.getStripPayemts("Navigator",13995,s))}),x(307,"span",21),E(308," Get Started"),w(),x(309,"span",22),re(310,"i",23),w()()()(),x(311,"p",116),E(312,"Or "),x(313,"a",117),E(314,"book a call"),w()()()()(),x(315,"div",119)(316,"div",104)(317,"div",105)(318,"h4",106),E(319,"AED 48,995"),w(),x(320,"h5",107),E(321,"The ultimate package with unlimited requests."),w()(),re(322,"div",108),x(323,"div",109)(324,"h5",110),E(325,"What\u2019s included"),w(),x(326,"div",2)(327,"div",111)(328,"ul",112)(329,"li",113),re(330,"i",114),E(331,"Logo design (Unlimited) "),w(),x(332,"li",113),re(333,"i",114),E(334,"Business card "),w(),x(335,"li",113),re(336,"i",114),E(337,"Letterhead and Envelop "),w(),x(338,"li",113),re(339,"i",114),E(340,"Detailed Brand Guidelines "),w()()(),x(341,"div",111)(342,"ul",112)(343,"li",113),re(344,"i",114),E(345,"Packing Design (5 Product) "),w(),x(346,"li",113),re(347,"i",114),E(348,"Unlimited Revisions (Shortlisted) "),w(),x(349,"li",113),re(350,"i",114),E(351,"Unlimited Color options "),w(),x(352,"li",113),re(353,"i",114),E(354,"20 Days Delivery "),w()()()()(),x(355,"div",115)(356,"div",19)(357,"p")(358,"a",93),St("click",function(){Ln(r);const s=os(445);return tn(i.getStripPayemts("Pioneer",48995,s))}),x(359,"span",21),E(360," Get Started"),w(),x(361,"span",22),re(362,"i",23),w()()()(),x(363,"p",116),E(364,"Or "),x(365,"a",117),E(366,"book a call"),w()()()()()()()()()()()()(),x(367,"section",120)(368,"div",1)(369,"div",77)(370,"div",121),re(371,"div",122),x(372,"owl-carousel-o",47),Jr(373),at(374,NUe,17,1,"ng-template",123),eo(),w()()()()(),x(375,"section",124)(376,"div",1)(377,"div",2)(378,"div",125)(379,"div",2)(380,"div",126)(381,"div",127)(382,"h1",128),E(383," What "),re(384,"br"),E(385," makes Pixtar "),re(386,"br"),E(387," Special? "),re(388,"br"),x(389,"span"),E(390," And other FAQs\u2026 "),w()()()(),x(391,"div",129)(392,"div",91)(393,"div",130)(394,"div",131)(395,"div",132)(396,"h2",133)(397,"button",134),E(398," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(399,"div",135)(400,"div",136),E(401," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(402,"div",132)(403,"h2",137)(404,"button",138),E(405," Where are you based? "),w()(),x(406,"div",139)(407,"div",136),E(408," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(409,"div",132)(410,"h2",140)(411,"button",141),E(412," How are you different from a freelance designer? "),w()(),x(413,"div",142)(414,"div",136),E(415," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(416,"div",132)(417,"h2",143)(418,"button",144),E(419," What other design magic do you offer? "),w()(),x(420,"div",145)(421,"div",136),E(422," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(423,"div",132)(424,"h2",143)(425,"button",146),E(426," Who do you usually work with? "),w()(),x(427,"div",147)(428,"div",136),E(429," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(430,"div",132)(431,"h2",143)(432,"button",148),E(433," Which platforms do you use for building websites? "),w()(),x(434,"div",149)(435,"div",136),E(436," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(437,"div",132)(438,"h2",143)(439,"button",150),E(440," I\u2019m in! When can we get started? "),w()(),x(441,"div",151)(442,"div",136),E(443," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()(),at(444,BUe,30,4,"ng-template",152,153,rc),x(446,"button",154),St("click",function(){return i.openModal()}),E(447,"Open Contact Form"),w(),x(448,"div",155)(449,"div",156)(450,"div",157)(451,"div",158)(452,"h5",159),E(453,"Contact Form"),w(),x(454,"button",160),St("click",function(){return i.closeModal()}),w()(),x(455,"div",161)(456,"form",162,163),St("ngSubmit",function(){return i.onSubmit()}),x(458,"div",164)(459,"label",165),E(460,"Name"),w(),x(461,"input",166),St("ngModelChange",function(s){return i.formData.name=s}),w()(),x(462,"div",164)(463,"label",167),E(464,"Email"),w(),x(465,"input",168),St("ngModelChange",function(s){return i.formData.email=s}),w()(),x(466,"div",164)(467,"label",169),E(468,"Contact"),w(),x(469,"input",170),St("ngModelChange",function(s){return i.formData.contact=s}),w()(),x(470,"div",164)(471,"label",171),E(472,"R-Name"),w(),x(473,"input",172),St("ngModelChange",function(s){return i.formData.rname=s}),w()(),x(474,"div",164)(475,"label",173),E(476,"R-Email"),w(),x(477,"input",174),St("ngModelChange",function(s){return i.formData.remail=s}),w()(),x(478,"div",164)(479,"label",175),E(480,"R-Contact"),w(),x(481,"input",176),St("ngModelChange",function(s){return i.formData.rcontact=s}),w()(),x(482,"button",177),E(483,"Submit"),w()()()()()()}2&n&&(se(17),Se("src","",i.baseUrl,"/img/home/social-media/instagram.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp.svg",Ce),se(17),Je("ngStyle",Dl(23,zUe,i.sectionWidth+"%")),se(4),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(1),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(33),Je("ngForOf",i.allprojects),se(7),Je("options",i.recentoptions),se(1),Je("ngForOf",i.allprojects),se(25),Se("src","",i.baseUrl,"/img/home/art-icons/craft.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/solution.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/beyond.png",Ce),se(12),Je("options",i.clientslider),se(66),Ns(i.tabTitle),se(166),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl),se(87),Je("ngModel",i.formData.name),se(4),Je("ngModel",i.formData.email),se(4),Je("ngModel",i.formData.contact),se(4),Je("ngModel",i.formData.rname),se(4),Je("ngModel",i.formData.remail),se(4),Je("ngModel",i.formData.rcontact))},dependencies:[ja,ta,vm,kc,I0,jp,D0,A0,Qy,ED,ZC,Wp,wm,ph,Rc],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:400px;justify-content:start;align-items:center;left:8%!important;bottom:3%!important}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{left:3%!important}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:270px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:7.1rem}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:4rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1.5rem}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]{cursor:pointer}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:170px}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:33px;position:relative;display:inline-block;padding:10px 15px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#5b5b5f;border:1px solid #707070}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;border-radius:50px;margin-bottom:0;height:100%}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px;font-weight:400}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:6rem;bottom:10px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:100%}@media (max-width: 480px){  video{width:100%}}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:95px;z-index:3}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:166px}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:10px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}']}),e})();const jUe=["myVideo"];function VUe(e,t){if(1&e){const n=vr();x(0,"div",159)(1,"div",160)(2,"a",161)(3,"img",162),St("mouseenter",function(){const o=Ln(n).index;return tn(rt().onMouseEnter(o))})("mouseleave",function(){return Ln(n),tn(rt().onMouseLeave())}),w(),x(4,"div",163)(5,"p",164),E(6),w(),x(7,"p",165),re(8,"span",166),w()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=rt();se(2),Mc("href",n.link,Ce),se(1),uu("galleryimg",i,""),ic("src","",r.imagepath,"",n.image,"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function HUe(e,t){if(1&e&&(x(0,"a",167),re(1,"img",168),x(2,"div",163)(3,"p",164),E(4),w(),x(5,"p",165),re(6,"span",166),w()()()),2&e){const n=rt().$implicit,i=rt();Mc("href",n.link,Ce),se(1),ic("src","",i.imagepath,"",n.project_images[0],"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function GUe(e,t){if(1&e&&(Jr(0),at(1,HUe,7,5,"ng-template",128),eo()),2&e){const n=t.$implicit,i=t.index;se(1),Je("id",n+i)}}function WUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/dnour.svg",Ce)}}function qUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/crystal.svg",Ce)}}function YUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/miniaar.svg",Ce)}}function XUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/bni.svg",Ce)}}function $Ue(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/angle.svg",Ce)}}function QUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/pakhis.svg",Ce)}}function KUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/drminnie.svg",Ce)}}function ZUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/veddentta.svg",Ce)}}function JUe(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",Ce)}}function e7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/fractal.svg",Ce)}}function t7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/aetrio.svg",Ce)}}function n7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/wrae.svg",Ce)}}function i7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/beyou.svg",Ce)}}function r7e(e,t){if(1&e&&(x(0,"div",172)(1,"div",78)(2,"div",173)(3,"div",174),re(4,"img",175),w()(),x(5,"div",176)(6,"div",177)(7,"p",178),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",179),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",180),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",181)(14,"div",177)(15,"p",182),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-story-2.png",Ce)}}function o7e(e,t){1&e&&(x(0,"div",201)(1,"div"),E(2," Name is required. "),w()())}function s7e(e,t){if(1&e&&(x(0,"div",201)(1,"div"),E(2),w()()),2&e){const n=rt(2);se(2),sl(" ",n.hasEmailError("email","required")," ")}}function a7e(e,t){if(1&e){const n=vr();x(0,"div",183)(1,"h4",184),E(2),w(),x(3,"button",185),St("click",function(){return tn(Ln(n).$implicit.dismiss("Cross click"))}),x(4,"span",186),E(5," \xd7 "),w()()(),x(6,"div",187)(7,"div",188)(8,"div",1)(9,"div",2)(10,"div",111)(11,"div",133)(12,"form",189),St("ngSubmit",function(){return Ln(n),tn(rt().submitPayment())}),x(13,"div",190)(14,"div",191),re(15,"input",192),x(16,"label",193),E(17,"What's your name?"),w(),at(18,o7e,3,0,"div",194),w(),x(19,"div",191),re(20,"input",195),x(21,"label",193),E(22,"What\u2019s your e-mail?"),w(),at(23,s7e,3,1,"div",194),w(),x(24,"div",196)(25,"div",197),re(26,"input",198),w(),x(27,"div",199)(28,"button",200),St("click",function(){return Ln(n),tn(rt().closePopUp())}),E(29,"Cancel"),w()()()()()()()()()()()}if(2&e){const n=rt();se(2),sl(" ",n.paymentData.name," Payments "),se(10),Je("formGroup",n.paymentForm),se(6),Je("ngIf",n.submitted&&n.hasError("name","required")),se(5),Je("ngIf",n.submitted&&n.hasEmailError("email","required"))}}const l7e=function(e){return{width:e}};let c7e=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g,v){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.hasError=(y,b)=>this.paymentForm.controls[y].hasError(b),this.hasEmailError=(y,b)=>""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.tabTitle="Try with us",this.baseUrl=Nt_baseUrl+"/assets",this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}onScroll(n){const i=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+i/10)}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.paymentForm=this.formBuilder.group({name:["",kl.required],email:["",kl.required]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}openPopup(n){this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(n){return n===ul.ESC?"by pressing ESC":n===ul.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}getStripPayemts(n,i,r){this.paymentData={name:n,amount:i},this.modalReference=this.modalService.open(r,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=Nt_baseUrl,this.payementservice.getStripSessionLink(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(n.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}changeTabTitle(n){this.tabTitle=n}ngAfterViewInit(){const n=this.videoElement.nativeElement;n.muted=!0,n.loop=!0,n.play().catch(i=>{console.log("Autoplay failed, user interaction may be required:",i)})}playInFullscreenWithAudio(){const n=this.videoElement.nativeElement;n.muted=!1,n.removeAttribute("controls"),n.play().then(()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen&&n.mozRequestFullScreen()}).catch(i=>{console.log("Error entering fullscreen with audio: ",i)})}onFullscreenChange(){const n=this.videoElement.nativeElement;document.fullscreenElement===n||document.webkitFullscreenElement===n||document.msFullscreenElement===n||document.mozFullScreenElement===n?n.play().catch(i=>{console.log("Could not play in fullscreen mode:",i)}):(n.setAttribute("controls",""),n.muted=!0)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su),Oe(N1))},e.\u0275cmp=oi({type:e,selectors:[["app-website"]],viewQuery:function(n,i){if(1&n&&Rp(jUe,5),2&n){let r;Ur(r=jr())&&(i.videoElement=r.first)}},hostBindings:function(n,i){1&n&&St("scroll",function(o){return i.onScroll(o)},0,om)("fullscreenchange",function(o){return i.onFullscreenChange(o)},!1,sm)},decls:515,vars:19,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","home#strategy",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"col-md-12","col-sm-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand"],[1,"col-md-11","col-sm-11","col-11","mx-md-0","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor2"],[1,"barcy","text-color"],[1,"textcolor1"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","bg1"],[1,"logos"],[1,"fontsize12","mb-0"],["carouselSlide",""],[1,"section","packages","pt-0"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],[1,"col-md-10","col-sm-11","col-11","mx-auto","mt-5"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],[1,"box"],[1,"col-xl-6","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","p-3","shadow",2,"max-width","600px"],[1,"text-center","p-3"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["aria-hidden","true",1,"fa","fa-bolt"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content","p-3"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-12"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"list-group-item","d-flex","justify-content-start","align-items-center"],[1,"fa","fa-check"],[1,"ms-2"],[1,"cstprng-table-cta","position-relative","mtrem8","started"],[1,"cstbtn",3,"click"],[1,"size14","cntlink"],["routerLink","/contact",1,"text-decoration-none"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"success-story","bannerdrk"],[1,"col-md-11","col-sm-11","col-11","mx-auto"],[1,"content","mbrem8"],["carouselSlide","",3,"id"],[1,"section","bannerdrk","faqsection"],[1,"col-md-10","col-sm-11","col-11","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["style","z-index: 0;"],["payments",""],[1,"col-md-6"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1","text-white"],[1,"size32","textcolor1","mt-0","mb30","text-white"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none","text-white"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3","text-white"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","content"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Send",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],[1,"error"]],template:function(n,i){if(1&n){const r=vr();x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),E(8,"A Custom-Built "),x(9,"span",8),E(10,"Website "),w()(),x(11,"h1",7),E(12,"for Every Screen"),w()()()()()(),x(13,"div",9)(14,"ul",10)(15,"li")(16,"a",11),re(17,"img",12),w()(),x(18,"li")(19,"a",13),re(20,"img",14),w()(),x(21,"li")(22,"a",15),re(23,"img",12),w()(),x(24,"li")(25,"a",16),re(26,"img",17),w()()(),x(27,"div",18)(28,"p"),E(29,"Website is your virtual office so "),w(),x(30,"p"),E(31,"\u2014No Templates, Just Magic."),w()()(),x(32,"div",19)(33,"p")(34,"a",20)(35,"span",21),E(36," Know About Branding"),w(),x(37,"span",22),re(38,"i",23),w()()()()()(),re(39,"div",24),x(40,"section",25)(41,"div",1)(42,"div",2)(43,"div",26)(44,"div",27)(45,"video",28,29),St("click",function(){return i.playInFullscreenWithAudio()}),re(47,"source",30)(48,"source",31),E(49," Your browser does not support the video tag. "),w()()()()()(),x(50,"section",32)(51,"div",1)(52,"div",2)(53,"div",33)(54,"div",34)(55,"h2",35)(56,"span",36),E(57,"We just don\u2019t build"),w(),x(58,"span",37),E(59," Websites"),w(),x(60,"span",38),E(61," ; we create experiences."),w(),x(62,"span",36),E(63,"Our "),w(),x(64,"span",38),E(65," custom-built websites are fast, functional"),w(),E(66,", "),x(67,"span",36),E(68,"& perfectly aligned with your business goals \u2014because "),w(),x(69,"span",38),E(70,"we don\u2019t believe in templates."),w()()()()()()(),x(71,"section",39)(72,"div",40)(73,"div",2)(74,"div",41)(75,"div",42)(76,"h1",43),re(77,"div",44),E(78," Recent Works "),w()()(),x(79,"div",41)(80,"div",2),at(81,VUe,9,8,"div",45),w()()()(),x(82,"div",46)(83,"div",47)(84,"div",42)(85,"h1",43),re(86,"div",44),E(87," Recent Works "),w()()(),x(88,"owl-carousel-o",48),at(89,GUe,2,1,"ng-container",49),w()(),x(90,"div",50)(91,"div",2)(92,"div",51)(93,"div",52)(94,"div",53)(95,"div",54)(96,"p")(97,"a",55)(98,"span",56),E(99,"Book A Consultation"),w(),x(100,"span",22),re(101,"i",23),w()()()()()()()()()(),x(102,"section",57)(103,"div",1)(104,"div",2)(105,"div",41)(106,"div",58)(107,"p",59)(108,"span",60),E(109,"Why Choose Pixtar?"),w()(),x(110,"div",61)(111,"div",2)(112,"div",62)(113,"div",63),re(114,"img",64),x(115,"p",65),E(116,"Crafted With The Golden Ratio"),w(),x(117,"p",66),E(118,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),w()()(),x(119,"div",67)(120,"div",63),re(121,"img",64),x(122,"p",65),E(123,"Custom Solutions. No Templates. Ever."),w(),x(124,"p",66),E(125,"Every brand is unique, and so is our approach. We build from scratch, ensuring your business is reflected in every detail."),w()()(),x(126,"div",62)(127,"div",63),re(128,"img",64),x(129,"p",65),E(130,"Beyond The Limits, Always Transparent"),w(),x(131,"p",66),E(132,"We don\u2019t just deliver; we partner with you, going above and beyond with 100% transparency at every step of the way."),w()()()()()()()()()(),x(133,"section",68)(134,"div",1)(135,"div",2)(136,"div",41)(137,"div",69)(138,"p",70),E(139,"OUR CLIENTS INCLUDE\u2026"),w(),x(140,"owl-carousel-o",48),Jr(141),at(142,WUe,3,1,"ng-template",71),at(143,qUe,3,1,"ng-template",71),at(144,YUe,3,1,"ng-template",71),at(145,XUe,3,1,"ng-template",71),at(146,$Ue,3,1,"ng-template",71),at(147,QUe,3,1,"ng-template",71),at(148,KUe,3,1,"ng-template",71),at(149,ZUe,3,1,"ng-template",71),at(150,JUe,3,1,"ng-template",71),at(151,e7e,3,1,"ng-template",71),at(152,t7e,3,1,"ng-template",71),at(153,n7e,3,1,"ng-template",71),at(154,i7e,3,1,"ng-template",71),eo(),w()()()()()(),x(155,"section",72)(156,"div",1)(157,"div",2)(158,"div",73)(159,"div",74)(160,"h2",75)(161,"span",60),E(162,"What\u2019s Included in Our Branding Packages?"),w()(),x(163,"p",76),E(164,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),w()()(),x(165,"div",77)(166,"div",78)(167,"div",79)(168,"div",80)(169,"div",81)(170,"div",82)(171,"div",83)(172,"div",84),re(173,"div",85)(174,"div",86),w(),x(175,"div",21)(176,"p",87),E(177,"Slots available"),w()()()(),x(178,"h1",88),E(179,"Join "),w(),x(180,"h1",89),E(181,"Pixtar"),w(),x(182,"div",90)(183,"h4",91),E(184,"Book a 15-min intro Call"),w(),x(185,"p",87),E(186,"Learn more about how Pixtar "),x(187,"span",92),E(188," works and how it can help you."),w()()(),x(189,"div",93)(190,"h4",91),E(191,"Refer a friend & earn"),w(),x(192,"p",87),E(193,"Earn 5% monthly recurring "),x(194,"span",92),E(195," commission for each referral."),w()()()()()(),x(196,"div",94)(197,"div",95)(198,"h2",96),E(199),w(),x(200,"nav")(201,"div",97)(202,"button",98),St("click",function(){return i.changeTabTitle("Try with us")}),E(203,"Explorer"),w(),x(204,"button",99),St("click",function(){return i.changeTabTitle("Most Suitable")}),re(205,"i",100),E(206," Navigator"),w(),x(207,"button",101),St("click",function(){return i.changeTabTitle("Create a Brand")}),E(208,"Pioneer"),w()()(),x(209,"div",102)(210,"div",103)(211,"div",104)(212,"div",105)(213,"h4",106),E(214,"AED 9,995"),w(),x(215,"h5",107),E(216,"Static website, Perfect for startups. "),w()(),re(217,"div",108),x(218,"div",109)(219,"h5",110),E(220,"What\u2019s included"),w(),x(221,"div",2)(222,"div",111)(223,"ul",112)(224,"li",113)(225,"div",114)(226,"div",115),E(227,"Tailored Ui/Ux Designing"),w()()(),x(228,"li",116),re(229,"i",117),x(230,"span",118),E(231,"Custom Website Design upto 1 Theme Option"),w()(),x(232,"li",113)(233,"div",114)(234,"div",115),E(235,"Development"),w()()(),x(236,"li",116),re(237,"i",117),x(238,"span",118),E(239,"Customized Front-End Development"),w()(),x(240,"li",116),re(241,"i",117),x(242,"span",118),E(243,"Mobile, Tablet, & Desktop Responsive Design"),w()(),x(244,"li",116),re(245,"i",117),x(246,"span",118),E(247,"Up to 8 Pages"),w()(),x(248,"li",116),re(249,"i",117),x(250,"span",118),E(251,"Ability for Future Enhancements"),w()(),x(252,"li",116),re(253,"i",117),x(254,"span",118),E(255,"Hosting Support"),w()(),x(256,"li",113)(257,"div",114)(258,"div",115),E(259,"Standout features"),w()()(),x(260,"li",116),re(261,"i",117),x(262,"span",118),E(263,"Contact us Email Integration"),w()()()()()(),x(264,"div",119)(265,"div",19)(266,"p")(267,"a",120),St("click",function(){Ln(r);const s=os(514);return tn(i.getStripPayemts("Explorer",9995,s))}),x(268,"span",21),E(269," Get Started"),w(),x(270,"span",22),re(271,"i",23),w()()()(),x(272,"p",121),E(273,"Or "),x(274,"a",122),E(275,"book a call"),w()()()()(),x(276,"div",123)(277,"div",104)(278,"div",105)(279,"h4",106),E(280,"AED 24,995"),w(),x(281,"h5",107),E(282,"Dynamic Website."),w()(),re(283,"div",108),x(284,"div",109)(285,"h5",110),E(286,"What\u2019s included"),w(),x(287,"div",2)(288,"div",111)(289,"ul",112)(290,"li",113)(291,"div",114)(292,"div",115),E(293,"Tailored Ui/Ux Designing"),w()()(),x(294,"li",116),re(295,"i",117),x(296,"span",118),E(297,"Custom Website Design upto 3 Theme Option"),w()(),x(298,"li",113)(299,"div",114)(300,"div",115),E(301,"Development"),w()()(),x(302,"li",116),re(303,"i",117),x(304,"span",118),E(305,"Custom Front-End Development"),w()(),x(306,"li",116),re(307,"i",117),x(308,"span",118),E(309,"Mobile, Tablet, and Desktop Responsive Design"),w()(),x(310,"li",116),re(311,"i",117),x(312,"span",118),E(313,"Up to 20 Pages (Based on Final Requirements)"),w()(),x(314,"li",116),re(315,"i",117),x(316,"span",118),E(317,"Ability for Future Enhancements"),w()(),x(318,"li",116),re(319,"i",117),x(320,"span",118),E(321,"Hosting Support"),w()(),x(322,"li",113)(323,"div",114)(324,"div",115),E(325,"Standout features"),w()()(),x(326,"li",116),re(327,"i",117),x(328,"span",118),E(329,"Admin Panel and User Management"),w()(),x(330,"li",116),re(331,"i",117),x(332,"span",118),E(333,"SEO-Optimized Development"),w()(),x(334,"li",116),re(335,"i",117),x(336,"span",118),E(337,"Google My Business Setup"),w()(),x(338,"li",116),re(339,"i",117),x(340,"span",118),E(341,"Appointment Booking Integration"),w()(),x(342,"li",116),re(343,"i",117),x(344,"span",118),E(345,"Contact Us Email Integration"),w()(),x(346,"li",116),re(347,"i",117),x(348,"span",118),E(349,"Google Maps Integration"),w()()()()()(),x(350,"div",119)(351,"div",19)(352,"p")(353,"a",120),St("click",function(){Ln(r);const s=os(514);return tn(i.getStripPayemts("Navigator",24995,s))}),x(354,"span",21),E(355," Get Started"),w(),x(356,"span",22),re(357,"i",23),w()()()(),x(358,"p",121),E(359,"Or "),x(360,"a",122),E(361,"book a call"),w()()()()(),x(362,"div",124)(363,"div",104)(364,"div",105)(365,"h4",106),E(366,"AED 59,995"),w(),x(367,"h5",107),E(368,"The ultimate package with unlimited requests."),w()(),re(369,"div",108),x(370,"div",109)(371,"h5",110),E(372,"What\u2019s included"),w(),x(373,"div",2)(374,"div",111)(375,"ul",112)(376,"li",113)(377,"div",114)(378,"div",115),E(379,"Tailored Ui/Ux Designing"),w()()(),x(380,"li",116),re(381,"i",117),x(382,"span",118),E(383,"Custom Website Design Upto 5 Theme Options"),w()(),x(384,"li",113)(385,"div",114)(386,"div",115),E(387,"Development & Standout Features"),w()()(),x(388,"li",116),re(389,"i",117),x(390,"span",118),E(391,"Website Integration with CRM"),w()(),x(392,"li",116),re(393,"i",117),x(394,"span",118),E(395,"Integration with other websites"),w()(),x(396,"li",116),re(397,"i",117),x(398,"span",118),E(399,"Access to your Partners & Distributers to Create and Manage thier Account"),w()(),x(400,"li",116),re(401,"i",117),x(402,"span",118),E(403,"User Pro\ufb01le Management"),w()(),x(404,"li",116),re(405,"i",117),x(406,"span",118),E(407,"Unlimited Brochures Download options"),w()(),x(408,"li",116),re(409,"i",117),x(410,"span",118),E(411,"WhatsApp Integration"),w()(),x(412,"li",116),re(413,"i",117),x(414,"span",118),E(415,"Live Chat Integration"),w()(),x(416,"li",116),re(417,"i",117),x(418,"span",118),E(419,"Google Reviews Integration"),w()(),x(420,"li",116),re(421,"i",117),x(422,"span",118),E(423,"Social Media Live Updates Integration"),w()()()()()(),x(424,"div",119)(425,"div",19)(426,"p")(427,"a",120),St("click",function(){Ln(r);const s=os(514);return tn(i.getStripPayemts("Pioneer",59995,s))}),x(428,"span",21),E(429," Get Started"),w(),x(430,"span",22),re(431,"i",23),w()()()(),x(432,"p",121),E(433,"Or "),x(434,"a",122),E(435,"book a call"),w()()()()()()()()()()()()(),x(436,"section",125)(437,"div",1)(438,"div",2)(439,"div",126),re(440,"div",127),x(441,"owl-carousel-o",48),Jr(442),at(443,r7e,17,1,"ng-template",128),eo(),w()()()()(),x(444,"section",129)(445,"div",1)(446,"div",2)(447,"div",130)(448,"div",2)(449,"div",131)(450,"div",132)(451,"h1",133),E(452," What "),re(453,"br"),E(454," makes Pixtar "),re(455,"br"),E(456," Special? "),re(457,"br"),x(458,"span"),E(459," And other FAQs\u2026 "),w()()()(),x(460,"div",134)(461,"div",92)(462,"div",135)(463,"div",136)(464,"div",137)(465,"h2",138)(466,"button",139),E(467," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(468,"div",140)(469,"div",141),E(470," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(471,"div",137)(472,"h2",142)(473,"button",143),E(474," Where are you based? "),w()(),x(475,"div",144)(476,"div",141),E(477," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(478,"div",137)(479,"h2",145)(480,"button",146),E(481," How are you different from a freelance designer? "),w()(),x(482,"div",147)(483,"div",141),E(484," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(485,"div",137)(486,"h2",148)(487,"button",149),E(488," What other design magic do you offer? "),w()(),x(489,"div",150)(490,"div",141),E(491," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(492,"div",137)(493,"h2",148)(494,"button",151),E(495," Who do you usually work with? "),w()(),x(496,"div",152)(497,"div",141),E(498," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(499,"div",137)(500,"h2",148)(501,"button",153),E(502," Which platforms do you use for building websites? "),w()(),x(503,"div",154)(504,"div",141),E(505," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(506,"div",137)(507,"h2",148)(508,"button",155),E(509," I\u2019m in! When can we get started? "),w()(),x(510,"div",156)(511,"div",141),E(512," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()(),at(513,a7e,30,4,"ng-template",157,158,rc)}2&n&&(se(17),Se("src","",i.baseUrl,"/img/home/social-media/instagram.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp.svg",Ce),se(17),Je("ngStyle",Dl(17,l7e,i.sectionWidth+"%")),se(4),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(1),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(33),Je("ngForOf",i.allprojects),se(7),Je("options",i.recentoptions),se(1),Je("ngForOf",i.allprojects),se(25),Se("src","",i.baseUrl,"/img/home/art-icons/craft.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/solution.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/beyond.png",Ce),se(12),Je("options",i.clientslider),se(59),Ns(i.tabTitle),se(242),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl))},dependencies:[ja,ta,vm,kc,I0,jp,D0,A0,Wp,wm,ph,Rc],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:95px;z-index:3}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:401px;justify-content:start;align-items:center;left:8%!important;bottom:3%!important}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:7.1rem}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:4rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1.5rem}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:170px}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px 30px 100px;border-radius:50px;height:auto}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:33px;position:relative;display:inline-block;padding:10px 15px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#5b5b5f;border:1px solid #707070}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;border-radius:50px;margin-bottom:0;height:100%}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:none!important}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px;font-weight:400}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:6rem;bottom:10px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:100%}@media (max-width: 480px){  video{width:100%}}  .modal-body{padding:10px}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:10px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}']}),e})();const d7e=["myVideo"];function h7e(e,t){if(1&e){const n=vr();x(0,"div",159)(1,"div",160)(2,"a",161)(3,"img",162),St("mouseenter",function(){const o=Ln(n).index;return tn(rt().onMouseEnter(o))})("mouseleave",function(){return Ln(n),tn(rt().onMouseLeave())}),w(),x(4,"div",163)(5,"p",164),E(6),w(),x(7,"p",165),re(8,"span",166),w()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=rt();se(2),Mc("href",n.link,Ce),se(1),uu("galleryimg",i,""),ic("src","",r.imagepath,"",n.image,"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function u7e(e,t){if(1&e&&(x(0,"a",167),re(1,"img",168),x(2,"div",163)(3,"p",164),E(4),w(),x(5,"p",165),re(6,"span",166),w()()()),2&e){const n=rt().$implicit,i=rt();Mc("href",n.link,Ce),se(1),ic("src","",i.imagepath,"",n.project_images[0],"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function p7e(e,t){if(1&e&&(Jr(0),at(1,u7e,7,5,"ng-template",128),eo()),2&e){const n=t.$implicit,i=t.index;se(1),Je("id",n+i)}}function f7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/dnour.svg",Ce)}}function m7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/crystal.svg",Ce)}}function g7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/miniaar.svg",Ce)}}function v7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/bni.svg",Ce)}}function y7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/angle.svg",Ce)}}function b7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/pakhis.svg",Ce)}}function _7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/drminnie.svg",Ce)}}function x7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/veddentta.svg",Ce)}}function C7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/autokoorosh.svg",Ce)}}function w7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/fractal.svg",Ce)}}function M7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/aetrio.svg",Ce)}}function P7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/wrae.svg",Ce)}}function S7e(e,t){if(1&e&&(x(0,"div",169)(1,"a",170),re(2,"img",171),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/img/home/logos/beyou.svg",Ce)}}function O7e(e,t){if(1&e&&(x(0,"div",172)(1,"div",79)(2,"div",173)(3,"div",174),re(4,"img",175),w()(),x(5,"div",176)(6,"div",177)(7,"p",178),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",179),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",180),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",181)(14,"div",177)(15,"p",182),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-story.png",Ce)}}function E7e(e,t){1&e&&(x(0,"div",201)(1,"div"),E(2," Name is required. "),w()())}function D7e(e,t){if(1&e&&(x(0,"div",201)(1,"div"),E(2),w()()),2&e){const n=rt(2);se(2),sl(" ",n.hasEmailError("email","required")," ")}}function A7e(e,t){if(1&e){const n=vr();x(0,"div",183)(1,"h5",184),E(2),w(),x(3,"button",185),St("click",function(){return tn(Ln(n).$implicit.dismiss("Cross click"))}),x(4,"span",186),E(5," \xd7 "),w()()(),x(6,"div",187)(7,"div",188)(8,"div",1)(9,"div",3)(10,"div",112)(11,"div",133)(12,"form",189),St("ngSubmit",function(){return Ln(n),tn(rt().submitPayment())}),x(13,"div",190)(14,"div",191),re(15,"input",192),x(16,"label",193),E(17,"What's your name?"),w(),at(18,E7e,3,0,"div",194),w(),x(19,"div",191),re(20,"input",195),x(21,"label",193),E(22,"What\u2019s your e-mail?"),w(),at(23,D7e,3,1,"div",194),w(),x(24,"div",196)(25,"div",197),re(26,"input",198),w(),x(27,"div",199)(28,"button",200),St("click",function(){return Ln(n),tn(rt().closePopUp())}),E(29,"Cancel"),w()()()()()()()()()()()}if(2&e){const n=rt();se(2),sl(" Complete Your Payment - ",n.paymentData.name," "),se(10),Je("formGroup",n.paymentForm),se(6),Je("ngIf",n.submitted&&n.hasError("name","required")),se(5),Je("ngIf",n.submitted&&n.hasEmailError("email","required"))}}const T7e=function(e){return{width:e}};let I7e=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g,v){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:2},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.tabTitle="Start your eCommerce",this.hasError=(y,b)=>this.paymentForm.controls[y].hasError(b),this.hasEmailError=(y,b)=>""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.baseUrl=Nt_baseUrl+"/assets",this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}onScroll(n){const i=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+i/10)}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.paymentForm=this.formBuilder.group({name:["",kl.required],email:["",kl.required]}),setTimeout(()=>{const n=document.getElementById("canvas");this.spline=new aS(n),this.spline.load("https://prod.spline.design/ETc1NgtkFiSuPoFT/scene.splinecode")},500)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}openPopup(n){this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(n){return n===ul.ESC?"by pressing ESC":n===ul.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}changeTabTitle(n){this.tabTitle=n}getStripPayemts(n,i,r){this.paymentData={name:n,amount:i},this.modalReference=this.modalService.open(r,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=Nt_baseUrl,this.payementservice.getStripSessionLink(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(n.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}ngAfterViewInit(){const n=this.videoElement.nativeElement;n.muted=!0,n.loop=!0,n.play().catch(i=>{console.log("Autoplay failed, user interaction may be required:",i)})}playInFullscreenWithAudio(){const n=this.videoElement.nativeElement;n.muted=!1,n.removeAttribute("controls"),n.play().then(()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen&&n.mozRequestFullScreen()}).catch(i=>{console.log("Error entering fullscreen with audio: ",i)})}onFullscreenChange(){const n=this.videoElement.nativeElement;document.fullscreenElement===n||document.webkitFullscreenElement===n||document.msFullscreenElement===n||document.mozFullScreenElement===n?n.play().catch(i=>{console.log("Could not play in fullscreen mode:",i)}):(n.setAttribute("controls",""),n.muted=!0)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su),Oe(N1))},e.\u0275cmp=oi({type:e,selectors:[["app-ecommerce"]],viewQuery:function(n,i){if(1&n&&Rp(d7e,5),2&n){let r;Ur(r=jr())&&(i.videoElement=r.first)}},hostBindings:function(n,i){1&n&&St("scroll",function(o){return i.onScroll(o)},0,om)("fullscreenchange",function(o){return i.onFullscreenChange(o)},!1,sm)},decls:517,vars:19,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],["id","canvas",1,"img-globe","floatimg"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","home#strategy",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor2"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto","m-auto"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"h1","weight300","text-center"],[1,"textcolor1","size53"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","client","bg1"],[1,"logos"],[1,"fontsize12","mb-0"],["carouselSlide",""],[1,"section","packages","pt-0"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"packages-section"],[1,"wght500","text-center","mb-3","mt-0"],[1,"size24","textcolor2","text-center"],[1,"col-md-10","col-sm-11","col-11","mx-auto","mt-5"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],[1,"box"],[1,"col-xl-6","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","p-3","shadow",2,"max-width","600px"],[1,"text-center","p-3"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["aria-hidden","true",1,"fa","fa-bolt"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content","p-3"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-12"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"list-group-item","d-flex","justify-content-start","align-items-center"],[1,"fa","fa-check"],[1,"ms-2"],[1,"cstprng-table-cta","position-relative","mtrem8","started"],[1,"cstbtn",3,"click"],[1,"size14","cntlink"],["routerLink","/contact",1,"text-decoration-none"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"success-story","bannerdrk"],[1,"content","mbrem8"],["carouselSlide","",3,"id"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"section","bannerdrk","faqsection"],[1,"col-md-10","col-sm-11","col-11","m-auto"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],[1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["style","z-index: 0;"],["payments",""],[1,"col-md-6"],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["target","_self",3,"href"],[3,"src"],[1,"team-img","position-relative","overflow-hidden"],["href","#","target","_blank","rel","noopener noreferrer"],[3,"src","alt"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1","text-white"],[1,"size32","textcolor1","mt-0","mb30","text-white"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none","text-white"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3","text-white"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","content"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],[1,"error"]],template:function(n,i){if(1&n){const r=vr();x(0,"section",0)(1,"div",1),re(2,"canvas",2),x(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"Sell Globally with "),w(),x(10,"h1",8),E(11,"Custom"),x(12,"span",9),E(13,"eCommerce"),w()()()()()()(),x(14,"div",10)(15,"ul",11)(16,"li")(17,"a",12),re(18,"img",13),w()(),x(19,"li")(20,"a",14),re(21,"img",15),w()(),x(22,"li")(23,"a",16),re(24,"img",13),w()(),x(25,"li")(26,"a",17),re(27,"img",18),w()()(),x(28,"div",19)(29,"p"),E(30,"We know what it takes to make "),w(),x(31,"p"),E(32,"A successful eCommerce Store"),w()()(),x(33,"div",20)(34,"p")(35,"a",21)(36,"span",22),E(37," Know About Branding"),w(),x(38,"span",23),re(39,"i",24),w()()()()()(),re(40,"div",25),x(41,"section",26)(42,"div",1)(43,"div",3)(44,"div",27)(45,"div",28)(46,"video",29,30),St("click",function(){return i.playInFullscreenWithAudio()}),re(48,"source",31)(49,"source",32),E(50," Your browser does not support the video tag. "),w()()()()()(),x(51,"section",33)(52,"div",1)(53,"div",3)(54,"div",34)(55,"div",35)(56,"h2",36)(57,"span",37),E(58,"A beautiful online store isn\u2019t enough "),w(),x(59,"span",38),E(60," \u2014you need one that converts. "),w(),E(61,", "),x(62,"span",37),E(63,"Whether it\u2019s Magento, Shopify, or Node.js, "),w(),x(64,"span",38),E(65,"we create custom "),x(66,"span",39),E(67," eCommerce"),w(),E(68,". platforms that perform, scale, and grow with you."),w()()()()()()(),x(69,"section",40)(70,"div",41)(71,"div",3)(72,"div",34)(73,"div",42)(74,"h1",43),re(75,"div",44),E(76," Recent Works "),w()()(),x(77,"div",45)(78,"div",3),at(79,h7e,9,8,"div",46),w()()()(),x(80,"div",47)(81,"div",48)(82,"div",42)(83,"h1",43),re(84,"div",44),E(85," Recent Works "),w()()(),x(86,"owl-carousel-o",49),at(87,p7e,2,1,"ng-container",50),w()(),x(88,"div",51)(89,"div",3)(90,"div",52)(91,"div",53)(92,"div",54)(93,"div",55)(94,"p")(95,"a",56)(96,"span",57),E(97,"Book A Consultation"),w(),x(98,"span",23),re(99,"i",24),w()()()()()()()()()(),x(100,"section",58)(101,"div",1)(102,"div",3)(103,"div",34)(104,"div",59)(105,"p",60)(106,"span",61),E(107,"Why Choose Pixtar?"),w()(),x(108,"div",62)(109,"div",3)(110,"div",63)(111,"div",64),re(112,"img",65),x(113,"p",66),E(114,"Crafted With The Golden Ratio"),w(),x(115,"p",67),E(116,"Everything we design follows the timeless principles of the golden ratio\u2014creating perfect harmony between form and function."),w()()(),x(117,"div",68)(118,"div",64),re(119,"img",65),x(120,"p",66),E(121,"Custom Solutions. No Templates. Ever."),w(),x(122,"p",67),E(123,"Every brand is unique, and so is our approach. We build from scratch, ensuring your business is reflected in every detail."),w()()(),x(124,"div",63)(125,"div",64),re(126,"img",65),x(127,"p",66),E(128,"Beyond The Limits, Always Transparent"),w(),x(129,"p",67),E(130,"We don\u2019t just deliver; we partner with you, going above and beyond with 100% transparency at every step of the way."),w()()()()()()()()()(),x(131,"section",69)(132,"div",1)(133,"div",3)(134,"div",34)(135,"div",70)(136,"p",71),E(137,"OUR CLIENTS INCLUDE\u2026"),w(),x(138,"owl-carousel-o",49),Jr(139),at(140,f7e,3,1,"ng-template",72),at(141,m7e,3,1,"ng-template",72),at(142,g7e,3,1,"ng-template",72),at(143,v7e,3,1,"ng-template",72),at(144,y7e,3,1,"ng-template",72),at(145,b7e,3,1,"ng-template",72),at(146,_7e,3,1,"ng-template",72),at(147,x7e,3,1,"ng-template",72),at(148,C7e,3,1,"ng-template",72),at(149,w7e,3,1,"ng-template",72),at(150,M7e,3,1,"ng-template",72),at(151,P7e,3,1,"ng-template",72),at(152,S7e,3,1,"ng-template",72),eo(),w()()()()()(),x(153,"section",73)(154,"div",1)(155,"div",3)(156,"div",74)(157,"div",75)(158,"h2",76)(159,"span",61),E(160,"What\u2019s Included in Our Branding Packages?"),w()(),x(161,"p",77),E(162,"Whether you\u2019re starting from scratch or need a brand overhaul, we\u2019ve got you covered."),w()()(),x(163,"div",78)(164,"div",79)(165,"div",80)(166,"div",81)(167,"div",82)(168,"div",83)(169,"div",84)(170,"div",85),re(171,"div",86)(172,"div",87),w(),x(173,"div",22)(174,"p",88),E(175,"Slots available"),w()()()(),x(176,"h1",89),E(177,"Join "),w(),x(178,"h1",90),E(179,"Pixtar"),w(),x(180,"div",91)(181,"h4",92),E(182,"Book a 15-min intro Call"),w(),x(183,"p",88),E(184,"Learn more about how Pixtar "),x(185,"span",93),E(186," works and how it can help you."),w()()(),x(187,"div",94)(188,"h4",92),E(189,"Refer a friend & earn"),w(),x(190,"p",88),E(191,"Earn 5% monthly recurring "),x(192,"span",93),E(193," commission for each referral."),w()()()()()(),x(194,"div",95)(195,"div",96)(196,"h2",97),E(197),w(),x(198,"nav")(199,"div",98)(200,"button",99),St("click",function(){return i.changeTabTitle("Start your eCommerce")}),E(201," Shopify "),w(),x(202,"button",100),St("click",function(){return i.changeTabTitle("Grow eCommerce Globally")}),re(203,"i",101),E(204," Magento "),w(),x(205,"button",102),St("click",function(){return i.changeTabTitle("Premium eCommerce")}),E(206," Custom Commerce "),w()()(),x(207,"div",103)(208,"div",104)(209,"div",105)(210,"div",106)(211,"h4",107),E(212,"AED 14,995"),w(),x(213,"h5",108),E(214,"Perfect for startups."),w()(),re(215,"div",109),x(216,"div",110)(217,"h5",111),E(218,"What\u2019s included"),w(),x(219,"div",3)(220,"div",112)(221,"ul",113)(222,"li",114)(223,"div",115)(224,"div",116),E(225,"Tailored Ui/Ux Designing"),w()()(),x(226,"li",117),re(227,"i",118),x(228,"span",119),E(229,"Custom Website Design 1 Theme Option"),w()(),x(230,"li",114)(231,"div",115)(232,"div",116),E(233,"Development"),w()()(),x(234,"li",117),re(235,"i",118),x(236,"span",119),E(237,"Customized Front-End Development"),w()(),x(238,"li",117),re(239,"i",118),x(240,"span",119),E(241,"Mobile, Tablet, & Desktop Responsive Design"),w()(),x(242,"li",117),re(243,"i",118),x(244,"span",119),E(245,"Unlimited Products Listing"),w()(),x(246,"li",117),re(247,"i",118),x(248,"span",119),E(249,"Ability for Future Enhancements"),w()(),x(250,"li",117),re(251,"i",118),x(252,"span",119),E(253,"Hosting Support"),w()(),x(254,"li",114)(255,"div",115)(256,"div",116),E(257,"Standout features"),w()()(),x(258,"li",117),re(259,"i",118),x(260,"span",119),E(261,"Contact us Email Integration"),w()(),x(262,"li",117),re(263,"i",118),x(264,"span",119),E(265,"Payment Gateway Integration"),w()()()()()(),x(266,"div",120)(267,"div",20)(268,"p")(269,"a",121),St("click",function(){Ln(r);const s=os(516);return tn(i.getStripPayemts("Shopify",14995,s))}),x(270,"span",22),E(271," Get Started"),w(),x(272,"span",23),re(273,"i",24),w()()()(),x(274,"p",122),E(275,"Or "),x(276,"a",123),E(277,"book a call"),w()()()()(),x(278,"div",124)(279,"div",105)(280,"div",106)(281,"h4",107),E(282,"AED 24,995"),w(),x(283,"h5",108),E(284,"A full brand identity suite."),w()(),re(285,"div",109),x(286,"div",110)(287,"h5",111),E(288,"What\u2019s included"),w(),x(289,"div",3)(290,"div",112)(291,"ul",113)(292,"li",114)(293,"div",115)(294,"div",116),E(295,"Tailored Ui/Ux Designing"),w()()(),x(296,"li",117),re(297,"i",118),x(298,"span",119),E(299,"Custom Website Design upto 3 Theme Option"),w()(),x(300,"li",114)(301,"div",115)(302,"div",116),E(303,"Development"),w()()(),x(304,"li",117),re(305,"i",118),x(306,"span",119),E(307,"Custom Front-End Development"),w()(),x(308,"li",117),re(309,"i",118),x(310,"span",119),E(311,"Mobile, Tablet, and Desktop Responsive Design"),w()(),x(312,"li",117),re(313,"i",118),x(314,"span",119),E(315,"Up to 20 Pages (Based on Final Requirements)"),w()(),x(316,"li",117),re(317,"i",118),x(318,"span",119),E(319,"Ability for Future Enhancements"),w()(),x(320,"li",117),re(321,"i",118),x(322,"span",119),E(323,"Hosting Support"),w()(),x(324,"li",114)(325,"div",115)(326,"div",116),E(327,"Standout features"),w()()(),x(328,"li",117),re(329,"i",118),x(330,"span",119),E(331,"Admin Panel and User Management"),w()(),x(332,"li",117),re(333,"i",118),x(334,"span",119),E(335,"SEO-Optimized Development"),w()(),x(336,"li",117),re(337,"i",118),x(338,"span",119),E(339,"Google My Business Setup"),w()(),x(340,"li",117),re(341,"i",118),x(342,"span",119),E(343,"Appointment Booking Integration"),w()(),x(344,"li",117),re(345,"i",118),x(346,"span",119),E(347,"Contact Us Email Integration"),w()(),x(348,"li",117),re(349,"i",118),x(350,"span",119),E(351,"Google Maps Integration"),w()()()()()(),x(352,"div",120)(353,"div",20)(354,"p")(355,"a",121),St("click",function(){Ln(r);const s=os(516);return tn(i.getStripPayemts("Magento",24995,s))}),x(356,"span",22),E(357," Get Started"),w(),x(358,"span",23),re(359,"i",24),w()()()(),x(360,"p",122),E(361,"Or "),x(362,"a",123),E(363,"book a call"),w()()()()(),x(364,"div",125)(365,"div",105)(366,"div",106)(367,"h4",107),E(368,"AED 59,995"),w(),x(369,"h5",108),E(370,"The ultimate package with unlimited requests."),w()(),re(371,"div",109),x(372,"div",110)(373,"h5",111),E(374,"What\u2019s included"),w(),x(375,"div",3)(376,"div",112)(377,"ul",113)(378,"li",114)(379,"div",115)(380,"div",116),E(381,"Tailored Ui/Ux Designing"),w()()(),x(382,"li",117),re(383,"i",118),x(384,"span",119),E(385,"Custom Website Design Upto 5 Theme Options"),w()(),x(386,"li",114)(387,"div",115)(388,"div",116),E(389,"Development & Standout Features"),w()()(),x(390,"li",117),re(391,"i",118),x(392,"span",119),E(393,"Website Integration with CRM"),w()(),x(394,"li",117),re(395,"i",118),x(396,"span",119),E(397,"Integration with other websites"),w()(),x(398,"li",117),re(399,"i",118),x(400,"span",119),E(401,"Access to your Partners & Distributers to Create and Manage thier Account"),w()(),x(402,"li",117),re(403,"i",118),x(404,"span",119),E(405,"User Pro\ufb01le Management"),w()(),x(406,"li",117),re(407,"i",118),x(408,"span",119),E(409,"Unlimited Brochures Download options"),w()(),x(410,"li",117),re(411,"i",118),x(412,"span",119),E(413,"WhatsApp Integration"),w()(),x(414,"li",117),re(415,"i",118),x(416,"span",119),E(417,"Live Chat Integration"),w()(),x(418,"li",117),re(419,"i",118),x(420,"span",119),E(421,"Google Reviews Integration"),w()(),x(422,"li",117),re(423,"i",118),x(424,"span",119),E(425,"Social Media Live Updates Integration"),w()()()()()(),x(426,"div",120)(427,"div",20)(428,"p")(429,"a",121),St("click",function(){Ln(r);const s=os(516);return tn(i.getStripPayemts("Custom Commerce",59995,s))}),x(430,"span",22),E(431," Get Started"),w(),x(432,"span",23),re(433,"i",24),w()()()(),x(434,"p",122),E(435,"Or "),x(436,"a",123),E(437,"book a call"),w()()()()()()()()()()()()(),x(438,"section",126)(439,"div",1)(440,"div",3)(441,"div",34),re(442,"div",127),x(443,"owl-carousel-o",49),Jr(444),at(445,O7e,17,1,"ng-template",128),eo(),w()()()()(),x(446,"section",129)(447,"div",1)(448,"div",3)(449,"div",130)(450,"div",3)(451,"div",131)(452,"div",132)(453,"h1",133),E(454," What "),re(455,"br"),E(456," makes Pixtar "),re(457,"br"),E(458," Special? "),re(459,"br"),x(460,"span"),E(461," And other FAQs\u2026 "),w()()()(),x(462,"div",134)(463,"div",93)(464,"div",135)(465,"div",136)(466,"div",137)(467,"h2",138)(468,"button",139),E(469," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(470,"div",140)(471,"div",141),E(472," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(473,"div",137)(474,"h2",142)(475,"button",143),E(476," Where are you based? "),w()(),x(477,"div",144)(478,"div",141),E(479," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(480,"div",137)(481,"h2",145)(482,"button",146),E(483," How are you different from a freelance designer? "),w()(),x(484,"div",147)(485,"div",141),E(486," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(487,"div",137)(488,"h2",148)(489,"button",149),E(490," What other design magic do you offer? "),w()(),x(491,"div",150)(492,"div",141),E(493," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(494,"div",137)(495,"h2",148)(496,"button",151),E(497," Who do you usually work with? "),w()(),x(498,"div",152)(499,"div",141),E(500," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(501,"div",137)(502,"h2",148)(503,"button",153),E(504," Which platforms do you use for building websites? "),w()(),x(505,"div",154)(506,"div",141),E(507," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(508,"div",137)(509,"h2",148)(510,"button",155),E(511," I\u2019m in! When can we get started? "),w()(),x(512,"div",156)(513,"div",141),E(514," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()(),at(515,A7e,30,4,"ng-template",157,158,rc)}2&n&&(se(18),Se("src","",i.baseUrl,"/img/home/social-media/instagram.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp.svg",Ce),se(17),Je("ngStyle",Dl(17,T7e,i.sectionWidth+"%")),se(4),Se("src","",i.baseUrl,"/pixtar logo animation 6.MP4",Ce),se(1),Se("src","",i.baseUrl,"/pixtar logo animation 6.MP4",Ce),se(30),Je("ngForOf",i.allprojects),se(7),Je("options",i.recentoptions),se(1),Je("ngForOf",i.allprojects),se(25),Se("src","",i.baseUrl,"/img/home/art-icons/craft.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/solution.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/beyond.png",Ce),se(12),Je("options",i.clientslider),se(59),Ns(i.tabTitle),se(246),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl))},dependencies:[ja,ta,vm,kc,I0,jp,D0,A0,Wp,wm,ph,Rc],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:2%;top:28%;width:500px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:2%;width:230px;top:30%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1053px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:404px;justify-content:start;align-items:center;left:8%!important;bottom:3%!important}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:7.1rem}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:4rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1.5rem}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:170px}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px 30px 100px;border-radius:50px;height:auto}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:33px;position:relative;display:inline-block;padding:10px 15px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#5b5b5f;border:1px solid #707070}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;border-radius:50px;margin-bottom:0;height:100%}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:none!important}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px;font-weight:400}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:6rem;bottom:10px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#444!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#ffffff80!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:100%}@media (max-width: 480px){  video{width:100%}}  .modal-body{padding:10px}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:10px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:95px;z-index:3}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}']}),e})();const k7e=["myVideo"];function R7e(e,t){if(1&e){const n=vr();x(0,"div",110)(1,"div",173)(2,"a",174)(3,"img",175),St("mouseenter",function(){const o=Ln(n).index;return tn(rt().onMouseEnter(o))})("mouseleave",function(){return Ln(n),tn(rt().onMouseLeave())}),w(),x(4,"div",176)(5,"p",177),E(6),w(),x(7,"p",178),re(8,"span",179),w()()()()()}if(2&e){const n=t.$implicit,i=t.index,r=rt();se(2),Mc("href",n.link,Ce),se(1),uu("galleryimg",i,""),ic("src","",r.imagepath,"",n.image,"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function N7e(e,t){if(1&e&&(x(0,"a",180),re(1,"img",181),x(2,"div",176)(3,"p",177),E(4),w(),x(5,"p",178),re(6,"span",179),w()()()),2&e){const n=rt().$implicit,i=rt();Mc("href",n.link,Ce),se(1),ic("src","",i.imagepath,"",n.project_images[0],"",Ce),se(3),Ns(n.name),se(2),Je("innerHTML",n.desc,tc)}}function F7e(e,t){if(1&e&&(Jr(0),at(1,N7e,7,5,"ng-template",124),eo()),2&e){const n=t.$implicit,i=t.index;se(1),Je("id",n+i)}}function L7e(e,t){if(1&e&&(x(0,"div",182)(1,"div",77)(2,"div",183)(3,"div",184),re(4,"img",185),w()(),x(5,"div",186)(6,"div",187)(7,"p",188),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",189),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",190),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",191)(14,"div",187)(15,"p",192),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-krupesh.png",Ce)}}function B7e(e,t){1&e&&(x(0,"div",212)(1,"div"),E(2," Name is required. "),w()())}function z7e(e,t){if(1&e&&(x(0,"div",212)(1,"div"),E(2),w()()),2&e){const n=rt(2);se(2),sl(" ",n.hasEmailError("email","required")," ")}}function U7e(e,t){if(1&e){const n=vr();x(0,"div",193)(1,"h5",194),E(2),w(),x(3,"button",195),St("click",function(){return tn(Ln(n).$implicit.dismiss("Cross click"))}),x(4,"span",196),E(5," \xd7 "),w()()(),x(6,"div",197)(7,"div",198)(8,"div",1)(9,"div",2)(10,"div",199)(11,"div",129)(12,"form",200),St("ngSubmit",function(){return Ln(n),tn(rt().submitPayment())}),x(13,"div",201)(14,"div",202),re(15,"input",203),x(16,"label",204),E(17,"What's your name?"),w(),at(18,B7e,3,0,"div",205),w(),x(19,"div",202),re(20,"input",206),x(21,"label",204),E(22,"What\u2019s your e-mail?"),w(),at(23,z7e,3,1,"div",205),w(),x(24,"div",207)(25,"div",208),re(26,"input",209),w(),x(27,"div",210)(28,"button",211),St("click",function(){return Ln(n),tn(rt().closePopUp())}),E(29,"Cancel"),w()()()()()()()()()()()}if(2&e){const n=rt();se(2),sl(" Complete Your Payment - ",n.paymentData.name," "),se(10),Je("formGroup",n.paymentForm),se(6),Je("ngIf",n.submitted&&n.hasError("name","required")),se(5),Je("ngIf",n.submitted&&n.hasEmailError("email","required"))}}const j7e=function(e){return{width:e}};let V7e=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g,v){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.payementservice=v,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.recentoptions={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],margin:14,responsive:{0:{items:2},480:{items:2},740:{items:3},940:{items:4}},nav:!1},this.clientslider={loop:!0,autoplay:!0,mouseDrag:!0,touchDrag:!1,pullDrag:!1,dots:!1,slideTransition:"linear",autoplaySpeed:3e3,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1,center:!1,navText:['<i class="fas fa-arrow-left"></i>','<i class="fas fa-arrow-right"></i>'],margin:14,responsive:{0:{items:3},480:{items:4},740:{items:4},940:{items:7}}},this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:1500,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.sectionWidth=10,this.closeResult="",this.modalReference=null,this.submitted=!1,this.tabTitle="For Startups",this.hasError=(y,b)=>this.paymentForm.controls[y].hasError(b),this.hasEmailError=(y,b)=>""==this.paymentForm.controls.email.value?"Email is required":"INVALID"==this.paymentForm.controls.email.status?"Invalid Email":this.paymentForm.controls.email.hasError(b),this.baseUrl=Nt_baseUrl+"/assets",this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}onScroll(n){const i=window.scrollY||document.documentElement.scrollTop;this.sectionWidth=Math.min(100,50+i/10)}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.paymentForm=this.formBuilder.group({name:["",kl.required],email:["",kl.required]})}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}changeTabTitle(n){this.tabTitle=n}openPopup(n){this.modalReference=this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass",size:"lg",backdrop:"static"}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(n){return n===ul.ESC?"by pressing ESC":n===ul.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}getStripPayemts(n,i,r){this.paymentData={name:n,amount:i},this.modalReference=this.modalService.open(r,{ariaLabelledBy:"modal-basic-title",windowClass:"myCustomModalClass2"}).result.then(s=>{this.closeResult=`Closed with: ${s}`},s=>{this.closeResult=`Dismissed ${this.getDismissReason(s)}`})}submitPayment(){this.submitted=!0,!this.paymentForm.invalid&&this.paymentData&&(this.paymentData.email=this.paymentForm.value.email,this.paymentData.customer_name=this.paymentForm.value.name,this.paymentData.base_url=Nt_baseUrl,this.payementservice.getStripSessionLink(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",JSON.stringify(this.paymentData)),this.paymentForm.reset(),window.open(n.body.url,"_blank"),this.modalService.dismissAll())}))}closePopUp(){this.modalService.dismissAll()}ngAfterViewInit(){const n=this.videoElement.nativeElement;n.muted=!0,n.loop=!0,n.play().catch(i=>{console.log("Autoplay failed, user interaction may be required:",i)})}playInFullscreenWithAudio(){const n=this.videoElement.nativeElement;n.muted=!1,n.removeAttribute("controls"),n.play().then(()=>{n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen&&n.mozRequestFullScreen()}).catch(i=>{console.log("Error entering fullscreen with audio: ",i)})}onFullscreenChange(){const n=this.videoElement.nativeElement;document.fullscreenElement===n||document.webkitFullscreenElement===n||document.msFullscreenElement===n||document.mozFullScreenElement===n?n.play().catch(i=>{console.log("Could not play in fullscreen mode:",i)}):(n.setAttribute("controls",""),n.muted=!0)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su),Oe(N1))},e.\u0275cmp=oi({type:e,selectors:[["app-graphics"]],viewQuery:function(n,i){if(1&n&&Rp(k7e,5),2&n){let r;Ur(r=jr())&&(i.videoElement=r.first)}},hostBindings:function(n,i){1&n&&St("scroll",function(o){return i.onScroll(o)},0,om)("fullscreenchange",function(o){return i.onFullscreenChange(o)},!1,sm)},decls:468,vars:18,consts:[[1,"cbanner","bannerbgcolor"],[1,"container"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90"],[1,"barcely"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-arround","p-0","float-start",2,"height","130px","list-style","none","justify-content","space-between"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,""],["alt","","width","15",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,""],["alt","","width","10",3,"src"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,""],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","18",3,"src"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"position-absolute","start-50","translate-middle","down-arrow","bnrstart"],["href","graphics#package",1,"cstbtn"],[1,"text"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"bannerbgcolor","cstheight"],[1,"cstvideo"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto",3,"ngStyle"],[1,"video-frame"],["width","100%","muted","","autoplay","",2,"cursor","pointer",3,"click"],["myVideo",""],["type","video/mp4",3,"src"],["type","video/ogg",3,"src"],[1,"aboutbrand"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor1"],[1,"textcolor2"],[1,"barcy","text-color"],[1,"topdist","bannerdrk","hard-work"],[1,"container","d-none","d-sm-none","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],[1,"col-xxl-12","col-xl-11","col-md-11","col-sm-11","col-11","mx-auto"],[1,"d-flex","justify-content-start","align-items-center","cmargin"],[1,"text-white","h1"],[1,"line"],["class","col-md-6",4,"ngFor","ngForOf"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"customslider","d-block","d-sm-block","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],[1,"col-md-10","offset-md-1"],[3,"options"],[4,"ngFor","ngForOf"],[1,"section","bannerdrk","container"],[1,"col-md-10","m-auto"],[1,"d-flex","flex-column","justify-content-center","align-items-center","video-block"],[1,"position-relative"],[1,"float-start","cwd243"],["routerLink","/contact",1,"cstbtn","cstbtn128","textcolor5"],[1,"text","text128","textcolor5"],[1,"section","choosesection"],[1,"choose-section"],[1,"col-md-6","col-sm-11","col-11","mx-auto"],[1,"head-section"],[1,"wght500","text-center","mb-3","mt-0"],[1,"textcolor1","size53"],[1,"size24","textcolor2","text-center"],[1,"position-absolute","start-50","translate-middle","down-arrow"],["href","home#strategy",1,"cstbtn"],[1,"h1","weight300","text-center","para"],[1,"mtrem5"],[1,"col-md-4"],[1,"box","text-center"],["alt","",1,"mb30",3,"src"],[1,"size18","textcolor1","weight600","p1"],[1,"size18","textcolor3","p2"],[1,"col-md-4","mt-md-0","mt-sm-4","mb-md-0","mb-sm-4","mb-4","mt-4"],[1,"section","packages","pt-0","backeeedf0"],[1,"packages-section"],["id","package",1,"col-md-10","col-sm-11","col-11","mx-auto","mt-5"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-8","col-md-10"],[1,"card","bgblk"],[1,"card-body"],[1,"brd"],[1,"d-flex"],[1,"icons"],[1,"circle1"],[1,"circle2"],[1,"size16","textcolor3"],[1,"textcolor3","size90"],[1,"size90","weight700","text-white","mt-0","mb-4"],[1,"box","mb-2"],[1,"text-white","weight500","mb-2","mt-0","size20"],[1,"d-block"],[1,"box"],[1,"col-xl-6","col-lg-8","col-md-10","mt-xl-0","mt-lg-5","mt-md-5","mt-sm-5","mt-5"],[1,"card","p-3","shadow",2,"max-width","600px"],[1,"text-start","p-3"],["id","nav-tab","role","tablist",1,"nav","nav-tabs","mb-3"],["id","nav-home-tab","data-bs-toggle","tab","data-bs-target","#nav-home","type","button","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-link","active",3,"click"],["id","nav-profile-tab","data-bs-toggle","tab","data-bs-target","#nav-profile","type","button","role","tab","aria-controls","nav-profile","aria-selected","false",1,"nav-link",3,"click"],["aria-hidden","true",1,"fa","fa-bolt"],["id","nav-contact-tab","data-bs-toggle","tab","data-bs-target","#nav-contact","type","button","role","tab","aria-controls","nav-contact","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content","p-3"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","active","show"],[1,"cstprng-table"],[1,"cstprng-table-header"],[1,"cstprng-table-cost","size53","textcolor1","weight500","mt-0"],[1,"cstprng-table-about","size20","textcolor1","weight500"],[1,"divider"],[1,"cstprng-table-features"],[1,"size20","textcolor1","weight500"],[1,"col-md-6"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-start","align-items-center","border-0","p-0","mb-2"],[1,"fa","fa-check","me-2"],[1,"cstprng-table-cta","position-relative","mtrem8","started"],[1,"cstbtn",3,"click"],[1,"size14","cntlink"],["routerLink","/contact",1,"text-decoration-none"],["id","nav-profile","role","tabpanel","aria-labelledby","nav-profile-tab",1,"tab-pane","fade"],["id","nav-contact","role","tabpanel","aria-labelledby","nav-contact-tab",1,"tab-pane","fade"],[1,"col-lg-5","col-md-7","col-sm-11","col-11","mx-auto"],[1,"subscription-section","section"],[1,"success-story","bannerdrk"],[1,"content","mbrem8"],["carouselSlide","",3,"id"],[1,"section","bannerdrk","faqsection"],[1,"col-md-10","col-sm-11","col-11","m-auto"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingFour","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFive",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingFive","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingSix","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSeven",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingSeven","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingEight",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseEight","aria-expanded","false","aria-controls","collapseEight",1,"accordion-button","collapsed","brdbtm"],["id","collapseEight","aria-labelledby","headingEight","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingNine",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseNine","aria-expanded","false","aria-controls","collapseNine",1,"accordion-button","collapsed","brdbtm"],["id","collapseNine","aria-labelledby","headingNine","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingTen",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTen","aria-expanded","false","aria-controls","collapseTen",1,"accordion-button","collapsed","brdbtm"],["id","collapseTen","aria-labelledby","headingTen","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingEleven",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseEleven","aria-expanded","false","aria-controls","collapseEleven",1,"accordion-button","collapsed","brdbtm"],["id","collapseEleven","aria-labelledby","headingEleven","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingTweleve",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTweleve","aria-expanded","false","aria-controls","collapseTweleve",1,"accordion-button","collapsed","brdbtm"],["id","collapseTweleve","aria-labelledby","headingTweleve","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["style","z-index: 0;"],["payments",""],[1,"imgblock"],["target","_blank",3,"href"],["alt","",3,"src","mouseenter","mouseleave"],[1,"box-name","text-center"],[1,"mb-0","textcolor5","h2"],[1,"textcolor4"],[3,"innerHTML"],["target","_self",3,"href"],[3,"src"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1","text-white"],[1,"size32","textcolor1","mt-0","mb30","text-white"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none","text-white"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3","text-white"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","content"],[1,"col-md-12"],["method","post","novalidate","",3,"formGroup","ngSubmit"],[1,"row","mrl-0","mb-3",2,"padding","5px 5px"],[1,"form-floating","mb-3"],["type","text","name","name","autocomplete","off","formControlName","name","id","floatingInput","placeholder","name",1,"form-control"],["for","floatingInput",1,"mt-0"],["class","error",4,"ngIf"],["type","email","name","email","autocomplete","off","formControlName","email","id","floatingInput","placeholder","email",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],[1,"text-center","text-sm-start","me-3"],["type","submit","name","submit","value","Pay Now",1,"submit"],[1,"input-group1"],["type","cancel",1,"button","text-center",3,"click"],[1,"error"]],template:function(n,i){if(1&n){const r=vr();x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7)(8,"span",8),E(9,"Graphic "),w(),E(10,"Designs on Demand."),w(),x(11,"h1",7),E(12,"Your Way, Every Day."),w()()()()()(),x(13,"div",9)(14,"ul",10)(15,"li")(16,"a",11),re(17,"img",12),w()(),x(18,"li")(19,"a",13),re(20,"img",14),w()(),x(21,"li")(22,"a",15),re(23,"img",12),w()(),x(24,"li")(25,"a",16),re(26,"img",17),w()()(),x(27,"div",18)(28,"p"),E(29,"Design subscriptions for everyone."),w(),x(30,"p"),E(31,"Pause or cancel anytime."),w()()(),x(32,"div",19)(33,"p")(34,"a",20)(35,"span",21),E(36," Know About Branding"),w(),x(37,"span",22),re(38,"i",23),w()()()()()(),re(39,"div",24),x(40,"section",25)(41,"div",1)(42,"div",2)(43,"div",26)(44,"div",27)(45,"video",28,29),St("click",function(){return i.playInFullscreenWithAudio()}),re(47,"source",30)(48,"source",31),E(49," Your browser does not support the video tag. "),w()()()()()(),x(50,"section",32)(51,"div",1)(52,"div",2)(53,"div",33)(54,"div",34)(55,"h2",35)(56,"span",36),E(57," Imagine never having to search for a designer again."),w(),x(58,"span",37),E(59,"With Pixtar\u2019s "),w(),x(60,"span",38),E(61," Graphic design "),w(),x(62,"span",37),E(63,"subscription,"),w(),x(64,"span",36),E(65," you get premium designs on demand"),w(),x(66,"span",37),E(67," \u2014crafted with care, precision, and zero templates."),w()()()()()()(),x(68,"section",39)(69,"div",40)(70,"div",2)(71,"div",41)(72,"div",42)(73,"h1",43),re(74,"div",44),E(75," Recent Works "),w()()(),x(76,"div",41)(77,"div",2),at(78,R7e,9,8,"div",45),w()()()(),x(79,"div",46)(80,"div",47)(81,"div",42)(82,"h1",43),re(83,"div",44),E(84," Recent Works "),w()()(),x(85,"owl-carousel-o",48),at(86,F7e,2,1,"ng-container",49),w()(),x(87,"div",50)(88,"div",2)(89,"div",51)(90,"div",52)(91,"div",53)(92,"div",54)(93,"p")(94,"a",55)(95,"span",56),E(96,"Book A Consultation"),w(),x(97,"span",22),re(98,"i",23),w()()()()()()()()()(),x(99,"section",57)(100,"div",1)(101,"div",2)(102,"div",33)(103,"div",58)(104,"div",59)(105,"div",60)(106,"h2",61)(107,"span",62),E(108,"A Simple, Stress-Free Design Process"),w()(),x(109,"p",63),E(110,"Say goodbye to hourly rates and unreliable freelancers. With Pixtar\u2019s subscription, you get unlimited, high-quality graphic design\u2014crafted from scratch, no templates, no limits."),w()(),x(111,"div",64)(112,"p")(113,"a",65)(114,"span",21),E(115," Subscribe Now"),w(),x(116,"span",22),re(117,"i",23),w()()()()(),x(118,"p",66)(119,"span",62),E(120,"What Makes Us Different?"),w()(),x(121,"div",67)(122,"div",2)(123,"div",68)(124,"div",69),re(125,"img",70),x(126,"p",71),E(127,"Subscribe To Pixtar"),w(),x(128,"p",72),E(129,"Pick a plan that fits your needs. The more credits, the more flexibility."),w()()(),x(130,"div",73)(131,"div",69),re(132,"img",70),x(133,"p",71),E(134,"Request A Design"),w(),x(135,"p",72),E(136,"Got a project in mind? Send your request and we\u2019ll start crafting."),w()()(),x(137,"div",68)(138,"div",69),re(139,"img",70),x(140,"p",71),E(141,"We Design, You Relax"),w(),x(142,"p",72),E(143,"We\u2019ll fine-tune the designs until you love them."),w()()()()()()()()()(),x(144,"section",74)(145,"div",1)(146,"div",2)(147,"div",59)(148,"div",75)(149,"h2",61)(150,"span",62),E(151,"Plans Designed to Fit Every Need"),w()(),x(152,"p",63),E(153,"Whether you\u2019re a startup, a growing business, or an enterprise, we\u2019ve got a plan for you. Each credit gives you access to premium design services\u2014crafted to perfection using the golden ratio"),w()()(),x(154,"div",76)(155,"div",77)(156,"div",78)(157,"div",79)(158,"div",80)(159,"div",81)(160,"div",82)(161,"div",83),re(162,"div",84)(163,"div",85),w(),x(164,"div",21)(165,"p",86),E(166,"Slots available"),w()()()(),x(167,"h1",87),E(168,"Join "),w(),x(169,"h1",88),E(170,"Pixtar"),w(),x(171,"div",89)(172,"h4",90),E(173,"Book a 15-min intro Call"),w(),x(174,"p",86),E(175,"Learn more about how Pixtar "),x(176,"span",91),E(177," works and how it can help you."),w()()(),x(178,"div",92)(179,"h4",90),E(180,"Refer a friend & earn"),w(),x(181,"p",86),E(182,"Earn 5% monthly recurring "),x(183,"span",91),E(184," commission for each referral."),w()()()()()(),x(185,"div",93)(186,"div",94)(187,"h2",95),E(188),w(),x(189,"nav")(190,"div",96)(191,"button",97),St("click",function(){return i.changeTabTitle("For Starups")}),E(192," Explorer "),w(),x(193,"button",98),St("click",function(){return i.changeTabTitle("For Growing Businesses.")}),re(194,"i",99),E(195," Pro "),w(),x(196,"button",100),St("click",function(){return i.changeTabTitle("For Agencies & Large Teams")}),E(197," Enterprise "),w()()(),x(198,"div",101)(199,"div",102)(200,"div",103)(201,"div",104)(202,"h4",105),E(203,"AED 6,995"),w(),x(204,"h5",106),E(205,"One request at a time, Pause or cancel anytime."),w()(),re(206,"div",107),x(207,"div",108)(208,"h5",109),E(209,"What\u2019s included"),w(),x(210,"div",2)(211,"div",110)(212,"ul",111)(213,"li",112),re(214,"i",113),E(215,"One requests at a time "),w(),x(216,"li",112),re(217,"i",113),E(218,"Average 48 hour delivery "),w(),x(219,"li",112),re(220,"i",113),E(221,"Unlimited brands "),w()()(),x(222,"div",110)(223,"ul",111)(224,"li",112),re(225,"i",113),E(226,"Adobe .Ai .Ps .Xd "),w(),x(227,"li",112),re(228,"i",113),E(229,"Dedicated Account Manager "),w(),x(230,"li",112),re(231,"i",113),E(232,"Pause or cancel anytime "),w()()()()(),x(233,"div",114)(234,"div",64)(235,"p")(236,"a",115),St("click",function(){Ln(r);const s=os(467);return tn(i.getStripPayemts("Explorer",6995,s))}),x(237,"span",21),E(238," Get Started"),w(),x(239,"span",22),re(240,"i",23),w()()()(),x(241,"p",116),E(242,"Or "),x(243,"a",117),E(244,"book a call"),w()()()()(),x(245,"div",118)(246,"div",103)(247,"div",104)(248,"h4",105),E(249,"AED 11,995"),w(),x(250,"h5",106),E(251,"Double the requests. Pause or cancel anytime."),w()(),re(252,"div",107),x(253,"div",108)(254,"h5",109),E(255,"What\u2019s included"),w(),x(256,"div",2)(257,"div",110)(258,"ul",111)(259,"li",112),re(260,"i",113),E(261,"Two requests at a time "),w(),x(262,"li",112),re(263,"i",113),E(264,"Average 48 hour delivery "),w(),x(265,"li",112),re(266,"i",113),E(267,"Unlimited brands "),w(),x(268,"li",112),re(269,"i",113),E(270,"XD UI design "),w()()(),x(271,"div",110)(272,"ul",111)(273,"li",112),re(274,"i",113),E(275,"15 stock photos "),w(),x(276,"li",112),re(277,"i",113),E(278,"Unlimited users "),w(),x(279,"li",112),re(280,"i",113),E(281,"Dedicated Account Manager "),w(),x(282,"li",112),re(283,"i",113),E(284,"Pause or cancel anytime "),w()()()()(),x(285,"div",114)(286,"div",64)(287,"p")(288,"a",115),St("click",function(){Ln(r);const s=os(467);return tn(i.getStripPayemts("Pro",11995,s))}),x(289,"span",21),E(290," Get Started"),w(),x(291,"span",22),re(292,"i",23),w()()()(),x(293,"p",116),E(294,"Or "),x(295,"a",117),E(296,"book a call"),w()()()()(),x(297,"div",119)(298,"div",103)(299,"div",104)(300,"h4",105),E(301,"AED 24,995"),w(),x(302,"h5",106),E(303,"For Agencies and Large Teams."),w()(),re(304,"div",107),x(305,"div",108)(306,"h5",109),E(307,"What\u2019s included"),w(),x(308,"div",2)(309,"div",110)(310,"ul",111)(311,"li",112),re(312,"i",113),E(313,"10 requests at a time "),w(),x(314,"li",112),re(315,"i",113),E(316,"Same-day turnaround "),w(),x(317,"li",112),re(318,"i",113),E(319,"Unlimited brands "),w(),x(320,"li",112),re(321,"i",113),E(322,"XD UI design "),w()()(),x(323,"div",110)(324,"ul",111)(325,"li",112),re(326,"i",113),E(327,"Unlimited stock photos "),w(),x(328,"li",112),re(329,"i",113),E(330,"Unlimited users "),w(),x(331,"li",112),re(332,"i",113),E(333,"Dedicated Creative Director & Slack Support. "),w(),x(334,"li",112),re(335,"i",113),E(336,"Pause or cancel anytime "),w()()()()(),x(337,"div",114)(338,"div",64)(339,"p")(340,"a",115),St("click",function(){Ln(r);const s=os(467);return tn(i.getStripPayemts("Enterprise",24995,s))}),x(341,"span",21),E(342," Get Started"),w(),x(343,"span",22),re(344,"i",23),w()()()(),x(345,"p",116),E(346,"Or "),x(347,"a",117),E(348,"book a call"),w()()()()()()()()()(),x(349,"div",120)(350,"div",121)(351,"h2",61)(352,"span",62),E(353,"Your Subscription, Your Way"),w()(),x(354,"p",63),E(355," Got a busy month and need more credits? No problem. You can top-up anytime or upgrade your plan on the fly "),w()()()()()(),x(356,"section",122)(357,"div",1)(358,"div",2)(359,"div",33),re(360,"div",123),x(361,"owl-carousel-o",48),Jr(362),at(363,L7e,17,1,"ng-template",124),eo(),w()()()()(),x(364,"section",125)(365,"div",1)(366,"div",2)(367,"div",126)(368,"div",2)(369,"div",127)(370,"div",128)(371,"h1",129),E(372," Frequently "),re(373,"br"),E(374," Asked "),re(375,"br"),E(376," Questions\u2026 "),re(377,"br"),w()()(),x(378,"div",130)(379,"div",91)(380,"div",131)(381,"div",132)(382,"div",133)(383,"h2",134)(384,"button",135),E(385," Why not just hire a full-time designer? "),w()(),x(386,"div",136)(387,"div",137),E(388," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(389,"div",133)(390,"h2",138)(391,"button",139),E(392," Is there a limit to my design requests? "),w()(),x(393,"div",140)(394,"div",137),E(395," Nope! Once you\u2019re subscribed, feel free to add as many design requests to your queue as you need\u2014they\u2019ll be delivered one at a time. "),w()()(),x(396,"div",133)(397,"h2",141)(398,"button",142),E(399," How fast can I expect my designs? "),w()(),x(400,"div",143)(401,"div",137),E(402," Most requests are turned around within 48 hours. Typical requests like banners, brochures, flyers, event themes, and social templates usually take about two days, though bigger projects may take a little longer. If your request is on the larger side, you can expect steady progress every 24 hours until it\u2019s complete. "),w()()(),x(403,"div",133)(404,"h2",144)(405,"button",145),E(406," Who\u2019s doing the design work? "),w()(),x(407,"div",146)(408,"div",137),E(409," Surprise! Pixtar is a tight-knit team of nine, and our founder is hands-on with every project. This means you\u2019ll work directly with Pixtar\u2019s founder. For specialized requests, like animations or custom illustrations, we collaborate with our trusted partner designers. "),w()()(),x(410,"div",133)(411,"h2",147)(412,"button",148),E(413," How does the pause feature work? "),w()(),x(414,"div",149)(415,"div",137),E(416," We get it\u2014sometimes you don\u2019t have a full month\u2019s worth of design needs. With the pause feature, you can stop your subscription anytime. Here\u2019s how it works: Billing runs on a 31-day cycle. Let\u2019s say you\u2019ve used the service for 21 days, then decide to pause. This leaves you with 10 days of service, which you can pick up anytime in the future. "),w()()(),x(417,"div",133)(418,"h2",150)(419,"button",151),E(420," What about larger projects? "),w()(),x(421,"div",152)(422,"div",137),E(423," No problem! Larger requests, like full website or app designs, are delivered in parts. We break them down on our end and deliver portions every 24\u201348 hours until everything\u2019s complete. "),w()()(),x(424,"div",133)(425,"h2",153)(426,"button",154),E(427," Which design tools do you use? "),w()(),x(428,"div",155)(429,"div",137),E(430," We work primarily with Adobe Illustrator, Photoshop, and XD to create your designs. "),w()()(),x(431,"div",133)(432,"h2",156)(433,"button",157),E(434," How do I send design requests? "),w()(),x(435,"div",158)(436,"div",137),E(437," We make it easy! You can request designs in Trello by adding a card, sharing Google Docs or wireframes, or even by sending a quick Loom video (perfect if you\u2019d rather talk through your ideas than write them out). If it can be shared or linked in Trello, it\u2019s fair game. "),w()()(),x(438,"div",133)(439,"h2",159)(440,"button",160),E(441," What if the design isn\u2019t quite right? "),w()(),x(442,"div",161)(443,"div",137),E(444," No problem! We\u2019ll work with you to revise the design until it\u2019s exactly what you\u2019re looking for. "),w()()(),x(445,"div",133)(446,"h2",162)(447,"button",163),E(448," Are there any types of design you don\u2019t cover? "),w()(),x(449,"div",164)(450,"div",137),E(451," Yes, there are a few: 3D modeling, animated graphics (like GIFs), document design (medical forms, for example), complex packaging, extensive print designs (such as magazines or books), and Adobe InDesign documents aren\u2019t included in our offerings. "),w()()(),x(452,"div",133)(453,"h2",165)(454,"button",166),E(455," What if I only need a single design? "),w()(),x(456,"div",167)(457,"div",137),E(458," That\u2019s totally fine! You can pause your subscription whenever you\u2019re done and resume when you have new design needs\u2014no wasted time. "),w()()(),x(459,"div",133)(460,"h2",168)(461,"button",169),E(462," Are refunds available if I\u2019m not satisfied with the service? "),w()(),x(463,"div",170)(464,"div",137),E(465," Due to the high-quality nature of the work, we don\u2019t offer refunds. "),w()()()()()()()()()()()(),at(466,U7e,30,4,"ng-template",171,172,rc)}2&n&&(se(17),Se("src","",i.baseUrl,"/img/home/social-media/instagram.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/facebook.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/social-media/linkedin.svg",Ce),se(3),Se("src","",i.baseUrl,"/img/home/whatsapp.svg",Ce),se(17),Je("ngStyle",Dl(16,j7e,i.sectionWidth+"%")),se(4),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(1),Se("src","",i.baseUrl,"/what is brandng pixtar 2.mp4",Ce),se(30),Je("ngForOf",i.allprojects),se(7),Je("options",i.recentoptions),se(1),Je("ngForOf",i.allprojects),se(39),Se("src","",i.baseUrl,"/img/home/art-icons/craft.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/solution.png",Ce),se(7),Se("src","",i.baseUrl,"/img/home/art-icons/beyond.png",Ce),se(49),Ns(i.tabTitle),se(173),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl))},dependencies:[ja,ta,vm,kc,I0,jp,D0,A0,Wp,wm,ph,Rc],styles:['.barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.h1[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{font-weight:100;color:#da9777;font-family:barcelony,sans-serif}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1788px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:1165px}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:880px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:427px;justify-content:start;align-items:center;left:8%!important;bottom:3%!important}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal;font-weight:400}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:0%!important;bottom:7rem!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:7.1rem}@media (max-width: 1650px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:4rem}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:3rem}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1.5rem}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .left-content2[_ngcontent-%COMP%]{margin-left:1rem}}.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:9%}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:14%}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:5%;left:55%!important}}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{bottom:auto;margin-top:-50px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{margin-top:-30px}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}.cstheight[_ngcontent-%COMP%]{height:378px;display:flex;flex-direction:column;justify-content:center}@media (max-width: 480px){.cstheight[_ngcontent-%COMP%]{height:200px}}.cstvideo[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:-15rem}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]{margin-top:-11rem}}@media (max-width: 480px){.cstvideo[_ngcontent-%COMP%]{margin-top:-5rem}}@media (max-width: 991px){.cstvideo[_ngcontent-%COMP%]   #aboutvideo[_ngcontent-%COMP%]{height:100%}}.cstvideo[_ngcontent-%COMP%]   .video-frame[_ngcontent-%COMP%]{position:relative}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;width:100%;top:0}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{transition:.3s ease-in-out;display:flex;opacity:0;position:absolute;bottom:0;left:0;right:0;width:100%;padding:20px;height:100%;background-color:#00000080;margin:0 auto;flex-direction:column;justify-content:center;align-items:center}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;object-fit:contain}@media (max-width: 768px){.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:44px}}.cstvideo[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]:hover   .text-block[_ngcontent-%COMP%]{display:flex;cursor:pointer;justify-content:center;align-items:center;opacity:1}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.hard-work[_ngcontent-%COMP%]{margin:0;padding:50px 0 30px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]{padding:20px 0 0}}.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:32px;margin-top:15px;font-weight:600}@media (max-width: 1366px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h2[_ngcontent-%COMP%]{font-size:18px}}.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1024px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:600}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{font-size:28px}}.hard-work[_ngcontent-%COMP%]   .rlimg[_ngcontent-%COMP%]{width:30px}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]{padding:30px 10px 30px 0}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex}.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px}@media (max-width: 991px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{height:24px;width:4px;top:6px}}@media (max-width: 767px){.hard-work[_ngcontent-%COMP%]   .cmargin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:before{margin-left:30px;width:4px;left:-5px;top:4px}}.hard-work[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]{padding:10px 30px;margin-bottom:20px}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:transform .9s ease}.hard-work[_ngcontent-%COMP%]   .imgblock[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.hard-work[_ngcontent-%COMP%]   .bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.cwd243[_ngcontent-%COMP%]{position:relative;width:195px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:space-between!important;align-items:center}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;right:auto!important;width:auto;transition:.5s all ease-in-out}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]{letter-spacing:1px}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:75px;width:75px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out;right:-4px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{height:60px;width:60px;right:5px}}.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{right:-10px;height:50px;width:50px}@media (max-width: 1366px){.cwd243[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:45px;width:45px}}.cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:116px;z-index:2}.choosesection[_ngcontent-%COMP%]{background-color:#eeedf0}.choosesection[_ngcontent-%COMP%]   .choose-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .p1[_ngcontent-%COMP%]{margin-bottom:20px!important}.choosesection[_ngcontent-%COMP%]   .head-section[_ngcontent-%COMP%]{margin-bottom:80px}.choosesection[_ngcontent-%COMP%]   .para[_ngcontent-%COMP%]{padding-top:80px}.subscription-section[_ngcontent-%COMP%]{background-color:transparent!important}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage{display:flex;justify-content:center;align-items:center;text-align:center}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage img{width:100%;height:57px;object-fit:contain;margin:0 auto;padding:0 20px}.client[_ngcontent-%COMP%]     .owl-carousel .owl-stage .owl-items{margin-right:14px!important}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]{padding:30px;border-radius:50px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:33px;position:relative;display:inline-block;padding:10px 15px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle1[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;border-radius:50px;background-color:#5b5b5f;border:1px solid #707070}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .circle2[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50px;background-color:#6e6e73;border:1px solid #707070;position:relative;z-index:2}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .brd[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:10px}.packages[_ngcontent-%COMP%]   .card.bgblk[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{border:1px solid #707070;padding:15px;border-radius:16px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:600px;border-radius:50px;margin-bottom:0;height:100%}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:auto}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:#1d1d1f;width:100%;margin:20px 0}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:8rem}@media (max-width: 1199px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]{margin-top:4rem}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mtrem8[_ngcontent-%COMP%]   .cstprng-table-cta[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{z-index:2}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{justify-content:center;background:#1d1d1f;border-radius:50px;padding:7px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:none;border:none;color:#fff;border-radius:50px;padding:5px 15px;width:33.33%;font-size:16px;font-weight:400}@media (max-width: 1366px){.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:5px}}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#da9777}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]{text-align:center;position:relative;z-index:0;left:6rem;bottom:10px}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cntlink[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;cursor:pointer}.packages[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.card-plain):hover{box-shadow:0 12px 19px -7px #0000004d;transform:translateY(0);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);-moz-transform:translateY(0px)}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:10px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:52px}.faqsection[_ngcontent-%COMP%]   .creative[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}  .myCustomModalClass{background-color:#0b0b0bb8}  .myCustomModalClass .modal-dialog.modal-lg{position:relative;display:flex;justify-content:center;align-items:center;margin:0 auto;padding-top:0;height:100%}@media (min-width: 992px){  .myCustomModalClass .modal-dialog.modal-lg{--bs-modal-width: 1055px}}@media (max-width: 1280px){  .myCustomModalClass .modal-dialog.modal-lg{max-width:90%}}@media (max-width: 991px){  .myCustomModalClass .modal-dialog.modal-lg{height:auto;padding:30px 0}}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative{min-height:100%;height:100%;display:block}  .myCustomModalClass .modal-dialog.modal-lg .modal-body .position-relative figure{margin-bottom:0}  .myCustomModalClass .btn{background-color:transparent!important;border:none!important;color:#c9bebe!important;font-size:20px;position:fixed;top:1%;right:1%;z-index:2;padding:5px}  .myCustomModalClass .btn:hover{color:#c4b4b480!important}@media (max-width: 991px){  .myCustomModalClass .btn{top:0}}@media (max-width: 480px){  .myCustomModalClass .btn{top:-6px;right:6px}}  .myCustomModalClass .custommodalanchor{border-bottom:1px solid #dfdfdf;padding-bottom:10px;margin-bottom:10px}  .myCustomModalClass .follow p{font-size:16px;margin-bottom:0;margin-left:5px}  .myCustomModalClass .owl-carousel .owl-item img{object-fit:cover}  .myCustomModalClass .link{margin-top:30px}  .myCustomModalClass .hashtaglinks a{display:inline-block;margin:0 2px}  .myCustomModalClass .rightblock{height:750px;overflow:hidden;overflow-y:scroll;padding:10px 0 10px 20px}@media (max-width: 1366px){  .myCustomModalClass .rightblock{height:600px}}@media (max-width: 991px){  .myCustomModalClass .rightblock{height:auto;margin-top:0}}  .myCustomModalClass .rightblock a{color:#0280fe!important}  .myCustomModalClass .leftblock{padding:0}@media (max-width: 991px){  .myCustomModalClass .leftblock{margin-top:0}}  video{position:relative;min-height:100%;width:100%}@media (max-width: 480px){  video{width:100%}}  .modal-body{padding:10px}.started[_ngcontent-%COMP%]{display:flex;justify-content:center}.started[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:95px;z-index:3}.bnrstart[_ngcontent-%COMP%]{left:55%!important}@media (max-width: 991px){.bnrstart[_ngcontent-%COMP%]{left:60%!important}}.bnrstart[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:166px}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#101010;border:none;border-radius:0;border-bottom:1px solid #dddddd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#878787}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;padding:5px 30px;text-decoration:none;border:2px solid #707070;color:#878787;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{color:#da9777;background:#1d1d1f}@media (max-width: 575px){form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:16px}}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background:transparent;color:#da9777;border:2px solid #da9777;padding:5px 30px;border-radius:30px;font-weight:600}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:hover{background:#da9777;color:#fff}form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]:focus{background:#da9777;color:#fff;border-color:#da9777}@media (max-width: 575px){form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{font-size:16px}}.error[_ngcontent-%COMP%]{color:#f33}.close[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;box-shadow:none;outline:none;border:1px solid #000;border-radius:50px;height:24px;width:24px;font-size:21px;display:flex;justify-content:center;align-items:center}.close[_ngcontent-%COMP%]:hover{background-color:#000;color:#da9777}']}),e})();function H7e(e,t){if(1&e&&(x(0,"div",93)(1,"div",94)(2,"div",95)(3,"div",96),re(4,"img",97),w()(),x(5,"div",98)(6,"div",99)(7,"p",100),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",101),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",102),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",103)(14,"div",99)(15,"p",104),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/hiral-story-2.png",Ce)}}function G7e(e,t){if(1&e&&(x(0,"div",93)(1,"div",94)(2,"div",95)(3,"div",96),re(4,"img",105),w()(),x(5,"div",98)(6,"div",99)(7,"p",100),E(8,"Hiral Krupesh . Founder & Creative Director . Carat Craft Jewellery"),w(),x(9,"h4",101),E(10,"I HIGHLY RECOMMEND PIXTAR IF YOU ARE LOOKING TO REVAMP AND ELEVATE YOUR BRAND"),w(),x(11,"p",102),E(12,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()(),x(13,"div",103)(14,"div",99)(15,"p",104),E(16,"\u201c Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.\u201d"),w()()()()()),2&e){const n=rt();se(4),Se("src","",n.baseUrl,"/img/home/crystal-story.png",Ce)}}let W7e=(()=>{class e{constructor(n,i,r,o,s,a,l,c,d,h,p,g){this.renderer=n,this._platformId=i,this.testimonialService=r,this.pageservice=o,this.metaTagService=s,this.titleService=a,this.blogService=l,this.formBuilder=c,this.http=d,this.projectservice=h,this.modalService=p,this.activeModal=g,this.currentPage=1,this.allprojects=[],this.currentLimit=4,this.desktopslider={loop:!1,rewind:!0,autoplay:!0,autoplayTimeout:15e3,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,smartSpeed:1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}},this.baseUrl=Nt_baseUrl+"/assets",this.imagepath=Nt_backendUrl+"/public/",this.get_PageMeta(),this.get_AllProjects()}ngOnInit(){window.scroll({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{const n=document.getElementById("canvas");this.spline=new aS(n),this.spline.load("https://prod.spline.design/ETc1NgtkFiSuPoFT/scene.splinecode")},500)}get_PageMeta(){this.pageservice.getpageWithName({pageName:"home"}).subscribe(i=>{200==i.body.code&&(this.titleService.setTitle(i?.body.result.meta_title),this.metaTagService.addTags([{name:"description",content:i?.body.result.meta_description},{name:"keywords",content:i?.body.result.meta_keywords}]))})}get_AllProjects(){this.projectservice.getAllProjects({limit:this.currentLimit,page:this.currentPage}).subscribe(i=>{200==i.code&&i.result&&i.result.length>0&&i.result.forEach(r=>{r.status&&this.allprojects.push(r)})})}loadMore(){this.currentLimit=this.currentLimit+4,this.get_AllProjects()}stopSlider(){this.sliderInterval&&clearInterval(this.sliderInterval)}onMouseLeave(){this.sliderInterval&&(clearInterval(this.sliderInterval),console.log("Slider stopped"))}onMouseEnter(n){let r=this.allprojects[n].project_images,o=this.imagepath,s=document.getElementsByClassName("galleryimg"+n);this.sliderInterval=setInterval(()=>{$(s).each(function(a){let l=r[(a+Math.floor(Math.random()*r.length))%r.length];$(s).attr("src",o+l)})},900)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(Pc),Oe(k1),Oe(Nc),Oe(Tl),Oe(Il),Oe(R1),Oe(Pm),Oe(Rl),Oe(Ig),Oe(Fm),Oe(Su))},e.\u0275cmp=oi({type:e,selectors:[["app-studio"]],decls:262,vars:11,consts:[[1,"cbanner"],[1,"container"],["id","canvas","data-aos","zoom-in","data-aos-duration","500","data-aos-delay","100",1,"img-globe"],[1,"row"],["data-aos","fade-up","data-aos-duration","2000","data-aos-delay","100",1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"banner","vh-100"],[1,"d-flex","flex-column","justify-content-center","h-100","align-items-start"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"contentbl"],[1,"h1","size90","textcolor3"],[1,"h1","size90","textcolor1"],[1,"position-absolute","banner-left-content","content-left"],[1,"d-flex","flex-column","justify-contente-center","left-content2"],[1,"p3","semibold","textcolor1"],[1,"aboutbrand"],[1,"col-xxl-12","col-xl-11","col-lg-11","col-md-11","col-ms-11","col-11","mx-auto"],[1,"about-brand"],[1,"size53","weight300"],[1,"textcolor3"],[1,"textcolor1"],[1,"barcy","text-color"],[1,"care-section"],[1,"care"],[1,"fontsize12"],[1,"size32","mb30","textcolor1"],["alt","",1,"mb30","w-100",3,"src"],[1,"col-md-4","col-sm-6"],[1,"box"],[1,"size18","textcolor1"],[1,"weight600"],[1,"deserve-section"],[1,"deserve","text-center"],[1,"textcolor1","weight500","size53","mb30"],[1,"textcolor1","size18"],["id","section3",1,"things-section","bannerdrk","position-relative"],[1,"header","text-center"],[1,"text-white","weight500","size53","mb30"],[1,"things"],[1,"scroll-track"],[1,"track-item","pt-0"],[1,"number-wrapper"],["alt","",3,"src"],[1,"text-wrapper"],[1,"size32","text-white","mb-3"],[1,"text-white"],[1,"track-item"],[1,"business","position-relative"],[1,"wrapper","position-relative"],[1,"imgbox"],["alt","",1,"img-fluid",3,"src"],[1,"box1"],[1,"textcolor1","mb-5","size32","lufgalight"],[1,"d-block"],[1,"textcolor1","size32","weight700"],[1,"textcolor1","mt-0","size18","weight700"],[1,"bottomtext","d-flex","justify-content-center","position-relative"],[1,"size53","textcolor1","mt-0"],[1,"action","position-relative"],[1,"position-absolute","start-50","translate-middle"],["href","#",1,"cstbtn","cstbtn128","ftr1"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"success-story","bannerdrk"],[1,"content","mbrem8"],[3,"options"],["carouselSlide","",3,"id"],[1,"section","bannerdrk","faqsection"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-4","col-md-6","col-sm-6"],[1,"creative"],[1,""],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"col-lg-7","offset-lg-1","col-md-6","col-sm-6"],[1,"custom-collapse","footer-collapse"],["id","accordionExample1",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"accordion-body"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["id","headingSix",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSix","aria-expanded","false","aria-controls","collapseSix",1,"accordion-button","collapsed"],["id","collapseSix","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseSeven","aria-expanded","false","aria-controls","collapseSeven",1,"accordion-button","collapsed","brdbtm"],["id","collapseSeven","aria-labelledby","headingThree","data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse"],[1,"col-md-9","col-sm-11","col-11","mx-auto"],[1,"row","justify-content-center"],[1,"col-lg-3","col-md-5","col-sm-5"],[1,"imgblk"],["alt","",1,"",3,"src"],[1,"col-lg-8","col-md-7","offset-lg-1","col-sm-7","mt-sm-0","mt-3"],[1,"slidecontent"],[1,"fontsize12","textcolor1","text-white"],[1,"size32","textcolor1","mt-0","mb30","text-white"],[1,"size18","textcolor3","d-md-block","d-sm-none","d-none","text-white"],[1,"col-md-12","d-md-none","d-sm-block","d-block","mt-sm-4","mt-3"],[1,"size18","textcolor3","text-white"],["alt","",1,"mx-auto",3,"src"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1),re(2,"canvas",2),x(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"When your vision needs "),w(),x(10,"h1",9),E(11,"a team by your side."),w()()()()()(),x(12,"div",10)(13,"div",11)(14,"p"),E(15,"If you\u2019re looking for a detail obsessed,"),w(),x(16,"p"),E(17,"marketing-savvy design team"),w(),x(18,"p"),E(19,"that elevate your brand and business\u2026"),w(),x(20,"p",12),E(21,"Then you\u2019re in the right place!"),w()()()()(),x(22,"section",13)(23,"div",1)(24,"div",3)(25,"div",14)(26,"div",15)(27,"h2",16)(28,"span",17),E(29,"At Pixtar, we believe "),w(),x(30,"span",18),E(31," design isn\u2019t just about "),x(32,"span",19),E(33," Aesthetics"),w(),E(34," \u2014it\u2019s about creating harmony, inspiring trust, and building connections."),w(),x(35,"span",17),E(36," We\u2019re a team of"),w(),x(37,"span",18),E(38," creators, thinkers, and dreamers, rooted in Dubai-UAE "),w(),x(39,"span",17),E(40," but designing for a global audience."),w()()()()()()(),x(41,"section",20)(42,"div",1)(43,"div",3)(44,"div",14)(45,"div",21)(46,"p",22),E(47,"WHAT DRIVES OUR DESIGN"),w(),x(48,"p",23),E(49,"We Care About\u2026"),w(),re(50,"img",24),w(),x(51,"div",3)(52,"div",25)(53,"div",26)(54,"p",27),E(55,"You"),w(),x(56,"p",27),E(57,"We\u2019re here to make your life easier and to bring excitement to "),x(58,"span",28),E(59,"launching your brand or website."),w(),E(60," From the first design concept to a smooth launch, we handle every detail, so you can "),x(61,"span",28),E(62,"focus on what matters most."),w()()()(),x(63,"div",25)(64,"div",26)(65,"p",27),E(66,"Your Audience"),w(),x(67,"p",27),E(68,"Our designs don\u2019t just look good "),x(69,"span",28),E(70,"\u2014they connect."),w(),E(71," We create engaging, easy-to-navigate experiences that leave a lasting impression,"),x(72,"span",28),E(73," making sure your audience feels right at home on every page."),w()()()(),x(74,"div",25)(75,"div",26)(76,"p",27),E(77,"Your Business Goals"),w(),x(78,"p",27)(79,"span",28),E(80,"Great design solves problems,"),w(),E(81," from building brand loyalty to driving conversions. We\u2019re here to help you "),x(82,"span",28),E(83," grow, boost your impact, and reach more people "),w(),E(84,"through design that works as hard as you do."),w()()()()()()()(),x(85,"section",29)(86,"div",1)(87,"div",3)(88,"div",14)(89,"div",30)(90,"h2",31),E(91,"You Deserve The Best Team By Your Side. "),re(92,"br"),E(93," So We Built One For You."),w(),x(94,"p",32),E(95,"Large Enough To Tackle Any Project. Small Enough To Keep It Personal."),w()()()()()(),x(96,"section",33)(97,"div",1)(98,"div",3)(99,"div",14)(100,"div",34)(101,"h2",35),E(102,"Six Things You Should Know "),re(103,"br"),E(104,"About Pixtar"),w()(),x(105,"div",36)(106,"div",37)(107,"div",38)(108,"div",39),re(109,"img",40),w(),x(110,"div",41)(111,"p",42),E(112,"We Looove What We Do"),w(),x(113,"p",43),E(114," We\u2019re not just designers; we\u2019re creators who live and breathe design. The kind of team that sparks with new ideas even during a weekend coffee run. Your project isn\u2019t just work\u2014it\u2019s what we love to do. "),w()()(),x(115,"div",44)(116,"div",39),re(117,"img",40),w(),x(118,"div",41)(119,"p",42),E(120,"Conversion-Focused Design"),w(),x(121,"p",43),E(122,"Beautiful design that goes beyond aesthetics. We craft visuals that captivate, influence, and drive action, helping you connect with customers and achieve real results. "),w()()(),x(123,"div",44)(124,"div",39),re(125,"img",40),w(),x(126,"div",41)(127,"p",42),E(128,"People First, Always"),w(),x(129,"p",43),E(130," Every project we take on starts with people. We believe that respect, care, and collaboration make great design possible. When we work together, creativity flourishes. "),w()()(),x(131,"div",44)(132,"div",39),re(133,"img",40),w(),x(134,"div",41)(135,"p",42),E(136,"A Team Of Superpowers"),w(),x(137,"p",43),E(138,"Individually, we each have our own strengths. Together, we bring them all to the table\u2014design, strategy, and development\u2014to create powerful, custom solutions that stand out. "),w()()(),x(139,"div",44)(140,"div",39),re(141,"img",40),w(),x(142,"div",41)(143,"p",42),E(144,"Details That Matter"),w(),x(145,"p",43),E(146,"Our commitment to detail means peace of mind for you. From concept to launch, we meticulously refine every aspect of your brand or website, ensuring everything is intentional and perfectly crafted. "),w()()(),x(147,"div",44)(148,"div",39),re(149,"img",40),w(),x(150,"div",41)(151,"p",42),E(152,"Here For The Journey"),w(),x(153,"p",43),E(154," We\u2019re all about building designs that stand the test of time. Think of us as your long-term creative partner\u2014ready to grow with you, committed to your success, and always here to help bring your vision to life. "),w()()()()()()()()(),x(155,"section",45)(156,"div",1)(157,"div",3)(158,"div",14)(159,"div",46)(160,"div",47),re(161,"img",48),w(),x(162,"div",49)(163,"p",50),E(164," \u201cIf you want a partner who gets you, knows your business, and is on "),x(165,"span",51),E(166," your side 100%\u2014look no further.\u201d"),w()(),x(167,"h2",52),E(168,"KBN "),w(),x(169,"h4",53),E(170,"CEO & Creative Director"),w()(),x(171,"div",54)(172,"h2",55),E(173,"We\u2019ll be your partner "),re(174,"br"),E(175," in your journey"),w()()()()()()(),x(176,"div",56)(177,"div",57)(178,"p")(179,"a",58)(180,"span",59),E(181," Let\u2019s Begin"),w(),x(182,"span",60),re(183,"i",61),w()()()()(),x(184,"section",62)(185,"div",1)(186,"div",3)(187,"div",14),re(188,"div",63),x(189,"owl-carousel-o",64),Jr(190),at(191,H7e,17,1,"ng-template",65),at(192,G7e,17,1,"ng-template",65),eo(),w()()()()(),x(193,"section",66)(194,"div",1)(195,"div",3)(196,"div",14)(197,"div",3)(198,"div",67)(199,"div",68)(200,"h1",69),E(201," What "),re(202,"br"),E(203," makes Pixtar "),re(204,"br"),E(205," Special? "),re(206,"br"),x(207,"span"),E(208," And other FAQs\u2026 "),w()()()(),x(209,"div",70)(210,"div",51)(211,"div",71)(212,"div",72)(213,"div",73)(214,"h2",74)(215,"button",75),E(216," Alright, no secrets \u2013 what makes Pixtar stand out? "),w()(),x(217,"div",76)(218,"div",77),E(219," Pixtar stands out for our unique blend of creativity, strategy, and a deep commitment to client satisfaction. We don\u2019t just design; we craft memorable, user-friendly experiences that make brands shine. "),w()()(),x(220,"div",73)(221,"h2",78)(222,"button",79),E(223," Where are you based? "),w()(),x(224,"div",80)(225,"div",77),E(226," Virtually, next door! We\u2019re proudly based in Dubai, UAE, but our team collaborates with clients worldwide, making distance no barrier to outstanding design! Our business hours are 9 am\u20136 pm GST / 1 am\u201310 am EST / 10 pm\u20137 am PST. But with our early-rising CEO and night-owl CTO, we\u2019re always able to sync up with clients from LA all the way to Australia\u2014and all the lovely places in between. "),w()()(),x(227,"div",73)(228,"h2",81)(229,"button",82),E(230," How are you different from a freelance designer? "),w()(),x(231,"div",83)(232,"div",77),E(233," At Pixtar, you get the expertise of an entire team, not just one individual. We bring together specialized skills in design, strategy, and development, providing a more comprehensive approach and smoother project delivery. "),w()()(),x(234,"div",73)(235,"h2",84)(236,"button",85),E(237," What other design magic do you offer? "),w()(),x(238,"div",86)(239,"div",77),E(240," Besides website design, we specialize in branding, UI/UX design, graphic design, and digital marketing assets. Whatever your design needs, Pixtar has the creative solution. "),w()()(),x(241,"div",73)(242,"h2",84)(243,"button",87),E(244," Who do you usually work with? "),w()(),x(245,"div",88)(246,"div",77),E(247," We collaborate with businesses of all sizes\u2014from startups to established brands\u2014across a range of industries, including Lifestyle, healthcare, technology, real estate, and more. "),w()()(),x(248,"div",73)(249,"h2",84)(250,"button",89),E(251," Which platforms do you use for building websites? "),w()(),x(252,"div",90)(253,"div",77),E(254," We work with popular platforms like Angular, Node.js, React, Shopify, Magento and Webflow, ensuring you get a website that\u2019s not only beautiful but also easy to manage and scalable. "),w()()(),x(255,"div",73)(256,"h2",84)(257,"button",91),E(258," I\u2019m in! When can we get started? "),w()(),x(259,"div",92)(260,"div",77),E(261," We\u2019re thrilled to have you onboard! Just reach out through our contact page, and we\u2019ll set up a kickoff meeting to dive into your project. "),w()()()()()()()()()()()()),2&n&&(se(50),Se("src","",i.baseUrl,"/img/about-us/careimg.jpg",Ce),se(59),Se("src","",i.baseUrl,"/img/about-us/zero1.png",Ce),se(8),Se("src","",i.baseUrl,"/img/about-us/zero2.png",Ce),se(8),Se("src","",i.baseUrl,"/img/about-us/zero3.png",Ce),se(8),Se("src","",i.baseUrl,"/img/about-us/zero4.png",Ce),se(8),Se("src","",i.baseUrl,"/img/about-us/zero5.png",Ce),se(8),Se("src","",i.baseUrl,"/img/about-us/zero6.png",Ce),se(12),Se("src","",i.baseUrl,"/img/about-us/kbn.png",Ce),se(28),Je("options",i.desktopslider),se(2),Je("id",i.baseUrl),se(1),Je("id",i.baseUrl))},dependencies:[ph,Rc],styles:[".barcy[_ngcontent-%COMP%]{font-family:barcelony,sans-serif}.text-color[_ngcontent-%COMP%]{color:#da9777}.h1[_ngcontent-%COMP%]{color:#1d1d1f;font-family:Montserrat,sans-serif;margin-top:0}.cbanner[_ngcontent-%COMP%]{min-height:100vh;height:100%;padding:0!important}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{height:80vh!important}}@media (max-width: 1680px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%}}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:1068px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:770px}}@media (max-width: 1024px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:auto}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:370px;padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]{width:315px}}.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{position:relative}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   .contentbl[_ngcontent-%COMP%]   .barcely[_ngcontent-%COMP%]{left:3px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{display:flex;width:360px;justify-content:start;align-items:center;left:15%!important;bottom:3%!important}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;line-height:normal}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   .p3[_ngcontent-%COMP%]{margin-top:30px}@media (max-width: 767px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:5%!important;bottom:9rem!important}}@media (max-width: 575px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{position:relative!important;left:1%!important}}@media (max-width: 480px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 380px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:315px;bottom:3rem!important}}@media (max-width: 345px){.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]{width:auto;padding:0}}.cbanner[_ngcontent-%COMP%]   .banner-left-content[_ngcontent-%COMP%]   p.text-color[_ngcontent-%COMP%]{font-weight:600}.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{position:absolute;right:2%;top:26%;width:400px}@media (max-width: 1440px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:300px}}@media (max-width: 1366px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:3%}}@media (max-width: 1199px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{right:2%;width:230px;top:30%}}@media (max-width: 991px){.cbanner[_ngcontent-%COMP%]   .img-globe[_ngcontent-%COMP%]{width:100%;top:95px;opacity:.5;object-fit:cover;left:0;right:0}}.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:106px}@media (max-width: 1440px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:80px}}@media (max-width: 1199px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:70px}}@media (max-width: 1024px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:55px}}@media (max-width: 991px){.aboutbrand[_ngcontent-%COMP%]   .about-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:1.5}}.things-section[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1D1D1F 85%,#1D1D1F 100%);min-height:100vh;height:100vh;overflow:scroll;z-index:0}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]{min-height:75vh;height:75vh}}.things-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:9997;padding-top:100px;padding-bottom:65px;background:linear-gradient(180deg,rgb(26,26,26) 85%,rgba(26,26,26,0) 100%)}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-top:30px}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]{max-width:780px;margin-left:auto;margin-right:auto}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:100px;padding-bottom:100px;background:linear-gradient(180deg,rgba(26,26,26,0) 0%,rgb(26,26,26) 20%,rgb(26,26,26) 80%,rgba(26,26,26,0) 100%)}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px;display:block;text-align:center}}@media (max-width: 768px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]{max-width:100%}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]{color:#6e6e73}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .number-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}}.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]{position:relative;margin-left:-61px}@media (max-width: 991px){.things-section[_ngcontent-%COMP%]   .things[_ngcontent-%COMP%]   .track-item[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]{margin-left:0}}.business[_ngcontent-%COMP%]{min-height:710px}@media (max-width: 1366px){.business[_ngcontent-%COMP%]{min-height:650px}}@media (max-width: 767px){.business[_ngcontent-%COMP%]{min-height:570px}}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:relative}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;z-index:0;width:65%;float:right;right:0}@media (max-width: 767px){.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bottomtext[_ngcontent-%COMP%]{margin-top:7rem}@media (max-width: 1366px){.business[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .bottomtext[_ngcontent-%COMP%]{margin-top:5rem}}.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{position:relative;z-index:1;width:52%;padding-top:5rem;display:flex;flex-direction:column;justify-content:center}@media (max-width: 1199px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:4rem}}@media (max-width: 767px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:15rem;width:80%}}@media (max-width: 480px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:12rem;width:100%}}@media (max-width: 380px){.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]{padding-top:10rem}.business[_ngcontent-%COMP%]   .box1[_ngcontent-%COMP%]   .d-block[_ngcontent-%COMP%]{display:inline!important}}div.action[_ngcontent-%COMP%]{padding-bottom:50px}div.action[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:88px}.bannerdrk[_ngcontent-%COMP%]{background-color:#000!important}.footer-collapse[_ngcontent-%COMP%]{padding:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{--bs-accordion-bg: transparent;border-radius:30px;overflow:hidden;border:none;padding:30px 20px}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]{padding:10px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{margin-top:0}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.collapsed[_ngcontent-%COMP%]{color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#6e6e73!important}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none;background:transparent;border-top:1px dashed #6e6e73;border-radius:0;font-size:20px;font-weight:500;display:flex;align-items:center}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:focus{outline:none;color:#6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:active{color:#6e6e73;outline:none}@media (max-width: 1366px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{font-size:16px;padding:15px 0}}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button.brdbtm[_ngcontent-%COMP%]{border-bottom:1px dashed #6e6e73}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{background-image:url(plus.2523ff04f32f499f.svg);margin-top:10px;color:#dadade}.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:400}@media (max-width: 1199px){.footer-collapse[_ngcontent-%COMP%]   .accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:10px;font-size:14px}}.bannerdrk[_ngcontent-%COMP%]{background-color:#000}.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 575px){.success-story[_ngcontent-%COMP%]   .imgblk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;margin:0 auto}}.success-story[_ngcontent-%COMP%]   .slidecontent[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{margin-bottom:30px}.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-bottom:20px}@media (max-width: 1366px){.care-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){margin-bottom:15px}}.things-section.sticky[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}"]}),e})(),_Z=(()=>{class e{constructor(n,i,r){this.payementservice=n,this.routes=i,this.route=r;let o=localStorage.getItem("stripe-payment-user");this.paramData=this.route.snapshot.queryParams.ispayament,o&&(this.paymentData=JSON.parse(o))}ngOnInit(){this.submitPayment()}submitPayment(){this.paymentData&&(this.paymentData.payment_gateway="Stripe",this.paymentData.payment_method="Card",this.paymentData.status="Success",this.payementservice.savePaymentSuccess(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",""),setTimeout(()=>{this.routes.navigate(["/"])},3e3))}))}}return e.\u0275fac=function(n){return new(n||e)(Oe(N1),Oe(xo),Oe(Nl))},e.\u0275cmp=oi({type:e,selectors:[["app-payment-success"]],decls:17,vars:0,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"Your Payment is Successfull "),w(),re(10,"div",9),w(),x(11,"h1",10),E(12,"Your Payment is "),w(),x(13,"h1",11),E(14," Successfull"),w()()(),x(15,"p",12),E(16," We do it real "),w()()()()()())},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})();const q7e=[{path:"",component:Y4},{path:"home",component:Y4},{path:"process",component:$9e},{path:"about",component:Cfe},{path:"services",component:vUe},{path:"branding",component:UUe},{path:"website",component:c7e},{path:"ecommerce",component:I7e},{path:"graphics",component:V7e},{path:"studio",component:W7e},{path:"projects",component:tUe},{path:"contact",component:UU},{path:"contact/:id",component:UU},{path:"businesscard",component:Pfe},{path:"businesscard/view/:id",component:Tfe},{path:"p/kbn",component:Dfe},{path:"p/kbn2",component:Afe},{path:"p/js",component:Efe},{path:"p/io",component:Ofe},{path:"p/godly",component:Sfe},{path:"project-details/dnour",component:qfe},{path:"project-details/pakhis",component:nUe},{path:"project-details/beyou",component:uUe},{path:"project-details/autokoorosh",component:pUe},{path:"project-details/vendetta",component:fUe},{path:"project-details/spacex",component:mUe},{path:"payment-success",component:_Z},{path:"payment-success/:ispayament",component:_Z},{path:"payment-failed",component:(()=>{class e{constructor(n,i,r){this.payementservice=n,this.routes=i,this.route=r;let o=localStorage.getItem("stripe-payment-user");this.paramData=this.route.snapshot.queryParams.ispayament,o&&(this.paymentData=JSON.parse(o))}ngOnInit(){this.submitPayment()}submitPayment(){this.paymentData&&(this.paymentData.payment_gateway="Stripe",this.paymentData.payment_method="Card",this.paymentData.status="Failed",this.payementservice.savePaymentSuccess(this.paymentData).subscribe(n=>{200==n.body.code&&(localStorage.setItem("stripe-payment-user",""),setTimeout(()=>{this.routes.navigate(["/"])},3e3))}))}}return e.\u0275fac=function(n){return new(n||e)(Oe(N1),Oe(xo),Oe(Nl))},e.\u0275cmp=oi({type:e,selectors:[["app-payment-failed"]],decls:17,vars:0,consts:[[1,"service-banner"],[1,"container"],[1,"row"],[1,"col-xl-11","m-auto"],[1,"vh-100"],[1,"d-flex","flex-column","justify-content-center","align-items-center","h-100"],[1,"block-content"],[1,"d-flex","flex-row","w-100"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-none","d-sm-block","d-md-block","d-lg-block","d-xl-block","d-xxl-block"],["id","lottie"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","200",1,"csm","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"],["data-aos","fade-up","data-aos-duration","1000","data-aos-delay","100",1,"p32","head","position-relative","w-100","start-0","end-0","d-block","d-sm-none","d-md-none","d-lg-none","d-xl-none","d-xxl-none"]],template:function(n,i){1&n&&(x(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),E(9,"Your Payment is Failed "),w(),re(10,"div",9),w(),x(11,"h1",10),E(12,"Your Payment is "),w(),x(13,"h1",11),E(14," Failed"),w()()(),x(15,"p",12),E(16," We do it real "),w()()()()()())},styles:['@media (max-width: 575px){section[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}.service-banner[_ngcontent-%COMP%]{background:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 92%;background-size:23%}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .vh-100[_ngcontent-%COMP%]{height:86vh!important}}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]{background-size:60%}}@media (max-width: 575px){.service-banner[_ngcontent-%COMP%]{background-position:100% 103%;min-height:100vh;height:100%}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:106px;font-weight:700;color:#1d1d1f;line-height:normal}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:90px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px;font-weight:400;line-height:normal;margin-bottom:0;color:#101010}@media (max-width: 1366px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 1024px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 767){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:20px;margin-top:-40px;transition:transform .7s ease-in-out}@media (max-width: 767px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{width:60px}}@media (max-width: 600px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:10px}}@media (max-width: 480px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-top:-24px;width:40px}}@media (max-width: 380px){.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]{margin-left:5px}}.service-banner[_ngcontent-%COMP%]   .block-content[_ngcontent-%COMP%]   img.hand[_ngcontent-%COMP%]:hover{transform:rotate(-30deg)}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:50px 10px}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:30px 0}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{padding:15px 0}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;font-weight:700;color:#1d1d1f;margin-top:0}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:44px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:38px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}}@media (max-width: 600px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:32px;font-weight:400;color:#1d1d1f;line-height:normal}@media (max-width: 1440px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 1366px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 800px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#1d1d1f}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-weight:600;color:#1d1d1f;cursor:pointer}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:#da9777}.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{color:#da9777}@media (max-width: 575px){.services[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin:20px 0}}.color1[_ngcontent-%COMP%]{color:#da9777}.barcelony[_ngcontent-%COMP%]{font-family:barcelony;font-size:42px!important}@media (max-width: 1024px){.barcelony[_ngcontent-%COMP%]{font-size:36px!important}}@media (max-width: 800px){.barcelony[_ngcontent-%COMP%]{font-size:28px!important}}.p32[_ngcontent-%COMP%]{font-size:32px}@media (max-width: 600px){.p32[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.p32[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]{font-weight:700;color:#101010}@media (max-width: 1199px){.head[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 991px){.head[_ngcontent-%COMP%]{font-size:24px}}.head[_ngcontent-%COMP%]:before{content:"";background:#de9b7a;height:33px;width:6px;position:relative;left:-10px;display:inline-block;top:6px}@media (max-width: 1199px){.head[_ngcontent-%COMP%]:before{left:0}}@media (max-width: 991px){.head[_ngcontent-%COMP%]:before{height:24px;width:4px}}section.bg-black[_ngcontent-%COMP%]{padding:80px 0;background:#000}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 575px){section.bg-black[_ngcontent-%COMP%]{padding:50px 15px}}section.bg-black[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{color:#fff}section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:40px;font-weight:600}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:32px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .p40[_ngcontent-%COMP%]{font-size:28px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}@media (max-width: 1199px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 991px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 767px){section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}section.bg-black[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.line[_ngcontent-%COMP%]{height:1px;background:#707070;width:65%;margin:0 auto;position:absolute;left:0;right:0;z-index:1}@media (max-width: 767px){.line[_ngcontent-%COMP%]{width:80%}}#lottie[_ngcontent-%COMP%]{display:block;overflow:hidden;transform:translateZ(0);text-align:center;opacity:1;position:relative;top:-1.5rem;width:16%}@media (max-width: 991px){#lottie[_ngcontent-%COMP%]{top:-1.5rem}}@media (max-width: 480px){#lottie[_ngcontent-%COMP%]{top:-.5rem;width:20%}}.p28[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 1199px){.p28[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 991px){.p28[_ngcontent-%COMP%]{font-size:20px}}.csm[_ngcontent-%COMP%]{margin-top:-15px!important}@media (max-width: 575px){.csm[_ngcontent-%COMP%]{margin-top:0!important}}']}),e})()},{path:"**",component:Y4}];let Y7e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e}),e.\u0275inj=Cn({imports:[DU.forRoot(q7e,{initialNavigation:"enabledBlocking"}),DU]}),e})();m(811);var X7e=m(7123);function $7e(e,t){1&e&&re(0,"img",40),2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar-main-logo.svg",Ce)}function Q7e(e,t){1&e&&re(0,"img",40),2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar-main-logo-white.svg",Ce)}function K7e(e,t){1&e&&re(0,"img",41),2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar-black-logo.svg",Ce)}function Z7e(e,t){1&e&&re(0,"img",41),2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar_white.svg",Ce)}function J7e(e,t){if(1&e){const n=vr();x(0,"img",42),St("mouseenter",function(){return Ln(n),tn(rt().func())})("mouseleave",function(){return Ln(n),tn(rt().func2())}),w()}2&e&&Se("src","",rt().baseUrl,"/img/home/home.png",Ce)}function eje(e,t){if(1&e){const n=vr();x(0,"img",42),St("mouseenter",function(){return Ln(n),tn(rt().func())})("mouseleave",function(){return Ln(n),tn(rt().func3())}),w()}2&e&&Se("src","",rt().baseUrl,"/img/home/homewhite.png",Ce)}function tje(e,t){1&e&&(x(0,"h3",43),E(1,"Close"),w())}function nje(e,t){1&e&&(x(0,"h3",44),E(1,"Close"),w())}function ije(e,t){1&e&&(x(0,"h3",45),E(1,"Menu"),w())}function rje(e,t){1&e&&(x(0,"h3",46),E(1,"Menu"),w())}function oje(e,t){if(1&e){const n=vr();x(0,"img",47),St("click",function(){return Ln(n),tn(rt().selectLink("/"))}),w()}2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar-black-logo.svg",Ce)}function sje(e,t){if(1&e){const n=vr();x(0,"img",47),St("click",function(){return Ln(n),tn(rt().selectLink("/"))}),w()}2&e&&Se("src","",rt().baseUrl,"/img/logos/pixtar_white.svg",Ce)}function aje(e,t){if(1&e){const n=vr();x(0,"img",48),St("mouseenter",function(){return Ln(n),tn(rt().func4())})("mouseleave",function(){return Ln(n),tn(rt().func5())}),w()}2&e&&Se("src","",rt().baseUrl,"/img/home/home.png",Ce)}function lje(e,t){if(1&e){const n=vr();x(0,"img",48),St("mouseenter",function(){return Ln(n),tn(rt().func4())})("mouseleave",function(){return Ln(n),tn(rt().func6())}),w()}2&e&&Se("src","",rt().baseUrl,"/img/home/homewhite.png",Ce)}function cje(e,t){if(1&e&&(x(0,"p",49)(1,"a",50),re(2,"img",51),w(),x(3,"a",52),re(4,"img",51),w(),x(5,"a",53),re(6,"img",51),w(),x(7,"a",54),re(8,"img",55),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/images/instagram.svg",Ce),se(2),Se("src","",n.baseUrl,"/images/facebook.svg",Ce),se(2),Se("src","",n.baseUrl,"/images/linkedin.svg",Ce),se(2),Se("src","",n.baseUrl,"/img/home/whatsapp.svg",Ce)}}function dje(e,t){if(1&e&&(x(0,"p",49)(1,"a",50),re(2,"img",51),w(),x(3,"a",52),re(4,"img",51),w(),x(5,"a",53),re(6,"img",51),w(),x(7,"a",54),re(8,"img",56),w()()),2&e){const n=rt();se(2),Se("src","",n.baseUrl,"/images/instagram-white.svg",Ce),se(2),Se("src","",n.baseUrl,"/images/facebook-white.svg",Ce),se(2),Se("src","",n.baseUrl,"/images/linkedin-white.svg",Ce),se(2),Se("src","",n.baseUrl,"/img/home/whatsapp-white.svg",Ce)}}let hje=(()=>{class e{constructor(n,i,r){this.location=n,this.element=i,this.route=r,this.isNavbar=!1,this.ifwhitebar=!1,this.ifblackbar=!0,this.isMenuActive=!1,this.ifbarcliked=!1,this.sidebarVisible=!1,this.imagepath=Nt_baseUrl+"/public/",this.baseUrl=Nt_baseUrl+"/assets"}ngOnInit(){this.ifblackbar=!1,yi("#navMenus").on("click","li",function(){yi(".menu-nav-item").removeClass("active"),yi(this).addClass("active")}),this.isHomemenu()}sidebarOpen(){const n=this.toggleButton,i=document.getElementsByTagName("html")[0];setTimeout(function(){n.classList.add("toggled")},500),i.classList.add("nav-open"),this.sidebarVisible=!0}sidebarClose(){const n=document.getElementsByTagName("html")[0];this.sidebarVisible=!1,n.classList.remove("nav-open")}sidebarToggle(){!1===this.sidebarVisible?this.sidebarOpen():this.sidebarClose()}isHome(){var n=this.location.prepareExternalUrl(this.location.path());return"#"===n.charAt(0)&&(n=n.slice(1)),"/home"===n}isDocumentation(){var n=this.location.prepareExternalUrl(this.location.path());return"#"===n.charAt(0)&&(n=n.slice(1)),"/documentation"===n}selectLink(n){"process"==n&&(this.ifbarcliked=!1),yi("#burger-toggle").prop("checked",!1),this.route.navigateByUrl(n),yi(".showcls").removeClass("active"),yi(".showcls2").removeClass("active")}showBlackbars(){var n=this.location.path();return"process"!=(n=n.split("/")[1])||this.ifbarcliked?(this.ifblackbar=!0,this.ifwhitebar=!1,yi(".navbar").removeClass("noblack")):(this.ifblackbar=!1,this.ifwhitebar=!0,yi(".navbar").addClass("noblack")),this.isHomemenu(),!0}onclicchange(){var n=this.location.path();n=n.split("/")[1],this.ifbarcliked="process"==n&&!this.ifbarcliked}func(){yi(".home-icon").attr("src",this.baseUrl+"/img/home/homehover.png")}func2(){yi(".home-icon").attr("src",this.baseUrl+"/img/home/home.png")}func3(){yi(".home-icon").attr("src",this.baseUrl+"/img/home/homewhite.png")}func4(){yi(".menuhome").attr("src",this.baseUrl+"/img/home/homehover.png")}func5(){yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")}func6(){yi(".menuhome").attr("src",this.baseUrl+"/img/home/homewhite.png")}isHomemenu(){yi("#home").removeClass("active"),yi("#projects").removeClass("active"),yi("#about").removeClass("active"),yi("#process").removeClass("active"),yi("#contact").removeClass("active"),yi("#ecommerce").removeClass("active"),yi("#graphics").removeClass("active"),yi("#services").removeClass("active"),yi("#studio").removeClass("active"),yi("#website").removeClass("active");let n=this.baseUrl;var i=this.location.path();"home"==(i=i.split("/")[1])||"#"==i?(yi("#home").addClass("active"),yi(".menuhome").attr("src",n+"/img/home/homehover.png")):"projects"==i?(yi("#projects").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"about"==i?(yi("#about").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"process"==i?(yi("#process").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/homewhite.png")):"ecommerce"==i?(yi("#ecommerce").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"graphics"==i?(yi("#graphics").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"services"==i?(yi("#services").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"studio"==i?(yi("#studio").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"website"==i?(yi("#website").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png")):"contact"==i&&(yi("#contact").addClass("active"),yi(".menuhome").attr("src",this.baseUrl+"/img/home/home.png"))}labelchange(){yi(".showcls").toggleClass("active"),yi(".showcls2").toggleClass("active")}}return e.\u0275fac=function(n){return new(n||e)(Oe(gm),Oe(Rr),Oe(xo))},e.\u0275cmp=oi({type:e,selectors:[["app-navbar"]],decls:76,vars:17,consts:[["color-on-scroll","500",1,"navbar","navbar-expand-lg","fixed-top","navbar-transparent"],[1,"container-fluid"],[1,"w-100"],[1,"col-lg-10","offset-lg-1"],[1,"menu-container",2,"width","100%"],[1,"d-flex","justify-content-between","menu-block"],[1,"brand"],["href","/"],["alt","","width","160","class","logo1",3,"src",4,"ngIf"],["alt","pixtar","width","40","class","logo2",3,"src",4,"ngIf"],[1,"menu-list"],["alt","homeicon","class","home-icon",3,"src","mouseenter","mouseleave",4,"ngIf"],["type","checkbox","id","burger-toggle"],["for","burger-toggle",1,"burger-menu",3,"click"],[1,"line"],[1,"labelmenu"],["class","cstmenu showcls",4,"ngIf"],["class","cstmenu text-white showcls",4,"ngIf"],["class","d-none d-sm-none d-md-none d-lg-block cstmenu showcls2",4,"ngIf"],["class","d-none d-sm-none d-md-none d-lg-block cstmenu text-white showcls2",4,"ngIf"],["id","menu",1,"menu"],["class","logo","alt","pixtar","width","40",3,"src","click",4,"ngIf"],[1,"menu-inner"],["id","navMenus",1,"menu-nav"],["id","home",1,"menu-nav-item"],[1,"menu-nav-link",3,"click"],["alt","homeicon","class","menuhome",3,"src","mouseenter","mouseleave",4,"ngIf"],["id","services",1,"menu-nav-item"],["id","studio",1,"menu-nav-item"],["id","projects",1,"menu-nav-item"],["id","process",1,"menu-nav-item"],["id","blog",1,"menu-nav-item"],["target","_blank","href","/blog",1,"menu-nav-link",3,"click"],["id","contact",1,"menu-nav-item"],[1,"menu-nav-link","lastanch",3,"click"],[1,"d-flex","flex-row"],["alt","","width","30",1,"arrowimg",3,"src"],[1,"gallery"],[1,"position-absolute","menu-left-content"],["class","mt-2",4,"ngIf"],["alt","","width","160",1,"logo1",3,"src"],["alt","pixtar","width","40",1,"logo2",3,"src"],["alt","homeicon",1,"home-icon",3,"src","mouseenter","mouseleave"],[1,"cstmenu","showcls"],[1,"cstmenu","text-white","showcls"],[1,"d-none","d-sm-none","d-md-none","d-lg-block","cstmenu","showcls2"],[1,"d-none","d-sm-none","d-md-none","d-lg-block","cstmenu","text-white","showcls2"],["alt","pixtar","width","40",1,"logo",3,"src","click"],["alt","homeicon",1,"menuhome",3,"src","mouseenter","mouseleave"],[1,"mt-2"],["href","https://www.instagram.com/pixtar.ae/","target","_blank",1,"me-2"],["alt","","width","30",3,"src"],["href","https://www.facebook.com/pixtar.ae/","target","_blank",1,"me-2"],["href","https://www.linkedin.com/company/pixtar-ae/","target","_blank",1,"me-2"],["href","https://wa.me/+971527930781","target","_blank",1,"whatsapp-icon2","slideUpReturn","tabmob"],["alt","whatsapp","width","30",3,"src"],["alt","whatsapp",3,"src"]],template:function(n,i){1&n&&(x(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),at(8,$7e,1,1,"img",8),at(9,Q7e,1,1,"img",8),at(10,K7e,1,1,"img",9),at(11,Z7e,1,1,"img",9),w()(),x(12,"div",10)(13,"a",7),at(14,J7e,1,1,"img",11),at(15,eje,1,1,"img",11),w(),re(16,"input",12),x(17,"label",13),St("click",function(){return i.labelchange()}),re(18,"div",14)(19,"div",14)(20,"div",14),w(),x(21,"div",15),at(22,tje,2,0,"h3",16),at(23,nje,2,0,"h3",17),at(24,ije,2,0,"h3",18),at(25,rje,2,0,"h3",19),w(),x(26,"div",20),at(27,oje,1,1,"img",21),at(28,sje,1,1,"img",21),x(29,"div",22)(30,"ul",23)(31,"li",24)(32,"a",25),St("click",function(){return i.selectLink("/")}),x(33,"span")(34,"div"),at(35,aje,1,1,"img",26),at(36,lje,1,1,"img",26),w()()()(),x(37,"li",27)(38,"a",25),St("click",function(){return i.selectLink("services")}),x(39,"span")(40,"div"),E(41,"Services"),w()()()(),x(42,"li",28)(43,"a",25),St("click",function(){return i.selectLink("studio")}),x(44,"span")(45,"div"),E(46,"Studio"),w()()()(),x(47,"li",29)(48,"a",25),St("click",function(){return i.selectLink("projects")}),x(49,"span")(50,"div"),E(51,"Projects"),w()()()(),x(52,"li",30)(53,"a",25),St("click",function(){return i.selectLink("process")}),x(54,"span")(55,"div"),E(56,"Process"),w()()()(),x(57,"li",31)(58,"a",32),St("click",function(){return i.selectLink("blog")}),x(59,"span")(60,"div"),E(61,"Blogs"),w()()()(),x(62,"li",33)(63,"a",34),St("click",function(){return i.selectLink("contact")}),x(64,"span")(65,"div",35),E(66,"Contact "),re(67,"img",36),w()()()()(),x(68,"div",37)(69,"div",38)(70,"p"),E(71,"Creative agency based in Dubai, "),w(),x(72,"p"),E(73,"United Arab Emirates"),w(),at(74,cje,9,4,"p",39),at(75,dje,9,4,"p",39),w()()()()()()()()()()()),2&n&&(se(8),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(1),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(3),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(7),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(1),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(2),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(7),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar),se(31),Se("src","",i.baseUrl,"/img/home/contactarrow.svg",Ce),se(7),Je("ngIf",i.showBlackbars()&&i.ifblackbar),se(1),Je("ngIf",i.showBlackbars()&&i.ifwhitebar))},dependencies:[ta,VA],styles:['.navbar[_ngcontent-%COMP%]{background-color:#fff!important;box-shadow:none}.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:20px 0;align-items:center}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0}}@media (max-width: 575px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0 10px 15px}}@media (max-width: 380px){.navbar[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{padding:10px 0}}.navbar[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]{margin-top:0;display:none!important}.navbar[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]   .ptext[_ngcontent-%COMP%]{position:relative;top:5px}.navbar[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{margin-top:0;display:block!important;margin-left:1px}@media (max-width: 575px){.navbar[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{width:35px}}.navbar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.navbar[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;margin-top:0}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .4s ease;opacity:0}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:500;cursor:pointer;font-size:1.75rem}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 320px){.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.8rem}}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:active   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:visited   i[_ngcontent-%COMP%]{color:#de9b7a;opacity:1;transform:rotate(60deg)}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:active   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:visited   a[_ngcontent-%COMP%]{color:#de9b7a}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.menu-nav-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#de9b7a}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.menu-nav-item.active[_ngcontent-%COMP%]   .lastanch[_ngcontent-%COMP%]{color:#000!important}.navbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif!important;font-weight:700;color:#000}.noblack.navbar-transparent[_ngcontent-%COMP%]{background-color:transparent!important}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{background-color:#000;background-image:url(pixtar-splitlogo-black.8d5f4727f3a5141b.svg)}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .noblack[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#de9b7a}.navbar.navbar-transparent[_ngcontent-%COMP%]{border-bottom:none;box-shadow:none;padding-top:0}.navbar.navbar-transparent[_ngcontent-%COMP%]   .logo1[_ngcontent-%COMP%]{display:block!important}.navbar.navbar-transparent[_ngcontent-%COMP%]   .logo2[_ngcontent-%COMP%]{display:none!important}p[_ngcontent-%COMP%]{margin:0}.cstmenu[_ngcontent-%COMP%]{font-weight:600}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(1)   img[_ngcontent-%COMP%]{transition-delay:.18s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(2)   img[_ngcontent-%COMP%]{transition-delay:.26s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(3)   img[_ngcontent-%COMP%]{transition-delay:.34s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:nth-child(4)   img[_ngcontent-%COMP%]{transition-delay:.42s}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:after{transform:translate(0)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(1){transform:translateY(calc(var(--burger-menu-radius) / 5)) rotate(45deg)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2){transform:scaleX(0)}#burger-toggle[_ngcontent-%COMP%]:checked ~ .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3){transform:translateY(calc(var(--burger-menu-radius) / -5)) rotate(-45deg)}#burger-toggle[_ngcontent-%COMP%]{position:absolute;appearance:none;opacity:0;display:none}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]{opacity:1;visibility:visible}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .menu-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}#burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], #burger-toggle[_ngcontent-%COMP%]:checked ~ .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transform:translateY(0);transition:1.2s .1s cubic-bezier(.35,0,.07,1)}.burger-menu[_ngcontent-%COMP%]{--burger-menu-radius: 4em;position:relative;top:0;right:0;z-index:100;display:block;width:var(--burger-menu-radius);height:var(--burger-menu-radius);outline:none;cursor:pointer;width:55px}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;left:25%;width:50%;height:2px;background:#000;border-radius:10px;overflow:hidden;transition:.5s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(1){top:30%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2){top:50%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3){top:70%}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;left:0;width:100%;height:100%;background:var(--primary-color-darker);transform:translate(-100%);transition:.25s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2):after{transition-delay:.1s}.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(3):after{transition-delay:.2s}@media (max-width: 380px){.burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{left:45%}}.burger-menu[_ngcontent-%COMP%]:hover   .line[_ngcontent-%COMP%]:after{transform:translate(0)}.noblack[_ngcontent-%COMP%]   .burger-menu[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{background:#fff}.menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;display:flex;justify-content:flex-start;align-items:center;background-color:#fff;opacity:0;overflow-x:hidden;visibility:hidden;transition:.3s;padding:0 9vw;min-height:100vh;height:100%;background-image:url(pixtar-splitlogo.fc88c164801c64f4.svg);background-repeat:no-repeat;background-position:100% 107%;background-size:23%}@media (max-width: 767px){.menu[_ngcontent-%COMP%]{background-size:60%}}.menu-nav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0;padding:0;text-align:center;list-style-type:none}@media screen and (max-width: 750px){.menu-nav[_ngcontent-%COMP%]{flex-direction:column}}.menu-nav-item[_ngcontent-%COMP%]{flex:1;margin:15px 0}@media (max-width: 1366px){.menu-nav-item[_ngcontent-%COMP%]{margin:10px 0;line-height:normal}}@media (max-width: 320px){.menu-nav-item[_ngcontent-%COMP%]{margin:6px 0}}.menu-nav-link[_ngcontent-%COMP%]{position:relative;display:inline-flex;font-size:2rem;color:#fff;text-decoration:none}.menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden}.menu-nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform:translateY(102%)}.menu-nav-link[_ngcontent-%COMP%]:after{position:absolute;content:"";top:100%;left:0;width:100%;height:3px;background:var(--primary-color);transform:scaleX(0);transform-origin:right;transition:transform .5s}.menu-nav-link[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);transform-origin:left}.menu[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;color:#fff;overflow:hidden}.menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:2px;text-transform:uppercase;transform:translateY(102%)}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{margin-top:36px;display:flex;flex-wrap:wrap}@media screen and (max-width: 750px){.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{justify-content:center}}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]{width:15vw;margin:0 12px;overflow:hidden}@media screen and (max-width: 750px){.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]{width:40vw;margin:0 12px 12px 0}}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;transition:.6s}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]:before{position:absolute;content:attr(data-label);top:0;left:0;z-index:1;display:flex;justify-content:center;align-items:center;width:100%;height:100%;color:#fff;background:rgba(0,0,0,.6);opacity:0;transition:.4s}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]{transform:scale(1.2)}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .image-link[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]:before{opacity:1}.menu[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;transform:translateY(102%)}.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;position:fixed;top:1.3vw}@media (max-width: 1440px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:2vw}}@media (max-width: 1366px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:1vw;left:9.5vw}}@media (max-width: 1024px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:1.5vw}}@media (max-width: 991px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{left:2vw;top:1.5vw}}@media (max-width: 600px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:4vw;left:3vw}}@media (max-width: 575px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:4vw;left:8vw;width:35px}}@media (max-width: 380px){.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:5vw;left:4.8vw}}.menu[_ngcontent-%COMP%]   .menu-inner[_ngcontent-%COMP%]{display:flex;width:50%;justify-content:center;align-items:center}@media (max-width: 600px){.menu[_ngcontent-%COMP%]   .menu-inner[_ngcontent-%COMP%]{width:50%}}.lastanch[_ngcontent-%COMP%]{font-weight:700!important;color:#de9b7a!important}.lastanch[_ngcontent-%COMP%]:hover{color:#000!important}.lastanch[_ngcontent-%COMP%]:focus{color:#000!important}.lastanch[_ngcontent-%COMP%]   .arrowimg[_ngcontent-%COMP%]{position:relative;top:-6px;margin-left:10px}.noblack[_ngcontent-%COMP%]   .lastanch[_ngcontent-%COMP%]:hover{color:#fff!important}.menu-left-content[_ngcontent-%COMP%]{left:5%;bottom:3%;text-align:left}.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal;font-size:18px}@media (max-width: 1199px){.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 991px){.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.menu-left-content[_ngcontent-%COMP%]   .text-color[_ngcontent-%COMP%]{color:#de9b7a}.menu-left-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){font-weight:600}.home-icon[_ngcontent-%COMP%]{height:23px;position:relative;right:1rem}@media (max-width: 575px){.home-icon[_ngcontent-%COMP%]{right:.5rem;height:20px}}.menuhome[_ngcontent-%COMP%]{height:40px}@media (max-width: 575px){.menuhome[_ngcontent-%COMP%]{height:30px}}.showcls[_ngcontent-%COMP%]{display:none}.showcls.active[_ngcontent-%COMP%]{position:relative;z-index:1;display:block;animation:fadeIn 1s}@media (max-width: 991px){.showcls.active[_ngcontent-%COMP%]{display:none}}.showcls2[_ngcontent-%COMP%]{display:block;animation:fadeIn 1s}.showcls2.active[_ngcontent-%COMP%]{display:none!important}.labelmenu[_ngcontent-%COMP%]{display:block;position:relative;width:76.19px}.labelmenu[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{position:absolute;top:-1rem}@media (max-width: 991px){.labelmenu[_ngcontent-%COMP%]{display:none}}']}),e})(),uje=(()=>{class e{constructor(n){this.location=n,this.test=new Date,this.isfooterBlack=!1,this.imagepath=Nt_baseUrl+"/public/",this.baseUrl=Nt_baseUrl+"/assets"}ngOnInit(){}removeFooter(){this.isfooterBlack=!1;var n=this.location.path();return("projects"==(n=n.split("/")[1])||"about"==n)&&(this.isfooterBlack=!0,!0)}}return e.\u0275fac=function(n){return new(n||e)(Oe(gm))},e.\u0275cmp=oi({type:e,selectors:[["app-footer"]],decls:51,vars:5,consts:[[1,"footer"],[1,"container"],[1,"row"],[1,"col-md-12","col-sm-11","col-11","mx-auto"],[1,"desb","pb-0"],[1,"text-center"],[1,"footer-nav","desb"],[1,"position-absolute","start-50","translate-middle"],["routerLink","/contact",1,"cstbtn","cstbtn128","ftr1"],[1,"text","text128"],[1,"borderspan"],["aria-hidden","true",1,"fa","fa-chevron-right"],[1,"d-flex","justify-content-between","align-items-center","footer-block"],[1,"d-flex1"],["alt","","width","160",1,"logo1",3,"src"],[1,"d-flex2"],[1,"mb-0"],["routerLink","/services"],["routerLink","/studio"],["routerLink","/about"],["routerLink","/contact"],["routerLink","/contact",1,"cstbtn","cstbtn128","ftr2"],["aria-hidden","true",1,"fa","fa-chevron-right","opacity-0"],[1,"credits","ml-auto"],[1,"copyright"]],template:function(n,i){1&n&&(x(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),E(6,"READY TO TRANSFORM YOUR BRAND? "),re(7,"br"),E(8," GET IN TOUCH WITH US TODAY."),w()(),x(9,"nav",6)(10,"div",7)(11,"p")(12,"a",8)(13,"span",9),E(14," Let\u2019s Talk"),w(),x(15,"span",10),re(16,"i",11),w()()()(),x(17,"div",12)(18,"div",13),re(19,"img",14),x(20,"p"),E(21,"Pixtar Branding Services LLC."),w(),x(22,"p"),E(23,"Dubai United Arab Emirates"),w(),x(24,"p"),E(25,"+971527930781"),w()(),x(26,"div",15)(27,"ul",16)(28,"li")(29,"a",17),E(30,"Services"),w()(),x(31,"li")(32,"a",18),E(33,"Studio"),w()(),x(34,"li")(35,"a",19),E(36,"Work"),w()(),x(37,"li")(38,"a",20),E(39,"Contact"),w()(),x(40,"li")(41,"p")(42,"a",21)(43,"span",9),E(44," Ask for a Quote"),w(),x(45,"span",10),re(46,"i",22),w()()()()()()()()(),x(47,"div",23)(48,"span",24),E(49),function oB(e,t){const n=In();let i;const r=e+22;n.firstCreatePass?(i=function _re(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=sd(i.type)),s=Xi(Oe);try{const a=gx(!1),l=o();return gx(a),function xne(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,Ut(),r,l),l}finally{Xi(s)}}(50,"date"),w()()()()()),2&n&&(se(19),Se("src","",i.baseUrl,"/img/logos/pixtar-main-logo.svg",Ce),se(30),sl(" \xa9 ",function sB(e,t,n,i){const r=e+22,o=Ut(),s=ne(o,r);return function Ey(e,t){return e[1].data[t].pure}(o,r)?tB(o,uo(),t,s.transform,n,i,s):s.transform(n,i)}(50,2,i.test,"yyyy"),", All Rights Reserved Pixtar "))},dependencies:[kc,k6],styles:[".footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none}.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 5px}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;height:38px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:80px 0}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:50px 0}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]{padding:30px 0}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:32px}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 1024px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:150px}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:130px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .qrcode[_ngcontent-%COMP%]{height:80px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]{padding-top:20px}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]{padding-top:10px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:barcelony,sans-serif;font-size:78px;color:#000;line-height:1}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 1280px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px}}.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:90px;text-transform:uppercase;font-weight:700;line-height:1}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 1280px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px}}@media (max-width: 991px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}@media (max-width: 575px){.footer[_ngcontent-%COMP%]   .describe[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]{padding-top:50px}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:14px;line-height:normal;margin-bottom:0;position:relative;left:54px}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{left:0}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:10px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;align-items:center}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 5px}}@media (max-width: 320px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 3px}}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#7a7a7a;font-size:14px;font-weight:600}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dd9a7a}.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#dd9a7a}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]{margin-top:15px;display:flex;align-items:center}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .footer-block[_ngcontent-%COMP%]{flex-direction:column;justify-content:center!important;align-items:center!important}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{display:block;margin:0}}.footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#777;text-decoration:none;font-weight:600}.footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{line-height:normal}.footer[_ngcontent-%COMP%]   .credits[_ngcontent-%COMP%]{margin:15px 0}.footerBlk[_ngcontent-%COMP%]{background:#000}.footerBlk[_ngcontent-%COMP%]   .d-flex1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff!important}.footerBlk[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important;font-size:18px}.footerBlk[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#dd9a7a!important}.whatsapp-icon[_ngcontent-%COMP%]{position:fixed;width:34px;text-align:center;text-decoration:none;bottom:4%;right:2%;z-index:9;cursor:pointer}@media (max-width: 1440px){.whatsapp-icon[_ngcontent-%COMP%]{bottom:3%}}@media (max-width: 480px){.whatsapp-icon[_ngcontent-%COMP%]{bottom:2%;right:4%;width:28px}}.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1d1d1f}@media (max-width: 1366px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:52%!important}}@media (max-width: 1024px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:53%!important}}@media (max-width: 767px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:54%!important}}@media (max-width: 600px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{margin:.5rem auto}}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .desb[_ngcontent-%COMP%]   .start-50[_ngcontent-%COMP%]{left:59%!important}}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]{color:#1d1d1f!important;font-weight:600;display:flex;justify-content:end;align-items:center;text-decoration:none!important}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]{border:1px dashed #6e6e73;height:35px;width:35px;display:flex;justify-content:center;align-items:center;position:absolute;border-radius:50px;transition:.5s all ease-in-out}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .borderspan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#e5a381,#a9644b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:8px}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]:hover   .borderspan[_ngcontent-%COMP%]{height:25px;width:25px}.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:115px;position:relative;right:4px;font-size:14px}@media (max-width: 480px){.footer[_ngcontent-%COMP%]   .d-flex2[_ngcontent-%COMP%]   .cstbtn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;width:107px}}.cstbtn.ftr1[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:77px}"]}),e})();function pje(e,t){1&e&&re(0,"app-navbar")}function fje(e,t){1&e&&re(0,"app-footer")}let mje=(()=>{class e{constructor(n,i,r){this.renderer=n,this.location=i,this.metaTagService=r}ngOnInit(){X7e.init(),this.metaTagService.addTags([{name:"keywords",content:"pixtar.ae, pixtar"},{name:"robots",content:"index, follow"},{name:"author",content:"Ipcs"},{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},{name:"date",content:"2022-10-1",scheme:"YYYY-MM-DD"},{charset:"UTF-8"}]),window.scroll({top:0,left:0,behavior:"smooth"})}removeFooter(){var n=this.location.prepareExternalUrl(this.location.path());return!("/signup"===(n=n.slice(1))||"/nucleoicons"===n||n.includes("contact")||"p/kbn"===n||"p/kbn2"===n||"p/js"===n||"p/io"===n||"p/godly"===n)}removeHeader(){var n=this.location.prepareExternalUrl(this.location.path());return"p/kbn"!==(n=n.slice(1))&&"p/kbn2"!==n&&"p/js"!==n&&"p/io"!==n&&"p/godly"!==n||($("#botpenguin-launcher-12").hasClass("botpenguin-right")&&$(".BotPenguin-chat").addClass("d-none"),!1)}}return e.\u0275fac=function(n){return new(n||e)(Oe(vs),Oe(gm),Oe(Tl))},e.\u0275cmp=oi({type:e,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(n,i){1&n&&(at(0,pje,1,0,"app-navbar",0),re(1,"router-outlet"),at(2,fje,1,0,"app-footer",0)),2&n&&(Je("ngIf",i.removeHeader()),se(2),Je("ngIf",i.removeFooter()))},dependencies:[ta,iA,hje,uje]}),e})(),gje=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Mt({type:e,bootstrap:[mje]}),e.\u0275inj=Cn({providers:[Su],imports:[iz.withServerTransition({appId:"serverApp"}),Y7e,xhe,ude,e9,t9,ufe,_fe.forRoot(),Ove]}),e})();function xZ(){nle().bootstrapModule(gje).catch(e=>console.error(e))}(function Moe(){if(t6)throw new Error("Cannot enable prod mode after platform setup.");e6=!1})(),"complete"===document.readyState?xZ():document.addEventListener("DOMContentLoaded",xZ)},7123:function(u){u.exports=function(f){function m(C){if(_[C])return _[C].exports;var D=_[C]={exports:{},id:C,loaded:!1};return f[C].call(D.exports,D,D.exports,m),D.loaded=!0,D.exports}var _={};return m.m=f,m.c=_,m.p="dist/",m(0)}([function(f,m,_){"use strict";function C(vt){return vt&&vt.__esModule?vt:{default:vt}}var D=Object.assign||function(vt){for(var Ct=1;Ct<arguments.length;Ct++){var Yt=arguments[Ct];for(var on in Yt)Object.prototype.hasOwnProperty.call(Yt,on)&&(vt[on]=Yt[on])}return vt},z=(C(_(1)),_(6)),B=C(z),T=C(_(7)),q=C(_(8)),N=C(_(9)),k=C(_(10)),ie=C(_(11)),me=C(_(14)),Ve=[],it=!1,je={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},qe=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(it=!0),it)return Ve=(0,ie.default)(Ve,je),(0,k.default)(Ve,je.once),Ve},ot=function(){Ve=(0,me.default)(),qe()};f.exports={init:function(vt){je=D(je,vt),Ve=(0,me.default)();var Ct=document.all&&!window.atob;return function(vt){return!0===vt||"mobile"===vt&&N.default.mobile()||"phone"===vt&&N.default.phone()||"tablet"===vt&&N.default.tablet()||"function"==typeof vt&&!0===vt()}(je.disable)||Ct?void Ve.forEach(function(vt,Ct){vt.node.removeAttribute("data-aos"),vt.node.removeAttribute("data-aos-easing"),vt.node.removeAttribute("data-aos-duration"),vt.node.removeAttribute("data-aos-delay")}):(je.disableMutationObserver||q.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),je.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",je.easing),document.querySelector("body").setAttribute("data-aos-duration",je.duration),document.querySelector("body").setAttribute("data-aos-delay",je.delay),"DOMContentLoaded"===je.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?qe(!0):"load"===je.startEvent?window.addEventListener(je.startEvent,function(){qe(!0)}):document.addEventListener(je.startEvent,function(){qe(!0)}),window.addEventListener("resize",(0,T.default)(qe,je.debounceDelay,!0)),window.addEventListener("orientationchange",(0,T.default)(qe,je.debounceDelay,!0)),window.addEventListener("scroll",(0,B.default)(function(){(0,k.default)(Ve,je.once)},je.throttleDelay)),je.disableMutationObserver||q.default.ready("[data-aos]",ot),Ve)},refresh:qe,refreshHard:ot}},function(f,m){},,,,,function(f,m){(function(_){"use strict";function C(Ie,bt,vt){function Ct($t){var Li=Wt,Vi=An;return Wt=An=void 0,Cn=$t,Fn=Ie.apply(Vi,Li)}function Yt($t){return Cn=$t,ft=setTimeout(Re,bt),tr?Ct($t):Fn}function pt($t){var Li=$t-Wn;return void 0===Wn||Li>=bt||Li<0||sr&&$t-Cn>=fn}function Re(){var $t=j();return pt($t)?ut($t):void(ft=setTimeout(Re,function on($t){var gr=bt-($t-Wn);return sr?ot(gr,fn-($t-Cn)):gr}($t)))}function ut($t){return ft=void 0,li&&Wt?Ct($t):(Wt=An=void 0,Fn)}function dn(){var $t=j(),Li=pt($t);if(Wt=arguments,An=this,Wn=$t,Li){if(void 0===ft)return Yt(Wn);if(sr)return ft=setTimeout(Re,bt),Ct(Wn)}return void 0===ft&&(ft=setTimeout(Re,bt)),Fn}var Wt,An,fn,Fn,ft,Wn,Cn=0,tr=!1,sr=!1,li=!0;if("function"!=typeof Ie)throw new TypeError(F);return bt=Q(bt)||0,G(vt)&&(tr=!!vt.leading,fn=(sr="maxWait"in vt)?qe(Q(vt.maxWait)||0,bt):fn,li="trailing"in vt?!!vt.trailing:li),dn.cancel=function Qt(){void 0!==ft&&clearTimeout(ft),Cn=0,Wt=Wn=An=ft=void 0},dn.flush=function Un(){return void 0===ft?Fn:ut(j())},dn}function G(Ie){var bt=typeof Ie>"u"?"undefined":T(Ie);return!!Ie&&("object"==bt||"function"==bt)}function B(Ie){return"symbol"==(typeof Ie>"u"?"undefined":T(Ie))||function z(Ie){return!!Ie&&"object"==(typeof Ie>"u"?"undefined":T(Ie))}(Ie)&&je.call(Ie)==R}function Q(Ie){if("number"==typeof Ie)return Ie;if(B(Ie))return q;if(G(Ie)){var bt="function"==typeof Ie.valueOf?Ie.valueOf():Ie;Ie=G(bt)?bt+"":bt}if("string"!=typeof Ie)return 0===Ie?Ie:+Ie;Ie=Ie.replace(N,"");var vt=k.test(Ie);return vt||V.test(Ie)?ie(Ie.slice(2),vt?2:8):W.test(Ie)?q:+Ie}var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ie){return typeof Ie}:function(Ie){return Ie&&"function"==typeof Symbol&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},F="Expected a function",q=NaN,R="[object Symbol]",N=/^\s+|\s+$/g,W=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,V=/^0o[0-7]+$/i,ie=parseInt,pe="object"==(typeof _>"u"?"undefined":T(_))&&_&&_.Object===Object&&_,me="object"==(typeof self>"u"?"undefined":T(self))&&self&&self.Object===Object&&self,Ve=pe||me||Function("return this")(),je=Object.prototype.toString,qe=Math.max,ot=Math.min,j=function(){return Ve.Date.now()};f.exports=function D(Ie,bt,vt){var Ct=!0,Yt=!0;if("function"!=typeof Ie)throw new TypeError(F);return G(vt)&&(Ct="leading"in vt?!!vt.leading:Ct,Yt="trailing"in vt?!!vt.trailing:Yt),C(Ie,bt,{leading:Ct,maxWait:bt,trailing:Yt})}}).call(m,function(){return this}())},function(f,m){(function(_){"use strict";function D(j){var Ie=typeof j>"u"?"undefined":Q(j);return!!j&&("object"==Ie||"function"==Ie)}function z(j){return"symbol"==(typeof j>"u"?"undefined":Q(j))||function G(j){return!!j&&"object"==(typeof j>"u"?"undefined":Q(j))}(j)&&it.call(j)==q}function B(j){if("number"==typeof j)return j;if(z(j))return F;if(D(j)){var Ie="function"==typeof j.valueOf?j.valueOf():j;j=D(Ie)?Ie+"":Ie}if("string"!=typeof j)return 0===j?j:+j;j=j.replace(R,"");var bt=W.test(j);return bt||k.test(j)?V(j.slice(2),bt?2:8):N.test(j)?F:+j}var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},T="Expected a function",F=NaN,q="[object Symbol]",R=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,k=/^0o[0-7]+$/i,V=parseInt,ie="object"==(typeof _>"u"?"undefined":Q(_))&&_&&_.Object===Object&&_,pe="object"==(typeof self>"u"?"undefined":Q(self))&&self&&self.Object===Object&&self,me=ie||pe||Function("return this")(),it=Object.prototype.toString,je=Math.max,qe=Math.min,ot=function(){return me.Date.now()};f.exports=function C(j,Ie,bt){function vt(li){var $t=dn,Li=Wt;return dn=Wt=void 0,Wn=li,fn=j.apply(Li,$t)}function Ct(li){return Wn=li,Fn=setTimeout(pt,Ie),Cn?vt(li):fn}function on(li){var $t=li-ft;return void 0===ft||$t>=Ie||$t<0||tr&&li-Wn>=An}function pt(){var li=ot();return on(li)?Re(li):void(Fn=setTimeout(pt,function Yt(li){var Vi=Ie-(li-ft);return tr?qe(Vi,An-(li-Wn)):Vi}(li)))}function Re(li){return Fn=void 0,sr&&dn?vt(li):(dn=Wt=void 0,fn)}function Un(){var li=ot(),$t=on(li);if(dn=arguments,Wt=this,ft=li,$t){if(void 0===Fn)return Ct(ft);if(tr)return Fn=setTimeout(pt,Ie),vt(ft)}return void 0===Fn&&(Fn=setTimeout(pt,Ie)),fn}var dn,Wt,An,fn,Fn,ft,Wn=0,Cn=!1,tr=!1,sr=!0;if("function"!=typeof j)throw new TypeError(T);return Ie=B(Ie)||0,D(bt)&&(Cn=!!bt.leading,An=(tr="maxWait"in bt)?je(B(bt.maxWait)||0,Ie):An,sr="trailing"in bt?!!bt.trailing:sr),Un.cancel=function ut(){void 0!==Fn&&clearTimeout(Fn),Wn=0,dn=ft=Wt=Fn=void 0},Un.flush=function Qt(){return void 0===Fn?fn:Re(ot())},Un}}).call(m,function(){return this}())},function(f,m){"use strict";function _(Q){var T=void 0,F=void 0;for(T=0;T<Q.length;T+=1)if((F=Q[T]).dataset&&F.dataset.aos||F.children&&_(F.children))return!0;return!1}function C(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function z(Q){Q&&Q.forEach(function(T){var F=Array.prototype.slice.call(T.addedNodes),q=Array.prototype.slice.call(T.removedNodes);if(_(F.concat(q)))return B()})}Object.defineProperty(m,"__esModule",{value:!0});var B=function(){};m.default={isSupported:function D(){return!!C()},ready:function G(Q,T){var F=window.document,R=new(C())(z);B=T,R.observe(F.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}}},function(f,m){"use strict";function C(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(m,"__esModule",{value:!0});var D=function(){function F(q,R){for(var N=0;N<R.length;N++){var W=R[N];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,W.key,W)}}return function(q,R,N){return R&&F(q.prototype,R),N&&F(q,N),q}}(),G=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,z=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,B=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,Q=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,T=function(){function F(){!function _(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")}(this,F)}return D(F,[{key:"phone",value:function(){var q=C();return!(!G.test(q)&&!z.test(q.substr(0,4)))}},{key:"mobile",value:function(){var q=C();return!(!B.test(q)&&!Q.test(q.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),F}();m.default=new T},function(f,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.default=function(D,G){var z=window.pageYOffset,B=window.innerHeight;D.forEach(function(Q,T){!function(D,G,z){var B=D.node.getAttribute("data-aos-once");G>D.position?D.node.classList.add("aos-animate"):typeof B<"u"&&("false"===B||!z&&"true"!==B)&&D.node.classList.remove("aos-animate")}(Q,B+z,G)})}},function(f,m,_){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var G=function C(B){return B&&B.__esModule?B:{default:B}}(_(12));m.default=function(B,Q){return B.forEach(function(T,F){T.node.classList.add("aos-init"),T.position=(0,G.default)(T.node,Q.offset)}),B}},function(f,m,_){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var G=function C(B){return B&&B.__esModule?B:{default:B}}(_(13));m.default=function(B,Q){var T=0,F=0,q=window.innerHeight,R={offset:B.getAttribute("data-aos-offset"),anchor:B.getAttribute("data-aos-anchor"),anchorPlacement:B.getAttribute("data-aos-anchor-placement")};switch(R.offset&&!isNaN(R.offset)&&(F=parseInt(R.offset)),R.anchor&&document.querySelectorAll(R.anchor)&&(B=document.querySelectorAll(R.anchor)[0]),T=(0,G.default)(B).top,R.anchorPlacement){case"top-bottom":break;case"center-bottom":T+=B.offsetHeight/2;break;case"bottom-bottom":T+=B.offsetHeight;break;case"top-center":T+=q/2;break;case"bottom-center":T+=q/2+B.offsetHeight;break;case"center-center":T+=q/2+B.offsetHeight/2;break;case"top-top":T+=q;break;case"bottom-top":T+=B.offsetHeight+q;break;case"center-top":T+=B.offsetHeight/2+q}return R.anchorPlacement||R.offset||isNaN(Q)||(F=Q),T+F}},function(f,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(C){for(var D=0,G=0;C&&!isNaN(C.offsetLeft)&&!isNaN(C.offsetTop);)D+=C.offsetLeft-("BODY"!=C.tagName?C.scrollLeft:0),G+=C.offsetTop-("BODY"!=C.tagName?C.scrollTop:0),C=C.offsetParent;return{top:G,left:D}}},function(f,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(C){return C=C||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(C,function(D){return{node:D}})}}])},8259:function(u,f){var _;!function(C,D){"use strict";"object"==typeof u.exports?u.exports=C.document?D(C,!0):function(G){if(!G.document)throw new Error("jQuery requires a window with a document");return D(G)}:D(C)}(typeof window<"u"?window:this,function(C,D){"use strict";var G=[],z=Object.getPrototypeOf,B=G.slice,Q=G.flat?function(M){return G.flat.call(M)}:function(M){return G.concat.apply([],M)},T=G.push,F=G.indexOf,q={},R=q.toString,N=q.hasOwnProperty,W=N.toString,k=W.call(Object),V={},ie=function(I){return"function"==typeof I&&"number"!=typeof I.nodeType&&"function"!=typeof I.item},pe=function(I){return null!=I&&I===I.window},me=C.document,Ve={type:!0,src:!0,nonce:!0,noModule:!0};function it(M,I,K){var ne,ae,le=(K=K||me).createElement("script");if(le.text=M,I)for(ne in Ve)(ae=I[ne]||I.getAttribute&&I.getAttribute(ne))&&le.setAttribute(ne,ae);K.head.appendChild(le).parentNode.removeChild(le)}function je(M){return null==M?M+"":"object"==typeof M||"function"==typeof M?q[R.call(M)]||"object":typeof M}var ot=/HTML$/i,j=function(M,I){return new j.fn.init(M,I)};function Ie(M){var I=!!M&&"length"in M&&M.length,K=je(M);return!ie(M)&&!pe(M)&&("array"===K||0===I||"number"==typeof I&&I>0&&I-1 in M)}function bt(M,I){return M.nodeName&&M.nodeName.toLowerCase()===I.toLowerCase()}j.fn=j.prototype={jquery:"3.7.1",constructor:j,length:0,toArray:function(){return B.call(this)},get:function(M){return null==M?B.call(this):M<0?this[M+this.length]:this[M]},pushStack:function(M){var I=j.merge(this.constructor(),M);return I.prevObject=this,I},each:function(M){return j.each(this,M)},map:function(M){return this.pushStack(j.map(this,function(I,K){return M.call(I,K,I)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(j.grep(this,function(M,I){return(I+1)%2}))},odd:function(){return this.pushStack(j.grep(this,function(M,I){return I%2}))},eq:function(M){var I=this.length,K=+M+(M<0?I:0);return this.pushStack(K>=0&&K<I?[this[K]]:[])},end:function(){return this.prevObject||this.constructor()},push:T,sort:G.sort,splice:G.splice},j.extend=j.fn.extend=function(){var M,I,K,ne,ae,le,ge=arguments[0]||{},He=1,Fe=arguments.length,Ke=!1;for("boolean"==typeof ge&&(Ke=ge,ge=arguments[He]||{},He++),"object"!=typeof ge&&!ie(ge)&&(ge={}),He===Fe&&(ge=this,He--);He<Fe;He++)if(null!=(M=arguments[He]))for(I in M)ne=M[I],"__proto__"!==I&&ge!==ne&&(Ke&&ne&&(j.isPlainObject(ne)||(ae=Array.isArray(ne)))?(K=ge[I],le=ae&&!Array.isArray(K)?[]:ae||j.isPlainObject(K)?K:{},ae=!1,ge[I]=j.extend(Ke,le,ne)):void 0!==ne&&(ge[I]=ne));return ge},j.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(M){throw new Error(M)},noop:function(){},isPlainObject:function(M){var I,K;return!(!M||"[object Object]"!==R.call(M)||(I=z(M))&&("function"!=typeof(K=N.call(I,"constructor")&&I.constructor)||W.call(K)!==k))},isEmptyObject:function(M){var I;for(I in M)return!1;return!0},globalEval:function(M,I,K){it(M,{nonce:I&&I.nonce},K)},each:function(M,I){var K,ne=0;if(Ie(M))for(K=M.length;ne<K&&!1!==I.call(M[ne],ne,M[ne]);ne++);else for(ne in M)if(!1===I.call(M[ne],ne,M[ne]))break;return M},text:function(M){var I,K="",ne=0,ae=M.nodeType;if(!ae)for(;I=M[ne++];)K+=j.text(I);return 1===ae||11===ae?M.textContent:9===ae?M.documentElement.textContent:3===ae||4===ae?M.nodeValue:K},makeArray:function(M,I){var K=I||[];return null!=M&&(Ie(Object(M))?j.merge(K,"string"==typeof M?[M]:M):T.call(K,M)),K},inArray:function(M,I,K){return null==I?-1:F.call(I,M,K)},isXMLDoc:function(M){var K=M&&(M.ownerDocument||M).documentElement;return!ot.test(M&&M.namespaceURI||K&&K.nodeName||"HTML")},merge:function(M,I){for(var K=+I.length,ne=0,ae=M.length;ne<K;ne++)M[ae++]=I[ne];return M.length=ae,M},grep:function(M,I,K){for(var ae=[],le=0,ge=M.length,He=!K;le<ge;le++)!I(M[le],le)!==He&&ae.push(M[le]);return ae},map:function(M,I,K){var ne,ae,le=0,ge=[];if(Ie(M))for(ne=M.length;le<ne;le++)null!=(ae=I(M[le],le,K))&&ge.push(ae);else for(le in M)null!=(ae=I(M[le],le,K))&&ge.push(ae);return Q(ge)},guid:1,support:V}),"function"==typeof Symbol&&(j.fn[Symbol.iterator]=G[Symbol.iterator]),j.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(M,I){q["[object "+I+"]"]=I.toLowerCase()});var vt=G.pop,Ct=G.sort,Yt=G.splice,on="[\\x20\\t\\r\\n\\f]",pt=new RegExp("^"+on+"+|((?:^|[^\\\\])(?:\\\\.)*)"+on+"+$","g");j.contains=function(M,I){var K=I&&I.parentNode;return M===K||!(!K||1!==K.nodeType||!(M.contains?M.contains(K):M.compareDocumentPosition&&16&M.compareDocumentPosition(K)))};var Re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ut(M,I){return I?"\0"===M?"\ufffd":M.slice(0,-1)+"\\"+M.charCodeAt(M.length-1).toString(16)+" ":"\\"+M}j.escapeSelector=function(M){return(M+"").replace(Re,ut)};var Qt=me,Un=T;!function(){var M,I,K,ne,ae,ge,He,Fe,Ke,Pt,le=Un,st=j.expando,mt=0,Zt=0,hi=nh(),Qi=nh(),Si=nh(),qo=nh(),Bo=function(De,Ye){return De===Ye&&(ae=!0),0},ya="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ut="(?:\\\\[\\da-fA-F]{1,6}"+on+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",In="\\["+on+"*("+Ut+")(?:"+on+"*([*^$|!~]?=)"+on+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ut+"))|)"+on+"*\\]",Ln=":("+Ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+In+")*)|.*)\\)|)",tn=new RegExp(on+"+","g"),Bi=new RegExp("^"+on+"*,"+on+"*"),eh=new RegExp("^"+on+"*([>+~]|"+on+")"+on+"*"),ad=new RegExp(on+"|>"),Ro=new RegExp(Ln),ld=new RegExp("^"+Ut+"$"),La={ID:new RegExp("^#("+Ut+")"),CLASS:new RegExp("^\\.("+Ut+")"),TAG:new RegExp("^("+Ut+"|[*])"),ATTR:new RegExp("^"+In),PSEUDO:new RegExp("^"+Ln),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+on+"*(even|odd|(([+-]|)(\\d*)n|)"+on+"*(?:([+-]|)"+on+"*(\\d+)|))"+on+"*\\)|)","i"),bool:new RegExp("^(?:"+ya+")$","i"),needsContext:new RegExp("^"+on+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+on+"*((?:-\\d)?\\d*)"+on+"*\\)|)(?=[^-]|$)","i")},cd=/^(?:input|select|textarea|button)$/i,bc=/^h\d$/i,il=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Cp=/[+~]/,uo=new RegExp("\\\\[\\da-fA-F]{1,6}"+on+"?|\\\\([^\\r\\n\\f])","g"),ns=function(De,Ye){var dt="0x"+De.slice(1)-65536;return Ye||(dt<0?String.fromCharCode(dt+65536):String.fromCharCode(dt>>10|55296,1023&dt|56320))},Gg=function(){Ql()},th=su(function(De){return!0===De.disabled&&bt(De,"fieldset")},{dir:"parentNode",next:"legend"});try{le.apply(G=B.call(Qt.childNodes),Qt.childNodes)}catch{le={apply:function(Ye,dt){Un.apply(Ye,B.call(dt))},call:function(Ye){Un.apply(Ye,B.call(arguments,1))}}}function Cr(De,Ye,dt,xt){var Rt,an,Mn,jn,Pn,Wi,ye,L=Ye&&Ye.ownerDocument,J=Ye?Ye.nodeType:9;if(dt=dt||[],"string"!=typeof De||!De||1!==J&&9!==J&&11!==J)return dt;if(!xt&&(Ql(Ye),Ye=Ye||ge,Fe)){if(11!==J&&(Pn=il.exec(De)))if(Rt=Pn[1]){if(9===J){if(!(Mn=Ye.getElementById(Rt)))return dt;if(Mn.id===Rt)return le.call(dt,Mn),dt}else if(L&&(Mn=L.getElementById(Rt))&&Cr.contains(Ye,Mn)&&Mn.id===Rt)return le.call(dt,Mn),dt}else{if(Pn[2])return le.apply(dt,Ye.getElementsByTagName(De)),dt;if((Rt=Pn[3])&&Ye.getElementsByClassName)return le.apply(dt,Ye.getElementsByClassName(Rt)),dt}if(!(qo[De+" "]||Ke&&Ke.test(De))){if(ye=De,L=Ye,1===J&&(ad.test(De)||eh.test(De))){for(((L=Cp.test(De)&&$f(Ye.parentNode)||Ye)!=Ye||!V.scope)&&((jn=Ye.getAttribute("id"))?jn=j.escapeSelector(jn):Ye.setAttribute("id",jn=st)),an=(Wi=ih(De)).length;an--;)Wi[an]=(jn?"#"+jn:":scope")+" "+ou(Wi[an]);ye=Wi.join(",")}try{return le.apply(dt,L.querySelectorAll(ye)),dt}catch{qo(De,!0)}finally{jn===st&&Ye.removeAttribute("id")}}}return Zf(De.replace(pt,"$1"),Ye,dt,xt)}function nh(){var De=[];return function Ye(dt,xt){return De.push(dt+" ")>I.cacheLength&&delete Ye[De.shift()],Ye[dt+" "]=xt}}function rl(De){return De[st]=!0,De}function _c(De){var Ye=ge.createElement("fieldset");try{return!!De(Ye)}catch{return!1}finally{Ye.parentNode&&Ye.parentNode.removeChild(Ye),Ye=null}}function qf(De){return function(Ye){return bt(Ye,"input")&&Ye.type===De}}function Yf(De){return function(Ye){return(bt(Ye,"input")||bt(Ye,"button"))&&Ye.type===De}}function Xf(De){return function(Ye){return"form"in Ye?Ye.parentNode&&!1===Ye.disabled?"label"in Ye?"label"in Ye.parentNode?Ye.parentNode.disabled===De:Ye.disabled===De:Ye.isDisabled===De||Ye.isDisabled!==!De&&th(Ye)===De:Ye.disabled===De:"label"in Ye&&Ye.disabled===De}}function $l(De){return rl(function(Ye){return Ye=+Ye,rl(function(dt,xt){for(var Rt,an=De([],dt.length,Ye),Mn=an.length;Mn--;)dt[Rt=an[Mn]]&&(dt[Rt]=!(xt[Rt]=dt[Rt]))})})}function $f(De){return De&&typeof De.getElementsByTagName<"u"&&De}function Ql(De){var Ye,dt=De?De.ownerDocument||De:Qt;return dt==ge||9!==dt.nodeType||!dt.documentElement||(He=(ge=dt).documentElement,Fe=!j.isXMLDoc(ge),Pt=He.matches||He.webkitMatchesSelector||He.msMatchesSelector,He.msMatchesSelector&&Qt!=ge&&(Ye=ge.defaultView)&&Ye.top!==Ye&&Ye.addEventListener("unload",Gg),V.getById=_c(function(xt){return He.appendChild(xt).id=j.expando,!ge.getElementsByName||!ge.getElementsByName(j.expando).length}),V.disconnectedMatch=_c(function(xt){return Pt.call(xt,"*")}),V.scope=_c(function(){return ge.querySelectorAll(":scope")}),V.cssHas=_c(function(){try{return ge.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),V.getById?(I.filter.ID=function(xt){var Rt=xt.replace(uo,ns);return function(an){return an.getAttribute("id")===Rt}},I.find.ID=function(xt,Rt){if(typeof Rt.getElementById<"u"&&Fe){var an=Rt.getElementById(xt);return an?[an]:[]}}):(I.filter.ID=function(xt){var Rt=xt.replace(uo,ns);return function(an){var Mn=typeof an.getAttributeNode<"u"&&an.getAttributeNode("id");return Mn&&Mn.value===Rt}},I.find.ID=function(xt,Rt){if(typeof Rt.getElementById<"u"&&Fe){var an,Mn,jn,Pn=Rt.getElementById(xt);if(Pn){if((an=Pn.getAttributeNode("id"))&&an.value===xt)return[Pn];for(jn=Rt.getElementsByName(xt),Mn=0;Pn=jn[Mn++];)if((an=Pn.getAttributeNode("id"))&&an.value===xt)return[Pn]}return[]}}),I.find.TAG=function(xt,Rt){return typeof Rt.getElementsByTagName<"u"?Rt.getElementsByTagName(xt):Rt.querySelectorAll(xt)},I.find.CLASS=function(xt,Rt){if(typeof Rt.getElementsByClassName<"u"&&Fe)return Rt.getElementsByClassName(xt)},Ke=[],_c(function(xt){var Rt;He.appendChild(xt).innerHTML="<a id='"+st+"' href='' disabled='disabled'></a><select id='"+st+"-\r\\' disabled='disabled'><option selected=''></option></select>",xt.querySelectorAll("[selected]").length||Ke.push("\\["+on+"*(?:value|"+ya+")"),xt.querySelectorAll("[id~="+st+"-]").length||Ke.push("~="),xt.querySelectorAll("a#"+st+"+*").length||Ke.push(".#.+[+~]"),xt.querySelectorAll(":checked").length||Ke.push(":checked"),(Rt=ge.createElement("input")).setAttribute("type","hidden"),xt.appendChild(Rt).setAttribute("name","D"),He.appendChild(xt).disabled=!0,2!==xt.querySelectorAll(":disabled").length&&Ke.push(":enabled",":disabled"),(Rt=ge.createElement("input")).setAttribute("name",""),xt.appendChild(Rt),xt.querySelectorAll("[name='']").length||Ke.push("\\["+on+"*name"+on+"*="+on+"*(?:''|\"\")")}),V.cssHas||Ke.push(":has"),Ke=Ke.length&&new RegExp(Ke.join("|")),Bo=function(xt,Rt){if(xt===Rt)return ae=!0,0;var an=!xt.compareDocumentPosition-!Rt.compareDocumentPosition;return an||(1&(an=(xt.ownerDocument||xt)==(Rt.ownerDocument||Rt)?xt.compareDocumentPosition(Rt):1)||!V.sortDetached&&Rt.compareDocumentPosition(xt)===an?xt===ge||xt.ownerDocument==Qt&&Cr.contains(Qt,xt)?-1:Rt===ge||Rt.ownerDocument==Qt&&Cr.contains(Qt,Rt)?1:ne?F.call(ne,xt)-F.call(ne,Rt):0:4&an?-1:1)}),ge}for(M in Cr.matches=function(De,Ye){return Cr(De,null,null,Ye)},Cr.matchesSelector=function(De,Ye){if(Ql(De),Fe&&!qo[Ye+" "]&&(!Ke||!Ke.test(Ye)))try{var dt=Pt.call(De,Ye);if(dt||V.disconnectedMatch||De.document&&11!==De.document.nodeType)return dt}catch{qo(Ye,!0)}return Cr(Ye,ge,null,[De]).length>0},Cr.contains=function(De,Ye){return(De.ownerDocument||De)!=ge&&Ql(De),j.contains(De,Ye)},Cr.attr=function(De,Ye){(De.ownerDocument||De)!=ge&&Ql(De);var dt=I.attrHandle[Ye.toLowerCase()],xt=dt&&N.call(I.attrHandle,Ye.toLowerCase())?dt(De,Ye,!Fe):void 0;return void 0!==xt?xt:De.getAttribute(Ye)},Cr.error=function(De){throw new Error("Syntax error, unrecognized expression: "+De)},j.uniqueSort=function(De){var Ye,dt=[],xt=0,Rt=0;if(ae=!V.sortStable,ne=!V.sortStable&&B.call(De,0),Ct.call(De,Bo),ae){for(;Ye=De[Rt++];)Ye===De[Rt]&&(xt=dt.push(Rt));for(;xt--;)Yt.call(De,dt[xt],1)}return ne=null,De},j.fn.uniqueSort=function(){return this.pushStack(j.uniqueSort(B.apply(this)))},(I=j.expr={cacheLength:50,createPseudo:rl,match:La,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(De){return De[1]=De[1].replace(uo,ns),De[3]=(De[3]||De[4]||De[5]||"").replace(uo,ns),"~="===De[2]&&(De[3]=" "+De[3]+" "),De.slice(0,4)},CHILD:function(De){return De[1]=De[1].toLowerCase(),"nth"===De[1].slice(0,3)?(De[3]||Cr.error(De[0]),De[4]=+(De[4]?De[5]+(De[6]||1):2*("even"===De[3]||"odd"===De[3])),De[5]=+(De[7]+De[8]||"odd"===De[3])):De[3]&&Cr.error(De[0]),De},PSEUDO:function(De){var Ye,dt=!De[6]&&De[2];return La.CHILD.test(De[0])?null:(De[3]?De[2]=De[4]||De[5]||"":dt&&Ro.test(dt)&&(Ye=ih(dt,!0))&&(Ye=dt.indexOf(")",dt.length-Ye)-dt.length)&&(De[0]=De[0].slice(0,Ye),De[2]=dt.slice(0,Ye)),De.slice(0,3))}},filter:{TAG:function(De){var Ye=De.replace(uo,ns).toLowerCase();return"*"===De?function(){return!0}:function(dt){return bt(dt,Ye)}},CLASS:function(De){var Ye=hi[De+" "];return Ye||(Ye=new RegExp("(^|"+on+")"+De+"("+on+"|$)"))&&hi(De,function(dt){return Ye.test("string"==typeof dt.className&&dt.className||typeof dt.getAttribute<"u"&&dt.getAttribute("class")||"")})},ATTR:function(De,Ye,dt){return function(xt){var Rt=Cr.attr(xt,De);return null==Rt?"!="===Ye:!Ye||(Rt+="","="===Ye?Rt===dt:"!="===Ye?Rt!==dt:"^="===Ye?dt&&0===Rt.indexOf(dt):"*="===Ye?dt&&Rt.indexOf(dt)>-1:"$="===Ye?dt&&Rt.slice(-dt.length)===dt:"~="===Ye?(" "+Rt.replace(tn," ")+" ").indexOf(dt)>-1:"|="===Ye&&(Rt===dt||Rt.slice(0,dt.length+1)===dt+"-"))}},CHILD:function(De,Ye,dt,xt,Rt){var an="nth"!==De.slice(0,3),Mn="last"!==De.slice(-4),jn="of-type"===Ye;return 1===xt&&0===Rt?function(Pn){return!!Pn.parentNode}:function(Pn,Wi,ye){var L,J,be,Qe,jt,On=an!==Mn?"nextSibling":"previousSibling",Di=Pn.parentNode,Sr=jn&&Pn.nodeName.toLowerCase(),Cc=!ye&&!jn,Yo=!1;if(Di){if(an){for(;On;){for(be=Pn;be=be[On];)if(jn?bt(be,Sr):1===be.nodeType)return!1;jt=On="only"===De&&!jt&&"nextSibling"}return!0}if(jt=[Mn?Di.firstChild:Di.lastChild],Mn&&Cc){for(Yo=(Qe=(L=(J=Di[st]||(Di[st]={}))[De]||[])[0]===mt&&L[1])&&L[2],be=Qe&&Di.childNodes[Qe];be=++Qe&&be&&be[On]||(Yo=Qe=0)||jt.pop();)if(1===be.nodeType&&++Yo&&be===Pn){J[De]=[mt,Qe,Yo];break}}else if(Cc&&(Yo=Qe=(L=(J=Pn[st]||(Pn[st]={}))[De]||[])[0]===mt&&L[1]),!1===Yo)for(;(be=++Qe&&be&&be[On]||(Yo=Qe=0)||jt.pop())&&(!(jn?bt(be,Sr):1===be.nodeType)||!++Yo||(Cc&&((J=be[st]||(be[st]={}))[De]=[mt,Yo]),be!==Pn)););return(Yo-=Rt)===xt||Yo%xt==0&&Yo/xt>=0}}},PSEUDO:function(De,Ye){var dt,xt=I.pseudos[De]||I.setFilters[De.toLowerCase()]||Cr.error("unsupported pseudo: "+De);return xt[st]?xt(Ye):xt.length>1?(dt=[De,De,"",Ye],I.setFilters.hasOwnProperty(De.toLowerCase())?rl(function(Rt,an){for(var Mn,jn=xt(Rt,Ye),Pn=jn.length;Pn--;)Rt[Mn=F.call(Rt,jn[Pn])]=!(an[Mn]=jn[Pn])}):function(Rt){return xt(Rt,0,dt)}):xt}},pseudos:{not:rl(function(De){var Ye=[],dt=[],xt=zr(De.replace(pt,"$1"));return xt[st]?rl(function(Rt,an,Mn,jn){for(var Pn,Wi=xt(Rt,null,jn,[]),ye=Rt.length;ye--;)(Pn=Wi[ye])&&(Rt[ye]=!(an[ye]=Pn))}):function(Rt,an,Mn){return Ye[0]=Rt,xt(Ye,null,Mn,dt),Ye[0]=null,!dt.pop()}}),has:rl(function(De){return function(Ye){return Cr(De,Ye).length>0}}),contains:rl(function(De){return De=De.replace(uo,ns),function(Ye){return(Ye.textContent||j.text(Ye)).indexOf(De)>-1}}),lang:rl(function(De){return ld.test(De||"")||Cr.error("unsupported lang: "+De),De=De.replace(uo,ns).toLowerCase(),function(Ye){var dt;do{if(dt=Fe?Ye.lang:Ye.getAttribute("xml:lang")||Ye.getAttribute("lang"))return(dt=dt.toLowerCase())===De||0===dt.indexOf(De+"-")}while((Ye=Ye.parentNode)&&1===Ye.nodeType);return!1}}),target:function(De){var Ye=C.location&&C.location.hash;return Ye&&Ye.slice(1)===De.id},root:function(De){return De===He},focus:function(De){return De===function Xl(){try{return ge.activeElement}catch{}}()&&ge.hasFocus()&&!!(De.type||De.href||~De.tabIndex)},enabled:Xf(!1),disabled:Xf(!0),checked:function(De){return bt(De,"input")&&!!De.checked||bt(De,"option")&&!!De.selected},selected:function(De){return!0===De.selected},empty:function(De){for(De=De.firstChild;De;De=De.nextSibling)if(De.nodeType<6)return!1;return!0},parent:function(De){return!I.pseudos.empty(De)},header:function(De){return bc.test(De.nodeName)},input:function(De){return cd.test(De.nodeName)},button:function(De){return bt(De,"input")&&"button"===De.type||bt(De,"button")},text:function(De){var Ye;return bt(De,"input")&&"text"===De.type&&(null==(Ye=De.getAttribute("type"))||"text"===Ye.toLowerCase())},first:$l(function(){return[0]}),last:$l(function(De,Ye){return[Ye-1]}),eq:$l(function(De,Ye,dt){return[dt<0?dt+Ye:dt]}),even:$l(function(De,Ye){for(var dt=0;dt<Ye;dt+=2)De.push(dt);return De}),odd:$l(function(De,Ye){for(var dt=1;dt<Ye;dt+=2)De.push(dt);return De}),lt:$l(function(De,Ye,dt){var xt;for(xt=dt<0?dt+Ye:dt>Ye?Ye:dt;--xt>=0;)De.push(xt);return De}),gt:$l(function(De,Ye,dt){for(var xt=dt<0?dt+Ye:dt;++xt<Ye;)De.push(xt);return De})}}).pseudos.nth=I.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[M]=qf(M);for(M in{submit:!0,reset:!0})I.pseudos[M]=Yf(M);function wp(){}function ih(De,Ye){var dt,xt,Rt,an,Mn,jn,Pn,Wi=Qi[De+" "];if(Wi)return Ye?0:Wi.slice(0);for(Mn=De,jn=[],Pn=I.preFilter;Mn;){for(an in(!dt||(xt=Bi.exec(Mn)))&&(xt&&(Mn=Mn.slice(xt[0].length)||Mn),jn.push(Rt=[])),dt=!1,(xt=eh.exec(Mn))&&(dt=xt.shift(),Rt.push({value:dt,type:xt[0].replace(pt," ")}),Mn=Mn.slice(dt.length)),I.filter)(xt=La[an].exec(Mn))&&(!Pn[an]||(xt=Pn[an](xt)))&&(dt=xt.shift(),Rt.push({value:dt,type:an,matches:xt}),Mn=Mn.slice(dt.length));if(!dt)break}return Ye?Mn.length:Mn?Cr.error(De):Qi(De,jn).slice(0)}function ou(De){for(var Ye=0,dt=De.length,xt="";Ye<dt;Ye++)xt+=De[Ye].value;return xt}function su(De,Ye,dt){var xt=Ye.dir,Rt=Ye.next,an=Rt||xt,Mn=dt&&"parentNode"===an,jn=Zt++;return Ye.first?function(Pn,Wi,ye){for(;Pn=Pn[xt];)if(1===Pn.nodeType||Mn)return De(Pn,Wi,ye);return!1}:function(Pn,Wi,ye){var L,J,be=[mt,jn];if(ye){for(;Pn=Pn[xt];)if((1===Pn.nodeType||Mn)&&De(Pn,Wi,ye))return!0}else for(;Pn=Pn[xt];)if(1===Pn.nodeType||Mn)if(J=Pn[st]||(Pn[st]={}),Rt&&bt(Pn,Rt))Pn=Pn[xt]||Pn;else{if((L=J[an])&&L[0]===mt&&L[1]===jn)return be[2]=L[2];if(J[an]=be,be[2]=De(Pn,Wi,ye))return!0}return!1}}function Mp(De){return De.length>1?function(Ye,dt,xt){for(var Rt=De.length;Rt--;)if(!De[Rt](Ye,dt,xt))return!1;return!0}:De[0]}function Pp(De,Ye,dt,xt,Rt){for(var an,Mn=[],jn=0,Pn=De.length,Wi=null!=Ye;jn<Pn;jn++)(an=De[jn])&&(!dt||dt(an,xt,Rt))&&(Mn.push(an),Wi&&Ye.push(jn));return Mn}function Kf(De,Ye,dt,xt,Rt,an){return xt&&!xt[st]&&(xt=Kf(xt)),Rt&&!Rt[st]&&(Rt=Kf(Rt,an)),rl(function(Mn,jn,Pn,Wi){var ye,L,J,be,Qe=[],jt=[],On=jn.length,Di=Mn||function Qf(De,Ye,dt){for(var xt=0,Rt=Ye.length;xt<Rt;xt++)Cr(De,Ye[xt],dt);return dt}(Ye||"*",Pn.nodeType?[Pn]:Pn,[]),Sr=!De||!Mn&&Ye?Di:Pp(Di,Qe,De,Pn,Wi);if(dt?dt(Sr,be=Rt||(Mn?De:On||xt)?[]:jn,Pn,Wi):be=Sr,xt)for(ye=Pp(be,jt),xt(ye,[],Pn,Wi),L=ye.length;L--;)(J=ye[L])&&(be[jt[L]]=!(Sr[jt[L]]=J));if(Mn){if(Rt||De){if(Rt){for(ye=[],L=be.length;L--;)(J=be[L])&&ye.push(Sr[L]=J);Rt(null,be=[],ye,Wi)}for(L=be.length;L--;)(J=be[L])&&(ye=Rt?F.call(Mn,J):Qe[L])>-1&&(Mn[ye]=!(jn[ye]=J))}}else be=Pp(be===jn?be.splice(On,be.length):be),Rt?Rt(null,jn,be,Wi):le.apply(jn,be)})}function is(De){for(var Ye,dt,xt,Rt=De.length,an=I.relative[De[0].type],Mn=an||I.relative[" "],jn=an?1:0,Pn=su(function(L){return L===Ye},Mn,!0),Wi=su(function(L){return F.call(Ye,L)>-1},Mn,!0),ye=[function(L,J,be){var Qe=!an&&(be||J!=K)||((Ye=J).nodeType?Pn(L,J,be):Wi(L,J,be));return Ye=null,Qe}];jn<Rt;jn++)if(dt=I.relative[De[jn].type])ye=[su(Mp(ye),dt)];else{if((dt=I.filter[De[jn].type].apply(null,De[jn].matches))[st]){for(xt=++jn;xt<Rt&&!I.relative[De[xt].type];xt++);return Kf(jn>1&&Mp(ye),jn>1&&ou(De.slice(0,jn-1).concat({value:" "===De[jn-2].type?"*":""})).replace(pt,"$1"),dt,jn<xt&&is(De.slice(jn,xt)),xt<Rt&&is(De=De.slice(xt)),xt<Rt&&ou(De))}ye.push(dt)}return Mp(ye)}function zr(De,Ye){var dt,xt=[],Rt=[],an=Si[De+" "];if(!an){for(Ye||(Ye=ih(De)),dt=Ye.length;dt--;)(an=is(Ye[dt]))[st]?xt.push(an):Rt.push(an);an=Si(De,function xc(De,Ye){var dt=Ye.length>0,xt=De.length>0,Rt=function(an,Mn,jn,Pn,Wi){var ye,L,J,be=0,Qe="0",jt=an&&[],On=[],Di=K,Sr=an||xt&&I.find.TAG("*",Wi),Cc=mt+=null==Di?1:Math.random()||.1,Yo=Sr.length;for(Wi&&(K=Mn==ge||Mn||Wi);Qe!==Yo&&null!=(ye=Sr[Qe]);Qe++){if(xt&&ye){for(L=0,!Mn&&ye.ownerDocument!=ge&&(Ql(ye),jn=!Fe);J=De[L++];)if(J(ye,Mn||ge,jn)){le.call(Pn,ye);break}Wi&&(mt=Cc)}dt&&((ye=!J&&ye)&&be--,an&&jt.push(ye))}if(be+=Qe,dt&&Qe!==be){for(L=0;J=Ye[L++];)J(jt,On,Mn,jn);if(an){if(be>0)for(;Qe--;)jt[Qe]||On[Qe]||(On[Qe]=vt.call(Pn));On=Pp(On)}le.apply(Pn,On),Wi&&!an&&On.length>0&&be+Ye.length>1&&j.uniqueSort(Pn)}return Wi&&(mt=Cc,K=Di),jt};return dt?rl(Rt):Rt}(Rt,xt)),an.selector=De}return an}function Zf(De,Ye,dt,xt){var Rt,an,Mn,jn,Pn,Wi="function"==typeof De&&De,ye=!xt&&ih(De=Wi.selector||De);if(dt=dt||[],1===ye.length){if((an=ye[0]=ye[0].slice(0)).length>2&&"ID"===(Mn=an[0]).type&&9===Ye.nodeType&&Fe&&I.relative[an[1].type]){if(!(Ye=(I.find.ID(Mn.matches[0].replace(uo,ns),Ye)||[])[0]))return dt;Wi&&(Ye=Ye.parentNode),De=De.slice(an.shift().value.length)}for(Rt=La.needsContext.test(De)?0:an.length;Rt--&&!I.relative[jn=(Mn=an[Rt]).type];)if((Pn=I.find[jn])&&(xt=Pn(Mn.matches[0].replace(uo,ns),Cp.test(an[0].type)&&$f(Ye.parentNode)||Ye))){if(an.splice(Rt,1),!(De=xt.length&&ou(an)))return le.apply(dt,xt),dt;break}}return(Wi||zr(De,ye))(xt,Ye,!Fe,dt,!Ye||Cp.test(De)&&$f(Ye.parentNode)||Ye),dt}wp.prototype=I.filters=I.pseudos,I.setFilters=new wp,V.sortStable=st.split("").sort(Bo).join("")===st,Ql(),V.sortDetached=_c(function(De){return 1&De.compareDocumentPosition(ge.createElement("fieldset"))}),j.find=Cr,j.expr[":"]=j.expr.pseudos,j.unique=j.uniqueSort,Cr.compile=zr,Cr.select=Zf,Cr.setDocument=Ql,Cr.tokenize=ih,Cr.escape=j.escapeSelector,Cr.getText=j.text,Cr.isXML=j.isXMLDoc,Cr.selectors=j.expr,Cr.support=j.support,Cr.uniqueSort=j.uniqueSort}();var dn=function(M,I,K){for(var ne=[],ae=void 0!==K;(M=M[I])&&9!==M.nodeType;)if(1===M.nodeType){if(ae&&j(M).is(K))break;ne.push(M)}return ne},Wt=function(M,I){for(var K=[];M;M=M.nextSibling)1===M.nodeType&&M!==I&&K.push(M);return K},An=j.expr.match.needsContext,fn=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Fn(M,I,K){return ie(I)?j.grep(M,function(ne,ae){return!!I.call(ne,ae,ne)!==K}):I.nodeType?j.grep(M,function(ne){return ne===I!==K}):"string"!=typeof I?j.grep(M,function(ne){return F.call(I,ne)>-1!==K}):j.filter(I,M,K)}j.filter=function(M,I,K){var ne=I[0];return K&&(M=":not("+M+")"),1===I.length&&1===ne.nodeType?j.find.matchesSelector(ne,M)?[ne]:[]:j.find.matches(M,j.grep(I,function(ae){return 1===ae.nodeType}))},j.fn.extend({find:function(M){var I,K,ne=this.length,ae=this;if("string"!=typeof M)return this.pushStack(j(M).filter(function(){for(I=0;I<ne;I++)if(j.contains(ae[I],this))return!0}));for(K=this.pushStack([]),I=0;I<ne;I++)j.find(M,ae[I],K);return ne>1?j.uniqueSort(K):K},filter:function(M){return this.pushStack(Fn(this,M||[],!1))},not:function(M){return this.pushStack(Fn(this,M||[],!0))},is:function(M){return!!Fn(this,"string"==typeof M&&An.test(M)?j(M):M||[],!1).length}});var ft,Wn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Cn=j.fn.init=function(M,I,K){var ne,ae;if(!M)return this;if(K=K||ft,"string"==typeof M){if(!(ne="<"===M[0]&&">"===M[M.length-1]&&M.length>=3?[null,M,null]:Wn.exec(M))||!ne[1]&&I)return!I||I.jquery?(I||K).find(M):this.constructor(I).find(M);if(ne[1]){if(j.merge(this,j.parseHTML(ne[1],(I=I instanceof j?I[0]:I)&&I.nodeType?I.ownerDocument||I:me,!0)),fn.test(ne[1])&&j.isPlainObject(I))for(ne in I)ie(this[ne])?this[ne](I[ne]):this.attr(ne,I[ne]);return this}return(ae=me.getElementById(ne[2]))&&(this[0]=ae,this.length=1),this}return M.nodeType?(this[0]=M,this.length=1,this):ie(M)?void 0!==K.ready?K.ready(M):M(j):j.makeArray(M,this)};Cn.prototype=j.fn,ft=j(me);var tr=/^(?:parents|prev(?:Until|All))/,sr={children:!0,contents:!0,next:!0,prev:!0};function li(M,I){for(;(M=M[I])&&1!==M.nodeType;);return M}j.fn.extend({has:function(M){var I=j(M,this),K=I.length;return this.filter(function(){for(var ne=0;ne<K;ne++)if(j.contains(this,I[ne]))return!0})},closest:function(M,I){var K,ne=0,ae=this.length,le=[],ge="string"!=typeof M&&j(M);if(!An.test(M))for(;ne<ae;ne++)for(K=this[ne];K&&K!==I;K=K.parentNode)if(K.nodeType<11&&(ge?ge.index(K)>-1:1===K.nodeType&&j.find.matchesSelector(K,M))){le.push(K);break}return this.pushStack(le.length>1?j.uniqueSort(le):le)},index:function(M){return M?"string"==typeof M?F.call(j(M),this[0]):F.call(this,M.jquery?M[0]:M):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(M,I){return this.pushStack(j.uniqueSort(j.merge(this.get(),j(M,I))))},addBack:function(M){return this.add(null==M?this.prevObject:this.prevObject.filter(M))}}),j.each({parent:function(M){var I=M.parentNode;return I&&11!==I.nodeType?I:null},parents:function(M){return dn(M,"parentNode")},parentsUntil:function(M,I,K){return dn(M,"parentNode",K)},next:function(M){return li(M,"nextSibling")},prev:function(M){return li(M,"previousSibling")},nextAll:function(M){return dn(M,"nextSibling")},prevAll:function(M){return dn(M,"previousSibling")},nextUntil:function(M,I,K){return dn(M,"nextSibling",K)},prevUntil:function(M,I,K){return dn(M,"previousSibling",K)},siblings:function(M){return Wt((M.parentNode||{}).firstChild,M)},children:function(M){return Wt(M.firstChild)},contents:function(M){return null!=M.contentDocument&&z(M.contentDocument)?M.contentDocument:(bt(M,"template")&&(M=M.content||M),j.merge([],M.childNodes))}},function(M,I){j.fn[M]=function(K,ne){var ae=j.map(this,I,K);return"Until"!==M.slice(-5)&&(ne=K),ne&&"string"==typeof ne&&(ae=j.filter(ne,ae)),this.length>1&&(sr[M]||j.uniqueSort(ae),tr.test(M)&&ae.reverse()),this.pushStack(ae)}});var $t=/[^\x20\t\r\n\f]+/g;function Vi(M){return M}function gr(M){throw M}function mo(M,I,K,ne){var ae;try{M&&ie(ae=M.promise)?ae.call(M).done(I).fail(K):M&&ie(ae=M.then)?ae.call(M,I,K):I.apply(void 0,[M].slice(ne))}catch(le){K.apply(void 0,[le])}}j.Callbacks=function(M){M="string"==typeof M?function Li(M){var I={};return j.each(M.match($t)||[],function(K,ne){I[ne]=!0}),I}(M):j.extend({},M);var I,K,ne,ae,le=[],ge=[],He=-1,Fe=function(){for(ae=ae||M.once,ne=I=!0;ge.length;He=-1)for(K=ge.shift();++He<le.length;)!1===le[He].apply(K[0],K[1])&&M.stopOnFalse&&(He=le.length,K=!1);M.memory||(K=!1),I=!1,ae&&(le=K?[]:"")},Ke={add:function(){return le&&(K&&!I&&(He=le.length-1,ge.push(K)),function Pt(st){j.each(st,function(mt,Zt){ie(Zt)?(!M.unique||!Ke.has(Zt))&&le.push(Zt):Zt&&Zt.length&&"string"!==je(Zt)&&Pt(Zt)})}(arguments),K&&!I&&Fe()),this},remove:function(){return j.each(arguments,function(Pt,st){for(var mt;(mt=j.inArray(st,le,mt))>-1;)le.splice(mt,1),mt<=He&&He--}),this},has:function(Pt){return Pt?j.inArray(Pt,le)>-1:le.length>0},empty:function(){return le&&(le=[]),this},disable:function(){return ae=ge=[],le=K="",this},disabled:function(){return!le},lock:function(){return ae=ge=[],!K&&!I&&(le=K=""),this},locked:function(){return!!ae},fireWith:function(Pt,st){return ae||(st=[Pt,(st=st||[]).slice?st.slice():st],ge.push(st),I||Fe()),this},fire:function(){return Ke.fireWith(this,arguments),this},fired:function(){return!!ne}};return Ke},j.extend({Deferred:function(M){var I=[["notify","progress",j.Callbacks("memory"),j.Callbacks("memory"),2],["resolve","done",j.Callbacks("once memory"),j.Callbacks("once memory"),0,"resolved"],["reject","fail",j.Callbacks("once memory"),j.Callbacks("once memory"),1,"rejected"]],K="pending",ne={state:function(){return K},always:function(){return ae.done(arguments).fail(arguments),this},catch:function(le){return ne.then(null,le)},pipe:function(){var le=arguments;return j.Deferred(function(ge){j.each(I,function(He,Fe){var Ke=ie(le[Fe[4]])&&le[Fe[4]];ae[Fe[1]](function(){var Pt=Ke&&Ke.apply(this,arguments);Pt&&ie(Pt.promise)?Pt.promise().progress(ge.notify).done(ge.resolve).fail(ge.reject):ge[Fe[0]+"With"](this,Ke?[Pt]:arguments)})}),le=null}).promise()},then:function(le,ge,He){var Fe=0;function Ke(Pt,st,mt,Zt){return function(){var hi=this,Qi=arguments,Si=function(){var Bo,ya;if(!(Pt<Fe)){if((Bo=mt.apply(hi,Qi))===st.promise())throw new TypeError("Thenable self-resolution");ie(ya=Bo&&("object"==typeof Bo||"function"==typeof Bo)&&Bo.then)?Zt?ya.call(Bo,Ke(Fe,st,Vi,Zt),Ke(Fe,st,gr,Zt)):(Fe++,ya.call(Bo,Ke(Fe,st,Vi,Zt),Ke(Fe,st,gr,Zt),Ke(Fe,st,Vi,st.notifyWith))):(mt!==Vi&&(hi=void 0,Qi=[Bo]),(Zt||st.resolveWith)(hi,Qi))}},qo=Zt?Si:function(){try{Si()}catch(Bo){j.Deferred.exceptionHook&&j.Deferred.exceptionHook(Bo,qo.error),Pt+1>=Fe&&(mt!==gr&&(hi=void 0,Qi=[Bo]),st.rejectWith(hi,Qi))}};Pt?qo():(j.Deferred.getErrorHook?qo.error=j.Deferred.getErrorHook():j.Deferred.getStackHook&&(qo.error=j.Deferred.getStackHook()),C.setTimeout(qo))}}return j.Deferred(function(Pt){I[0][3].add(Ke(0,Pt,ie(He)?He:Vi,Pt.notifyWith)),I[1][3].add(Ke(0,Pt,ie(le)?le:Vi)),I[2][3].add(Ke(0,Pt,ie(ge)?ge:gr))}).promise()},promise:function(le){return null!=le?j.extend(le,ne):ne}},ae={};return j.each(I,function(le,ge){var He=ge[2],Fe=ge[5];ne[ge[1]]=He.add,Fe&&He.add(function(){K=Fe},I[3-le][2].disable,I[3-le][3].disable,I[0][2].lock,I[0][3].lock),He.add(ge[3].fire),ae[ge[0]]=function(){return ae[ge[0]+"With"](this===ae?void 0:this,arguments),this},ae[ge[0]+"With"]=He.fireWith}),ne.promise(ae),M&&M.call(ae,ae),ae},when:function(M){var I=arguments.length,K=I,ne=Array(K),ae=B.call(arguments),le=j.Deferred(),ge=function(He){return function(Fe){ne[He]=this,ae[He]=arguments.length>1?B.call(arguments):Fe,--I||le.resolveWith(ne,ae)}};if(I<=1&&(mo(M,le.done(ge(K)).resolve,le.reject,!I),"pending"===le.state()||ie(ae[K]&&ae[K].then)))return le.then();for(;K--;)mo(ae[K],ge(K),le.reject);return le.promise()}});var ao=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;j.Deferred.exceptionHook=function(M,I){C.console&&C.console.warn&&M&&ao.test(M.name)&&C.console.warn("jQuery.Deferred exception: "+M.message,M.stack,I)},j.readyException=function(M){C.setTimeout(function(){throw M})};var lo=j.Deferred();function bn(){me.removeEventListener("DOMContentLoaded",bn),C.removeEventListener("load",bn),j.ready()}j.fn.ready=function(M){return lo.then(M).catch(function(I){j.readyException(I)}),this},j.extend({isReady:!1,readyWait:1,ready:function(M){(!0===M?--j.readyWait:j.isReady)||(j.isReady=!0,!(!0!==M&&--j.readyWait>0)&&lo.resolveWith(me,[j]))}}),j.ready.then=lo.then,"complete"===me.readyState||"loading"!==me.readyState&&!me.documentElement.doScroll?C.setTimeout(j.ready):(me.addEventListener("DOMContentLoaded",bn),C.addEventListener("load",bn));var Mi=function(M,I,K,ne,ae,le,ge){var He=0,Fe=M.length,Ke=null==K;if("object"===je(K))for(He in ae=!0,K)Mi(M,I,He,K[He],!0,le,ge);else if(void 0!==ne&&(ae=!0,ie(ne)||(ge=!0),Ke&&(ge?(I.call(M,ne),I=null):(Ke=I,I=function(Pt,st,mt){return Ke.call(j(Pt),mt)})),I))for(;He<Fe;He++)I(M[He],K,ge?ne:ne.call(M[He],He,I(M[He],K)));return ae?M:Ke?I.call(M):Fe?I(M[0],K):le},Lo=/^-ms-/,Xi=/-([a-z])/g;function co(M,I){return I.toUpperCase()}function lr(M){return M.replace(Lo,"ms-").replace(Xi,co)}var Dr=function(M){return 1===M.nodeType||9===M.nodeType||!+M.nodeType};function Mr(){this.expando=j.expando+Mr.uid++}Mr.uid=1,Mr.prototype={cache:function(M){var I=M[this.expando];return I||(I={},Dr(M)&&(M.nodeType?M[this.expando]=I:Object.defineProperty(M,this.expando,{value:I,configurable:!0}))),I},set:function(M,I,K){var ne,ae=this.cache(M);if("string"==typeof I)ae[lr(I)]=K;else for(ne in I)ae[lr(ne)]=I[ne];return ae},get:function(M,I){return void 0===I?this.cache(M):M[this.expando]&&M[this.expando][lr(I)]},access:function(M,I,K){return void 0===I||I&&"string"==typeof I&&void 0===K?this.get(M,I):(this.set(M,I,K),void 0!==K?K:I)},remove:function(M,I){var K,ne=M[this.expando];if(void 0!==ne){if(void 0!==I)for((K=(I=Array.isArray(I)?I.map(lr):(I=lr(I))in ne?[I]:I.match($t)||[]).length);K--;)delete ne[I[K]];(void 0===I||j.isEmptyObject(ne))&&(M.nodeType?M[this.expando]=void 0:delete M[this.expando])}},hasData:function(M){var I=M[this.expando];return void 0!==I&&!j.isEmptyObject(I)}};var Sn=new Mr,Ar=new Mr,So=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Gi=/[A-Z]/g;function Jn(M,I,K){var ne;if(void 0===K&&1===M.nodeType)if(ne="data-"+I.replace(Gi,"-$&").toLowerCase(),"string"==typeof(K=M.getAttribute(ne))){try{K=function mn(M){return"true"===M||"false"!==M&&("null"===M?null:M===+M+""?+M:So.test(M)?JSON.parse(M):M)}(K)}catch{}Ar.set(M,I,K)}else K=void 0;return K}j.extend({hasData:function(M){return Ar.hasData(M)||Sn.hasData(M)},data:function(M,I,K){return Ar.access(M,I,K)},removeData:function(M,I){Ar.remove(M,I)},_data:function(M,I,K){return Sn.access(M,I,K)},_removeData:function(M,I){Sn.remove(M,I)}}),j.fn.extend({data:function(M,I){var K,ne,ae,le=this[0],ge=le&&le.attributes;if(void 0===M){if(this.length&&(ae=Ar.get(le),1===le.nodeType&&!Sn.get(le,"hasDataAttrs"))){for(K=ge.length;K--;)ge[K]&&0===(ne=ge[K].name).indexOf("data-")&&(ne=lr(ne.slice(5)),Jn(le,ne,ae[ne]));Sn.set(le,"hasDataAttrs",!0)}return ae}return"object"==typeof M?this.each(function(){Ar.set(this,M)}):Mi(this,function(He){var Fe;if(le&&void 0===He)return void 0!==(Fe=Ar.get(le,M))||void 0!==(Fe=Jn(le,M))?Fe:void 0;this.each(function(){Ar.set(this,M,He)})},null,I,arguments.length>1,null,!0)},removeData:function(M){return this.each(function(){Ar.remove(this,M)})}}),j.extend({queue:function(M,I,K){var ne;if(M)return ne=Sn.get(M,I=(I||"fx")+"queue"),K&&(!ne||Array.isArray(K)?ne=Sn.access(M,I,j.makeArray(K)):ne.push(K)),ne||[]},dequeue:function(M,I){var K=j.queue(M,I=I||"fx"),ne=K.length,ae=K.shift(),le=j._queueHooks(M,I);"inprogress"===ae&&(ae=K.shift(),ne--),ae&&("fx"===I&&K.unshift("inprogress"),delete le.stop,ae.call(M,function(){j.dequeue(M,I)},le)),!ne&&le&&le.empty.fire()},_queueHooks:function(M,I){var K=I+"queueHooks";return Sn.get(M,K)||Sn.access(M,K,{empty:j.Callbacks("once memory").add(function(){Sn.remove(M,[I+"queue",K])})})}}),j.fn.extend({queue:function(M,I){var K=2;return"string"!=typeof M&&(I=M,M="fx",K--),arguments.length<K?j.queue(this[0],M):void 0===I?this:this.each(function(){var ne=j.queue(this,M,I);j._queueHooks(this,M),"fx"===M&&"inprogress"!==ne[0]&&j.dequeue(this,M)})},dequeue:function(M){return this.each(function(){j.dequeue(this,M)})},clearQueue:function(M){return this.queue(M||"fx",[])},promise:function(M,I){var K,ne=1,ae=j.Deferred(),le=this,ge=this.length,He=function(){--ne||ae.resolveWith(le,[le])};for("string"!=typeof M&&(I=M,M=void 0),M=M||"fx";ge--;)(K=Sn.get(le[ge],M+"queueHooks"))&&K.empty&&(ne++,K.empty.add(He));return He(),ae.promise(I)}});var qi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Yn=new RegExp("^(?:([+-])=|)("+qi+")([a-z%]*)$","i"),ur=["Top","Right","Bottom","Left"],xr=me.documentElement,ho=function(M){return j.contains(M.ownerDocument,M)},As={composed:!0};xr.getRootNode&&(ho=function(M){return j.contains(M.ownerDocument,M)||M.getRootNode(As)===M.ownerDocument});var Qr=function(M,I){return"none"===(M=I||M).style.display||""===M.style.display&&ho(M)&&"none"===j.css(M,"display")};function Go(M,I,K,ne){var ae,le,ge=20,He=ne?function(){return ne.cur()}:function(){return j.css(M,I,"")},Fe=He(),Ke=K&&K[3]||(j.cssNumber[I]?"":"px"),Pt=M.nodeType&&(j.cssNumber[I]||"px"!==Ke&&+Fe)&&Yn.exec(j.css(M,I));if(Pt&&Pt[3]!==Ke){for(Ke=Ke||Pt[3],Pt=+(Fe/=2)||1;ge--;)j.style(M,I,Pt+Ke),(1-le)*(1-(le=He()/Fe||.5))<=0&&(ge=0),Pt/=le;j.style(M,I,(Pt*=2)+Ke),K=K||[]}return K&&(Pt=+Pt||+Fe||0,ae=K[1]?Pt+(K[1]+1)*K[2]:+K[2],ne&&(ne.unit=Ke,ne.start=Pt,ne.end=ae)),ae}var ka={};function oi(M){var I,K=M.ownerDocument,ne=M.nodeName,ae=ka[ne];return ae||(I=K.body.appendChild(K.createElement(ne)),ae=j.css(I,"display"),I.parentNode.removeChild(I),"none"===ae&&(ae="block"),ka[ne]=ae,ae)}function Oo(M,I){for(var K,ne,ae=[],le=0,ge=M.length;le<ge;le++)(ne=M[le]).style&&(K=ne.style.display,I?("none"===K&&(ae[le]=Sn.get(ne,"display")||null,ae[le]||(ne.style.display="")),""===ne.style.display&&Qr(ne)&&(ae[le]=oi(ne))):"none"!==K&&(ae[le]="none",Sn.set(ne,"display",K)));for(le=0;le<ge;le++)null!=ae[le]&&(M[le].style.display=ae[le]);return M}j.fn.extend({show:function(){return Oo(this,!0)},hide:function(){return Oo(this)},toggle:function(M){return"boolean"==typeof M?M?this.show():this.hide():this.each(function(){Qr(this)?j(this).show():j(this).hide()})}});var I,K,nn=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Mt=/^$|^module$|\/(?:java|ecma)script/i;I=me.createDocumentFragment().appendChild(me.createElement("div")),(K=me.createElement("input")).setAttribute("type","radio"),K.setAttribute("checked","checked"),K.setAttribute("name","t"),I.appendChild(K),V.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",V.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",V.option=!!I.lastChild;var Kt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function rn(M,I){var K;return K=typeof M.getElementsByTagName<"u"?M.getElementsByTagName(I||"*"):typeof M.querySelectorAll<"u"?M.querySelectorAll(I||"*"):[],void 0===I||I&&bt(M,I)?j.merge([M],K):K}function Et(M,I){for(var K=0,ne=M.length;K<ne;K++)Sn.set(M[K],"globalEval",!I||Sn.get(I[K],"globalEval"))}Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,V.option||(Kt.optgroup=Kt.option=[1,"<select multiple='multiple'>","</select>"]);var ki=/<|&#?\w+;/;function Tn(M,I,K,ne,ae){for(var le,ge,He,Fe,Ke,Pt,st=I.createDocumentFragment(),mt=[],Zt=0,hi=M.length;Zt<hi;Zt++)if((le=M[Zt])||0===le)if("object"===je(le))j.merge(mt,le.nodeType?[le]:le);else if(ki.test(le)){for(ge=ge||st.appendChild(I.createElement("div")),He=(kt.exec(le)||["",""])[1].toLowerCase(),ge.innerHTML=(Fe=Kt[He]||Kt._default)[1]+j.htmlPrefilter(le)+Fe[2],Pt=Fe[0];Pt--;)ge=ge.lastChild;j.merge(mt,ge.childNodes),(ge=st.firstChild).textContent=""}else mt.push(I.createTextNode(le));for(st.textContent="",Zt=0;le=mt[Zt++];)if(ne&&j.inArray(le,ne)>-1)ae&&ae.push(le);else if(Ke=ho(le),ge=rn(st.appendChild(le),"script"),Ke&&Et(ge),K)for(Pt=0;le=ge[Pt++];)Mt.test(le.type||"")&&K.push(le);return st}var $i=/^([^.]*)(?:\.(.+)|)/;function gi(){return!0}function cr(){return!1}function Eo(M,I,K,ne,ae,le){var ge,He;if("object"==typeof I){for(He in"string"!=typeof K&&(ne=ne||K,K=void 0),I)Eo(M,He,K,ne,I[He],le);return M}if(null==ne&&null==ae?(ae=K,ne=K=void 0):null==ae&&("string"==typeof K?(ae=ne,ne=void 0):(ae=ne,ne=K,K=void 0)),!1===ae)ae=cr;else if(!ae)return M;return 1===le&&(ge=ae,ae=function(Fe){return j().off(Fe),ge.apply(this,arguments)},ae.guid=ge.guid||(ge.guid=j.guid++)),M.each(function(){j.event.add(this,I,ae,ne,K)})}function Ts(M,I,K){K?(Sn.set(M,I,!1),j.event.add(M,I,{namespace:!1,handler:function(ne){var ae,le=Sn.get(this,I);if(1&ne.isTrigger&&this[I]){if(le)(j.event.special[I]||{}).delegateType&&ne.stopPropagation();else if(le=B.call(arguments),Sn.set(this,I,le),this[I](),ae=Sn.get(this,I),Sn.set(this,I,!1),le!==ae)return ne.stopImmediatePropagation(),ne.preventDefault(),ae}else le&&(Sn.set(this,I,j.event.trigger(le[0],le.slice(1),this)),ne.stopPropagation(),ne.isImmediatePropagationStopped=gi)}})):void 0===Sn.get(M,I)&&j.event.add(M,I,gi)}j.event={global:{},add:function(M,I,K,ne,ae){var le,ge,He,Fe,Ke,Pt,st,mt,Zt,hi,Qi,Si=Sn.get(M);if(Dr(M))for(K.handler&&(K=(le=K).handler,ae=le.selector),ae&&j.find.matchesSelector(xr,ae),K.guid||(K.guid=j.guid++),(Fe=Si.events)||(Fe=Si.events=Object.create(null)),(ge=Si.handle)||(ge=Si.handle=function(qo){return typeof j<"u"&&j.event.triggered!==qo.type?j.event.dispatch.apply(M,arguments):void 0}),Ke=(I=(I||"").match($t)||[""]).length;Ke--;)Zt=Qi=(He=$i.exec(I[Ke])||[])[1],hi=(He[2]||"").split(".").sort(),Zt&&(st=j.event.special[Zt]||{},st=j.event.special[Zt=(ae?st.delegateType:st.bindType)||Zt]||{},Pt=j.extend({type:Zt,origType:Qi,data:ne,handler:K,guid:K.guid,selector:ae,needsContext:ae&&j.expr.match.needsContext.test(ae),namespace:hi.join(".")},le),(mt=Fe[Zt])||((mt=Fe[Zt]=[]).delegateCount=0,(!st.setup||!1===st.setup.call(M,ne,hi,ge))&&M.addEventListener&&M.addEventListener(Zt,ge)),st.add&&(st.add.call(M,Pt),Pt.handler.guid||(Pt.handler.guid=K.guid)),ae?mt.splice(mt.delegateCount++,0,Pt):mt.push(Pt),j.event.global[Zt]=!0)},remove:function(M,I,K,ne,ae){var le,ge,He,Fe,Ke,Pt,st,mt,Zt,hi,Qi,Si=Sn.hasData(M)&&Sn.get(M);if(Si&&(Fe=Si.events)){for(Ke=(I=(I||"").match($t)||[""]).length;Ke--;)if(Zt=Qi=(He=$i.exec(I[Ke])||[])[1],hi=(He[2]||"").split(".").sort(),Zt){for(st=j.event.special[Zt]||{},mt=Fe[Zt=(ne?st.delegateType:st.bindType)||Zt]||[],He=He[2]&&new RegExp("(^|\\.)"+hi.join("\\.(?:.*\\.|)")+"(\\.|$)"),ge=le=mt.length;le--;)Pt=mt[le],(ae||Qi===Pt.origType)&&(!K||K.guid===Pt.guid)&&(!He||He.test(Pt.namespace))&&(!ne||ne===Pt.selector||"**"===ne&&Pt.selector)&&(mt.splice(le,1),Pt.selector&&mt.delegateCount--,st.remove&&st.remove.call(M,Pt));ge&&!mt.length&&((!st.teardown||!1===st.teardown.call(M,hi,Si.handle))&&j.removeEvent(M,Zt,Si.handle),delete Fe[Zt])}else for(Zt in Fe)j.event.remove(M,Zt+I[Ke],K,ne,!0);j.isEmptyObject(Fe)&&Sn.remove(M,"handle events")}},dispatch:function(M){var I,K,ne,ae,le,ge,He=new Array(arguments.length),Fe=j.event.fix(M),Ke=(Sn.get(this,"events")||Object.create(null))[Fe.type]||[],Pt=j.event.special[Fe.type]||{};for(He[0]=Fe,I=1;I<arguments.length;I++)He[I]=arguments[I];if(Fe.delegateTarget=this,!Pt.preDispatch||!1!==Pt.preDispatch.call(this,Fe)){for(ge=j.event.handlers.call(this,Fe,Ke),I=0;(ae=ge[I++])&&!Fe.isPropagationStopped();)for(Fe.currentTarget=ae.elem,K=0;(le=ae.handlers[K++])&&!Fe.isImmediatePropagationStopped();)(!Fe.rnamespace||!1===le.namespace||Fe.rnamespace.test(le.namespace))&&(Fe.handleObj=le,Fe.data=le.data,void 0!==(ne=((j.event.special[le.origType]||{}).handle||le.handler).apply(ae.elem,He))&&!1===(Fe.result=ne)&&(Fe.preventDefault(),Fe.stopPropagation()));return Pt.postDispatch&&Pt.postDispatch.call(this,Fe),Fe.result}},handlers:function(M,I){var K,ne,ae,le,ge,He=[],Fe=I.delegateCount,Ke=M.target;if(Fe&&Ke.nodeType&&!("click"===M.type&&M.button>=1))for(;Ke!==this;Ke=Ke.parentNode||this)if(1===Ke.nodeType&&("click"!==M.type||!0!==Ke.disabled)){for(le=[],ge={},K=0;K<Fe;K++)void 0===ge[ae=(ne=I[K]).selector+" "]&&(ge[ae]=ne.needsContext?j(ae,this).index(Ke)>-1:j.find(ae,this,null,[Ke]).length),ge[ae]&&le.push(ne);le.length&&He.push({elem:Ke,handlers:le})}return Ke=this,Fe<I.length&&He.push({elem:Ke,handlers:I.slice(Fe)}),He},addProp:function(M,I){Object.defineProperty(j.Event.prototype,M,{enumerable:!0,configurable:!0,get:ie(I)?function(){if(this.originalEvent)return I(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[M]},set:function(K){Object.defineProperty(this,M,{enumerable:!0,configurable:!0,writable:!0,value:K})}})},fix:function(M){return M[j.expando]?M:new j.Event(M)},special:{load:{noBubble:!0},click:{setup:function(M){var I=this||M;return nn.test(I.type)&&I.click&&bt(I,"input")&&Ts(I,"click",!0),!1},trigger:function(M){var I=this||M;return nn.test(I.type)&&I.click&&bt(I,"input")&&Ts(I,"click"),!0},_default:function(M){var I=M.target;return nn.test(I.type)&&I.click&&bt(I,"input")&&Sn.get(I,"click")||bt(I,"a")}},beforeunload:{postDispatch:function(M){void 0!==M.result&&M.originalEvent&&(M.originalEvent.returnValue=M.result)}}}},j.removeEvent=function(M,I,K){M.removeEventListener&&M.removeEventListener(I,K)},j.Event=function(M,I){if(!(this instanceof j.Event))return new j.Event(M,I);M&&M.type?(this.originalEvent=M,this.type=M.type,this.isDefaultPrevented=M.defaultPrevented||void 0===M.defaultPrevented&&!1===M.returnValue?gi:cr,this.target=M.target&&3===M.target.nodeType?M.target.parentNode:M.target,this.currentTarget=M.currentTarget,this.relatedTarget=M.relatedTarget):this.type=M,I&&j.extend(this,I),this.timeStamp=M&&M.timeStamp||Date.now(),this[j.expando]=!0},j.Event.prototype={constructor:j.Event,isDefaultPrevented:cr,isPropagationStopped:cr,isImmediatePropagationStopped:cr,isSimulated:!1,preventDefault:function(){var M=this.originalEvent;this.isDefaultPrevented=gi,M&&!this.isSimulated&&M.preventDefault()},stopPropagation:function(){var M=this.originalEvent;this.isPropagationStopped=gi,M&&!this.isSimulated&&M.stopPropagation()},stopImmediatePropagation:function(){var M=this.originalEvent;this.isImmediatePropagationStopped=gi,M&&!this.isSimulated&&M.stopImmediatePropagation(),this.stopPropagation()}},j.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},j.event.addProp),j.each({focus:"focusin",blur:"focusout"},function(M,I){function K(ne){if(me.documentMode){var ae=Sn.get(this,"handle"),le=j.event.fix(ne);le.type="focusin"===ne.type?"focus":"blur",le.isSimulated=!0,ae(ne),le.target===le.currentTarget&&ae(le)}else j.event.simulate(I,ne.target,j.event.fix(ne))}j.event.special[M]={setup:function(){var ne;if(Ts(this,M,!0),!me.documentMode)return!1;(ne=Sn.get(this,I))||this.addEventListener(I,K),Sn.set(this,I,(ne||0)+1)},trigger:function(){return Ts(this,M),!0},teardown:function(){var ne;if(!me.documentMode)return!1;(ne=Sn.get(this,I)-1)?Sn.set(this,I,ne):(this.removeEventListener(I,K),Sn.remove(this,I))},_default:function(ne){return Sn.get(ne.target,M)},delegateType:I},j.event.special[I]={setup:function(){var ne=this.ownerDocument||this.document||this,ae=me.documentMode?this:ne,le=Sn.get(ae,I);le||(me.documentMode?this.addEventListener(I,K):ne.addEventListener(M,K,!0)),Sn.set(ae,I,(le||0)+1)},teardown:function(){var ne=this.ownerDocument||this.document||this,ae=me.documentMode?this:ne,le=Sn.get(ae,I)-1;le?Sn.set(ae,I,le):(me.documentMode?this.removeEventListener(I,K):ne.removeEventListener(M,K,!0),Sn.remove(ae,I))}}}),j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(M,I){j.event.special[M]={delegateType:I,bindType:I,handle:function(K){var ne,ae=this,le=K.relatedTarget,ge=K.handleObj;return(!le||le!==ae&&!j.contains(ae,le))&&(K.type=ge.origType,ne=ge.handler.apply(this,arguments),K.type=I),ne}}}),j.fn.extend({on:function(M,I,K,ne){return Eo(this,M,I,K,ne)},one:function(M,I,K,ne){return Eo(this,M,I,K,ne,1)},off:function(M,I,K){var ne,ae;if(M&&M.preventDefault&&M.handleObj)return ne=M.handleObj,j(M.delegateTarget).off(ne.namespace?ne.origType+"."+ne.namespace:ne.origType,ne.selector,ne.handler),this;if("object"==typeof M){for(ae in M)this.off(ae,I,M[ae]);return this}return(!1===I||"function"==typeof I)&&(K=I,I=void 0),!1===K&&(K=cr),this.each(function(){j.event.remove(this,M,K,I)})}});var wn=/<script|<style|<link/i,Ei=/checked\s*(?:[^=]|=\s*.checked.)/i,Kr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Zs(M,I){return bt(M,"table")&&bt(11!==I.nodeType?I:I.firstChild,"tr")&&j(M).children("tbody")[0]||M}function td(M){return M.type=(null!==M.getAttribute("type"))+"/"+M.type,M}function Wo(M){return"true/"===(M.type||"").slice(0,5)?M.type=M.type.slice(5):M.removeAttribute("type"),M}function yc(M,I){var K,ne,ae,ge,He,Fe;if(1===I.nodeType){if(Sn.hasData(M)&&(Fe=Sn.get(M).events))for(ae in Sn.remove(I,"handle events"),Fe)for(K=0,ne=Fe[ae].length;K<ne;K++)j.event.add(I,ae,Fe[ae][K]);Ar.hasData(M)&&(ge=Ar.access(M),He=j.extend({},ge),Ar.set(I,He))}}function go(M,I){var K=I.nodeName.toLowerCase();"input"===K&&nn.test(M.type)?I.checked=M.checked:("input"===K||"textarea"===K)&&(I.defaultValue=M.defaultValue)}function Ol(M,I,K,ne){I=Q(I);var ae,le,ge,He,Fe,Ke,Pt=0,st=M.length,mt=st-1,Zt=I[0],hi=ie(Zt);if(hi||st>1&&"string"==typeof Zt&&!V.checkClone&&Ei.test(Zt))return M.each(function(Qi){var Si=M.eq(Qi);hi&&(I[0]=Zt.call(this,Qi,Si.html())),Ol(Si,I,K,ne)});if(st&&(le=(ae=Tn(I,M[0].ownerDocument,!1,M,ne)).firstChild,1===ae.childNodes.length&&(ae=le),le||ne)){for(He=(ge=j.map(rn(ae,"script"),td)).length;Pt<st;Pt++)Fe=ae,Pt!==mt&&(Fe=j.clone(Fe,!0,!0),He&&j.merge(ge,rn(Fe,"script"))),K.call(M[Pt],Fe,Pt);if(He)for(Ke=ge[ge.length-1].ownerDocument,j.map(ge,Wo),Pt=0;Pt<He;Pt++)Mt.test((Fe=ge[Pt]).type||"")&&!Sn.access(Fe,"globalEval")&&j.contains(Ke,Fe)&&(Fe.src&&"module"!==(Fe.type||"").toLowerCase()?j._evalUrl&&!Fe.noModule&&j._evalUrl(Fe.src,{nonce:Fe.nonce||Fe.getAttribute("nonce")},Ke):it(Fe.textContent.replace(Kr,""),Fe,Ke))}return M}function Xd(M,I,K){for(var ne,ae=I?j.filter(I,M):M,le=0;null!=(ne=ae[le]);le++)!K&&1===ne.nodeType&&j.cleanData(rn(ne)),ne.parentNode&&(K&&ho(ne)&&Et(rn(ne,"script")),ne.parentNode.removeChild(ne));return M}j.extend({htmlPrefilter:function(M){return M},clone:function(M,I,K){var ne,ae,le,ge,He=M.cloneNode(!0),Fe=ho(M);if(!(V.noCloneChecked||1!==M.nodeType&&11!==M.nodeType||j.isXMLDoc(M)))for(ge=rn(He),ne=0,ae=(le=rn(M)).length;ne<ae;ne++)go(le[ne],ge[ne]);if(I)if(K)for(le=le||rn(M),ge=ge||rn(He),ne=0,ae=le.length;ne<ae;ne++)yc(le[ne],ge[ne]);else yc(M,He);return(ge=rn(He,"script")).length>0&&Et(ge,!Fe&&rn(M,"script")),He},cleanData:function(M){for(var I,K,ne,ae=j.event.special,le=0;void 0!==(K=M[le]);le++)if(Dr(K)){if(I=K[Sn.expando]){if(I.events)for(ne in I.events)ae[ne]?j.event.remove(K,ne):j.removeEvent(K,ne,I.handle);K[Sn.expando]=void 0}K[Ar.expando]&&(K[Ar.expando]=void 0)}}}),j.fn.extend({detach:function(M){return Xd(this,M,!0)},remove:function(M){return Xd(this,M)},text:function(M){return Mi(this,function(I){return void 0===I?j.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=I)})},null,M,arguments.length)},append:function(){return Ol(this,arguments,function(M){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Zs(this,M).appendChild(M)})},prepend:function(){return Ol(this,arguments,function(M){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var I=Zs(this,M);I.insertBefore(M,I.firstChild)}})},before:function(){return Ol(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this)})},after:function(){return Ol(this,arguments,function(M){this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling)})},empty:function(){for(var M,I=0;null!=(M=this[I]);I++)1===M.nodeType&&(j.cleanData(rn(M,!1)),M.textContent="");return this},clone:function(M,I){return M=M??!1,I=I??M,this.map(function(){return j.clone(this,M,I)})},html:function(M){return Mi(this,function(I){var K=this[0]||{},ne=0,ae=this.length;if(void 0===I&&1===K.nodeType)return K.innerHTML;if("string"==typeof I&&!wn.test(I)&&!Kt[(kt.exec(I)||["",""])[1].toLowerCase()]){I=j.htmlPrefilter(I);try{for(;ne<ae;ne++)1===(K=this[ne]||{}).nodeType&&(j.cleanData(rn(K,!1)),K.innerHTML=I);K=0}catch{}}K&&this.empty().append(I)},null,M,arguments.length)},replaceWith:function(){var M=[];return Ol(this,arguments,function(I){var K=this.parentNode;j.inArray(this,M)<0&&(j.cleanData(rn(this)),K&&K.replaceChild(I,this))},M)}}),j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(M,I){j.fn[M]=function(K){for(var ne,ae=[],le=j(K),ge=le.length-1,He=0;He<=ge;He++)ne=He===ge?this:this.clone(!0),j(le[He])[I](ne),T.apply(ae,ne.get());return this.pushStack(ae)}});var Pi=new RegExp("^("+qi+")(?!px)[a-z%]+$","i"),$d=/^--/,ql=function(M){var I=M.ownerDocument.defaultView;return(!I||!I.opener)&&(I=C),I.getComputedStyle(M)},Qd=function(M,I,K){var ne,ae,le={};for(ae in I)le[ae]=M.style[ae],M.style[ae]=I[ae];for(ae in ne=K.call(M),I)M.style[ae]=le[ae];return ne},nd=new RegExp(ur.join("|"),"i");function ko(M,I,K){var ne,ae,le,ge,He=$d.test(I),Fe=M.style;return(K=K||ql(M))&&(ge=K.getPropertyValue(I)||K[I],He&&ge&&(ge=ge.replace(pt,"$1")||void 0),""===ge&&!ho(M)&&(ge=j.style(M,I)),!V.pixelBoxStyles()&&Pi.test(ge)&&nd.test(I)&&(ne=Fe.width,ae=Fe.minWidth,le=Fe.maxWidth,Fe.minWidth=Fe.maxWidth=Fe.width=ge,ge=K.width,Fe.width=ne,Fe.minWidth=ae,Fe.maxWidth=le)),void 0!==ge?ge+"":ge}function Kd(M,I){return{get:function(){if(!M())return(this.get=I).apply(this,arguments);delete this.get}}}!function(){function M(){if(Ke){Fe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ke.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xr.appendChild(Fe).appendChild(Ke);var Pt=C.getComputedStyle(Ke);K="1%"!==Pt.top,He=12===I(Pt.marginLeft),Ke.style.right="60%",le=36===I(Pt.right),ne=36===I(Pt.width),Ke.style.position="absolute",ae=12===I(Ke.offsetWidth/3),xr.removeChild(Fe),Ke=null}}function I(Pt){return Math.round(parseFloat(Pt))}var K,ne,ae,le,ge,He,Fe=me.createElement("div"),Ke=me.createElement("div");!Ke.style||(Ke.style.backgroundClip="content-box",Ke.cloneNode(!0).style.backgroundClip="",V.clearCloneStyle="content-box"===Ke.style.backgroundClip,j.extend(V,{boxSizingReliable:function(){return M(),ne},pixelBoxStyles:function(){return M(),le},pixelPosition:function(){return M(),K},reliableMarginLeft:function(){return M(),He},scrollboxSize:function(){return M(),ae},reliableTrDimensions:function(){var Pt,st,mt,Zt;return null==ge&&(Pt=me.createElement("table"),st=me.createElement("tr"),mt=me.createElement("div"),Pt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",st.style.cssText="box-sizing:content-box;border:1px solid",st.style.height="1px",mt.style.height="9px",mt.style.display="block",xr.appendChild(Pt).appendChild(st).appendChild(mt),Zt=C.getComputedStyle(st),ge=parseInt(Zt.height,10)+parseInt(Zt.borderTopWidth,10)+parseInt(Zt.borderBottomWidth,10)===st.offsetHeight,xr.removeChild(Pt)),ge}}))}();var Yl=["Webkit","Moz","ms"],Ra=me.createElement("div").style,id={};function Pr(M){return j.cssProps[M]||id[M]||(M in Ra?M:id[M]=function Ng(M){for(var I=M[0].toUpperCase()+M.slice(1),K=Yl.length;K--;)if((M=Yl[K]+I)in Ra)return M}(M)||M)}var fp=/^(none|table(?!-c[ea]).+)/,U1={position:"absolute",visibility:"hidden",display:"block"},eu={letterSpacing:"0",fontWeight:"400"};function mp(M,I,K){var ne=Yn.exec(I);return ne?Math.max(0,ne[2]-(K||0))+(ne[3]||"px"):I}function rd(M,I,K,ne,ae,le){var ge="width"===I?1:0,He=0,Fe=0,Ke=0;if(K===(ne?"border":"content"))return 0;for(;ge<4;ge+=2)"margin"===K&&(Ke+=j.css(M,K+ur[ge],!0,ae)),ne?("content"===K&&(Fe-=j.css(M,"padding"+ur[ge],!0,ae)),"margin"!==K&&(Fe-=j.css(M,"border"+ur[ge]+"Width",!0,ae))):(Fe+=j.css(M,"padding"+ur[ge],!0,ae),"padding"!==K?Fe+=j.css(M,"border"+ur[ge]+"Width",!0,ae):He+=j.css(M,"border"+ur[ge]+"Width",!0,ae));return!ne&&le>=0&&(Fe+=Math.max(0,Math.ceil(M["offset"+I[0].toUpperCase()+I.slice(1)]-le-Fe-He-.5))||0),Fe+Ke}function tu(M,I,K){var ne=ql(M),le=(!V.boxSizingReliable()||K)&&"border-box"===j.css(M,"boxSizing",!1,ne),ge=le,He=ko(M,I,ne),Fe="offset"+I[0].toUpperCase()+I.slice(1);if(Pi.test(He)){if(!K)return He;He="auto"}return(!V.boxSizingReliable()&&le||!V.reliableTrDimensions()&&bt(M,"tr")||"auto"===He||!parseFloat(He)&&"inline"===j.css(M,"display",!1,ne))&&M.getClientRects().length&&(le="border-box"===j.css(M,"boxSizing",!1,ne),(ge=Fe in M)&&(He=M[Fe])),(He=parseFloat(He)||0)+rd(M,I,K||(le?"border":"content"),ge,ne,He)+"px"}function Br(M,I,K,ne,ae){return new Br.prototype.init(M,I,K,ne,ae)}j.extend({cssHooks:{opacity:{get:function(M,I){if(I){var K=ko(M,"opacity");return""===K?"1":K}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(M,I,K,ne){if(M&&3!==M.nodeType&&8!==M.nodeType&&M.style){var ae,le,ge,He=lr(I),Fe=$d.test(I),Ke=M.style;if(Fe||(I=Pr(He)),ge=j.cssHooks[I]||j.cssHooks[He],void 0===K)return ge&&"get"in ge&&void 0!==(ae=ge.get(M,!1,ne))?ae:Ke[I];if("string"==(le=typeof K)&&(ae=Yn.exec(K))&&ae[1]&&(K=Go(M,I,ae),le="number"),null==K||K!=K)return;"number"===le&&!Fe&&(K+=ae&&ae[3]||(j.cssNumber[He]?"":"px")),!V.clearCloneStyle&&""===K&&0===I.indexOf("background")&&(Ke[I]="inherit"),(!ge||!("set"in ge)||void 0!==(K=ge.set(M,K,ne)))&&(Fe?Ke.setProperty(I,K):Ke[I]=K)}},css:function(M,I,K,ne){var ae,le,ge,He=lr(I);return $d.test(I)||(I=Pr(He)),(ge=j.cssHooks[I]||j.cssHooks[He])&&"get"in ge&&(ae=ge.get(M,!0,K)),void 0===ae&&(ae=ko(M,I,ne)),"normal"===ae&&I in eu&&(ae=eu[I]),""===K||K?(le=parseFloat(ae),!0===K||isFinite(le)?le||0:ae):ae}}),j.each(["height","width"],function(M,I){j.cssHooks[I]={get:function(K,ne,ae){if(ne)return!fp.test(j.css(K,"display"))||K.getClientRects().length&&K.getBoundingClientRect().width?tu(K,I,ae):Qd(K,U1,function(){return tu(K,I,ae)})},set:function(K,ne,ae){var le,ge=ql(K),He=!V.scrollboxSize()&&"absolute"===ge.position,Ke=(He||ae)&&"border-box"===j.css(K,"boxSizing",!1,ge),Pt=ae?rd(K,I,ae,Ke,ge):0;return Ke&&He&&(Pt-=Math.ceil(K["offset"+I[0].toUpperCase()+I.slice(1)]-parseFloat(ge[I])-rd(K,I,"border",!1,ge)-.5)),Pt&&(le=Yn.exec(ne))&&"px"!==(le[3]||"px")&&(K.style[I]=ne,ne=j.css(K,I)),mp(0,ne,Pt)}}}),j.cssHooks.marginLeft=Kd(V.reliableMarginLeft,function(M,I){if(I)return(parseFloat(ko(M,"marginLeft"))||M.getBoundingClientRect().left-Qd(M,{marginLeft:0},function(){return M.getBoundingClientRect().left}))+"px"}),j.each({margin:"",padding:"",border:"Width"},function(M,I){j.cssHooks[M+I]={expand:function(K){for(var ne=0,ae={},le="string"==typeof K?K.split(" "):[K];ne<4;ne++)ae[M+ur[ne]+I]=le[ne]||le[ne-2]||le[0];return ae}},"margin"!==M&&(j.cssHooks[M+I].set=mp)}),j.fn.extend({css:function(M,I){return Mi(this,function(K,ne,ae){var le,ge,He={},Fe=0;if(Array.isArray(ne)){for(le=ql(K),ge=ne.length;Fe<ge;Fe++)He[ne[Fe]]=j.css(K,ne[Fe],!1,le);return He}return void 0!==ae?j.style(K,ne,ae):j.css(K,ne)},M,I,arguments.length>1)}}),j.Tween=Br,(Br.prototype={constructor:Br,init:function(M,I,K,ne,ae,le){this.elem=M,this.prop=K,this.easing=ae||j.easing._default,this.options=I,this.start=this.now=this.cur(),this.end=ne,this.unit=le||(j.cssNumber[K]?"":"px")},cur:function(){var M=Br.propHooks[this.prop];return M&&M.get?M.get(this):Br.propHooks._default.get(this)},run:function(M){var I,K=Br.propHooks[this.prop];return this.pos=I=this.options.duration?j.easing[this.easing](M,this.options.duration*M,0,1,this.options.duration):M,this.now=(this.end-this.start)*I+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),K&&K.set?K.set(this):Br.propHooks._default.set(this),this}}).init.prototype=Br.prototype,(Br.propHooks={_default:{get:function(M){var I;return 1!==M.elem.nodeType||null!=M.elem[M.prop]&&null==M.elem.style[M.prop]?M.elem[M.prop]:(I=j.css(M.elem,M.prop,""))&&"auto"!==I?I:0},set:function(M){j.fx.step[M.prop]?j.fx.step[M.prop](M):1!==M.elem.nodeType||!j.cssHooks[M.prop]&&null==M.elem.style[Pr(M.prop)]?M.elem[M.prop]=M.now:j.style(M.elem,M.prop,M.now+M.unit)}}}).scrollTop=Br.propHooks.scrollLeft={set:function(M){M.elem.nodeType&&M.elem.parentNode&&(M.elem[M.prop]=M.now)}},j.easing={linear:function(M){return M},swing:function(M){return.5-Math.cos(M*Math.PI)/2},_default:"swing"},j.fx=Br.prototype.init,j.fx.step={};var Do,gp,va=/^(?:toggle|show|hide)$/,Na=/queueHooks$/;function nu(){gp&&(!1===me.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(nu):C.setTimeout(nu,j.fx.interval),j.fx.tick())}function iu(){return C.setTimeout(function(){Do=void 0}),Do=Date.now()}function od(M,I){var K,ne=0,ae={height:M};for(I=I?1:0;ne<4;ne+=2-I)ae["margin"+(K=ur[ne])]=ae["padding"+K]=M;return I&&(ae.opacity=ae.width=M),ae}function Fa(M,I,K){for(var ne,ae=(nl.tweeners[I]||[]).concat(nl.tweeners["*"]),le=0,ge=ae.length;le<ge;le++)if(ne=ae[le].call(K,I,M))return ne}function nl(M,I,K){var ne,ae,le=0,ge=nl.prefilters.length,He=j.Deferred().always(function(){delete Fe.elem}),Fe=function(){if(ae)return!1;for(var st=Do||iu(),mt=Math.max(0,Ke.startTime+Ke.duration-st),hi=1-(mt/Ke.duration||0),Qi=0,Si=Ke.tweens.length;Qi<Si;Qi++)Ke.tweens[Qi].run(hi);return He.notifyWith(M,[Ke,hi,mt]),hi<1&&Si?mt:(Si||He.notifyWith(M,[Ke,1,0]),He.resolveWith(M,[Ke]),!1)},Ke=He.promise({elem:M,props:j.extend({},I),opts:j.extend(!0,{specialEasing:{},easing:j.easing._default},K),originalProperties:I,originalOptions:K,startTime:Do||iu(),duration:K.duration,tweens:[],createTween:function(st,mt){var Zt=j.Tween(M,Ke.opts,st,mt,Ke.opts.specialEasing[st]||Ke.opts.easing);return Ke.tweens.push(Zt),Zt},stop:function(st){var mt=0,Zt=st?Ke.tweens.length:0;if(ae)return this;for(ae=!0;mt<Zt;mt++)Ke.tweens[mt].run(1);return st?(He.notifyWith(M,[Ke,1,0]),He.resolveWith(M,[Ke,st])):He.rejectWith(M,[Ke,st]),this}}),Pt=Ke.props;for(function cx(M,I){var K,ne,ae,le,ge;for(K in M)if(ae=I[ne=lr(K)],le=M[K],Array.isArray(le)&&(ae=le[1],le=M[K]=le[0]),K!==ne&&(M[ne]=le,delete M[K]),(ge=j.cssHooks[ne])&&"expand"in ge)for(K in le=ge.expand(le),delete M[ne],le)K in M||(M[K]=le[K],I[K]=ae);else I[ne]=ae}(Pt,Ke.opts.specialEasing);le<ge;le++)if(ne=nl.prefilters[le].call(Ke,M,Pt,Ke.opts))return ie(ne.stop)&&(j._queueHooks(Ke.elem,Ke.opts.queue).stop=ne.stop.bind(ne)),ne;return j.map(Pt,Fa,Ke),ie(Ke.opts.start)&&Ke.opts.start.call(M,Ke),Ke.progress(Ke.opts.progress).done(Ke.opts.done,Ke.opts.complete).fail(Ke.opts.fail).always(Ke.opts.always),j.fx.timer(j.extend(Fe,{elem:M,anim:Ke,queue:Ke.opts.queue})),Ke}j.Animation=j.extend(nl,{tweeners:{"*":[function(M,I){var K=this.createTween(M,I);return Go(K.elem,M,Yn.exec(I),K),K}]},tweener:function(M,I){ie(M)?(I=M,M=["*"]):M=M.match($t);for(var K,ne=0,ae=M.length;ne<ae;ne++)(nl.tweeners[K=M[ne]]=nl.tweeners[K]||[]).unshift(I)},prefilters:[function j1(M,I,K){var ne,ae,le,ge,He,Fe,Ke,Pt,st="width"in I||"height"in I,mt=this,Zt={},hi=M.style,Qi=M.nodeType&&Qr(M),Si=Sn.get(M,"fxshow");for(ne in K.queue||(null==(ge=j._queueHooks(M,"fx")).unqueued&&(ge.unqueued=0,He=ge.empty.fire,ge.empty.fire=function(){ge.unqueued||He()}),ge.unqueued++,mt.always(function(){mt.always(function(){ge.unqueued--,j.queue(M,"fx").length||ge.empty.fire()})})),I)if(va.test(ae=I[ne])){if(delete I[ne],le=le||"toggle"===ae,ae===(Qi?"hide":"show")){if("show"!==ae||!Si||void 0===Si[ne])continue;Qi=!0}Zt[ne]=Si&&Si[ne]||j.style(M,ne)}if((Fe=!j.isEmptyObject(I))||!j.isEmptyObject(Zt))for(ne in st&&1===M.nodeType&&(K.overflow=[hi.overflow,hi.overflowX,hi.overflowY],null==(Ke=Si&&Si.display)&&(Ke=Sn.get(M,"display")),"none"===(Pt=j.css(M,"display"))&&(Ke?Pt=Ke:(Oo([M],!0),Ke=M.style.display||Ke,Pt=j.css(M,"display"),Oo([M]))),("inline"===Pt||"inline-block"===Pt&&null!=Ke)&&"none"===j.css(M,"float")&&(Fe||(mt.done(function(){hi.display=Ke}),null==Ke&&(Ke="none"===(Pt=hi.display)?"":Pt)),hi.display="inline-block")),K.overflow&&(hi.overflow="hidden",mt.always(function(){hi.overflow=K.overflow[0],hi.overflowX=K.overflow[1],hi.overflowY=K.overflow[2]})),Fe=!1,Zt)Fe||(Si?"hidden"in Si&&(Qi=Si.hidden):Si=Sn.access(M,"fxshow",{display:Ke}),le&&(Si.hidden=!Qi),Qi&&Oo([M],!0),mt.done(function(){for(ne in Qi||Oo([M]),Sn.remove(M,"fxshow"),Zt)j.style(M,ne,Zt[ne])})),Fe=Fa(Qi?Si[ne]:0,ne,mt),ne in Si||(Si[ne]=Fe.start,Qi&&(Fe.end=Fe.start,Fe.start=0))}],prefilter:function(M,I){I?nl.prefilters.unshift(M):nl.prefilters.push(M)}}),j.speed=function(M,I,K){var ne=M&&"object"==typeof M?j.extend({},M):{complete:K||!K&&I||ie(M)&&M,duration:M,easing:K&&I||I&&!ie(I)&&I};return j.fx.off?ne.duration=0:"number"!=typeof ne.duration&&(ne.duration=ne.duration in j.fx.speeds?j.fx.speeds[ne.duration]:j.fx.speeds._default),(null==ne.queue||!0===ne.queue)&&(ne.queue="fx"),ne.old=ne.complete,ne.complete=function(){ie(ne.old)&&ne.old.call(this),ne.queue&&j.dequeue(this,ne.queue)},ne},j.fn.extend({fadeTo:function(M,I,K,ne){return this.filter(Qr).css("opacity",0).show().end().animate({opacity:I},M,K,ne)},animate:function(M,I,K,ne){var ae=j.isEmptyObject(M),le=j.speed(I,K,ne),ge=function(){var He=nl(this,j.extend({},M),le);(ae||Sn.get(this,"finish"))&&He.stop(!0)};return ge.finish=ge,ae||!1===le.queue?this.each(ge):this.queue(le.queue,ge)},stop:function(M,I,K){var ne=function(ae){var le=ae.stop;delete ae.stop,le(K)};return"string"!=typeof M&&(K=I,I=M,M=void 0),I&&this.queue(M||"fx",[]),this.each(function(){var ae=!0,le=null!=M&&M+"queueHooks",ge=j.timers,He=Sn.get(this);if(le)He[le]&&He[le].stop&&ne(He[le]);else for(le in He)He[le]&&He[le].stop&&Na.test(le)&&ne(He[le]);for(le=ge.length;le--;)ge[le].elem===this&&(null==M||ge[le].queue===M)&&(ge[le].anim.stop(K),ae=!1,ge.splice(le,1));(ae||!K)&&j.dequeue(this,M)})},finish:function(M){return!1!==M&&(M=M||"fx"),this.each(function(){var I,K=Sn.get(this),ne=K[M+"queue"],ae=K[M+"queueHooks"],le=j.timers,ge=ne?ne.length:0;for(K.finish=!0,j.queue(this,M,[]),ae&&ae.stop&&ae.stop.call(this,!0),I=le.length;I--;)le[I].elem===this&&le[I].queue===M&&(le[I].anim.stop(!0),le.splice(I,1));for(I=0;I<ge;I++)ne[I]&&ne[I].finish&&ne[I].finish.call(this);delete K.finish})}}),j.each(["toggle","show","hide"],function(M,I){var K=j.fn[I];j.fn[I]=function(ne,ae,le){return null==ne||"boolean"==typeof ne?K.apply(this,arguments):this.animate(od(I,!0),ne,ae,le)}}),j.each({slideDown:od("show"),slideUp:od("hide"),slideToggle:od("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(M,I){j.fn[M]=function(K,ne,ae){return this.animate(I,K,ne,ae)}}),j.timers=[],j.fx.tick=function(){var M,I=0,K=j.timers;for(Do=Date.now();I<K.length;I++)!(M=K[I])()&&K[I]===M&&K.splice(I--,1);K.length||j.fx.stop(),Do=void 0},j.fx.timer=function(M){j.timers.push(M),j.fx.start()},j.fx.interval=13,j.fx.start=function(){gp||(gp=!0,nu())},j.fx.stop=function(){gp=null},j.fx.speeds={slow:600,fast:200,_default:400},j.fn.delay=function(M,I){return M=j.fx&&j.fx.speeds[M]||M,this.queue(I=I||"fx",function(K,ne){var ae=C.setTimeout(K,M);ne.stop=function(){C.clearTimeout(ae)}})},function(){var M=me.createElement("input"),K=me.createElement("select").appendChild(me.createElement("option"));M.type="checkbox",V.checkOn=""!==M.value,V.optSelected=K.selected,(M=me.createElement("input")).value="t",M.type="radio",V.radioValue="t"===M.value}();var Fg,Js=j.expr.attrHandle;j.fn.extend({attr:function(M,I){return Mi(this,j.attr,M,I,arguments.length>1)},removeAttr:function(M){return this.each(function(){j.removeAttr(this,M)})}}),j.extend({attr:function(M,I,K){var ne,ae,le=M.nodeType;if(3!==le&&8!==le&&2!==le)return typeof M.getAttribute>"u"?j.prop(M,I,K):((1!==le||!j.isXMLDoc(M))&&(ae=j.attrHooks[I.toLowerCase()]||(j.expr.match.bool.test(I)?Fg:void 0)),void 0!==K?null===K?void j.removeAttr(M,I):ae&&"set"in ae&&void 0!==(ne=ae.set(M,K,I))?ne:(M.setAttribute(I,K+""),K):ae&&"get"in ae&&null!==(ne=ae.get(M,I))?ne:(ne=j.find.attr(M,I))??void 0)},attrHooks:{type:{set:function(M,I){if(!V.radioValue&&"radio"===I&&bt(M,"input")){var K=M.value;return M.setAttribute("type",I),K&&(M.value=K),I}}}},removeAttr:function(M,I){var K,ne=0,ae=I&&I.match($t);if(ae&&1===M.nodeType)for(;K=ae[ne++];)M.removeAttribute(K)}}),Fg={set:function(M,I,K){return!1===I?j.removeAttr(M,K):M.setAttribute(K,K),K}},j.each(j.expr.match.bool.source.match(/\w+/g),function(M,I){var K=Js[I]||j.find.attr;Js[I]=function(ne,ae,le){var ge,He,Fe=ae.toLowerCase();return le||(He=Js[Fe],Js[Fe]=ge,ge=null!=K(ne,ae,le)?Fe:null,Js[Fe]=He),ge}});var dx=/^(?:input|select|textarea|button)$/i,hx=/^(?:a|area)$/i;function Zd(M){return(M.match($t)||[]).join(" ")}function Jd(M){return M.getAttribute&&M.getAttribute("class")||""}function Lg(M){return Array.isArray(M)?M:"string"==typeof M&&M.match($t)||[]}j.fn.extend({prop:function(M,I){return Mi(this,j.prop,M,I,arguments.length>1)},removeProp:function(M){return this.each(function(){delete this[j.propFix[M]||M]})}}),j.extend({prop:function(M,I,K){var ne,ae,le=M.nodeType;if(3!==le&&8!==le&&2!==le)return(1!==le||!j.isXMLDoc(M))&&(ae=j.propHooks[I=j.propFix[I]||I]),void 0!==K?ae&&"set"in ae&&void 0!==(ne=ae.set(M,K,I))?ne:M[I]=K:ae&&"get"in ae&&null!==(ne=ae.get(M,I))?ne:M[I]},propHooks:{tabIndex:{get:function(M){var I=j.find.attr(M,"tabindex");return I?parseInt(I,10):dx.test(M.nodeName)||hx.test(M.nodeName)&&M.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),V.optSelected||(j.propHooks.selected={get:function(M){return null},set:function(M){}}),j.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){j.propFix[this.toLowerCase()]=this}),j.fn.extend({addClass:function(M){var I,K,ne,ae,le,ge;return ie(M)?this.each(function(He){j(this).addClass(M.call(this,He,Jd(this)))}):(I=Lg(M)).length?this.each(function(){if(ne=Jd(this),K=1===this.nodeType&&" "+Zd(ne)+" "){for(le=0;le<I.length;le++)K.indexOf(" "+(ae=I[le])+" ")<0&&(K+=ae+" ");ge=Zd(K),ne!==ge&&this.setAttribute("class",ge)}}):this},removeClass:function(M){var I,K,ne,ae,le,ge;return ie(M)?this.each(function(He){j(this).removeClass(M.call(this,He,Jd(this)))}):arguments.length?(I=Lg(M)).length?this.each(function(){if(ne=Jd(this),K=1===this.nodeType&&" "+Zd(ne)+" "){for(le=0;le<I.length;le++)for(ae=I[le];K.indexOf(" "+ae+" ")>-1;)K=K.replace(" "+ae+" "," ");ge=Zd(K),ne!==ge&&this.setAttribute("class",ge)}}):this:this.attr("class","")},toggleClass:function(M,I){var K,ne,ae,le,ge=typeof M,He="string"===ge||Array.isArray(M);return ie(M)?this.each(function(Fe){j(this).toggleClass(M.call(this,Fe,Jd(this),I),I)}):"boolean"==typeof I&&He?I?this.addClass(M):this.removeClass(M):(K=Lg(M),this.each(function(){if(He)for(le=j(this),ae=0;ae<K.length;ae++)le.hasClass(ne=K[ae])?le.removeClass(ne):le.addClass(ne);else(void 0===M||"boolean"===ge)&&((ne=Jd(this))&&Sn.set(this,"__className__",ne),this.setAttribute&&this.setAttribute("class",ne||!1===M?"":Sn.get(this,"__className__")||""))}))},hasClass:function(M){var I,K,ne=0;for(I=" "+M+" ";K=this[ne++];)if(1===K.nodeType&&(" "+Zd(Jd(K))+" ").indexOf(I)>-1)return!0;return!1}});var V1=/\r/g;j.fn.extend({val:function(M){var I,K,ne,ae=this[0];return arguments.length?(ne=ie(M),this.each(function(le){var ge;1===this.nodeType&&(null==(ge=ne?M.call(this,le,j(this).val()):M)?ge="":"number"==typeof ge?ge+="":Array.isArray(ge)&&(ge=j.map(ge,function(He){return null==He?"":He+""})),(!(I=j.valHooks[this.type]||j.valHooks[this.nodeName.toLowerCase()])||!("set"in I)||void 0===I.set(this,ge,"value"))&&(this.value=ge))})):ae?(I=j.valHooks[ae.type]||j.valHooks[ae.nodeName.toLowerCase()])&&"get"in I&&void 0!==(K=I.get(ae,"value"))?K:"string"==typeof(K=ae.value)?K.replace(V1,""):K??"":void 0}}),j.extend({valHooks:{option:{get:function(M){return j.find.attr(M,"value")??Zd(j.text(M))}},select:{get:function(M){var I,K,ne,ae=M.options,le=M.selectedIndex,ge="select-one"===M.type,He=ge?null:[],Fe=ge?le+1:ae.length;for(ne=le<0?Fe:ge?le:0;ne<Fe;ne++)if(((K=ae[ne]).selected||ne===le)&&!K.disabled&&(!K.parentNode.disabled||!bt(K.parentNode,"optgroup"))){if(I=j(K).val(),ge)return I;He.push(I)}return He},set:function(M,I){for(var K,ne,ae=M.options,le=j.makeArray(I),ge=ae.length;ge--;)((ne=ae[ge]).selected=j.inArray(j.valHooks.option.get(ne),le)>-1)&&(K=!0);return K||(M.selectedIndex=-1),le}}}}),j.each(["radio","checkbox"],function(){j.valHooks[this]={set:function(M,I){if(Array.isArray(I))return M.checked=j.inArray(j(M).val(),I)>-1}},V.checkOn||(j.valHooks[this].get=function(M){return null===M.getAttribute("value")?"on":M.value})});var vp=C.location,H1={guid:Date.now()},Bg=/\?/;j.parseXML=function(M){var I,K;if(!M||"string"!=typeof M)return null;try{I=(new C.DOMParser).parseFromString(M,"text/xml")}catch{}return K=I&&I.getElementsByTagName("parsererror")[0],(!I||K)&&j.error("Invalid XML: "+(K?j.map(K.childNodes,function(ne){return ne.textContent}).join("\n"):M)),I};var G1=/^(?:focusinfocus|focusoutblur)$/,W1=function(M){M.stopPropagation()};j.extend(j.event,{trigger:function(M,I,K,ne){var ae,le,ge,He,Fe,Ke,Pt,st,mt=[K||me],Zt=N.call(M,"type")?M.type:M,hi=N.call(M,"namespace")?M.namespace.split("."):[];if(le=st=ge=K=K||me,3!==K.nodeType&&8!==K.nodeType&&!G1.test(Zt+j.event.triggered)&&(Zt.indexOf(".")>-1&&(hi=Zt.split("."),Zt=hi.shift(),hi.sort()),Fe=Zt.indexOf(":")<0&&"on"+Zt,(M=M[j.expando]?M:new j.Event(Zt,"object"==typeof M&&M)).isTrigger=ne?2:3,M.namespace=hi.join("."),M.rnamespace=M.namespace?new RegExp("(^|\\.)"+hi.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,M.result=void 0,M.target||(M.target=K),I=null==I?[M]:j.makeArray(I,[M]),Pt=j.event.special[Zt]||{},ne||!Pt.trigger||!1!==Pt.trigger.apply(K,I))){if(!ne&&!Pt.noBubble&&!pe(K)){for(G1.test((He=Pt.delegateType||Zt)+Zt)||(le=le.parentNode);le;le=le.parentNode)mt.push(le),ge=le;ge===(K.ownerDocument||me)&&mt.push(ge.defaultView||ge.parentWindow||C)}for(ae=0;(le=mt[ae++])&&!M.isPropagationStopped();)st=le,M.type=ae>1?He:Pt.bindType||Zt,(Ke=(Sn.get(le,"events")||Object.create(null))[M.type]&&Sn.get(le,"handle"))&&Ke.apply(le,I),(Ke=Fe&&le[Fe])&&Ke.apply&&Dr(le)&&(M.result=Ke.apply(le,I),!1===M.result&&M.preventDefault());return M.type=Zt,!ne&&!M.isDefaultPrevented()&&(!Pt._default||!1===Pt._default.apply(mt.pop(),I))&&Dr(K)&&Fe&&ie(K[Zt])&&!pe(K)&&((ge=K[Fe])&&(K[Fe]=null),j.event.triggered=Zt,M.isPropagationStopped()&&st.addEventListener(Zt,W1),K[Zt](),M.isPropagationStopped()&&st.removeEventListener(Zt,W1),j.event.triggered=void 0,ge&&(K[Fe]=ge)),M.result}},simulate:function(M,I,K){var ne=j.extend(new j.Event,K,{type:M,isSimulated:!0});j.event.trigger(ne,null,I)}}),j.fn.extend({trigger:function(M,I){return this.each(function(){j.event.trigger(M,I,this)})},triggerHandler:function(M,I){var K=this[0];if(K)return j.event.trigger(M,I,K,!0)}});var q1=/\[\]$/,Y1=/\r?\n/g,zg=/^(?:submit|button|image|reset|file)$/i,Vf=/^(?:input|select|textarea|keygen)/i;function Ug(M,I,K,ne){var ae;if(Array.isArray(I))j.each(I,function(le,ge){K||q1.test(M)?ne(M,ge):Ug(M+"["+("object"==typeof ge&&null!=ge?le:"")+"]",ge,K,ne)});else if(K||"object"!==je(I))ne(M,I);else for(ae in I)Ug(M+"["+ae+"]",I[ae],K,ne)}j.param=function(M,I){var K,ne=[],ae=function(le,ge){var He=ie(ge)?ge():ge;ne[ne.length]=encodeURIComponent(le)+"="+encodeURIComponent(He??"")};if(null==M)return"";if(Array.isArray(M)||M.jquery&&!j.isPlainObject(M))j.each(M,function(){ae(this.name,this.value)});else for(K in M)Ug(K,M[K],I,ae);return ne.join("&")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var M=j.prop(this,"elements");return M?j.makeArray(M):this}).filter(function(){var M=this.type;return this.name&&!j(this).is(":disabled")&&Vf.test(this.nodeName)&&!zg.test(M)&&(this.checked||!nn.test(M))}).map(function(M,I){var K=j(this).val();return null==K?null:Array.isArray(K)?j.map(K,function(ne){return{name:I.name,value:ne.replace(Y1,"\r\n")}}):{name:I.name,value:K.replace(Y1,"\r\n")}}).get()}});var ux=/%20/g,px=/#.*$/,sd=/([?&])_=[^&]*/,X1=/^(.*?):[ \t]*([^\r\n]*)$/gm,jg=/^(?:GET|HEAD)$/,$1=/^\/\//,Vg={},yp={},Hf="*/".concat("*"),Gf=me.createElement("a");function bp(M){return function(I,K){"string"!=typeof I&&(K=I,I="*");var ne,ae=0,le=I.toLowerCase().match($t)||[];if(ie(K))for(;ne=le[ae++];)"+"===ne[0]?(ne=ne.slice(1)||"*",(M[ne]=M[ne]||[]).unshift(K)):(M[ne]=M[ne]||[]).push(K)}}function Hg(M,I,K,ne){var ae={},le=M===yp;function ge(He){var Fe;return ae[He]=!0,j.each(M[He]||[],function(Ke,Pt){var st=Pt(I,K,ne);return"string"!=typeof st||le||ae[st]?le?!(Fe=st):void 0:(I.dataTypes.unshift(st),ge(st),!1)}),Fe}return ge(I.dataTypes[0])||!ae["*"]&&ge("*")}function ea(M,I){var K,ne,ae=j.ajaxSettings.flatOptions||{};for(K in I)void 0!==I[K]&&((ae[K]?M:ne||(ne={}))[K]=I[K]);return ne&&j.extend(!0,M,ne),M}Gf.href=vp.href,j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vp.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vp.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(M,I){return I?ea(ea(M,j.ajaxSettings),I):ea(j.ajaxSettings,M)},ajaxPrefilter:bp(Vg),ajaxTransport:bp(yp),ajax:function(M,I){"object"==typeof M&&(I=M,M=void 0);var K,ne,ae,le,ge,He,Fe,Ke,Pt,st,mt=j.ajaxSetup({},I=I||{}),Zt=mt.context||mt,hi=mt.context&&(Zt.nodeType||Zt.jquery)?j(Zt):j.event,Qi=j.Deferred(),Si=j.Callbacks("once memory"),qo=mt.statusCode||{},Bo={},ya={},Ut="canceled",In={readyState:0,getResponseHeader:function(tn){var Bi;if(Fe){if(!le)for(le={};Bi=X1.exec(ae);)le[Bi[1].toLowerCase()+" "]=(le[Bi[1].toLowerCase()+" "]||[]).concat(Bi[2]);Bi=le[tn.toLowerCase()+" "]}return null==Bi?null:Bi.join(", ")},getAllResponseHeaders:function(){return Fe?ae:null},setRequestHeader:function(tn,Bi){return null==Fe&&(tn=ya[tn.toLowerCase()]=ya[tn.toLowerCase()]||tn,Bo[tn]=Bi),this},overrideMimeType:function(tn){return null==Fe&&(mt.mimeType=tn),this},statusCode:function(tn){var Bi;if(tn)if(Fe)In.always(tn[In.status]);else for(Bi in tn)qo[Bi]=[qo[Bi],tn[Bi]];return this},abort:function(tn){var Bi=tn||Ut;return K&&K.abort(Bi),Ln(0,Bi),this}};if(Qi.promise(In),mt.url=((M||mt.url||vp.href)+"").replace($1,vp.protocol+"//"),mt.type=I.method||I.type||mt.method||mt.type,mt.dataTypes=(mt.dataType||"*").toLowerCase().match($t)||[""],null==mt.crossDomain){He=me.createElement("a");try{He.href=mt.url,He.href=He.href,mt.crossDomain=Gf.protocol+"//"+Gf.host!=He.protocol+"//"+He.host}catch{mt.crossDomain=!0}}if(mt.data&&mt.processData&&"string"!=typeof mt.data&&(mt.data=j.param(mt.data,mt.traditional)),Hg(Vg,mt,I,In),Fe)return In;for(Pt in(Ke=j.event&&mt.global)&&0==j.active++&&j.event.trigger("ajaxStart"),mt.type=mt.type.toUpperCase(),mt.hasContent=!jg.test(mt.type),ne=mt.url.replace(px,""),mt.hasContent?mt.data&&mt.processData&&0===(mt.contentType||"").indexOf("application/x-www-form-urlencoded")&&(mt.data=mt.data.replace(ux,"+")):(st=mt.url.slice(ne.length),mt.data&&(mt.processData||"string"==typeof mt.data)&&(ne+=(Bg.test(ne)?"&":"?")+mt.data,delete mt.data),!1===mt.cache&&(ne=ne.replace(sd,"$1"),st=(Bg.test(ne)?"&":"?")+"_="+H1.guid+++st),mt.url=ne+st),mt.ifModified&&(j.lastModified[ne]&&In.setRequestHeader("If-Modified-Since",j.lastModified[ne]),j.etag[ne]&&In.setRequestHeader("If-None-Match",j.etag[ne])),(mt.data&&mt.hasContent&&!1!==mt.contentType||I.contentType)&&In.setRequestHeader("Content-Type",mt.contentType),In.setRequestHeader("Accept",mt.dataTypes[0]&&mt.accepts[mt.dataTypes[0]]?mt.accepts[mt.dataTypes[0]]+("*"!==mt.dataTypes[0]?", "+Hf+"; q=0.01":""):mt.accepts["*"]),mt.headers)In.setRequestHeader(Pt,mt.headers[Pt]);if(mt.beforeSend&&(!1===mt.beforeSend.call(Zt,In,mt)||Fe))return In.abort();if(Ut="abort",Si.add(mt.complete),In.done(mt.success),In.fail(mt.error),K=Hg(yp,mt,I,In)){if(In.readyState=1,Ke&&hi.trigger("ajaxSend",[In,mt]),Fe)return In;mt.async&&mt.timeout>0&&(ge=C.setTimeout(function(){In.abort("timeout")},mt.timeout));try{Fe=!1,K.send(Bo,Ln)}catch(tn){if(Fe)throw tn;Ln(-1,tn)}}else Ln(-1,"No Transport");function Ln(tn,Bi,eh,ad){var Ro,ld,La,cd,bc,il=Bi;Fe||(Fe=!0,ge&&C.clearTimeout(ge),K=void 0,ae=ad||"",In.readyState=tn>0?4:0,Ro=tn>=200&&tn<300||304===tn,eh&&(cd=function _p(M,I,K){for(var ne,ae,le,ge,He=M.contents,Fe=M.dataTypes;"*"===Fe[0];)Fe.shift(),void 0===ne&&(ne=M.mimeType||I.getResponseHeader("Content-Type"));if(ne)for(ae in He)if(He[ae]&&He[ae].test(ne)){Fe.unshift(ae);break}if(Fe[0]in K)le=Fe[0];else{for(ae in K){if(!Fe[0]||M.converters[ae+" "+Fe[0]]){le=ae;break}ge||(ge=ae)}le=le||ge}if(le)return le!==Fe[0]&&Fe.unshift(le),K[le]}(mt,In,eh)),!Ro&&j.inArray("script",mt.dataTypes)>-1&&j.inArray("json",mt.dataTypes)<0&&(mt.converters["text script"]=function(){}),cd=function Q1(M,I,K,ne){var ae,le,ge,He,Fe,Ke={},Pt=M.dataTypes.slice();if(Pt[1])for(ge in M.converters)Ke[ge.toLowerCase()]=M.converters[ge];for(le=Pt.shift();le;)if(M.responseFields[le]&&(K[M.responseFields[le]]=I),!Fe&&ne&&M.dataFilter&&(I=M.dataFilter(I,M.dataType)),Fe=le,le=Pt.shift())if("*"===le)le=Fe;else if("*"!==Fe&&Fe!==le){if(!(ge=Ke[Fe+" "+le]||Ke["* "+le]))for(ae in Ke)if((He=ae.split(" "))[1]===le&&(ge=Ke[Fe+" "+He[0]]||Ke["* "+He[0]])){!0===ge?ge=Ke[ae]:!0!==Ke[ae]&&(le=He[0],Pt.unshift(He[1]));break}if(!0!==ge)if(ge&&M.throws)I=ge(I);else try{I=ge(I)}catch(st){return{state:"parsererror",error:ge?st:"No conversion from "+Fe+" to "+le}}}return{state:"success",data:I}}(mt,cd,In,Ro),Ro?(mt.ifModified&&((bc=In.getResponseHeader("Last-Modified"))&&(j.lastModified[ne]=bc),(bc=In.getResponseHeader("etag"))&&(j.etag[ne]=bc)),204===tn||"HEAD"===mt.type?il="nocontent":304===tn?il="notmodified":(il=cd.state,ld=cd.data,Ro=!(La=cd.error))):(La=il,(tn||!il)&&(il="error",tn<0&&(tn=0))),In.status=tn,In.statusText=(Bi||il)+"",Ro?Qi.resolveWith(Zt,[ld,il,In]):Qi.rejectWith(Zt,[In,il,La]),In.statusCode(qo),qo=void 0,Ke&&hi.trigger(Ro?"ajaxSuccess":"ajaxError",[In,mt,Ro?ld:La]),Si.fireWith(Zt,[In,il]),Ke&&(hi.trigger("ajaxComplete",[In,mt]),--j.active||j.event.trigger("ajaxStop")))}return In},getJSON:function(M,I,K){return j.get(M,I,K,"json")},getScript:function(M,I){return j.get(M,void 0,I,"script")}}),j.each(["get","post"],function(M,I){j[I]=function(K,ne,ae,le){return ie(ne)&&(le=le||ae,ae=ne,ne=void 0),j.ajax(j.extend({url:K,type:I,dataType:le,data:ne,success:ae},j.isPlainObject(K)&&K))}}),j.ajaxPrefilter(function(M){var I;for(I in M.headers)"content-type"===I.toLowerCase()&&(M.contentType=M.headers[I]||"")}),j._evalUrl=function(M,I,K){return j.ajax({url:M,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ne){j.globalEval(ne,I,K)}})},j.fn.extend({wrapAll:function(M){var I;return this[0]&&(ie(M)&&(M=M.call(this[0])),I=j(M,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&I.insertBefore(this[0]),I.map(function(){for(var K=this;K.firstElementChild;)K=K.firstElementChild;return K}).append(this)),this},wrapInner:function(M){return ie(M)?this.each(function(I){j(this).wrapInner(M.call(this,I))}):this.each(function(){var I=j(this),K=I.contents();K.length?K.wrapAll(M):I.append(M)})},wrap:function(M){var I=ie(M);return this.each(function(K){j(this).wrapAll(I?M.call(this,K):M)})},unwrap:function(M){return this.parent(M).not("body").each(function(){j(this).replaceWith(this.childNodes)}),this}}),j.expr.pseudos.hidden=function(M){return!j.expr.pseudos.visible(M)},j.expr.pseudos.visible=function(M){return!!(M.offsetWidth||M.offsetHeight||M.getClientRects().length)},j.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch{}};var Wf={0:200,1223:204},ru=j.ajaxSettings.xhr();V.cors=!!ru&&"withCredentials"in ru,V.ajax=ru=!!ru,j.ajaxTransport(function(M){var I,K;if(V.cors||ru&&!M.crossDomain)return{send:function(ne,ae){var le,ge=M.xhr();if(ge.open(M.type,M.url,M.async,M.username,M.password),M.xhrFields)for(le in M.xhrFields)ge[le]=M.xhrFields[le];for(le in M.mimeType&&ge.overrideMimeType&&ge.overrideMimeType(M.mimeType),!M.crossDomain&&!ne["X-Requested-With"]&&(ne["X-Requested-With"]="XMLHttpRequest"),ne)ge.setRequestHeader(le,ne[le]);I=function(He){return function(){I&&(I=K=ge.onload=ge.onerror=ge.onabort=ge.ontimeout=ge.onreadystatechange=null,"abort"===He?ge.abort():"error"===He?"number"!=typeof ge.status?ae(0,"error"):ae(ge.status,ge.statusText):ae(Wf[ge.status]||ge.status,ge.statusText,"text"!==(ge.responseType||"text")||"string"!=typeof ge.responseText?{binary:ge.response}:{text:ge.responseText},ge.getAllResponseHeaders()))}},ge.onload=I(),K=ge.onerror=ge.ontimeout=I("error"),void 0!==ge.onabort?ge.onabort=K:ge.onreadystatechange=function(){4===ge.readyState&&C.setTimeout(function(){I&&K()})},I=I("abort");try{ge.send(M.hasContent&&M.data||null)}catch(He){if(I)throw He}},abort:function(){I&&I()}}}),j.ajaxPrefilter(function(M){M.crossDomain&&(M.contents.script=!1)}),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(M){return j.globalEval(M),M}}}),j.ajaxPrefilter("script",function(M){void 0===M.cache&&(M.cache=!1),M.crossDomain&&(M.type="GET")}),j.ajaxTransport("script",function(M){var I,K;if(M.crossDomain||M.scriptAttrs)return{send:function(ne,ae){I=j("<script>").attr(M.scriptAttrs||{}).prop({charset:M.scriptCharset,src:M.url}).on("load error",K=function(le){I.remove(),K=null,le&&ae("error"===le.type?404:200,le.type)}),me.head.appendChild(I[0])},abort:function(){K&&K()}}});var M,K1=[],vo=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var M=K1.pop()||j.expando+"_"+H1.guid++;return this[M]=!0,M}}),j.ajaxPrefilter("json jsonp",function(M,I,K){var ne,ae,le,ge=!1!==M.jsonp&&(vo.test(M.url)?"url":"string"==typeof M.data&&0===(M.contentType||"").indexOf("application/x-www-form-urlencoded")&&vo.test(M.data)&&"data");if(ge||"jsonp"===M.dataTypes[0])return ne=M.jsonpCallback=ie(M.jsonpCallback)?M.jsonpCallback():M.jsonpCallback,ge?M[ge]=M[ge].replace(vo,"$1"+ne):!1!==M.jsonp&&(M.url+=(Bg.test(M.url)?"&":"?")+M.jsonp+"="+ne),M.converters["script json"]=function(){return le||j.error(ne+" was not called"),le[0]},M.dataTypes[0]="json",ae=C[ne],C[ne]=function(){le=arguments},K.always(function(){void 0===ae?j(C).removeProp(ne):C[ne]=ae,M[ne]&&(M.jsonpCallback=I.jsonpCallback,K1.push(ne)),le&&ie(ae)&&ae(le[0]),le=ae=void 0}),"script"}),V.createHTMLDocument=((M=me.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===M.childNodes.length),j.parseHTML=function(M,I,K){return"string"!=typeof M?[]:("boolean"==typeof I&&(K=I,I=!1),I||(V.createHTMLDocument?((ne=(I=me.implementation.createHTMLDocument("")).createElement("base")).href=me.location.href,I.head.appendChild(ne)):I=me),le=!K&&[],(ae=fn.exec(M))?[I.createElement(ae[1])]:(ae=Tn([M],I,le),le&&le.length&&j(le).remove(),j.merge([],ae.childNodes)));var ne,ae,le},j.fn.load=function(M,I,K){var ne,ae,le,ge=this,He=M.indexOf(" ");return He>-1&&(ne=Zd(M.slice(He)),M=M.slice(0,He)),ie(I)?(K=I,I=void 0):I&&"object"==typeof I&&(ae="POST"),ge.length>0&&j.ajax({url:M,type:ae||"GET",dataType:"html",data:I}).done(function(Fe){le=arguments,ge.html(ne?j("<div>").append(j.parseHTML(Fe)).find(ne):Fe)}).always(K&&function(Fe,Ke){ge.each(function(){K.apply(this,le||[Fe.responseText,Ke,Fe])})}),this},j.expr.pseudos.animated=function(M){return j.grep(j.timers,function(I){return M===I.elem}).length},j.offset={setOffset:function(M,I,K){var ne,ae,le,ge,He,Fe,Pt=j.css(M,"position"),st=j(M),mt={};"static"===Pt&&(M.style.position="relative"),He=st.offset(),le=j.css(M,"top"),Fe=j.css(M,"left"),("absolute"===Pt||"fixed"===Pt)&&(le+Fe).indexOf("auto")>-1?(ge=(ne=st.position()).top,ae=ne.left):(ge=parseFloat(le)||0,ae=parseFloat(Fe)||0),ie(I)&&(I=I.call(M,K,j.extend({},He))),null!=I.top&&(mt.top=I.top-He.top+ge),null!=I.left&&(mt.left=I.left-He.left+ae),"using"in I?I.using.call(M,mt):st.css(mt)}},j.fn.extend({offset:function(M){if(arguments.length)return void 0===M?this:this.each(function(ae){j.offset.setOffset(this,M,ae)});var I,K,ne=this[0];return ne?ne.getClientRects().length?{top:(I=ne.getBoundingClientRect()).top+(K=ne.ownerDocument.defaultView).pageYOffset,left:I.left+K.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var M,I,K,ne=this[0],ae={top:0,left:0};if("fixed"===j.css(ne,"position"))I=ne.getBoundingClientRect();else{for(I=this.offset(),K=ne.ownerDocument,M=ne.offsetParent||K.documentElement;M&&(M===K.body||M===K.documentElement)&&"static"===j.css(M,"position");)M=M.parentNode;M&&M!==ne&&1===M.nodeType&&((ae=j(M).offset()).top+=j.css(M,"borderTopWidth",!0),ae.left+=j.css(M,"borderLeftWidth",!0))}return{top:I.top-ae.top-j.css(ne,"marginTop",!0),left:I.left-ae.left-j.css(ne,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var M=this.offsetParent;M&&"static"===j.css(M,"position");)M=M.offsetParent;return M||xr})}}),j.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(M,I){var K="pageYOffset"===I;j.fn[M]=function(ne){return Mi(this,function(ae,le,ge){var He;if(pe(ae)?He=ae:9===ae.nodeType&&(He=ae.defaultView),void 0===ge)return He?He[I]:ae[le];He?He.scrollTo(K?He.pageXOffset:ge,K?ge:He.pageYOffset):ae[le]=ge},M,ne,arguments.length)}}),j.each(["top","left"],function(M,I){j.cssHooks[I]=Kd(V.pixelPosition,function(K,ne){if(ne)return ne=ko(K,I),Pi.test(ne)?j(K).position()[I]+"px":ne})}),j.each({Height:"height",Width:"width"},function(M,I){j.each({padding:"inner"+M,content:I,"":"outer"+M},function(K,ne){j.fn[ne]=function(ae,le){var ge=arguments.length&&(K||"boolean"!=typeof ae),He=K||(!0===ae||!0===le?"margin":"border");return Mi(this,function(Fe,Ke,Pt){var st;return pe(Fe)?0===ne.indexOf("outer")?Fe["inner"+M]:Fe.document.documentElement["client"+M]:9===Fe.nodeType?(st=Fe.documentElement,Math.max(Fe.body["scroll"+M],st["scroll"+M],Fe.body["offset"+M],st["offset"+M],st["client"+M])):void 0===Pt?j.css(Fe,Ke,He):j.style(Fe,Ke,Pt,He)},I,ge?ae:void 0,ge)}})}),j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(M,I){j.fn[I]=function(K){return this.on(I,K)}}),j.fn.extend({bind:function(M,I,K){return this.on(M,null,I,K)},unbind:function(M,I){return this.off(M,null,I)},delegate:function(M,I,K,ne){return this.on(I,M,K,ne)},undelegate:function(M,I,K){return 1===arguments.length?this.off(M,"**"):this.off(I,M||"**",K)},hover:function(M,I){return this.on("mouseenter",M).on("mouseleave",I||M)}}),j.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(M,I){j.fn[I]=function(K,ne){return arguments.length>0?this.on(I,null,K,ne):this.trigger(I)}});var Z1=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;j.proxy=function(M,I){var K,ne,ae;if("string"==typeof I&&(K=M[I],I=M,M=K),ie(M))return ne=B.call(arguments,2),ae=function(){return M.apply(I||this,ne.concat(B.call(arguments)))},ae.guid=M.guid=M.guid||j.guid++,ae},j.holdReady=function(M){M?j.readyWait++:j.ready(!0)},j.isArray=Array.isArray,j.parseJSON=JSON.parse,j.nodeName=bt,j.isFunction=ie,j.isWindow=pe,j.camelCase=lr,j.type=je,j.now=Date.now,j.isNumeric=function(M){var I=j.type(M);return("number"===I||"string"===I)&&!isNaN(M-parseFloat(M))},j.trim=function(M){return null==M?"":(M+"").replace(Z1,"$1")},void 0!==(_=function(){return j}.apply(f,[]))&&(u.exports=_);var fx=C.jQuery,xp=C.$;return j.noConflict=function(M){return C.$===j&&(C.$=xp),M&&C.jQuery===j&&(C.jQuery=fx),j},typeof D>"u"&&(C.jQuery=C.$=j),j})},8548:u=>{var f,_;_=function(m,_,C){"use strict";var D,G;if(function(){var Re,ut={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(Re in G=m.lazySizesConfig||m.lazysizesConfig||{},ut)Re in G||(G[Re]=ut[Re])}(),!_||!_.getElementsByClassName)return{init:function(){},cfg:G,noSupport:!0};var Re,ut,Qt,Un,dn,Wt,An,z=_.documentElement,B=m.HTMLPictureElement,Q="addEventListener",T="getAttribute",F=m[Q].bind(m),q=m.setTimeout,R=m.requestAnimationFrame||q,N=m.requestIdleCallback,W=/^picture$/i,k=["load","error","lazyincluded","_lazyloaded"],V={},ie=Array.prototype.forEach,pe=function(Re,ut){return V[ut]||(V[ut]=new RegExp("(\\s|^)"+ut+"(\\s|$)")),V[ut].test(Re[T]("class")||"")&&V[ut]},me=function(Re,ut){pe(Re,ut)||Re.setAttribute("class",(Re[T]("class")||"").trim()+" "+ut)},Ve=function(Re,ut){var Qt;(Qt=pe(Re,ut))&&Re.setAttribute("class",(Re[T]("class")||"").replace(Qt," "))},it=function(Re,ut,Qt){var Un=Qt?Q:"removeEventListener";Qt&&it(Re,ut),k.forEach(function(dn){Re[Un](dn,ut)})},je=function(Re,ut,Qt,Un,dn){var Wt=_.createEvent("Event");return Qt||(Qt={}),Qt.instance=D,Wt.initEvent(ut,!Un,!dn),Wt.detail=Qt,Re.dispatchEvent(Wt),Wt},qe=function(Re,ut){var Qt;!B&&(Qt=m.picturefill||G.pf)?(ut&&ut.src&&!Re[T]("srcset")&&Re.setAttribute("srcset",ut.src),Qt({reevaluate:!0,elements:[Re]})):ut&&ut.src&&(Re.src=ut.src)},ot=function(Re,ut){return(getComputedStyle(Re,null)||{})[ut]},j=function(Re,ut,Qt){for(Qt=Qt||Re.offsetWidth;Qt<G.minSize&&ut&&!Re._lazysizesWidth;)Qt=ut.offsetWidth,ut=ut.parentNode;return Qt},Ie=(Un=[],dn=Qt=[],An=function(fn,Fn){Re&&!Fn?fn.apply(this,arguments):(dn.push(fn),ut||(ut=!0,(_.hidden?q:R)(Wt)))},An._lsFlush=Wt=function(){var fn=dn;for(dn=Qt.length?Un:Qt,Re=!0,ut=!1;fn.length;)fn.shift()();Re=!1},An),bt=function(Re,ut){return ut?function(){Ie(Re)}:function(){var Qt=this,Un=arguments;Ie(function(){Re.apply(Qt,Un)})}},Ct=function(Re){var ut,Qt,dn=function(){ut=null,Re()},Wt=function(){var An=C.now()-Qt;An<99?q(Wt,99-An):(N||dn)(dn)};return function(){Qt=C.now(),ut||(ut=q(Wt,99))}},Yt=function(){var Re,ut,Qt,Un,dn,Wt,An,fn,Fn,ft,Wn,Cn,tr=/^img$/i,sr=/^iframe$/i,li="onscroll"in m&&!/(gle|ing)bot/.test(navigator.userAgent),Li=0,Vi=0,gr=-1,mo=function(mn){Vi--,(!mn||Vi<0||!mn.target)&&(Vi=0)},ao=function(mn){return null==Cn&&(Cn="hidden"==ot(_.body,"visibility")),Cn||!("hidden"==ot(mn.parentNode,"visibility")&&"hidden"==ot(mn,"visibility"))},lo=function(mn,Jn){var qi,Yn=mn,ur=ao(mn);for(fn-=Jn,Wn+=Jn,Fn-=Jn,ft+=Jn;ur&&(Yn=Yn.offsetParent)&&Yn!=_.body&&Yn!=z;)(ur=(ot(Yn,"opacity")||1)>0)&&"visible"!=ot(Yn,"overflow")&&(qi=Yn.getBoundingClientRect(),ur=ft>qi.left&&Fn<qi.right&&Wn>qi.top-1&&fn<qi.bottom+1);return ur},bn=function(){var mn,Jn,qi,Yn,ur,xr,ho,As,Qr,Go,ka,oi,Oo=D.elements;if((Un=G.loadMode)&&Vi<8&&(mn=Oo.length)){for(Jn=0,gr++;Jn<mn;Jn++)if(Oo[Jn]&&!Oo[Jn]._lazyRace){if(!li||D.prematureUnveil&&D.prematureUnveil(Oo[Jn])){Sn(Oo[Jn]);continue}if((!(As=Oo[Jn][T]("data-expand"))||!(xr=1*As))&&(xr=Li),Go||(D._defEx=Go=!G.expand||G.expand<1?z.clientHeight>500&&z.clientWidth>500?500:370:G.expand,oi=G.hFac,Cn=null,Li<(ka=Go*G.expFactor)&&Vi<1&&gr>2&&Un>2&&!_.hidden?(Li=ka,gr=0):Li=Un>1&&gr>1&&Vi<6?Go:0),Qr!==xr&&(Wt=innerWidth+xr*oi,An=innerHeight+xr,ho=-1*xr,Qr=xr),qi=Oo[Jn].getBoundingClientRect(),(Wn=qi.bottom)>=ho&&(fn=qi.top)<=An&&(ft=qi.right)>=ho*oi&&(Fn=qi.left)<=Wt&&(Wn||ft||Fn||fn)&&(G.loadHidden||ao(Oo[Jn]))&&(ut&&Vi<3&&!As&&(Un<3||gr<4)||lo(Oo[Jn],xr))){if(Sn(Oo[Jn]),ur=!0,Vi>9)break}else!ur&&ut&&!Yn&&Vi<4&&gr<4&&Un>2&&(Re[0]||G.preloadAfterLoad)&&(Re[0]||!As&&(Wn||ft||Fn||fn||"auto"!=Oo[Jn][T](G.sizesAttr)))&&(Yn=Re[0]||Oo[Jn])}Yn&&!ur&&Sn(Yn)}},Mi=function(Re){var ut,Qt=0,Un=G.throttleDelay,dn=G.ricTimeout,Wt=function(){ut=!1,Qt=C.now(),Re()},An=N&&dn>49?function(){N(Wt,{timeout:dn}),dn!==G.ricTimeout&&(dn=G.ricTimeout)}:bt(function(){q(Wt)},!0);return function(fn){var Fn;(fn=!0===fn)&&(dn=33),!ut&&(ut=!0,(Fn=Un-(C.now()-Qt))<0&&(Fn=0),fn||Fn<9?An():q(An,Fn))}}(bn),Lo=function(mn){var Jn=mn.target;Jn._lazyCache?delete Jn._lazyCache:(mo(mn),me(Jn,G.loadedClass),Ve(Jn,G.loadingClass),it(Jn,co),je(Jn,"lazyloaded"))},Xi=bt(Lo),co=function(mn){Xi({target:mn.target})},Dr=function(mn){var Jn,qi=mn[T](G.srcsetAttr);(Jn=G.customMedia[mn[T]("data-media")||mn[T]("media")])&&mn.setAttribute("media",Jn),qi&&mn.setAttribute("srcset",qi)},Mr=bt(function(mn,Jn,qi,Yn,ur){var xr,ho,As,Qr,Go,ka;(Go=je(mn,"lazybeforeunveil",Jn)).defaultPrevented||(Yn&&(qi?me(mn,G.autosizesClass):mn.setAttribute("sizes",Yn)),ho=mn[T](G.srcsetAttr),xr=mn[T](G.srcAttr),ur&&(Qr=(As=mn.parentNode)&&W.test(As.nodeName||"")),ka=Jn.firesLoad||"src"in mn&&(ho||xr||Qr),Go={target:mn},me(mn,G.loadingClass),ka&&(clearTimeout(Qt),Qt=q(mo,2500),it(mn,co,!0)),Qr&&ie.call(As.getElementsByTagName("source"),Dr),ho?mn.setAttribute("srcset",ho):xr&&!Qr&&(sr.test(mn.nodeName)?function(mn,Jn){var qi=mn.getAttribute("data-load-mode")||G.iframeLoadMode;0==qi?mn.contentWindow.location.replace(Jn):1==qi&&(mn.src=Jn)}(mn,xr):mn.src=xr),ur&&(ho||Qr)&&qe(mn,{src:xr})),mn._lazyRace&&delete mn._lazyRace,Ve(mn,G.lazyClass),Ie(function(){var oi=mn.complete&&mn.naturalWidth>1;(!ka||oi)&&(oi&&me(mn,G.fastLoadedClass),Lo(Go),mn._lazyCache=!0,q(function(){"_lazyCache"in mn&&delete mn._lazyCache},9)),"lazy"==mn.loading&&Vi--},!0)}),Sn=function(mn){if(!mn._lazyRace){var Jn,qi=tr.test(mn.nodeName),Yn=qi&&(mn[T](G.sizesAttr)||mn[T]("sizes")),ur="auto"==Yn;(ur||!ut)&&qi&&(mn[T]("src")||mn.srcset)&&!mn.complete&&!pe(mn,G.errorClass)&&pe(mn,G.lazyClass)||(Jn=je(mn,"lazyunveilread").detail,ur&&on.updateElem(mn,!0,mn.offsetWidth),mn._lazyRace=!0,Vi++,Mr(mn,Jn,ur,Yn,qi))}},Ar=Ct(function(){G.loadMode=3,Mi()}),So=function(){3==G.loadMode&&(G.loadMode=2),Ar()},Gi=function(){if(!ut){if(C.now()-dn<999)return void q(Gi,999);ut=!0,G.loadMode=3,Mi(),F("scroll",So,!0)}};return{_:function(){dn=C.now(),D.elements=_.getElementsByClassName(G.lazyClass),Re=_.getElementsByClassName(G.lazyClass+" "+G.preloadClass),F("scroll",Mi,!0),F("resize",Mi,!0),F("pageshow",function(mn){if(mn.persisted){var Jn=_.querySelectorAll("."+G.loadingClass);Jn.length&&Jn.forEach&&R(function(){Jn.forEach(function(qi){qi.complete&&Sn(qi)})})}}),m.MutationObserver?new MutationObserver(Mi).observe(z,{childList:!0,subtree:!0,attributes:!0}):(z[Q]("DOMNodeInserted",Mi,!0),z[Q]("DOMAttrModified",Mi,!0),setInterval(Mi,999)),F("hashchange",Mi,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(mn){_[Q](mn,Mi,!0)}),/d$|^c/.test(_.readyState)?Gi():(F("load",Gi),_[Q]("DOMContentLoaded",Mi),q(Gi,2e4)),D.elements.length?(bn(),Ie._lsFlush()):Mi()},checkElems:Mi,unveil:Sn,_aLSL:So}}(),on=function(){var Re,ut=bt(function(Wt,An,fn,Fn){var ft,Wn,Cn;if(Wt._lazysizesWidth=Fn,Wt.setAttribute("sizes",Fn+="px"),W.test(An.nodeName||""))for(Wn=0,Cn=(ft=An.getElementsByTagName("source")).length;Wn<Cn;Wn++)ft[Wn].setAttribute("sizes",Fn);fn.detail.dataAttr||qe(Wt,fn.detail)}),Qt=function(Wt,An,fn){var Fn,ft=Wt.parentNode;ft&&(fn=j(Wt,ft,fn),(Fn=je(Wt,"lazybeforesizes",{width:fn,dataAttr:!!An})).defaultPrevented||(fn=Fn.detail.width)&&fn!==Wt._lazysizesWidth&&ut(Wt,ft,Fn,fn))},dn=Ct(function(){var Wt,An=Re.length;if(An)for(Wt=0;Wt<An;Wt++)Qt(Re[Wt])});return{_:function(){Re=_.getElementsByClassName(G.autosizesClass),F("resize",dn)},checkElems:dn,updateElem:Qt}}(),pt=function(){!pt.i&&_.getElementsByClassName&&(pt.i=!0,on._(),Yt._())};return q(function(){G.init&&pt()}),D={cfg:G,autoSizer:on,loader:Yt,init:pt,uP:qe,aC:me,rC:Ve,hC:pe,fire:je,gW:j,rAF:Ie}}(f=typeof window<"u"?window:{},f.document,Date),f.lazySizes=_,u.exports&&(u.exports=_)},2181:(u,f,m)=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});var _=m(5186),C=m(1973);_.Observable.prototype.filter=C.filter},1973:(u,f,m)=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});var _=m(8732);f.filter=function C(D,G){return _.filter(D,G)(this)}},5186:(u,f,m)=>{"use strict";m.r(f),m.d(f,{ArgumentOutOfRangeError:()=>Ct.W,AsyncSubject:()=>T.c,BehaviorSubject:()=>B.X,ConnectableObservable:()=>C.c,EMPTY:()=>Li.E,EmptyError:()=>Yt.K,GroupedObservable:()=>D.T,NEVER:()=>Mr.C,Notification:()=>ot.P,NotificationKind:()=>ot.W,ObjectUnsubscribedError:()=>on.N,Observable:()=>_.y,ReplaySubject:()=>Q.t,Scheduler:()=>it.b,Subject:()=>z.xQ,Subscriber:()=>qe.L,Subscription:()=>je.w,TimeoutError:()=>Re.W,UnsubscriptionError:()=>pt.B,VirtualAction:()=>Ve,VirtualTimeScheduler:()=>me,animationFrame:()=>pe,animationFrameScheduler:()=>ie,asap:()=>F.e,asapScheduler:()=>F.E,async:()=>q.P,asyncScheduler:()=>q.z,bindCallback:()=>Wt,bindNodeCallback:()=>ft,combineLatest:()=>sr.aj,concat:()=>li.z,config:()=>Oo.v,defer:()=>$t.P,empty:()=>Li.c,forkJoin:()=>Vi.D,from:()=>gr.D,fromEvent:()=>mo.R,fromEventPattern:()=>lo,generate:()=>bn,identity:()=>bt.y,iif:()=>Lo,interval:()=>co,isObservable:()=>vt,merge:()=>Dr.T,never:()=>Mr.F,noop:()=>Ie.Z,observable:()=>G.L,of:()=>Sn.of,onErrorResumeNext:()=>Ar,pairs:()=>So,partition:()=>Yn,pipe:()=>j.z,queue:()=>R.c,queueScheduler:()=>R.N,race:()=>ur.S3,range:()=>xr,scheduled:()=>oi.x,throwError:()=>As._,timer:()=>Qr.H,using:()=>Go,zip:()=>ka.$R});var _=m(4202),C=m(1762),D=m(4002),G=m(3821),z=m(8929),B=m(591),Q=m(839),T=m(2185),F=m(8139),q=m(353),R=m(341),N=m(6686),k=m(198);const ie=new class V extends k.v{flush(kt){this.active=!0,this.scheduled=void 0;const{actions:Mt}=this;let Kt,rn=-1,Et=Mt.length;kt=kt||Mt.shift();do{if(Kt=kt.execute(kt.state,kt.delay))break}while(++rn<Et&&(kt=Mt.shift()));if(this.active=!1,Kt){for(;++rn<Et&&(kt=Mt.shift());)kt.unsubscribe();throw Kt}}}(class W extends N.o{constructor(kt,Mt){super(kt,Mt),this.scheduler=kt,this.work=Mt}requestAsyncId(kt,Mt,Kt=0){return null!==Kt&&Kt>0?super.requestAsyncId(kt,Mt,Kt):(kt.actions.push(this),kt.scheduled||(kt.scheduled=requestAnimationFrame(()=>kt.flush(null))))}recycleAsyncId(kt,Mt,Kt=0){if(null!==Kt&&Kt>0||null===Kt&&this.delay>0)return super.recycleAsyncId(kt,Mt,Kt);0===kt.actions.length&&(cancelAnimationFrame(Mt),kt.scheduled=void 0)}}),pe=ie;let me=(()=>{class nn extends k.v{constructor(Mt=Ve,Kt=Number.POSITIVE_INFINITY){super(Mt,()=>this.frame),this.maxFrames=Kt,this.frame=0,this.index=-1}flush(){const{actions:Mt,maxFrames:Kt}=this;let rn,Et;for(;(Et=Mt[0])&&Et.delay<=Kt&&(Mt.shift(),this.frame=Et.delay,!(rn=Et.execute(Et.state,Et.delay))););if(rn){for(;Et=Mt.shift();)Et.unsubscribe();throw rn}}}return nn.frameTimeFactor=10,nn})();class Ve extends N.o{constructor(kt,Mt,Kt=(kt.index+=1)){super(kt,Mt),this.scheduler=kt,this.work=Mt,this.index=Kt,this.active=!0,this.index=kt.index=Kt}schedule(kt,Mt=0){if(!this.id)return super.schedule(kt,Mt);this.active=!1;const Kt=new Ve(this.scheduler,this.work);return this.add(Kt),Kt.schedule(kt,Mt)}requestAsyncId(kt,Mt,Kt=0){this.delay=kt.frame+Kt;const{actions:rn}=kt;return rn.push(this),rn.sort(Ve.sortActions),!0}recycleAsyncId(kt,Mt,Kt=0){}_execute(kt,Mt){if(!0===this.active)return super._execute(kt,Mt)}static sortActions(kt,Mt){return kt.delay===Mt.delay?kt.index===Mt.index?0:kt.index>Mt.index?1:-1:kt.delay>Mt.delay?1:-1}}var it=m(2221),je=m(4096),qe=m(3489),ot=m(9312),j=m(4843),Ie=m(7876),bt=m(5379);function vt(nn){return!!nn&&(nn instanceof _.y||"function"==typeof nn.lift&&"function"==typeof nn.subscribe)}var Ct=m(4231),Yt=m(4450),on=m(5279),pt=m(7964),Re=m(854),ut=m(4850),Qt=m(9476),Un=m(6688),dn=m(2866);function Wt(nn,kt,Mt){if(kt){if(!(0,dn.K)(kt))return(...Kt)=>Wt(nn,Mt)(...Kt).pipe((0,ut.U)(rn=>(0,Un.k)(rn)?kt(...rn):kt(rn)));Mt=kt}return function(...Kt){const rn=this;let Et;const ki={context:rn,subject:Et,callbackFunc:nn,scheduler:Mt};return new _.y(Tn=>{if(Mt)return Mt.schedule(An,0,{args:Kt,subscriber:Tn,params:ki});if(!Et){Et=new T.c;const $i=(...gi)=>{Et.next(gi.length<=1?gi[0]:gi),Et.complete()};try{nn.apply(rn,[...Kt,$i])}catch(gi){(0,Qt._)(Et)?Et.error(gi):console.warn(gi)}}return Et.subscribe(Tn)})}}function An(nn){const{args:Mt,subscriber:Kt,params:rn}=nn,{callbackFunc:Et,context:ki,scheduler:Tn}=rn;let{subject:$i}=rn;if(!$i){$i=rn.subject=new T.c;const gi=(...cr)=>{this.add(Tn.schedule(fn,0,{value:cr.length<=1?cr[0]:cr,subject:$i}))};try{Et.apply(ki,[...Mt,gi])}catch(cr){$i.error(cr)}}this.add($i.subscribe(Kt))}function fn(nn){const{value:kt,subject:Mt}=nn;Mt.next(kt),Mt.complete()}function ft(nn,kt,Mt){if(kt){if(!(0,dn.K)(kt))return(...Kt)=>ft(nn,Mt)(...Kt).pipe((0,ut.U)(rn=>(0,Un.k)(rn)?kt(...rn):kt(rn)));Mt=kt}return function(...Kt){const rn={subject:void 0,args:Kt,callbackFunc:nn,scheduler:Mt,context:this};return new _.y(Et=>{const{context:ki}=rn;let{subject:Tn}=rn;if(Mt)return Mt.schedule(Wn,0,{params:rn,subscriber:Et,context:ki});if(!Tn){Tn=rn.subject=new T.c;const $i=(...gi)=>{const cr=gi.shift();cr?Tn.error(cr):(Tn.next(gi.length<=1?gi[0]:gi),Tn.complete())};try{nn.apply(ki,[...Kt,$i])}catch(gi){(0,Qt._)(Tn)?Tn.error(gi):console.warn(gi)}}return Tn.subscribe(Et)})}}function Wn(nn){const{params:kt,subscriber:Mt,context:Kt}=nn,{callbackFunc:rn,args:Et,scheduler:ki}=kt;let Tn=kt.subject;if(!Tn){Tn=kt.subject=new T.c;const $i=(...gi)=>{const cr=gi.shift();this.add(cr?ki.schedule(tr,0,{err:cr,subject:Tn}):ki.schedule(Cn,0,{value:gi.length<=1?gi[0]:gi,subject:Tn}))};try{rn.apply(Kt,[...Et,$i])}catch(gi){this.add(ki.schedule(tr,0,{err:gi,subject:Tn}))}}this.add(Tn.subscribe(Mt))}function Cn(nn){const{value:kt,subject:Mt}=nn;Mt.next(kt),Mt.complete()}function tr(nn){const{err:kt,subject:Mt}=nn;Mt.error(kt)}var sr=m(6053),li=m(1961),$t=m(8514),Li=m(8896),Vi=m(567),gr=m(3527),mo=m(3753),ao=m(7043);function lo(nn,kt,Mt){return Mt?lo(nn,kt).pipe((0,ut.U)(Kt=>(0,Un.k)(Kt)?Mt(...Kt):Mt(Kt))):new _.y(Kt=>{const rn=(...ki)=>Kt.next(1===ki.length?ki[0]:ki);let Et;try{Et=nn(rn)}catch(ki){return void Kt.error(ki)}if((0,ao.m)(kt))return()=>kt(rn,Et)})}function bn(nn,kt,Mt,Kt,rn){let Et,ki;return 1==arguments.length?(ki=nn.initialState,kt=nn.condition,Mt=nn.iterate,Et=nn.resultSelector||bt.y,rn=nn.scheduler):void 0===Kt||(0,dn.K)(Kt)?(ki=nn,Et=bt.y,rn=Kt):(ki=nn,Et=Kt),new _.y(Tn=>{let $i=ki;if(rn)return rn.schedule(Mi,0,{subscriber:Tn,iterate:Mt,condition:kt,resultSelector:Et,state:$i});for(;;){if(kt){let cr;try{cr=kt($i)}catch(Eo){return void Tn.error(Eo)}if(!cr){Tn.complete();break}}let gi;try{gi=Et($i)}catch(cr){return void Tn.error(cr)}if(Tn.next(gi),Tn.closed)break;try{$i=Mt($i)}catch(cr){return void Tn.error(cr)}}})}function Mi(nn){const{subscriber:kt,condition:Mt}=nn;if(kt.closed)return;if(nn.needIterate)try{nn.state=nn.iterate(nn.state)}catch(rn){return void kt.error(rn)}else nn.needIterate=!0;if(Mt){let rn;try{rn=Mt(nn.state)}catch(Et){return void kt.error(Et)}if(!rn)return void kt.complete();if(kt.closed)return}let Kt;try{Kt=nn.resultSelector(nn.state)}catch(rn){return void kt.error(rn)}return kt.closed||(kt.next(Kt),kt.closed)?void 0:this.schedule(nn)}function Lo(nn,kt=Li.E,Mt=Li.E){return(0,$t.P)(()=>nn()?kt:Mt)}var Xi=m(4241);function co(nn=0,kt=q.P){return(!(0,Xi.k)(nn)||nn<0)&&(nn=0),(!kt||"function"!=typeof kt.schedule)&&(kt=q.P),new _.y(Mt=>(Mt.add(kt.schedule(lr,nn,{subscriber:Mt,counter:0,period:nn})),Mt))}function lr(nn){const{subscriber:kt,counter:Mt,period:Kt}=nn;kt.next(Mt),this.schedule({subscriber:kt,counter:Mt+1,period:Kt},Kt)}var Dr=m(6787),Mr=m(7274),Sn=m(1086);function Ar(...nn){if(0===nn.length)return Li.E;const[kt,...Mt]=nn;return 1===nn.length&&(0,Un.k)(kt)?Ar(...kt):new _.y(Kt=>{const rn=()=>Kt.add(Ar(...Mt).subscribe(Kt));return(0,gr.D)(kt).subscribe({next(Et){Kt.next(Et)},error:rn,complete:rn})})}function So(nn,kt){return new _.y(kt?Mt=>{const Kt=Object.keys(nn),rn=new je.w;return rn.add(kt.schedule(Gi,0,{keys:Kt,index:0,subscriber:Mt,subscription:rn,obj:nn})),rn}:Mt=>{const Kt=Object.keys(nn);for(let rn=0;rn<Kt.length&&!Mt.closed;rn++){const Et=Kt[rn];nn.hasOwnProperty(Et)&&Mt.next([Et,nn[Et]])}Mt.complete()})}function Gi(nn){const{keys:kt,index:Mt,subscriber:Kt,subscription:rn,obj:Et}=nn;if(!Kt.closed)if(Mt<kt.length){const ki=kt[Mt];Kt.next([ki,Et[ki]]),rn.add(this.schedule({keys:kt,index:Mt+1,subscriber:Kt,subscription:rn,obj:Et}))}else Kt.complete()}var mn=m(5884),Jn=m(9249),qi=m(2198);function Yn(nn,kt,Mt){return[(0,qi.h)(kt,Mt)(new _.y((0,Jn.s)(nn))),(0,qi.h)((0,mn.f)(kt,Mt))(new _.y((0,Jn.s)(nn)))]}var ur=m(1946);function xr(nn=0,kt,Mt){return new _.y(Kt=>{void 0===kt&&(kt=nn,nn=0);let rn=0,Et=nn;if(Mt)return Mt.schedule(ho,0,{index:rn,count:kt,start:nn,subscriber:Kt});for(;;){if(rn++>=kt){Kt.complete();break}if(Kt.next(Et++),Kt.closed)break}})}function ho(nn){const{start:kt,index:Mt,count:Kt,subscriber:rn}=nn;Mt>=Kt?rn.complete():(rn.next(kt),!rn.closed&&(nn.index=Mt+1,nn.start=kt+1,this.schedule(nn)))}var As=m(1737),Qr=m(8723);function Go(nn,kt){return new _.y(Mt=>{let Kt,rn;try{Kt=nn()}catch(Tn){return void Mt.error(Tn)}try{rn=kt(Kt)}catch(Tn){return void Mt.error(Tn)}const ki=(rn?(0,gr.D)(rn):Li.E).subscribe(Mt);return()=>{ki.unsubscribe(),Kt&&Kt.unsubscribe()}})}var ka=m(1746),oi=m(3998),Oo=m(2830)},2185:(u,f,m)=>{"use strict";m.d(f,{c:()=>D});var _=m(8929),C=m(4096);class D extends _.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(z){return this.hasError?(z.error(this.thrownError),C.w.EMPTY):this.hasCompleted&&this.hasNext?(z.next(this.value),z.complete(),C.w.EMPTY):super._subscribe(z)}next(z){this.hasCompleted||(this.value=z,this.hasNext=!0)}error(z){this.hasCompleted||super.error(z)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},591:(u,f,m)=>{"use strict";m.d(f,{X:()=>D});var _=m(8929),C=m(5279);class D extends _.xQ{constructor(z){super(),this._value=z}get value(){return this.getValue()}_subscribe(z){const B=super._subscribe(z);return B&&!B.closed&&z.next(this._value),B}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C.N;return this._value}next(z){super.next(this._value=z)}}},9312:(u,f,m)=>{"use strict";m.d(f,{P:()=>z,W:()=>G});var _=m(8896),C=m(1086),D=m(1737),G=(()=>{return(B=G||(G={})).NEXT="N",B.ERROR="E",B.COMPLETE="C",G;var B})();class z{constructor(Q,T,F){this.kind=Q,this.value=T,this.error=F,this.hasValue="N"===Q}observe(Q){switch(this.kind){case"N":return Q.next&&Q.next(this.value);case"E":return Q.error&&Q.error(this.error);case"C":return Q.complete&&Q.complete()}}do(Q,T,F){switch(this.kind){case"N":return Q&&Q(this.value);case"E":return T&&T(this.error);case"C":return F&&F()}}accept(Q,T,F){return Q&&"function"==typeof Q.next?this.observe(Q):this.do(Q,T,F)}toObservable(){switch(this.kind){case"N":return(0,C.of)(this.value);case"E":return(0,D._)(this.error);case"C":return(0,_.c)()}throw new Error("unexpected notification kind value")}static createNext(Q){return typeof Q<"u"?new z("N",Q):z.undefinedValueNotification}static createError(Q){return new z("E",void 0,Q)}static createComplete(){return z.completeNotification}}z.completeNotification=new z("C"),z.undefinedValueNotification=new z("N",void 0)},4202:(u,f,m)=>{"use strict";m.d(f,{y:()=>F});var _=m(9476),C=m(3489),D=m(7668),G=m(3292),B=m(3821),Q=m(4843),T=m(2830);let F=(()=>{class R{constructor(W){this._isScalar=!1,W&&(this._subscribe=W)}lift(W){const k=new R;return k.source=this,k.operator=W,k}subscribe(W,k,V){const{operator:ie}=this,pe=function z(R,N,W){if(R){if(R instanceof C.L)return R;if(R[D.b])return R[D.b]()}return R||N||W?new C.L(R,N,W):new C.L(G.c)}(W,k,V);if(pe.add(ie?ie.call(pe,this.source):this.source||T.v.useDeprecatedSynchronousErrorHandling&&!pe.syncErrorThrowable?this._subscribe(pe):this._trySubscribe(pe)),T.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable&&(pe.syncErrorThrowable=!1,pe.syncErrorThrown))throw pe.syncErrorValue;return pe}_trySubscribe(W){try{return this._subscribe(W)}catch(k){T.v.useDeprecatedSynchronousErrorHandling&&(W.syncErrorThrown=!0,W.syncErrorValue=k),(0,_._)(W)?W.error(k):console.warn(k)}}forEach(W,k){return new(k=q(k))((V,ie)=>{let pe;pe=this.subscribe(me=>{try{W(me)}catch(Ve){ie(Ve),pe&&pe.unsubscribe()}},ie,V)})}_subscribe(W){const{source:k}=this;return k&&k.subscribe(W)}[B.L](){return this}pipe(...W){return 0===W.length?this:(0,Q.U)(W)(this)}toPromise(W){return new(W=q(W))((k,V)=>{let ie;this.subscribe(pe=>ie=pe,pe=>V(pe),()=>k(ie))})}}return R.create=N=>new R(N),R})();function q(R){if(R||(R=T.v.Promise||Promise),!R)throw new Error("no Promise impl found");return R}},3292:(u,f,m)=>{"use strict";m.d(f,{c:()=>D});var _=m(2830),C=m(2782);const D={closed:!0,next(G){},error(G){if(_.v.useDeprecatedSynchronousErrorHandling)throw G;(0,C.z)(G)},complete(){}}},826:(u,f,m)=>{"use strict";m.d(f,{L:()=>C});var _=m(3489);class C extends _.L{notifyNext(G,z,B,Q,T){this.destination.next(z)}notifyError(G,z){this.destination.error(G)}notifyComplete(G){this.destination.complete()}}},839:(u,f,m)=>{"use strict";m.d(f,{t:()=>Q});var _=m(8929),C=m(341),D=m(4096),G=m(7770),z=m(5279),B=m(5283);class Q extends _.xQ{constructor(q=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,N){super(),this.scheduler=N,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=q<1?1:q,this._windowTime=R<1?1:R,R===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(q){if(!this.isStopped){const R=this._events;R.push(q),R.length>this._bufferSize&&R.shift()}super.next(q)}nextTimeWindow(q){this.isStopped||(this._events.push(new T(this._getNow(),q)),this._trimBufferThenGetEvents()),super.next(q)}_subscribe(q){const R=this._infiniteTimeWindow,N=R?this._events:this._trimBufferThenGetEvents(),W=this.scheduler,k=N.length;let V;if(this.closed)throw new z.N;if(this.isStopped||this.hasError?V=D.w.EMPTY:(this.observers.push(q),V=new B.W(this,q)),W&&q.add(q=new G.ht(q,W)),R)for(let ie=0;ie<k&&!q.closed;ie++)q.next(N[ie]);else for(let ie=0;ie<k&&!q.closed;ie++)q.next(N[ie].value);return this.hasError?q.error(this.thrownError):this.isStopped&&q.complete(),V}_getNow(){return(this.scheduler||C.c).now()}_trimBufferThenGetEvents(){const q=this._getNow(),R=this._bufferSize,N=this._windowTime,W=this._events,k=W.length;let V=0;for(;V<k&&!(q-W[V].time<N);)V++;return k>R&&(V=Math.max(V,k-R)),V>0&&W.splice(0,V),W}}class T{constructor(q,R){this.time=q,this.value=R}}},2221:(u,f,m)=>{"use strict";m.d(f,{b:()=>_});let _=(()=>{class C{constructor(G,z=C.now){this.SchedulerAction=G,this.now=z}schedule(G,z=0,B){return new this.SchedulerAction(this,G).schedule(B,z)}}return C.now=()=>Date.now(),C})()},8929:(u,f,m)=>{"use strict";m.d(f,{Yc:()=>Q,xQ:()=>T});var _=m(4202),C=m(3489),D=m(4096),G=m(5279),z=m(5283),B=m(7668);class Q extends C.L{constructor(R){super(R),this.destination=R}}let T=(()=>{class q extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[B.b](){return new Q(this)}lift(N){const W=new F(this,this);return W.operator=N,W}next(N){if(this.closed)throw new G.N;if(!this.isStopped){const{observers:W}=this,k=W.length,V=W.slice();for(let ie=0;ie<k;ie++)V[ie].next(N)}}error(N){if(this.closed)throw new G.N;this.hasError=!0,this.thrownError=N,this.isStopped=!0;const{observers:W}=this,k=W.length,V=W.slice();for(let ie=0;ie<k;ie++)V[ie].error(N);this.observers.length=0}complete(){if(this.closed)throw new G.N;this.isStopped=!0;const{observers:N}=this,W=N.length,k=N.slice();for(let V=0;V<W;V++)k[V].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(N){if(this.closed)throw new G.N;return super._trySubscribe(N)}_subscribe(N){if(this.closed)throw new G.N;return this.hasError?(N.error(this.thrownError),D.w.EMPTY):this.isStopped?(N.complete(),D.w.EMPTY):(this.observers.push(N),new z.W(this,N))}asObservable(){const N=new _.y;return N.source=this,N}}return q.create=(R,N)=>new F(R,N),q})();class F extends T{constructor(R,N){super(),this.destination=R,this.source=N}next(R){const{destination:N}=this;N&&N.next&&N.next(R)}error(R){const{destination:N}=this;N&&N.error&&this.destination.error(R)}complete(){const{destination:R}=this;R&&R.complete&&this.destination.complete()}_subscribe(R){const{source:N}=this;return N?this.source.subscribe(R):D.w.EMPTY}}},5283:(u,f,m)=>{"use strict";m.d(f,{W:()=>C});var _=m(4096);class C extends _.w{constructor(G,z){super(),this.subject=G,this.subscriber=z,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const G=this.subject,z=G.observers;if(this.subject=null,!z||0===z.length||G.isStopped||G.closed)return;const B=z.indexOf(this.subscriber);-1!==B&&z.splice(B,1)}}},3489:(u,f,m)=>{"use strict";m.d(f,{L:()=>Q});var _=m(7043),C=m(3292),D=m(4096),G=m(7668),z=m(2830),B=m(2782);class Q extends D.w{constructor(q,R,N){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=C.c;break;case 1:if(!q){this.destination=C.c;break}if("object"==typeof q){q instanceof Q?(this.syncErrorThrowable=q.syncErrorThrowable,this.destination=q,q.add(this)):(this.syncErrorThrowable=!0,this.destination=new T(this,q));break}default:this.syncErrorThrowable=!0,this.destination=new T(this,q,R,N)}}[G.b](){return this}static create(q,R,N){const W=new Q(q,R,N);return W.syncErrorThrowable=!1,W}next(q){this.isStopped||this._next(q)}error(q){this.isStopped||(this.isStopped=!0,this._error(q))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(q){this.destination.next(q)}_error(q){this.destination.error(q),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:q}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=q,this}}class T extends Q{constructor(q,R,N,W){super(),this._parentSubscriber=q;let k,V=this;(0,_.m)(R)?k=R:R&&(k=R.next,N=R.error,W=R.complete,R!==C.c&&(V=Object.create(R),(0,_.m)(V.unsubscribe)&&this.add(V.unsubscribe.bind(V)),V.unsubscribe=this.unsubscribe.bind(this))),this._context=V,this._next=k,this._error=N,this._complete=W}next(q){if(!this.isStopped&&this._next){const{_parentSubscriber:R}=this;z.v.useDeprecatedSynchronousErrorHandling&&R.syncErrorThrowable?this.__tryOrSetError(R,this._next,q)&&this.unsubscribe():this.__tryOrUnsub(this._next,q)}}error(q){if(!this.isStopped){const{_parentSubscriber:R}=this,{useDeprecatedSynchronousErrorHandling:N}=z.v;if(this._error)N&&R.syncErrorThrowable?(this.__tryOrSetError(R,this._error,q),this.unsubscribe()):(this.__tryOrUnsub(this._error,q),this.unsubscribe());else if(R.syncErrorThrowable)N?(R.syncErrorValue=q,R.syncErrorThrown=!0):(0,B.z)(q),this.unsubscribe();else{if(this.unsubscribe(),N)throw q;(0,B.z)(q)}}}complete(){if(!this.isStopped){const{_parentSubscriber:q}=this;if(this._complete){const R=()=>this._complete.call(this._context);z.v.useDeprecatedSynchronousErrorHandling&&q.syncErrorThrowable?(this.__tryOrSetError(q,R),this.unsubscribe()):(this.__tryOrUnsub(R),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(q,R){try{q.call(this._context,R)}catch(N){if(this.unsubscribe(),z.v.useDeprecatedSynchronousErrorHandling)throw N;(0,B.z)(N)}}__tryOrSetError(q,R,N){if(!z.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{R.call(this._context,N)}catch(W){return z.v.useDeprecatedSynchronousErrorHandling?(q.syncErrorValue=W,q.syncErrorThrown=!0,!0):((0,B.z)(W),!0)}return!1}_unsubscribe(){const{_parentSubscriber:q}=this;this._context=null,this._parentSubscriber=null,q.unsubscribe()}}},4096:(u,f,m)=>{"use strict";m.d(f,{w:()=>z});var Q,_=m(6688),C=m(7830),D=m(7043),G=m(7964);class z{constructor(T){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,T&&(this._ctorUnsubscribe=!0,this._unsubscribe=T)}unsubscribe(){let T;if(this.closed)return;let{_parentOrParents:F,_ctorUnsubscribe:q,_unsubscribe:R,_subscriptions:N}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,F instanceof z)F.remove(this);else if(null!==F)for(let W=0;W<F.length;++W)F[W].remove(this);if((0,D.m)(R)){q&&(this._unsubscribe=void 0);try{R.call(this)}catch(W){T=W instanceof G.B?B(W.errors):[W]}}if((0,_.k)(N)){let W=-1,k=N.length;for(;++W<k;){const V=N[W];if((0,C.K)(V))try{V.unsubscribe()}catch(ie){T=T||[],ie instanceof G.B?T=T.concat(B(ie.errors)):T.push(ie)}}}if(T)throw new G.B(T)}add(T){let F=T;if(!T)return z.EMPTY;switch(typeof T){case"function":F=new z(T);case"object":if(F===this||F.closed||"function"!=typeof F.unsubscribe)return F;if(this.closed)return F.unsubscribe(),F;if(!(F instanceof z)){const N=F;F=new z,F._subscriptions=[N]}break;default:throw new Error("unrecognized teardown "+T+" added to Subscription.")}let{_parentOrParents:q}=F;if(null===q)F._parentOrParents=this;else if(q instanceof z){if(q===this)return F;F._parentOrParents=[q,this]}else{if(-1!==q.indexOf(this))return F;q.push(this)}const R=this._subscriptions;return null===R?this._subscriptions=[F]:R.push(F),F}remove(T){const F=this._subscriptions;if(F){const q=F.indexOf(T);-1!==q&&F.splice(q,1)}}}function B(Q){return Q.reduce((T,F)=>T.concat(F instanceof G.B?F.errors:F),[])}z.EMPTY=((Q=new z).closed=!0,Q)},2830:(u,f,m)=>{"use strict";m.d(f,{v:()=>C});let _=!1;const C={Promise:void 0,set useDeprecatedSynchronousErrorHandling(D){if(D){const G=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+G.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=D},get useDeprecatedSynchronousErrorHandling(){return _}}},1177:(u,f,m)=>{"use strict";m.d(f,{Ds:()=>B,IY:()=>G,ft:()=>T});var _=m(3489),C=m(4202),D=m(9249);class G extends _.L{constructor(q){super(),this.parent=q}_next(q){this.parent.notifyNext(q)}_error(q){this.parent.notifyError(q),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class B extends _.L{notifyNext(q){this.destination.next(q)}notifyError(q){this.destination.error(q)}notifyComplete(){this.destination.complete()}}function T(F,q){if(q.closed)return;if(F instanceof C.y)return F.subscribe(q);let R;try{R=(0,D.s)(F)(q)}catch(N){q.error(N)}return R}},1762:(u,f,m)=>{"use strict";m.d(f,{N:()=>B,c:()=>z});var _=m(8929),C=m(4202),D=m(4096),G=m(4327);class z extends C.y{constructor(R,N){super(),this.source=R,this.subjectFactory=N,this._refCount=0,this._isComplete=!1}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let R=this._connection;return R||(this._isComplete=!1,R=this._connection=new D.w,R.add(this.source.subscribe(new Q(this.getSubject(),this))),R.closed&&(this._connection=null,R=D.w.EMPTY)),R}refCount(){return(0,G.x)()(this)}}const B=(()=>{const q=z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:q._subscribe},_isComplete:{value:q._isComplete,writable:!0},getSubject:{value:q.getSubject},connect:{value:q.connect},refCount:{value:q.refCount}}})();class Q extends _.Yc{constructor(R,N){super(R),this.connectable=N}_error(R){this._unsubscribe(),super._error(R)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const R=this.connectable;if(R){this.connectable=null;const N=R._connection;R._refCount=0,R._subject=null,R._connection=null,N&&N.unsubscribe()}}}},6053:(u,f,m)=>{"use strict";m.d(f,{Ms:()=>T,aj:()=>Q});var _=m(2866),C=m(6688),D=m(826),G=m(448),z=m(3009);const B={};function Q(...q){let R,N;return(0,_.K)(q[q.length-1])&&(N=q.pop()),"function"==typeof q[q.length-1]&&(R=q.pop()),1===q.length&&(0,C.k)(q[0])&&(q=q[0]),(0,z.n)(q,N).lift(new T(R))}class T{constructor(R){this.resultSelector=R}call(R,N){return N.subscribe(new F(R,this.resultSelector))}}class F extends D.L{constructor(R,N){super(R),this.resultSelector=N,this.active=0,this.values=[],this.observables=[]}_next(R){this.values.push(B),this.observables.push(R)}_complete(){const R=this.observables,N=R.length;if(0===N)this.destination.complete();else{this.active=N,this.toRespond=N;for(let W=0;W<N;W++)this.add((0,G.D)(this,R[W],void 0,W))}}notifyComplete(R){0==(this.active-=1)&&this.destination.complete()}notifyNext(R,N,W){const k=this.values,ie=this.toRespond?k[W]===B?--this.toRespond:this.toRespond:0;k[W]=N,0===ie&&(this.resultSelector?this._tryResultSelector(k):this.destination.next(k.slice()))}_tryResultSelector(R){let N;try{N=this.resultSelector.apply(this,R)}catch(W){return void this.destination.error(W)}this.destination.next(N)}}},1961:(u,f,m)=>{"use strict";m.d(f,{z:()=>D});var _=m(1086),C=m(534);function D(...G){return(0,C.u)()((0,_.of)(...G))}},8514:(u,f,m)=>{"use strict";m.d(f,{P:()=>G});var _=m(4202),C=m(3527),D=m(8896);function G(z){return new _.y(B=>{let Q;try{Q=z()}catch(F){return void B.error(F)}return(Q?(0,C.D)(Q):(0,D.c)()).subscribe(B)})}},8896:(u,f,m)=>{"use strict";m.d(f,{E:()=>C,c:()=>D});var _=m(4202);const C=new _.y(z=>z.complete());function D(z){return z?function G(z){return new _.y(B=>z.schedule(()=>B.complete()))}(z):C}},567:(u,f,m)=>{"use strict";m.d(f,{D:()=>B});var _=m(4202),C=m(6688),D=m(4850),G=m(7830),z=m(3527);function B(...T){if(1===T.length){const F=T[0];if((0,C.k)(F))return Q(F,null);if((0,G.K)(F)&&Object.getPrototypeOf(F)===Object.prototype){const q=Object.keys(F);return Q(q.map(R=>F[R]),q)}}if("function"==typeof T[T.length-1]){const F=T.pop();return Q(T=1===T.length&&(0,C.k)(T[0])?T[0]:T,null).pipe((0,D.U)(q=>F(...q)))}return Q(T,null)}function Q(T,F){return new _.y(q=>{const R=T.length;if(0===R)return void q.complete();const N=new Array(R);let W=0,k=0;for(let V=0;V<R;V++){const ie=(0,z.D)(T[V]);let pe=!1;q.add(ie.subscribe({next:me=>{pe||(pe=!0,k++),N[V]=me},error:me=>q.error(me),complete:()=>{W++,(W===R||!pe)&&(k===R&&q.next(F?F.reduce((me,Ve,it)=>(me[Ve]=N[it],me),{}):N),q.complete())}}))}})}},3527:(u,f,m)=>{"use strict";m.d(f,{D:()=>G});var _=m(4202),C=m(9249),D=m(3998);function G(z,B){return B?(0,D.x)(z,B):z instanceof _.y?z:new _.y((0,C.s)(z))}},3009:(u,f,m)=>{"use strict";m.d(f,{n:()=>G});var _=m(4202),C=m(3650),D=m(6454);function G(z,B){return B?(0,D.r)(z,B):new _.y((0,C.V)(z))}},3753:(u,f,m)=>{"use strict";m.d(f,{R:()=>B});var _=m(4202),C=m(6688),D=m(7043),G=m(4850);function B(R,N,W,k){return(0,D.m)(W)&&(k=W,W=void 0),k?B(R,N,W).pipe((0,G.U)(V=>(0,C.k)(V)?k(...V):k(V))):new _.y(V=>{Q(R,N,function ie(pe){V.next(arguments.length>1?Array.prototype.slice.call(arguments):pe)},V,W)})}function Q(R,N,W,k,V){let ie;if(function q(R){return R&&"function"==typeof R.addEventListener&&"function"==typeof R.removeEventListener}(R)){const pe=R;R.addEventListener(N,W,V),ie=()=>pe.removeEventListener(N,W,V)}else if(function F(R){return R&&"function"==typeof R.on&&"function"==typeof R.off}(R)){const pe=R;R.on(N,W),ie=()=>pe.off(N,W)}else if(function T(R){return R&&"function"==typeof R.addListener&&"function"==typeof R.removeListener}(R)){const pe=R;R.addListener(N,W),ie=()=>pe.removeListener(N,W)}else{if(!R||!R.length)throw new TypeError("Invalid event target");for(let pe=0,me=R.length;pe<me;pe++)Q(R[pe],N,W,k,V)}k.add(ie)}},6787:(u,f,m)=>{"use strict";m.d(f,{T:()=>z});var _=m(4202),C=m(2866),D=m(9146),G=m(3009);function z(...B){let Q=Number.POSITIVE_INFINITY,T=null,F=B[B.length-1];return(0,C.K)(F)?(T=B.pop(),B.length>1&&"number"==typeof B[B.length-1]&&(Q=B.pop())):"number"==typeof F&&(Q=B.pop()),null===T&&1===B.length&&B[0]instanceof _.y?B[0]:(0,D.J)(Q)((0,G.n)(B,T))}},7274:(u,f,m)=>{"use strict";m.d(f,{C:()=>D,F:()=>G});var _=m(4202),C=m(7876);const D=new _.y(C.Z);function G(){return D}},1086:(u,f,m)=>{"use strict";m.d(f,{of:()=>G});var _=m(2866),C=m(3009),D=m(6454);function G(...z){let B=z[z.length-1];return(0,_.K)(B)?(z.pop(),(0,D.r)(z,B)):(0,C.n)(z)}},1946:(u,f,m)=>{"use strict";m.d(f,{S3:()=>z});var _=m(6688),C=m(3009),D=m(826),G=m(448);function z(...T){if(1===T.length){if(!(0,_.k)(T[0]))return T[0];T=T[0]}return(0,C.n)(T,void 0).lift(new B)}class B{call(F,q){return q.subscribe(new Q(F))}}class Q extends D.L{constructor(F){super(F),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(F){this.observables.push(F)}_complete(){const F=this.observables,q=F.length;if(0===q)this.destination.complete();else{for(let R=0;R<q&&!this.hasFirst;R++){const W=(0,G.D)(this,F[R],void 0,R);this.subscriptions&&this.subscriptions.push(W),this.add(W)}this.observables=null}}notifyNext(F,q,R){if(!this.hasFirst){this.hasFirst=!0;for(let N=0;N<this.subscriptions.length;N++)if(N!==R){let W=this.subscriptions[N];W.unsubscribe(),this.remove(W)}this.subscriptions=null}this.destination.next(q)}}},1737:(u,f,m)=>{"use strict";m.d(f,{_:()=>C});var _=m(4202);function C(G,z){return new _.y(z?B=>z.schedule(D,0,{error:G,subscriber:B}):B=>B.error(G))}function D({error:G,subscriber:z}){z.error(G)}},8723:(u,f,m)=>{"use strict";m.d(f,{H:()=>z});var _=m(4202),C=m(353),D=m(4241),G=m(2866);function z(Q=0,T,F){let q=-1;return(0,D.k)(T)?q=Number(T)<1?1:Number(T):(0,G.K)(T)&&(F=T),(0,G.K)(F)||(F=C.P),new _.y(R=>{const N=(0,D.k)(Q)?Q:+Q-F.now();return F.schedule(B,N,{index:0,period:q,subscriber:R})})}function B(Q){const{index:T,period:F,subscriber:q}=Q;if(q.next(T),!q.closed){if(-1===F)return q.complete();Q.index=T+1,this.schedule(Q,F)}}},1746:(u,f,m)=>{"use strict";m.d(f,{$R:()=>B,mx:()=>Q});var _=m(3009),C=m(6688),D=m(3489),G=m(5430),z=m(1177);function B(...N){const W=N[N.length-1];return"function"==typeof W&&N.pop(),(0,_.n)(N,void 0).lift(new Q(W))}class Q{constructor(W){this.resultSelector=W}call(W,k){return k.subscribe(new T(W,this.resultSelector))}}class T extends D.L{constructor(W,k,V=Object.create(null)){super(W),this.resultSelector=k,this.iterators=[],this.active=0,this.resultSelector="function"==typeof k?k:void 0}_next(W){const k=this.iterators;(0,C.k)(W)?k.push(new q(W)):k.push("function"==typeof W[G.hZ]?new F(W[G.hZ]()):new R(this.destination,this,W))}_complete(){const W=this.iterators,k=W.length;if(this.unsubscribe(),0!==k){this.active=k;for(let V=0;V<k;V++){let ie=W[V];ie.stillUnsubscribed?this.destination.add(ie.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const W=this.iterators,k=W.length,V=this.destination;for(let me=0;me<k;me++){let Ve=W[me];if("function"==typeof Ve.hasValue&&!Ve.hasValue())return}let ie=!1;const pe=[];for(let me=0;me<k;me++){let Ve=W[me],it=Ve.next();if(Ve.hasCompleted()&&(ie=!0),it.done)return void V.complete();pe.push(it.value)}this.resultSelector?this._tryresultSelector(pe):V.next(pe),ie&&V.complete()}_tryresultSelector(W){let k;try{k=this.resultSelector.apply(this,W)}catch(V){return void this.destination.error(V)}this.destination.next(k)}}class F{constructor(W){this.iterator=W,this.nextResult=W.next()}hasValue(){return!0}next(){const W=this.nextResult;return this.nextResult=this.iterator.next(),W}hasCompleted(){const W=this.nextResult;return Boolean(W&&W.done)}}class q{constructor(W){this.array=W,this.index=0,this.length=0,this.length=W.length}[G.hZ](){return this}next(W){const k=this.index++;return k<this.length?{value:this.array[k],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class R extends z.Ds{constructor(W,k,V){super(W),this.parent=k,this.observable=V,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[G.hZ](){return this}next(){const W=this.buffer;return 0===W.length&&this.isComplete?{value:null,done:!0}:{value:W.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(W){this.buffer.push(W),this.parent.checkIterators()}subscribe(){return(0,z.ft)(this.observable,new z.IY(this))}}},7221:(u,f,m)=>{"use strict";m.d(f,{K:()=>C});var _=m(1177);function C(z){return function(Q){const T=new D(z),F=Q.lift(T);return T.caught=F}}class D{constructor(B){this.selector=B}call(B,Q){return Q.subscribe(new G(B,this.selector,this.caught))}}class G extends _.Ds{constructor(B,Q,T){super(B),this.selector=Q,this.caught=T}error(B){if(!this.isStopped){let Q;try{Q=this.selector(B,this.caught)}catch(q){return void super.error(q)}this._unsubscribeAndRecycle();const T=new _.IY(this);this.add(T);const F=(0,_.ft)(Q,T);F!==T&&this.add(F)}}}},534:(u,f,m)=>{"use strict";m.d(f,{u:()=>C});var _=m(9146);function C(){return(0,_.J)(1)}},1406:(u,f,m)=>{"use strict";m.d(f,{b:()=>C});var _=m(1709);function C(D,G){return(0,_.zg)(D,G,1)}},7314:(u,f,m)=>{"use strict";m.d(f,{d:()=>C});var _=m(3489);function C(z=null){return B=>B.lift(new D(z))}class D{constructor(B){this.defaultValue=B}call(B,Q){return Q.subscribe(new G(B,this.defaultValue))}}class G extends _.L{constructor(B,Q){super(B),this.defaultValue=Q,this.isEmpty=!0}_next(B){this.isEmpty=!1,this.destination.next(B)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},943:(u,f,m)=>{"use strict";m.d(f,{g:()=>z});var _=m(353),C=m(2697),D=m(3489),G=m(9312);function z(F,q=_.P){const N=(0,C.J)(F)?+F-q.now():Math.abs(F);return W=>W.lift(new B(N,q))}class B{constructor(q,R){this.delay=q,this.scheduler=R}call(q,R){return R.subscribe(new Q(q,this.delay,this.scheduler))}}class Q extends D.L{constructor(q,R,N){super(q),this.delay=R,this.scheduler=N,this.queue=[],this.active=!1,this.errored=!1}static dispatch(q){const R=q.source,N=R.queue,W=q.scheduler,k=q.destination;for(;N.length>0&&N[0].time-W.now()<=0;)N.shift().notification.observe(k);if(N.length>0){const V=Math.max(0,N[0].time-W.now());this.schedule(q,V)}else this.unsubscribe(),R.active=!1}_schedule(q){this.active=!0,this.destination.add(q.schedule(Q.dispatch,this.delay,{source:this,destination:this.destination,scheduler:q}))}scheduleNotification(q){if(!0===this.errored)return;const R=this.scheduler,N=new T(R.now()+this.delay,q);this.queue.push(N),!1===this.active&&this._schedule(R)}_next(q){this.scheduleNotification(G.P.createNext(q))}_error(q){this.errored=!0,this.queue=[],this.destination.error(q),this.unsubscribe()}_complete(){this.scheduleNotification(G.P.createComplete()),this.unsubscribe()}}class T{constructor(q,R){this.time=q,this.notification=R}}},5778:(u,f,m)=>{"use strict";m.d(f,{x:()=>C});var _=m(3489);function C(z,B){return Q=>Q.lift(new D(z,B))}class D{constructor(B,Q){this.compare=B,this.keySelector=Q}call(B,Q){return Q.subscribe(new G(B,this.compare,this.keySelector))}}class G extends _.L{constructor(B,Q,T){super(B),this.keySelector=T,this.hasKey=!1,"function"==typeof Q&&(this.compare=Q)}compare(B,Q){return B===Q}_next(B){let Q;try{const{keySelector:F}=this;Q=F?F(B):B}catch(F){return this.destination.error(F)}let T=!1;if(this.hasKey)try{const{compare:F}=this;T=F(this.key,Q)}catch(F){return this.destination.error(F)}else this.hasKey=!0;T||(this.key=Q,this.destination.next(B))}}},2334:(u,f,m)=>{"use strict";m.d(f,{l:()=>D});var _=m(1961),C=m(1086);function D(...G){return z=>(0,_.z)(z,(0,C.of)(...G))}},2198:(u,f,m)=>{"use strict";m.d(f,{h:()=>C});var _=m(3489);function C(z,B){return function(T){return T.lift(new D(z,B))}}class D{constructor(B,Q){this.predicate=B,this.thisArg=Q}call(B,Q){return Q.subscribe(new G(B,this.predicate,this.thisArg))}}class G extends _.L{constructor(B,Q,T){super(B),this.predicate=Q,this.thisArg=T,this.count=0}_next(B){let Q;try{Q=this.predicate.call(this.thisArg,B,this.count++)}catch(T){return void this.destination.error(T)}Q&&this.destination.next(B)}}},537:(u,f,m)=>{"use strict";m.d(f,{x:()=>D});var _=m(3489),C=m(4096);function D(B){return Q=>Q.lift(new G(B))}class G{constructor(Q){this.callback=Q}call(Q,T){return T.subscribe(new z(Q,this.callback))}}class z extends _.L{constructor(Q,T){super(Q),this.add(new C.w(T))}}},7224:(u,f,m)=>{"use strict";m.d(f,{P:()=>Q});var _=m(4450),C=m(2198),D=m(2986),G=m(7314),z=m(4907),B=m(5379);function Q(T,F){const q=arguments.length>=2;return R=>R.pipe(T?(0,C.h)((N,W)=>T(N,W,R)):B.y,(0,D.q)(1),q?(0,G.d)(F):(0,z.T)(()=>new _.K))}},4002:(u,f,m)=>{"use strict";m.d(f,{T:()=>F,v:()=>z});var _=m(3489),C=m(4096),D=m(4202),G=m(8929);function z(R,N,W,k){return V=>V.lift(new B(R,N,W,k))}class B{constructor(N,W,k,V){this.keySelector=N,this.elementSelector=W,this.durationSelector=k,this.subjectSelector=V}call(N,W){return W.subscribe(new Q(N,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class Q extends _.L{constructor(N,W,k,V,ie){super(N),this.keySelector=W,this.elementSelector=k,this.durationSelector=V,this.subjectSelector=ie,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(N){let W;try{W=this.keySelector(N)}catch(k){return void this.error(k)}this._group(N,W)}_group(N,W){let k=this.groups;k||(k=this.groups=new Map);let ie,V=k.get(W);if(this.elementSelector)try{ie=this.elementSelector(N)}catch(pe){this.error(pe)}else ie=N;if(!V){V=this.subjectSelector?this.subjectSelector():new G.xQ,k.set(W,V);const pe=new F(W,V,this);if(this.destination.next(pe),this.durationSelector){let me;try{me=this.durationSelector(new F(W,V))}catch(Ve){return void this.error(Ve)}this.add(me.subscribe(new T(W,V,this)))}}V.closed||V.next(ie)}_error(N){const W=this.groups;W&&(W.forEach((k,V)=>{k.error(N)}),W.clear()),this.destination.error(N)}_complete(){const N=this.groups;N&&(N.forEach((W,k)=>{W.complete()}),N.clear()),this.destination.complete()}removeGroup(N){this.groups.delete(N)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class T extends _.L{constructor(N,W,k){super(W),this.key=N,this.group=W,this.parent=k}_next(N){this.complete()}_unsubscribe(){const{parent:N,key:W}=this;this.key=this.parent=null,N&&N.removeGroup(W)}}class F extends D.y{constructor(N,W,k){super(),this.key=N,this.groupSubject=W,this.refCountSubscription=k}_subscribe(N){const W=new C.w,{refCountSubscription:k,groupSubject:V}=this;return k&&!k.closed&&W.add(new q(k)),W.add(V.subscribe(N)),W}}class q extends C.w{constructor(N){super(),this.parent=N,N.count++}unsubscribe(){const N=this.parent;!N.closed&&!this.closed&&(super.unsubscribe(),N.count-=1,0===N.count&&N.attemptedToUnsubscribe&&N.unsubscribe())}}},8127:(u,f,m)=>{"use strict";m.d(f,{Z:()=>Q});var _=m(4450),C=m(2198),D=m(2821),G=m(4907),z=m(7314),B=m(5379);function Q(T,F){const q=arguments.length>=2;return R=>R.pipe(T?(0,C.h)((N,W)=>T(N,W,R)):B.y,(0,D.h)(1),q?(0,z.d)(F):(0,G.T)(()=>new _.K))}},4850:(u,f,m)=>{"use strict";m.d(f,{U:()=>C});var _=m(3489);function C(z,B){return function(T){if("function"!=typeof z)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return T.lift(new D(z,B))}}class D{constructor(B,Q){this.project=B,this.thisArg=Q}call(B,Q){return Q.subscribe(new G(B,this.project,this.thisArg))}}class G extends _.L{constructor(B,Q,T){super(B),this.project=Q,this.count=0,this.thisArg=T||this}_next(B){let Q;try{Q=this.project.call(this.thisArg,B,this.count++)}catch(T){return void this.destination.error(T)}this.destination.next(Q)}}},7604:(u,f,m)=>{"use strict";m.d(f,{h:()=>C});var _=m(3489);function C(z){return B=>B.lift(new D(z))}class D{constructor(B){this.value=B}call(B,Q){return Q.subscribe(new G(B,this.value))}}class G extends _.L{constructor(B,Q){super(B),this.value=Q}_next(B){this.destination.next(this.value)}}},9146:(u,f,m)=>{"use strict";m.d(f,{J:()=>D});var _=m(1709),C=m(5379);function D(G=Number.POSITIVE_INFINITY){return(0,_.zg)(C.y,G)}},1709:(u,f,m)=>{"use strict";m.d(f,{VS:()=>Q,zg:()=>G});var _=m(4850),C=m(3527),D=m(1177);function G(T,F,q=Number.POSITIVE_INFINITY){return"function"==typeof F?R=>R.pipe(G((N,W)=>(0,C.D)(T(N,W)).pipe((0,_.U)((k,V)=>F(N,k,W,V))),q)):("number"==typeof F&&(q=F),R=>R.lift(new z(T,q)))}class z{constructor(F,q=Number.POSITIVE_INFINITY){this.project=F,this.concurrent=q}call(F,q){return q.subscribe(new B(F,this.project,this.concurrent))}}class B extends D.Ds{constructor(F,q,R=Number.POSITIVE_INFINITY){super(F),this.project=q,this.concurrent=R,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(F){this.active<this.concurrent?this._tryNext(F):this.buffer.push(F)}_tryNext(F){let q;const R=this.index++;try{q=this.project(F,R)}catch(N){return void this.destination.error(N)}this.active++,this._innerSub(q)}_innerSub(F){const q=new D.IY(this),R=this.destination;R.add(q);const N=(0,D.ft)(F,q);N!==q&&R.add(N)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(F){this.destination.next(F)}notifyComplete(){const F=this.buffer;this.active--,F.length>0?this._next(F.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const Q=G},2536:(u,f,m)=>{"use strict";m.d(f,{O:()=>C});var _=m(1762);function C(G,z){return function(Q){let T;if(T="function"==typeof G?G:function(){return G},"function"==typeof z)return Q.lift(new D(T,z));const F=Object.create(Q,_.N);return F.source=Q,F.subjectFactory=T,F}}class D{constructor(z,B){this.subjectFactory=z,this.selector=B}call(z,B){const{selector:Q}=this,T=this.subjectFactory(),F=Q(T).subscribe(z);return F.add(B.subscribe(T)),F}}},7770:(u,f,m)=>{"use strict";m.d(f,{QV:()=>D,ht:()=>z});var _=m(3489),C=m(9312);function D(Q,T=0){return function(q){return q.lift(new G(Q,T))}}class G{constructor(T,F=0){this.scheduler=T,this.delay=F}call(T,F){return F.subscribe(new z(T,this.scheduler,this.delay))}}class z extends _.L{constructor(T,F,q=0){super(T),this.scheduler=F,this.delay=q}static dispatch(T){const{notification:F,destination:q}=T;F.observe(q),this.unsubscribe()}scheduleMessage(T){this.destination.add(this.scheduler.schedule(z.dispatch,this.delay,new B(T,this.destination)))}_next(T){this.scheduleMessage(C.P.createNext(T))}_error(T){this.scheduleMessage(C.P.createError(T)),this.unsubscribe()}_complete(){this.scheduleMessage(C.P.createComplete()),this.unsubscribe()}}class B{constructor(T,F){this.notification=T,this.destination=F}}},8077:(u,f,m)=>{"use strict";m.d(f,{u:()=>z});var _=m(2014),C=m(2821),D=m(7314),G=m(4843);function z(B,Q){return arguments.length>=2?function(F){return(0,G.z)((0,_.R)(B,Q),(0,C.h)(1),(0,D.d)(Q))(F)}:function(F){return(0,G.z)((0,_.R)((q,R,N)=>B(q,R,N+1)),(0,C.h)(1))(F)}}},4327:(u,f,m)=>{"use strict";m.d(f,{x:()=>C});var _=m(3489);function C(){return function(B){return B.lift(new D(B))}}class D{constructor(B){this.connectable=B}call(B,Q){const{connectable:T}=this;T._refCount++;const F=new G(B,T),q=Q.subscribe(F);return F.closed||(F.connection=T.connect()),q}}class G extends _.L{constructor(B,Q){super(B),this.connectable=Q}_unsubscribe(){const{connectable:B}=this;if(!B)return void(this.connection=null);this.connectable=null;const Q=B._refCount;if(Q<=0)return void(this.connection=null);if(B._refCount=Q-1,Q>1)return void(this.connection=null);const{connection:T}=this,F=B._connection;this.connection=null,F&&(!T||F===T)&&F.unsubscribe()}}},2014:(u,f,m)=>{"use strict";m.d(f,{R:()=>C});var _=m(3489);function C(z,B){let Q=!1;return arguments.length>=2&&(Q=!0),function(F){return F.lift(new D(z,B,Q))}}class D{constructor(B,Q,T=!1){this.accumulator=B,this.seed=Q,this.hasSeed=T}call(B,Q){return Q.subscribe(new G(B,this.accumulator,this.seed,this.hasSeed))}}class G extends _.L{constructor(B,Q,T,F){super(B),this.accumulator=Q,this._seed=T,this.hasSeed=F,this.index=0}get seed(){return this._seed}set seed(B){this.hasSeed=!0,this._seed=B}_next(B){if(this.hasSeed)return this._tryNext(B);this.seed=B,this.destination.next(B)}_tryNext(B){const Q=this.index++;let T;try{T=this.accumulator(this.seed,B,Q)}catch(F){this.destination.error(F)}this.seed=T,this.destination.next(T)}}},8117:(u,f,m)=>{"use strict";m.d(f,{B:()=>z});var _=m(2536),C=m(4327),D=m(8929);function G(){return new D.xQ}function z(){return B=>(0,C.x)()((0,_.O)(G)(B))}},1307:(u,f,m)=>{"use strict";m.d(f,{T:()=>C});var _=m(3489);function C(z){return B=>B.lift(new D(z))}class D{constructor(B){this.total=B}call(B,Q){return Q.subscribe(new G(B,this.total))}}class G extends _.L{constructor(B,Q){super(B),this.total=Q,this.count=0}_next(B){++this.count>this.total&&this.destination.next(B)}}},1059:(u,f,m)=>{"use strict";m.d(f,{O:()=>D});var _=m(1961),C=m(2866);function D(...G){const z=G[G.length-1];return(0,C.K)(z)?(G.pop(),B=>(0,_.z)(G,B,z)):B=>(0,_.z)(G,B)}},7545:(u,f,m)=>{"use strict";m.d(f,{w:()=>G});var _=m(4850),C=m(3527),D=m(1177);function G(Q,T){return"function"==typeof T?F=>F.pipe(G((q,R)=>(0,C.D)(Q(q,R)).pipe((0,_.U)((N,W)=>T(q,N,R,W))))):F=>F.lift(new z(Q))}class z{constructor(T){this.project=T}call(T,F){return F.subscribe(new B(T,this.project))}}class B extends D.Ds{constructor(T,F){super(T),this.project=F,this.index=0}_next(T){let F;const q=this.index++;try{F=this.project(T,q)}catch(R){return void this.destination.error(R)}this._innerSub(F)}_innerSub(T){const F=this.innerSubscription;F&&F.unsubscribe();const q=new D.IY(this),R=this.destination;R.add(q),this.innerSubscription=(0,D.ft)(T,q),this.innerSubscription!==q&&R.add(this.innerSubscription)}_complete(){const{innerSubscription:T}=this;(!T||T.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(T){this.destination.next(T)}}},2986:(u,f,m)=>{"use strict";m.d(f,{q:()=>G});var _=m(3489),C=m(4231),D=m(8896);function G(Q){return T=>0===Q?(0,D.c)():T.lift(new z(Q))}class z{constructor(T){if(this.total=T,this.total<0)throw new C.W}call(T,F){return F.subscribe(new B(T,this.total))}}class B extends _.L{constructor(T,F){super(T),this.total=F,this.count=0}_next(T){const F=this.total,q=++this.count;q<=F&&(this.destination.next(T),q===F&&(this.destination.complete(),this.unsubscribe()))}}},2821:(u,f,m)=>{"use strict";m.d(f,{h:()=>G});var _=m(3489),C=m(4231),D=m(8896);function G(Q){return function(F){return 0===Q?(0,D.c)():F.lift(new z(Q))}}class z{constructor(T){if(this.total=T,this.total<0)throw new C.W}call(T,F){return F.subscribe(new B(T,this.total))}}class B extends _.L{constructor(T,F){super(T),this.total=F,this.ring=new Array,this.count=0}_next(T){const F=this.ring,q=this.total,R=this.count++;F.length<q?F.push(T):F[R%q]=T}_complete(){const T=this.destination;let F=this.count;if(F>0){const q=this.count>=this.total?this.total:this.count,R=this.ring;for(let N=0;N<q;N++){const W=F++%q;T.next(R[W])}}T.complete()}}},7625:(u,f,m)=>{"use strict";m.d(f,{R:()=>C});var _=m(1177);function C(z){return B=>B.lift(new D(z))}class D{constructor(B){this.notifier=B}call(B,Q){const T=new G(B),F=(0,_.ft)(this.notifier,new _.IY(T));return F&&!T.seenValue?(T.add(F),Q.subscribe(T)):T}}class G extends _.Ds{constructor(B){super(B),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},4290:(u,f,m)=>{"use strict";m.d(f,{o:()=>C});var _=m(3489);function C(z,B=!1){return Q=>Q.lift(new D(z,B))}class D{constructor(B,Q){this.predicate=B,this.inclusive=Q}call(B,Q){return Q.subscribe(new G(B,this.predicate,this.inclusive))}}class G extends _.L{constructor(B,Q,T){super(B),this.predicate=Q,this.inclusive=T,this.index=0}_next(B){const Q=this.destination;let T;try{T=this.predicate(B,this.index++)}catch(F){return void Q.error(F)}this.nextOrComplete(B,T)}nextOrComplete(B,Q){const T=this.destination;Boolean(Q)?T.next(B):(this.inclusive&&T.next(B),T.complete())}}},2994:(u,f,m)=>{"use strict";m.d(f,{b:()=>G});var _=m(3489),C=m(7876),D=m(7043);function G(Q,T,F){return function(R){return R.lift(new z(Q,T,F))}}class z{constructor(T,F,q){this.nextOrObserver=T,this.error=F,this.complete=q}call(T,F){return F.subscribe(new B(T,this.nextOrObserver,this.error,this.complete))}}class B extends _.L{constructor(T,F,q,R){super(T),this._tapNext=C.Z,this._tapError=C.Z,this._tapComplete=C.Z,this._tapError=q||C.Z,this._tapComplete=R||C.Z,(0,D.m)(F)?(this._context=this,this._tapNext=F):F&&(this._context=F,this._tapNext=F.next||C.Z,this._tapError=F.error||C.Z,this._tapComplete=F.complete||C.Z)}_next(T){try{this._tapNext.call(this._context,T)}catch(F){return void this.destination.error(F)}this.destination.next(T)}_error(T){try{this._tapError.call(this._context,T)}catch(F){return void this.destination.error(F)}this.destination.error(T)}_complete(){try{this._tapComplete.call(this._context)}catch(T){return void this.destination.error(T)}return this.destination.complete()}}},4907:(u,f,m)=>{"use strict";m.d(f,{T:()=>D});var _=m(4450),C=m(3489);function D(Q=B){return T=>T.lift(new G(Q))}class G{constructor(T){this.errorFactory=T}call(T,F){return F.subscribe(new z(T,this.errorFactory))}}class z extends C.L{constructor(T,F){super(T),this.errorFactory=F,this.hasValue=!1}_next(T){this.hasValue=!0,this.destination.next(T)}_complete(){if(this.hasValue)return this.destination.complete();{let T;try{T=this.errorFactory()}catch(F){T=F}this.destination.error(T)}}}function B(){return new _.K}},864:(u,f,m)=>{"use strict";m.d(f,{q:()=>D});var _=m(8077);function C(G,z,B){return 0===B?[z]:(G.push(z),G)}function D(){return(0,_.u)(C,[])}},7168:(u,f,m)=>{"use strict";m.d(f,{M:()=>D});var _=m(826),C=m(448);function D(...B){return Q=>{let T;return"function"==typeof B[B.length-1]&&(T=B.pop()),Q.lift(new G(B,T))}}class G{constructor(Q,T){this.observables=Q,this.project=T}call(Q,T){return T.subscribe(new z(Q,this.observables,this.project))}}class z extends _.L{constructor(Q,T,F){super(Q),this.observables=T,this.project=F,this.toRespond=[];const q=T.length;this.values=new Array(q);for(let R=0;R<q;R++)this.toRespond.push(R);for(let R=0;R<q;R++)this.add((0,C.D)(this,T[R],void 0,R))}notifyNext(Q,T,F){this.values[F]=T;const q=this.toRespond;if(q.length>0){const R=q.indexOf(F);-1!==R&&q.splice(R,1)}}notifyComplete(){}_next(Q){if(0===this.toRespond.length){const T=[Q,...this.values];this.project?this._tryProject(T):this.destination.next(T)}}_tryProject(Q){let T;try{T=this.project.apply(this,Q)}catch(F){return void this.destination.error(F)}this.destination.next(T)}}},6454:(u,f,m)=>{"use strict";m.d(f,{r:()=>D});var _=m(4202),C=m(4096);function D(G,z){return new _.y(B=>{const Q=new C.w;let T=0;return Q.add(z.schedule(function(){T!==G.length?(B.next(G[T++]),B.closed||Q.add(this.schedule())):B.complete()})),Q})}},3998:(u,f,m)=>{"use strict";m.d(f,{x:()=>W});var _=m(4202),C=m(4096),D=m(3821),B=m(6454),Q=m(5430),q=m(8955),R=m(8515);function W(k,V){if(null!=k){if(function F(k){return k&&"function"==typeof k[D.L]}(k))return function G(k,V){return new _.y(ie=>{const pe=new C.w;return pe.add(V.schedule(()=>{const me=k[D.L]();pe.add(me.subscribe({next(Ve){pe.add(V.schedule(()=>ie.next(Ve)))},error(Ve){pe.add(V.schedule(()=>ie.error(Ve)))},complete(){pe.add(V.schedule(()=>ie.complete()))}}))})),pe})}(k,V);if((0,q.t)(k))return function z(k,V){return new _.y(ie=>{const pe=new C.w;return pe.add(V.schedule(()=>k.then(me=>{pe.add(V.schedule(()=>{ie.next(me),pe.add(V.schedule(()=>ie.complete()))}))},me=>{pe.add(V.schedule(()=>ie.error(me)))}))),pe})}(k,V);if((0,R.z)(k))return(0,B.r)(k,V);if(function N(k){return k&&"function"==typeof k[Q.hZ]}(k)||"string"==typeof k)return function T(k,V){if(!k)throw new Error("Iterable cannot be null");return new _.y(ie=>{const pe=new C.w;let me;return pe.add(()=>{me&&"function"==typeof me.return&&me.return()}),pe.add(V.schedule(()=>{me=k[Q.hZ](),pe.add(V.schedule(function(){if(ie.closed)return;let Ve,it;try{const je=me.next();Ve=je.value,it=je.done}catch(je){return void ie.error(je)}it?ie.complete():(ie.next(Ve),this.schedule())}))})),pe})}(k,V)}throw new TypeError((null!==k&&typeof k||k)+" is not observable")}},6686:(u,f,m)=>{"use strict";m.d(f,{o:()=>D});var _=m(4096);class C extends _.w{constructor(z,B){super()}schedule(z,B=0){return this}}class D extends C{constructor(z,B){super(z,B),this.scheduler=z,this.work=B,this.pending=!1}schedule(z,B=0){if(this.closed)return this;this.state=z;const Q=this.id,T=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(T,Q,B)),this.pending=!0,this.delay=B,this.id=this.id||this.requestAsyncId(T,this.id,B),this}requestAsyncId(z,B,Q=0){return setInterval(z.flush.bind(z,this),Q)}recycleAsyncId(z,B,Q=0){if(null!==Q&&this.delay===Q&&!1===this.pending)return B;clearInterval(B)}execute(z,B){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Q=this._execute(z,B);if(Q)return Q;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(z,B){let T,Q=!1;try{this.work(z)}catch(F){Q=!0,T=!!F&&F||new Error(F)}if(Q)return this.unsubscribe(),T}_unsubscribe(){const z=this.id,B=this.scheduler,Q=B.actions,T=Q.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==T&&Q.splice(T,1),null!=z&&(this.id=this.recycleAsyncId(B,z,null)),this.delay=null}}},198:(u,f,m)=>{"use strict";m.d(f,{v:()=>C});var _=m(2221);class C extends _.b{constructor(G,z=_.b.now){super(G,()=>C.delegate&&C.delegate!==this?C.delegate.now():z()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(G,z=0,B){return C.delegate&&C.delegate!==this?C.delegate.schedule(G,z,B):super.schedule(G,z,B)}flush(G){const{actions:z}=this;if(this.active)return void z.push(G);let B;this.active=!0;do{if(B=G.execute(G.state,G.delay))break}while(G=z.shift());if(this.active=!1,B){for(;G=z.shift();)G.unsubscribe();throw B}}}},8139:(u,f,m)=>{"use strict";m.d(f,{e:()=>N,E:()=>R});let _=1;const C=Promise.resolve(),D={};function G(W){return W in D&&(delete D[W],!0)}const z={setImmediate(W){const k=_++;return D[k]=!0,C.then(()=>G(k)&&W()),k},clearImmediate(W){G(W)}};var Q=m(6686),F=m(198);const R=new class q extends F.v{flush(k){this.active=!0,this.scheduled=void 0;const{actions:V}=this;let ie,pe=-1,me=V.length;k=k||V.shift();do{if(ie=k.execute(k.state,k.delay))break}while(++pe<me&&(k=V.shift()));if(this.active=!1,ie){for(;++pe<me&&(k=V.shift());)k.unsubscribe();throw ie}}}(class T extends Q.o{constructor(k,V){super(k,V),this.scheduler=k,this.work=V}requestAsyncId(k,V,ie=0){return null!==ie&&ie>0?super.requestAsyncId(k,V,ie):(k.actions.push(this),k.scheduled||(k.scheduled=z.setImmediate(k.flush.bind(k,null))))}recycleAsyncId(k,V,ie=0){if(null!==ie&&ie>0||null===ie&&this.delay>0)return super.recycleAsyncId(k,V,ie);0===k.actions.length&&(z.clearImmediate(V),k.scheduled=void 0)}}),N=R},353:(u,f,m)=>{"use strict";m.d(f,{P:()=>G,z:()=>D});var _=m(6686);const D=new(m(198).v)(_.o),G=D},341:(u,f,m)=>{"use strict";m.d(f,{c:()=>B,N:()=>z});var _=m(6686),D=m(198);const z=new class G extends D.v{}(class C extends _.o{constructor(T,F){super(T,F),this.scheduler=T,this.work=F}schedule(T,F=0){return F>0?super.schedule(T,F):(this.delay=F,this.state=T,this.scheduler.flush(this),this)}execute(T,F){return F>0||this.closed?super.execute(T,F):this._execute(T,F)}requestAsyncId(T,F,q=0){return null!==q&&q>0||null===q&&this.delay>0?super.requestAsyncId(T,F,q):T.flush(this)}}),B=z},5430:(u,f,m)=>{"use strict";m.d(f,{hZ:()=>C});const C=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(u,f,m)=>{"use strict";m.d(f,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(u,f,m)=>{"use strict";m.d(f,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(u,f,m)=>{"use strict";m.d(f,{W:()=>C});const C=(()=>{function D(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return D.prototype=Object.create(Error.prototype),D})()},4450:(u,f,m)=>{"use strict";m.d(f,{K:()=>C});const C=(()=>{function D(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return D.prototype=Object.create(Error.prototype),D})()},5279:(u,f,m)=>{"use strict";m.d(f,{N:()=>C});const C=(()=>{function D(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return D.prototype=Object.create(Error.prototype),D})()},854:(u,f,m)=>{"use strict";m.d(f,{W:()=>C});const C=(()=>{function D(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return D.prototype=Object.create(Error.prototype),D})()},7964:(u,f,m)=>{"use strict";m.d(f,{B:()=>C});const C=(()=>{function D(G){return Error.call(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((z,B)=>`${B+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G,this}return D.prototype=Object.create(Error.prototype),D})()},9476:(u,f,m)=>{"use strict";m.d(f,{_:()=>C});var _=m(3489);function C(D){for(;D;){const{closed:G,destination:z,isStopped:B}=D;if(G||B)return!1;D=z&&z instanceof _.L?z:null}return!0}},2782:(u,f,m)=>{"use strict";function _(C){setTimeout(()=>{throw C},0)}m.d(f,{z:()=>_})},5379:(u,f,m)=>{"use strict";function _(C){return C}m.d(f,{y:()=>_})},6688:(u,f,m)=>{"use strict";m.d(f,{k:()=>_});const _=Array.isArray||(C=>C&&"number"==typeof C.length)},8515:(u,f,m)=>{"use strict";m.d(f,{z:()=>_});const _=C=>C&&"number"==typeof C.length&&"function"!=typeof C},2697:(u,f,m)=>{"use strict";function _(C){return C instanceof Date&&!isNaN(+C)}m.d(f,{J:()=>_})},7043:(u,f,m)=>{"use strict";function _(C){return"function"==typeof C}m.d(f,{m:()=>_})},4241:(u,f,m)=>{"use strict";m.d(f,{k:()=>C});var _=m(6688);function C(D){return!(0,_.k)(D)&&D-parseFloat(D)+1>=0}},7830:(u,f,m)=>{"use strict";function _(C){return null!==C&&"object"==typeof C}m.d(f,{K:()=>_})},8955:(u,f,m)=>{"use strict";function _(C){return!!C&&"function"!=typeof C.subscribe&&"function"==typeof C.then}m.d(f,{t:()=>_})},2866:(u,f,m)=>{"use strict";function _(C){return C&&"function"==typeof C.schedule}m.d(f,{K:()=>_})},7876:(u,f,m)=>{"use strict";function _(){}m.d(f,{Z:()=>_})},5884:(u,f,m)=>{"use strict";function _(C,D){function G(){return!G.pred.apply(G.thisArg,arguments)}return G.pred=C,G.thisArg=D,G}m.d(f,{f:()=>_})},4843:(u,f,m)=>{"use strict";m.d(f,{U:()=>D,z:()=>C});var _=m(5379);function C(...G){return D(G)}function D(G){return 0===G.length?_.y:1===G.length?G[0]:function(B){return G.reduce((Q,T)=>T(Q),B)}}},9249:(u,f,m)=>{"use strict";m.d(f,{s:()=>R});var _=m(3650),C=m(2782),G=m(5430),B=m(3821),T=m(8515),F=m(8955),q=m(7830);const R=N=>{if(N&&"function"==typeof N[B.L])return(N=>W=>{const k=N[B.L]();if("function"!=typeof k.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return k.subscribe(W)})(N);if((0,T.z)(N))return(0,_.V)(N);if((0,F.t)(N))return(N=>W=>(N.then(k=>{W.closed||(W.next(k),W.complete())},k=>W.error(k)).then(null,C.z),W))(N);if(N&&"function"==typeof N[G.hZ])return(N=>W=>{const k=N[G.hZ]();for(;;){let V;try{V=k.next()}catch(ie){return W.error(ie),W}if(V.done){W.complete();break}if(W.next(V.value),W.closed)break}return"function"==typeof k.return&&W.add(()=>{k.return&&k.return()}),W})(N);{const k=`You provided ${(0,q.K)(N)?"an invalid object":`'${N}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(k)}}},3650:(u,f,m)=>{"use strict";m.d(f,{V:()=>_});const _=C=>D=>{for(let G=0,z=C.length;G<z&&!D.closed;G++)D.next(C[G]);D.complete()}},448:(u,f,m)=>{"use strict";m.d(f,{D:()=>z});var _=m(3489);class C extends _.L{constructor(Q,T,F){super(),this.parent=Q,this.outerValue=T,this.outerIndex=F,this.index=0}_next(Q){this.parent.notifyNext(this.outerValue,Q,this.outerIndex,this.index++,this)}_error(Q){this.parent.notifyError(Q,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var D=m(9249),G=m(4202);function z(B,Q,T,F,q=new C(B,T,F)){if(!q.closed)return Q instanceof G.y?Q.subscribe(q):(0,D.s)(Q)(q)}},8732:(u,f,m)=>{"use strict";m.r(f),m.d(f,{audit:()=>C,auditTime:()=>Q,buffer:()=>T,bufferCount:()=>N,bufferTime:()=>pe,bufferToggle:()=>vt,bufferWhen:()=>on,catchError:()=>ut.K,combineAll:()=>Un,combineLatest:()=>fn,concat:()=>ft,concatAll:()=>Wn.u,concatMap:()=>Cn.b,concatMapTo:()=>tr,count:()=>sr,debounce:()=>Li,debounceTime:()=>mo,defaultIfEmpty:()=>Mi.d,delay:()=>Lo.g,delayWhen:()=>co,dematerialize:()=>Ar,distinct:()=>mn,distinctUntilChanged:()=>Yn.x,distinctUntilKeyChanged:()=>ur,elementAt:()=>Go,endWith:()=>ka.l,every:()=>oi,exhaust:()=>kt,exhaustMap:()=>Et,expand:()=>$i,filter:()=>ho.h,finalize:()=>Eo.x,find:()=>Ts,findIndex:()=>Kr,first:()=>Zs.P,flatMap:()=>fp.VS,groupBy:()=>td.v,ignoreElements:()=>Wo,isEmpty:()=>Ol,last:()=>$d.Z,map:()=>rn.U,mapTo:()=>ql.h,materialize:()=>nd,max:()=>Ra,merge:()=>Ng,mergeAll:()=>Pr.J,mergeMap:()=>fp.zg,mergeMapTo:()=>U1,mergeScan:()=>eu,min:()=>tu,multicast:()=>Br.O,observeOn:()=>Do.QV,onErrorResumeNext:()=>gp,pairwise:()=>iu,partition:()=>cx,pluck:()=>nl,publish:()=>dx,publishBehavior:()=>Zd,publishLast:()=>Lg,publishReplay:()=>vp,race:()=>Bg,reduce:()=>Yl.u,refCount:()=>$1.x,repeat:()=>W1,repeatWhen:()=>zg,retry:()=>ux,retryWhen:()=>X1,sample:()=>Vg,sampleTime:()=>Gf,scan:()=>_p.R,sequenceEqual:()=>Q1,share:()=>vo.B,shareReplay:()=>Z1,single:()=>M,skip:()=>ne.T,skipLast:()=>ae,skipUntil:()=>He,skipWhile:()=>Pt,startWith:()=>Zt.O,subscribeOn:()=>qo,switchAll:()=>In,switchMap:()=>ya.w,switchMapTo:()=>Ln,take:()=>Qr.q,takeLast:()=>tn.h,takeUntil:()=>Bi.R,takeWhile:()=>eh.o,tap:()=>ad.b,throttle:()=>ld,throttleTime:()=>bc,throwIfEmpty:()=>As.T,timeInterval:()=>Gg,timeout:()=>Yf,timeoutWith:()=>nh,timestamp:()=>Xf,toArray:()=>$f.q,window:()=>Ql,windowCount:()=>ou,windowTime:()=>Qf,windowToggle:()=>De,windowWhen:()=>xt,withLatestFrom:()=>Mn.M,zip:()=>Pn,zipAll:()=>Wi});var _=m(1177);function C(ye){return function(J){return J.lift(new D(ye))}}class D{constructor(L){this.durationSelector=L}call(L,J){return J.subscribe(new G(L,this.durationSelector))}}class G extends _.Ds{constructor(L,J){super(L),this.durationSelector=J,this.hasValue=!1}_next(L){if(this.value=L,this.hasValue=!0,!this.throttled){let J;try{const{durationSelector:Qe}=this;J=Qe(L)}catch(Qe){return this.destination.error(Qe)}const be=(0,_.ft)(J,new _.IY(this));!be||be.closed?this.clearThrottle():this.add(this.throttled=be)}}clearThrottle(){const{value:L,hasValue:J,throttled:be}=this;be&&(this.remove(be),this.throttled=void 0,be.unsubscribe()),J&&(this.value=void 0,this.hasValue=!1,this.destination.next(L))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var z=m(353),B=m(8723);function Q(ye,L=z.P){return C(()=>(0,B.H)(ye,L))}function T(ye){return function(J){return J.lift(new F(ye))}}class F{constructor(L){this.closingNotifier=L}call(L,J){return J.subscribe(new q(L,this.closingNotifier))}}class q extends _.Ds{constructor(L,J){super(L),this.buffer=[],this.add((0,_.ft)(J,new _.IY(this)))}_next(L){this.buffer.push(L)}notifyNext(){const L=this.buffer;this.buffer=[],this.destination.next(L)}}var R=m(3489);function N(ye,L=null){return function(be){return be.lift(new W(ye,L))}}class W{constructor(L,J){this.bufferSize=L,this.startBufferEvery=J,this.subscriberClass=J&&L!==J?V:k}call(L,J){return J.subscribe(new this.subscriberClass(L,this.bufferSize,this.startBufferEvery))}}class k extends R.L{constructor(L,J){super(L),this.bufferSize=J,this.buffer=[]}_next(L){const J=this.buffer;J.push(L),J.length==this.bufferSize&&(this.destination.next(J),this.buffer=[])}_complete(){const L=this.buffer;L.length>0&&this.destination.next(L),super._complete()}}class V extends R.L{constructor(L,J,be){super(L),this.bufferSize=J,this.startBufferEvery=be,this.buffers=[],this.count=0}_next(L){const{bufferSize:J,startBufferEvery:be,buffers:Qe,count:jt}=this;this.count++,jt%be==0&&Qe.push([]);for(let On=Qe.length;On--;){const Di=Qe[On];Di.push(L),Di.length===J&&(Qe.splice(On,1),this.destination.next(Di))}}_complete(){const{buffers:L,destination:J}=this;for(;L.length>0;){let be=L.shift();be.length>0&&J.next(be)}super._complete()}}var ie=m(2866);function pe(ye){let L=arguments.length,J=z.P;(0,ie.K)(arguments[arguments.length-1])&&(J=arguments[arguments.length-1],L--);let be=null;L>=2&&(be=arguments[1]);let Qe=Number.POSITIVE_INFINITY;return L>=3&&(Qe=arguments[2]),function(On){return On.lift(new me(ye,be,Qe,J))}}class me{constructor(L,J,be,Qe){this.bufferTimeSpan=L,this.bufferCreationInterval=J,this.maxBufferSize=be,this.scheduler=Qe}call(L,J){return J.subscribe(new it(L,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class Ve{constructor(){this.buffer=[]}}class it extends R.L{constructor(L,J,be,Qe,jt){super(L),this.bufferTimeSpan=J,this.bufferCreationInterval=be,this.maxBufferSize=Qe,this.scheduler=jt,this.contexts=[];const On=this.openContext();if(this.timespanOnly=null==be||be<0,this.timespanOnly)this.add(On.closeAction=jt.schedule(je,J,{subscriber:this,context:On,bufferTimeSpan:J}));else{const Sr={bufferTimeSpan:J,bufferCreationInterval:be,subscriber:this,scheduler:jt};this.add(On.closeAction=jt.schedule(ot,J,{subscriber:this,context:On})),this.add(jt.schedule(qe,be,Sr))}}_next(L){const J=this.contexts,be=J.length;let Qe;for(let jt=0;jt<be;jt++){const On=J[jt],Di=On.buffer;Di.push(L),Di.length==this.maxBufferSize&&(Qe=On)}Qe&&this.onBufferFull(Qe)}_error(L){this.contexts.length=0,super._error(L)}_complete(){const{contexts:L,destination:J}=this;for(;L.length>0;){const be=L.shift();J.next(be.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(L){this.closeContext(L);const J=L.closeAction;if(J.unsubscribe(),this.remove(J),!this.closed&&this.timespanOnly){L=this.openContext();const be=this.bufferTimeSpan;this.add(L.closeAction=this.scheduler.schedule(je,be,{subscriber:this,context:L,bufferTimeSpan:be}))}}openContext(){const L=new Ve;return this.contexts.push(L),L}closeContext(L){this.destination.next(L.buffer);const J=this.contexts;(J?J.indexOf(L):-1)>=0&&J.splice(J.indexOf(L),1)}}function je(ye){const L=ye.subscriber,J=ye.context;J&&L.closeContext(J),L.closed||(ye.context=L.openContext(),ye.context.closeAction=this.schedule(ye,ye.bufferTimeSpan))}function qe(ye){const{bufferCreationInterval:L,bufferTimeSpan:J,subscriber:be,scheduler:Qe}=ye,jt=be.openContext();be.closed||(be.add(jt.closeAction=Qe.schedule(ot,J,{subscriber:be,context:jt})),this.schedule(ye,L))}function ot(ye){const{subscriber:L,context:J}=ye;L.closeContext(J)}var j=m(4096),Ie=m(448),bt=m(826);function vt(ye,L){return function(be){return be.lift(new Ct(ye,L))}}class Ct{constructor(L,J){this.openings=L,this.closingSelector=J}call(L,J){return J.subscribe(new Yt(L,this.openings,this.closingSelector))}}class Yt extends bt.L{constructor(L,J,be){super(L),this.closingSelector=be,this.contexts=[],this.add((0,Ie.D)(this,J))}_next(L){const J=this.contexts,be=J.length;for(let Qe=0;Qe<be;Qe++)J[Qe].buffer.push(L)}_error(L){const J=this.contexts;for(;J.length>0;){const be=J.shift();be.subscription.unsubscribe(),be.buffer=null,be.subscription=null}this.contexts=null,super._error(L)}_complete(){const L=this.contexts;for(;L.length>0;){const J=L.shift();this.destination.next(J.buffer),J.subscription.unsubscribe(),J.buffer=null,J.subscription=null}this.contexts=null,super._complete()}notifyNext(L,J){L?this.closeBuffer(L):this.openBuffer(J)}notifyComplete(L){this.closeBuffer(L.context)}openBuffer(L){try{const be=this.closingSelector.call(this,L);be&&this.trySubscribe(be)}catch(J){this._error(J)}}closeBuffer(L){const J=this.contexts;if(J&&L){const{buffer:be,subscription:Qe}=L;this.destination.next(be),J.splice(J.indexOf(L),1),this.remove(Qe),Qe.unsubscribe()}}trySubscribe(L){const J=this.contexts,Qe=new j.w,jt={buffer:[],subscription:Qe};J.push(jt);const On=(0,Ie.D)(this,L,jt);!On||On.closed?this.closeBuffer(jt):(On.context=jt,this.add(On),Qe.add(On))}}function on(ye){return function(L){return L.lift(new pt(ye))}}class pt{constructor(L){this.closingSelector=L}call(L,J){return J.subscribe(new Re(L,this.closingSelector))}}class Re extends _.Ds{constructor(L,J){super(L),this.closingSelector=J,this.subscribing=!1,this.openBuffer()}_next(L){this.buffer.push(L)}_complete(){const L=this.buffer;L&&this.destination.next(L),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let be,{closingSubscription:L}=this;L&&(this.remove(L),L.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:Qe}=this;be=Qe()}catch(Qe){return this.error(Qe)}L=new j.w,this.closingSubscription=L,this.add(L),this.subscribing=!0,L.add((0,_.ft)(be,new _.IY(this))),this.subscribing=!1}}var ut=m(7221),Qt=m(6053);function Un(ye){return L=>L.lift(new Qt.Ms(ye))}var dn=m(6688),Wt=m(3527);function fn(...ye){let L=null;return"function"==typeof ye[ye.length-1]&&(L=ye.pop()),1===ye.length&&(0,dn.k)(ye[0])&&(ye=ye[0].slice()),J=>J.lift.call((0,Wt.D)([J,...ye]),new Qt.Ms(L))}var Fn=m(1961);function ft(...ye){return L=>L.lift.call((0,Fn.z)(L,...ye))}var Wn=m(534),Cn=m(1406);function tr(ye,L){return(0,Cn.b)(()=>ye,L)}function sr(ye){return L=>L.lift(new li(ye,L))}class li{constructor(L,J){this.predicate=L,this.source=J}call(L,J){return J.subscribe(new $t(L,this.predicate,this.source))}}class $t extends R.L{constructor(L,J,be){super(L),this.predicate=J,this.source=be,this.count=0,this.index=0}_next(L){this.predicate?this._tryPredicate(L):this.count++}_tryPredicate(L){let J;try{J=this.predicate(L,this.index++,this.source)}catch(be){return void this.destination.error(be)}J&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}function Li(ye){return L=>L.lift(new Vi(ye))}class Vi{constructor(L){this.durationSelector=L}call(L,J){return J.subscribe(new gr(L,this.durationSelector))}}class gr extends _.Ds{constructor(L,J){super(L),this.durationSelector=J,this.hasValue=!1}_next(L){try{const J=this.durationSelector.call(this,L);J&&this._tryNext(L,J)}catch(J){this.destination.error(J)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(L,J){let be=this.durationSubscription;this.value=L,this.hasValue=!0,be&&(be.unsubscribe(),this.remove(be)),be=(0,_.ft)(J,new _.IY(this)),be&&!be.closed&&this.add(this.durationSubscription=be)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const L=this.value,J=this.durationSubscription;J&&(this.durationSubscription=void 0,J.unsubscribe(),this.remove(J)),this.value=void 0,this.hasValue=!1,super._next(L)}}}function mo(ye,L=z.P){return J=>J.lift(new ao(ye,L))}class ao{constructor(L,J){this.dueTime=L,this.scheduler=J}call(L,J){return J.subscribe(new lo(L,this.dueTime,this.scheduler))}}class lo extends R.L{constructor(L,J,be){super(L),this.dueTime=J,this.scheduler=be,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(L){this.clearDebounce(),this.lastValue=L,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(bn,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:L}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(L)}}clearDebounce(){const L=this.debouncedSubscription;null!==L&&(this.remove(L),L.unsubscribe(),this.debouncedSubscription=null)}}function bn(ye){ye.debouncedNext()}var Mi=m(7314),Lo=m(943),Xi=m(4202);function co(ye,L){return L?J=>new Mr(J,L).lift(new lr(ye)):J=>J.lift(new lr(ye))}class lr{constructor(L){this.delayDurationSelector=L}call(L,J){return J.subscribe(new Dr(L,this.delayDurationSelector))}}class Dr extends bt.L{constructor(L,J){super(L),this.delayDurationSelector=J,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(L,J,be,Qe,jt){this.destination.next(L),this.removeSubscription(jt),this.tryComplete()}notifyError(L,J){this._error(L)}notifyComplete(L){const J=this.removeSubscription(L);J&&this.destination.next(J),this.tryComplete()}_next(L){const J=this.index++;try{const be=this.delayDurationSelector(L,J);be&&this.tryDelay(be,L)}catch(be){this.destination.error(be)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(L){L.unsubscribe();const J=this.delayNotifierSubscriptions.indexOf(L);return-1!==J&&this.delayNotifierSubscriptions.splice(J,1),L.outerValue}tryDelay(L,J){const be=(0,Ie.D)(this,L,J);be&&!be.closed&&(this.destination.add(be),this.delayNotifierSubscriptions.push(be))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class Mr extends Xi.y{constructor(L,J){super(),this.source=L,this.subscriptionDelay=J}_subscribe(L){this.subscriptionDelay.subscribe(new Sn(L,this.source))}}class Sn extends R.L{constructor(L,J){super(),this.parent=L,this.source=J,this.sourceSubscribed=!1}_next(L){this.subscribeToSource()}_error(L){this.unsubscribe(),this.parent.error(L)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}function Ar(){return function(L){return L.lift(new So)}}class So{call(L,J){return J.subscribe(new Gi(L))}}class Gi extends R.L{constructor(L){super(L)}_next(L){L.observe(this.destination)}}function mn(ye,L){return J=>J.lift(new Jn(ye,L))}class Jn{constructor(L,J){this.keySelector=L,this.flushes=J}call(L,J){return J.subscribe(new qi(L,this.keySelector,this.flushes))}}class qi extends _.Ds{constructor(L,J,be){super(L),this.keySelector=J,this.values=new Set,be&&this.add((0,_.ft)(be,new _.IY(this)))}notifyNext(){this.values.clear()}notifyError(L){this._error(L)}_next(L){this.keySelector?this._useKeySelector(L):this._finalizeNext(L,L)}_useKeySelector(L){let J;const{destination:be}=this;try{J=this.keySelector(L)}catch(Qe){return void be.error(Qe)}this._finalizeNext(J,L)}_finalizeNext(L,J){const{values:be}=this;be.has(L)||(be.add(L),this.destination.next(J))}}var Yn=m(5778);function ur(ye,L){return(0,Yn.x)((J,be)=>L?L(J[ye],be[ye]):J[ye]===be[ye])}var xr=m(4231),ho=m(2198),As=m(4907),Qr=m(2986);function Go(ye,L){if(ye<0)throw new xr.W;const J=arguments.length>=2;return be=>be.pipe((0,ho.h)((Qe,jt)=>jt===ye),(0,Qr.q)(1),J?(0,Mi.d)(L):(0,As.T)(()=>new xr.W))}var ka=m(2334);function oi(ye,L){return J=>J.lift(new Oo(ye,L,J))}class Oo{constructor(L,J,be){this.predicate=L,this.thisArg=J,this.source=be}call(L,J){return J.subscribe(new nn(L,this.predicate,this.thisArg,this.source))}}class nn extends R.L{constructor(L,J,be,Qe){super(L),this.predicate=J,this.thisArg=be,this.source=Qe,this.index=0,this.thisArg=be||this}notifyComplete(L){this.destination.next(L),this.destination.complete()}_next(L){let J=!1;try{J=this.predicate.call(this.thisArg,L,this.index++,this.source)}catch(be){return void this.destination.error(be)}J||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function kt(){return ye=>ye.lift(new Mt)}class Mt{call(L,J){return J.subscribe(new Kt(L))}}class Kt extends _.Ds{constructor(L){super(L),this.hasCompleted=!1,this.hasSubscription=!1}_next(L){this.hasSubscription||(this.hasSubscription=!0,this.add((0,_.ft)(L,new _.IY(this))))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}var rn=m(4850);function Et(ye,L){return L?J=>J.pipe(Et((be,Qe)=>(0,Wt.D)(ye(be,Qe)).pipe((0,rn.U)((jt,On)=>L(be,jt,Qe,On))))):J=>J.lift(new ki(ye))}class ki{constructor(L){this.project=L}call(L,J){return J.subscribe(new Tn(L,this.project))}}class Tn extends _.Ds{constructor(L,J){super(L),this.project=J,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(L){this.hasSubscription||this.tryNext(L)}tryNext(L){let J;const be=this.index++;try{J=this.project(L,be)}catch(Qe){return void this.destination.error(Qe)}this.hasSubscription=!0,this._innerSub(J)}_innerSub(L){const J=new _.IY(this),be=this.destination;be.add(J);const Qe=(0,_.ft)(L,J);Qe!==J&&be.add(Qe)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function $i(ye,L=Number.POSITIVE_INFINITY,J){return L=(L||0)<1?Number.POSITIVE_INFINITY:L,be=>be.lift(new gi(ye,L,J))}class gi{constructor(L,J,be){this.project=L,this.concurrent=J,this.scheduler=be}call(L,J){return J.subscribe(new cr(L,this.project,this.concurrent,this.scheduler))}}class cr extends _.Ds{constructor(L,J,be,Qe){super(L),this.project=J,this.concurrent=be,this.scheduler=Qe,this.index=0,this.active=0,this.hasCompleted=!1,be<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(L){const{subscriber:J,result:be,value:Qe,index:jt}=L;J.subscribeToProjection(be,Qe,jt)}_next(L){const J=this.destination;if(J.closed)return void this._complete();const be=this.index++;if(this.active<this.concurrent){J.next(L);try{const{project:Qe}=this,jt=Qe(L,be);this.scheduler?this.destination.add(this.scheduler.schedule(cr.dispatch,0,{subscriber:this,result:jt,value:L,index:be})):this.subscribeToProjection(jt,L,be)}catch(Qe){J.error(Qe)}}else this.buffer.push(L)}subscribeToProjection(L,J,be){this.active++,this.destination.add((0,_.ft)(L,new _.IY(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(L){this._next(L)}notifyComplete(){const L=this.buffer;this.active--,L&&L.length>0&&this._next(L.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var Eo=m(537);function Ts(ye,L){if("function"!=typeof ye)throw new TypeError("predicate is not a function");return J=>J.lift(new wn(ye,J,!1,L))}class wn{constructor(L,J,be,Qe){this.predicate=L,this.source=J,this.yieldIndex=be,this.thisArg=Qe}call(L,J){return J.subscribe(new Ei(L,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class Ei extends R.L{constructor(L,J,be,Qe,jt){super(L),this.predicate=J,this.source=be,this.yieldIndex=Qe,this.thisArg=jt,this.index=0}notifyComplete(L){const J=this.destination;J.next(L),J.complete(),this.unsubscribe()}_next(L){const{predicate:J,thisArg:be}=this,Qe=this.index++;try{J.call(be||this,L,Qe,this.source)&&this.notifyComplete(this.yieldIndex?Qe:L)}catch(jt){this.destination.error(jt)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}function Kr(ye,L){return J=>J.lift(new wn(ye,J,!0,L))}var Zs=m(7224),td=m(4002);function Wo(){return function(L){return L.lift(new yc)}}class yc{call(L,J){return J.subscribe(new go(L))}}class go extends R.L{_next(L){}}function Ol(){return ye=>ye.lift(new Xd)}class Xd{call(L,J){return J.subscribe(new Pi(L))}}class Pi extends R.L{constructor(L){super(L)}notifyComplete(L){const J=this.destination;J.next(L),J.complete()}_next(L){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var $d=m(8127),ql=m(7604),Qd=m(9312);function nd(){return function(L){return L.lift(new ko)}}class ko{call(L,J){return J.subscribe(new Kd(L))}}class Kd extends R.L{constructor(L){super(L)}_next(L){this.destination.next(Qd.P.createNext(L))}_error(L){const J=this.destination;J.next(Qd.P.createError(L)),J.complete()}_complete(){const L=this.destination;L.next(Qd.P.createComplete()),L.complete()}}var Yl=m(8077);function Ra(ye){return(0,Yl.u)("function"==typeof ye?(J,be)=>ye(J,be)>0?J:be:(J,be)=>J>be?J:be)}var id=m(6787);function Ng(...ye){return L=>L.lift.call((0,id.T)(L,...ye))}var Pr=m(9146),fp=m(1709);function U1(ye,L,J=Number.POSITIVE_INFINITY){return"function"==typeof L?(0,fp.zg)(()=>ye,L,J):("number"==typeof L&&(J=L),(0,fp.zg)(()=>ye,J))}function eu(ye,L,J=Number.POSITIVE_INFINITY){return be=>be.lift(new mp(ye,L,J))}class mp{constructor(L,J,be){this.accumulator=L,this.seed=J,this.concurrent=be}call(L,J){return J.subscribe(new rd(L,this.accumulator,this.seed,this.concurrent))}}class rd extends _.Ds{constructor(L,J,be,Qe){super(L),this.accumulator=J,this.acc=be,this.concurrent=Qe,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(L){if(this.active<this.concurrent){const J=this.index++,be=this.destination;let Qe;try{const{accumulator:jt}=this;Qe=jt(this.acc,L,J)}catch(jt){return be.error(jt)}this.active++,this._innerSub(Qe)}else this.buffer.push(L)}_innerSub(L){const J=new _.IY(this),be=this.destination;be.add(J);const Qe=(0,_.ft)(L,J);Qe!==J&&be.add(Qe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(L){const{destination:J}=this;this.acc=L,this.hasValue=!0,J.next(L)}notifyComplete(){const L=this.buffer;this.active--,L.length>0?this._next(L.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function tu(ye){return(0,Yl.u)("function"==typeof ye?(J,be)=>ye(J,be)<0?J:be:(J,be)=>J<be?J:be)}var Br=m(2536),Do=m(7770);function gp(...ye){return 1===ye.length&&(0,dn.k)(ye[0])&&(ye=ye[0]),L=>L.lift(new Na(ye))}class Na{constructor(L){this.nextSources=L}call(L,J){return J.subscribe(new nu(L,this.nextSources))}}class nu extends _.Ds{constructor(L,J){super(L),this.destination=L,this.nextSources=J}notifyError(){this.subscribeToNextSource()}notifyComplete(){this.subscribeToNextSource()}_error(L){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const L=this.nextSources.shift();if(L){const J=new _.IY(this),be=this.destination;be.add(J);const Qe=(0,_.ft)(L,J);Qe!==J&&be.add(Qe)}else this.destination.complete()}}function iu(){return ye=>ye.lift(new od)}class od{call(L,J){return J.subscribe(new Fa(L))}}class Fa extends R.L{constructor(L){super(L),this.hasPrev=!1}_next(L){let J;this.hasPrev?J=[this.prev,L]:this.hasPrev=!0,this.prev=L,J&&this.destination.next(J)}}var j1=m(5884);function cx(ye,L){return J=>[(0,ho.h)(ye,L)(J),(0,ho.h)((0,j1.f)(ye,L))(J)]}function nl(...ye){const L=ye.length;if(0===L)throw new Error("list of properties cannot be empty.");return J=>(0,rn.U)(function Fg(ye,L){return be=>{let Qe=be;for(let jt=0;jt<L;jt++){const On=Qe?.[ye[jt]];if(void 0===On)return;Qe=On}return Qe}}(ye,L))(J)}var Js=m(8929);function dx(ye){return ye?(0,Br.O)(()=>new Js.xQ,ye):(0,Br.O)(new Js.xQ)}var hx=m(591);function Zd(ye){return L=>(0,Br.O)(new hx.X(ye))(L)}var Jd=m(2185);function Lg(){return ye=>(0,Br.O)(new Jd.c)(ye)}var V1=m(839);function vp(ye,L,J,be){J&&"function"!=typeof J&&(be=J);const Qe="function"==typeof J?J:void 0,jt=new V1.t(ye,L,be);return On=>(0,Br.O)(()=>jt,Qe)(On)}var H1=m(1946);function Bg(...ye){return function(J){return 1===ye.length&&(0,dn.k)(ye[0])&&(ye=ye[0]),J.lift.call((0,H1.S3)(J,...ye))}}var G1=m(8896);function W1(ye=-1){return L=>0===ye?(0,G1.c)():L.lift(new q1(ye<0?-1:ye-1,L))}class q1{constructor(L,J){this.count=L,this.source=J}call(L,J){return J.subscribe(new Y1(L,this.count,this.source))}}class Y1 extends R.L{constructor(L,J,be){super(L),this.count=J,this.source=be}complete(){if(!this.isStopped){const{source:L,count:J}=this;if(0===J)return super.complete();J>-1&&(this.count=J-1),L.subscribe(this._unsubscribeAndRecycle())}}}function zg(ye){return L=>L.lift(new Vf(ye))}class Vf{constructor(L){this.notifier=L}call(L,J){return J.subscribe(new Ug(L,this.notifier,J))}}class Ug extends _.Ds{constructor(L,J,be){super(L),this.notifier=J,this.source=be,this.sourceIsBeingSubscribedTo=!0}notifyNext(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}_unsubscribe(){const{notifications:L,retriesSubscription:J}=this;L&&(L.unsubscribe(),this.notifications=void 0),J&&(J.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}_unsubscribeAndRecycle(){const{_unsubscribe:L}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=L,this}subscribeToRetries(){let L;this.notifications=new Js.xQ;try{const{notifier:J}=this;L=J(this.notifications)}catch{return super.complete()}this.retries=L,this.retriesSubscription=(0,_.ft)(L,new _.IY(this))}}function ux(ye=-1){return L=>L.lift(new px(ye,L))}class px{constructor(L,J){this.count=L,this.source=J}call(L,J){return J.subscribe(new sd(L,this.count,this.source))}}class sd extends R.L{constructor(L,J,be){super(L),this.count=J,this.source=be}error(L){if(!this.isStopped){const{source:J,count:be}=this;if(0===be)return super.error(L);be>-1&&(this.count=be-1),J.subscribe(this._unsubscribeAndRecycle())}}}function X1(ye){return L=>L.lift(new gs(ye,L))}class gs{constructor(L,J){this.notifier=L,this.source=J}call(L,J){return J.subscribe(new jg(L,this.notifier,this.source))}}class jg extends _.Ds{constructor(L,J,be){super(L),this.notifier=J,this.source=be}error(L){if(!this.isStopped){let J=this.errors,be=this.retries,Qe=this.retriesSubscription;if(be)this.errors=void 0,this.retriesSubscription=void 0;else{J=new Js.xQ;try{const{notifier:jt}=this;be=jt(J)}catch(jt){return super.error(jt)}Qe=(0,_.ft)(be,new _.IY(this))}this._unsubscribeAndRecycle(),this.errors=J,this.retries=be,this.retriesSubscription=Qe,J.next(L)}}_unsubscribe(){const{errors:L,retriesSubscription:J}=this;L&&(L.unsubscribe(),this.errors=void 0),J&&(J.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:L}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=L,this.source.subscribe(this)}}var $1=m(4327);function Vg(ye){return L=>L.lift(new yp(ye))}class yp{constructor(L){this.notifier=L}call(L,J){const be=new Hf(L),Qe=J.subscribe(be);return Qe.add((0,_.ft)(this.notifier,new _.IY(be))),Qe}}class Hf extends _.Ds{constructor(){super(...arguments),this.hasValue=!1}_next(L){this.value=L,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function Gf(ye,L=z.P){return J=>J.lift(new bp(ye,L))}class bp{constructor(L,J){this.period=L,this.scheduler=J}call(L,J){return J.subscribe(new Hg(L,this.period,this.scheduler))}}class Hg extends R.L{constructor(L,J,be){super(L),this.period=J,this.scheduler=be,this.hasValue=!1,this.add(be.schedule(ea,J,{subscriber:this,period:J}))}_next(L){this.lastValue=L,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function ea(ye){let{subscriber:L,period:J}=ye;L.notifyNext(),this.schedule(ye,J)}var _p=m(2014);function Q1(ye,L){return J=>J.lift(new Wf(ye,L))}class Wf{constructor(L,J){this.compareTo=L,this.comparator=J}call(L,J){return J.subscribe(new ru(L,this.compareTo,this.comparator))}}class ru extends R.L{constructor(L,J,be){super(L),this.compareTo=J,this.comparator=be,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(J.subscribe(new K1(L,this)))}_next(L){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(L),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:L,_b:J,comparator:be}=this;for(;L.length>0&&J.length>0;){let Qe=L.shift(),jt=J.shift(),On=!1;try{On=be?be(Qe,jt):Qe===jt}catch(Di){this.destination.error(Di)}On||this.emit(!1)}}emit(L){const{destination:J}=this;J.next(L),J.complete()}nextB(L){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(L),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class K1 extends R.L{constructor(L,J){super(L),this.parent=J}_next(L){this.parent.nextB(L)}_error(L){this.parent.error(L),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}var vo=m(8117);function Z1(ye,L,J){let be;return be=ye&&"object"==typeof ye?ye:{bufferSize:ye,windowTime:L,refCount:!1,scheduler:J},Qe=>Qe.lift(function fx({bufferSize:ye=Number.POSITIVE_INFINITY,windowTime:L=Number.POSITIVE_INFINITY,refCount:J,scheduler:be}){let Qe,On,jt=0,Di=!1,Sr=!1;return function(Yo){let Kl;jt++,!Qe||Di?(Di=!1,Qe=new V1.t(ye,L,be),Kl=Qe.subscribe(this),On=Yo.subscribe({next(Wg){Qe.next(Wg)},error(Wg){Di=!0,Qe.error(Wg)},complete(){Sr=!0,On=void 0,Qe.complete()}}),Sr&&(On=void 0)):Kl=Qe.subscribe(this),this.add(()=>{jt--,Kl.unsubscribe(),Kl=void 0,On&&!Sr&&J&&0===jt&&(On.unsubscribe(),On=void 0,Qe=void 0)})}}(be))}var xp=m(4450);function M(ye){return L=>L.lift(new I(ye,L))}class I{constructor(L,J){this.predicate=L,this.source=J}call(L,J){return J.subscribe(new K(L,this.predicate,this.source))}}class K extends R.L{constructor(L,J,be){super(L),this.predicate=J,this.source=be,this.seenValue=!1,this.index=0}applySingleValue(L){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=L)}_next(L){const J=this.index++;this.predicate?this.tryNext(L,J):this.applySingleValue(L)}tryNext(L,J){try{this.predicate(L,J,this.source)&&this.applySingleValue(L)}catch(be){this.destination.error(be)}}_complete(){const L=this.destination;this.index>0?(L.next(this.seenValue?this.singleValue:void 0),L.complete()):L.error(new xp.K)}}var ne=m(1307);function ae(ye){return L=>L.lift(new le(ye))}class le{constructor(L){if(this._skipCount=L,this._skipCount<0)throw new xr.W}call(L,J){return J.subscribe(0===this._skipCount?new R.L(L):new ge(L,this._skipCount))}}class ge extends R.L{constructor(L,J){super(L),this._skipCount=J,this._count=0,this._ring=new Array(J)}_next(L){const J=this._skipCount,be=this._count++;if(be<J)this._ring[be]=L;else{const Qe=be%J,jt=this._ring,On=jt[Qe];jt[Qe]=L,this.destination.next(On)}}}function He(ye){return L=>L.lift(new Fe(ye))}class Fe{constructor(L){this.notifier=L}call(L,J){return J.subscribe(new Ke(L,this.notifier))}}class Ke extends _.Ds{constructor(L,J){super(L),this.hasValue=!1;const be=new _.IY(this);this.add(be),this.innerSubscription=be;const Qe=(0,_.ft)(J,be);Qe!==be&&(this.add(Qe),this.innerSubscription=Qe)}_next(L){this.hasValue&&super._next(L)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function Pt(ye){return L=>L.lift(new st(ye))}class st{constructor(L){this.predicate=L}call(L,J){return J.subscribe(new mt(L,this.predicate))}}class mt extends R.L{constructor(L,J){super(L),this.predicate=J,this.skipping=!0,this.index=0}_next(L){const J=this.destination;this.skipping&&this.tryCallPredicate(L),this.skipping||J.next(L)}tryCallPredicate(L){try{const J=this.predicate(L,this.index++);this.skipping=Boolean(J)}catch(J){this.destination.error(J)}}}var Zt=m(1059),hi=m(8139),Qi=m(4241);class Si extends Xi.y{constructor(L,J=0,be=hi.e){super(),this.source=L,this.delayTime=J,this.scheduler=be,(!(0,Qi.k)(J)||J<0)&&(this.delayTime=0),(!be||"function"!=typeof be.schedule)&&(this.scheduler=hi.e)}static create(L,J=0,be=hi.e){return new Si(L,J,be)}static dispatch(L){const{source:J,subscriber:be}=L;return this.add(J.subscribe(be))}_subscribe(L){return this.scheduler.schedule(Si.dispatch,this.delayTime,{source:this.source,subscriber:L})}}function qo(ye,L=0){return function(be){return be.lift(new Bo(ye,L))}}class Bo{constructor(L,J){this.scheduler=L,this.delay=J}call(L,J){return new Si(J,this.delay,this.scheduler).subscribe(L)}}var ya=m(7545),Ut=m(5379);function In(){return(0,ya.w)(Ut.y)}function Ln(ye,L){return L?(0,ya.w)(()=>ye,L):(0,ya.w)(()=>ye)}var tn=m(2821),Bi=m(7625),eh=m(4290),ad=m(2994);const Ro={leading:!0,trailing:!1};function ld(ye,L=Ro){return J=>J.lift(new La(ye,!!L.leading,!!L.trailing))}class La{constructor(L,J,be){this.durationSelector=L,this.leading=J,this.trailing=be}call(L,J){return J.subscribe(new cd(L,this.durationSelector,this.leading,this.trailing))}}class cd extends _.Ds{constructor(L,J,be,Qe){super(L),this.destination=L,this.durationSelector=J,this._leading=be,this._trailing=Qe,this._hasValue=!1}_next(L){this._hasValue=!0,this._sendValue=L,this._throttled||(this._leading?this.send():this.throttle(L))}send(){const{_hasValue:L,_sendValue:J}=this;L&&(this.destination.next(J),this.throttle(J)),this._hasValue=!1,this._sendValue=void 0}throttle(L){const J=this.tryDurationSelector(L);J&&this.add(this._throttled=(0,_.ft)(J,new _.IY(this)))}tryDurationSelector(L){try{return this.durationSelector(L)}catch(J){return this.destination.error(J),null}}throttlingDone(){const{_throttled:L,_trailing:J}=this;L&&L.unsubscribe(),this._throttled=void 0,J&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function bc(ye,L=z.P,J=Ro){return be=>be.lift(new il(ye,L,J.leading,J.trailing))}class il{constructor(L,J,be,Qe){this.duration=L,this.scheduler=J,this.leading=be,this.trailing=Qe}call(L,J){return J.subscribe(new Cp(L,this.duration,this.scheduler,this.leading,this.trailing))}}class Cp extends R.L{constructor(L,J,be,Qe,jt){super(L),this.duration=J,this.scheduler=be,this.leading=Qe,this.trailing=jt,this._hasTrailingValue=!1,this._trailingValue=null}_next(L){this.throttled?this.trailing&&(this._trailingValue=L,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(uo,this.duration,{subscriber:this})),this.leading?this.destination.next(L):this.trailing&&(this._trailingValue=L,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const L=this.throttled;L&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),L.unsubscribe(),this.remove(L),this.throttled=null)}}function uo(ye){const{subscriber:L}=ye;L.clearThrottle()}var ns=m(8514);function Gg(ye=z.P){return L=>(0,ns.P)(()=>L.pipe((0,_p.R)(({current:J},be)=>({value:be,current:ye.now(),last:J}),{current:ye.now(),value:void 0,last:void 0}),(0,rn.U)(({current:J,last:be,value:Qe})=>new th(Qe,J-be))))}class th{constructor(L,J){this.value=L,this.interval=J}}var Xl=m(854),Cr=m(2697);function nh(ye,L,J=z.P){return be=>{let Qe=(0,Cr.J)(ye),jt=Qe?+ye-J.now():Math.abs(ye);return be.lift(new rl(jt,Qe,L,J))}}class rl{constructor(L,J,be,Qe){this.waitFor=L,this.absoluteTimeout=J,this.withObservable=be,this.scheduler=Qe}call(L,J){return J.subscribe(new _c(L,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class _c extends _.Ds{constructor(L,J,be,Qe,jt){super(L),this.absoluteTimeout=J,this.waitFor=be,this.withObservable=Qe,this.scheduler=jt,this.scheduleTimeout()}static dispatchTimeout(L){const{withObservable:J}=L;L._unsubscribeAndRecycle(),L.add((0,_.ft)(J,new _.IY(L)))}scheduleTimeout(){const{action:L}=this;L?this.action=L.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(_c.dispatchTimeout,this.waitFor,this))}_next(L){this.absoluteTimeout||this.scheduleTimeout(),super._next(L)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var qf=m(1737);function Yf(ye,L=z.P){return nh(ye,(0,qf._)(new Xl.W),L)}function Xf(ye=z.P){return(0,rn.U)(L=>new $l(L,ye.now()))}class $l{constructor(L,J){this.value=L,this.timestamp=J}}var $f=m(864);function Ql(ye){return function(J){return J.lift(new wp(ye))}}class wp{constructor(L){this.windowBoundaries=L}call(L,J){const be=new ih(L),Qe=J.subscribe(be);return Qe.closed||be.add((0,_.ft)(this.windowBoundaries,new _.IY(be))),Qe}}class ih extends _.Ds{constructor(L){super(L),this.window=new Js.xQ,L.next(this.window)}notifyNext(){this.openWindow()}notifyError(L){this._error(L)}notifyComplete(){this._complete()}_next(L){this.window.next(L)}_error(L){this.window.error(L),this.destination.error(L)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const L=this.window;L&&L.complete();const J=this.destination,be=this.window=new Js.xQ;J.next(be)}}function ou(ye,L=0){return function(be){return be.lift(new su(ye,L))}}class su{constructor(L,J){this.windowSize=L,this.startWindowEvery=J}call(L,J){return J.subscribe(new Mp(L,this.windowSize,this.startWindowEvery))}}class Mp extends R.L{constructor(L,J,be){super(L),this.destination=L,this.windowSize=J,this.startWindowEvery=be,this.windows=[new Js.xQ],this.count=0,L.next(this.windows[0])}_next(L){const J=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,be=this.destination,Qe=this.windowSize,jt=this.windows,On=jt.length;for(let Sr=0;Sr<On&&!this.closed;Sr++)jt[Sr].next(L);const Di=this.count-Qe+1;if(Di>=0&&Di%J==0&&!this.closed&&jt.shift().complete(),++this.count%J==0&&!this.closed){const Sr=new Js.xQ;jt.push(Sr),be.next(Sr)}}_error(L){const J=this.windows;if(J)for(;J.length>0&&!this.closed;)J.shift().error(L);this.destination.error(L)}_complete(){const L=this.windows;if(L)for(;L.length>0&&!this.closed;)L.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}function Qf(ye){let L=z.P,J=null,be=Number.POSITIVE_INFINITY;return(0,ie.K)(arguments[3])&&(L=arguments[3]),(0,ie.K)(arguments[2])?L=arguments[2]:(0,Qi.k)(arguments[2])&&(be=Number(arguments[2])),(0,ie.K)(arguments[1])?L=arguments[1]:(0,Qi.k)(arguments[1])&&(J=Number(arguments[1])),function(jt){return jt.lift(new Pp(ye,J,be,L))}}class Pp{constructor(L,J,be,Qe){this.windowTimeSpan=L,this.windowCreationInterval=J,this.maxWindowSize=be,this.scheduler=Qe}call(L,J){return J.subscribe(new is(L,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class Kf extends Js.xQ{constructor(){super(...arguments),this._numberOfNextedValues=0}next(L){this._numberOfNextedValues++,super.next(L)}get numberOfNextedValues(){return this._numberOfNextedValues}}class is extends R.L{constructor(L,J,be,Qe,jt){super(L),this.destination=L,this.windowTimeSpan=J,this.windowCreationInterval=be,this.maxWindowSize=Qe,this.scheduler=jt,this.windows=[];const On=this.openWindow();if(null!==be&&be>=0){const Sr={windowTimeSpan:J,windowCreationInterval:be,subscriber:this,scheduler:jt};this.add(jt.schedule(Zf,J,{subscriber:this,window:On,context:null})),this.add(jt.schedule(zr,be,Sr))}else this.add(jt.schedule(xc,J,{subscriber:this,window:On,windowTimeSpan:J}))}_next(L){const J=this.windows,be=J.length;for(let Qe=0;Qe<be;Qe++){const jt=J[Qe];jt.closed||(jt.next(L),jt.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(jt))}}_error(L){const J=this.windows;for(;J.length>0;)J.shift().error(L);this.destination.error(L)}_complete(){const L=this.windows;for(;L.length>0;){const J=L.shift();J.closed||J.complete()}this.destination.complete()}openWindow(){const L=new Kf;return this.windows.push(L),this.destination.next(L),L}closeWindow(L){L.complete();const J=this.windows;J.splice(J.indexOf(L),1)}}function xc(ye){const{subscriber:L,windowTimeSpan:J,window:be}=ye;be&&L.closeWindow(be),ye.window=L.openWindow(),this.schedule(ye,J)}function zr(ye){const{windowTimeSpan:L,subscriber:J,scheduler:be,windowCreationInterval:Qe}=ye,jt=J.openWindow();let Di={action:this,subscription:null};Di.subscription=be.schedule(Zf,L,{subscriber:J,window:jt,context:Di}),this.add(Di.subscription),this.schedule(ye,Qe)}function Zf(ye){const{subscriber:L,window:J,context:be}=ye;be&&be.action&&be.subscription&&be.action.remove(be.subscription),L.closeWindow(J)}function De(ye,L){return J=>J.lift(new Ye(ye,L))}class Ye{constructor(L,J){this.openings=L,this.closingSelector=J}call(L,J){return J.subscribe(new dt(L,this.openings,this.closingSelector))}}class dt extends bt.L{constructor(L,J,be){super(L),this.openings=J,this.closingSelector=be,this.contexts=[],this.add(this.openSubscription=(0,Ie.D)(this,J,J))}_next(L){const{contexts:J}=this;if(J){const be=J.length;for(let Qe=0;Qe<be;Qe++)J[Qe].window.next(L)}}_error(L){const{contexts:J}=this;if(this.contexts=null,J){const be=J.length;let Qe=-1;for(;++Qe<be;){const jt=J[Qe];jt.window.error(L),jt.subscription.unsubscribe()}}super._error(L)}_complete(){const{contexts:L}=this;if(this.contexts=null,L){const J=L.length;let be=-1;for(;++be<J;){const Qe=L[be];Qe.window.complete(),Qe.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:L}=this;if(this.contexts=null,L){const J=L.length;let be=-1;for(;++be<J;){const Qe=L[be];Qe.window.unsubscribe(),Qe.subscription.unsubscribe()}}}notifyNext(L,J,be,Qe,jt){if(L===this.openings){let On;try{const{closingSelector:Kl}=this;On=Kl(J)}catch(Kl){return this.error(Kl)}const Di=new Js.xQ,Sr=new j.w,Cc={window:Di,subscription:Sr};this.contexts.push(Cc);const Yo=(0,Ie.D)(this,On,Cc);Yo.closed?this.closeWindow(this.contexts.length-1):(Yo.context=Cc,Sr.add(Yo)),this.destination.next(Di)}else this.closeWindow(this.contexts.indexOf(L))}notifyError(L){this.error(L)}notifyComplete(L){L!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(L.context))}closeWindow(L){if(-1===L)return;const{contexts:J}=this,be=J[L],{window:Qe,subscription:jt}=be;J.splice(L,1),Qe.complete(),jt.unsubscribe()}}function xt(ye){return function(J){return J.lift(new Rt(ye))}}class Rt{constructor(L){this.closingSelector=L}call(L,J){return J.subscribe(new an(L,this.closingSelector))}}class an extends bt.L{constructor(L,J){super(L),this.destination=L,this.closingSelector=J,this.openWindow()}notifyNext(L,J,be,Qe,jt){this.openWindow(jt)}notifyError(L){this._error(L)}notifyComplete(L){this.openWindow(L)}_next(L){this.window.next(L)}_error(L){this.window.error(L),this.destination.error(L),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(L=null){L&&(this.remove(L),L.unsubscribe());const J=this.window;J&&J.complete();const be=this.window=new Js.xQ;let Qe;this.destination.next(be);try{const{closingSelector:jt}=this;Qe=jt()}catch(jt){return this.destination.error(jt),void this.window.error(jt)}this.add(this.closingNotification=(0,Ie.D)(this,Qe))}}var Mn=m(7168),jn=m(1746);function Pn(...ye){return function(J){return J.lift.call((0,jn.$R)(J,...ye))}}function Wi(ye){return L=>L.lift(new jn.mx(ye))}},811:(u,f,m)=>{"use strict";m(2181)},4942:function(module,exports,__webpack_require__){var f;typeof navigator<"u"&&(f=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(u){_useWebWorker=!!u},getWebWorker=function(){return _useWebWorker},setLocationHref=function(u){locationHref=u},getLocationHref=function(){return locationHref};function createTag(u){return document.createElement(u)}function extendPrototype(u,f){var m,_,C=u.length;for(m=0;m<C;m+=1)for(var D in _=u[m].prototype)Object.prototype.hasOwnProperty.call(_,D)&&(f.prototype[D]=_[D])}function getDescriptor(u,f){return Object.getOwnPropertyDescriptor(u,f)}function createProxyFunction(u){function f(){}return f.prototype=u,f}var audioControllerFactory=function(){function u(f){this.audios=[],this.audioFactory=f,this._volume=1,this._isMuted=!1}return u.prototype={addAudio:function(f){this.audios.push(f)},pause:function(){var f,m=this.audios.length;for(f=0;f<m;f+=1)this.audios[f].pause()},resume:function(){var f,m=this.audios.length;for(f=0;f<m;f+=1)this.audios[f].resume()},setRate:function(f){var m,_=this.audios.length;for(m=0;m<_;m+=1)this.audios[m].setRate(f)},createAudio:function(f){return this.audioFactory?this.audioFactory(f):window.Howl?new window.Howl({src:[f]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(f){this.audioFactory=f},setVolume:function(f){this._volume=f,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var f,m=this.audios.length;for(f=0;f<m;f+=1)this.audios[f].volume(this._volume*(this._isMuted?0:1))}},function(){return new u}}(),createTypedArray=function(){function u(f,m){var _,C=0,D=[];switch(f){case"int16":case"uint8c":_=1;break;default:_=1.1}for(C=0;C<m;C+=1)D.push(_);return D}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(f,m){return"float32"===f?new Float32Array(m):"int16"===f?new Int16Array(m):"uint8c"===f?new Uint8ClampedArray(m):u(f,m)}:u}();function createSizedArray(u){return Array.apply(null,{length:u})}function _typeof$6(u){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}var subframeEnabled=!0,expressionsPlugin=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}(function(){var u,f=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],m=f.length;for(u=0;u<m;u+=1)BMMath[f[u]]=Math[f[u]]})(),BMMath.random=Math.random,BMMath.abs=function(u){if("object"===_typeof$6(u)&&u.length){var f,m=createSizedArray(u.length),_=u.length;for(f=0;f<_;f+=1)m[f]=Math.abs(u[f]);return m}return Math.abs(u)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(u){_shouldRoundValues=!!u}function bmRnd(u){return _shouldRoundValues?Math.round(u):u}function styleDiv(u){u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.display="block",u.style.transformOrigin="0 0",u.style.webkitTransformOrigin="0 0",u.style.backfaceVisibility="visible",u.style.webkitBackfaceVisibility="visible",u.style.transformStyle="preserve-3d",u.style.webkitTransformStyle="preserve-3d",u.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(u,f,m,_){this.type=u,this.currentTime=f,this.totalTime=m,this.direction=_<0?-1:1}function BMCompleteEvent(u,f){this.type=u,this.direction=f<0?-1:1}function BMCompleteLoopEvent(u,f,m,_){this.type=u,this.currentLoop=m,this.totalLoops=f,this.direction=_<0?-1:1}function BMSegmentStartEvent(u,f,m){this.type=u,this.firstFrame=f,this.totalFrames=m}function BMDestroyEvent(u,f){this.type=u,this.target=f}function BMRenderFrameErrorEvent(u,f){this.type="renderFrameError",this.nativeError=u,this.currentTime=f}function BMConfigErrorEvent(u){this.type="configError",this.nativeError=u}function BMAnimationConfigErrorEvent(u,f){this.type=u,this.nativeError=f}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(u,f,m){var _,C,D,G,z,B,Q,T;switch(B=m*(1-f),Q=m*(1-(z=6*u-(G=Math.floor(6*u)))*f),T=m*(1-(1-z)*f),G%6){case 0:_=m,C=T,D=B;break;case 1:_=Q,C=m,D=B;break;case 2:_=B,C=m,D=T;break;case 3:_=B,C=Q,D=m;break;case 4:_=T,C=B,D=m;break;case 5:_=m,C=B,D=Q}return[_,C,D]}function RGBtoHSV(u,f,m){var _,C=Math.max(u,f,m),D=Math.min(u,f,m),G=C-D,z=0===C?0:G/C,B=C/255;switch(C){case D:_=0;break;case u:_=f-m+G*(f<m?6:0),_/=6*G;break;case f:_=m-u+2*G,_/=6*G;break;case m:_=u-f+4*G,_/=6*G}return[_,z,B]}function addSaturationToRGB(u,f){var m=RGBtoHSV(255*u[0],255*u[1],255*u[2]);return m[1]+=f,m[1]>1?m[1]=1:m[1]<=0&&(m[1]=0),HSVtoRGB(m[0],m[1],m[2])}function addBrightnessToRGB(u,f){var m=RGBtoHSV(255*u[0],255*u[1],255*u[2]);return m[2]+=f,m[2]>1?m[2]=1:m[2]<0&&(m[2]=0),HSVtoRGB(m[0],m[1],m[2])}function addHueToRGB(u,f){var m=RGBtoHSV(255*u[0],255*u[1],255*u[2]);return m[0]+=f/360,m[0]>1?m[0]-=1:m[0]<0&&(m[0]+=1),HSVtoRGB(m[0],m[1],m[2])}var rgbToHex=function(){var u,f,m=[];for(u=0;u<256;u+=1)f=u.toString(16),m[u]=1===f.length?"0"+f:f;return function(_,C,D){return _<0&&(_=0),C<0&&(C=0),D<0&&(D=0),"#"+m[_]+m[C]+m[D]}}(),setSubframeEnabled=function(u){subframeEnabled=!!u},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(u){expressionsPlugin=u},getExpressionsPlugin=function(){return expressionsPlugin},setDefaultCurveSegments=function(u){defaultCurveSegments=u},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(u){idPrefix$1=u},getIdPrefix=function(){return idPrefix$1};function createNS(u){return document.createElementNS(svgNS,u)}function _typeof$5(u){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}var dataManager=function(){var u,f,m=1,_=[],C={onmessage:function(){},postMessage:function(B){u({data:B})}},D={postMessage:function(B){C.onmessage({data:B})}};function G(){f||((f=function(B){if(window.Worker&&window.Blob&&getWebWorker()){var Q=new Blob(["var _workerSelf = self; self.onmessage = ",B.toString()],{type:"text/javascript"}),T=URL.createObjectURL(Q);return new Worker(T)}return u=B,C}(function(B){if(D.dataManager||(D.dataManager=function(){function T(je,qe){var ot,j,Ie,bt,vt,Ct,Yt=je.length;for(j=0;j<Yt;j+=1)if("ks"in(ot=je[j])&&!ot.completed){if(ot.completed=!0,ot.tt&&(je[j-1].td=ot.tt),ot.hasMask){var on=ot.masksProperties;for(bt=on.length,Ie=0;Ie<bt;Ie+=1)if(on[Ie].pt.k.i)R(on[Ie].pt.k);else for(Ct=on[Ie].pt.k.length,vt=0;vt<Ct;vt+=1)on[Ie].pt.k[vt].s&&R(on[Ie].pt.k[vt].s[0]),on[Ie].pt.k[vt].e&&R(on[Ie].pt.k[vt].e[0])}0===ot.ty?(ot.layers=F(ot.refId,qe),T(ot.layers,qe)):4===ot.ty&&q(ot.shapes)}}function F(je,qe){var ot=function(j,Ie){for(var bt=0,vt=Ie.length;bt<vt;){if(Ie[bt].id===j)return Ie[bt];bt+=1}return null}(je,qe);return ot?ot.layers.__used?JSON.parse(JSON.stringify(ot.layers)):(ot.layers.__used=!0,ot.layers):null}function q(je){var qe,ot,j;for(qe=je.length-1;qe>=0;qe-=1)if("sh"===je[qe].ty)if(je[qe].ks.k.i)R(je[qe].ks.k);else for(j=je[qe].ks.k.length,ot=0;ot<j;ot+=1)je[qe].ks.k[ot].s&&R(je[qe].ks.k[ot].s[0]),je[qe].ks.k[ot].e&&R(je[qe].ks.k[ot].e[0]);else"gr"===je[qe].ty&&q(je[qe].it)}function R(je){var qe,ot=je.i.length;for(qe=0;qe<ot;qe+=1)je.i[qe][0]+=je.v[qe][0],je.i[qe][1]+=je.v[qe][1],je.o[qe][0]+=je.v[qe][0],je.o[qe][1]+=je.v[qe][1]}function N(je,qe){var ot=qe?qe.split("."):[100,100,100];return je[0]>ot[0]||!(ot[0]>je[0])&&(je[1]>ot[1]||!(ot[1]>je[1])&&(je[2]>ot[2]||!(ot[2]>je[2])&&null))}var W,k=function(){var je=[4,4,14];function qe(ot){var j,Ie,bt,vt=ot.length;for(j=0;j<vt;j+=1)5===ot[j].ty&&(bt=(Ie=ot[j]).t.d,Ie.t.d={k:[{s:bt,t:0}]})}return function(ot){if(N(je,ot.v)&&(qe(ot.layers),ot.assets)){var j,Ie=ot.assets.length;for(j=0;j<Ie;j+=1)ot.assets[j].layers&&qe(ot.assets[j].layers)}}}(),V=(W=[4,7,99],function(je){if(je.chars&&!N(W,je.v)){var qe,ot=je.chars.length;for(qe=0;qe<ot;qe+=1){var j=je.chars[qe];j.data&&j.data.shapes&&(q(j.data.shapes),j.data.ip=0,j.data.op=99999,j.data.st=0,j.data.sr=1,j.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},je.chars[qe].t||(j.data.shapes.push({ty:"no"}),j.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),ie=function(){var je=[5,7,15];function qe(ot){var j,Ie,bt=ot.length;for(j=0;j<bt;j+=1)5===ot[j].ty&&(Ie=void 0,"number"==typeof(Ie=ot[j].t.p).a&&(Ie.a={a:0,k:Ie.a}),"number"==typeof Ie.p&&(Ie.p={a:0,k:Ie.p}),"number"==typeof Ie.r&&(Ie.r={a:0,k:Ie.r}))}return function(ot){if(N(je,ot.v)&&(qe(ot.layers),ot.assets)){var j,Ie=ot.assets.length;for(j=0;j<Ie;j+=1)ot.assets[j].layers&&qe(ot.assets[j].layers)}}}(),pe=function(){var je=[4,1,9];function qe(j){var Ie,bt,vt,Ct=j.length;for(Ie=0;Ie<Ct;Ie+=1)if("gr"===j[Ie].ty)qe(j[Ie].it);else if("fl"===j[Ie].ty||"st"===j[Ie].ty)if(j[Ie].c.k&&j[Ie].c.k[0].i)for(vt=j[Ie].c.k.length,bt=0;bt<vt;bt+=1)j[Ie].c.k[bt].s&&(j[Ie].c.k[bt].s[0]/=255,j[Ie].c.k[bt].s[1]/=255,j[Ie].c.k[bt].s[2]/=255,j[Ie].c.k[bt].s[3]/=255),j[Ie].c.k[bt].e&&(j[Ie].c.k[bt].e[0]/=255,j[Ie].c.k[bt].e[1]/=255,j[Ie].c.k[bt].e[2]/=255,j[Ie].c.k[bt].e[3]/=255);else j[Ie].c.k[0]/=255,j[Ie].c.k[1]/=255,j[Ie].c.k[2]/=255,j[Ie].c.k[3]/=255}function ot(j){var Ie,bt=j.length;for(Ie=0;Ie<bt;Ie+=1)4===j[Ie].ty&&qe(j[Ie].shapes)}return function(j){if(N(je,j.v)&&(ot(j.layers),j.assets)){var Ie,bt=j.assets.length;for(Ie=0;Ie<bt;Ie+=1)j.assets[Ie].layers&&ot(j.assets[Ie].layers)}}}(),me=function(){var je=[4,4,18];function qe(j){var Ie,bt,vt;for(Ie=j.length-1;Ie>=0;Ie-=1)if("sh"===j[Ie].ty)if(j[Ie].ks.k.i)j[Ie].ks.k.c=j[Ie].closed;else for(vt=j[Ie].ks.k.length,bt=0;bt<vt;bt+=1)j[Ie].ks.k[bt].s&&(j[Ie].ks.k[bt].s[0].c=j[Ie].closed),j[Ie].ks.k[bt].e&&(j[Ie].ks.k[bt].e[0].c=j[Ie].closed);else"gr"===j[Ie].ty&&qe(j[Ie].it)}function ot(j){var Ie,bt,vt,Ct,Yt,on,pt=j.length;for(bt=0;bt<pt;bt+=1){if((Ie=j[bt]).hasMask){var Re=Ie.masksProperties;for(Ct=Re.length,vt=0;vt<Ct;vt+=1)if(Re[vt].pt.k.i)Re[vt].pt.k.c=Re[vt].cl;else for(on=Re[vt].pt.k.length,Yt=0;Yt<on;Yt+=1)Re[vt].pt.k[Yt].s&&(Re[vt].pt.k[Yt].s[0].c=Re[vt].cl),Re[vt].pt.k[Yt].e&&(Re[vt].pt.k[Yt].e[0].c=Re[vt].cl)}4===Ie.ty&&qe(Ie.shapes)}}return function(j){if(N(je,j.v)&&(ot(j.layers),j.assets)){var Ie,bt=j.assets.length;for(Ie=0;Ie<bt;Ie+=1)j.assets[Ie].layers&&ot(j.assets[Ie].layers)}}}(),it={completeData:function(je){je.__complete||(pe(je),k(je),V(je),ie(je),me(je),T(je.layers,je.assets),function(qe,ot){if(qe){var j=0,Ie=qe.length;for(j=0;j<Ie;j+=1)1===qe[j].t&&(qe[j].data.layers=F(qe[j].data.refId,ot),T(qe[j].data.layers,ot))}}(je.chars,je.assets),je.__complete=!0)}};return it.checkColors=pe,it.checkChars=V,it.checkPathProperties=ie,it.checkShapes=me,it.completeLayers=T,it}()),D.assetLoader||(D.assetLoader=function(){function T(F){var q=F.getResponseHeader("content-type");return q&&"json"===F.responseType&&-1!==q.indexOf("json")||F.response&&"object"===_typeof$5(F.response)?F.response:F.response&&"string"==typeof F.response?JSON.parse(F.response):F.responseText?JSON.parse(F.responseText):null}return{load:function(F,q,R,N){var W,k=new XMLHttpRequest;try{k.responseType="json"}catch{}k.onreadystatechange=function(){if(4===k.readyState)if(200===k.status)W=T(k),R(W);else try{W=T(k),R(W)}catch(V){N&&N(V)}};try{k.open("GET",F,!0)}catch{k.open("GET",q+"/"+F,!0)}k.send()}}}()),"loadAnimation"===B.data.type)D.assetLoader.load(B.data.path,B.data.fullPath,function(T){D.dataManager.completeData(T),D.postMessage({id:B.data.id,payload:T,status:"success"})},function(){D.postMessage({id:B.data.id,status:"error"})});else if("complete"===B.data.type){var Q=B.data.animation;D.dataManager.completeData(Q),D.postMessage({id:B.data.id,payload:Q,status:"success"})}else"loadData"===B.data.type&&D.assetLoader.load(B.data.path,B.data.fullPath,function(T){D.postMessage({id:B.data.id,payload:T,status:"success"})},function(){D.postMessage({id:B.data.id,status:"error"})})})).onmessage=function(B){var Q=B.data,T=Q.id,F=_[T];_[T]=null,"success"===Q.status?F.onComplete(Q.payload):F.onError&&F.onError()})}function z(B,Q){var T="processId_"+(m+=1);return _[T]={onComplete:B,onError:Q},T}return{loadAnimation:function(B,Q,T){G();var F=z(Q,T);f.postMessage({type:"loadAnimation",path:B,fullPath:window.location.origin+window.location.pathname,id:F})},loadData:function(B,Q,T){G();var F=z(Q,T);f.postMessage({type:"loadData",path:B,fullPath:window.location.origin+window.location.pathname,id:F})},completeAnimation:function(B,Q,T){G();var F=z(Q,T);f.postMessage({type:"complete",animation:B,id:F})}}}(),ImagePreloader=function(){var u=function(){var z=createTag("canvas");z.width=1,z.height=1;var B=z.getContext("2d");return B.fillStyle="rgba(0,0,0,0)",B.fillRect(0,0,1,1),z}();function f(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function m(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function _(z,B,Q){var T="";if(z.e)T=z.p;else if(B){var F=z.p;-1!==F.indexOf("images/")&&(F=F.split("/")[1]),T=B+F}else T=Q,T+=z.u?z.u:"",T+=z.p;return T}function C(z){var B=0,Q=setInterval(function(){(z.getBBox().width||B>500)&&(this._imageLoaded(),clearInterval(Q)),B+=1}.bind(this),50)}function D(z){var B={assetData:z},Q=_(z,this.assetsPath,this.path);return dataManager.loadData(Q,function(T){B.img=T,this._footageLoaded()}.bind(this),function(){B.img={},this._footageLoaded()}.bind(this)),B}function G(){this._imageLoaded=f.bind(this),this._footageLoaded=m.bind(this),this.testImageLoaded=C.bind(this),this.createFootageData=D.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return G.prototype={loadAssets:function(z,B){var Q;this.imagesLoadedCb=B;var T=z.length;for(Q=0;Q<T;Q+=1)z[Q].layers||(z[Q].t&&"seq"!==z[Q].t?3===z[Q].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(z[Q]))):(this.totalImages+=1,this.images.push(this._createImageData(z[Q]))))},setAssetsPath:function(z){this.assetsPath=z||""},setPath:function(z){this.path=z||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(z){for(var B=0,Q=this.images.length;B<Q;){if(this.images[B].assetData===z)return this.images[B].img;B+=1}return null},createImgData:function(z){var B=_(z,this.assetsPath,this.path),Q=createTag("img");Q.crossOrigin="anonymous",Q.addEventListener("load",this._imageLoaded,!1),Q.addEventListener("error",function(){T.img=u,this._imageLoaded()}.bind(this),!1),Q.src=B;var T={img:Q,assetData:z};return T},createImageData:function(z){var B=_(z,this.assetsPath,this.path),Q=createNS("image");isSafari?this.testImageLoaded(Q):Q.addEventListener("load",this._imageLoaded,!1),Q.addEventListener("error",function(){T.img=u,this._imageLoaded()}.bind(this),!1),Q.setAttributeNS("http://www.w3.org/1999/xlink","href",B),this._elementHelper.append?this._elementHelper.append(Q):this._elementHelper.appendChild(Q);var T={img:Q,assetData:z};return T},imageLoaded:f,footageLoaded:m,setCacheType:function(z,B){"svg"===z?(this._elementHelper=B,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},G}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(u,f){if(this._cbs[u])for(var m=this._cbs[u],_=0;_<m.length;_+=1)m[_](f)},addEventListener:function(u,f){return this._cbs[u]||(this._cbs[u]=[]),this._cbs[u].push(f),function(){this.removeEventListener(u,f)}.bind(this)},removeEventListener:function(u,f){if(f){if(this._cbs[u]){for(var m=0,_=this._cbs[u].length;m<_;)this._cbs[u][m]===f&&(this._cbs[u].splice(m,1),m-=1,_-=1),m+=1;this._cbs[u].length||(this._cbs[u]=null)}}else this._cbs[u]=null}};var markerParser=function(){function u(f){for(var m,_=f.split("\r\n"),C={},D=0,G=0;G<_.length;G+=1)2===(m=_[G].split(":")).length&&(C[m[0]]=m[1].trim(),D+=1);if(0===D)throw new Error;return C}return function(f){for(var m=[],_=0;_<f.length;_+=1){var C=f[_],D={time:C.tm,duration:C.dr};try{D.payload=JSON.parse(f[_].cm)}catch{try{D.payload=u(f[_].cm)}catch{D.payload={name:f[_].cm}}}m.push(D)}return m}}(),ProjectInterface=function(){function u(f){this.compositions.push(f)}return function(){function f(m){for(var _=0,C=this.compositions.length;_<C;){if(this.compositions[_].data&&this.compositions[_].data.nm===m)return this.compositions[_].prepareFrame&&this.compositions[_].data.xt&&this.compositions[_].prepareFrame(this.currentFrame),this.compositions[_].compInterface;_+=1}return null}return f.compositions=[],f.currentFrame=0,f.registerComposition=u,f}}(),renderers={},registerRenderer=function(u,f){renderers[u]=f};function getRenderer(u){return renderers[u]}function _typeof$4(u){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(u){(u.wrapper||u.container)&&(this.wrapper=u.wrapper||u.container);var f="svg";u.animType?f=u.animType:u.renderer&&(f=u.renderer);var m=getRenderer(f);this.renderer=new m(this,u.rendererSettings),this.imagePreloader.setCacheType(f,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=f,this.loop=""===u.loop||null==u.loop||!0===u.loop||!1!==u.loop&&parseInt(u.loop,10),this.autoplay=!("autoplay"in u)||u.autoplay,this.name=u.name?u.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(u,"autoloadSegments")||u.autoloadSegments,this.assetsPath=u.assetsPath,this.initialSegment=u.initialSegment,u.audioFactory&&this.audioController.setAudioFactory(u.audioFactory),u.animationData?this.setupAnimation(u.animationData):u.path&&(this.path=-1!==u.path.lastIndexOf("\\")?u.path.substr(0,u.path.lastIndexOf("\\")+1):u.path.substr(0,u.path.lastIndexOf("/")+1),this.fileName=u.path.substr(u.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(u.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(u){dataManager.completeAnimation(u,this.configAnimation)},AnimationItem.prototype.setData=function(u,f){f&&"object"!==_typeof$4(f)&&(f=JSON.parse(f));var m={wrapper:u,animationData:f},_=u.attributes;m.path=_.getNamedItem("data-animation-path")?_.getNamedItem("data-animation-path").value:_.getNamedItem("data-bm-path")?_.getNamedItem("data-bm-path").value:_.getNamedItem("bm-path")?_.getNamedItem("bm-path").value:"",m.animType=_.getNamedItem("data-anim-type")?_.getNamedItem("data-anim-type").value:_.getNamedItem("data-bm-type")?_.getNamedItem("data-bm-type").value:_.getNamedItem("bm-type")?_.getNamedItem("bm-type").value:_.getNamedItem("data-bm-renderer")?_.getNamedItem("data-bm-renderer").value:_.getNamedItem("bm-renderer")?_.getNamedItem("bm-renderer").value:"canvas";var C=_.getNamedItem("data-anim-loop")?_.getNamedItem("data-anim-loop").value:_.getNamedItem("data-bm-loop")?_.getNamedItem("data-bm-loop").value:_.getNamedItem("bm-loop")?_.getNamedItem("bm-loop").value:"";"false"===C?m.loop=!1:"true"===C?m.loop=!0:""!==C&&(m.loop=parseInt(C,10));var D=_.getNamedItem("data-anim-autoplay")?_.getNamedItem("data-anim-autoplay").value:_.getNamedItem("data-bm-autoplay")?_.getNamedItem("data-bm-autoplay").value:!_.getNamedItem("bm-autoplay")||_.getNamedItem("bm-autoplay").value;m.autoplay="false"!==D,m.name=_.getNamedItem("data-name")?_.getNamedItem("data-name").value:_.getNamedItem("data-bm-name")?_.getNamedItem("data-bm-name").value:_.getNamedItem("bm-name")?_.getNamedItem("bm-name").value:"","false"===(_.getNamedItem("data-anim-prerender")?_.getNamedItem("data-anim-prerender").value:_.getNamedItem("data-bm-prerender")?_.getNamedItem("data-bm-prerender").value:_.getNamedItem("bm-prerender")?_.getNamedItem("bm-prerender").value:"")&&(m.prerender=!1),this.setParams(m)},AnimationItem.prototype.includeLayers=function(u){u.op>this.animationData.op&&(this.animationData.op=u.op,this.totalFrames=Math.floor(u.op-this.animationData.ip));var f,m,_=this.animationData.layers,C=_.length,D=u.layers,G=D.length;for(m=0;m<G;m+=1)for(f=0;f<C;){if(_[f].id===D[m].id){_[f]=D[m];break}f+=1}if((u.chars||u.fonts)&&(this.renderer.globalData.fontManager.addChars(u.chars),this.renderer.globalData.fontManager.addFonts(u.fonts,this.renderer.globalData.defs)),u.assets)for(C=u.assets.length,f=0;f<C;f+=1)this.animationData.assets.push(u.assets[f]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(u){this.animationData=u;var f=getExpressionsPlugin();f&&f.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var u=this.animationData.segments;if(!u||0===u.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var f=u.shift();this.timeCompleted=f.time*this.frameRate;var m=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(m,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(u){if(this.renderer)try{this.animationData=u,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(u),u.assets||(u.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(u.assets),this.markers=markerParser(u.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(f){this.triggerConfigError(f)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var u=getExpressionsPlugin();u&&u.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(u){this.isSubframeEnabled=!!u},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(u){this.triggerRenderFrameError(u)}},AnimationItem.prototype.play=function(u){u&&this.name!==u||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(u){u&&this.name!==u||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(u){u&&this.name!==u||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(u){u&&this.name!==u||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(u){for(var f,m=0;m<this.markers.length;m+=1)if((f=this.markers[m]).payload&&f.payload.name===u)return f;return null},AnimationItem.prototype.goToAndStop=function(u,f,m){if(!m||this.name===m){var _=Number(u);if(isNaN(_)){var C=this.getMarkerData(u);C&&this.goToAndStop(C.time,!0)}else this.setCurrentRawFrameValue(f?u:u*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(u,f,m){if(!m||this.name===m){var _=Number(u);if(isNaN(_)){var C=this.getMarkerData(u);C&&(C.duration?this.playSegments([C.time,C.time+C.duration],!0):this.goToAndStop(C.time,!0))}else this.goToAndStop(_,f,m);this.play()}},AnimationItem.prototype.advanceTime=function(u){if(!0!==this.isPaused&&!1!==this.isLoaded){var f=this.currentRawFrame+u*this.frameModifier,m=!1;f>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?f>=this.totalFrames?(this.playCount+=1,this.checkSegments(f%this.totalFrames)||(this.setCurrentRawFrameValue(f%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(f):this.checkSegments(f>this.totalFrames?f%this.totalFrames:0)||(m=!0,f=this.totalFrames-1):f<0?this.checkSegments(f%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(m=!0,f=0):(this.setCurrentRawFrameValue(this.totalFrames+f%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(f),m&&(this.setCurrentRawFrameValue(f),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(u,f){this.playCount=0,u[1]<u[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=u[0]-u[1],this.timeCompleted=this.totalFrames,this.firstFrame=u[1],this.setCurrentRawFrameValue(this.totalFrames-.001-f)):u[1]>u[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=u[1]-u[0],this.timeCompleted=this.totalFrames,this.firstFrame=u[0],this.setCurrentRawFrameValue(.001+f)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(u,f){var m=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<u?m=u:this.currentRawFrame+this.firstFrame>f&&(m=f-u)),this.firstFrame=u,this.totalFrames=f-u,this.timeCompleted=this.totalFrames,-1!==m&&this.goToAndStop(m,!0)},AnimationItem.prototype.playSegments=function(u,f){if(f&&(this.segments.length=0),"object"===_typeof$4(u[0])){var m,_=u.length;for(m=0;m<_;m+=1)this.segments.push(u[m])}else this.segments.push(u);this.segments.length&&f&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(u){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),u&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(u){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),u),!0)},AnimationItem.prototype.destroy=function(u){u&&this.name!==u||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(u){this.currentRawFrame=u,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(u){this.playSpeed=u,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(u){this.playDirection=u<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(u,f){f&&this.name!==f||this.audioController.setVolume(u)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(u){u&&this.name!==u||this.audioController.mute()},AnimationItem.prototype.unmute=function(u){u&&this.name!==u||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(u){var f="";if(u.e)f=u.p;else if(this.assetsPath){var m=u.p;-1!==m.indexOf("images/")&&(m=m.split("/")[1]),f=this.assetsPath+m}else f=this.path,f+=u.u?u.u:"",f+=u.p;return f},AnimationItem.prototype.getAssetData=function(u){for(var f=0,m=this.assets.length;f<m;){if(u===this.assets[f].id)return this.assets[f];f+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(u){return u?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(u,f,m){try{this.renderer.getElementByPath(u).updateDocumentData(f,m)}catch{}},AnimationItem.prototype.trigger=function(u){if(this._cbs&&this._cbs[u])switch(u){case"enterFrame":this.triggerEvent(u,new BMEnterFrameEvent(u,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(u,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(u,new BMCompleteLoopEvent(u,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(u,new BMCompleteEvent(u,this.frameMult));break;case"segmentStart":this.triggerEvent(u,new BMSegmentStartEvent(u,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(u,new BMDestroyEvent(u,this));break;default:this.triggerEvent(u)}"enterFrame"===u&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(u,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===u&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(u,this.loop,this.playCount,this.frameMult)),"complete"===u&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(u,this.frameMult)),"segmentStart"===u&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(u,this.firstFrame,this.totalFrames)),"destroy"===u&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(u,this))},AnimationItem.prototype.triggerRenderFrameError=function(u){var f=new BMRenderFrameErrorEvent(u,this.currentFrame);this.triggerEvent("error",f),this.onError&&this.onError.call(this,f)},AnimationItem.prototype.triggerConfigError=function(u){var f=new BMConfigErrorEvent(u,this.currentFrame);this.triggerEvent("error",f),this.onError&&this.onError.call(this,f)};var animationManager=function(){var u={},f=[],m=0,_=0,C=0,D=!0,G=!1;function z(W){for(var k=0,V=W.target;k<_;)f[k].animation===V&&(f.splice(k,1),k-=1,_-=1,V.isPaused||T()),k+=1}function B(W,k){if(!W)return null;for(var V=0;V<_;){if(f[V].elem===W&&null!==f[V].elem)return f[V].animation;V+=1}var ie=new AnimationItem;return F(ie,W),ie.setData(W,k),ie}function Q(){C+=1,N()}function T(){C-=1}function F(W,k){W.addEventListener("destroy",z),W.addEventListener("_active",Q),W.addEventListener("_idle",T),f.push({elem:k,animation:W}),_+=1}function q(W){var k,V=W-m;for(k=0;k<_;k+=1)f[k].animation.advanceTime(V);m=W,C&&!G?window.requestAnimationFrame(q):D=!0}function R(W){m=W,window.requestAnimationFrame(q)}function N(){!G&&C&&D&&(window.requestAnimationFrame(R),D=!1)}return u.registerAnimation=B,u.loadAnimation=function(W){var k=new AnimationItem;return F(k,null),k.setParams(W),k},u.setSpeed=function(W,k){var V;for(V=0;V<_;V+=1)f[V].animation.setSpeed(W,k)},u.setDirection=function(W,k){var V;for(V=0;V<_;V+=1)f[V].animation.setDirection(W,k)},u.play=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.play(W)},u.pause=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.pause(W)},u.stop=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.stop(W)},u.togglePause=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.togglePause(W)},u.searchAnimations=function(W,k,V){var ie,pe=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),me=pe.length;for(ie=0;ie<me;ie+=1)V&&pe[ie].setAttribute("data-bm-type",V),B(pe[ie],W);if(k&&0===me){V||(V="svg");var Ve=document.getElementsByTagName("body")[0];Ve.innerText="";var it=createTag("div");it.style.width="100%",it.style.height="100%",it.setAttribute("data-bm-type",V),Ve.appendChild(it),B(it,W)}},u.resize=function(){var W;for(W=0;W<_;W+=1)f[W].animation.resize()},u.goToAndStop=function(W,k,V){var ie;for(ie=0;ie<_;ie+=1)f[ie].animation.goToAndStop(W,k,V)},u.destroy=function(W){var k;for(k=_-1;k>=0;k-=1)f[k].animation.destroy(W)},u.freeze=function(){G=!0},u.unfreeze=function(){G=!1,N()},u.setVolume=function(W,k){var V;for(V=0;V<_;V+=1)f[V].animation.setVolume(W,k)},u.mute=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.mute(W)},u.unmute=function(W){var k;for(k=0;k<_;k+=1)f[k].animation.unmute(W)},u.getRegisteredAnimations=function(){var W,k=f.length,V=[];for(W=0;W<k;W+=1)V.push(f[W].animation);return V},u}(),BezierFactory=function(){var u={getBezierEasing:function(T,F,q,R,N){var W=N||("bez_"+T+"_"+F+"_"+q+"_"+R).replace(/\./g,"p");if(f[W])return f[W];var k=new Q([T,F,q,R]);return f[W]=k,k}},f={},m=.1,_="function"==typeof Float32Array;function C(T,F){return 1-3*F+3*T}function D(T,F){return 3*F-6*T}function G(T){return 3*T}function z(T,F,q){return((C(F,q)*T+D(F,q))*T+G(F))*T}function B(T,F,q){return 3*C(F,q)*T*T+2*D(F,q)*T+G(F)}function Q(T){this._p=T,this._mSampleValues=_?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return Q.prototype={get:function(T){var F=this._p[0],q=this._p[1],R=this._p[2],N=this._p[3];return this._precomputed||this._precompute(),F===q&&R===N?T:0===T?0:1===T?1:z(this._getTForX(T),q,N)},_precompute:function(){var T=this._p[0],F=this._p[1],q=this._p[2],R=this._p[3];this._precomputed=!0,T===F&&q===R||this._calcSampleValues()},_calcSampleValues:function(){for(var T=this._p[0],F=this._p[2],q=0;q<11;++q)this._mSampleValues[q]=z(q*m,T,F)},_getTForX:function(T){for(var F=this._p[0],q=this._p[2],R=this._mSampleValues,N=0,W=1;10!==W&&R[W]<=T;++W)N+=m;var k=N+(T-R[--W])/(R[W+1]-R[W])*m,V=B(k,F,q);return V>=.001?function(ie,pe,me,Ve){for(var it=0;it<4;++it){var je=B(pe,me,Ve);if(0===je)return pe;pe-=(z(pe,me,Ve)-ie)/je}return pe}(T,k,F,q):0===V?k:function(ie,pe,me,Ve,it){var je,qe,ot=0;do{(je=z(qe=pe+(me-pe)/2,Ve,it)-ie)>0?me=qe:pe=qe}while(Math.abs(je)>1e-7&&++ot<10);return qe}(T,N,N+m,F,q)}},u}(),pooling={double:function(u){return u.concat(createSizedArray(u.length))}},poolFactory=function(u,f,m){var _=0,C=u,D=createSizedArray(C);return{newElement:function(){return _?D[_-=1]:f()},release:function(G){_===C&&(D=pooling.double(D),C*=2),m&&m(G),D[_]=G,_+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(u){var f,m=u.lengths.length;for(f=0;f<m;f+=1)bezierLengthPool.release(u.lengths[f]);u.lengths.length=0});function bezFunction(){var u=Math;function f(Q,T,F,q,R,N){var W=Q*q+T*R+F*N-R*q-N*Q-F*T;return W>-.001&&W<.001}var m=function(Q,T,F,q){var R,N,W,k,V,ie,pe=getDefaultCurveSegments(),me=0,Ve=[],it=[],je=bezierLengthPool.newElement();for(W=F.length,R=0;R<pe;R+=1){for(V=R/(pe-1),ie=0,N=0;N<W;N+=1)k=bmPow(1-V,3)*Q[N]+3*bmPow(1-V,2)*V*F[N]+3*(1-V)*bmPow(V,2)*q[N]+bmPow(V,3)*T[N],Ve[N]=k,null!==it[N]&&(ie+=bmPow(Ve[N]-it[N],2)),it[N]=Ve[N];ie&&(me+=ie=bmSqrt(ie)),je.percents[R]=V,je.lengths[R]=me}return je.addedLength=me,je};function _(Q){this.segmentLength=0,this.points=new Array(Q)}function C(Q,T){this.partialLength=Q,this.point=T}var D,G=(D={},function(Q,T,F,q){var R=(Q[0]+"_"+Q[1]+"_"+T[0]+"_"+T[1]+"_"+F[0]+"_"+F[1]+"_"+q[0]+"_"+q[1]).replace(/\./g,"p");if(!D[R]){var N,W,k,V,ie,pe,me,Ve=getDefaultCurveSegments(),it=0,je=null;2===Q.length&&(Q[0]!==T[0]||Q[1]!==T[1])&&f(Q[0],Q[1],T[0],T[1],Q[0]+F[0],Q[1]+F[1])&&f(Q[0],Q[1],T[0],T[1],T[0]+q[0],T[1]+q[1])&&(Ve=2);var qe=new _(Ve);for(k=F.length,N=0;N<Ve;N+=1){for(me=createSizedArray(k),ie=N/(Ve-1),pe=0,W=0;W<k;W+=1)V=bmPow(1-ie,3)*Q[W]+3*bmPow(1-ie,2)*ie*(Q[W]+F[W])+3*(1-ie)*bmPow(ie,2)*(T[W]+q[W])+bmPow(ie,3)*T[W],me[W]=V,null!==je&&(pe+=bmPow(me[W]-je[W],2));it+=pe=bmSqrt(pe),qe.points[N]=new C(pe,me),je=me}qe.segmentLength=it,D[R]=qe}return D[R]});function z(Q,T){var F=T.percents,q=T.lengths,R=F.length,N=bmFloor((R-1)*Q),W=Q*T.addedLength,k=0;if(N===R-1||0===N||W===q[N])return F[N];for(var V=q[N]>W?-1:1,ie=!0;ie;)if(q[N]<=W&&q[N+1]>W?(k=(W-q[N])/(q[N+1]-q[N]),ie=!1):N+=V,N<0||N>=R-1){if(N===R-1)return F[N];ie=!1}return F[N]+(F[N+1]-F[N])*k}var B=createTypedArray("float32",8);return{getSegmentsLength:function(Q){var T,F=segmentsLengthPool.newElement(),q=Q.c,R=Q.v,N=Q.o,W=Q.i,k=Q._length,V=F.lengths,ie=0;for(T=0;T<k-1;T+=1)V[T]=m(R[T],R[T+1],N[T],W[T+1]),ie+=V[T].addedLength;return q&&k&&(V[T]=m(R[T],R[0],N[T],W[0]),ie+=V[T].addedLength),F.totalLength=ie,F},getNewSegment:function(Q,T,F,q,R,N,W){R<0?R=0:R>1&&(R=1);var k,V=z(R,W),ie=z(N=N>1?1:N,W),pe=Q.length,me=1-V,Ve=1-ie,it=me*me*me,je=V*me*me*3,qe=V*V*me*3,ot=V*V*V,j=me*me*Ve,Ie=V*me*Ve+me*V*Ve+me*me*ie,bt=V*V*Ve+me*V*ie+V*me*ie,vt=V*V*ie,Ct=me*Ve*Ve,Yt=V*Ve*Ve+me*ie*Ve+me*Ve*ie,on=V*ie*Ve+me*ie*ie+V*Ve*ie,pt=V*ie*ie,Re=Ve*Ve*Ve,ut=ie*Ve*Ve+Ve*ie*Ve+Ve*Ve*ie,Qt=ie*ie*Ve+Ve*ie*ie+ie*Ve*ie,Un=ie*ie*ie;for(k=0;k<pe;k+=1)B[4*k]=u.round(1e3*(it*Q[k]+je*F[k]+qe*q[k]+ot*T[k]))/1e3,B[4*k+1]=u.round(1e3*(j*Q[k]+Ie*F[k]+bt*q[k]+vt*T[k]))/1e3,B[4*k+2]=u.round(1e3*(Ct*Q[k]+Yt*F[k]+on*q[k]+pt*T[k]))/1e3,B[4*k+3]=u.round(1e3*(Re*Q[k]+ut*F[k]+Qt*q[k]+Un*T[k]))/1e3;return B},getPointInSegment:function(Q,T,F,q,R,N){var W=z(R,N),k=1-W;return[u.round(1e3*(k*k*k*Q[0]+(W*k*k+k*W*k+k*k*W)*F[0]+(W*W*k+k*W*W+W*k*W)*q[0]+W*W*W*T[0]))/1e3,u.round(1e3*(k*k*k*Q[1]+(W*k*k+k*W*k+k*k*W)*F[1]+(W*W*k+k*W*W+W*k*W)*q[1]+W*W*W*T[1]))/1e3]},buildBezierData:G,pointOnLine2D:f,pointOnLine3D:function(Q,T,F,q,R,N,W,k,V){if(0===F&&0===N&&0===V)return f(Q,T,q,R,W,k);var ie,pe=u.sqrt(u.pow(q-Q,2)+u.pow(R-T,2)+u.pow(N-F,2)),me=u.sqrt(u.pow(W-Q,2)+u.pow(k-T,2)+u.pow(V-F,2)),Ve=u.sqrt(u.pow(W-q,2)+u.pow(k-R,2)+u.pow(V-N,2));return(ie=pe>me?pe>Ve?pe-me-Ve:Ve-me-pe:Ve>me?Ve-me-pe:me-pe-Ve)>-1e-4&&ie<1e-4}}}var bez=bezFunction(),PropertyFactory=function(){var u=initialDefaultFrame,f=Math.abs;function m(q,R){var N,W=this.offsetTime;"multidimensional"===this.propType&&(N=createTypedArray("float32",this.pv.length));for(var k,V,ie,pe,me,Ve,it,je,qe,ot=R.lastIndex,j=ot,Ie=this.keyframes.length-1,bt=!0;bt;){if(k=this.keyframes[j],V=this.keyframes[j+1],j===Ie-1&&q>=V.t-W){k.h&&(k=V),ot=0;break}if(V.t-W>q){ot=j;break}j<Ie-1?j+=1:(ot=0,bt=!1)}ie=this.keyframesMetadata[j]||{};var vt,Ct,Yt,on,pt,Re,ut,Qt,Un,dn,mo,ao,lo,bn,Mi,Lo,Xi,co,lr,Dr,Mr,Sn,Ar,So,Gi,mn,Jn,Wt=V.t-W,An=k.t-W;if(k.to){ie.bezierData||(ie.bezierData=bez.buildBezierData(k.s,V.s||k.e,k.to,k.ti));var fn=ie.bezierData;if(q>=Wt||q<An){var Fn=q>=Wt?fn.points.length-1:0;for(me=fn.points[Fn].point.length,pe=0;pe<me;pe+=1)N[pe]=fn.points[Fn].point[pe]}else{ie.__fnct?qe=ie.__fnct:(qe=BezierFactory.getBezierEasing(k.o.x,k.o.y,k.i.x,k.i.y,k.n).get,ie.__fnct=qe),Ve=qe((q-An)/(Wt-An));var ft,Wn=fn.segmentLength*Ve,Cn=R.lastFrame<q&&R._lastKeyframeIndex===j?R._lastAddedLength:0;for(je=R.lastFrame<q&&R._lastKeyframeIndex===j?R._lastPoint:0,bt=!0,it=fn.points.length;bt;){if(Cn+=fn.points[je].partialLength,0===Wn||0===Ve||je===fn.points.length-1){for(me=fn.points[je].point.length,pe=0;pe<me;pe+=1)N[pe]=fn.points[je].point[pe];break}if(Wn>=Cn&&Wn<Cn+fn.points[je+1].partialLength){for(ft=(Wn-Cn)/fn.points[je+1].partialLength,me=fn.points[je].point.length,pe=0;pe<me;pe+=1)N[pe]=fn.points[je].point[pe]+(fn.points[je+1].point[pe]-fn.points[je].point[pe])*ft;break}je<it-1?je+=1:bt=!1}R._lastPoint=je,R._lastAddedLength=Cn-fn.points[je].partialLength,R._lastKeyframeIndex=j}}else{var Li;if(Ie=k.s.length,vt=V.s||k.e,this.sh&&1!==k.h)if(q>=Wt)N[0]=vt[0],N[1]=vt[1],N[2]=vt[2];else if(q<=An)N[0]=k.s[0],N[1]=k.s[1],N[2]=k.s[2];else{var Vi=_(k.s),gr=_(vt);Ct=N,lo=(q-An)/(Wt-An),lr=[],(Mi=(Dr=(mo=Vi)[0])*(So=(ao=gr)[0])+(Mr=mo[1])*(Gi=ao[1])+(Sn=mo[2])*(mn=ao[2])+(Ar=mo[3])*(Jn=ao[3]))<0&&(Mi=-Mi,So=-So,Gi=-Gi,mn=-mn,Jn=-Jn),1-Mi>1e-6?(bn=Math.acos(Mi),Lo=Math.sin(bn),Xi=Math.sin((1-lo)*bn)/Lo,co=Math.sin(lo*bn)/Lo):(Xi=1-lo,co=lo),lr[0]=Xi*Dr+co*So,lr[1]=Xi*Mr+co*Gi,lr[2]=Xi*Sn+co*mn,lr[3]=Xi*Ar+co*Jn,on=(Yt=lr)[0],pt=Yt[1],Re=Yt[2],ut=Yt[3],Qt=Math.atan2(2*pt*ut-2*on*Re,1-2*pt*pt-2*Re*Re),Un=Math.asin(2*on*pt+2*Re*ut),dn=Math.atan2(2*on*ut-2*pt*Re,1-2*on*on-2*Re*Re),Ct[0]=Qt/degToRads,Ct[1]=Un/degToRads,Ct[2]=dn/degToRads}else for(j=0;j<Ie;j+=1)1!==k.h&&(q>=Wt?Ve=1:q<An?Ve=0:(k.o.x.constructor===Array?(ie.__fnct||(ie.__fnct=[]),ie.__fnct[j]?qe=ie.__fnct[j]:(qe=BezierFactory.getBezierEasing(void 0===k.o.x[j]?k.o.x[0]:k.o.x[j],void 0===k.o.y[j]?k.o.y[0]:k.o.y[j],void 0===k.i.x[j]?k.i.x[0]:k.i.x[j],void 0===k.i.y[j]?k.i.y[0]:k.i.y[j]).get,ie.__fnct[j]=qe)):ie.__fnct?qe=ie.__fnct:(qe=BezierFactory.getBezierEasing(k.o.x,k.o.y,k.i.x,k.i.y).get,k.keyframeMetadata=qe),Ve=qe((q-An)/(Wt-An)))),vt=V.s||k.e,Li=1===k.h?k.s[j]:k.s[j]+(vt[j]-k.s[j])*Ve,"multidimensional"===this.propType?N[j]=Li:N=Li}return R.lastIndex=ot,N}function _(q){var R=q[0]*degToRads,N=q[1]*degToRads,W=q[2]*degToRads,k=Math.cos(R/2),V=Math.cos(N/2),ie=Math.cos(W/2),pe=Math.sin(R/2),me=Math.sin(N/2),Ve=Math.sin(W/2);return[pe*me*ie+k*V*Ve,pe*V*ie+k*me*Ve,k*me*ie-pe*V*Ve,k*V*ie-pe*me*Ve]}function C(){var q=this.comp.renderedFrame-this.offsetTime,R=this.keyframes[0].t-this.offsetTime,N=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(q===this._caching.lastFrame||this._caching.lastFrame!==u&&(this._caching.lastFrame>=N&&q>=N||this._caching.lastFrame<R&&q<R))){this._caching.lastFrame>=q&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var W=this.interpolateValue(q,this._caching);this.pv=W}return this._caching.lastFrame=q,this.pv}function D(q){var R;if("unidimensional"===this.propType)f(this.v-(R=q*this.mult))>1e-5&&(this.v=R,this._mdf=!0);else for(var N=0,W=this.v.length;N<W;)f(this.v[N]-(R=q[N]*this.mult))>1e-5&&(this.v[N]=R,this._mdf=!0),N+=1}function G(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var q;this.lock=!0,this._mdf=this._isFirstFrame;var R=this.effectsSequence.length,N=this.kf?this.pv:this.data.k;for(q=0;q<R;q+=1)N=this.effectsSequence[q](N);this.setVValue(N),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function z(q){this.effectsSequence.push(q),this.container.addDynamicProperty(this)}function B(q,R,N,W){this.propType="unidimensional",this.mult=N||1,this.data=R,this.v=N?R.k*N:R.k,this.pv=R.k,this._mdf=!1,this.elem=q,this.container=W,this.comp=q.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=G,this.setVValue=D,this.addEffect=z}function Q(q,R,N,W){var k;this.propType="multidimensional",this.mult=N||1,this.data=R,this._mdf=!1,this.elem=q,this.container=W,this.comp=q.comp,this.k=!1,this.kf=!1,this.frameId=-1;var V=R.k.length;for(this.v=createTypedArray("float32",V),this.pv=createTypedArray("float32",V),this.vel=createTypedArray("float32",V),k=0;k<V;k+=1)this.v[k]=R.k[k]*this.mult,this.pv[k]=R.k[k];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=G,this.setVValue=D,this.addEffect=z}function T(q,R,N,W){this.propType="unidimensional",this.keyframes=R.k,this.keyframesMetadata=[],this.offsetTime=q.data.st,this.frameId=-1,this._caching={lastFrame:u,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=R,this.mult=N||1,this.elem=q,this.container=W,this.comp=q.comp,this.v=u,this.pv=u,this._isFirstFrame=!0,this.getValue=G,this.setVValue=D,this.interpolateValue=m,this.effectsSequence=[C.bind(this)],this.addEffect=z}function F(q,R,N,W){var k;this.propType="multidimensional";var V,ie,pe,me,Ve=R.k.length;for(k=0;k<Ve-1;k+=1)R.k[k].to&&R.k[k].s&&R.k[k+1]&&R.k[k+1].s&&(ie=R.k[k+1].s,pe=R.k[k].to,me=R.k[k].ti,(2===(V=R.k[k].s).length&&(V[0]!==ie[0]||V[1]!==ie[1])&&bez.pointOnLine2D(V[0],V[1],ie[0],ie[1],V[0]+pe[0],V[1]+pe[1])&&bez.pointOnLine2D(V[0],V[1],ie[0],ie[1],ie[0]+me[0],ie[1]+me[1])||3===V.length&&(V[0]!==ie[0]||V[1]!==ie[1]||V[2]!==ie[2])&&bez.pointOnLine3D(V[0],V[1],V[2],ie[0],ie[1],ie[2],V[0]+pe[0],V[1]+pe[1],V[2]+pe[2])&&bez.pointOnLine3D(V[0],V[1],V[2],ie[0],ie[1],ie[2],ie[0]+me[0],ie[1]+me[1],ie[2]+me[2]))&&(R.k[k].to=null,R.k[k].ti=null),V[0]===ie[0]&&V[1]===ie[1]&&0===pe[0]&&0===pe[1]&&0===me[0]&&0===me[1]&&(2===V.length||V[2]===ie[2]&&0===pe[2]&&0===me[2])&&(R.k[k].to=null,R.k[k].ti=null));this.effectsSequence=[C.bind(this)],this.data=R,this.keyframes=R.k,this.keyframesMetadata=[],this.offsetTime=q.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=N||1,this.elem=q,this.container=W,this.comp=q.comp,this.getValue=G,this.setVValue=D,this.interpolateValue=m,this.frameId=-1;var it=R.k[0].s.length;for(this.v=createTypedArray("float32",it),this.pv=createTypedArray("float32",it),k=0;k<it;k+=1)this.v[k]=u,this.pv[k]=u;this._caching={lastFrame:u,lastIndex:0,value:createTypedArray("float32",it)},this.addEffect=z}return{getProp:function(q,R,N,W,k){var V;if(R.k.length)if("number"==typeof R.k[0])V=new Q(q,R,W,k);else switch(N){case 0:V=new T(q,R,W,k);break;case 1:V=new F(q,R,W,k)}else V=new B(q,R,W,k);return V.effectsSequence.length&&k.addDynamicProperty(V),V}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(u){-1===this.dynamicProperties.indexOf(u)&&(this.dynamicProperties.push(u),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var u;this._mdf=!1;var f=this.dynamicProperties.length;for(u=0;u<f;u+=1)this.dynamicProperties[u].getValue(),this.dynamicProperties[u]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(u){this.container=u,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(u,f){this.c=u,this.setLength(f);for(var m=0;m<f;)this.v[m]=pointPool.newElement(),this.o[m]=pointPool.newElement(),this.i[m]=pointPool.newElement(),m+=1},ShapePath.prototype.setLength=function(u){for(;this._maxLength<u;)this.doubleArrayLength();this._length=u},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(u,f,m,_,C){var D;switch(this._length=Math.max(this._length,_+1),this._length>=this._maxLength&&this.doubleArrayLength(),m){case"v":D=this.v;break;case"i":D=this.i;break;case"o":D=this.o;break;default:D=[]}(!D[_]||D[_]&&!C)&&(D[_]=pointPool.newElement()),D[_][0]=u,D[_][1]=f},ShapePath.prototype.setTripleAt=function(u,f,m,_,C,D,G,z){this.setXYAt(u,f,"v",G,z),this.setXYAt(m,_,"o",G,z),this.setXYAt(C,D,"i",G,z)},ShapePath.prototype.reverse=function(){var u=new ShapePath;u.setPathData(this.c,this._length);var f=this.v,m=this.o,_=this.i,C=0;this.c&&(u.setTripleAt(f[0][0],f[0][1],_[0][0],_[0][1],m[0][0],m[0][1],0,!1),C=1);var D,G=this._length-1,z=this._length;for(D=C;D<z;D+=1)u.setTripleAt(f[G][0],f[G][1],_[G][0],_[G][1],m[G][0],m[G][1],D,!1),G-=1;return u};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(u){var f,m=u._length;for(f=0;f<m;f+=1)pointPool.release(u.v[f]),pointPool.release(u.i[f]),pointPool.release(u.o[f]),u.v[f]=null,u.i[f]=null,u.o[f]=null;u._length=0,u.c=!1}),factory.clone=function(u){var f,m=factory.newElement(),_=void 0===u._length?u.v.length:u._length;for(m.setLength(_),m.c=u.c,f=0;f<_;f+=1)m.setTripleAt(u.v[f][0],u.v[f][1],u.o[f][0],u.o[f][1],u.i[f][0],u.i[f][1],f);return m},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(u){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=u,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var u;for(u=0;u<this._length;u+=1)shapePool.release(this.shapes[u]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(u){var f,m=u._length;for(f=0;f<m;f+=1)shapePool.release(u.shapes[f]);u._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=u,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var u=-999999;function f(R,N,W){var k,V,ie,pe,me,Ve,it,je,ot=W.lastIndex,j=this.keyframes;if(R<j[0].t-this.offsetTime)k=j[0].s[0],ie=!0,ot=0;else if(R>=j[j.length-1].t-this.offsetTime)k=j[j.length-1].s?j[j.length-1].s[0]:j[j.length-2].e[0],ie=!0;else{for(var Ie,bt,vt,Ct=ot,Yt=j.length-1,on=!0;on&&(Ie=j[Ct],!((bt=j[Ct+1]).t-this.offsetTime>R));)Ct<Yt-1?Ct+=1:on=!1;if(vt=this.keyframesMetadata[Ct]||{},ot=Ct,!(ie=1===Ie.h)){if(R>=bt.t-this.offsetTime)je=1;else if(R<Ie.t-this.offsetTime)je=0;else{var pt;vt.__fnct?pt=vt.__fnct:(pt=BezierFactory.getBezierEasing(Ie.o.x,Ie.o.y,Ie.i.x,Ie.i.y).get,vt.__fnct=pt),je=pt((R-(Ie.t-this.offsetTime))/(bt.t-this.offsetTime-(Ie.t-this.offsetTime)))}V=bt.s?bt.s[0]:Ie.e[0]}k=Ie.s[0]}for(Ve=N._length,it=k.i[0].length,W.lastIndex=ot,pe=0;pe<Ve;pe+=1)for(me=0;me<it;me+=1)N.i[pe][me]=ie?k.i[pe][me]:k.i[pe][me]+(V.i[pe][me]-k.i[pe][me])*je,N.o[pe][me]=ie?k.o[pe][me]:k.o[pe][me]+(V.o[pe][me]-k.o[pe][me])*je,N.v[pe][me]=ie?k.v[pe][me]:k.v[pe][me]+(V.v[pe][me]-k.v[pe][me])*je}function m(){var R=this.comp.renderedFrame-this.offsetTime,N=this.keyframes[0].t-this.offsetTime,W=this.keyframes[this.keyframes.length-1].t-this.offsetTime,k=this._caching.lastFrame;return k!==u&&(k<N&&R<N||k>W&&R>W)||(this._caching.lastIndex=k<R?this._caching.lastIndex:0,this.interpolateShape(R,this.pv,this._caching)),this._caching.lastFrame=R,this.pv}function _(){this.paths=this.localShapeCollection}function C(R){(function(N,W){if(N._length!==W._length||N.c!==W.c)return!1;var k,V=N._length;for(k=0;k<V;k+=1)if(N.v[k][0]!==W.v[k][0]||N.v[k][1]!==W.v[k][1]||N.o[k][0]!==W.o[k][0]||N.o[k][1]!==W.o[k][1]||N.i[k][0]!==W.i[k][0]||N.i[k][1]!==W.i[k][1])return!1;return!0})(this.v,R)||(this.v=shapePool.clone(R),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function D(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var R,N;this.lock=!0,this._mdf=!1,R=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var W=this.effectsSequence.length;for(N=0;N<W;N+=1)R=this.effectsSequence[N](R);this.setVValue(R),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function G(R,N,W){this.propType="shape",this.comp=R.comp,this.container=R,this.elem=R,this.data=N,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shapePool.clone(3===W?N.pt.k:N.ks.k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=_,this.effectsSequence=[]}function z(R){this.effectsSequence.push(R),this.container.addDynamicProperty(this)}function B(R,N,W){this.propType="shape",this.comp=R.comp,this.elem=R,this.container=R,this.offsetTime=R.data.st,this.keyframes=3===W?N.pt.k:N.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var k=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=u,this.reset=_,this._caching={lastFrame:u,lastIndex:0},this.effectsSequence=[m.bind(this)]}G.prototype.interpolateShape=f,G.prototype.getValue=D,G.prototype.setVValue=C,G.prototype.addEffect=z,B.prototype.getValue=D,B.prototype.interpolateShape=f,B.prototype.setVValue=C,B.prototype.addEffect=z;var Q=function(){var R=roundCorner;function N(W,k){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=k.d,this.elem=W,this.comp=W.comp,this.frameId=-1,this.initDynamicPropertyContainer(W),this.p=PropertyFactory.getProp(W,k.p,1,0,this),this.s=PropertyFactory.getProp(W,k.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return N.prototype={reset:_,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var W=this.p.v[0],k=this.p.v[1],V=this.s.v[0]/2,ie=this.s.v[1]/2,pe=3!==this.d,me=this.v;me.v[0][0]=W,me.v[0][1]=k-ie,me.v[1][0]=pe?W+V:W-V,me.v[1][1]=k,me.v[2][0]=W,me.v[2][1]=k+ie,me.v[3][0]=pe?W-V:W+V,me.v[3][1]=k,me.i[0][0]=pe?W-V*R:W+V*R,me.i[0][1]=k-ie,me.i[1][0]=pe?W+V:W-V,me.i[1][1]=k-ie*R,me.i[2][0]=pe?W+V*R:W-V*R,me.i[2][1]=k+ie,me.i[3][0]=pe?W-V:W+V,me.i[3][1]=k+ie*R,me.o[0][0]=pe?W+V*R:W-V*R,me.o[0][1]=k-ie,me.o[1][0]=pe?W+V:W-V,me.o[1][1]=k+ie*R,me.o[2][0]=pe?W-V*R:W+V*R,me.o[2][1]=k+ie,me.o[3][0]=pe?W-V:W+V,me.o[3][1]=k-ie*R}},extendPrototype([DynamicPropertyContainer],N),N}(),T=function(){function R(N,W){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=N,this.comp=N.comp,this.data=W,this.frameId=-1,this.d=W.d,this.initDynamicPropertyContainer(N),1===W.sy?(this.ir=PropertyFactory.getProp(N,W.ir,0,0,this),this.is=PropertyFactory.getProp(N,W.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(N,W.pt,0,0,this),this.p=PropertyFactory.getProp(N,W.p,1,0,this),this.r=PropertyFactory.getProp(N,W.r,0,degToRads,this),this.or=PropertyFactory.getProp(N,W.or,0,0,this),this.os=PropertyFactory.getProp(N,W.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return R.prototype={reset:_,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var N,W,k,V,ie=2*Math.floor(this.pt.v),pe=2*Math.PI/ie,me=!0,Ve=this.or.v,it=this.ir.v,je=this.os.v,qe=this.is.v,ot=2*Math.PI*Ve/(2*ie),j=2*Math.PI*it/(2*ie),Ie=-Math.PI/2;Ie+=this.r.v;var bt=3===this.data.d?-1:1;for(this.v._length=0,N=0;N<ie;N+=1){k=me?je:qe,V=me?ot:j;var vt=(W=me?Ve:it)*Math.cos(Ie),Ct=W*Math.sin(Ie),Yt=0===vt&&0===Ct?0:Ct/Math.sqrt(vt*vt+Ct*Ct),on=0===vt&&0===Ct?0:-vt/Math.sqrt(vt*vt+Ct*Ct);this.v.setTripleAt(vt+=+this.p.v[0],Ct+=+this.p.v[1],vt-Yt*V*k*bt,Ct-on*V*k*bt,vt+Yt*V*k*bt,Ct+on*V*k*bt,N,!0),me=!me,Ie+=pe*bt}},convertPolygonToPath:function(){var N,W=Math.floor(this.pt.v),k=2*Math.PI/W,V=this.or.v,ie=this.os.v,pe=2*Math.PI*V/(4*W),me=.5*-Math.PI,Ve=3===this.data.d?-1:1;for(me+=this.r.v,this.v._length=0,N=0;N<W;N+=1){var it=V*Math.cos(me),je=V*Math.sin(me),qe=0===it&&0===je?0:je/Math.sqrt(it*it+je*je),ot=0===it&&0===je?0:-it/Math.sqrt(it*it+je*je);this.v.setTripleAt(it+=+this.p.v[0],je+=+this.p.v[1],it-qe*pe*ie*Ve,je-ot*pe*ie*Ve,it+qe*pe*ie*Ve,je+ot*pe*ie*Ve,N,!0),me+=k*Ve}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],R),R}(),F=function(){function R(N,W){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=N,this.comp=N.comp,this.frameId=-1,this.d=W.d,this.initDynamicPropertyContainer(N),this.p=PropertyFactory.getProp(N,W.p,1,0,this),this.s=PropertyFactory.getProp(N,W.s,1,0,this),this.r=PropertyFactory.getProp(N,W.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return R.prototype={convertRectToPath:function(){var N=this.p.v[0],W=this.p.v[1],k=this.s.v[0]/2,V=this.s.v[1]/2,ie=bmMin(k,V,this.r.v),pe=ie*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(N+k,W-V+ie,N+k,W-V+ie,N+k,W-V+pe,0,!0),this.v.setTripleAt(N+k,W+V-ie,N+k,W+V-pe,N+k,W+V-ie,1,!0),0!==ie?(this.v.setTripleAt(N+k-ie,W+V,N+k-ie,W+V,N+k-pe,W+V,2,!0),this.v.setTripleAt(N-k+ie,W+V,N-k+pe,W+V,N-k+ie,W+V,3,!0),this.v.setTripleAt(N-k,W+V-ie,N-k,W+V-ie,N-k,W+V-pe,4,!0),this.v.setTripleAt(N-k,W-V+ie,N-k,W-V+pe,N-k,W-V+ie,5,!0),this.v.setTripleAt(N-k+ie,W-V,N-k+ie,W-V,N-k+pe,W-V,6,!0),this.v.setTripleAt(N+k-ie,W-V,N+k-pe,W-V,N+k-ie,W-V,7,!0)):(this.v.setTripleAt(N-k,W+V,N-k+pe,W+V,N-k,W+V,2),this.v.setTripleAt(N-k,W-V,N-k,W-V+pe,N-k,W-V,3))):(this.v.setTripleAt(N+k,W-V+ie,N+k,W-V+pe,N+k,W-V+ie,0,!0),0!==ie?(this.v.setTripleAt(N+k-ie,W-V,N+k-ie,W-V,N+k-pe,W-V,1,!0),this.v.setTripleAt(N-k+ie,W-V,N-k+pe,W-V,N-k+ie,W-V,2,!0),this.v.setTripleAt(N-k,W-V+ie,N-k,W-V+ie,N-k,W-V+pe,3,!0),this.v.setTripleAt(N-k,W+V-ie,N-k,W+V-pe,N-k,W+V-ie,4,!0),this.v.setTripleAt(N-k+ie,W+V,N-k+ie,W+V,N-k+pe,W+V,5,!0),this.v.setTripleAt(N+k-ie,W+V,N+k-pe,W+V,N+k-ie,W+V,6,!0),this.v.setTripleAt(N+k,W+V-ie,N+k,W+V-ie,N+k,W+V-pe,7,!0)):(this.v.setTripleAt(N-k,W-V,N-k+pe,W-V,N-k,W-V,1,!0),this.v.setTripleAt(N-k,W+V,N-k,W+V-pe,N-k,W+V,2,!0),this.v.setTripleAt(N+k,W+V,N+k-pe,W+V,N+k,W+V,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:_},extendPrototype([DynamicPropertyContainer],R),R}();return{getShapeProp:function(R,N,W){var k;return 3===W||4===W?k=(3===W?N.pt:N.ks).k.length?new B(R,N,W):new G(R,N,W):5===W?k=new F(R,N):6===W?k=new Q(R,N):7===W&&(k=new T(R,N)),k.k&&R.addDynamicProperty(k),k},getConstructorFunction:function(){return G},getKeyframedConstructorFunction:function(){return B}}}(),Matrix=function(){var u=Math.cos,f=Math.sin,m=Math.tan,_=Math.round;function C(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function D(pt){if(0===pt)return this;var Re=u(pt),ut=f(pt);return this._t(Re,-ut,0,0,ut,Re,0,0,0,0,1,0,0,0,0,1)}function G(pt){if(0===pt)return this;var Re=u(pt),ut=f(pt);return this._t(1,0,0,0,0,Re,-ut,0,0,ut,Re,0,0,0,0,1)}function z(pt){if(0===pt)return this;var Re=u(pt),ut=f(pt);return this._t(Re,0,ut,0,0,1,0,0,-ut,0,Re,0,0,0,0,1)}function B(pt){if(0===pt)return this;var Re=u(pt),ut=f(pt);return this._t(Re,-ut,0,0,ut,Re,0,0,0,0,1,0,0,0,0,1)}function Q(pt,Re){return this._t(1,Re,pt,1,0,0)}function T(pt,Re){return this.shear(m(pt),m(Re))}function F(pt,Re){var ut=u(Re),Qt=f(Re);return this._t(ut,Qt,0,0,-Qt,ut,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,m(pt),1,0,0,0,0,1,0,0,0,0,1)._t(ut,-Qt,0,0,Qt,ut,0,0,0,0,1,0,0,0,0,1)}function q(pt,Re,ut){return ut||0===ut||(ut=1),1===pt&&1===Re&&1===ut?this:this._t(pt,0,0,0,0,Re,0,0,0,0,ut,0,0,0,0,1)}function R(pt,Re,ut,Qt,Un,dn,Wt,An,fn,Fn,ft,Wn,Cn,tr,sr,li){return this.props[0]=pt,this.props[1]=Re,this.props[2]=ut,this.props[3]=Qt,this.props[4]=Un,this.props[5]=dn,this.props[6]=Wt,this.props[7]=An,this.props[8]=fn,this.props[9]=Fn,this.props[10]=ft,this.props[11]=Wn,this.props[12]=Cn,this.props[13]=tr,this.props[14]=sr,this.props[15]=li,this}function N(pt,Re,ut){return ut=ut||0,0!==pt||0!==Re||0!==ut?this._t(1,0,0,0,0,1,0,0,0,0,1,0,pt,Re,ut,1):this}function W(pt,Re,ut,Qt,Un,dn,Wt,An,fn,Fn,ft,Wn,Cn,tr,sr,li){var $t=this.props;if(1===pt&&0===Re&&0===ut&&0===Qt&&0===Un&&1===dn&&0===Wt&&0===An&&0===fn&&0===Fn&&1===ft&&0===Wn)return $t[12]=$t[12]*pt+$t[15]*Cn,$t[13]=$t[13]*dn+$t[15]*tr,$t[14]=$t[14]*ft+$t[15]*sr,$t[15]*=li,this._identityCalculated=!1,this;var Li=$t[0],Vi=$t[1],gr=$t[2],mo=$t[3],ao=$t[4],lo=$t[5],bn=$t[6],Mi=$t[7],Lo=$t[8],Xi=$t[9],co=$t[10],lr=$t[11],Dr=$t[12],Mr=$t[13],Sn=$t[14],Ar=$t[15];return $t[0]=Li*pt+Vi*Un+gr*fn+mo*Cn,$t[1]=Li*Re+Vi*dn+gr*Fn+mo*tr,$t[2]=Li*ut+Vi*Wt+gr*ft+mo*sr,$t[3]=Li*Qt+Vi*An+gr*Wn+mo*li,$t[4]=ao*pt+lo*Un+bn*fn+Mi*Cn,$t[5]=ao*Re+lo*dn+bn*Fn+Mi*tr,$t[6]=ao*ut+lo*Wt+bn*ft+Mi*sr,$t[7]=ao*Qt+lo*An+bn*Wn+Mi*li,$t[8]=Lo*pt+Xi*Un+co*fn+lr*Cn,$t[9]=Lo*Re+Xi*dn+co*Fn+lr*tr,$t[10]=Lo*ut+Xi*Wt+co*ft+lr*sr,$t[11]=Lo*Qt+Xi*An+co*Wn+lr*li,$t[12]=Dr*pt+Mr*Un+Sn*fn+Ar*Cn,$t[13]=Dr*Re+Mr*dn+Sn*Fn+Ar*tr,$t[14]=Dr*ut+Mr*Wt+Sn*ft+Ar*sr,$t[15]=Dr*Qt+Mr*An+Sn*Wn+Ar*li,this._identityCalculated=!1,this}function k(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function V(pt){for(var Re=0;Re<16;){if(pt.props[Re]!==this.props[Re])return!1;Re+=1}return!0}function ie(pt){var Re;for(Re=0;Re<16;Re+=1)pt.props[Re]=this.props[Re];return pt}function pe(pt){var Re;for(Re=0;Re<16;Re+=1)this.props[Re]=pt[Re]}function me(pt,Re,ut){return{x:pt*this.props[0]+Re*this.props[4]+ut*this.props[8]+this.props[12],y:pt*this.props[1]+Re*this.props[5]+ut*this.props[9]+this.props[13],z:pt*this.props[2]+Re*this.props[6]+ut*this.props[10]+this.props[14]}}function Ve(pt,Re,ut){return pt*this.props[0]+Re*this.props[4]+ut*this.props[8]+this.props[12]}function it(pt,Re,ut){return pt*this.props[1]+Re*this.props[5]+ut*this.props[9]+this.props[13]}function je(pt,Re,ut){return pt*this.props[2]+Re*this.props[6]+ut*this.props[10]+this.props[14]}function qe(){var pt=this.props[0]*this.props[5]-this.props[1]*this.props[4],Re=this.props[5]/pt,ut=-this.props[1]/pt,Qt=-this.props[4]/pt,Un=this.props[0]/pt,dn=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/pt,Wt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/pt,An=new Matrix;return An.props[0]=Re,An.props[1]=ut,An.props[4]=Qt,An.props[5]=Un,An.props[12]=dn,An.props[13]=Wt,An}function ot(pt){return this.getInverseMatrix().applyToPointArray(pt[0],pt[1],pt[2]||0)}function j(pt){var Re,ut=pt.length,Qt=[];for(Re=0;Re<ut;Re+=1)Qt[Re]=ot(pt[Re]);return Qt}function Ie(pt,Re,ut){var Qt=createTypedArray("float32",6);if(this.isIdentity())Qt[0]=pt[0],Qt[1]=pt[1],Qt[2]=Re[0],Qt[3]=Re[1],Qt[4]=ut[0],Qt[5]=ut[1];else{var Un=this.props[0],dn=this.props[1],Wt=this.props[4],An=this.props[5],fn=this.props[12],Fn=this.props[13];Qt[0]=pt[0]*Un+pt[1]*Wt+fn,Qt[1]=pt[0]*dn+pt[1]*An+Fn,Qt[2]=Re[0]*Un+Re[1]*Wt+fn,Qt[3]=Re[0]*dn+Re[1]*An+Fn,Qt[4]=ut[0]*Un+ut[1]*Wt+fn,Qt[5]=ut[0]*dn+ut[1]*An+Fn}return Qt}function bt(pt,Re,ut){return this.isIdentity()?[pt,Re,ut]:[pt*this.props[0]+Re*this.props[4]+ut*this.props[8]+this.props[12],pt*this.props[1]+Re*this.props[5]+ut*this.props[9]+this.props[13],pt*this.props[2]+Re*this.props[6]+ut*this.props[10]+this.props[14]]}function vt(pt,Re){if(this.isIdentity())return pt+","+Re;var ut=this.props;return Math.round(100*(pt*ut[0]+Re*ut[4]+ut[12]))/100+","+Math.round(100*(pt*ut[1]+Re*ut[5]+ut[13]))/100}function Ct(){for(var pt=0,Re=this.props,ut="matrix3d(";pt<16;)ut+=_(1e4*Re[pt])/1e4,ut+=15===pt?")":",",pt+=1;return ut}function Yt(pt){return pt<1e-6&&pt>0||pt>-1e-6&&pt<0?_(1e4*pt)/1e4:pt}function on(){var pt=this.props;return"matrix("+Yt(pt[0])+","+Yt(pt[1])+","+Yt(pt[4])+","+Yt(pt[5])+","+Yt(pt[12])+","+Yt(pt[13])+")"}return function(){this.reset=C,this.rotate=D,this.rotateX=G,this.rotateY=z,this.rotateZ=B,this.skew=T,this.skewFromAxis=F,this.shear=Q,this.scale=q,this.setTransform=R,this.translate=N,this.transform=W,this.applyToPoint=me,this.applyToX=Ve,this.applyToY=it,this.applyToZ=je,this.applyToPointArray=bt,this.applyToTriplePoints=Ie,this.applyToPointStringified=vt,this.toCSS=Ct,this.to2dCSS=on,this.clone=ie,this.cloneFromProps=pe,this.equals=V,this.inversePoints=j,this.inversePoint=ot,this.getInverseMatrix=qe,this._t=this.transform,this.isIdentity=k,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(u){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(u)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(u){setLocationHref(u)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(u){setSubframeEnabled(u)}function setPrefix(u){setIdPrefix(u)}function loadAnimation(u){return!0===standalone&&(u.animationData=JSON.parse(animationData)),animationManager.loadAnimation(u)}function setQuality(u){if("string"==typeof u)switch(u){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(u)&&u>1&&setDefaultCurveSegments(u);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator<"u"}function installPlugin(u,f){"expressions"===u&&setExpressionsPlugin(f)}function getFactory(u){switch(u){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(u){for(var f=queryString.split("&"),m=0;m<f.length;m+=1){var _=f[m].split("=");if(decodeURIComponent(_[0])==u)return decodeURIComponent(_[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.9.6";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)}catch(u){}var ShapeModifiers=(u={},f={},u.registerModifier=function(m,_){f[m]||(f[m]=_)},u.getModifier=function(m,_,C){return new f[m](_,C)},u),u,f;function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(u){if(!this.closed){u.sh.container.addDynamicProperty(u.sh);var f={shape:u.sh,data:u,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(f),this.addShapeToModifier(f),this._isAnimated&&u.setAsAnimated()}},ShapeModifier.prototype.init=function(u,f){this.shapes=[],this.elem=u,this.initDynamicPropertyContainer(u),this.initModifierProperties(u,f),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(u,f){this.s=PropertyFactory.getProp(u,f.s,0,.01,this),this.e=PropertyFactory.getProp(u,f.e,0,.01,this),this.o=PropertyFactory.getProp(u,f.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=f.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(u){u.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(u,f,m,_,C){var D=[];f<=1?D.push({s:u,e:f}):u>=1?D.push({s:u-1,e:f-1}):(D.push({s:u,e:1}),D.push({s:0,e:f-1}));var G,z,B=[],Q=D.length;for(G=0;G<Q;G+=1)(z=D[G]).e*C<_||z.s*C>_+m||B.push([z.s*C<=_?0:(z.s*C-_)/m,z.e*C>=_+m?1:(z.e*C-_)/m]);return B.length||B.push([0,0]),B},TrimModifier.prototype.releasePathsData=function(u){var f,m=u.length;for(f=0;f<m;f+=1)segmentsLengthPool.release(u[f]);return u.length=0,u},TrimModifier.prototype.processShapes=function(u){var f,m,_,C;if(this._mdf||u){var D=this.o.v%360/360;if(D<0&&(D+=1),(f=this.s.v>1?1+D:this.s.v<0?0+D:this.s.v+D)>(m=this.e.v>1?1+D:this.e.v<0?0+D:this.e.v+D)){var G=f;f=m,m=G}f=1e-4*Math.round(1e4*f),m=1e-4*Math.round(1e4*m),this.sValue=f,this.eValue=m}else f=this.sValue,m=this.eValue;var z,B,Q,T,F,q=this.shapes.length,R=0;if(m===f)for(C=0;C<q;C+=1)this.shapes[C].localShapeCollection.releaseShapes(),this.shapes[C].shape._mdf=!0,this.shapes[C].shape.paths=this.shapes[C].localShapeCollection,this._mdf&&(this.shapes[C].pathsData.length=0);else if(1===m&&0===f||0===m&&1===f){if(this._mdf)for(C=0;C<q;C+=1)this.shapes[C].pathsData.length=0,this.shapes[C].shape._mdf=!0}else{var N,W,k=[];for(C=0;C<q;C+=1)if((N=this.shapes[C]).shape._mdf||this._mdf||u||2===this.m){if(B=(_=N.shape.paths)._length,F=0,!N.shape._mdf&&N.pathsData.length)F=N.totalShapeLength;else{for(Q=this.releasePathsData(N.pathsData),z=0;z<B;z+=1)T=bez.getSegmentsLength(_.shapes[z]),Q.push(T),F+=T.totalLength;N.totalShapeLength=F,N.pathsData=Q}R+=F,N.shape._mdf=!0}else N.shape.paths=N.localShapeCollection;var V,ie=f,pe=m,me=0;for(C=q-1;C>=0;C-=1)if((N=this.shapes[C]).shape._mdf){for((W=N.localShapeCollection).releaseShapes(),2===this.m&&q>1?(V=this.calculateShapeEdges(f,m,N.totalShapeLength,me,R),me+=N.totalShapeLength):V=[[ie,pe]],B=V.length,z=0;z<B;z+=1){ie=V[z][0],pe=V[z][1],k.length=0,pe<=1?k.push({s:N.totalShapeLength*ie,e:N.totalShapeLength*pe}):ie>=1?k.push({s:N.totalShapeLength*(ie-1),e:N.totalShapeLength*(pe-1)}):(k.push({s:N.totalShapeLength*ie,e:N.totalShapeLength}),k.push({s:0,e:N.totalShapeLength*(pe-1)}));var Ve=this.addShapes(N,k[0]);if(k[0].s!==k[0].e){if(k.length>1)if(N.shape.paths.shapes[N.shape.paths._length-1].c){var it=Ve.pop();this.addPaths(Ve,W),Ve=this.addShapes(N,k[1],it)}else this.addPaths(Ve,W),Ve=this.addShapes(N,k[1]);this.addPaths(Ve,W)}}N.shape.paths=W}}},TrimModifier.prototype.addPaths=function(u,f){var m,_=u.length;for(m=0;m<_;m+=1)f.addShape(u[m])},TrimModifier.prototype.addSegment=function(u,f,m,_,C,D,G){C.setXYAt(f[0],f[1],"o",D),C.setXYAt(m[0],m[1],"i",D+1),G&&C.setXYAt(u[0],u[1],"v",D),C.setXYAt(_[0],_[1],"v",D+1)},TrimModifier.prototype.addSegmentFromArray=function(u,f,m,_){f.setXYAt(u[1],u[5],"o",m),f.setXYAt(u[2],u[6],"i",m+1),_&&f.setXYAt(u[0],u[4],"v",m),f.setXYAt(u[3],u[7],"v",m+1)},TrimModifier.prototype.addShapes=function(u,f,m){var _,C,D,G,z,B,Q,T,F=u.pathsData,q=u.shape.paths.shapes,R=u.shape.paths._length,N=0,W=[],k=!0;for(m?(z=m._length,T=m._length):(m=shapePool.newElement(),z=0,T=0),W.push(m),_=0;_<R;_+=1){for(B=F[_].lengths,m.c=q[_].c,D=q[_].c?B.length:B.length+1,C=1;C<D;C+=1)if(N+(G=B[C-1]).addedLength<f.s)N+=G.addedLength,m.c=!1;else{if(N>f.e){m.c=!1;break}f.s<=N&&f.e>=N+G.addedLength?(this.addSegment(q[_].v[C-1],q[_].o[C-1],q[_].i[C],q[_].v[C],m,z,k),k=!1):(Q=bez.getNewSegment(q[_].v[C-1],q[_].v[C],q[_].o[C-1],q[_].i[C],(f.s-N)/G.addedLength,(f.e-N)/G.addedLength,B[C-1]),this.addSegmentFromArray(Q,m,z,k),k=!1,m.c=!1),N+=G.addedLength,z+=1}if(q[_].c&&B.length){if(G=B[C-1],N<=f.e){var V=B[C-1].addedLength;f.s<=N&&f.e>=N+V?(this.addSegment(q[_].v[C-1],q[_].o[C-1],q[_].i[0],q[_].v[0],m,z,k),k=!1):(Q=bez.getNewSegment(q[_].v[C-1],q[_].v[0],q[_].o[C-1],q[_].i[0],(f.s-N)/V,(f.e-N)/V,B[C-1]),this.addSegmentFromArray(Q,m,z,k),k=!1,m.c=!1)}else m.c=!1;N+=G.addedLength,z+=1}if(m._length&&(m.setXYAt(m.v[T][0],m.v[T][1],"i",T),m.setXYAt(m.v[m._length-1][0],m.v[m._length-1][1],"o",m._length-1)),N>f.e)break;_<R-1&&(m=shapePool.newElement(),k=!0,W.push(m),z=0)}return W},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(u,f){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(u,f.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(u,f){var m=f/100,_=[0,0],C=u._length,D=0;for(D=0;D<C;D+=1)_[0]+=u.v[D][0],_[1]+=u.v[D][1];_[0]/=C,_[1]/=C;var q=shapePool.newElement();for(q.c=u.c,D=0;D<C;D+=1)q.setTripleAt(u.v[D][0]+(_[0]-u.v[D][0])*m,u.v[D][1]+(_[1]-u.v[D][1])*m,u.o[D][0]+(_[0]-u.o[D][0])*-m,u.o[D][1]+(_[1]-u.o[D][1])*-m,u.i[D][0]+(_[0]-u.i[D][0])*-m,u.i[D][1]+(_[1]-u.i[D][1])*-m,D);return q},PuckerAndBloatModifier.prototype.processShapes=function(u){var f,m,_,C,D,G,z=this.shapes.length,B=this.amount.v;if(0!==B)for(m=0;m<z;m+=1){if(G=(D=this.shapes[m]).localShapeCollection,D.shape._mdf||this._mdf||u)for(G.releaseShapes(),D.shape._mdf=!0,f=D.shape.paths.shapes,C=D.shape.paths._length,_=0;_<C;_+=1)G.addShape(this.processPath(f[_],B));D.shape.paths=D.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var u=[0,0];function f(m,_,C){if(this.elem=m,this.frameId=-1,this.propType="transform",this.data=_,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(C||m),_.p&&_.p.s?(this.px=PropertyFactory.getProp(m,_.p.x,0,0,this),this.py=PropertyFactory.getProp(m,_.p.y,0,0,this),_.p.z&&(this.pz=PropertyFactory.getProp(m,_.p.z,0,0,this))):this.p=PropertyFactory.getProp(m,_.p||{k:[0,0,0]},1,0,this),_.rx){if(this.rx=PropertyFactory.getProp(m,_.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(m,_.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(m,_.rz,0,degToRads,this),_.or.k[0].ti){var D,G=_.or.k.length;for(D=0;D<G;D+=1)_.or.k[D].to=null,_.or.k[D].ti=null}this.or=PropertyFactory.getProp(m,_.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(m,_.r||{k:0},0,degToRads,this);_.sk&&(this.sk=PropertyFactory.getProp(m,_.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(m,_.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(m,_.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(m,_.s||{k:[100,100,100]},1,.01,this),this.o=_.o?PropertyFactory.getProp(m,_.o,0,.01,m):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return f.prototype={applyToMatrix:function(m){var _=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||_,this.a&&m.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&m.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&m.skewFromAxis(-this.sk.v,this.sa.v),this.r?m.rotate(-this.r.v):m.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?m.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):m.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(m){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||m){var _;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var C,D;if(_=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(C=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/_,0),D=this.p.getValueAtTime(this.p.keyframes[0].t/_,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(C=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/_,0),D=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/_,0)):(C=this.p.pv,D=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/_,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){C=[],D=[];var G=this.px,z=this.py;G._caching.lastFrame+G.offsetTime<=G.keyframes[0].t?(C[0]=G.getValueAtTime((G.keyframes[0].t+.01)/_,0),C[1]=z.getValueAtTime((z.keyframes[0].t+.01)/_,0),D[0]=G.getValueAtTime(G.keyframes[0].t/_,0),D[1]=z.getValueAtTime(z.keyframes[0].t/_,0)):G._caching.lastFrame+G.offsetTime>=G.keyframes[G.keyframes.length-1].t?(C[0]=G.getValueAtTime(G.keyframes[G.keyframes.length-1].t/_,0),C[1]=z.getValueAtTime(z.keyframes[z.keyframes.length-1].t/_,0),D[0]=G.getValueAtTime((G.keyframes[G.keyframes.length-1].t-.01)/_,0),D[1]=z.getValueAtTime((z.keyframes[z.keyframes.length-1].t-.01)/_,0)):(C=[G.pv,z.pv],D[0]=G.getValueAtTime((G._caching.lastFrame+G.offsetTime-.01)/_,G.offsetTime),D[1]=z.getValueAtTime((z._caching.lastFrame+z.offsetTime-.01)/_,z.offsetTime))}else C=D=u;this.v.rotate(-Math.atan2(C[1]-D[1],C[0]-D[0]))}this.data.p&&this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],f),f.prototype.addDynamicProperty=function(m){this._addDynamicProperty(m),this.elem.addDynamicProperty(m),this._isDirty=!0},f.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(m,_,C){return new f(m,_,C)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function getFontProperties(u){for(var f=u.fStyle?u.fStyle.split(" "):[],m="normal",_="normal",C=f.length,D=0;D<C;D+=1)switch(f[D].toLowerCase()){case"italic":_="italic";break;case"bold":m="700";break;case"black":m="900";break;case"medium":m="500";break;case"regular":case"normal":m="400";break;case"light":case"thin":m="200"}return{style:_,weight:u.fWeight||m}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(u,f){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(u,f.c,0,null,this),this.o=PropertyFactory.getProp(u,f.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(u,f.tr,this),this.so=PropertyFactory.getProp(u,f.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(u,f.tr.eo,0,.01,this),this.data=f,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(u,f,m,_,C,D){var G=D?-1:1,z=_.s.v[0]+(1-_.s.v[0])*(1-C),B=_.s.v[1]+(1-_.s.v[1])*(1-C);u.translate(_.p.v[0]*G*C,_.p.v[1]*G*C,_.p.v[2]),f.translate(-_.a.v[0],-_.a.v[1],_.a.v[2]),f.rotate(-_.r.v*G*C),f.translate(_.a.v[0],_.a.v[1],_.a.v[2]),m.translate(-_.a.v[0],-_.a.v[1],_.a.v[2]),m.scale(D?1/z:z,D?1/B:B),m.translate(_.a.v[0],_.a.v[1],_.a.v[2])},RepeaterModifier.prototype.init=function(u,f,m,_){for(this.elem=u,this.arr=f,this.pos=m,this.elemsData=_,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(u),this.initModifierProperties(u,f[m]);m>0;)this._elements.unshift(f[m-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(u){var f,m=u.length;for(f=0;f<m;f+=1)u[f]._processed=!1,"gr"===u[f].ty&&this.resetElements(u[f].it)},RepeaterModifier.prototype.cloneElements=function(u){var f=JSON.parse(JSON.stringify(u));return this.resetElements(f),f},RepeaterModifier.prototype.changeGroupRender=function(u,f){var m,_=u.length;for(m=0;m<_;m+=1)u[m]._render=f,"gr"===u[m].ty&&this.changeGroupRender(u[m].it,f)},RepeaterModifier.prototype.processShapes=function(u){var f,m,_,C,D,G=!1;if(this._mdf||u){var z,B=Math.ceil(this.c.v);if(this._groups.length<B){for(;this._groups.length<B;){var Q={it:this.cloneElements(this._elements),ty:"gr"};Q.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Q),this._groups.splice(0,0,Q),this._currentCopies+=1}this.elem.reloadShapes(),G=!0}for(D=0,_=0;_<=this._groups.length-1;_+=1){if(this._groups[_]._render=z=D<B,this.changeGroupRender(this._groups[_].it,z),!z){var T=this.elemsData[_].it,F=T[T.length-1];0!==F.transform.op.v?(F.transform.op._mdf=!0,F.transform.op.v=0):F.transform.op._mdf=!1}D+=1}this._currentCopies=B;var q=this.o.v,R=q%1,N=q>0?Math.floor(q):Math.ceil(q),W=this.pMatrix.props,k=this.rMatrix.props,V=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ie,pe,me=0;if(q>0){for(;me<N;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),me+=1;R&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,R,!1),me+=R)}else if(q<0){for(;me>N;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),me-=1;R&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-R,!0),me-=R)}for(_=1===this.data.m?0:this._currentCopies-1,C=1===this.data.m?1:-1,D=this._currentCopies;D;){if(pe=(m=(f=this.elemsData[_].it)[f.length-1].transform.mProps.v.props).length,f[f.length-1].transform.mProps._mdf=!0,f[f.length-1].transform.op._mdf=!0,f[f.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+_/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==me){for((0!==_&&1===C||_!==this._currentCopies-1&&-1===C)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15]),this.matrix.transform(V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9],V[10],V[11],V[12],V[13],V[14],V[15]),this.matrix.transform(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15]),ie=0;ie<pe;ie+=1)m[ie]=this.matrix.props[ie];this.matrix.reset()}else for(this.matrix.reset(),ie=0;ie<pe;ie+=1)m[ie]=this.matrix.props[ie];me+=1,D-=1,_+=C}}else for(D=this._currentCopies,_=0,C=1;D;)m=(f=this.elemsData[_].it)[f.length-1].transform.mProps.v.props,f[f.length-1].transform.mProps._mdf=!1,f[f.length-1].transform.op._mdf=!1,D-=1,_+=C;return G},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(u,f){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(u,f.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(u,f){var m,_=shapePool.newElement();_.c=u.c;var C,D,G,z,B,Q,T,F,q,R,N,W,k=u._length,V=0;for(m=0;m<k;m+=1)D=u.i[m],(C=u.v[m])[0]===(G=u.o[m])[0]&&C[1]===G[1]&&C[0]===D[0]&&C[1]===D[1]?0!==m&&m!==k-1||u.c?(z=0===m?u.v[k-1]:u.v[m-1],Q=(B=Math.sqrt(Math.pow(C[0]-z[0],2)+Math.pow(C[1]-z[1],2)))?Math.min(B/2,f)/B:0,T=N=C[0]+(z[0]-C[0])*Q,F=W=C[1]-(C[1]-z[1])*Q,_.setTripleAt(T,F,T-(T-C[0])*roundCorner,F-(F-C[1])*roundCorner,N,W,V),V+=1,z=m===k-1?u.v[0]:u.v[m+1],Q=(B=Math.sqrt(Math.pow(C[0]-z[0],2)+Math.pow(C[1]-z[1],2)))?Math.min(B/2,f)/B:0,T=q=C[0]+(z[0]-C[0])*Q,F=R=C[1]+(z[1]-C[1])*Q,_.setTripleAt(T,F,q,R,N=T-(T-C[0])*roundCorner,W=F-(F-C[1])*roundCorner,V),V+=1):(_.setTripleAt(C[0],C[1],G[0],G[1],D[0],D[1],V),V+=1):(_.setTripleAt(u.v[m][0],u.v[m][1],u.o[m][0],u.o[m][1],u.i[m][0],u.i[m][1],V),V+=1);return _},RoundCornersModifier.prototype.processShapes=function(u){var f,m,_,C,D,G,z=this.shapes.length,B=this.rd.v;if(0!==B)for(m=0;m<z;m+=1){if(G=(D=this.shapes[m]).localShapeCollection,D.shape._mdf||this._mdf||u)for(G.releaseShapes(),D.shape._mdf=!0,f=D.shape.paths.shapes,C=D.shape.paths._length,_=0;_<C;_+=1)G.addShape(this.processPath(f[_],B));D.shape.paths=D.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var u={w:0,size:0,shapes:[],data:{shapes:[]}},f=[];f=f.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var m=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],_=[65039,8205];function C(B,Q){var T=createTag("span");T.setAttribute("aria-hidden",!0),T.style.fontFamily=Q;var F=createTag("span");F.innerText="giItT1WQy@!-/#",T.style.position="absolute",T.style.left="-10000px",T.style.top="-10000px",T.style.fontSize="300px",T.style.fontVariant="normal",T.style.fontStyle="normal",T.style.fontWeight="normal",T.style.letterSpacing="0",T.appendChild(F),document.body.appendChild(T);var q=F.offsetWidth;return F.style.fontFamily=function(R){var N,W=R.split(","),k=W.length,V=[];for(N=0;N<k;N+=1)"sans-serif"!==W[N]&&"monospace"!==W[N]&&V.push(W[N]);return V.join(",")}(B)+", "+Q,{node:F,w:q,parent:T}}function D(B,Q){var T,F=document.body&&Q?"svg":"canvas",q=getFontProperties(B);if("svg"===F){var R=createNS("text");R.style.fontSize="100px",R.setAttribute("font-family",B.fFamily),R.setAttribute("font-style",q.style),R.setAttribute("font-weight",q.weight),R.textContent="1",B.fClass?(R.style.fontFamily="inherit",R.setAttribute("class",B.fClass)):R.style.fontFamily=B.fFamily,Q.appendChild(R),T=R}else{var N=new OffscreenCanvas(500,500).getContext("2d");N.font=q.style+" "+q.weight+" 100px "+B.fFamily,T=N}return{measureText:function(W){return"svg"===F?(T.textContent=W,T.getComputedTextLength()):T.measureText(W).width}}}var G=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return G.isModifier=function(B,Q){var T=B.toString(16)+Q.toString(16);return-1!==m.indexOf(T)},G.isZeroWidthJoiner=function(B,Q){return Q?B===_[0]&&Q===_[1]:B===_[1]},G.isCombinedCharacter=function(B){return-1!==f.indexOf(B)},G.prototype={addChars:function(B){if(B){var Q;this.chars||(this.chars=[]);var T,F,q=B.length,R=this.chars.length;for(Q=0;Q<q;Q+=1){for(T=0,F=!1;T<R;)this.chars[T].style===B[Q].style&&this.chars[T].fFamily===B[Q].fFamily&&this.chars[T].ch===B[Q].ch&&(F=!0),T+=1;F||(this.chars.push(B[Q]),R+=1)}}},addFonts:function(B,Q){if(B){if(this.chars)return this.isLoaded=!0,void(this.fonts=B.list);if(!document.body)return this.isLoaded=!0,B.list.forEach(function(me){me.helper=D(me),me.cache={}}),void(this.fonts=B.list);var T,F=B.list,q=F.length,R=q;for(T=0;T<q;T+=1){var N,W,k=!0;if(F[T].loaded=!1,F[T].monoCase=C(F[T].fFamily,"monospace"),F[T].sansCase=C(F[T].fFamily,"sans-serif"),F[T].fPath){if("p"===F[T].fOrigin||3===F[T].origin){if((N=document.querySelectorAll('style[f-forigin="p"][f-family="'+F[T].fFamily+'"], style[f-origin="3"][f-family="'+F[T].fFamily+'"]')).length>0&&(k=!1),k){var V=createTag("style");V.setAttribute("f-forigin",F[T].fOrigin),V.setAttribute("f-origin",F[T].origin),V.setAttribute("f-family",F[T].fFamily),V.type="text/css",V.innerText="@font-face {font-family: "+F[T].fFamily+"; font-style: normal; src: url('"+F[T].fPath+"');}",Q.appendChild(V)}}else if("g"===F[T].fOrigin||1===F[T].origin){for(N=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),W=0;W<N.length;W+=1)-1!==N[W].href.indexOf(F[T].fPath)&&(k=!1);if(k){var ie=createTag("link");ie.setAttribute("f-forigin",F[T].fOrigin),ie.setAttribute("f-origin",F[T].origin),ie.type="text/css",ie.rel="stylesheet",ie.href=F[T].fPath,document.body.appendChild(ie)}}else if("t"===F[T].fOrigin||2===F[T].origin){for(N=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),W=0;W<N.length;W+=1)F[T].fPath===N[W].src&&(k=!1);if(k){var pe=createTag("link");pe.setAttribute("f-forigin",F[T].fOrigin),pe.setAttribute("f-origin",F[T].origin),pe.setAttribute("rel","stylesheet"),pe.setAttribute("href",F[T].fPath),Q.appendChild(pe)}}}else F[T].loaded=!0,R-=1;F[T].helper=D(F[T],Q),F[T].cache={},this.fonts.push(F[T])}0===R?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(B,Q,T){for(var F=0,q=this.chars.length;F<q;){if(this.chars[F].ch===B&&this.chars[F].style===Q&&this.chars[F].fFamily===T)return this.chars[F];F+=1}return("string"==typeof B&&13!==B.charCodeAt(0)||!B)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",B,Q,T)),u},getFontByName:function(B){for(var Q=0,T=this.fonts.length;Q<T;){if(this.fonts[Q].fName===B)return this.fonts[Q];Q+=1}return this.fonts[0]},measureText:function(B,Q,T){var F=this.getFontByName(Q),q=B.charCodeAt(0);if(!F.cache[q+1]){var R=F.helper;if(" "===B){var N=R.measureText("|"+B+"|"),W=R.measureText("||");F.cache[q+1]=(N-W)/100}else F.cache[q+1]=R.measureText(B)/100}return F.cache[q+1]*T},checkLoadedFonts:function(){var B,F=this.fonts.length,q=F;for(B=0;B<F;B+=1)this.fonts[B].loaded?q-=1:"n"===this.fonts[B].fOrigin||0===this.fonts[B].origin?this.fonts[B].loaded=!0:((this.fonts[B].monoCase.node.offsetWidth!==this.fonts[B].monoCase.w||this.fonts[B].sansCase.node.offsetWidth!==this.fonts[B].sansCase.w)&&(q-=1,this.fonts[B].loaded=!0),this.fonts[B].loaded&&(this.fonts[B].sansCase.parent.parentNode.removeChild(this.fonts[B].sansCase.parent),this.fonts[B].monoCase.parent.parentNode.removeChild(this.fonts[B].monoCase.parent)));0!==q&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},G}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(u){-1===this.renderableComponents.indexOf(u)&&this.renderableComponents.push(u)},removeRenderableComponent:function(u){-1!==this.renderableComponents.indexOf(u)&&this.renderableComponents.splice(this.renderableComponents.indexOf(u),1)},prepareRenderableFrame:function(u){this.checkLayerLimits(u)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(u){this.data.ip-this.data.st<=u&&this.data.op-this.data.st>u?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var u,f=this.renderableComponents.length;for(u=0;u<f;u+=1)this.renderableComponents[u].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var MaskManagerInterface=function(){function u(f,m){this._mask=f,this._data=m}return Object.defineProperty(u.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(u.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(f){var m,_=createSizedArray(f.viewData.length),C=f.viewData.length;for(m=0;m<C;m+=1)_[m]=new u(f.viewData[m],f.masksProperties[m]);return function(D){for(m=0;m<C;){if(f.masksProperties[m].nm===D)return _[m];m+=1}return null}}}(),ExpressionPropertyInterface=function(){var u={pv:0,v:0,mult:1},f={pv:[0,0,0],v:[0,0,0],mult:1};function m(C,D,G){Object.defineProperty(C,"velocity",{get:function(){return D.getVelocityAtTime(D.comp.currentFrame)}}),C.numKeys=D.keyframes?D.keyframes.length:0,C.key=function(z){if(!C.numKeys)return 0;var B;B="s"in D.keyframes[z-1]?D.keyframes[z-1].s:"e"in D.keyframes[z-2]?D.keyframes[z-2].e:D.keyframes[z-2].s;var Q="unidimensional"===G?new Number(B):Object.assign({},B);return Q.time=D.keyframes[z-1].t/D.elem.comp.globalData.frameRate,Q.value="unidimensional"===G?B[0]:B,Q},C.valueAtTime=D.getValueAtTime,C.speedAtTime=D.getSpeedAtTime,C.velocityAtTime=D.getVelocityAtTime,C.propertyGroup=D.propertyGroup}function _(){return u}return function(C){return C?"unidimensional"===C.propType?function(D){D&&"pv"in D||(D=u);var G=1/D.mult,z=D.pv*G,B=new Number(z);return B.value=z,m(B,D,"unidimensional"),function(){return D.k&&D.getValue(),B.value!==(z=D.v*G)&&((B=new Number(z)).value=z,m(B,D,"unidimensional")),B}}(C):function(D){D&&"pv"in D||(D=f);var G=1/D.mult,z=D.data&&D.data.l||D.pv.length,B=createTypedArray("float32",z),Q=createTypedArray("float32",z);return B.value=Q,m(B,D,"multidimensional"),function(){D.k&&D.getValue();for(var T=0;T<z;T+=1)Q[T]=D.v[T]*G,B[T]=Q[T];return B}}(C):_}}(),TransformExpressionInterface=function(u){function f(G){switch(G){case"scale":case"Scale":case"ADBE Scale":case 6:return f.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return f.rotation;case"ADBE Rotate X":return f.xRotation;case"ADBE Rotate Y":return f.yRotation;case"position":case"Position":case"ADBE Position":case 2:return f.position;case"ADBE Position_0":return f.xPosition;case"ADBE Position_1":return f.yPosition;case"ADBE Position_2":return f.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return f.anchorPoint;case"opacity":case"Opacity":case 11:return f.opacity;default:return null}}var m,_,C,D;return Object.defineProperty(f,"rotation",{get:ExpressionPropertyInterface(u.r||u.rz)}),Object.defineProperty(f,"zRotation",{get:ExpressionPropertyInterface(u.rz||u.r)}),Object.defineProperty(f,"xRotation",{get:ExpressionPropertyInterface(u.rx)}),Object.defineProperty(f,"yRotation",{get:ExpressionPropertyInterface(u.ry)}),Object.defineProperty(f,"scale",{get:ExpressionPropertyInterface(u.s)}),u.p?D=ExpressionPropertyInterface(u.p):(m=ExpressionPropertyInterface(u.px),_=ExpressionPropertyInterface(u.py),u.pz&&(C=ExpressionPropertyInterface(u.pz))),Object.defineProperty(f,"position",{get:function(){return u.p?D():[m(),_(),C?C():0]}}),Object.defineProperty(f,"xPosition",{get:ExpressionPropertyInterface(u.px)}),Object.defineProperty(f,"yPosition",{get:ExpressionPropertyInterface(u.py)}),Object.defineProperty(f,"zPosition",{get:ExpressionPropertyInterface(u.pz)}),Object.defineProperty(f,"anchorPoint",{get:ExpressionPropertyInterface(u.a)}),Object.defineProperty(f,"opacity",{get:ExpressionPropertyInterface(u.o)}),Object.defineProperty(f,"skew",{get:ExpressionPropertyInterface(u.sk)}),Object.defineProperty(f,"skewAxis",{get:ExpressionPropertyInterface(u.sa)}),Object.defineProperty(f,"orientation",{get:ExpressionPropertyInterface(u.or)}),f},LayerExpressionInterface=function(){function u(Q){var T=new Matrix;return void 0!==Q?this._elem.finalTransform.mProp.getValueAtTime(Q).clone(T):this._elem.finalTransform.mProp.applyToMatrix(T),T}function f(Q,T){var F=this.getMatrix(T);return F.props[12]=0,F.props[13]=0,F.props[14]=0,this.applyPoint(F,Q)}function m(Q,T){var F=this.getMatrix(T);return this.applyPoint(F,Q)}function _(Q,T){var F=this.getMatrix(T);return F.props[12]=0,F.props[13]=0,F.props[14]=0,this.invertPoint(F,Q)}function C(Q,T){var F=this.getMatrix(T);return this.invertPoint(F,Q)}function D(Q,T){if(this._elem.hierarchy&&this._elem.hierarchy.length){var F,q=this._elem.hierarchy.length;for(F=0;F<q;F+=1)this._elem.hierarchy[F].finalTransform.mProp.applyToMatrix(Q)}return Q.applyToPointArray(T[0],T[1],T[2]||0)}function G(Q,T){if(this._elem.hierarchy&&this._elem.hierarchy.length){var F,q=this._elem.hierarchy.length;for(F=0;F<q;F+=1)this._elem.hierarchy[F].finalTransform.mProp.applyToMatrix(Q)}return Q.inversePoint(T)}function z(Q){var T=new Matrix;if(T.reset(),this._elem.finalTransform.mProp.applyToMatrix(T),this._elem.hierarchy&&this._elem.hierarchy.length){var F,q=this._elem.hierarchy.length;for(F=0;F<q;F+=1)this._elem.hierarchy[F].finalTransform.mProp.applyToMatrix(T);return T.inversePoint(Q)}return T.inversePoint(Q)}function B(){return[1,1,1,1]}return function(Q){var T;function F(R){switch(R){case"ADBE Root Vectors Group":case"Contents":case 2:return F.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return T;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return F.effect;case"ADBE Text Properties":return F.textInterface;default:return null}}F.getMatrix=u,F.invertPoint=G,F.applyPoint=D,F.toWorld=m,F.toWorldVec=f,F.fromWorld=C,F.fromWorldVec=_,F.toComp=m,F.fromComp=z,F.sampleImage=B,F.sourceRectAtTime=Q.sourceRectAtTime.bind(Q),F._elem=Q;var q=getDescriptor(T=TransformExpressionInterface(Q.finalTransform.mProp),"anchorPoint");return Object.defineProperties(F,{hasParent:{get:function(){return Q.hierarchy.length}},parent:{get:function(){return Q.hierarchy[0].layerInterface}},rotation:getDescriptor(T,"rotation"),scale:getDescriptor(T,"scale"),position:getDescriptor(T,"position"),opacity:getDescriptor(T,"opacity"),anchorPoint:q,anchor_point:q,transform:{get:function(){return T}},active:{get:function(){return Q.isInRange}}}),F.startTime=Q.data.st,F.index=Q.data.ind,F.source=Q.data.refId,F.height=0===Q.data.ty?Q.data.h:100,F.width=0===Q.data.ty?Q.data.w:100,F.inPoint=Q.data.ip/Q.comp.globalData.frameRate,F.outPoint=Q.data.op/Q.comp.globalData.frameRate,F._name=Q.data.nm,F.registerMaskInterface=function(R){F.mask=new MaskManagerInterface(R,Q)},F.registerEffectsInterface=function(R){F.effect=R},F}}(),propertyGroupFactory=function(u,f){return function(m){return(m=void 0===m?1:m)<=0?u:f(m-1)}},PropertyInterface=function(u,f){var m={_name:u};return function(_){return(_=void 0===_?1:_)<=0?m:f(_-1)}},EffectsExpressionInterface=function(){function u(m,_,C,D){function G(F){for(var q=m.ef,R=0,N=q.length;R<N;){if(F===q[R].nm||F===q[R].mn||F===q[R].ix)return 5===q[R].ty?Q[R]:Q[R]();R+=1}throw new Error}var z,B=propertyGroupFactory(G,C),Q=[],T=m.ef.length;for(z=0;z<T;z+=1)Q.push(5===m.ef[z].ty?u(m.ef[z],_.effectElements[z],_.effectElements[z].propertyGroup,D):f(_.effectElements[z],m.ef[z].ty,D,B));return"ADBE Color Control"===m.mn&&Object.defineProperty(G,"color",{get:function(){return Q[0]()}}),Object.defineProperties(G,{numProperties:{get:function(){return m.np}},_name:{value:m.nm},propertyGroup:{value:B}}),G.active=G.enabled=0!==m.en,G}function f(m,_,C,D){var G=ExpressionPropertyInterface(m.p);return m.p.setGroupProperty&&m.p.setGroupProperty(PropertyInterface("",D)),function(){return 10===_?C.comp.compInterface(m.p.v):G()}}return{createEffectsInterface:function(m,_){if(m.effectsManager){var C,D=[],G=m.data.ef,z=m.effectsManager.effectElements.length;for(C=0;C<z;C+=1)D.push(u(G[C],m.effectsManager.effectElements[C],_,m));var B=m.data.ef||[],Q=function(T){for(C=0,z=B.length;C<z;){if(T===B[C].nm||T===B[C].mn||T===B[C].ix)return D[C];C+=1}return null};return Object.defineProperty(Q,"numProperties",{get:function(){return B.length}}),Q}return null}}}(),CompExpressionInterface=function(u){function f(m){for(var _=0,C=u.layers.length;_<C;){if(u.layers[_].nm===m||u.layers[_].ind===m)return u.elements[_].layerInterface;_+=1}return null}return Object.defineProperty(f,"_name",{value:u.data.nm}),f.layer=f,f.pixelAspect=1,f.height=u.data.h||u.globalData.compSize.h,f.width=u.data.w||u.globalData.compSize.w,f.pixelAspect=1,f.frameDuration=1/u.globalData.frameRate,f.displayStartTime=0,f.numLayers=u.layers.length,f},ShapePathInterface=function(u,f,m){var _=f.sh;function C(G){return"Shape"===G||"shape"===G||"Path"===G||"path"===G||"ADBE Vector Shape"===G||2===G?C.path:null}var D=propertyGroupFactory(C,m);return _.setGroupProperty(PropertyInterface("Path",D)),Object.defineProperties(C,{path:{get:function(){return _.k&&_.getValue(),_}},shape:{get:function(){return _.k&&_.getValue(),_}},_name:{value:u.nm},ix:{value:u.ix},propertyIndex:{value:u.ix},mn:{value:u.mn},propertyGroup:{value:m}}),C},ShapeExpressionInterface=function(){function u(R,N,W){var k,V=[],ie=R?R.length:0;for(k=0;k<ie;k+=1)"gr"===R[k].ty?V.push(f(R[k],N[k],W)):"fl"===R[k].ty?V.push(m(R[k],N[k],W)):"st"===R[k].ty?V.push(D(R[k],N[k],W)):"tm"===R[k].ty?V.push(G(R[k],N[k],W)):"tr"===R[k].ty||V.push("el"===R[k].ty?B(R[k],N[k],W):"sr"===R[k].ty?Q(R[k],N[k],W):"sh"===R[k].ty?ShapePathInterface(R[k],N[k],W):"rc"===R[k].ty?T(R[k],N[k],W):"rd"===R[k].ty?F(R[k],N[k],W):"rp"===R[k].ty?q(R[k],N[k],W):"gf"===R[k].ty?_(R[k],N[k],W):function(){return null});return V}function f(R,N,W){var k=function(pe){switch(pe){case"ADBE Vectors Group":case"Contents":case 2:return k.content;default:return k.transform}};k.propertyGroup=propertyGroupFactory(k,W);var V=function(pe,me,Ve){var it,je=function(ot){for(var j=0,Ie=it.length;j<Ie;){if(it[j]._name===ot||it[j].mn===ot||it[j].propertyIndex===ot||it[j].ix===ot||it[j].ind===ot)return it[j];j+=1}return"number"==typeof ot?it[ot-1]:null};je.propertyGroup=propertyGroupFactory(je,Ve),it=u(pe.it,me.it,je.propertyGroup),je.numProperties=it.length;var qe=z(pe.it[pe.it.length-1],me.it[me.it.length-1],je.propertyGroup);return je.transform=qe,je.propertyIndex=pe.cix,je._name=pe.nm,je}(R,N,k.propertyGroup),ie=z(R.it[R.it.length-1],N.it[N.it.length-1],k.propertyGroup);return k.content=V,k.transform=ie,Object.defineProperty(k,"_name",{get:function(){return R.nm}}),k.numProperties=R.np,k.propertyIndex=R.ix,k.nm=R.nm,k.mn=R.mn,k}function m(R,N,W){function k(V){return"Color"===V||"color"===V?k.color:"Opacity"===V||"opacity"===V?k.opacity:null}return Object.defineProperties(k,{color:{get:ExpressionPropertyInterface(N.c)},opacity:{get:ExpressionPropertyInterface(N.o)},_name:{value:R.nm},mn:{value:R.mn}}),N.c.setGroupProperty(PropertyInterface("Color",W)),N.o.setGroupProperty(PropertyInterface("Opacity",W)),k}function _(R,N,W){function k(V){return"Start Point"===V||"start point"===V?k.startPoint:"End Point"===V||"end point"===V?k.endPoint:"Opacity"===V||"opacity"===V?k.opacity:null}return Object.defineProperties(k,{startPoint:{get:ExpressionPropertyInterface(N.s)},endPoint:{get:ExpressionPropertyInterface(N.e)},opacity:{get:ExpressionPropertyInterface(N.o)},type:{get:function(){return"a"}},_name:{value:R.nm},mn:{value:R.mn}}),N.s.setGroupProperty(PropertyInterface("Start Point",W)),N.e.setGroupProperty(PropertyInterface("End Point",W)),N.o.setGroupProperty(PropertyInterface("Opacity",W)),k}function D(R,N,W){var k,je,V=propertyGroupFactory(it,W),ie=propertyGroupFactory(Ve,V),me=R.d?R.d.length:0,Ve={};for(k=0;k<me;k+=1)je=k,Object.defineProperty(Ve,R.d[je].nm,{get:ExpressionPropertyInterface(N.d.dataProps[je].p)}),N.d.dataProps[k].p.setGroupProperty(ie);function it(je){return"Color"===je||"color"===je?it.color:"Opacity"===je||"opacity"===je?it.opacity:"Stroke Width"===je||"stroke width"===je?it.strokeWidth:null}return Object.defineProperties(it,{color:{get:ExpressionPropertyInterface(N.c)},opacity:{get:ExpressionPropertyInterface(N.o)},strokeWidth:{get:ExpressionPropertyInterface(N.w)},dash:{get:function(){return Ve}},_name:{value:R.nm},mn:{value:R.mn}}),N.c.setGroupProperty(PropertyInterface("Color",V)),N.o.setGroupProperty(PropertyInterface("Opacity",V)),N.w.setGroupProperty(PropertyInterface("Stroke Width",V)),it}function G(R,N,W){function k(ie){return ie===R.e.ix||"End"===ie||"end"===ie?k.end:ie===R.s.ix?k.start:ie===R.o.ix?k.offset:null}var V=propertyGroupFactory(k,W);return k.propertyIndex=R.ix,N.s.setGroupProperty(PropertyInterface("Start",V)),N.e.setGroupProperty(PropertyInterface("End",V)),N.o.setGroupProperty(PropertyInterface("Offset",V)),k.propertyIndex=R.ix,k.propertyGroup=W,Object.defineProperties(k,{start:{get:ExpressionPropertyInterface(N.s)},end:{get:ExpressionPropertyInterface(N.e)},offset:{get:ExpressionPropertyInterface(N.o)},_name:{value:R.nm}}),k.mn=R.mn,k}function z(R,N,W){function k(ie){return R.a.ix===ie||"Anchor Point"===ie?k.anchorPoint:R.o.ix===ie||"Opacity"===ie?k.opacity:R.p.ix===ie||"Position"===ie?k.position:R.r.ix===ie||"Rotation"===ie||"ADBE Vector Rotation"===ie?k.rotation:R.s.ix===ie||"Scale"===ie?k.scale:R.sk&&R.sk.ix===ie||"Skew"===ie?k.skew:R.sa&&R.sa.ix===ie||"Skew Axis"===ie?k.skewAxis:null}var V=propertyGroupFactory(k,W);return N.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",V)),N.transform.mProps.p.setGroupProperty(PropertyInterface("Position",V)),N.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",V)),N.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",V)),N.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",V)),N.transform.mProps.sk&&(N.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",V)),N.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",V))),N.transform.op.setGroupProperty(PropertyInterface("Opacity",V)),Object.defineProperties(k,{opacity:{get:ExpressionPropertyInterface(N.transform.mProps.o)},position:{get:ExpressionPropertyInterface(N.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(N.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(N.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(N.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(N.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(N.transform.mProps.sa)},_name:{value:R.nm}}),k.ty="tr",k.mn=R.mn,k.propertyGroup=W,k}function B(R,N,W){function k(pe){return R.p.ix===pe?k.position:R.s.ix===pe?k.size:null}var V=propertyGroupFactory(k,W);k.propertyIndex=R.ix;var ie="tm"===N.sh.ty?N.sh.prop:N.sh;return ie.s.setGroupProperty(PropertyInterface("Size",V)),ie.p.setGroupProperty(PropertyInterface("Position",V)),Object.defineProperties(k,{size:{get:ExpressionPropertyInterface(ie.s)},position:{get:ExpressionPropertyInterface(ie.p)},_name:{value:R.nm}}),k.mn=R.mn,k}function Q(R,N,W){function k(pe){return R.p.ix===pe?k.position:R.r.ix===pe?k.rotation:R.pt.ix===pe?k.points:R.or.ix===pe||"ADBE Vector Star Outer Radius"===pe?k.outerRadius:R.os.ix===pe?k.outerRoundness:!R.ir||R.ir.ix!==pe&&"ADBE Vector Star Inner Radius"!==pe?R.is&&R.is.ix===pe?k.innerRoundness:null:k.innerRadius}var V=propertyGroupFactory(k,W),ie="tm"===N.sh.ty?N.sh.prop:N.sh;return k.propertyIndex=R.ix,ie.or.setGroupProperty(PropertyInterface("Outer Radius",V)),ie.os.setGroupProperty(PropertyInterface("Outer Roundness",V)),ie.pt.setGroupProperty(PropertyInterface("Points",V)),ie.p.setGroupProperty(PropertyInterface("Position",V)),ie.r.setGroupProperty(PropertyInterface("Rotation",V)),R.ir&&(ie.ir.setGroupProperty(PropertyInterface("Inner Radius",V)),ie.is.setGroupProperty(PropertyInterface("Inner Roundness",V))),Object.defineProperties(k,{position:{get:ExpressionPropertyInterface(ie.p)},rotation:{get:ExpressionPropertyInterface(ie.r)},points:{get:ExpressionPropertyInterface(ie.pt)},outerRadius:{get:ExpressionPropertyInterface(ie.or)},outerRoundness:{get:ExpressionPropertyInterface(ie.os)},innerRadius:{get:ExpressionPropertyInterface(ie.ir)},innerRoundness:{get:ExpressionPropertyInterface(ie.is)},_name:{value:R.nm}}),k.mn=R.mn,k}function T(R,N,W){function k(pe){return R.p.ix===pe?k.position:R.r.ix===pe?k.roundness:R.s.ix===pe||"Size"===pe||"ADBE Vector Rect Size"===pe?k.size:null}var V=propertyGroupFactory(k,W),ie="tm"===N.sh.ty?N.sh.prop:N.sh;return k.propertyIndex=R.ix,ie.p.setGroupProperty(PropertyInterface("Position",V)),ie.s.setGroupProperty(PropertyInterface("Size",V)),ie.r.setGroupProperty(PropertyInterface("Rotation",V)),Object.defineProperties(k,{position:{get:ExpressionPropertyInterface(ie.p)},roundness:{get:ExpressionPropertyInterface(ie.r)},size:{get:ExpressionPropertyInterface(ie.s)},_name:{value:R.nm}}),k.mn=R.mn,k}function F(R,N,W){function k(pe){return R.r.ix===pe||"Round Corners 1"===pe?k.radius:null}var V=propertyGroupFactory(k,W),ie=N;return k.propertyIndex=R.ix,ie.rd.setGroupProperty(PropertyInterface("Radius",V)),Object.defineProperties(k,{radius:{get:ExpressionPropertyInterface(ie.rd)},_name:{value:R.nm}}),k.mn=R.mn,k}function q(R,N,W){function k(pe){return R.c.ix===pe||"Copies"===pe?k.copies:R.o.ix===pe||"Offset"===pe?k.offset:null}var V=propertyGroupFactory(k,W),ie=N;return k.propertyIndex=R.ix,ie.c.setGroupProperty(PropertyInterface("Copies",V)),ie.o.setGroupProperty(PropertyInterface("Offset",V)),Object.defineProperties(k,{copies:{get:ExpressionPropertyInterface(ie.c)},offset:{get:ExpressionPropertyInterface(ie.o)},_name:{value:R.nm}}),k.mn=R.mn,k}return function(R,N,W){var k;function V(ie){if("number"==typeof ie)return 0===(ie=void 0===ie?1:ie)?W:k[ie-1];for(var pe=0,me=k.length;pe<me;){if(k[pe]._name===ie)return k[pe];pe+=1}return null}return V.propertyGroup=propertyGroupFactory(V,function(){return W}),k=u(R,N,V.propertyGroup),V.numProperties=k.length,V._name="Contents",V}}(),TextExpressionInterface=function(u){var f,m;function _(C){return"ADBE Text Document"===C?_.sourceText:null}return Object.defineProperty(_,"sourceText",{get:function(){u.textProperty.getValue();var C=u.textProperty.currentData.t;return C!==f&&(u.textProperty.currentData.t=f,(m=new String(C)).value=C||new String(C)),m}}),_},getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(u){return blendModeEnums[u]||""}),blendModeEnums;function SliderEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,0,0,m)}function AngleEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,0,0,m)}function ColorEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,1,0,m)}function PointEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,1,0,m)}function LayerIndexEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,0,0,m)}function MaskIndexEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,0,0,m)}function CheckboxEffect(u,f,m){this.p=PropertyFactory.getProp(f,u.v,0,0,m)}function NoValueEffect(){this.p={}}function EffectsManager(u,f){var m,_=u.ef||[];this.effectElements=[];var C,D=_.length;for(m=0;m<D;m+=1)C=new GroupEffect(_[m],f),this.effectElements.push(C)}function GroupEffect(u,f){this.init(u,f)}function BaseElement(){}function FrameElement(){}function _typeof$2(u){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},_typeof$2(u)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(u,f){var m;this.data=u,this.effectElements=[],this.initDynamicPropertyContainer(f);var _,C=this.data.ef.length,D=this.data.ef;for(m=0;m<C;m+=1){switch(_=null,D[m].ty){case 0:_=new SliderEffect(D[m],f,this);break;case 1:_=new AngleEffect(D[m],f,this);break;case 2:_=new ColorEffect(D[m],f,this);break;case 3:_=new PointEffect(D[m],f,this);break;case 4:case 7:_=new CheckboxEffect(D[m],f,this);break;case 10:_=new LayerIndexEffect(D[m],f,this);break;case 11:_=new MaskIndexEffect(D[m],f,this);break;case 5:_=new EffectsManager(D[m],f,this);break;default:_=new NoValueEffect(D[m],f,this)}_&&this.effectElements.push(_)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var u=0,f=this.data.masksProperties.length;u<f;){if("n"!==this.data.masksProperties[u].mode&&!1!==this.data.masksProperties[u].cl)return!0;u+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var u=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(u),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var u=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=u},initBaseData:function(u,f,m){this.globalData=f,this.comp=m,this.data=u,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(u,f){var m,_=this.dynamicProperties.length;for(m=0;m<_;m+=1)(f||this._isParent&&"transform"===this.dynamicProperties[m].propType)&&(this.dynamicProperties[m].getValue(),this.dynamicProperties[m]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(u){-1===this.dynamicProperties.indexOf(u)&&this.dynamicProperties.push(u)}};var FootageInterface=(dataInterfaceFactory=function(u){function f(m){return"Outline"===m?f.outlineInterface():null}return f._name="Outline",f.outlineInterface=function(m){var _="",C=m.getFootageData();function D(G){if(C[G])return _=G,"object"===_typeof$2(C=C[G])?D:C;var z=G.indexOf(_);if(-1!==z){var B=parseInt(G.substr(z+_.length),10);return"object"===_typeof$2(C=C[B])?D:C}return""}return function(){return _="",C=m.getFootageData(),D}}(u),f},function(u){function f(m){return"Data"===m?f.dataInterface:null}return f._name="Data",f.dataInterface=dataInterfaceFactory(u),f}),dataInterfaceFactory;function FootageElement(u,f,m){this.initFrame(),this.initRenderable(),this.assetData=f.getAssetData(u.refId),this.footageData=f.imageLoader.getAsset(this.assetData),this.initBaseData(u,f,m)}function AudioElement(u,f,m){this.initFrame(),this.initRenderable(),this.assetData=f.getAssetData(u.refId),this.initBaseData(u,f,m),this._isPlaying=!1,this._canPlay=!1;var _=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(_),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,f.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,u.au&&u.au.lv?u.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(u,f,m){this.data=u,this.element=f,this.globalData=m,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var _,C,D=this.globalData.defs,G=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(G),this.solidPath="";var z,B,Q,T,F,q,R=this.masksProperties,N=0,W=[],k=createElementID(),V="clipPath",ie="clip-path";for(_=0;_<G;_+=1)if(("a"!==R[_].mode&&"n"!==R[_].mode||R[_].inv||100!==R[_].o.k||R[_].o.x)&&(V="mask",ie="mask"),"s"!==R[_].mode&&"i"!==R[_].mode||0!==N?Q=null:((Q=createNS("rect")).setAttribute("fill","#ffffff"),Q.setAttribute("width",this.element.comp.data.w||0),Q.setAttribute("height",this.element.comp.data.h||0),W.push(Q)),C=createNS("path"),"n"===R[_].mode)this.viewData[_]={op:PropertyFactory.getProp(this.element,R[_].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,R[_],3),elem:C,lastPath:""},D.appendChild(C);else{var pe;if(N+=1,C.setAttribute("fill","s"===R[_].mode?"#000000":"#ffffff"),C.setAttribute("clip-rule","nonzero"),0!==R[_].x.k?(V="mask",ie="mask",q=PropertyFactory.getProp(this.element,R[_].x,0,null,this.element),pe=createElementID(),(T=createNS("filter")).setAttribute("id",pe),(F=createNS("feMorphology")).setAttribute("operator","erode"),F.setAttribute("in","SourceGraphic"),F.setAttribute("radius","0"),T.appendChild(F),D.appendChild(T),C.setAttribute("stroke","s"===R[_].mode?"#000000":"#ffffff")):(F=null,q=null),this.storedData[_]={elem:C,x:q,expan:F,lastPath:"",lastOperator:"",filterId:pe,lastRadius:0},"i"===R[_].mode){B=W.length;var me=createNS("g");for(z=0;z<B;z+=1)me.appendChild(W[z]);var Ve=createNS("mask");Ve.setAttribute("mask-type","alpha"),Ve.setAttribute("id",k+"_"+N),Ve.appendChild(C),D.appendChild(Ve),me.setAttribute("mask","url("+getLocationHref()+"#"+k+"_"+N+")"),W.length=0,W.push(me)}else W.push(C);R[_].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[_]={elem:C,lastPath:"",op:PropertyFactory.getProp(this.element,R[_].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,R[_],3),invRect:Q},this.viewData[_].prop.k||this.drawPath(R[_],this.viewData[_].prop.v,this.viewData[_])}for(this.maskElement=createNS(V),G=W.length,_=0;_<G;_+=1)this.maskElement.appendChild(W[_]);N>0&&(this.maskElement.setAttribute("id",k),this.element.maskedElement.setAttribute(ie,"url("+getLocationHref()+"#"+k+")"),D.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(u){this.prepareRenderableFrame(u,!0),this.prepareProperties(u,!0),this._currentTime=this.tm._placeholder?u/this.data.sr:this.tm.v,this._volume=this.lv.v[0];var m=this._volume*this._volumeMultiplier;this._previousVolume!==m&&(this._previousVolume=m,this.audio.volume(m))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(u){this.audio.rate(u)},AudioElement.prototype.volume=function(u){this._volumeMultiplier=u,this._previousVolume=u*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(u){var f,m,_=this.layers.length;for(this.completeLayers=!0,f=_-1;f>=0;f-=1)this.elements[f]||(m=this.layers[f]).ip-m.st<=u-this.layers[f].st&&m.op-m.st>u-this.layers[f].st&&this.buildItem(f),this.completeLayers=!!this.elements[f]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(u){switch(u.ty){case 2:return this.createImage(u);case 0:return this.createComp(u);case 1:return this.createSolid(u);case 3:default:return this.createNull(u);case 4:return this.createShape(u);case 5:return this.createText(u);case 6:return this.createAudio(u);case 13:return this.createCamera(u);case 15:return this.createFootage(u)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(u){return new AudioElement(u,this.globalData,this)},BaseRenderer.prototype.createFootage=function(u){return new FootageElement(u,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var u,f=this.layers.length;for(u=0;u<f;u+=1)this.buildItem(u);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(u){var f;this.completeLayers=!1;var m,_=u.length,C=this.layers.length;for(f=0;f<_;f+=1)for(m=0;m<C;){if(this.layers[m].id===u[f].id){this.layers[m]=u[f];break}m+=1}},BaseRenderer.prototype.setProjectInterface=function(u){this.globalData.projectInterface=u},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(u,f,m){for(var _=this.elements,C=this.layers,D=0,G=C.length;D<G;)C[D].ind==f&&(_[D]&&!0!==_[D]?(m.push(_[D]),_[D].setAsParent(),void 0!==C[D].parent?this.buildElementParenting(u,C[D].parent,m):u.setHierarchy(m)):(this.buildItem(D),this.addPendingElement(u))),D+=1},BaseRenderer.prototype.addPendingElement=function(u){this.pendingElements.push(u)},BaseRenderer.prototype.searchExtraCompositions=function(u){var f,m=u.length;for(f=0;f<m;f+=1)if(u[f].xt){var _=this.createComp(u[f]);_.initExpressions(),this.globalData.projectInterface.registerComposition(_)}},BaseRenderer.prototype.getElementByPath=function(u){var f,m=u.shift();if("number"==typeof m)f=this.elements[m];else{var _,C=this.elements.length;for(_=0;_<C;_+=1)if(this.elements[_].data.nm===m){f=this.elements[_];break}}return 0===u.length?f:f.getElementByPath(u)},BaseRenderer.prototype.setupGlobalData=function(u,f){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(u.chars),this.globalData.fontManager.addFonts(u.fonts,f),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=u.fr,this.globalData.nm=u.nm,this.globalData.compSize={w:u.w,h:u.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var u,f=this.finalTransform.mat,m=0,_=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;m<_;){if(this.hierarchy[m].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}m+=1}if(this.finalTransform._matMdf)for(f.cloneFromProps(u=this.finalTransform.mProp.v.props),m=0;m<_;m+=1)f.transform((u=this.hierarchy[m].finalTransform.mProp.v.props)[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])}},globalToLocal:function(u){var f=[];f.push(this.finalTransform);for(var m,_=!0,C=this.comp;_;)C.finalTransform?(C.data.hasMask&&f.splice(0,0,C.finalTransform),C=C.comp):_=!1;var D,G=f.length;for(m=0;m<G;m+=1)D=f[m].mat.applyToPointArray(0,0,0),u=[u[0]-D[0],u[1]-D[1],0];return u},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(u){return this.viewData[u].prop},MaskElement.prototype.renderFrame=function(u){var f,m=this.element.finalTransform.mat,_=this.masksProperties.length;for(f=0;f<_;f+=1)if((this.viewData[f].prop._mdf||u)&&this.drawPath(this.masksProperties[f],this.viewData[f].prop.v,this.viewData[f]),(this.viewData[f].op._mdf||u)&&this.viewData[f].elem.setAttribute("fill-opacity",this.viewData[f].op.v),"n"!==this.masksProperties[f].mode&&(this.viewData[f].invRect&&(this.element.finalTransform.mProp._mdf||u)&&this.viewData[f].invRect.setAttribute("transform",m.getInverseMatrix().to2dCSS()),this.storedData[f].x&&(this.storedData[f].x._mdf||u))){var C=this.storedData[f].expan;this.storedData[f].x.v<0?("erode"!==this.storedData[f].lastOperator&&(this.storedData[f].lastOperator="erode",this.storedData[f].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[f].filterId+")")),C.setAttribute("radius",-this.storedData[f].x.v)):("dilate"!==this.storedData[f].lastOperator&&(this.storedData[f].lastOperator="dilate",this.storedData[f].elem.setAttribute("filter",null)),this.storedData[f].elem.setAttribute("stroke-width",2*this.storedData[f].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var u="M0,0 ";return u+=" h"+this.globalData.compSize.w,u+=" v"+this.globalData.compSize.h,(u+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(u,f,m){var _,C,D=" M"+f.v[0][0]+","+f.v[0][1];for(C=f._length,_=1;_<C;_+=1)D+=" C"+f.o[_-1][0]+","+f.o[_-1][1]+" "+f.i[_][0]+","+f.i[_][1]+" "+f.v[_][0]+","+f.v[_][1];if(f.c&&C>1&&(D+=" C"+f.o[_-1][0]+","+f.o[_-1][1]+" "+f.i[0][0]+","+f.i[0][1]+" "+f.v[0][0]+","+f.v[0][1]),m.lastPath!==D){var G="";m.elem&&(f.c&&(G=u.inv?this.solidPath+D:D),m.elem.setAttribute("d",G)),m.lastPath=D}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var u={createFilter:function(f,m){var _=createNS("filter");return _.setAttribute("id",f),!0!==m&&(_.setAttribute("filterUnits","objectBoundingBox"),_.setAttribute("x","0%"),_.setAttribute("y","0%"),_.setAttribute("width","100%"),_.setAttribute("height","100%")),_},createAlphaToLuminanceFilter:function(){var f=createNS("feColorMatrix");return f.setAttribute("type","matrix"),f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),f}};return u}(),featureSupport=function(){var u={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(u.maskType=!1),u}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(u){var f,m,_="SourceGraphic",C=u.data.ef?u.data.ef.length:0,D=createElementID(),G=filtersFactory.createFilter(D,!0),z=0;for(this.filters=[],f=0;f<C;f+=1){m=null;var B=u.data.ef[f].ty;registeredEffects[B]&&(m=new registeredEffects[B].effect(G,u.effectsManager.effectElements[f],u,idPrefix+z,_),_=idPrefix+z,registeredEffects[B].countsAsEffect&&(z+=1)),m&&this.filters.push(m)}z&&(u.globalData.defs.appendChild(G),u.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+D+")")),this.filters.length&&u.addRenderableComponent(this)}function registerEffect(u,f,m){registeredEffects[u]={effect:f,countsAsEffect:m}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(u,f,m){this.assetData=f.getAssetData(u.refId),this.initElement(u,f,m),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(u,f){this.elem=u,this.pos=f}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(u){var f,m=this.filters.length;for(f=0;f<m;f+=1)this.filters[f].renderFrame(u)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var u,f,m,_=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var C=createNS("mask");C.setAttribute("id",this.layerId),C.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),C.appendChild(this.layerElement),_=C,this.globalData.defs.appendChild(C),featureSupport.maskType||1!=this.data.td||(C.setAttribute("mask-type","luminance"),u=createElementID(),f=filtersFactory.createFilter(u),this.globalData.defs.appendChild(f),f.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(m=createNS("g")).appendChild(this.layerElement),_=m,C.appendChild(m),m.setAttribute("filter","url("+getLocationHref()+"#"+u+")"))}else if(2==this.data.td){var D=createNS("mask");D.setAttribute("id",this.layerId),D.setAttribute("mask-type","alpha");var G=createNS("g");D.appendChild(G),u=createElementID(),f=filtersFactory.createFilter(u);var z=createNS("feComponentTransfer");z.setAttribute("in","SourceGraphic"),f.appendChild(z);var B=createNS("feFuncA");B.setAttribute("type","table"),B.setAttribute("tableValues","1.0 0.0"),z.appendChild(B),this.globalData.defs.appendChild(f);var Q=createNS("rect");Q.setAttribute("width",this.comp.data.w),Q.setAttribute("height",this.comp.data.h),Q.setAttribute("x","0"),Q.setAttribute("y","0"),Q.setAttribute("fill","#ffffff"),Q.setAttribute("opacity","0"),G.setAttribute("filter","url("+getLocationHref()+"#"+u+")"),G.appendChild(Q),G.appendChild(this.layerElement),_=G,featureSupport.maskType||(D.setAttribute("mask-type","luminance"),f.appendChild(filtersFactory.createAlphaToLuminanceFilter()),m=createNS("g"),G.appendChild(Q),m.appendChild(this.layerElement),_=m,G.appendChild(m)),this.globalData.defs.appendChild(D)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),_=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var T=createNS("clipPath"),F=createNS("path");F.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var q=createElementID();if(T.setAttribute("id",q),T.appendChild(F),this.globalData.defs.appendChild(T),this.checkMasks()){var R=createNS("g");R.setAttribute("clip-path","url("+getLocationHref()+"#"+q+")"),R.appendChild(this.layerElement),this.transformedElement=R,_?_.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+q+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(u){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+u+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(u){this.hierarchy=u},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(u,f,m){this.initFrame(),this.initBaseData(u,f,m),this.initTransform(u,f,m),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(u){this._mdf=!1,this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var u=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",u),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(u){var f,m=this.shapeModifiers.length;for(f=0;f<m;f+=1)this.shapeModifiers[f].addShape(u)},isShapeInAnimatedModifiers:function(u){for(var f=this.shapeModifiers.length;0<f;)if(this.shapeModifiers[0].isAnimatedWithShape(u))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var u,f=this.shapes.length;for(u=0;u<f;u+=1)this.shapes[u].sh.reset();for(u=(f=this.shapeModifiers.length)-1;u>=0&&!this.shapeModifiers[u].processShapes(this._isFirstFrame);u-=1);}},searchProcessedElement:function(u){for(var f=this.processedElements,m=0,_=f.length;m<_;){if(f[m].elem===u)return f[m].pos;m+=1}return 0},addProcessedElement:function(u,f){for(var m=this.processedElements,_=m.length;_;)if(m[_-=1].elem===u)return void(m[_].pos=f);m.push(new ProcessedElement(u,f))},prepareFrame:function(u){this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(u,f,m){this.caches=[],this.styles=[],this.transformers=u,this.lStr="",this.sh=m,this.lvl=f,this._isAnimated=!!m.k;for(var _=0,C=u.length;_<C;){if(u[_].mProps.dynamicProperties.length){this._isAnimated=!0;break}_+=1}}function SVGStyleData(u,f){this.data=u,this.type=u.ty,this.d="",this.lvl=f,this._mdf=!1,this.closed=!0===u.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(u,f,m,_){var C;this.elem=u,this.frameId=-1,this.dataProps=createSizedArray(f.length),this.renderer=m,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",f.length?f.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(_);var D,G=f.length||0;for(C=0;C<G;C+=1)D=PropertyFactory.getProp(u,f[C].v,0,0,this),this.k=D.k||this.k,this.dataProps[C]={n:f[C].n,p:D};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(u,f,m){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(u,f.o,0,.01,this),this.w=PropertyFactory.getProp(u,f.w,0,null,this),this.d=new DashProperty(u,f.d||{},"svg",this),this.c=PropertyFactory.getProp(u,f.c,1,255,this),this.style=m,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(u,f,m){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(u,f.o,0,.01,this),this.c=PropertyFactory.getProp(u,f.c,1,255,this),this.style=m}function SVGNoStyleData(u,f,m){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.style=m}function GradientProperty(u,f,m){this.data=f,this.c=createTypedArray("uint8c",4*f.p);var _=f.k.k[0].s?f.k.k[0].s.length-4*f.p:f.k.k.length-4*f.p;this.o=createTypedArray("float32",_),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=_,this.initDynamicPropertyContainer(m),this.prop=PropertyFactory.getProp(u,f.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(u,f,m){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.initGradientData(u,f,m)}function SVGGradientStrokeStyleData(u,f,m){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(u,f.w,0,null,this),this.d=new DashProperty(u,f.d||{},"svg",this),this.initGradientData(u,f,m),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(u,f,m){this.transform={mProps:u,op:f,container:m},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(u){if((this.elem.globalData.frameId!==this.frameId||u)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||u,this._mdf)){var f=0,m=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),f=0;f<m;f+=1)"o"!==this.dataProps[f].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[f].p.v:this.dashArray[f]=this.dataProps[f].p.v:this.dashoffset[0]=this.dataProps[f].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(u,f){for(var m=0,_=this.o.length/2;m<_;){if(Math.abs(u[4*m]-u[4*f+2*m])>.01)return!1;m+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var u=0,f=this.data.k.k.length;u<f;){if(!this.comparePoints(this.data.k.k[u].s,this.data.p))return!1;u+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(u){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||u){var f,m,_,C=4*this.data.p;for(f=0;f<C;f+=1)m=f%4==0?100:255,_=Math.round(this.prop.v[f]*m),this.c[f]!==_&&(this.c[f]=_,this._cmdf=!u);if(this.o.length)for(C=this.prop.v.length,f=4*this.data.p;f<C;f+=1)m=f%2==0?100:1,_=f%2==0?Math.round(100*this.prop.v[f]):this.prop.v[f],this.o[f-4*this.data.p]!==_&&(this.o[f-4*this.data.p]=_,this._omdf=!u);this._mdf=!u}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(u,f,m){this.o=PropertyFactory.getProp(u,f.o,0,.01,this),this.s=PropertyFactory.getProp(u,f.s,1,null,this),this.e=PropertyFactory.getProp(u,f.e,1,null,this),this.h=PropertyFactory.getProp(u,f.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(u,f.a||{k:0},0,degToRads,this),this.g=new GradientProperty(u,f.g,this),this.style=m,this.stops=[],this.setGradientData(m.pElem,f),this.setGradientOpacity(f,m),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(u,f){var m=createElementID(),_=createNS(1===f.t?"linearGradient":"radialGradient");_.setAttribute("id",m),_.setAttribute("spreadMethod","pad"),_.setAttribute("gradientUnits","userSpaceOnUse");var C,D,G,z=[];for(G=4*f.g.p,D=0;D<G;D+=4)C=createNS("stop"),_.appendChild(C),z.push(C);u.setAttribute("gf"===f.ty?"fill":"stroke","url("+getLocationHref()+"#"+m+")"),this.gf=_,this.cst=z},SVGGradientFillStyleData.prototype.setGradientOpacity=function(u,f){if(this.g._hasOpacity&&!this.g._collapsable){var m,_,C,D=createNS("mask"),G=createNS("path");D.appendChild(G);var z=createElementID(),B=createElementID();D.setAttribute("id",B);var Q=createNS(1===u.t?"linearGradient":"radialGradient");Q.setAttribute("id",z),Q.setAttribute("spreadMethod","pad"),Q.setAttribute("gradientUnits","userSpaceOnUse"),C=u.g.k.k[0].s?u.g.k.k[0].s.length:u.g.k.k.length;var T=this.stops;for(_=4*u.g.p;_<C;_+=2)(m=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),Q.appendChild(m),T.push(m);G.setAttribute("gf"===u.ty?"fill":"stroke","url("+getLocationHref()+"#"+z+")"),"gs"===u.ty&&(G.setAttribute("stroke-linecap",lineCapEnum[u.lc||2]),G.setAttribute("stroke-linejoin",lineJoinEnum[u.lj||2]),1===u.lj&&G.setAttribute("stroke-miterlimit",u.ml)),this.of=Q,this.ms=D,this.ost=T,this.maskId=B,f.msElem=G}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(u,f,m,_){if(0===f)return"";var C,D=u.o,G=u.i,z=u.v,B=" M"+_.applyToPointStringified(z[0][0],z[0][1]);for(C=1;C<f;C+=1)B+=" C"+_.applyToPointStringified(D[C-1][0],D[C-1][1])+" "+_.applyToPointStringified(G[C][0],G[C][1])+" "+_.applyToPointStringified(z[C][0],z[C][1]);return m&&f&&(B+=" C"+_.applyToPointStringified(D[C-1][0],D[C-1][1])+" "+_.applyToPointStringified(G[0][0],G[0][1])+" "+_.applyToPointStringified(z[0][0],z[0][1]),B+="z"),B},SVGElementsRenderer=function(){var u=new Matrix,f=new Matrix;function m(Q,T,F){(F||T.transform.op._mdf)&&T.transform.container.setAttribute("opacity",T.transform.op.v),(F||T.transform.mProps._mdf)&&T.transform.container.setAttribute("transform",T.transform.mProps.v.to2dCSS())}function _(){}function C(Q,T,F){var q,R,N,W,k,V,ie,pe,me,Ve,it,je=T.styles.length,qe=T.lvl;for(V=0;V<je;V+=1){if(W=T.sh._mdf||F,T.styles[V].lvl<qe){for(pe=f.reset(),Ve=qe-T.styles[V].lvl,it=T.transformers.length-1;!W&&Ve>0;)W=T.transformers[it].mProps._mdf||W,Ve-=1,it-=1;if(W)for(Ve=qe-T.styles[V].lvl,it=T.transformers.length-1;Ve>0;)pe.transform((me=T.transformers[it].mProps.v.props)[0],me[1],me[2],me[3],me[4],me[5],me[6],me[7],me[8],me[9],me[10],me[11],me[12],me[13],me[14],me[15]),Ve-=1,it-=1}else pe=u;if(R=(ie=T.sh.paths)._length,W){for(N="",q=0;q<R;q+=1)(k=ie.shapes[q])&&k._length&&(N+=buildShapeString(k,k._length,k.c,pe));T.caches[V]=N}else N=T.caches[V];T.styles[V].d+=!0===Q.hd?"":N,T.styles[V]._mdf=W||T.styles[V]._mdf}}function D(Q,T,F){var q=T.style;(T.c._mdf||F)&&q.pElem.setAttribute("fill","rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||F)&&q.pElem.setAttribute("fill-opacity",T.o.v)}function G(Q,T,F){z(Q,T,F),B(0,T,F)}function z(Q,T,F){var q,R,N,W,k,V=T.gf,ie=T.g._hasOpacity,pe=T.s.v,me=T.e.v;if((T.o._mdf||F)&&T.style.pElem.setAttribute("gf"===Q.ty?"fill-opacity":"stroke-opacity",T.o.v),T.s._mdf||F){var it=1===Q.t?"x1":"cx",je="x1"===it?"y1":"cy";V.setAttribute(it,pe[0]),V.setAttribute(je,pe[1]),ie&&!T.g._collapsable&&(T.of.setAttribute(it,pe[0]),T.of.setAttribute(je,pe[1]))}if(T.g._cmdf||F){var qe=T.g.c;for(N=(q=T.cst).length,R=0;R<N;R+=1)(W=q[R]).setAttribute("offset",qe[4*R]+"%"),W.setAttribute("stop-color","rgb("+qe[4*R+1]+","+qe[4*R+2]+","+qe[4*R+3]+")")}if(ie&&(T.g._omdf||F)){var ot=T.g.o;for(N=(q=T.g._collapsable?T.cst:T.ost).length,R=0;R<N;R+=1)W=q[R],T.g._collapsable||W.setAttribute("offset",ot[2*R]+"%"),W.setAttribute("stop-opacity",ot[2*R+1])}if(1===Q.t)(T.e._mdf||F)&&(V.setAttribute("x2",me[0]),V.setAttribute("y2",me[1]),ie&&!T.g._collapsable&&(T.of.setAttribute("x2",me[0]),T.of.setAttribute("y2",me[1])));else if((T.s._mdf||T.e._mdf||F)&&(k=Math.sqrt(Math.pow(pe[0]-me[0],2)+Math.pow(pe[1]-me[1],2)),V.setAttribute("r",k),ie&&!T.g._collapsable&&T.of.setAttribute("r",k)),T.e._mdf||T.h._mdf||T.a._mdf||F){k||(k=Math.sqrt(Math.pow(pe[0]-me[0],2)+Math.pow(pe[1]-me[1],2)));var j=Math.atan2(me[1]-pe[1],me[0]-pe[0]),Ie=T.h.v;Ie>=1?Ie=.99:Ie<=-1&&(Ie=-.99);var bt=k*Ie,vt=Math.cos(j+T.a.v)*bt+pe[0],Ct=Math.sin(j+T.a.v)*bt+pe[1];V.setAttribute("fx",vt),V.setAttribute("fy",Ct),ie&&!T.g._collapsable&&(T.of.setAttribute("fx",vt),T.of.setAttribute("fy",Ct))}}function B(Q,T,F){var q=T.style,R=T.d;R&&(R._mdf||F)&&R.dashStr&&(q.pElem.setAttribute("stroke-dasharray",R.dashStr),q.pElem.setAttribute("stroke-dashoffset",R.dashoffset[0])),T.c&&(T.c._mdf||F)&&q.pElem.setAttribute("stroke","rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||F)&&q.pElem.setAttribute("stroke-opacity",T.o.v),(T.w._mdf||F)&&(q.pElem.setAttribute("stroke-width",T.w.v),q.msElem&&q.msElem.setAttribute("stroke-width",T.w.v))}return{createRenderFunction:function(Q){switch(Q.ty){case"fl":return D;case"gf":return z;case"gs":return G;case"st":return B;case"sh":case"el":case"rc":case"sr":return C;case"tr":return m;case"no":return _;default:return null}}}}();function SVGShapeElement(u,f,m){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(u,f,m),this.prevViewData=[]}function LetterProps(u,f,m,_,C,D){this.o=u,this.sw=f,this.sc=m,this.fc=_,this.m=C,this.p=D,this._mdf={o:!0,sw:!!f,sc:!!m,fc:!!_,m:!0,p:!0}}function TextProperty(u,f){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=f,this.elem=u,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var u,f,m,_,C=this.shapes.length,D=this.stylesList.length,G=[],z=!1;for(m=0;m<D;m+=1){for(_=this.stylesList[m],z=!1,G.length=0,u=0;u<C;u+=1)-1!==(f=this.shapes[u]).styles.indexOf(_)&&(G.push(f),z=f._isAnimated||z);G.length>1&&z&&this.setShapesAsAnimated(G)}},SVGShapeElement.prototype.setShapesAsAnimated=function(u){var f,m=u.length;for(f=0;f<m;f+=1)u[f].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(u,f){var m,_=new SVGStyleData(u,f),C=_.pElem;return"st"===u.ty?m=new SVGStrokeStyleData(this,u,_):"fl"===u.ty?m=new SVGFillStyleData(this,u,_):"gf"===u.ty||"gs"===u.ty?(m=new("gf"===u.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,u,_),this.globalData.defs.appendChild(m.gf),m.maskId&&(this.globalData.defs.appendChild(m.ms),this.globalData.defs.appendChild(m.of),C.setAttribute("mask","url("+getLocationHref()+"#"+m.maskId+")"))):"no"===u.ty&&(m=new SVGNoStyleData(this,u,_)),"st"!==u.ty&&"gs"!==u.ty||(C.setAttribute("stroke-linecap",lineCapEnum[u.lc||2]),C.setAttribute("stroke-linejoin",lineJoinEnum[u.lj||2]),C.setAttribute("fill-opacity","0"),1===u.lj&&C.setAttribute("stroke-miterlimit",u.ml)),2===u.r&&C.setAttribute("fill-rule","evenodd"),u.ln&&C.setAttribute("id",u.ln),u.cl&&C.setAttribute("class",u.cl),u.bm&&(C.style["mix-blend-mode"]=getBlendMode(u.bm)),this.stylesList.push(_),this.addToAnimatedContents(u,m),m},SVGShapeElement.prototype.createGroupElement=function(u){var f=new ShapeGroupData;return u.ln&&f.gr.setAttribute("id",u.ln),u.cl&&f.gr.setAttribute("class",u.cl),u.bm&&(f.gr.style["mix-blend-mode"]=getBlendMode(u.bm)),f},SVGShapeElement.prototype.createTransformElement=function(u,f){var m=TransformPropertyFactory.getTransformProperty(this,u,this),_=new SVGTransformData(m,m.o,f);return this.addToAnimatedContents(u,_),_},SVGShapeElement.prototype.createShapeElement=function(u,f,m){var _=4;"rc"===u.ty?_=5:"el"===u.ty?_=6:"sr"===u.ty&&(_=7);var C=new SVGShapeData(f,m,ShapePropertyFactory.getShapeProp(this,u,_,this));return this.shapes.push(C),this.addShapeToModifiers(C),this.addToAnimatedContents(u,C),C},SVGShapeElement.prototype.addToAnimatedContents=function(u,f){for(var m=0,_=this.animatedContents.length;m<_;){if(this.animatedContents[m].element===f)return;m+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(u),element:f,data:u})},SVGShapeElement.prototype.setElementStyles=function(u){var f,m=u.styles,_=this.stylesList.length;for(f=0;f<_;f+=1)this.stylesList[f].closed||m.push(this.stylesList[f])},SVGShapeElement.prototype.reloadShapes=function(){var u;this._isFirstFrame=!0;var f=this.itemsData.length;for(u=0;u<f;u+=1)this.prevViewData[u]=this.itemsData[u];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),f=this.dynamicProperties.length,u=0;u<f;u+=1)this.dynamicProperties[u].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(u,f,m,_,C,D,G){var z,B,Q,F,q,R=[].concat(D),N=u.length-1,W=[],k=[];for(z=N;z>=0;z-=1){if((q=this.searchProcessedElement(u[z]))?f[z]=m[q-1]:u[z]._render=G,"fl"===u[z].ty||"st"===u[z].ty||"gf"===u[z].ty||"gs"===u[z].ty||"no"===u[z].ty)q?f[z].style.closed=!1:f[z]=this.createStyleElement(u[z],C),u[z]._render&&f[z].style.pElem.parentNode!==_&&_.appendChild(f[z].style.pElem),W.push(f[z].style);else if("gr"===u[z].ty){if(q)for(Q=f[z].it.length,B=0;B<Q;B+=1)f[z].prevViewData[B]=f[z].it[B];else f[z]=this.createGroupElement(u[z]);this.searchShapes(u[z].it,f[z].it,f[z].prevViewData,f[z].gr,C+1,R,G),u[z]._render&&f[z].gr.parentNode!==_&&_.appendChild(f[z].gr)}else"tr"===u[z].ty?(q||(f[z]=this.createTransformElement(u[z],_)),R.push(f[z].transform)):"sh"===u[z].ty||"rc"===u[z].ty||"el"===u[z].ty||"sr"===u[z].ty?(q||(f[z]=this.createShapeElement(u[z],R,C)),this.setElementStyles(f[z])):"tm"===u[z].ty||"rd"===u[z].ty||"ms"===u[z].ty||"pb"===u[z].ty?(q?(F=f[z]).closed=!1:((F=ShapeModifiers.getModifier(u[z].ty)).init(this,u[z]),f[z]=F,this.shapeModifiers.push(F)),k.push(F)):"rp"===u[z].ty&&(q?(F=f[z]).closed=!0:(F=ShapeModifiers.getModifier(u[z].ty),f[z]=F,F.init(this,u,z,f),this.shapeModifiers.push(F),G=!1),k.push(F));this.addProcessedElement(u[z],z+1)}for(N=W.length,z=0;z<N;z+=1)W[z].closed=!0;for(N=k.length,z=0;z<N;z+=1)k[z].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var u;this.renderModifiers();var f=this.stylesList.length;for(u=0;u<f;u+=1)this.stylesList[u].reset();for(this.renderShape(),u=0;u<f;u+=1)(this.stylesList[u]._mdf||this._isFirstFrame)&&(this.stylesList[u].msElem&&(this.stylesList[u].msElem.setAttribute("d",this.stylesList[u].d),this.stylesList[u].d="M0 0"+this.stylesList[u].d),this.stylesList[u].pElem.setAttribute("d",this.stylesList[u].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var u,f,m=this.animatedContents.length;for(u=0;u<m;u+=1)f=this.animatedContents[u],(this._isFirstFrame||f.element._isAnimated)&&!0!==f.data&&f.fn(f.data,f.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(u,f,m,_,C,D){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var G=!1;return this.o!==u&&(this.o=u,this._mdf.o=!0,G=!0),this.sw!==f&&(this.sw=f,this._mdf.sw=!0,G=!0),this.sc!==m&&(this.sc=m,this._mdf.sc=!0,G=!0),this.fc!==_&&(this.fc=_,this._mdf.fc=!0,G=!0),this.m!==C&&(this.m=C,this._mdf.m=!0,G=!0),!D.length||this.p[0]===D[0]&&this.p[1]===D[1]&&this.p[4]===D[4]&&this.p[5]===D[5]&&this.p[12]===D[12]&&this.p[13]===D[13]||(this.p=D,this._mdf.p=!0,G=!0),G},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(u,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(u[m]=f[m]);return u},TextProperty.prototype.setCurrentData=function(u){u.__complete||this.completeTextData(u),this.currentData=u,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(u){this.effectsSequence.push(u),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(u){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||u){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var f=this.currentData,m=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var _;this.lock=!0,this._mdf=!1;var C=this.effectsSequence.length,D=u||this.data.d.k[this.keysIndex].s;for(_=0;_<C;_+=1)D=this.effectsSequence[_](m!==this.keysIndex?D:this.currentData,D.t);f!==D&&this.setCurrentData(D),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var u=this.data.d.k,f=this.elem.comp.renderedFrame,m=0,_=u.length;m<=_-1&&!(m===_-1||u[m+1].t>f);)m+=1;return this.keysIndex!==m&&(this.keysIndex=m),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(u){for(var f,m,_=[],C=0,D=u.length,G=!1;C<D;)f=u.charCodeAt(C),FontManager.isCombinedCharacter(f)?_[_.length-1]+=u.charAt(C):f>=55296&&f<=56319?(m=u.charCodeAt(C+1))>=56320&&m<=57343?(G||FontManager.isModifier(f,m)?(_[_.length-1]+=u.substr(C,2),G=!1):_.push(u.substr(C,2)),C+=1):_.push(u.charAt(C)):f>56319?(m=u.charCodeAt(C+1),FontManager.isZeroWidthJoiner(f,m)?(G=!0,_[_.length-1]+=u.substr(C,2),C+=1):_.push(u.charAt(C))):FontManager.isZeroWidthJoiner(f)?(_[_.length-1]+=u.charAt(C),G=!0):_.push(u.charAt(C)),C+=1;return _},TextProperty.prototype.completeTextData=function(u){u.__complete=!0;var f,m,_,C,D,G,z,B=this.elem.globalData.fontManager,Q=this.data,T=[],F=0,q=Q.m.g,R=0,N=0,W=0,k=[],V=0,ie=0,pe=B.getFontByName(u.f),me=0,Ve=getFontProperties(pe);u.fWeight=Ve.weight,u.fStyle=Ve.style,u.finalSize=u.s,u.finalText=this.buildFinalText(u.t),m=u.finalText.length,u.finalLineHeight=u.lh;var it,je=u.tr/1e3*u.finalSize;if(u.sz)for(var qe,ot,j=!0,Ie=u.sz[0],bt=u.sz[1];j;){qe=0,V=0,m=(ot=this.buildFinalText(u.t)).length,je=u.tr/1e3*u.finalSize;var vt=-1;for(f=0;f<m;f+=1)it=ot[f].charCodeAt(0),_=!1," "===ot[f]?vt=f:13!==it&&3!==it||(V=0,_=!0,qe+=u.finalLineHeight||1.2*u.finalSize),B.chars?(z=B.getCharData(ot[f],pe.fStyle,pe.fFamily),me=_?0:z.w*u.finalSize/100):me=B.measureText(ot[f],u.f,u.finalSize),V+me>Ie&&" "!==ot[f]?(-1===vt?m+=1:f=vt,qe+=u.finalLineHeight||1.2*u.finalSize,ot.splice(f,vt===f?1:0,"\r"),vt=-1,V=0):(V+=me,V+=je);qe+=pe.ascent*u.finalSize/100,this.canResize&&u.finalSize>this.minimumFontSize&&bt<qe?(u.finalSize-=1,u.finalLineHeight=u.finalSize*u.lh/u.s):(u.finalText=ot,m=u.finalText.length,j=!1)}V=-je,me=0;var Ct,Yt=0;for(f=0;f<m;f+=1)if(_=!1,13===(it=(Ct=u.finalText[f]).charCodeAt(0))||3===it?(Yt=0,k.push(V),ie=V>ie?V:ie,V=-2*je,C="",_=!0,W+=1):C=Ct,B.chars?(z=B.getCharData(Ct,pe.fStyle,B.getFontByName(u.f).fFamily),me=_?0:z.w*u.finalSize/100):me=B.measureText(C,u.f,u.finalSize)," "===Ct?Yt+=me+je:(V+=me+je+Yt,Yt=0),T.push({l:me,an:me,add:R,n:_,anIndexes:[],val:C,line:W,animatorJustifyOffset:0}),2==q){if(R+=me,""===C||" "===C||f===m-1){for(""!==C&&" "!==C||(R-=me);N<=f;)T[N].an=R,T[N].ind=F,T[N].extra=me,N+=1;F+=1,R=0}}else if(3==q){if(R+=me,""===C||f===m-1){for(""===C&&(R-=me);N<=f;)T[N].an=R,T[N].ind=F,T[N].extra=me,N+=1;R=0,F+=1}}else T[F].ind=F,T[F].extra=0,F+=1;if(u.l=T,ie=V>ie?V:ie,k.push(V),u.sz)u.boxWidth=u.sz[0],u.justifyOffset=0;else switch(u.boxWidth=ie,u.j){case 1:u.justifyOffset=-u.boxWidth;break;case 2:u.justifyOffset=-u.boxWidth/2;break;default:u.justifyOffset=0}u.lineWidths=k;var on,pt,Re,ut,Qt=Q.a;G=Qt.length;var Un=[];for(D=0;D<G;D+=1){for((on=Qt[D]).a.sc&&(u.strokeColorAnim=!0),on.a.sw&&(u.strokeWidthAnim=!0),(on.a.fc||on.a.fh||on.a.fs||on.a.fb)&&(u.fillColorAnim=!0),ut=0,Re=on.s.b,f=0;f<m;f+=1)(pt=T[f]).anIndexes[D]=ut,(1==Re&&""!==pt.val||2==Re&&""!==pt.val&&" "!==pt.val||3==Re&&(pt.n||" "==pt.val||f==m-1)||4==Re&&(pt.n||f==m-1))&&(1===on.s.rn&&Un.push(ut),ut+=1);Q.a[D].s.totalChars=ut;var dn,Wt=-1;if(1===on.s.rn)for(f=0;f<m;f+=1)Wt!=(pt=T[f]).anIndexes[D]&&(Wt=pt.anIndexes[D],dn=Un.splice(Math.floor(Math.random()*Un.length),1)[0]),pt.anIndexes[D]=dn}u.yOffset=u.finalLineHeight||1.2*u.finalSize,u.ls=u.ls||0,u.ascent=pe.ascent*u.finalSize/100},TextProperty.prototype.updateDocumentData=function(u,f){var m=this.copyData({},this.data.d.k[f=void 0===f?this.keysIndex:f].s);m=this.copyData(m,u),this.data.d.k[f].s=m,this.recalculate(f),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(u){var f=this.data.d.k[u].s;f.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(f)},TextProperty.prototype.canResizeFont=function(u){this.canResize=u,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(u){this.minimumFontSize=Math.floor(u)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var u=Math.max,f=Math.min,m=Math.floor;function _(C,D){this._currentTextLength=-1,this.k=!1,this.data=D,this.elem=C,this.comp=C.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(C),this.s=PropertyFactory.getProp(C,D.s||{k:0},0,0,this),this.e="e"in D?PropertyFactory.getProp(C,D.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(C,D.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(C,D.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(C,D.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(C,D.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(C,D.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return _.prototype={getMult:function(C){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var D=0,G=0,z=1,B=1;this.ne.v>0?D=this.ne.v/100:G=-this.ne.v/100,this.xe.v>0?z=1-this.xe.v/100:B=1+this.xe.v/100;var Q=BezierFactory.getBezierEasing(D,G,z,B).get,T=0,F=this.finalS,q=this.finalE,R=this.data.sh;if(2===R)T=Q(T=q===F?C>=q?1:0:u(0,f(.5/(q-F)+(C-F)/(q-F),1)));else if(3===R)T=Q(T=q===F?C>=q?0:1:1-u(0,f(.5/(q-F)+(C-F)/(q-F),1)));else if(4===R)q===F?T=0:(T=u(0,f(.5/(q-F)+(C-F)/(q-F),1)))<.5?T*=2:T=1-2*(T-.5),T=Q(T);else if(5===R){if(q===F)T=0;else{var N=q-F,W=-N/2+(C=f(u(0,C+.5-F),q-F)),k=N/2;T=Math.sqrt(1-W*W/(k*k))}T=Q(T)}else 6===R?(q===F?T=0:(C=f(u(0,C+.5-F),q-F),T=(1+Math.cos(Math.PI+2*Math.PI*C/(q-F)))/2),T=Q(T)):(C>=m(F)&&(T=u(0,f(C-F<0?f(q,1)-(F-C):q-C,1))),T=Q(T));if(100!==this.sm.v){var V=.01*this.sm.v;0===V&&(V=1e-8);var ie=.5-.5*V;T<ie?T=0:(T=(T-ie)/V)>1&&(T=1)}return T*this.a.v},getValue:function(C){this.iterateDynamicProperties(),this._mdf=C||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,C&&2===this.data.r&&(this.e.v=this._currentTextLength);var D=2===this.data.r?1:100/this.data.totalChars,G=this.o.v/D,z=this.s.v/D+G,B=this.e.v/D+G;if(z>B){var Q=z;z=B,B=Q}this.finalS=z,this.finalE=B}},extendPrototype([DynamicPropertyContainer],_),{getTextSelectorProp:function(C,D,G){return new _(C,D,G)}}}();function TextAnimatorDataProperty(u,f,m){var _={propType:!1},C=PropertyFactory.getProp,D=f.a;this.a={r:D.r?C(u,D.r,0,degToRads,m):_,rx:D.rx?C(u,D.rx,0,degToRads,m):_,ry:D.ry?C(u,D.ry,0,degToRads,m):_,sk:D.sk?C(u,D.sk,0,degToRads,m):_,sa:D.sa?C(u,D.sa,0,degToRads,m):_,s:D.s?C(u,D.s,1,.01,m):_,a:D.a?C(u,D.a,1,0,m):_,o:D.o?C(u,D.o,0,.01,m):_,p:D.p?C(u,D.p,1,0,m):_,sw:D.sw?C(u,D.sw,0,0,m):_,sc:D.sc?C(u,D.sc,1,0,m):_,fc:D.fc?C(u,D.fc,1,0,m):_,fh:D.fh?C(u,D.fh,0,0,m):_,fs:D.fs?C(u,D.fs,0,.01,m):_,fb:D.fb?C(u,D.fb,0,.01,m):_,t:D.t?C(u,D.t,0,0,m):_},this.s=TextSelectorProp.getTextSelectorProp(u,f.s,m),this.s.t=f.s.t}function TextAnimatorProperty(u,f,m){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=u,this._renderType=f,this._elem=m,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(m)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var u,m=this._textData.a.length,_=PropertyFactory.getProp;for(u=0;u<m;u+=1)this._animatorsData[u]=new TextAnimatorDataProperty(this._elem,this._textData.a[u],this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:_(this._elem,this._textData.p.a,0,0,this),f:_(this._elem,this._textData.p.f,0,0,this),l:_(this._elem,this._textData.p.l,0,0,this),r:_(this._elem,this._textData.p.r,0,0,this),p:_(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=_(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(u,f){if(this.lettersChangedFlag=f,this._mdf||this._isFirstFrame||f||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var m,_,C,D,G,z,B,Q,T,F,q,R,N,W,k,V,ie,me,Ve=this._moreOptions.alignment.v,it=this._animatorsData,je=this._textData,qe=this.mHelper,ot=this._renderType,j=this.renderedLetters.length,Ie=u.l;if(this._hasMaskedPath){if(me=this._pathData.m,!this._pathData.n||this._pathData._mdf){var bt,vt=me.v;for(this._pathData.r.v&&(vt=vt.reverse()),G={tLength:0,segments:[]},D=vt._length-1,V=0,C=0;C<D;C+=1)bt=bez.buildBezierData(vt.v[C],vt.v[C+1],[vt.o[C][0]-vt.v[C][0],vt.o[C][1]-vt.v[C][1]],[vt.i[C+1][0]-vt.v[C+1][0],vt.i[C+1][1]-vt.v[C+1][1]]),G.tLength+=bt.segmentLength,G.segments.push(bt),V+=bt.segmentLength;C=D,me.v.c&&(bt=bez.buildBezierData(vt.v[C],vt.v[0],[vt.o[C][0]-vt.v[C][0],vt.o[C][1]-vt.v[C][1]],[vt.i[0][0]-vt.v[0][0],vt.i[0][1]-vt.v[0][1]]),G.tLength+=bt.segmentLength,G.segments.push(bt),V+=bt.segmentLength),this._pathData.pi=G}if(q=0,F=1,Q=0,T=!0,W=(G=this._pathData.pi).segments,(z=this._pathData.f.v)<0&&me.v.c)for(G.tLength<Math.abs(z)&&(z=-Math.abs(z)%G.tLength),F=(N=W[q=W.length-1].points).length-1;z<0;)z+=N[F].partialLength,(F-=1)<0&&(F=(N=W[q-=1].points).length-1);R=(N=W[q].points)[F-1],k=(B=N[F]).partialLength}D=Ie.length,m=0,_=0;var Ct,Yt,on,pt,Re,ut=1.2*u.finalSize*.714,Qt=!0;on=it.length;var Un,dn,Wt,An,fn,Fn,ft,Wn,Cn,tr,sr,li,$t=-1,Li=z,Vi=q,gr=F,mo=-1,ao="",lo=this.defaultPropsArray;if(2===u.j||1===u.j){var bn=0,Mi=0,Lo=2===u.j?-.5:-1,Xi=0,co=!0;for(C=0;C<D;C+=1)if(Ie[C].n){for(bn&&(bn+=Mi);Xi<C;)Ie[Xi].animatorJustifyOffset=bn,Xi+=1;bn=0,co=!0}else{for(Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).t.propType&&(co&&2===u.j&&(Mi+=Ct.t.v*Lo),(Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars)).length?bn+=Ct.t.v*Re[0]*Lo:bn+=Ct.t.v*Re*Lo);co=!1}for(bn&&(bn+=Mi);Xi<C;)Ie[Xi].animatorJustifyOffset=bn,Xi+=1}for(C=0;C<D;C+=1){if(qe.reset(),An=1,Ie[C].n)m=0,_+=u.yOffset,_+=Qt?1:0,z=Li,Qt=!1,this._hasMaskedPath&&(R=(N=W[q=Vi].points)[(F=gr)-1],k=(B=N[F]).partialLength,Q=0),ao="",sr="",Cn="",li="",lo=this.defaultPropsArray;else{if(this._hasMaskedPath){if(mo!==Ie[C].line){switch(u.j){case 1:z+=V-u.lineWidths[Ie[C].line];break;case 2:z+=(V-u.lineWidths[Ie[C].line])/2}mo=Ie[C].line}$t!==Ie[C].ind&&(Ie[$t]&&(z+=Ie[$t].extra),z+=Ie[C].an/2,$t=Ie[C].ind),z+=Ve[0]*Ie[C].an*.005;var lr=0;for(Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).p.propType&&((Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars)).length?lr+=Ct.p.v[0]*Re[0]:lr+=Ct.p.v[0]*Re),Ct.a.propType&&((Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars)).length?lr+=Ct.a.v[0]*Re[0]:lr+=Ct.a.v[0]*Re);for(T=!0,this._pathData.a.v&&(z=.5*Ie[0].an+(V-this._pathData.f.v-.5*Ie[0].an-.5*Ie[Ie.length-1].an)*$t/(D-1),z+=this._pathData.f.v);T;)Q+k>=z+lr||!N?(dn=R.point[0]+(B.point[0]-R.point[0])*(ie=(z+lr-Q)/B.partialLength),Wt=R.point[1]+(B.point[1]-R.point[1])*ie,qe.translate(-Ve[0]*Ie[C].an*.005,-Ve[1]*ut*.01),T=!1):N&&(Q+=B.partialLength,(F+=1)>=N.length&&(F=0,W[q+=1]?N=W[q].points:me.v.c?(F=0,N=W[q=0].points):(Q-=B.partialLength,N=null)),N&&(R=B,k=(B=N[F]).partialLength));qe.translate(-(Un=Ie[C].an/2-Ie[C].add),0,0)}else qe.translate(-(Un=Ie[C].an/2-Ie[C].add),0,0),qe.translate(-Ve[0]*Ie[C].an*.005,-Ve[1]*ut*.01,0);for(Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).t.propType&&(Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars),0===m&&0===u.j||(this._hasMaskedPath?z+=Re.length?Ct.t.v*Re[0]:Ct.t.v*Re:m+=Re.length?Ct.t.v*Re[0]:Ct.t.v*Re));for(u.strokeWidthAnim&&(Fn=u.sw||0),u.strokeColorAnim&&(fn=u.sc?[u.sc[0],u.sc[1],u.sc[2]]:[0,0,0]),u.fillColorAnim&&u.fc&&(ft=[u.fc[0],u.fc[1],u.fc[2]]),Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).a.propType&&((Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars)).length?qe.translate(-Ct.a.v[0]*Re[0],-Ct.a.v[1]*Re[1],Ct.a.v[2]*Re[2]):qe.translate(-Ct.a.v[0]*Re,-Ct.a.v[1]*Re,Ct.a.v[2]*Re));for(Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).s.propType&&((Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars)).length?qe.scale(1+(Ct.s.v[0]-1)*Re[0],1+(Ct.s.v[1]-1)*Re[1],1):qe.scale(1+(Ct.s.v[0]-1)*Re,1+(Ct.s.v[1]-1)*Re,1));for(Yt=0;Yt<on;Yt+=1){if(Ct=it[Yt].a,Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars),Ct.sk.propType&&(Re.length?qe.skewFromAxis(-Ct.sk.v*Re[0],Ct.sa.v*Re[1]):qe.skewFromAxis(-Ct.sk.v*Re,Ct.sa.v*Re)),Ct.r.propType&&qe.rotateZ(Re.length?-Ct.r.v*Re[2]:-Ct.r.v*Re),Ct.ry.propType&&qe.rotateY(Re.length?Ct.ry.v*Re[1]:Ct.ry.v*Re),Ct.rx.propType&&qe.rotateX(Re.length?Ct.rx.v*Re[0]:Ct.rx.v*Re),Ct.o.propType&&(An+=Re.length?(Ct.o.v*Re[0]-An)*Re[0]:(Ct.o.v*Re-An)*Re),u.strokeWidthAnim&&Ct.sw.propType&&(Fn+=Re.length?Ct.sw.v*Re[0]:Ct.sw.v*Re),u.strokeColorAnim&&Ct.sc.propType)for(Wn=0;Wn<3;Wn+=1)fn[Wn]+=Re.length?(Ct.sc.v[Wn]-fn[Wn])*Re[0]:(Ct.sc.v[Wn]-fn[Wn])*Re;if(u.fillColorAnim&&u.fc){if(Ct.fc.propType)for(Wn=0;Wn<3;Wn+=1)ft[Wn]+=Re.length?(Ct.fc.v[Wn]-ft[Wn])*Re[0]:(Ct.fc.v[Wn]-ft[Wn])*Re;Ct.fh.propType&&(ft=addHueToRGB(ft,Re.length?Ct.fh.v*Re[0]:Ct.fh.v*Re)),Ct.fs.propType&&(ft=addSaturationToRGB(ft,Re.length?Ct.fs.v*Re[0]:Ct.fs.v*Re)),Ct.fb.propType&&(ft=addBrightnessToRGB(ft,Re.length?Ct.fb.v*Re[0]:Ct.fb.v*Re))}}for(Yt=0;Yt<on;Yt+=1)(Ct=it[Yt].a).p.propType&&(Re=it[Yt].s.getMult(Ie[C].anIndexes[Yt],je.a[Yt].s.totalChars),this._hasMaskedPath?Re.length?qe.translate(0,Ct.p.v[1]*Re[0],-Ct.p.v[2]*Re[1]):qe.translate(0,Ct.p.v[1]*Re,-Ct.p.v[2]*Re):Re.length?qe.translate(Ct.p.v[0]*Re[0],Ct.p.v[1]*Re[1],-Ct.p.v[2]*Re[2]):qe.translate(Ct.p.v[0]*Re,Ct.p.v[1]*Re,-Ct.p.v[2]*Re));if(u.strokeWidthAnim&&(Cn=Fn<0?0:Fn),u.strokeColorAnim&&(tr="rgb("+Math.round(255*fn[0])+","+Math.round(255*fn[1])+","+Math.round(255*fn[2])+")"),u.fillColorAnim&&u.fc&&(sr="rgb("+Math.round(255*ft[0])+","+Math.round(255*ft[1])+","+Math.round(255*ft[2])+")"),this._hasMaskedPath){if(qe.translate(0,-u.ls),qe.translate(0,Ve[1]*ut*.01+_,0),this._pathData.p.v){var Dr=180*Math.atan((B.point[1]-R.point[1])/(B.point[0]-R.point[0]))/Math.PI;B.point[0]<R.point[0]&&(Dr+=180),qe.rotate(-Dr*Math.PI/180)}qe.translate(dn,Wt,0),z-=Ve[0]*Ie[C].an*.005,Ie[C+1]&&$t!==Ie[C+1].ind&&(z+=Ie[C].an/2,z+=.001*u.tr*u.finalSize)}else{switch(qe.translate(m,_,0),u.ps&&qe.translate(u.ps[0],u.ps[1]+u.ascent,0),u.j){case 1:qe.translate(Ie[C].animatorJustifyOffset+u.justifyOffset+(u.boxWidth-u.lineWidths[Ie[C].line]),0,0);break;case 2:qe.translate(Ie[C].animatorJustifyOffset+u.justifyOffset+(u.boxWidth-u.lineWidths[Ie[C].line])/2,0,0)}qe.translate(0,-u.ls),qe.translate(Un,0,0),qe.translate(Ve[0]*Ie[C].an*.005,Ve[1]*ut*.01,0),m+=Ie[C].l+.001*u.tr*u.finalSize}"html"===ot?ao=qe.toCSS():"svg"===ot?ao=qe.to2dCSS():lo=[qe.props[0],qe.props[1],qe.props[2],qe.props[3],qe.props[4],qe.props[5],qe.props[6],qe.props[7],qe.props[8],qe.props[9],qe.props[10],qe.props[11],qe.props[12],qe.props[13],qe.props[14],qe.props[15]],li=An}j<=C?(pt=new LetterProps(li,Cn,tr,sr,ao,lo),this.renderedLetters.push(pt),j+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(pt=this.renderedLetters[C]).update(li,Cn,tr,sr,ao,lo)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(u,f,m){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(u,f,m),this.textProperty=new TextProperty(this,u.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(u.t,this.renderType,this),this.initTransform(u,f,m),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(u){this._mdf=!1,this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(u,f){var m,_,C=f.length,D="";for(m=0;m<C;m+=1)"sh"===f[m].ty&&(D+=buildShapeString(_=f[m].ks.k,_.i.length,!0,u));return D},ITextElement.prototype.updateDocumentData=function(u,f){this.textProperty.updateDocumentData(u,f)},ITextElement.prototype.canResizeFont=function(u){this.textProperty.canResizeFont(u)},ITextElement.prototype.setMinimumFontSize=function(u){this.textProperty.setMinimumFontSize(u)},ITextElement.prototype.applyTextPropertiesToMatrix=function(u,f,m,_,C){switch(u.ps&&f.translate(u.ps[0],u.ps[1]+u.ascent,0),f.translate(0,-u.ls,0),u.j){case 1:f.translate(u.justifyOffset+(u.boxWidth-u.lineWidths[m]),0,0);break;case 2:f.translate(u.justifyOffset+(u.boxWidth-u.lineWidths[m])/2,0,0)}f.translate(_,C,0)},ITextElement.prototype.buildColor=function(u){return"rgb("+Math.round(255*u[0])+","+Math.round(255*u[1])+","+Math.round(255*u[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(u,f,m){this.textSpans=[],this.renderType="svg",this.initElement(u,f,m)}function ISolidElement(u,f,m){this.initElement(u,f,m)}function NullElement(u,f,m){this.initFrame(),this.initBaseData(u,f,m),this.initFrame(),this.initTransform(u,f,m),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(u,f,m){this.layers=u.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(u,f,m),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,f.frameRate,this):{_placeholder:!0}}function SVGRenderer(u,f){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var m="";if(f&&f.title){var _=createNS("title"),C=createElementID();_.setAttribute("id",C),_.textContent=f.title,this.svgElement.appendChild(_),m+=C}if(f&&f.description){var D=createNS("desc"),G=createElementID();D.setAttribute("id",G),D.textContent=f.description,this.svgElement.appendChild(D),m+=" "+G}m&&this.svgElement.setAttribute("aria-labelledby",m);var z=createNS("defs");this.svgElement.appendChild(z);var B=createNS("g");this.svgElement.appendChild(B),this.layerElement=B,this.renderConfig={preserveAspectRatio:f&&f.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:f&&f.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:f&&f.contentVisibility||"visible",progressiveLoad:f&&f.progressiveLoad||!1,hideOnTransparent:!(f&&!1===f.hideOnTransparent),viewBoxOnly:f&&f.viewBoxOnly||!1,viewBoxSize:f&&f.viewBoxSize||!1,className:f&&f.className||"",id:f&&f.id||"",focusable:f&&f.focusable,filterSize:{width:f&&f.filterSize&&f.filterSize.width||"100%",height:f&&f.filterSize&&f.filterSize.height||"100%",x:f&&f.filterSize&&f.filterSize.x||"0%",y:f&&f.filterSize&&f.filterSize.y||"0%"},width:f&&f.width,height:f&&f.height},this.globalData={_mdf:!1,frameNum:-1,defs:z,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var u;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),u=0;u<15;u+=1)this.saved[u]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVEffects(){}function CVMaskElement(u,f){var m;this.data=u,this.element=f,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var _=this.masksProperties.length,C=!1;for(m=0;m<_;m+=1)"n"!==this.masksProperties[m].mode&&(C=!0),this.viewData[m]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[m],3);this.hasMasks=C,C&&this.element.addRenderableComponent(this)}function CVBaseElement(){}function CVShapeData(u,f,m,_){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var C,D=4;"rc"===f.ty?D=5:"el"===f.ty?D=6:"sr"===f.ty&&(D=7),this.sh=ShapePropertyFactory.getShapeProp(u,f,D,u);var G,z=m.length;for(C=0;C<z;C+=1)m[C].closed||(G={transforms:_.addTransformSequence(m[C].transforms),trNodes:[]},this.styledShapes.push(G),m[C].elements.push(G))}function CVShapeElement(u,f,m){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(u,f,m)}function CVTextElement(u,f,m){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(u,f,m)}function CVImageElement(u,f,m){this.assetData=f.getAssetData(u.refId),this.img=f.imageLoader.getAsset(this.assetData),this.initElement(u,f,m)}function CVSolidElement(u,f,m){this.initElement(u,f,m)}function CanvasRendererBase(u,f){this.animationItem=u,this.renderConfig={clearCanvas:!f||void 0===f.clearCanvas||f.clearCanvas,context:f&&f.context||null,progressiveLoad:f&&f.progressiveLoad||!1,preserveAspectRatio:f&&f.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:f&&f.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:f&&f.contentVisibility||"visible",className:f&&f.className||"",id:f&&f.id||""},this.renderConfig.dpr=f&&f.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=f&&f.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(u,f,m){this.completeLayers=!1,this.layers=u.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(u,f,m),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,f.frameRate,this):{_placeholder:!0}}function CanvasRenderer(u,f){this.animationItem=u,this.renderConfig={clearCanvas:!f||void 0===f.clearCanvas||f.clearCanvas,context:f&&f.context||null,progressiveLoad:f&&f.progressiveLoad||!1,preserveAspectRatio:f&&f.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:f&&f.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:f&&f.contentVisibility||"visible",className:f&&f.className||"",id:f&&f.id||""},this.renderConfig.dpr=f&&f.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=f&&f.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(u,f,m){this.initElement(u,f,m)}function HShapeElement(u,f,m){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(u,f,m),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(u,f,m){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(u,f,m)}function HCameraElement(u,f,m){this.initFrame(),this.initBaseData(u,f,m),this.initHierarchy();var _=PropertyFactory.getProp;if(this.pe=_(this,u.pe,0,0,this),u.ks.p.s?(this.px=_(this,u.ks.p.x,1,0,this),this.py=_(this,u.ks.p.y,1,0,this),this.pz=_(this,u.ks.p.z,1,0,this)):this.p=_(this,u.ks.p,1,0,this),u.ks.a&&(this.a=_(this,u.ks.a,1,0,this)),u.ks.or.k.length&&u.ks.or.k[0].to){var C,D=u.ks.or.k.length;for(C=0;C<D;C+=1)u.ks.or.k[C].to=null,u.ks.or.k[C].ti=null}this.or=_(this,u.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=_(this,u.ks.rx,0,degToRads,this),this.ry=_(this,u.ks.ry,0,degToRads,this),this.rz=_(this,u.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(u,f,m){this.assetData=f.getAssetData(u.refId),this.initElement(u,f,m)}function HybridRendererBase(u,f){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:f&&f.className||"",imagePreserveAspectRatio:f&&f.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(f&&!1===f.hideOnTransparent),filterSize:{width:f&&f.filterSize&&f.filterSize.width||"400%",height:f&&f.filterSize&&f.filterSize.height||"400%",x:f&&f.filterSize&&f.filterSize.x||"-100%",y:f&&f.filterSize&&f.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(u,f,m){this.layers=u.layers,this.supports3d=!u.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(u,f,m),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,f.frameRate,this):{_placeholder:!0}}function HybridRenderer(u,f){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:f&&f.className||"",imagePreserveAspectRatio:f&&f.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(f&&!1===f.hideOnTransparent),filterSize:{width:f&&f.filterSize&&f.filterSize.width||"400%",height:f&&f.filterSize&&f.filterSize.height||"400%",x:f&&f.filterSize&&f.filterSize.x||"-100%",y:f&&f.filterSize&&f.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(u){for(var f=0,m=u.length,_=[],C="";f<m;)u[f]===String.fromCharCode(13)||u[f]===String.fromCharCode(3)?(_.push(C),C=""):C+=u[f],f+=1;return _.push(C),_},SVGTextLottieElement.prototype.buildShapeData=function(u,f){if(u.shapes&&u.shapes.length){var m=u.shapes[0];if(m.it){var _=m.it[m.it.length-1];_.s&&(_.s.k[0]=f,_.s.k[1]=f)}}return u},SVGTextLottieElement.prototype.buildNewText=function(){var u,f;this.addDynamicProperty(this);var m=this.textProperty.currentData;this.renderedLetters=createSizedArray(m?m.l.length:0),this.layerElement.setAttribute("fill",m.fc?this.buildColor(m.fc):"rgba(0,0,0,0)"),m.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(m.sc)),this.layerElement.setAttribute("stroke-width",m.sw)),this.layerElement.setAttribute("font-size",m.finalSize);var _=this.globalData.fontManager.getFontByName(m.f);if(_.fClass)this.layerElement.setAttribute("class",_.fClass);else{this.layerElement.setAttribute("font-family",_.fFamily);var C=m.fWeight;this.layerElement.setAttribute("font-style",m.fStyle),this.layerElement.setAttribute("font-weight",C)}this.layerElement.setAttribute("aria-label",m.t);var G,z=m.l||[],B=!!this.globalData.fontManager.chars;f=z.length;var Q=this.mHelper,T=this.data.singleShape,F=0,q=0,R=!0,N=.001*m.tr*m.finalSize;if(!T||B||m.sz){var W,k=this.textSpans.length;for(u=0;u<f;u+=1){if(this.textSpans[u]||(this.textSpans[u]={span:null,childSpan:null,glyph:null}),!B||!T||0===u){if(G=k>u?this.textSpans[u].span:createNS(B?"g":"text"),k<=u){if(G.setAttribute("stroke-linecap","butt"),G.setAttribute("stroke-linejoin","round"),G.setAttribute("stroke-miterlimit","4"),this.textSpans[u].span=G,B){var V=createNS("g");G.appendChild(V),this.textSpans[u].childSpan=V}this.textSpans[u].span=G,this.layerElement.appendChild(G)}G.style.display="inherit"}if(Q.reset(),T&&(z[u].n&&(F=-N,q+=m.yOffset,q+=R?1:0,R=!1),this.applyTextPropertiesToMatrix(m,Q,z[u].line,F,q),F+=z[u].l||0,F+=N),B){var ie;if(1===(W=this.globalData.fontManager.getCharData(m.finalText[u],_.fStyle,this.globalData.fontManager.getFontByName(m.f).fFamily)).t)ie=new SVGCompElement(W.data,this.globalData,this);else{var pe=emptyShapeData;W.data&&W.data.shapes&&(pe=this.buildShapeData(W.data,m.finalSize)),ie=new SVGShapeElement(pe,this.globalData,this)}if(this.textSpans[u].glyph){var me=this.textSpans[u].glyph;this.textSpans[u].childSpan.removeChild(me.layerElement),me.destroy()}this.textSpans[u].glyph=ie,ie._debug=!0,ie.prepareFrame(0),ie.renderFrame(),this.textSpans[u].childSpan.appendChild(ie.layerElement),1===W.t&&this.textSpans[u].childSpan.setAttribute("transform","scale("+m.finalSize/100+","+m.finalSize/100+")")}else T&&G.setAttribute("transform","translate("+Q.props[12]+","+Q.props[13]+")"),G.textContent=z[u].val,G.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}T&&G&&G.setAttribute("d","")}else{var Ve=this.textContainer,it="start";switch(m.j){case 1:it="end";break;case 2:it="middle";break;default:it="start"}Ve.setAttribute("text-anchor",it),Ve.setAttribute("letter-spacing",N);var je=this.buildTextContents(m.finalText);for(f=je.length,q=m.ps?m.ps[1]+m.ascent:0,u=0;u<f;u+=1)(G=this.textSpans[u].span||createNS("tspan")).textContent=je[u],G.setAttribute("x",0),G.setAttribute("y",q),G.style.display="inherit",Ve.appendChild(G),this.textSpans[u]||(this.textSpans[u]={span:null,glyph:null}),this.textSpans[u].span=G,q+=m.finalLineHeight;this.layerElement.appendChild(Ve)}for(;u<this.textSpans.length;)this.textSpans[u].span.style.display="none",u+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var u=this.layerElement.getBBox();this.bbox={top:u.y,left:u.x,width:u.width,height:u.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var u,f,m=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,u=0;u<m;u+=1)(f=this.textSpans[u].glyph)&&(f.prepareFrame(this.comp.renderedFrame-this.data.st),f._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var u,f;this._sizeChanged=!0;var m,_,C,D=this.textAnimator.renderedLetters,G=this.textProperty.currentData.l;for(f=G.length,u=0;u<f;u+=1)G[u].n||(m=D[u],_=this.textSpans[u].span,(C=this.textSpans[u].glyph)&&C.renderFrame(),m._mdf.m&&_.setAttribute("transform",m.m),m._mdf.o&&_.setAttribute("opacity",m.o),m._mdf.sw&&_.setAttribute("stroke-width",m.sw),m._mdf.sc&&_.setAttribute("stroke",m.sc),m._mdf.fc&&_.setAttribute("fill",m.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var u=createNS("rect");u.setAttribute("width",this.data.sw),u.setAttribute("height",this.data.sh),u.setAttribute("fill",this.data.sc),this.layerElement.appendChild(u)},NullElement.prototype.prepareFrame=function(u){this.prepareProperties(u,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(u){return new NullElement(u,this.globalData,this)},SVGRendererBase.prototype.createShape=function(u){return new SVGShapeElement(u,this.globalData,this)},SVGRendererBase.prototype.createText=function(u){return new SVGTextLottieElement(u,this.globalData,this)},SVGRendererBase.prototype.createImage=function(u){return new IImageElement(u,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(u){return new ISolidElement(u,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(u){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+u.w+" "+u.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",u.w),this.svgElement.setAttribute("height",u.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var f=this.globalData.defs;this.setupGlobalData(u,f),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=u;var m=createNS("clipPath"),_=createNS("rect");_.setAttribute("width",u.w),_.setAttribute("height",u.h),_.setAttribute("x",0),_.setAttribute("y",0);var C=createElementID();m.setAttribute("id",C),m.appendChild(_),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+C+")"),f.appendChild(m),this.layers=u.layers,this.elements=createSizedArray(u.layers.length)},SVGRendererBase.prototype.destroy=function(){var u;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var f=this.layers?this.layers.length:0;for(u=0;u<f;u+=1)this.elements[u]&&this.elements[u].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.buildItem=function(u){var f=this.elements;if(!f[u]&&99!==this.layers[u].ty){f[u]=!0;var m=this.createItem(this.layers[u]);f[u]=m,getExpressionsPlugin()&&(0===this.layers[u].ty&&this.globalData.projectInterface.registerComposition(m),m.initExpressions()),this.appendElementInPos(m,u),this.layers[u].tt&&(this.elements[u-1]&&!0!==this.elements[u-1]?m.setMatte(f[u-1].layerId):(this.buildItem(u-1),this.addPendingElement(m)))}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var u=this.pendingElements.pop();if(u.checkParenting(),u.data.tt)for(var f=0,m=this.elements.length;f<m;){if(this.elements[f]===u){u.setMatte(this.elements[f-1].layerId);break}f+=1}}},SVGRendererBase.prototype.renderFrame=function(u){if(this.renderedFrame!==u&&!this.destroyed){var f;null===u?u=this.renderedFrame:this.renderedFrame=u,this.globalData.frameNum=u,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=u,this.globalData._mdf=!1;var m=this.layers.length;for(this.completeLayers||this.checkLayers(u),f=m-1;f>=0;f-=1)(this.completeLayers||this.elements[f])&&this.elements[f].prepareFrame(u-this.layers[f].st);if(this.globalData._mdf)for(f=0;f<m;f+=1)(this.completeLayers||this.elements[f])&&this.elements[f].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(u,f){var m=u.getBaseElement();if(m){for(var _,C=0;C<f;)this.elements[C]&&!0!==this.elements[C]&&this.elements[C].getBaseElement()&&(_=this.elements[C].getBaseElement()),C+=1;_?this.layerElement.insertBefore(m,_):this.layerElement.appendChild(m)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(u,f,m){this.initFrame(),this.initBaseData(u,f,m),this.initTransform(u,f,m),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&f.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(u){if(this._mdf=!1,this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=u/this.data.sr;else{var f=this.tm.v;f===this.data.op&&(f=this.data.op-1),this.renderedFrame=f}var m,_=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),m=_-1;m>=0;m-=1)(this.completeLayers||this.elements[m])&&(this.elements[m].prepareFrame(this.renderedFrame-this.layers[m].st),this.elements[m]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var u,f=this.layers.length;for(u=0;u<f;u+=1)(this.completeLayers||this.elements[u])&&this.elements[u].renderFrame()},ICompElement.prototype.setElements=function(u){this.elements=u},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var u,f=this.layers.length;for(u=0;u<f;u+=1)this.elements[u]&&this.elements[u].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(u){return new SVGCompElement(u,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(u){return new SVGCompElement(u,this.globalData,this)},CVContextData.prototype.duplicate=function(){var u=2*this._length,f=this.savedOp;this.savedOp=createTypedArray("float32",u),this.savedOp.set(f);var m=0;for(m=this._length;m<u;m+=1)this.saved[m]=createTypedArray("float32",16);this._length=u},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},ShapeTransformManager.prototype={addTransformSequence:function(u){var f,m=u.length,_="_";for(f=0;f<m;f+=1)_+=u[f].transform.key+"_";var C=this.sequences[_];return C||(C={transforms:[].concat(u),finalTransform:new Matrix,_mdf:!1},this.sequences[_]=C,this.sequenceList.push(C)),C},processSequence:function(u,f){for(var m,_=0,C=u.transforms.length,D=f;_<C&&!f;){if(u.transforms[_].transform.mProps._mdf){D=!0;break}_+=1}if(D)for(u.finalTransform.reset(),_=C-1;_>=0;_-=1)u.finalTransform.transform((m=u.transforms[_].transform.mProps.v.props)[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]);u._mdf=D},processSequences:function(u){var f,m=this.sequenceList.length;for(f=0;f<m;f+=1)this.processSequence(this.sequenceList[f],u)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var u,f,m,_,C=this.element.finalTransform.mat,D=this.element.canvasContext,G=this.masksProperties.length;for(D.beginPath(),u=0;u<G;u+=1)if("n"!==this.masksProperties[u].mode){var z;this.masksProperties[u].inv&&(D.moveTo(0,0),D.lineTo(this.element.globalData.compSize.w,0),D.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),D.lineTo(0,this.element.globalData.compSize.h),D.lineTo(0,0)),f=C.applyToPointArray((_=this.viewData[u].v).v[0][0],_.v[0][1],0),D.moveTo(f[0],f[1]);var B=_._length;for(z=1;z<B;z+=1)m=C.applyToTriplePoints(_.o[z-1],_.i[z],_.v[z]),D.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);m=C.applyToTriplePoints(_.o[z-1],_.i[0],_.v[0]),D.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5])}this.element.globalData.renderer.save(!0),D.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var u=this.globalData;if(u.blendMode!==this.data.bm){u.blendMode=this.data.bm;var f=getBlendMode(this.data.bm);u.canvasContext.globalCompositeOperation=f}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var u=0===this.data.ty;this.globalData.renderer.save(u),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(u),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(u,f){var m={data:u,type:u.ty,preTransforms:this.transformsManager.addTransformSequence(f),transforms:[],elements:[],closed:!0===u.hd},_={};if("fl"===u.ty||"st"===u.ty?(_.c=PropertyFactory.getProp(this,u.c,1,255,this),_.c.k||(m.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")")):"gf"!==u.ty&&"gs"!==u.ty||(_.s=PropertyFactory.getProp(this,u.s,1,null,this),_.e=PropertyFactory.getProp(this,u.e,1,null,this),_.h=PropertyFactory.getProp(this,u.h||{k:0},0,.01,this),_.a=PropertyFactory.getProp(this,u.a||{k:0},0,degToRads,this),_.g=new GradientProperty(this,u.g,this)),_.o=PropertyFactory.getProp(this,u.o,0,.01,this),"st"===u.ty||"gs"===u.ty){if(m.lc=lineCapEnum[u.lc||2],m.lj=lineJoinEnum[u.lj||2],1==u.lj&&(m.ml=u.ml),_.w=PropertyFactory.getProp(this,u.w,0,null,this),_.w.k||(m.wi=_.w.v),u.d){var C=new DashProperty(this,u.d,"canvas",this);_.d=C,_.d.k||(m.da=_.d.dashArray,m.do=_.d.dashoffset[0])}}else m.r=2===u.r?"evenodd":"nonzero";return this.stylesList.push(m),_.style=m,_},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(u){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,u.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,u,this)}}},CVShapeElement.prototype.createShapeElement=function(u){var f=new CVShapeData(this,u,this.stylesList,this.transformsManager);return this.shapes.push(f),this.addShapeToModifiers(f),f},CVShapeElement.prototype.reloadShapes=function(){var u;this._isFirstFrame=!0;var f=this.itemsData.length;for(u=0;u<f;u+=1)this.prevViewData[u]=this.itemsData[u];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),f=this.dynamicProperties.length,u=0;u<f;u+=1)this.dynamicProperties[u].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(u){var f,m=this.stylesList.length;for(f=0;f<m;f+=1)this.stylesList[f].closed||this.stylesList[f].transforms.push(u)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var u,f=this.stylesList.length;for(u=0;u<f;u+=1)this.stylesList[u].closed||this.stylesList[u].transforms.pop()},CVShapeElement.prototype.closeStyles=function(u){var f,m=u.length;for(f=0;f<m;f+=1)u[f].closed=!0},CVShapeElement.prototype.searchShapes=function(u,f,m,_,C){var D,G,z,B,Q,T,F=u.length-1,q=[],R=[],N=[].concat(C);for(D=F;D>=0;D-=1){if((B=this.searchProcessedElement(u[D]))?f[D]=m[B-1]:u[D]._shouldRender=_,"fl"===u[D].ty||"st"===u[D].ty||"gf"===u[D].ty||"gs"===u[D].ty)B?f[D].style.closed=!1:f[D]=this.createStyleElement(u[D],N),q.push(f[D].style);else if("gr"===u[D].ty){if(B)for(z=f[D].it.length,G=0;G<z;G+=1)f[D].prevViewData[G]=f[D].it[G];else f[D]=this.createGroupElement(u[D]);this.searchShapes(u[D].it,f[D].it,f[D].prevViewData,_,N)}else"tr"===u[D].ty?(B||(T=this.createTransformElement(u[D]),f[D]=T),N.push(f[D]),this.addTransformToStyleList(f[D])):"sh"===u[D].ty||"rc"===u[D].ty||"el"===u[D].ty||"sr"===u[D].ty?B||(f[D]=this.createShapeElement(u[D])):"tm"===u[D].ty||"rd"===u[D].ty||"pb"===u[D].ty?(B?(Q=f[D]).closed=!1:((Q=ShapeModifiers.getModifier(u[D].ty)).init(this,u[D]),f[D]=Q,this.shapeModifiers.push(Q)),R.push(Q)):"rp"===u[D].ty&&(B?(Q=f[D]).closed=!0:(Q=ShapeModifiers.getModifier(u[D].ty),f[D]=Q,Q.init(this,u,D,f),this.shapeModifiers.push(Q),_=!1),R.push(Q));this.addProcessedElement(u[D],D+1)}for(this.removeTransformFromStyleList(),this.closeStyles(q),F=R.length,D=0;D<F;D+=1)R[D].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(u,f){(u._opMdf||f.op._mdf||this._isFirstFrame)&&(f.opacity=u.opacity,f.opacity*=f.op.v,f._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var u,f,m,_,C,D,G,z,B,Q=this.stylesList.length,T=this.globalData.renderer,F=this.globalData.canvasContext;for(u=0;u<Q;u+=1)if(("st"!==(z=(B=this.stylesList[u]).type)&&"gs"!==z||0!==B.wi)&&B.data._shouldRender&&0!==B.coOp&&0!==this.globalData.currentGlobalAlpha){for(T.save(),D=B.elements,"st"===z||"gs"===z?(F.strokeStyle="st"===z?B.co:B.grd,F.lineWidth=B.wi,F.lineCap=B.lc,F.lineJoin=B.lj,F.miterLimit=B.ml||0):F.fillStyle="fl"===z?B.co:B.grd,T.ctxOpacity(B.coOp),"st"!==z&&"gs"!==z&&F.beginPath(),T.ctxTransform(B.preTransforms.finalTransform.props),m=D.length,f=0;f<m;f+=1){for("st"!==z&&"gs"!==z||(F.beginPath(),B.da&&(F.setLineDash(B.da),F.lineDashOffset=B.do)),C=(G=D[f].trNodes).length,_=0;_<C;_+=1)"m"===G[_].t?F.moveTo(G[_].p[0],G[_].p[1]):"c"===G[_].t?F.bezierCurveTo(G[_].pts[0],G[_].pts[1],G[_].pts[2],G[_].pts[3],G[_].pts[4],G[_].pts[5]):F.closePath();"st"!==z&&"gs"!==z||(F.stroke(),B.da&&F.setLineDash(this.dashResetter))}"st"!==z&&"gs"!==z&&F.fill(B.r),T.restore()}},CVShapeElement.prototype.renderShape=function(u,f,m,_){var C,D;for(D=u,C=f.length-1;C>=0;C-=1)"tr"===f[C].ty?this.renderShapeTransform(u,D=m[C].transform):"sh"===f[C].ty||"el"===f[C].ty||"rc"===f[C].ty||"sr"===f[C].ty?this.renderPath(f[C],m[C]):"fl"===f[C].ty?this.renderFill(f[C],m[C],D):"st"===f[C].ty?this.renderStroke(f[C],m[C],D):"gf"===f[C].ty||"gs"===f[C].ty?this.renderGradientFill(f[C],m[C],D):"gr"===f[C].ty&&this.renderShape(D,f[C].it,m[C].it);_&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(u,f){if(this._isFirstFrame||f._mdf||u.transforms._mdf){var m,_,C,D=u.trNodes,G=f.paths,z=G._length;D.length=0;var B=u.transforms.finalTransform;for(C=0;C<z;C+=1){var Q=G.shapes[C];if(Q&&Q.v){for(_=Q._length,m=1;m<_;m+=1)1===m&&D.push({t:"m",p:B.applyToPointArray(Q.v[0][0],Q.v[0][1],0)}),D.push({t:"c",pts:B.applyToTriplePoints(Q.o[m-1],Q.i[m],Q.v[m])});1===_&&D.push({t:"m",p:B.applyToPointArray(Q.v[0][0],Q.v[0][1],0)}),Q.c&&_&&(D.push({t:"c",pts:B.applyToTriplePoints(Q.o[m-1],Q.i[0],Q.v[0])}),D.push({t:"z"}))}}u.trNodes=D}},CVShapeElement.prototype.renderPath=function(u,f){if(!0!==u.hd&&u._shouldRender){var m,_=f.styledShapes.length;for(m=0;m<_;m+=1)this.renderStyledShape(f.styledShapes[m],f.sh)}},CVShapeElement.prototype.renderFill=function(u,f,m){var _=f.style;(f.c._mdf||this._isFirstFrame)&&(_.co="rgb("+bmFloor(f.c.v[0])+","+bmFloor(f.c.v[1])+","+bmFloor(f.c.v[2])+")"),(f.o._mdf||m._opMdf||this._isFirstFrame)&&(_.coOp=f.o.v*m.opacity)},CVShapeElement.prototype.renderGradientFill=function(u,f,m){var _,C=f.style;if(!C.grd||f.g._mdf||f.s._mdf||f.e._mdf||1!==u.t&&(f.h._mdf||f.a._mdf)){var D,G=this.globalData.canvasContext,z=f.s.v,B=f.e.v;if(1===u.t)_=G.createLinearGradient(z[0],z[1],B[0],B[1]);else{var Q=Math.sqrt(Math.pow(z[0]-B[0],2)+Math.pow(z[1]-B[1],2)),T=Math.atan2(B[1]-z[1],B[0]-z[0]),F=f.h.v;F>=1?F=.99:F<=-1&&(F=-.99);var q=Q*F,R=Math.cos(T+f.a.v)*q+z[0],N=Math.sin(T+f.a.v)*q+z[1];_=G.createRadialGradient(R,N,0,z[0],z[1],Q)}var W=u.g.p,k=f.g.c,V=1;for(D=0;D<W;D+=1)f.g._hasOpacity&&f.g._collapsable&&(V=f.g.o[2*D+1]),_.addColorStop(k[4*D]/100,"rgba("+k[4*D+1]+","+k[4*D+2]+","+k[4*D+3]+","+V+")");C.grd=_}C.coOp=f.o.v*m.opacity},CVShapeElement.prototype.renderStroke=function(u,f,m){var _=f.style,C=f.d;C&&(C._mdf||this._isFirstFrame)&&(_.da=C.dashArray,_.do=C.dashoffset[0]),(f.c._mdf||this._isFirstFrame)&&(_.co="rgb("+bmFloor(f.c.v[0])+","+bmFloor(f.c.v[1])+","+bmFloor(f.c.v[2])+")"),(f.o._mdf||m._opMdf||this._isFirstFrame)&&(_.coOp=f.o.v*m.opacity),(f.w._mdf||this._isFirstFrame)&&(_.wi=f.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var u=this.textProperty.currentData;this.renderedLetters=createSizedArray(u.l?u.l.length:0);var f=!1;u.fc?(f=!0,this.values.fill=this.buildColor(u.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=f;var m=!1;u.sc&&(m=!0,this.values.stroke=this.buildColor(u.sc),this.values.sWidth=u.sw);var _,C,D,G,z,B,Q,T,F,q,R,N,W=this.globalData.fontManager.getFontByName(u.f),k=u.l,V=this.mHelper;this.stroke=m,this.values.fValue=u.finalSize+"px "+this.globalData.fontManager.getFontByName(u.f).fFamily,C=u.finalText.length;var ie=this.data.singleShape,pe=.001*u.tr*u.finalSize,me=0,Ve=0,it=!0,je=0;for(_=0;_<C;_+=1){G=(D=this.globalData.fontManager.getCharData(u.finalText[_],W.fStyle,this.globalData.fontManager.getFontByName(u.f).fFamily))&&D.data||{},V.reset(),ie&&k[_].n&&(me=-pe,Ve+=u.yOffset,Ve+=it?1:0,it=!1),F=(Q=G.shapes?G.shapes[0].it:[]).length,V.scale(u.finalSize/100,u.finalSize/100),ie&&this.applyTextPropertiesToMatrix(u,V,k[_].line,me,Ve),R=createSizedArray(F-1);var qe=0;for(T=0;T<F;T+=1)if("sh"===Q[T].ty){for(B=Q[T].ks.k.i.length,q=Q[T].ks.k,N=[],z=1;z<B;z+=1)1===z&&N.push(V.applyToX(q.v[0][0],q.v[0][1],0),V.applyToY(q.v[0][0],q.v[0][1],0)),N.push(V.applyToX(q.o[z-1][0],q.o[z-1][1],0),V.applyToY(q.o[z-1][0],q.o[z-1][1],0),V.applyToX(q.i[z][0],q.i[z][1],0),V.applyToY(q.i[z][0],q.i[z][1],0),V.applyToX(q.v[z][0],q.v[z][1],0),V.applyToY(q.v[z][0],q.v[z][1],0));N.push(V.applyToX(q.o[z-1][0],q.o[z-1][1],0),V.applyToY(q.o[z-1][0],q.o[z-1][1],0),V.applyToX(q.i[0][0],q.i[0][1],0),V.applyToY(q.i[0][0],q.i[0][1],0),V.applyToX(q.v[0][0],q.v[0][1],0),V.applyToY(q.v[0][0],q.v[0][1],0)),R[qe]=N,qe+=1}ie&&(me+=k[_].l,me+=pe),this.textSpans[je]?this.textSpans[je].elem=R:this.textSpans[je]={elem:R},je+=1}},CVTextElement.prototype.renderInnerContent=function(){var u,f,m,_,C,D,G=this.canvasContext;G.font=this.values.fValue,G.lineCap="butt",G.lineJoin="miter",G.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var z,B=this.textAnimator.renderedLetters,Q=this.textProperty.currentData.l;f=Q.length;var T,F,q=null,R=null,N=null;for(u=0;u<f;u+=1)if(!Q[u].n){if((z=B[u])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(z.p),this.globalData.renderer.ctxOpacity(z.o)),this.fill){for(z&&z.fc?q!==z.fc&&(q=z.fc,G.fillStyle=z.fc):q!==this.values.fill&&(q=this.values.fill,G.fillStyle=this.values.fill),_=(T=this.textSpans[u].elem).length,this.globalData.canvasContext.beginPath(),m=0;m<_;m+=1)for(D=(F=T[m]).length,this.globalData.canvasContext.moveTo(F[0],F[1]),C=2;C<D;C+=6)this.globalData.canvasContext.bezierCurveTo(F[C],F[C+1],F[C+2],F[C+3],F[C+4],F[C+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(z&&z.sw?N!==z.sw&&(N=z.sw,G.lineWidth=z.sw):N!==this.values.sWidth&&(N=this.values.sWidth,G.lineWidth=this.values.sWidth),z&&z.sc?R!==z.sc&&(R=z.sc,G.strokeStyle=z.sc):R!==this.values.stroke&&(R=this.values.stroke,G.strokeStyle=this.values.stroke),_=(T=this.textSpans[u].elem).length,this.globalData.canvasContext.beginPath(),m=0;m<_;m+=1)for(D=(F=T[m]).length,this.globalData.canvasContext.moveTo(F[0],F[1]),C=2;C<D;C+=6)this.globalData.canvasContext.bezierCurveTo(F[C],F[C+1],F[C+2],F[C+3],F[C+4],F[C+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}z&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var u=createTag("canvas");u.width=this.assetData.w,u.height=this.assetData.h;var f,m,_=u.getContext("2d"),C=this.img.width,D=this.img.height,G=C/D,z=this.assetData.w/this.assetData.h,B=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;G>z&&"xMidYMid slice"===B||G<z&&"xMidYMid slice"!==B?f=(m=D)*z:m=(f=C)/z,_.drawImage(this.img,(C-f)/2,(D-m)/2,f,m,0,0,this.assetData.w,this.assetData.h),this.img=u}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var u=this.canvasContext;u.fillStyle=this.data.sc,u.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(u){return new CVShapeElement(u,this.globalData,this)},CanvasRendererBase.prototype.createText=function(u){return new CVTextElement(u,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(u){return new CVImageElement(u,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(u){return new CVSolidElement(u,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(u){if(1!==u[0]||0!==u[1]||0!==u[4]||1!==u[5]||0!==u[12]||0!==u[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(u);var f=this.contextData.cTr.props;this.transformMat.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var m=this.contextData.cTr.props;this.canvasContext.setTransform(m[0],m[1],m[4],m[5],m[12],m[13])}else this.canvasContext.transform(u[0],u[1],u[4],u[5],u[12],u[13])},CanvasRendererBase.prototype.ctxOpacity=function(u){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=u<0?0:u,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=u<0?0:u,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(u){if(this.renderConfig.clearCanvas){u&&this.canvasContext.save();var f,m=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var _=this.contextData.saved[this.contextData.cArrPos];for(f=0;f<16;f+=1)_[f]=m[f];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(u){if(this.renderConfig.clearCanvas){u&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var f,m=this.contextData.saved[this.contextData.cArrPos],_=this.contextData.cTr.props;for(f=0;f<16;f+=1)_[f]=m[f];this.canvasContext.setTransform(m[0],m[1],m[4],m[5],m[12],m[13]),this.contextData.cO=m=this.contextData.savedOp[this.contextData.cArrPos],this.globalData.currentGlobalAlpha!==m&&(this.canvasContext.globalAlpha=m,this.globalData.currentGlobalAlpha=m)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(u){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var f=this.animationItem.container.style;f.width="100%",f.height="100%";var m="0px 0px 0px";f.transformOrigin=m,f.mozTransformOrigin=m,f.webkitTransformOrigin=m,f["-webkit-transform"]=m,f.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=u,this.layers=u.layers,this.transformCanvas={w:u.w,h:u.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(u,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(u.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(){var u,f,m,_;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(f=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",(u=this.animationItem.wrapper.offsetWidth)*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",f*this.renderConfig.dpr)):(u=this.canvasContext.canvas.width*this.renderConfig.dpr,f=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var C=this.renderConfig.preserveAspectRatio.split(" "),D=C[1]||"meet",G=C[0]||"xMidYMid",z=G.substr(0,4),B=G.substr(4);(_=this.transformCanvas.w/this.transformCanvas.h)>(m=u/f)&&"meet"===D||_<m&&"slice"===D?(this.transformCanvas.sx=u/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=u/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=f/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=f/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===z&&(_<m&&"meet"===D||_>m&&"slice"===D)?(u-this.transformCanvas.w*(f/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===z&&(_<m&&"meet"===D||_>m&&"slice"===D)?(u-this.transformCanvas.w*(f/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===B&&(_>m&&"meet"===D||_<m&&"slice"===D)?(f-this.transformCanvas.h*(u/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===B&&(_>m&&"meet"===D||_<m&&"slice"===D)?(f-this.transformCanvas.h*(u/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=u/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=f/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var u;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),u=(this.layers?this.layers.length:0)-1;u>=0;u-=1)this.elements[u]&&this.elements[u].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(u,f){if((this.renderedFrame!==u||!0!==this.renderConfig.clearCanvas||f)&&!this.destroyed&&-1!==u){var m;this.renderedFrame=u,this.globalData.frameNum=u-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||f,this.globalData.projectInterface.currentFrame=u;var _=this.layers.length;for(this.completeLayers||this.checkLayers(u),m=0;m<_;m+=1)(this.completeLayers||this.elements[m])&&this.elements[m].prepareFrame(u-this.layers[m].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),m=_-1;m>=0;m-=1)(this.completeLayers||this.elements[m])&&this.elements[m].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(u){var f=this.elements;if(!f[u]&&99!==this.layers[u].ty){var m=this.createItem(this.layers[u],this,this.globalData);f[u]=m,m.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var u,f=this.canvasContext;for(f.beginPath(),f.moveTo(0,0),f.lineTo(this.data.w,0),f.lineTo(this.data.w,this.data.h),f.lineTo(0,this.data.h),f.lineTo(0,0),f.clip(),u=this.layers.length-1;u>=0;u-=1)(this.completeLayers||this.elements[u])&&this.elements[u].renderFrame()},CVCompElement.prototype.destroy=function(){var u;for(u=this.layers.length-1;u>=0;u-=1)this.elements[u]&&this.elements[u].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(u){return new CVCompElement(u,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(u){return new CVCompElement(u,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var u=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var f=this.finalTransform.mat.toCSS();u.transform=f,u.webkitTransform=f}this.finalTransform._opMdf&&(u.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var u;this.data.hasMask?((u=createNS("rect")).setAttribute("width",this.data.sw),u.setAttribute("height",this.data.sh),u.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((u=createTag("div")).style.width=this.data.sw+"px",u.style.height=this.data.sh+"px",u.style.backgroundColor=this.data.sc),this.layerElement.appendChild(u)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var u;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),u=this.svgElement;else{u=createNS("svg");var f=this.comp.data?this.comp.data:this.globalData.compSize;u.setAttribute("width",f.w),u.setAttribute("height",f.h),u.appendChild(this.shapesContainer),this.layerElement.appendChild(u)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=u},HShapeElement.prototype.getTransformedPoint=function(u,f){var m,_=u.length;for(m=0;m<_;m+=1)f=u[m].mProps.v.applyToPointArray(f[0],f[1],0);return f},HShapeElement.prototype.calculateShapeBoundingBox=function(u,f){var m,_,C,D,G,z=u.sh.v,B=u.transformers,Q=z._length;if(!(Q<=1)){for(m=0;m<Q-1;m+=1)_=this.getTransformedPoint(B,z.v[m]),C=this.getTransformedPoint(B,z.o[m]),D=this.getTransformedPoint(B,z.i[m+1]),G=this.getTransformedPoint(B,z.v[m+1]),this.checkBounds(_,C,D,G,f);z.c&&(_=this.getTransformedPoint(B,z.v[m]),C=this.getTransformedPoint(B,z.o[m]),D=this.getTransformedPoint(B,z.i[0]),G=this.getTransformedPoint(B,z.v[0]),this.checkBounds(_,C,D,G,f))}},HShapeElement.prototype.checkBounds=function(u,f,m,_,C){this.getBoundsOfCurve(u,f,m,_);var D=this.shapeBoundingBox;C.x=bmMin(D.left,C.x),C.xMax=bmMax(D.right,C.xMax),C.y=bmMin(D.top,C.y),C.yMax=bmMax(D.bottom,C.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(u,f,m,_){for(var C,D,G,z,B,Q,T,F=[[u[0],_[0]],[u[1],_[1]]],q=0;q<2;++q)D=6*u[q]-12*f[q]+6*m[q],C=-3*u[q]+9*f[q]-9*m[q]+3*_[q],G=3*f[q]-3*u[q],D|=0,G|=0,0==(C|=0)&&0===D||(0===C?(z=-G/D)>0&&z<1&&F[q].push(this.calculateF(z,u,f,m,_,q)):(B=D*D-4*G*C)>=0&&((Q=(-D+bmSqrt(B))/(2*C))>0&&Q<1&&F[q].push(this.calculateF(Q,u,f,m,_,q)),(T=(-D-bmSqrt(B))/(2*C))>0&&T<1&&F[q].push(this.calculateF(T,u,f,m,_,q))));this.shapeBoundingBox.left=bmMin.apply(null,F[0]),this.shapeBoundingBox.top=bmMin.apply(null,F[1]),this.shapeBoundingBox.right=bmMax.apply(null,F[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,F[1])},HShapeElement.prototype.calculateF=function(u,f,m,_,C,D){return bmPow(1-u,3)*f[D]+3*bmPow(1-u,2)*u*m[D]+3*(1-u)*bmPow(u,2)*_[D]+bmPow(u,3)*C[D]},HShapeElement.prototype.calculateBoundingBox=function(u,f){var m,_=u.length;for(m=0;m<_;m+=1)u[m]&&u[m].sh?this.calculateShapeBoundingBox(u[m],f):u[m]&&u[m].it?this.calculateBoundingBox(u[m].it,f):u[m]&&u[m].style&&u[m].w&&this.expandStrokeBoundingBox(u[m].w,f)},HShapeElement.prototype.expandStrokeBoundingBox=function(u,f){var m=0;if(u.keyframes){for(var _=0;_<u.keyframes.length;_+=1){var C=u.keyframes[_].s;C>m&&(m=C)}m*=u.mult}else m=u.v*u.mult;f.x-=m,f.xMax+=m,f.y-=m,f.yMax+=m},HShapeElement.prototype.currentBoxContains=function(u){return this.currentBBox.x<=u.x&&this.currentBBox.y<=u.y&&this.currentBBox.width+this.currentBBox.x>=u.x+u.width&&this.currentBBox.height+this.currentBBox.y>=u.y+u.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.tempBoundingBox,f=999999;if(u.x=f,u.xMax=-f,u.y=f,u.yMax=-f,this.calculateBoundingBox(this.itemsData,u),u.width=u.xMax<u.x?0:u.xMax-u.x,u.height=u.yMax<u.y?0:u.yMax-u.y,this.currentBoxContains(u))return;var m=!1;if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.shapeCont.setAttribute("width",u.width),m=!0),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.shapeCont.setAttribute("height",u.height),m=!0),m||this.currentBBox.x!==u.x||this.currentBBox.y!==u.y){this.currentBBox.w=u.width,this.currentBBox.h=u.height,this.currentBBox.x=u.x,this.currentBBox.y=u.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var _=this.shapeCont.style,C="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_.transform=C,_.webkitTransform=C}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var u=createNS("g");this.maskedElement.appendChild(u),this.innerElem=u}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var u=this.textProperty.currentData;this.renderedLetters=createSizedArray(u.l?u.l.length:0);var f=this.innerElem.style,m=u.fc?this.buildColor(u.fc):"rgba(0,0,0,0)";f.fill=m,f.color=m,u.sc&&(f.stroke=this.buildColor(u.sc),f.strokeWidth=u.sw+"px");var _,C,D=this.globalData.fontManager.getFontByName(u.f);if(!this.globalData.fontManager.chars)if(f.fontSize=u.finalSize+"px",f.lineHeight=u.finalSize+"px",D.fClass)this.innerElem.className=D.fClass;else{f.fontFamily=D.fFamily;var G=u.fWeight;f.fontStyle=u.fStyle,f.fontWeight=G}var B,Q,T,F=u.l;C=F.length;var q,R=this.mHelper,N="",W=0;for(_=0;_<C;_+=1){if(this.globalData.fontManager.chars?(this.textPaths[W]?B=this.textPaths[W]:((B=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),B.setAttribute("stroke-linejoin",lineJoinEnum[2]),B.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[W]?T=(Q=this.textSpans[W]).children[0]:((Q=createTag("div")).style.lineHeight=0,(T=createNS("svg")).appendChild(B),styleDiv(Q)))):this.isMasked?B=this.textPaths[W]?this.textPaths[W]:createNS("text"):this.textSpans[W]?(Q=this.textSpans[W],B=this.textPaths[W]):(styleDiv(Q=createTag("span")),styleDiv(B=createTag("span")),Q.appendChild(B)),this.globalData.fontManager.chars){var k,V=this.globalData.fontManager.getCharData(u.finalText[_],D.fStyle,this.globalData.fontManager.getFontByName(u.f).fFamily);if(k=V?V.data:null,R.reset(),k&&k.shapes&&k.shapes.length&&(q=k.shapes[0].it,R.scale(u.finalSize/100,u.finalSize/100),N=this.createPathShape(R,q),B.setAttribute("d",N)),this.isMasked)this.innerElem.appendChild(B);else{if(this.innerElem.appendChild(Q),k&&k.shapes){document.body.appendChild(T);var ie=T.getBBox();T.setAttribute("width",ie.width+2),T.setAttribute("height",ie.height+2),T.setAttribute("viewBox",ie.x-1+" "+(ie.y-1)+" "+(ie.width+2)+" "+(ie.height+2));var pe=T.style,me="translate("+(ie.x-1)+"px,"+(ie.y-1)+"px)";pe.transform=me,pe.webkitTransform=me,F[_].yOffset=ie.y-1}else T.setAttribute("width",1),T.setAttribute("height",1);Q.appendChild(T)}}else if(B.textContent=F[_].val,B.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(B);else{this.innerElem.appendChild(Q);var Ve=B.style,it="translate3d(0,"+-u.finalSize/1.2+"px,0)";Ve.transform=it,Ve.webkitTransform=it}this.textSpans[W]=this.isMasked?B:Q,this.textSpans[W].style.display="block",this.textPaths[W]=B,W+=1}for(;W<this.textSpans.length;)this.textSpans[W].style.display="none",W+=1},HTextElement.prototype.renderInnerContent=function(){var u;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var f="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";(u=this.svgElement.style).transform=f,u.webkitTransform=f}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var m,_,C,D,G,z=0,B=this.textAnimator.renderedLetters,Q=this.textProperty.currentData.l;for(_=Q.length,m=0;m<_;m+=1)Q[m].n?z+=1:(D=this.textSpans[m],G=this.textPaths[m],C=B[z],z+=1,C._mdf.m&&(this.isMasked?D.setAttribute("transform",C.m):(D.style.webkitTransform=C.m,D.style.transform=C.m)),D.style.opacity=C.o,C.sw&&C._mdf.sw&&G.setAttribute("stroke-width",C.sw),C.sc&&C._mdf.sc&&G.setAttribute("stroke",C.sc),C.fc&&C._mdf.fc&&(G.setAttribute("fill",C.fc),G.style.color=C.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var T=this.innerElem.getBBox();if(this.currentBBox.w!==T.width&&(this.currentBBox.w=T.width,this.svgElement.setAttribute("width",T.width)),this.currentBBox.h!==T.height&&(this.currentBBox.h=T.height,this.svgElement.setAttribute("height",T.height)),this.currentBBox.w!==T.width+2||this.currentBBox.h!==T.height+2||this.currentBBox.x!==T.x-1||this.currentBBox.y!==T.y-1){this.currentBBox.w=T.width+2,this.currentBBox.h=T.height+2,this.currentBBox.x=T.x-1,this.currentBBox.y=T.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var F="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";(u=this.svgElement.style).transform=F,u.webkitTransform=F}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var u,f,m,_,C=this.comp.threeDElements.length;for(u=0;u<C;u+=1)if("3d"===(f=this.comp.threeDElements[u]).type){_=f.container.style;var D=this.pe.v+"px",G="0px 0px 0px",z="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(m=f.perspectiveElem.style).perspective=D,m.webkitPerspective=D,_.transformOrigin=G,_.mozTransformOrigin=G,_.webkitTransformOrigin=G,m.transform=z,m.webkitTransform=z}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var u,f,m=this._isFirstFrame;if(this.hierarchy)for(f=this.hierarchy.length,u=0;u<f;u+=1)m=this.hierarchy[u].finalTransform.mProp._mdf||m;if(m||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(u=f=this.hierarchy.length-1;u>=0;u-=1){var _=this.hierarchy[u].finalTransform.mProp;this.mat.translate(-_.p.v[0],-_.p.v[1],_.p.v[2]),this.mat.rotateX(-_.or.v[0]).rotateY(-_.or.v[1]).rotateZ(_.or.v[2]),this.mat.rotateX(-_.rx.v).rotateY(-_.ry.v).rotateZ(_.rz.v),this.mat.scale(1/_.s.v[0],1/_.s.v[1],1/_.s.v[2]),this.mat.translate(_.a.v[0],_.a.v[1],_.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var C;C=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var D=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)+Math.pow(C[2],2)),G=[C[0]/D,C[1]/D,C[2]/D],z=Math.sqrt(G[2]*G[2]+G[0]*G[0]),B=Math.atan2(G[1],z),Q=Math.atan2(G[0],-G[2]);this.mat.rotateY(Q).rotateX(-B)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var T=!this._prevMat.equals(this.mat);if((T||this.pe._mdf)&&this.comp.threeDElements){var F,q,R;for(f=this.comp.threeDElements.length,u=0;u<f;u+=1)if("3d"===(F=this.comp.threeDElements[u]).type){if(T){var N=this.mat.toCSS();(R=F.container.style).transform=N,R.webkitTransform=N}this.pe._mdf&&((q=F.perspectiveElem.style).perspective=this.pe.v+"px",q.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(u){this.prepareProperties(u,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var u=this.globalData.getAssetsPath(this.assetData),f=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",u),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(f),f.crossOrigin="anonymous",f.src=u,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(u,f){var m=u.getBaseElement();if(m){var _=this.layers[f];if(_.ddd&&this.supports3d)this.addTo3dContainer(m,f);else if(this.threeDElements)this.addTo3dContainer(m,f);else{for(var C,D,G=0;G<f;)this.elements[G]&&!0!==this.elements[G]&&this.elements[G].getBaseElement&&(D=this.elements[G],C=(this.layers[G].ddd?this.getThreeDContainerByPos(G):D.getBaseElement())||C),G+=1;C?_.ddd&&this.supports3d||this.layerElement.insertBefore(m,C):_.ddd&&this.supports3d||this.layerElement.appendChild(m)}}},HybridRendererBase.prototype.createShape=function(u){return this.supports3d?new HShapeElement(u,this.globalData,this):new SVGShapeElement(u,this.globalData,this)},HybridRendererBase.prototype.createText=function(u){return this.supports3d?new HTextElement(u,this.globalData,this):new SVGTextLottieElement(u,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(u){return this.camera=new HCameraElement(u,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(u){return this.supports3d?new HImageElement(u,this.globalData,this):new IImageElement(u,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(u){return this.supports3d?new HSolidElement(u,this.globalData,this):new ISolidElement(u,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(u){for(var f=0,m=this.threeDElements.length;f<m;){if(this.threeDElements[f].startPos<=u&&this.threeDElements[f].endPos>=u)return this.threeDElements[f].perspectiveElem;f+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(u,f){var m,_,C=createTag("div");styleDiv(C);var D=createTag("div");if(styleDiv(D),"3d"===f){(m=C.style).width=this.globalData.compSize.w+"px",m.height=this.globalData.compSize.h+"px";var G="50% 50%";m.webkitTransformOrigin=G,m.mozTransformOrigin=G,m.transformOrigin=G;var z="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(_=D.style).transform=z,_.webkitTransform=z}C.appendChild(D);var B={container:D,perspectiveElem:C,startPos:u,endPos:u,type:f};return this.threeDElements.push(B),B},HybridRendererBase.prototype.build3dContainers=function(){var u,f,m=this.layers.length,_="";for(u=0;u<m;u+=1)this.layers[u].ddd&&3!==this.layers[u].ty?("3d"!==_&&(_="3d",f=this.createThreeDContainer(u,"3d")),f.endPos=Math.max(f.endPos,u)):("2d"!==_&&(_="2d",f=this.createThreeDContainer(u,"2d")),f.endPos=Math.max(f.endPos,u));for(u=(m=this.threeDElements.length)-1;u>=0;u-=1)this.resizerElem.appendChild(this.threeDElements[u].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(u,f){for(var m=0,_=this.threeDElements.length;m<_;){if(f<=this.threeDElements[m].endPos){for(var C,D=this.threeDElements[m].startPos;D<f;)this.elements[D]&&this.elements[D].getBaseElement&&(C=this.elements[D].getBaseElement()),D+=1;C?this.threeDElements[m].container.insertBefore(u,C):this.threeDElements[m].container.appendChild(u);break}m+=1}},HybridRendererBase.prototype.configAnimation=function(u){var f=createTag("div"),m=this.animationItem.wrapper,_=f.style;_.width=u.w+"px",_.height=u.h+"px",this.resizerElem=f,styleDiv(f),_.transformStyle="flat",_.mozTransformStyle="flat",_.webkitTransformStyle="flat",this.renderConfig.className&&f.setAttribute("class",this.renderConfig.className),m.appendChild(f),_.overflow="hidden";var C=createNS("svg");C.setAttribute("width","1"),C.setAttribute("height","1"),styleDiv(C),this.resizerElem.appendChild(C);var D=createNS("defs");C.appendChild(D),this.data=u,this.setupGlobalData(u,C),this.globalData.defs=D,this.layers=u.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var u;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var f=this.layers?this.layers.length:0;for(u=0;u<f;u+=1)this.elements[u].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var u,f,m,_,C=this.animationItem.wrapper.offsetWidth,D=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>C/D?(u=C/this.globalData.compSize.w,f=C/this.globalData.compSize.w,m=0,_=(D-this.globalData.compSize.h*(C/this.globalData.compSize.w))/2):(u=D/this.globalData.compSize.h,f=D/this.globalData.compSize.h,m=(C-this.globalData.compSize.w*(D/this.globalData.compSize.h))/2,_=0);var z=this.resizerElem.style;z.webkitTransform="matrix3d("+u+",0,0,0,0,"+f+",0,0,0,0,1,0,"+m+","+_+",0,1)",z.transform=z.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var u,f=this.globalData.compSize.w,m=this.globalData.compSize.h,_=this.threeDElements.length;for(u=0;u<_;u+=1){var C=this.threeDElements[u].perspectiveElem.style;C.webkitPerspective=Math.sqrt(Math.pow(f,2)+Math.pow(m,2))+"px",C.perspective=C.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(u){var f,m=u.length,_=createTag("div");for(f=0;f<m;f+=1)if(u[f].xt){var C=this.createComp(u[f],_,this.globalData.comp,null);C.initExpressions(),this.globalData.projectInterface.registerComposition(C)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(u,f){for(var m,_=0;_<f;)this.elements[_]&&this.elements[_].getBaseElement&&(m=this.elements[_].getBaseElement()),_+=1;m?this.layerElement.insertBefore(u,m):this.layerElement.appendChild(u)},HCompElement.prototype.createComp=function(u){return this.supports3d?new HCompElement(u,this.globalData,this):new SVGCompElement(u,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(u){return this.supports3d?new HCompElement(u,this.globalData,this):new SVGCompElement(u,this.globalData,this)};var Expressions=function(){var u={initExpressions:function(f){var m=0,_=[];f.renderer.compInterface=CompExpressionInterface(f.renderer),f.renderer.globalData.projectInterface.registerComposition(f.renderer),f.renderer.globalData.pushExpression=function(){m+=1},f.renderer.globalData.popExpression=function(){0==(m-=1)&&function(){var C,D=_.length;for(C=0;C<D;C+=1)_[C].release();_.length=0}()},f.renderer.globalData.registerExpressionProperty=function(C){-1===_.indexOf(C)&&_.push(C)}}};return u}();function _typeof$1(u){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},_typeof$1(u)}function seedRandom(u,f){var _=this,C=256,D=f.pow(C,6),G=f.pow(2,52),z=2*G,B=255;function Q(N){var W,k=N.length,V=this,ie=0,pe=V.i=V.j=0,me=V.S=[];for(k||(N=[k++]);ie<C;)me[ie]=ie++;for(ie=0;ie<C;ie++)me[ie]=me[pe=B&pe+N[ie%k]+(W=me[ie])],me[pe]=W;V.g=function(Ve){for(var it,je=0,qe=V.i,ot=V.j,j=V.S;Ve--;)it=j[qe=B&qe+1],je=je*C+j[B&(j[qe]=j[ot=B&ot+it])+(j[ot]=it)];return V.i=qe,V.j=ot,je}}function T(N,W){return W.i=N.i,W.j=N.j,W.S=N.S.slice(),W}function F(N,W){var k,V=[],ie=_typeof$1(N);if(W&&"object"==ie)for(k in N)try{V.push(F(N[k],W-1))}catch{}return V.length?V:"string"==ie?N:N+"\0"}function q(N,W){for(var k,V=N+"",ie=0;ie<V.length;)W[B&ie]=B&(k^=19*W[B&ie])+V.charCodeAt(ie++);return R(W)}function R(N){return String.fromCharCode.apply(0,N)}f.seedrandom=function(N,W,k){var V=[],ie=q(F((W=!0===W?{entropy:!0}:W||{}).entropy?[N,R(u)]:null===N?function(){try{var Ve=new Uint8Array(C);return(_.crypto||_.msCrypto).getRandomValues(Ve),R(Ve)}catch{var it=_.navigator,je=it&&it.plugins;return[+new Date,_,je,_.screen,R(u)]}}():N,3),V),pe=new Q(V),me=function(){for(var Ve=pe.g(6),it=D,je=0;Ve<G;)Ve=(Ve+je)*C,it*=C,je=pe.g(1);for(;Ve>=z;)Ve/=2,it/=2,je>>>=1;return(Ve+je)/it};return me.int32=function(){return 0|pe.g(4)},me.quick=function(){return pe.g(4)/4294967296},me.double=me,q(R(pe.S),u),(W.pass||k||function(Ve,it,je,qe){return qe&&(qe.S&&T(qe,pe),Ve.state=function(){return T(pe,{})}),je?(f.random=Ve,it):Ve})(me,ie,"global"in W?W.global:this==f,W.state)},q(f.random(),u)}function initialize$2(u){seedRandom([],u)}var propTypes={SHAPE:"shape"};function _typeof(u){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},_typeof(u)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(u){return u.constructor===Array||u.constructor===Float32Array}function isNumerable(u,f){return"number"===u||"boolean"===u||"string"===u||f instanceof Number}function $bm_neg(u){var f=_typeof(u);if("number"===f||"boolean"===f||u instanceof Number)return-u;if($bm_isInstanceOfArray(u)){var m,_=u.length,C=[];for(m=0;m<_;m+=1)C[m]=-u[m];return C}return u.propType?u.v:-u}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(u,f){var m=_typeof(u),_=_typeof(f);if("string"===m||"string"===_||isNumerable(m,u)&&isNumerable(_,f))return u+f;if($bm_isInstanceOfArray(u)&&isNumerable(_,f))return(u=u.slice(0))[0]+=f,u;if(isNumerable(m,u)&&$bm_isInstanceOfArray(f))return(f=f.slice(0))[0]=u+f[0],f;if($bm_isInstanceOfArray(u)&&$bm_isInstanceOfArray(f)){for(var C=0,D=u.length,G=f.length,z=[];C<D||C<G;)z[C]=("number"==typeof u[C]||u[C]instanceof Number)&&("number"==typeof f[C]||f[C]instanceof Number)?u[C]+f[C]:void 0===f[C]?u[C]:u[C]||f[C],C+=1;return z}return 0}var add=sum;function sub(u,f){var m=_typeof(u),_=_typeof(f);if(isNumerable(m,u)&&isNumerable(_,f))return"string"===m&&(u=parseInt(u,10)),"string"===_&&(f=parseInt(f,10)),u-f;if($bm_isInstanceOfArray(u)&&isNumerable(_,f))return(u=u.slice(0))[0]-=f,u;if(isNumerable(m,u)&&$bm_isInstanceOfArray(f))return(f=f.slice(0))[0]=u-f[0],f;if($bm_isInstanceOfArray(u)&&$bm_isInstanceOfArray(f)){for(var C=0,D=u.length,G=f.length,z=[];C<D||C<G;)z[C]=("number"==typeof u[C]||u[C]instanceof Number)&&("number"==typeof f[C]||f[C]instanceof Number)?u[C]-f[C]:void 0===f[C]?u[C]:u[C]||f[C],C+=1;return z}return 0}function mul(u,f){var m,_,C,D=_typeof(u),G=_typeof(f);if(isNumerable(D,u)&&isNumerable(G,f))return u*f;if($bm_isInstanceOfArray(u)&&isNumerable(G,f)){for(m=createTypedArray("float32",C=u.length),_=0;_<C;_+=1)m[_]=u[_]*f;return m}if(isNumerable(D,u)&&$bm_isInstanceOfArray(f)){for(m=createTypedArray("float32",C=f.length),_=0;_<C;_+=1)m[_]=u*f[_];return m}return 0}function div(u,f){var m,_,C,D=_typeof(u),G=_typeof(f);if(isNumerable(D,u)&&isNumerable(G,f))return u/f;if($bm_isInstanceOfArray(u)&&isNumerable(G,f)){for(m=createTypedArray("float32",C=u.length),_=0;_<C;_+=1)m[_]=u[_]/f;return m}if(isNumerable(D,u)&&$bm_isInstanceOfArray(f)){for(m=createTypedArray("float32",C=f.length),_=0;_<C;_+=1)m[_]=u/f[_];return m}return 0}function mod(u,f){return"string"==typeof u&&(u=parseInt(u,10)),"string"==typeof f&&(f=parseInt(f,10)),u%f}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(u,f,m){if(f>m){var _=m;m=f,f=_}return Math.min(Math.max(u,f),m)}function radiansToDegrees(u){return u/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(u){return u*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(u,f){if("number"==typeof u||u instanceof Number)return Math.abs(u-(f=f||0));var m;f||(f=helperLengthArray);var _=Math.min(u.length,f.length),C=0;for(m=0;m<_;m+=1)C+=Math.pow(f[m]-u[m],2);return Math.sqrt(C)}function normalize(u){return div(u,length(u))}function rgbToHsl(u){var f,m,_=u[0],C=u[1],D=u[2],G=Math.max(_,C,D),z=Math.min(_,C,D),B=(G+z)/2;if(G===z)f=0,m=0;else{var Q=G-z;switch(m=B>.5?Q/(2-G-z):Q/(G+z),G){case _:f=(C-D)/Q+(C<D?6:0);break;case C:f=(D-_)/Q+2;break;case D:f=(_-C)/Q+4}f/=6}return[f,m,B,u[3]]}function hue2rgb(u,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?u+6*(f-u)*m:m<.5?f:m<2/3?u+(f-u)*(2/3-m)*6:u}function hslToRgb(u){var f,m,_,C=u[0],D=u[1],G=u[2];if(0===D)f=G,_=G,m=G;else{var z=G<.5?G*(1+D):G+D-G*D,B=2*G-z;f=hue2rgb(B,z,C+1/3),m=hue2rgb(B,z,C),_=hue2rgb(B,z,C-1/3)}return[f,m,_,u[3]]}function linear(u,f,m,_,C){if(void 0!==_&&void 0!==C||(_=f,C=m,f=0,m=1),m<f){var D=m;m=f,f=D}if(u<=f)return _;if(u>=m)return C;var G,z=m===f?0:(u-f)/(m-f);if(!_.length)return _+(C-_)*z;var B=_.length,Q=createTypedArray("float32",B);for(G=0;G<B;G+=1)Q[G]=_[G]+(C[G]-_[G])*z;return Q}function random(u,f){if(void 0===f&&(void 0===u?(u=0,f=1):(f=u,u=void 0)),f.length){var m,_=f.length;u||(u=createTypedArray("float32",_));var C=createTypedArray("float32",_),D=BMMath.random();for(m=0;m<_;m+=1)C[m]=u[m]+D*(f[m]-u[m]);return C}return void 0===u&&(u=0),u+BMMath.random()*(f-u)}function createPath(u,f,m,_){var C,D=u.length,G=shapePool.newElement();G.setPathData(!!_,D);var z,B,Q=[0,0];for(C=0;C<D;C+=1)G.setTripleAt(u[C][0],u[C][1],(B=m&&m[C]?m[C]:Q)[0]+u[C][0],B[1]+u[C][1],(z=f&&f[C]?f[C]:Q)[0]+u[C][0],z[1]+u[C][1],C,!0);return G}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(u,f){var m,_,C=this.pv.length?this.pv.length:1,D=createTypedArray("float32",C),G=Math.floor(5*time);for(m=0,_=0;m<G;){for(_=0;_<C;_+=1)D[_]+=-f+2*f*BMMath.random();m+=1}var z=5*time,B=z-Math.floor(z),Q=createTypedArray("float32",C);if(C>1){for(_=0;_<C;_+=1)Q[_]=this.pv[_]+D[_]+(-f+2*f*BMMath.random())*B;return Q}return this.pv+D[0]+(-f+2*f*BMMath.random())*B}.bind(this);function loopInDuration(u,f){return loopIn(u,f,!0)}function loopOutDuration(u,f){return loopOut(u,f,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(u,f){var m=[f[0]-u[0],f[1]-u[1],f[2]-u[2]],_=Math.atan2(m[0],Math.sqrt(m[1]*m[1]+m[2]*m[2]))/degToRads;return[-Math.atan2(m[1],m[2])/degToRads,_,0]}function easeOut(u,f,m,_,C){return applyEase(easeOutBez,u,f,m,_,C)}function easeIn(u,f,m,_,C){return applyEase(easeInBez,u,f,m,_,C)}function ease(u,f,m,_,C){return applyEase(easeInOutBez,u,f,m,_,C)}function applyEase(u,f,m,_,C,D){void 0===C?(C=m,D=_):f=(f-m)/(_-m),f>1?f=1:f<0&&(f=0);var G=u(f);if($bm_isInstanceOfArray(C)){var z,B=C.length,Q=createTypedArray("float32",B);for(z=0;z<B;z+=1)Q[z]=(D[z]-C[z])*G+C[z];return Q}return(D-C)*G+C}function nearestKey(u){var f,m,_,C=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(m=-1,(u*=elem.comp.globalData.frameRate)<data.k[0].t)m=1,_=data.k[0].t;else{for(f=0;f<C-1;f+=1){if(u===data.k[f].t){m=f+1,_=data.k[f].t;break}if(u>data.k[f].t&&u<data.k[f+1].t){u-data.k[f].t>data.k[f+1].t-u?(m=f+2,_=data.k[f+1].t):(m=f+1,_=data.k[f].t);break}}-1===m&&(m=f+1,_=data.k[f].t)}else m=0,_=0;var D={};return D.index=m,D.time=_/elem.comp.globalData.frameRate,D}function key(u){var f,m,_;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+u);f={time:data.k[u-=1].t/elem.comp.globalData.frameRate,value:[]};var C=Object.prototype.hasOwnProperty.call(data.k[u],"s")?data.k[u].s:data.k[u-1].e;for(_=C.length,m=0;m<_;m+=1)f[m]=C[m],f.value[m]=C[m];return f}function framesToTime(u,f){return f||(f=elem.comp.globalData.frameRate),u/f}function timeToFrames(u,f){return u||0===u||(u=time),f||(f=elem.comp.globalData.frameRate),u*f}function seedRandom(u){BMMath.seedrandom(randSeed+u)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(u,f){return"string"==typeof value?void 0===f?value.substring(u):value.substring(u,f):""}function substr(u,f){return"string"==typeof value?void 0===f?value.substr(u):value.substr(u,f):""}function posterizeTime(u){time=0===u?0:Math.floor(time*u)/u,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(u){return value=u,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(u,f,m){f.x&&(m.k=!0,m.x=!0,m.initiateExpression=ExpressionManager.initiateExpression,m.effectsSequence.push(m.initiateExpression(u,f,m).bind(m)))},getSpeedAtTime:function(u){var f=this.getValueAtTime(u),m=this.getValueAtTime(u+-.01),_=0;if(f.length){var C;for(C=0;C<f.length;C+=1)_+=Math.pow(m[C]-f[C],2);_=100*Math.sqrt(_)}else _=0;return _},getVelocityAtTime:function(u){if(void 0!==this.vel)return this.vel;var f,m,_=-.001,C=this.getValueAtTime(u),D=this.getValueAtTime(u+_);if(C.length)for(f=createTypedArray("float32",C.length),m=0;m<C.length;m+=1)f[m]=(D[m]-C[m])/_;else f=(D-C)/_;return f},getValueAtTime:function(u){return u*=this.elem.globalData.frameRate,(u-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<u?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(u,this._cachingAtTime),this._cachingAtTime.lastFrame=u),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(u){this.propertyGroup=u}};function addPropertyDecorator(){function u(F,q,R){if(!this.k||!this.keyframes)return this.pv;F=F?F.toLowerCase():"";var N,W,k,V,ie,pe=this.comp.renderedFrame,me=this.keyframes,Ve=me[me.length-1].t;if(pe<=Ve)return this.pv;if(R?W=Ve-(N=q?Math.abs(Ve-this.elem.comp.globalData.frameRate*q):Math.max(0,Ve-this.elem.data.ip)):((!q||q>me.length-1)&&(q=me.length-1),N=Ve-(W=me[me.length-1-q].t)),"pingpong"===F){if(Math.floor((pe-W)/N)%2!=0)return this.getValueAtTime((N-(pe-W)%N+W)/this.comp.globalData.frameRate,0)}else{if("offset"===F){var it=this.getValueAtTime(W/this.comp.globalData.frameRate,0),je=this.getValueAtTime(Ve/this.comp.globalData.frameRate,0),qe=this.getValueAtTime(((pe-W)%N+W)/this.comp.globalData.frameRate,0),ot=Math.floor((pe-W)/N);if(this.pv.length){for(V=(ie=new Array(it.length)).length,k=0;k<V;k+=1)ie[k]=(je[k]-it[k])*ot+qe[k];return ie}return(je-it)*ot+qe}if("continue"===F){var j=this.getValueAtTime(Ve/this.comp.globalData.frameRate,0),Ie=this.getValueAtTime((Ve-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(V=(ie=new Array(j.length)).length,k=0;k<V;k+=1)ie[k]=j[k]+(pe-Ve)/this.comp.globalData.frameRate*(j[k]-Ie[k])/5e-4;return ie}return j+(pe-Ve)/.001*(j-Ie)}}return this.getValueAtTime(((pe-W)%N+W)/this.comp.globalData.frameRate,0)}function f(F,q,R){if(!this.k)return this.pv;F=F?F.toLowerCase():"";var N,W,k,V,ie,pe=this.comp.renderedFrame,me=this.keyframes,Ve=me[0].t;if(pe>=Ve)return this.pv;if(R?W=Ve+(N=q?Math.abs(this.elem.comp.globalData.frameRate*q):Math.max(0,this.elem.data.op-Ve)):((!q||q>me.length-1)&&(q=me.length-1),N=(W=me[q].t)-Ve),"pingpong"===F){if(Math.floor((Ve-pe)/N)%2==0)return this.getValueAtTime(((Ve-pe)%N+Ve)/this.comp.globalData.frameRate,0)}else{if("offset"===F){var it=this.getValueAtTime(Ve/this.comp.globalData.frameRate,0),je=this.getValueAtTime(W/this.comp.globalData.frameRate,0),qe=this.getValueAtTime((N-(Ve-pe)%N+Ve)/this.comp.globalData.frameRate,0),ot=Math.floor((Ve-pe)/N)+1;if(this.pv.length){for(V=(ie=new Array(it.length)).length,k=0;k<V;k+=1)ie[k]=qe[k]-(je[k]-it[k])*ot;return ie}return qe-(je-it)*ot}if("continue"===F){var j=this.getValueAtTime(Ve/this.comp.globalData.frameRate,0),Ie=this.getValueAtTime((Ve+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(V=(ie=new Array(j.length)).length,k=0;k<V;k+=1)ie[k]=j[k]+(j[k]-Ie[k])*(Ve-pe)/.001;return ie}return j+(j-Ie)*(Ve-pe)/.001}}return this.getValueAtTime((N-((Ve-pe)%N+Ve))/this.comp.globalData.frameRate,0)}function m(F,q){if(!this.k)return this.pv;if(F=.5*(F||.4),(q=Math.floor(q||5))<=1)return this.pv;var R,N,W=this.comp.renderedFrame/this.comp.globalData.frameRate,k=W-F,V=q>1?(W+F-k)/(q-1):1,ie=0,pe=0;for(R=this.pv.length?createTypedArray("float32",this.pv.length):0;ie<q;){if(N=this.getValueAtTime(k+ie*V),this.pv.length)for(pe=0;pe<this.pv.length;pe+=1)R[pe]+=N[pe];else R+=N;ie+=1}if(this.pv.length)for(pe=0;pe<this.pv.length;pe+=1)R[pe]/=q;else R/=q;return R}function _(F){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var q=this._transformCachingAtTime.v;if(q.cloneFromProps(this.pre.props),this.appliedTransformations<1){var R=this.a.getValueAtTime(F);q.translate(-R[0]*this.a.mult,-R[1]*this.a.mult,R[2]*this.a.mult)}if(this.appliedTransformations<2){var N=this.s.getValueAtTime(F);q.scale(N[0]*this.s.mult,N[1]*this.s.mult,N[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var W=this.sk.getValueAtTime(F),k=this.sa.getValueAtTime(F);q.skewFromAxis(-W*this.sk.mult,k*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var V=this.r.getValueAtTime(F);q.rotate(-V*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var ie=this.rz.getValueAtTime(F),pe=this.ry.getValueAtTime(F),me=this.rx.getValueAtTime(F),Ve=this.or.getValueAtTime(F);q.rotateZ(-ie*this.rz.mult).rotateY(pe*this.ry.mult).rotateX(me*this.rx.mult).rotateZ(-Ve[2]*this.or.mult).rotateY(Ve[1]*this.or.mult).rotateX(Ve[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var it=this.px.getValueAtTime(F),je=this.py.getValueAtTime(F);if(this.data.p.z){var qe=this.pz.getValueAtTime(F);q.translate(it*this.px.mult,je*this.py.mult,-qe*this.pz.mult)}else q.translate(it*this.px.mult,je*this.py.mult,0)}else{var ot=this.p.getValueAtTime(F);q.translate(ot[0]*this.p.mult,ot[1]*this.p.mult,-ot[2]*this.p.mult)}return q}function C(){return this.v.clone(new Matrix)}var D=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(F,q,R){var N=D(F,q,R);return N.getValueAtTime=N.dynamicProperties.length?_.bind(N):C.bind(N),N.setGroupProperty=expressionHelpers.setGroupProperty,N};var G=PropertyFactory.getProp;PropertyFactory.getProp=function(F,q,R,N,W){var k=G(F,q,R,N,W);k.getValueAtTime=k.kf?expressionHelpers.getValueAtTime.bind(k):expressionHelpers.getStaticValueAtTime.bind(k),k.setGroupProperty=expressionHelpers.setGroupProperty,k.loopOut=u,k.loopIn=f,k.smooth=m,k.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(k),k.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(k),k.numKeys=1===q.a?q.k.length:0,k.propertyIndex=q.ix;var V=0;return 0!==R&&(V=createTypedArray("float32",1===q.a?q.k[0].s.length:q.k.length)),k._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:V},expressionHelpers.searchExpressions(F,q,k),k.k&&W.addDynamicProperty(k),k};var z=ShapePropertyFactory.getConstructorFunction(),B=ShapePropertyFactory.getKeyframedConstructorFunction();function Q(){}Q.prototype={vertices:function(F,q){this.k&&this.getValue();var R,N=this.v;void 0!==q&&(N=this.getValueAtTime(q,0));var W=N._length,k=N[F],V=N.v,ie=createSizedArray(W);for(R=0;R<W;R+=1)ie[R]="i"===F||"o"===F?[k[R][0]-V[R][0],k[R][1]-V[R][1]]:[k[R][0],k[R][1]];return ie},points:function(F){return this.vertices("v",F)},inTangents:function(F){return this.vertices("i",F)},outTangents:function(F){return this.vertices("o",F)},isClosed:function(){return this.v.c},pointOnPath:function(F,q){var R=this.v;void 0!==q&&(R=this.getValueAtTime(q,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(R));for(var N,W=this._segmentsLength,k=W.lengths,V=W.totalLength*F,ie=0,pe=k.length,me=0;ie<pe;){if(me+k[ie].addedLength>V){var it=R.c&&ie===pe-1?0:ie+1;N=bez.getPointInSegment(R.v[ie],R.v[it],R.o[ie],R.i[it],(V-me)/k[ie].addedLength,k[ie]);break}me+=k[ie].addedLength,ie+=1}return N||(N=R.c?[R.v[0][0],R.v[0][1]]:[R.v[R._length-1][0],R.v[R._length-1][1]]),N},vectorOnPath:function(F,q,R){1==F?F=this.v.c:0==F&&(F=.999);var N=this.pointOnPath(F,q),W=this.pointOnPath(F+.001,q),k=W[0]-N[0],V=W[1]-N[1],ie=Math.sqrt(Math.pow(k,2)+Math.pow(V,2));return 0===ie?[0,0]:"tangent"===R?[k/ie,V/ie]:[-V/ie,k/ie]},tangentOnPath:function(F,q){return this.vectorOnPath(F,q,"tangent")},normalOnPath:function(F,q){return this.vectorOnPath(F,q,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Q],z),extendPrototype([Q],B),B.prototype.getValueAtTime=function(F){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),F*=this.elem.globalData.frameRate,(F-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<F?this._caching.lastIndex:0,this._cachingAtTime.lastTime=F,this.interpolateShape(F,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},B.prototype.initiateExpression=ExpressionManager.initiateExpression;var T=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(F,q,R,N,W){var k=T(F,q,R,N,W);return k.propertyIndex=q.ix,k.lock=!1,3===R?expressionHelpers.searchExpressions(F,q.pt,k):4===R&&expressionHelpers.searchExpressions(F,q.ks,k),k.k&&F.addDynamicProperty(k),k}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(u,f){var m=this.calculateExpression(f);if(u.t!==m){var _={};return this.copyData(_,u),_.t=m.toString(),_.__complete=!1,_}return u},TextProperty.prototype.searchProperty=function(){var u=this.searchKeyframes(),f=this.searchExpressions();return this.kf=u||f,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}function SVGTintFilter(u,f,m,_,C){this.filterManager=f;var D=createNS("feColorMatrix");D.setAttribute("type","matrix"),D.setAttribute("color-interpolation-filters","linearRGB"),D.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),D.setAttribute("result",_+"_tint_1"),u.appendChild(D),(D=createNS("feColorMatrix")).setAttribute("type","matrix"),D.setAttribute("color-interpolation-filters","sRGB"),D.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),D.setAttribute("result",_+"_tint_2"),u.appendChild(D),this.matrixFilter=D;var G=this.createMergeNode(_,[C,_+"_tint_1",_+"_tint_2"]);u.appendChild(G)}function SVGFillFilter(u,f,m,_){this.filterManager=f;var C=createNS("feColorMatrix");C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),C.setAttribute("result",_),u.appendChild(C),this.matrixFilter=C}function SVGStrokeEffect(u,f,m){this.initialized=!1,this.filterManager=f,this.elem=m,this.paths=[]}function SVGTritoneFilter(u,f,m,_){this.filterManager=f;var C=createNS("feColorMatrix");C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","linearRGB"),C.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),u.appendChild(C);var D=createNS("feComponentTransfer");D.setAttribute("color-interpolation-filters","sRGB"),D.setAttribute("result",_),this.matrixFilter=D;var G=createNS("feFuncR");G.setAttribute("type","table"),D.appendChild(G),this.feFuncR=G;var z=createNS("feFuncG");z.setAttribute("type","table"),D.appendChild(z),this.feFuncG=z;var B=createNS("feFuncB");B.setAttribute("type","table"),D.appendChild(B),this.feFuncB=B,u.appendChild(D)}function SVGProLevelsFilter(u,f,m,_){this.filterManager=f;var C=this.filterManager.effectElements,D=createNS("feComponentTransfer");(C[10].p.k||0!==C[10].p.v||C[11].p.k||1!==C[11].p.v||C[12].p.k||1!==C[12].p.v||C[13].p.k||0!==C[13].p.v||C[14].p.k||1!==C[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",D)),(C[17].p.k||0!==C[17].p.v||C[18].p.k||1!==C[18].p.v||C[19].p.k||1!==C[19].p.v||C[20].p.k||0!==C[20].p.v||C[21].p.k||1!==C[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",D)),(C[24].p.k||0!==C[24].p.v||C[25].p.k||1!==C[25].p.v||C[26].p.k||1!==C[26].p.v||C[27].p.k||0!==C[27].p.v||C[28].p.k||1!==C[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",D)),(C[31].p.k||0!==C[31].p.v||C[32].p.k||1!==C[32].p.v||C[33].p.k||1!==C[33].p.v||C[34].p.k||0!==C[34].p.v||C[35].p.k||1!==C[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",D)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(D.setAttribute("color-interpolation-filters","sRGB"),u.appendChild(D)),(C[3].p.k||0!==C[3].p.v||C[4].p.k||1!==C[4].p.v||C[5].p.k||1!==C[5].p.v||C[6].p.k||0!==C[6].p.v||C[7].p.k||1!==C[7].p.v)&&((D=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),D.setAttribute("result",_),u.appendChild(D),this.feFuncRComposed=this.createFeFunc("feFuncR",D),this.feFuncGComposed=this.createFeFunc("feFuncG",D),this.feFuncBComposed=this.createFeFunc("feFuncB",D))}function SVGDropShadowEffect(u,f,m,_,C){var D=f.container.globalData.renderConfig.filterSize,G=f.data.fs||D;u.setAttribute("x",G.x||D.x),u.setAttribute("y",G.y||D.y),u.setAttribute("width",G.width||D.width),u.setAttribute("height",G.height||D.height),this.filterManager=f;var z=createNS("feGaussianBlur");z.setAttribute("in","SourceAlpha"),z.setAttribute("result",_+"_drop_shadow_1"),z.setAttribute("stdDeviation","0"),this.feGaussianBlur=z,u.appendChild(z);var B=createNS("feOffset");B.setAttribute("dx","25"),B.setAttribute("dy","0"),B.setAttribute("in",_+"_drop_shadow_1"),B.setAttribute("result",_+"_drop_shadow_2"),this.feOffset=B,u.appendChild(B);var Q=createNS("feFlood");Q.setAttribute("flood-color","#00ff00"),Q.setAttribute("flood-opacity","1"),Q.setAttribute("result",_+"_drop_shadow_3"),this.feFlood=Q,u.appendChild(Q);var T=createNS("feComposite");T.setAttribute("in",_+"_drop_shadow_3"),T.setAttribute("in2",_+"_drop_shadow_2"),T.setAttribute("operator","in"),T.setAttribute("result",_+"_drop_shadow_4"),u.appendChild(T);var F=this.createMergeNode(_,[_+"_drop_shadow_4",C]);u.appendChild(F)}SVGComposableEffect.prototype={createMergeNode:function(u,f){var m,_,C=createNS("feMerge");for(C.setAttribute("result",u),_=0;_<f.length;_+=1)(m=createNS("feMergeNode")).setAttribute("in",f[_]),C.appendChild(m),C.appendChild(m);return C}},extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var f=this.filterManager.effectElements[0].p.v,m=this.filterManager.effectElements[1].p.v;this.matrixFilter.setAttribute("values",m[0]-f[0]+" 0 0 0 "+f[0]+" "+(m[1]-f[1])+" 0 0 0 "+f[1]+" "+(m[2]-f[2])+" 0 0 0 "+f[2]+" 0 0 0 "+this.filterManager.effectElements[2].p.v/100+" 0")}},SVGFillFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var f=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+f[0]+" 0 0 0 0 "+f[1]+" 0 0 0 0 "+f[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var u,f,m,_,C=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(_=this.elem.maskManager.masksProperties.length,m=0):_=1+(m=this.filterManager.effectElements[0].p.v-1),(f=createNS("g")).setAttribute("fill","none"),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-dashoffset",1);m<_;m+=1)u=createNS("path"),f.appendChild(u),this.paths.push({p:u,m});if(3===this.filterManager.effectElements[10].p.v){var D=createNS("mask"),G=createElementID();D.setAttribute("id",G),D.setAttribute("mask-type","alpha"),D.appendChild(f),this.elem.globalData.defs.appendChild(D);var z=createNS("g");for(z.setAttribute("mask","url("+getLocationHref()+"#"+G+")");C[0];)z.appendChild(C[0]);this.elem.layerElement.appendChild(z),this.masker=D,f.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(C=this.elem.layerElement.children||this.elem.layerElement.childNodes;C.length;)this.elem.layerElement.removeChild(C[0]);this.elem.layerElement.appendChild(f),this.elem.layerElement.removeAttribute("mask"),f.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=f},SVGStrokeEffect.prototype.renderFrame=function(u){var f;this.initialized||this.initialize();var m,_,C=this.paths.length;for(f=0;f<C;f+=1)if(-1!==this.paths[f].m&&(m=this.elem.maskManager.viewData[this.paths[f].m],_=this.paths[f].p,(u||this.filterManager._mdf||m.prop._mdf)&&_.setAttribute("d",m.lastPath),u||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||m.prop._mdf)){var D;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var G=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),z=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),B=_.getTotalLength();D="0 0 0 "+B*G+" ";var Q,q=Math.floor(B*(z-G)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(Q=0;Q<q;Q+=1)D+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";D+="0 "+10*B+" 0 0"}else D="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;_.setAttribute("stroke-dasharray",D)}if((u||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(u||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(u||this.filterManager.effectElements[3].p._mdf)){var R=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*R[0])+","+bmFloor(255*R[1])+","+bmFloor(255*R[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var f=this.filterManager.effectElements[0].p.v,m=this.filterManager.effectElements[1].p.v,_=this.filterManager.effectElements[2].p.v,D=_[1]+" "+m[1]+" "+f[1],G=_[2]+" "+m[2]+" "+f[2];this.feFuncR.setAttribute("tableValues",_[0]+" "+m[0]+" "+f[0]),this.feFuncG.setAttribute("tableValues",D),this.feFuncB.setAttribute("tableValues",G)}},SVGProLevelsFilter.prototype.createFeFunc=function(u,f){var m=createNS(u);return m.setAttribute("type","table"),f.appendChild(m),m},SVGProLevelsFilter.prototype.getTableValue=function(u,f,m,_,C){for(var D,G,z=0,B=Math.min(u,f),Q=Math.max(u,f),T=Array.call(null,{length:256}),F=0,q=C-_,R=f-u;z<=256;)G=(D=z/256)<=B?R<0?C:_:D>=Q?R<0?_:C:_+q*Math.pow((D-u)/R,1/m),T[F]=G,F+=1,z+=256/255;return T.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var f,m=this.filterManager.effectElements;this.feFuncRComposed&&(u||m[3].p._mdf||m[4].p._mdf||m[5].p._mdf||m[6].p._mdf||m[7].p._mdf)&&(f=this.getTableValue(m[3].p.v,m[4].p.v,m[5].p.v,m[6].p.v,m[7].p.v),this.feFuncRComposed.setAttribute("tableValues",f),this.feFuncGComposed.setAttribute("tableValues",f),this.feFuncBComposed.setAttribute("tableValues",f)),this.feFuncR&&(u||m[10].p._mdf||m[11].p._mdf||m[12].p._mdf||m[13].p._mdf||m[14].p._mdf)&&(f=this.getTableValue(m[10].p.v,m[11].p.v,m[12].p.v,m[13].p.v,m[14].p.v),this.feFuncR.setAttribute("tableValues",f)),this.feFuncG&&(u||m[17].p._mdf||m[18].p._mdf||m[19].p._mdf||m[20].p._mdf||m[21].p._mdf)&&(f=this.getTableValue(m[17].p.v,m[18].p.v,m[19].p.v,m[20].p.v,m[21].p.v),this.feFuncG.setAttribute("tableValues",f)),this.feFuncB&&(u||m[24].p._mdf||m[25].p._mdf||m[26].p._mdf||m[27].p._mdf||m[28].p._mdf)&&(f=this.getTableValue(m[24].p.v,m[25].p.v,m[26].p.v,m[27].p.v,m[28].p.v),this.feFuncB.setAttribute("tableValues",f)),this.feFuncA&&(u||m[31].p._mdf||m[32].p._mdf||m[33].p._mdf||m[34].p._mdf||m[35].p._mdf)&&(f=this.getTableValue(m[31].p.v,m[32].p.v,m[33].p.v,m[34].p.v,m[35].p.v),this.feFuncA.setAttribute("tableValues",f))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){if((u||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),u||this.filterManager.effectElements[0].p._mdf){var f=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*f[0]),Math.round(255*f[1]),Math.round(255*f[2])))}if((u||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),u||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var m=this.filterManager.effectElements[3].p.v,_=(this.filterManager.effectElements[2].p.v-90)*degToRads,C=m*Math.cos(_),D=m*Math.sin(_);this.feOffset.setAttribute("dx",C),this.feOffset.setAttribute("dy",D)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(u,f,m){this.initialized=!1,this.filterManager=f,this.filterElem=u,this.elem=m,m.matteElement=createNS("g"),m.matteElement.appendChild(m.layerElement),m.matteElement.appendChild(m.transformedElement),m.baseElement=m.matteElement}function SVGGaussianBlurEffect(u,f,m,_){u.setAttribute("x","-100%"),u.setAttribute("y","-100%"),u.setAttribute("width","300%"),u.setAttribute("height","300%"),this.filterManager=f;var C=createNS("feGaussianBlur");C.setAttribute("result",_),u.appendChild(C),this.feGaussianBlur=C}return SVGMatte3Effect.prototype.findSymbol=function(u){for(var f=0,m=_svgMatteSymbols.length;f<m;){if(_svgMatteSymbols[f]===u)return _svgMatteSymbols[f];f+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(u,f){var m=u.layerElement.parentNode;if(m){for(var _,C=m.children,D=0,G=C.length;D<G&&C[D]!==u.layerElement;)D+=1;D<=G-2&&(_=C[D+1]);var z=createNS("use");z.setAttribute("href","#"+f),_?m.insertBefore(z,_):m.appendChild(z)}},SVGMatte3Effect.prototype.setElementAsMask=function(u,f){if(!this.findSymbol(f)){var m=createElementID(),_=createNS("mask");_.setAttribute("id",f.layerId),_.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(f);var C=u.globalData.defs;C.appendChild(_);var D=createNS("symbol");D.setAttribute("id",m),this.replaceInParent(f,m),D.appendChild(f.layerElement),C.appendChild(D);var G=createNS("use");G.setAttribute("href","#"+m),_.appendChild(G),f.data.hd=!1,f.show()}u.setMatte(f.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var u=this.filterManager.effectElements[0].p.v,f=this.elem.comp.elements,m=0,_=f.length;m<_;)f[m]&&f[m].data.ind===u&&this.setElementAsMask(this.elem,f[m]),m+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var f=.3*this.filterManager.effectElements[0].p.v,m=this.filterManager.effectElements[1].p.v;this.feGaussianBlur.setAttribute("stdDeviation",(3==m?0:f)+" "+(2==m?0:f)),this.feGaussianBlur.setAttribute("edgeMode",1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate")}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),setExpressionsPlugin(Expressions),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=f())},5861:(u,f,m)=>{"use strict";function _(D,G,z,B,Q,T,F){try{var q=D[T](F),R=q.value}catch(N){return void z(N)}q.done?G(R):Promise.resolve(R).then(B,Q)}function C(D){return function(){var G=this,z=arguments;return new Promise(function(B,Q){var T=D.apply(G,z);function F(R){_(T,B,Q,F,q,"next",R)}function q(R){_(T,B,Q,F,q,"throw",R)}F(void 0)})}}m.d(f,{Z:()=>C})}},u=>{u(u.s=824)}]);